## Server Relay (Host ⇄ Client)
- [x] Replace WebRTC experiment with a WebSocket relay server (`server/`)
- [x] Swap frontend store to server-link client with reconnect logic
- [ ] Persist server session logs to disk for after-action review
- [ ] Add optional shared secret on session creation before exposing on the network
- [ ] Add server CLI flag to enable TLS termination when running outside LAN

## Field Sync UX
- [x] Rename the overlay + UI copy away from "P2P"
- [x] Keep QR + code join flow using the new relay
- [ ] Surface per-peer freshness (last GPS packet age) in the Connection Manager
- [ ] Allow HQ to request a forced resync/ping from any field device
- [ ] Let field devices download the latest host snapshot into their local routes list

## Offline Maps (Web App Compatible)
- [ ] Use MapLibre GL JS with vector tiles
- [ ] Implement offline tile caching via Service Worker + Cache API
- [ ] Allow selecting a region → pre-fetch `/z/x/y.pbf` tiles
- [ ] Store cached tiles in `IndexedDB` or Cache API
- [ ] Detect offline state → switch to cached map tiles
- [ ] Implement fallback if tile cache missing

## Upgraded Share System
- [ ] Add QR-based sharing for anything cross-device

## Testing Checklist
- [ ] Exercise server relay over LTE/Starlink/VPN (packet loss scenarios)
- [ ] Test offline map loading with airplane mode
- [ ] Confirm reconnect behavior after server restarts or network drops