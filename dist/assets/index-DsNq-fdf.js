function em(e,n){for(var r=0;r<n.length;r++){const l=n[r];if(typeof l!="string"&&!Array.isArray(l)){for(const d in l)if(d!=="default"&&!(d in e)){const f=Object.getOwnPropertyDescriptor(l,d);f&&Object.defineProperty(e,d,f.get?f:{enumerable:!0,get:()=>l[d]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const _ of f.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&l(_)}).observe(document,{childList:!0,subtree:!0});function r(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(d){if(d.ep)return;d.ep=!0;const f=r(d);fetch(d.href,f)}})();var wu=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function Cu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var V1={exports:{}},Eu={},W1={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wa=Symbol.for("react.element"),tm=Symbol.for("react.portal"),nm=Symbol.for("react.fragment"),im=Symbol.for("react.strict_mode"),rm=Symbol.for("react.profiler"),sm=Symbol.for("react.provider"),om=Symbol.for("react.context"),am=Symbol.for("react.forward_ref"),lm=Symbol.for("react.suspense"),um=Symbol.for("react.memo"),cm=Symbol.for("react.lazy"),Kd=Symbol.iterator;function hm(e){return e===null||typeof e!="object"?null:(e=Kd&&e[Kd]||e["@@iterator"],typeof e=="function"?e:null)}var Z1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G1=Object.assign,X1={};function Oo(e,n,r){this.props=e,this.context=n,this.refs=X1,this.updater=r||Z1}Oo.prototype.isReactComponent={};Oo.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};Oo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Y1(){}Y1.prototype=Oo.prototype;function Oh(e,n,r){this.props=e,this.context=n,this.refs=X1,this.updater=r||Z1}var kh=Oh.prototype=new Y1;kh.constructor=Oh;G1(kh,Oo.prototype);kh.isPureReactComponent=!0;var Qd=Array.isArray,K1=Object.prototype.hasOwnProperty,Mh={current:null},Q1={key:!0,ref:!0,__self:!0,__source:!0};function q1(e,n,r){var l,d={},f=null,_=null;if(n!=null)for(l in n.ref!==void 0&&(_=n.ref),n.key!==void 0&&(f=""+n.key),n)K1.call(n,l)&&!Q1.hasOwnProperty(l)&&(d[l]=n[l]);var x=arguments.length-2;if(x===1)d.children=r;else if(1<x){for(var C=Array(x),v=0;v<x;v++)C[v]=arguments[v+2];d.children=C}if(e&&e.defaultProps)for(l in x=e.defaultProps,x)d[l]===void 0&&(d[l]=x[l]);return{$$typeof:Wa,type:e,key:f,ref:_,props:d,_owner:Mh.current}}function dm(e,n){return{$$typeof:Wa,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function Ph(e){return typeof e=="object"&&e!==null&&e.$$typeof===Wa}function fm(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return n[r]})}var qd=/\/+/g;function Qu(e,n){return typeof e=="object"&&e!==null&&e.key!=null?fm(""+e.key):n.toString(36)}function bl(e,n,r,l,d){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var _=!1;if(e===null)_=!0;else switch(f){case"string":case"number":_=!0;break;case"object":switch(e.$$typeof){case Wa:case tm:_=!0}}if(_)return _=e,d=d(_),e=l===""?"."+Qu(_,0):l,Qd(d)?(r="",e!=null&&(r=e.replace(qd,"$&/")+"/"),bl(d,n,r,"",function(v){return v})):d!=null&&(Ph(d)&&(d=dm(d,r+(!d.key||_&&_.key===d.key?"":(""+d.key).replace(qd,"$&/")+"/")+e)),n.push(d)),1;if(_=0,l=l===""?".":l+":",Qd(e))for(var x=0;x<e.length;x++){f=e[x];var C=l+Qu(f,x);_+=bl(f,n,r,C,d)}else if(C=hm(e),typeof C=="function")for(e=C.call(e),x=0;!(f=e.next()).done;)f=f.value,C=l+Qu(f,x++),_+=bl(f,n,r,C,d);else if(f==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return _}function ol(e,n,r){if(e==null)return e;var l=[],d=0;return bl(e,l,"","",function(f){return n.call(r,f,d++)}),l}function pm(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var ri={current:null},Il={transition:null},gm={ReactCurrentDispatcher:ri,ReactCurrentBatchConfig:Il,ReactCurrentOwner:Mh};function $1(){throw Error("act(...) is not supported in production builds of React.")}ct.Children={map:ol,forEach:function(e,n,r){ol(e,function(){n.apply(this,arguments)},r)},count:function(e){var n=0;return ol(e,function(){n++}),n},toArray:function(e){return ol(e,function(n){return n})||[]},only:function(e){if(!Ph(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ct.Component=Oo;ct.Fragment=nm;ct.Profiler=rm;ct.PureComponent=Oh;ct.StrictMode=im;ct.Suspense=lm;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gm;ct.act=$1;ct.cloneElement=function(e,n,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=G1({},e.props),d=e.key,f=e.ref,_=e._owner;if(n!=null){if(n.ref!==void 0&&(f=n.ref,_=Mh.current),n.key!==void 0&&(d=""+n.key),e.type&&e.type.defaultProps)var x=e.type.defaultProps;for(C in n)K1.call(n,C)&&!Q1.hasOwnProperty(C)&&(l[C]=n[C]===void 0&&x!==void 0?x[C]:n[C])}var C=arguments.length-2;if(C===1)l.children=r;else if(1<C){x=Array(C);for(var v=0;v<C;v++)x[v]=arguments[v+2];l.children=x}return{$$typeof:Wa,type:e.type,key:d,ref:f,props:l,_owner:_}};ct.createContext=function(e){return e={$$typeof:om,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sm,_context:e},e.Consumer=e};ct.createElement=q1;ct.createFactory=function(e){var n=q1.bind(null,e);return n.type=e,n};ct.createRef=function(){return{current:null}};ct.forwardRef=function(e){return{$$typeof:am,render:e}};ct.isValidElement=Ph;ct.lazy=function(e){return{$$typeof:cm,_payload:{_status:-1,_result:e},_init:pm}};ct.memo=function(e,n){return{$$typeof:um,type:e,compare:n===void 0?null:n}};ct.startTransition=function(e){var n=Il.transition;Il.transition={};try{e()}finally{Il.transition=n}};ct.unstable_act=$1;ct.useCallback=function(e,n){return ri.current.useCallback(e,n)};ct.useContext=function(e){return ri.current.useContext(e)};ct.useDebugValue=function(){};ct.useDeferredValue=function(e){return ri.current.useDeferredValue(e)};ct.useEffect=function(e,n){return ri.current.useEffect(e,n)};ct.useId=function(){return ri.current.useId()};ct.useImperativeHandle=function(e,n,r){return ri.current.useImperativeHandle(e,n,r)};ct.useInsertionEffect=function(e,n){return ri.current.useInsertionEffect(e,n)};ct.useLayoutEffect=function(e,n){return ri.current.useLayoutEffect(e,n)};ct.useMemo=function(e,n){return ri.current.useMemo(e,n)};ct.useReducer=function(e,n,r){return ri.current.useReducer(e,n,r)};ct.useRef=function(e){return ri.current.useRef(e)};ct.useState=function(e){return ri.current.useState(e)};ct.useSyncExternalStore=function(e,n,r){return ri.current.useSyncExternalStore(e,n,r)};ct.useTransition=function(){return ri.current.useTransition()};ct.version="18.3.1";W1.exports=ct;var Q=W1.exports;const Gt=Cu(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=Q,_m=Symbol.for("react.element"),ym=Symbol.for("react.fragment"),vm=Object.prototype.hasOwnProperty,wm=mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cm={key:!0,ref:!0,__self:!0,__source:!0};function J1(e,n,r){var l,d={},f=null,_=null;r!==void 0&&(f=""+r),n.key!==void 0&&(f=""+n.key),n.ref!==void 0&&(_=n.ref);for(l in n)vm.call(n,l)&&!Cm.hasOwnProperty(l)&&(d[l]=n[l]);if(e&&e.defaultProps)for(l in n=e.defaultProps,n)d[l]===void 0&&(d[l]=n[l]);return{$$typeof:_m,type:e,key:f,ref:_,props:d,_owner:wm.current}}Eu.Fragment=ym;Eu.jsx=J1;Eu.jsxs=J1;V1.exports=Eu;var b=V1.exports,Ic={},e0={exports:{}},Ii={},t0={exports:{}},n0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(ne,pe){var he=ne.length;ne.push(pe);e:for(;0<he;){var Ce=he-1>>>1,be=ne[Ce];if(0<d(be,pe))ne[Ce]=pe,ne[he]=be,he=Ce;else break e}}function r(ne){return ne.length===0?null:ne[0]}function l(ne){if(ne.length===0)return null;var pe=ne[0],he=ne.pop();if(he!==pe){ne[0]=he;e:for(var Ce=0,be=ne.length,Ve=be>>>1;Ce<Ve;){var ve=2*(Ce+1)-1,Re=ne[ve],ge=ve+1,nt=ne[ge];if(0>d(Re,he))ge<be&&0>d(nt,Re)?(ne[Ce]=nt,ne[ge]=he,Ce=ge):(ne[Ce]=Re,ne[ve]=he,Ce=ve);else if(ge<be&&0>d(nt,he))ne[Ce]=nt,ne[ge]=he,Ce=ge;else break e}}return pe}function d(ne,pe){var he=ne.sortIndex-pe.sortIndex;return he!==0?he:ne.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var _=Date,x=_.now();e.unstable_now=function(){return _.now()-x}}var C=[],v=[],S=1,I=null,M=3,F=!1,z=!1,U=!1,ue=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(ne){for(var pe=r(v);pe!==null;){if(pe.callback===null)l(v);else if(pe.startTime<=ne)l(v),pe.sortIndex=pe.expirationTime,n(C,pe);else break;pe=r(v)}}function X(ne){if(U=!1,P(ne),!z)if(r(C)!==null)z=!0,me(ae);else{var pe=r(v);pe!==null&&fe(X,pe.startTime-ne)}}function ae(ne,pe){z=!1,U&&(U=!1,H(J),J=-1),F=!0;var he=M;try{for(P(pe),I=r(C);I!==null&&(!(I.expirationTime>pe)||ne&&!ee());){var Ce=I.callback;if(typeof Ce=="function"){I.callback=null,M=I.priorityLevel;var be=Ce(I.expirationTime<=pe);pe=e.unstable_now(),typeof be=="function"?I.callback=be:I===r(C)&&l(C),P(pe)}else l(C);I=r(C)}if(I!==null)var Ve=!0;else{var ve=r(v);ve!==null&&fe(X,ve.startTime-pe),Ve=!1}return Ve}finally{I=null,M=he,F=!1}}var se=!1,$=null,J=-1,V=5,W=-1;function ee(){return!(e.unstable_now()-W<V)}function oe(){if($!==null){var ne=e.unstable_now();W=ne;var pe=!0;try{pe=$(!0,ne)}finally{pe?Z():(se=!1,$=null)}}else se=!1}var Z;if(typeof B=="function")Z=function(){B(oe)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,G=te.port2;te.port1.onmessage=oe,Z=function(){G.postMessage(null)}}else Z=function(){ue(oe,0)};function me(ne){$=ne,se||(se=!0,Z())}function fe(ne,pe){J=ue(function(){ne(e.unstable_now())},pe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){z||F||(z=!0,me(ae))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return r(C)},e.unstable_next=function(ne){switch(M){case 1:case 2:case 3:var pe=3;break;default:pe=M}var he=M;M=pe;try{return ne()}finally{M=he}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,pe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var he=M;M=ne;try{return pe()}finally{M=he}},e.unstable_scheduleCallback=function(ne,pe,he){var Ce=e.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ce+he:Ce):he=Ce,ne){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=he+be,ne={id:S++,callback:pe,priorityLevel:ne,startTime:he,expirationTime:be,sortIndex:-1},he>Ce?(ne.sortIndex=he,n(v,ne),r(C)===null&&ne===r(v)&&(U?(H(J),J=-1):U=!0,fe(X,he-Ce))):(ne.sortIndex=be,n(C,ne),z||F||(z=!0,me(ae))),ne},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function(ne){var pe=M;return function(){var he=M;M=pe;try{return ne.apply(this,arguments)}finally{M=he}}}})(n0);t0.exports=n0;var Em=t0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am=Q,bi=Em;function Se(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i0=new Set,Sa={};function Hs(e,n){Ao(e,n),Ao(e+"Capture",n)}function Ao(e,n){for(Sa[e]=n,e=0;e<n.length;e++)i0.add(n[e])}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tc=Object.prototype.hasOwnProperty,xm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$d={},Jd={};function Sm(e){return Tc.call(Jd,e)?!0:Tc.call($d,e)?!1:xm.test(e)?Jd[e]=!0:($d[e]=!0,!1)}function bm(e,n,r,l){if(r!==null&&r.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Im(e,n,r,l){if(n===null||typeof n>"u"||bm(e,n,r,l))return!0;if(l)return!1;if(r!==null)switch(r.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function si(e,n,r,l,d,f,_){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=n,this.sanitizeURL=f,this.removeEmptyString=_}var Dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Dn[e]=new si(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Dn[n]=new si(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Dn[e]=new si(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Dn[e]=new si(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Dn[e]=new si(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Dn[e]=new si(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Dn[e]=new si(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Dn[e]=new si(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Dn[e]=new si(e,5,!1,e.toLowerCase(),null,!1,!1)});var Lh=/[\-:]([a-z])/g;function Dh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Lh,Dh);Dn[n]=new si(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Lh,Dh);Dn[n]=new si(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Lh,Dh);Dn[n]=new si(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Dn[e]=new si(e,1,!1,e.toLowerCase(),null,!1,!1)});Dn.xlinkHref=new si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Dn[e]=new si(e,1,!1,e.toLowerCase(),null,!0,!0)});function Bh(e,n,r,l){var d=Dn.hasOwnProperty(n)?Dn[n]:null;(d!==null?d.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(Im(n,r,d,l)&&(r=null),l||d===null?Sm(n)&&(r===null?e.removeAttribute(n):e.setAttribute(n,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(n=d.attributeName,l=d.attributeNamespace,r===null?e.removeAttribute(n):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,l?e.setAttributeNS(l,n,r):e.setAttribute(n,r))))}var Vr=Am.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,al=Symbol.for("react.element"),eo=Symbol.for("react.portal"),to=Symbol.for("react.fragment"),Fh=Symbol.for("react.strict_mode"),Nc=Symbol.for("react.profiler"),r0=Symbol.for("react.provider"),s0=Symbol.for("react.context"),jh=Symbol.for("react.forward_ref"),Rc=Symbol.for("react.suspense"),Oc=Symbol.for("react.suspense_list"),zh=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),o0=Symbol.for("react.offscreen"),ef=Symbol.iterator;function Yo(e){return e===null||typeof e!="object"?null:(e=ef&&e[ef]||e["@@iterator"],typeof e=="function"?e:null)}var en=Object.assign,qu;function aa(e){if(qu===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);qu=n&&n[1]||""}return`
`+qu+e}var $u=!1;function Ju(e,n){if(!e||$u)return"";$u=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(v){var l=v}Reflect.construct(e,[],n)}else{try{n.call()}catch(v){l=v}e.call(n.prototype)}else{try{throw Error()}catch(v){l=v}e()}}catch(v){if(v&&l&&typeof v.stack=="string"){for(var d=v.stack.split(`
`),f=l.stack.split(`
`),_=d.length-1,x=f.length-1;1<=_&&0<=x&&d[_]!==f[x];)x--;for(;1<=_&&0<=x;_--,x--)if(d[_]!==f[x]){if(_!==1||x!==1)do if(_--,x--,0>x||d[_]!==f[x]){var C=`
`+d[_].replace(" at new "," at ");return e.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",e.displayName)),C}while(1<=_&&0<=x);break}}}finally{$u=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?aa(e):""}function Tm(e){switch(e.tag){case 5:return aa(e.type);case 16:return aa("Lazy");case 13:return aa("Suspense");case 19:return aa("SuspenseList");case 0:case 2:case 15:return e=Ju(e.type,!1),e;case 11:return e=Ju(e.type.render,!1),e;case 1:return e=Ju(e.type,!0),e;default:return""}}function kc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case to:return"Fragment";case eo:return"Portal";case Nc:return"Profiler";case Fh:return"StrictMode";case Rc:return"Suspense";case Oc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case s0:return(e.displayName||"Context")+".Consumer";case r0:return(e._context.displayName||"Context")+".Provider";case jh:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zh:return n=e.displayName||null,n!==null?n:kc(e.type)||"Memo";case Jr:n=e._payload,e=e._init;try{return kc(e(n))}catch{}}return null}function Nm(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kc(n);case 8:return n===Fh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function fs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function a0(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Rm(e){var n=a0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,f=r.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(_){l=""+_,f.call(this,_)}}),Object.defineProperty(e,n,{enumerable:r.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ll(e){e._valueTracker||(e._valueTracker=Rm(e))}function l0(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),l="";return e&&(l=a0(e)?e.checked?"true":"false":e.value),e=l,e!==r?(n.setValue(e),!0):!1}function Wl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Mc(e,n){var r=n.checked;return en({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function tf(e,n){var r=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;r=fs(n.value!=null?n.value:r),e._wrapperState={initialChecked:l,initialValue:r,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function u0(e,n){n=n.checked,n!=null&&Bh(e,"checked",n,!1)}function Pc(e,n){u0(e,n);var r=fs(n.value),l=n.type;if(r!=null)l==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Lc(e,n.type,r):n.hasOwnProperty("defaultValue")&&Lc(e,n.type,fs(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function nf(e,n,r){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,r||n===e.value||(e.value=n),e.defaultValue=n}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Lc(e,n,r){(n!=="number"||Wl(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var la=Array.isArray;function go(e,n,r,l){if(e=e.options,n){n={};for(var d=0;d<r.length;d++)n["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=n.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&l&&(e[r].defaultSelected=!0)}else{for(r=""+fs(r),n=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function Dc(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(Se(91));return en({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rf(e,n){var r=n.value;if(r==null){if(r=n.children,n=n.defaultValue,r!=null){if(n!=null)throw Error(Se(92));if(la(r)){if(1<r.length)throw Error(Se(93));r=r[0]}n=r}n==null&&(n=""),r=n}e._wrapperState={initialValue:fs(r)}}function c0(e,n){var r=fs(n.value),l=fs(n.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),n.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),l!=null&&(e.defaultValue=""+l)}function sf(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function h0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bc(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?h0(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ul,d0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,r,l,d){MSApp.execUnsafeLocalFunction(function(){return e(n,r,l,d)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(ul=ul||document.createElement("div"),ul.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ul.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function ba(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Om=["Webkit","ms","Moz","O"];Object.keys(fa).forEach(function(e){Om.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),fa[n]=fa[e]})});function f0(e,n,r){return n==null||typeof n=="boolean"||n===""?"":r||typeof n!="number"||n===0||fa.hasOwnProperty(e)&&fa[e]?(""+n).trim():n+"px"}function p0(e,n){e=e.style;for(var r in n)if(n.hasOwnProperty(r)){var l=r.indexOf("--")===0,d=f0(r,n[r],l);r==="float"&&(r="cssFloat"),l?e.setProperty(r,d):e[r]=d}}var km=en({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fc(e,n){if(n){if(km[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(Se(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(Se(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(Se(61))}if(n.style!=null&&typeof n.style!="object")throw Error(Se(62))}}function jc(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zc=null;function Uh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Uc=null,mo=null,_o=null;function of(e){if(e=Xa(e)){if(typeof Uc!="function")throw Error(Se(280));var n=e.stateNode;n&&(n=Iu(n),Uc(e.stateNode,e.type,n))}}function g0(e){mo?_o?_o.push(e):_o=[e]:mo=e}function m0(){if(mo){var e=mo,n=_o;if(_o=mo=null,of(e),n)for(e=0;e<n.length;e++)of(n[e])}}function _0(e,n){return e(n)}function y0(){}var ec=!1;function v0(e,n,r){if(ec)return e(n,r);ec=!0;try{return _0(e,n,r)}finally{ec=!1,(mo!==null||_o!==null)&&(y0(),m0())}}function Ia(e,n){var r=e.stateNode;if(r===null)return null;var l=Iu(r);if(l===null)return null;r=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Se(231,n,typeof r));return r}var Hc=!1;if(jr)try{var Ko={};Object.defineProperty(Ko,"passive",{get:function(){Hc=!0}}),window.addEventListener("test",Ko,Ko),window.removeEventListener("test",Ko,Ko)}catch{Hc=!1}function Mm(e,n,r,l,d,f,_,x,C){var v=Array.prototype.slice.call(arguments,3);try{n.apply(r,v)}catch(S){this.onError(S)}}var pa=!1,Zl=null,Gl=!1,Vc=null,Pm={onError:function(e){pa=!0,Zl=e}};function Lm(e,n,r,l,d,f,_,x,C){pa=!1,Zl=null,Mm.apply(Pm,arguments)}function Dm(e,n,r,l,d,f,_,x,C){if(Lm.apply(this,arguments),pa){if(pa){var v=Zl;pa=!1,Zl=null}else throw Error(Se(198));Gl||(Gl=!0,Vc=v)}}function Vs(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function w0(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function af(e){if(Vs(e)!==e)throw Error(Se(188))}function Bm(e){var n=e.alternate;if(!n){if(n=Vs(e),n===null)throw Error(Se(188));return n!==e?null:e}for(var r=e,l=n;;){var d=r.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){r=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===r)return af(d),e;if(f===l)return af(d),n;f=f.sibling}throw Error(Se(188))}if(r.return!==l.return)r=d,l=f;else{for(var _=!1,x=d.child;x;){if(x===r){_=!0,r=d,l=f;break}if(x===l){_=!0,l=d,r=f;break}x=x.sibling}if(!_){for(x=f.child;x;){if(x===r){_=!0,r=f,l=d;break}if(x===l){_=!0,l=f,r=d;break}x=x.sibling}if(!_)throw Error(Se(189))}}if(r.alternate!==l)throw Error(Se(190))}if(r.tag!==3)throw Error(Se(188));return r.stateNode.current===r?e:n}function C0(e){return e=Bm(e),e!==null?E0(e):null}function E0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=E0(e);if(n!==null)return n;e=e.sibling}return null}var A0=bi.unstable_scheduleCallback,lf=bi.unstable_cancelCallback,Fm=bi.unstable_shouldYield,jm=bi.unstable_requestPaint,hn=bi.unstable_now,zm=bi.unstable_getCurrentPriorityLevel,Hh=bi.unstable_ImmediatePriority,x0=bi.unstable_UserBlockingPriority,Xl=bi.unstable_NormalPriority,Um=bi.unstable_LowPriority,S0=bi.unstable_IdlePriority,Au=null,Er=null;function Hm(e){if(Er&&typeof Er.onCommitFiberRoot=="function")try{Er.onCommitFiberRoot(Au,e,void 0,(e.current.flags&128)===128)}catch{}}var sr=Math.clz32?Math.clz32:Zm,Vm=Math.log,Wm=Math.LN2;function Zm(e){return e>>>=0,e===0?32:31-(Vm(e)/Wm|0)|0}var cl=64,hl=4194304;function ua(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yl(e,n){var r=e.pendingLanes;if(r===0)return 0;var l=0,d=e.suspendedLanes,f=e.pingedLanes,_=r&268435455;if(_!==0){var x=_&~d;x!==0?l=ua(x):(f&=_,f!==0&&(l=ua(f)))}else _=r&~d,_!==0?l=ua(_):f!==0&&(l=ua(f));if(l===0)return 0;if(n!==0&&n!==l&&!(n&d)&&(d=l&-l,f=n&-n,d>=f||d===16&&(f&4194240)!==0))return n;if(l&4&&(l|=r&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=l;0<n;)r=31-sr(n),d=1<<r,l|=e[r],n&=~d;return l}function Gm(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xm(e,n){for(var r=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var _=31-sr(f),x=1<<_,C=d[_];C===-1?(!(x&r)||x&l)&&(d[_]=Gm(x,n)):C<=n&&(e.expiredLanes|=x),f&=~x}}function Wc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function b0(){var e=cl;return cl<<=1,!(cl&4194240)&&(cl=64),e}function tc(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function Za(e,n,r){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-sr(n),e[n]=r}function Ym(e,n){var r=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-sr(r),f=1<<d;n[d]=0,l[d]=-1,e[d]=-1,r&=~f}}function Vh(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var l=31-sr(r),d=1<<l;d&n|e[l]&n&&(e[l]|=n),r&=~d}}var It=0;function I0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var T0,Wh,N0,R0,O0,Zc=!1,dl=[],ss=null,os=null,as=null,Ta=new Map,Na=new Map,ts=[],Km="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uf(e,n){switch(e){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Ta.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Na.delete(n.pointerId)}}function Qo(e,n,r,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:r,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},n!==null&&(n=Xa(n),n!==null&&Wh(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function Qm(e,n,r,l,d){switch(n){case"focusin":return ss=Qo(ss,e,n,r,l,d),!0;case"dragenter":return os=Qo(os,e,n,r,l,d),!0;case"mouseover":return as=Qo(as,e,n,r,l,d),!0;case"pointerover":var f=d.pointerId;return Ta.set(f,Qo(Ta.get(f)||null,e,n,r,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Na.set(f,Qo(Na.get(f)||null,e,n,r,l,d)),!0}return!1}function k0(e){var n=Ns(e.target);if(n!==null){var r=Vs(n);if(r!==null){if(n=r.tag,n===13){if(n=w0(r),n!==null){e.blockedOn=n,O0(e.priority,function(){N0(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=Gc(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);zc=l,r.target.dispatchEvent(l),zc=null}else return n=Xa(r),n!==null&&Wh(n),e.blockedOn=r,!1;n.shift()}return!0}function cf(e,n,r){Tl(e)&&r.delete(n)}function qm(){Zc=!1,ss!==null&&Tl(ss)&&(ss=null),os!==null&&Tl(os)&&(os=null),as!==null&&Tl(as)&&(as=null),Ta.forEach(cf),Na.forEach(cf)}function qo(e,n){e.blockedOn===n&&(e.blockedOn=null,Zc||(Zc=!0,bi.unstable_scheduleCallback(bi.unstable_NormalPriority,qm)))}function Ra(e){function n(d){return qo(d,e)}if(0<dl.length){qo(dl[0],e);for(var r=1;r<dl.length;r++){var l=dl[r];l.blockedOn===e&&(l.blockedOn=null)}}for(ss!==null&&qo(ss,e),os!==null&&qo(os,e),as!==null&&qo(as,e),Ta.forEach(n),Na.forEach(n),r=0;r<ts.length;r++)l=ts[r],l.blockedOn===e&&(l.blockedOn=null);for(;0<ts.length&&(r=ts[0],r.blockedOn===null);)k0(r),r.blockedOn===null&&ts.shift()}var yo=Vr.ReactCurrentBatchConfig,Kl=!0;function $m(e,n,r,l){var d=It,f=yo.transition;yo.transition=null;try{It=1,Zh(e,n,r,l)}finally{It=d,yo.transition=f}}function Jm(e,n,r,l){var d=It,f=yo.transition;yo.transition=null;try{It=4,Zh(e,n,r,l)}finally{It=d,yo.transition=f}}function Zh(e,n,r,l){if(Kl){var d=Gc(e,n,r,l);if(d===null)hc(e,n,l,Ql,r),uf(e,l);else if(Qm(d,e,n,r,l))l.stopPropagation();else if(uf(e,l),n&4&&-1<Km.indexOf(e)){for(;d!==null;){var f=Xa(d);if(f!==null&&T0(f),f=Gc(e,n,r,l),f===null&&hc(e,n,l,Ql,r),f===d)break;d=f}d!==null&&l.stopPropagation()}else hc(e,n,l,null,r)}}var Ql=null;function Gc(e,n,r,l){if(Ql=null,e=Uh(l),e=Ns(e),e!==null)if(n=Vs(e),n===null)e=null;else if(r=n.tag,r===13){if(e=w0(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Ql=e,null}function M0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zm()){case Hh:return 1;case x0:return 4;case Xl:case Um:return 16;case S0:return 536870912;default:return 16}default:return 16}}var is=null,Gh=null,Nl=null;function P0(){if(Nl)return Nl;var e,n=Gh,r=n.length,l,d="value"in is?is.value:is.textContent,f=d.length;for(e=0;e<r&&n[e]===d[e];e++);var _=r-e;for(l=1;l<=_&&n[r-l]===d[f-l];l++);return Nl=d.slice(e,1<l?1-l:void 0)}function Rl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function fl(){return!0}function hf(){return!1}function Ti(e){function n(r,l,d,f,_){this._reactName=r,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(r=e[x],this[x]=r?r(f):f[x]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?fl:hf,this.isPropagationStopped=hf,this}return en(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fl)},persist:function(){},isPersistent:fl}),n}var ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xh=Ti(ko),Ga=en({},ko,{view:0,detail:0}),e2=Ti(Ga),nc,ic,$o,xu=en({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$o&&($o&&e.type==="mousemove"?(nc=e.screenX-$o.screenX,ic=e.screenY-$o.screenY):ic=nc=0,$o=e),nc)},movementY:function(e){return"movementY"in e?e.movementY:ic}}),df=Ti(xu),t2=en({},xu,{dataTransfer:0}),n2=Ti(t2),i2=en({},Ga,{relatedTarget:0}),rc=Ti(i2),r2=en({},ko,{animationName:0,elapsedTime:0,pseudoElement:0}),s2=Ti(r2),o2=en({},ko,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),a2=Ti(o2),l2=en({},ko,{data:0}),ff=Ti(l2),u2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},c2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function d2(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=h2[e])?!!n[e]:!1}function Yh(){return d2}var f2=en({},Ga,{key:function(e){if(e.key){var n=u2[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Rl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?c2[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yh,charCode:function(e){return e.type==="keypress"?Rl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),p2=Ti(f2),g2=en({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pf=Ti(g2),m2=en({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yh}),_2=Ti(m2),y2=en({},ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),v2=Ti(y2),w2=en({},xu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),C2=Ti(w2),E2=[9,13,27,32],Kh=jr&&"CompositionEvent"in window,ga=null;jr&&"documentMode"in document&&(ga=document.documentMode);var A2=jr&&"TextEvent"in window&&!ga,L0=jr&&(!Kh||ga&&8<ga&&11>=ga),gf=" ",mf=!1;function D0(e,n){switch(e){case"keyup":return E2.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var no=!1;function x2(e,n){switch(e){case"compositionend":return B0(n);case"keypress":return n.which!==32?null:(mf=!0,gf);case"textInput":return e=n.data,e===gf&&mf?null:e;default:return null}}function S2(e,n){if(no)return e==="compositionend"||!Kh&&D0(e,n)?(e=P0(),Nl=Gh=is=null,no=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return L0&&n.locale!=="ko"?null:n.data;default:return null}}var b2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _f(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!b2[e.type]:n==="textarea"}function F0(e,n,r,l){g0(l),n=ql(n,"onChange"),0<n.length&&(r=new Xh("onChange","change",null,r,l),e.push({event:r,listeners:n}))}var ma=null,Oa=null;function I2(e){K0(e,0)}function Su(e){var n=so(e);if(l0(n))return e}function T2(e,n){if(e==="change")return n}var j0=!1;if(jr){var sc;if(jr){var oc="oninput"in document;if(!oc){var yf=document.createElement("div");yf.setAttribute("oninput","return;"),oc=typeof yf.oninput=="function"}sc=oc}else sc=!1;j0=sc&&(!document.documentMode||9<document.documentMode)}function vf(){ma&&(ma.detachEvent("onpropertychange",z0),Oa=ma=null)}function z0(e){if(e.propertyName==="value"&&Su(Oa)){var n=[];F0(n,Oa,e,Uh(e)),v0(I2,n)}}function N2(e,n,r){e==="focusin"?(vf(),ma=n,Oa=r,ma.attachEvent("onpropertychange",z0)):e==="focusout"&&vf()}function R2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Su(Oa)}function O2(e,n){if(e==="click")return Su(n)}function k2(e,n){if(e==="input"||e==="change")return Su(n)}function M2(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var ar=typeof Object.is=="function"?Object.is:M2;function ka(e,n){if(ar(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),l=Object.keys(n);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var d=r[l];if(!Tc.call(n,d)||!ar(e[d],n[d]))return!1}return!0}function wf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cf(e,n){var r=wf(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=n&&l>=n)return{node:r,offset:n-e};e=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wf(r)}}function U0(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?U0(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function H0(){for(var e=window,n=Wl();n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=Wl(e.document)}return n}function Qh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function P2(e){var n=H0(),r=e.focusedElem,l=e.selectionRange;if(n!==r&&r&&r.ownerDocument&&U0(r.ownerDocument.documentElement,r)){if(l!==null&&Qh(r)){if(n=l.start,e=l.end,e===void 0&&(e=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(e,r.value.length);else if(e=(n=r.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,f=Math.min(l.start,d);l=l.end===void 0?f:Math.min(l.end,d),!e.extend&&f>l&&(d=l,l=f,f=d),d=Cf(r,f);var _=Cf(r,l);d&&_&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==_.node||e.focusOffset!==_.offset)&&(n=n.createRange(),n.setStart(d.node,d.offset),e.removeAllRanges(),f>l?(e.addRange(n),e.extend(_.node,_.offset)):(n.setEnd(_.node,_.offset),e.addRange(n)))}}for(n=[],e=r;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)e=n[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var L2=jr&&"documentMode"in document&&11>=document.documentMode,io=null,Xc=null,_a=null,Yc=!1;function Ef(e,n,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Yc||io==null||io!==Wl(l)||(l=io,"selectionStart"in l&&Qh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),_a&&ka(_a,l)||(_a=l,l=ql(Xc,"onSelect"),0<l.length&&(n=new Xh("onSelect","select",null,n,r),e.push({event:n,listeners:l}),n.target=io)))}function pl(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var ro={animationend:pl("Animation","AnimationEnd"),animationiteration:pl("Animation","AnimationIteration"),animationstart:pl("Animation","AnimationStart"),transitionend:pl("Transition","TransitionEnd")},ac={},V0={};jr&&(V0=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function bu(e){if(ac[e])return ac[e];if(!ro[e])return e;var n=ro[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in V0)return ac[e]=n[r];return e}var W0=bu("animationend"),Z0=bu("animationiteration"),G0=bu("animationstart"),X0=bu("transitionend"),Y0=new Map,Af="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gs(e,n){Y0.set(e,n),Hs(n,[e])}for(var lc=0;lc<Af.length;lc++){var uc=Af[lc],D2=uc.toLowerCase(),B2=uc[0].toUpperCase()+uc.slice(1);gs(D2,"on"+B2)}gs(W0,"onAnimationEnd");gs(Z0,"onAnimationIteration");gs(G0,"onAnimationStart");gs("dblclick","onDoubleClick");gs("focusin","onFocus");gs("focusout","onBlur");gs(X0,"onTransitionEnd");Ao("onMouseEnter",["mouseout","mouseover"]);Ao("onMouseLeave",["mouseout","mouseover"]);Ao("onPointerEnter",["pointerout","pointerover"]);Ao("onPointerLeave",["pointerout","pointerover"]);Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F2=new Set("cancel close invalid load scroll toggle".split(" ").concat(ca));function xf(e,n,r){var l=e.type||"unknown-event";e.currentTarget=r,Dm(l,n,void 0,e),e.currentTarget=null}function K0(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],d=l.event;l=l.listeners;e:{var f=void 0;if(n)for(var _=l.length-1;0<=_;_--){var x=l[_],C=x.instance,v=x.currentTarget;if(x=x.listener,C!==f&&d.isPropagationStopped())break e;xf(d,x,v),f=C}else for(_=0;_<l.length;_++){if(x=l[_],C=x.instance,v=x.currentTarget,x=x.listener,C!==f&&d.isPropagationStopped())break e;xf(d,x,v),f=C}}}if(Gl)throw e=Vc,Gl=!1,Vc=null,e}function Vt(e,n){var r=n[Jc];r===void 0&&(r=n[Jc]=new Set);var l=e+"__bubble";r.has(l)||(Q0(n,e,2,!1),r.add(l))}function cc(e,n,r){var l=0;n&&(l|=4),Q0(r,e,l,n)}var gl="_reactListening"+Math.random().toString(36).slice(2);function Ma(e){if(!e[gl]){e[gl]=!0,i0.forEach(function(r){r!=="selectionchange"&&(F2.has(r)||cc(r,!1,e),cc(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[gl]||(n[gl]=!0,cc("selectionchange",!1,n))}}function Q0(e,n,r,l){switch(M0(n)){case 1:var d=$m;break;case 4:d=Jm;break;default:d=Zh}r=d.bind(null,n,r,e),d=void 0,!Hc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(n,r,{capture:!0,passive:d}):e.addEventListener(n,r,!0):d!==void 0?e.addEventListener(n,r,{passive:d}):e.addEventListener(n,r,!1)}function hc(e,n,r,l,d){var f=l;if(!(n&1)&&!(n&2)&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var x=l.stateNode.containerInfo;if(x===d||x.nodeType===8&&x.parentNode===d)break;if(_===4)for(_=l.return;_!==null;){var C=_.tag;if((C===3||C===4)&&(C=_.stateNode.containerInfo,C===d||C.nodeType===8&&C.parentNode===d))return;_=_.return}for(;x!==null;){if(_=Ns(x),_===null)return;if(C=_.tag,C===5||C===6){l=f=_;continue e}x=x.parentNode}}l=l.return}v0(function(){var v=f,S=Uh(r),I=[];e:{var M=Y0.get(e);if(M!==void 0){var F=Xh,z=e;switch(e){case"keypress":if(Rl(r)===0)break e;case"keydown":case"keyup":F=p2;break;case"focusin":z="focus",F=rc;break;case"focusout":z="blur",F=rc;break;case"beforeblur":case"afterblur":F=rc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=df;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=n2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=_2;break;case W0:case Z0:case G0:F=s2;break;case X0:F=v2;break;case"scroll":F=e2;break;case"wheel":F=C2;break;case"copy":case"cut":case"paste":F=a2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=pf}var U=(n&4)!==0,ue=!U&&e==="scroll",H=U?M!==null?M+"Capture":null:M;U=[];for(var B=v,P;B!==null;){P=B;var X=P.stateNode;if(P.tag===5&&X!==null&&(P=X,H!==null&&(X=Ia(B,H),X!=null&&U.push(Pa(B,X,P)))),ue)break;B=B.return}0<U.length&&(M=new F(M,z,null,r,S),I.push({event:M,listeners:U}))}}if(!(n&7)){e:{if(M=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",M&&r!==zc&&(z=r.relatedTarget||r.fromElement)&&(Ns(z)||z[zr]))break e;if((F||M)&&(M=S.window===S?S:(M=S.ownerDocument)?M.defaultView||M.parentWindow:window,F?(z=r.relatedTarget||r.toElement,F=v,z=z?Ns(z):null,z!==null&&(ue=Vs(z),z!==ue||z.tag!==5&&z.tag!==6)&&(z=null)):(F=null,z=v),F!==z)){if(U=df,X="onMouseLeave",H="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(U=pf,X="onPointerLeave",H="onPointerEnter",B="pointer"),ue=F==null?M:so(F),P=z==null?M:so(z),M=new U(X,B+"leave",F,r,S),M.target=ue,M.relatedTarget=P,X=null,Ns(S)===v&&(U=new U(H,B+"enter",z,r,S),U.target=P,U.relatedTarget=ue,X=U),ue=X,F&&z)t:{for(U=F,H=z,B=0,P=U;P;P=qs(P))B++;for(P=0,X=H;X;X=qs(X))P++;for(;0<B-P;)U=qs(U),B--;for(;0<P-B;)H=qs(H),P--;for(;B--;){if(U===H||H!==null&&U===H.alternate)break t;U=qs(U),H=qs(H)}U=null}else U=null;F!==null&&Sf(I,M,F,U,!1),z!==null&&ue!==null&&Sf(I,ue,z,U,!0)}}e:{if(M=v?so(v):window,F=M.nodeName&&M.nodeName.toLowerCase(),F==="select"||F==="input"&&M.type==="file")var ae=T2;else if(_f(M))if(j0)ae=k2;else{ae=R2;var se=N2}else(F=M.nodeName)&&F.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(ae=O2);if(ae&&(ae=ae(e,v))){F0(I,ae,r,S);break e}se&&se(e,M,v),e==="focusout"&&(se=M._wrapperState)&&se.controlled&&M.type==="number"&&Lc(M,"number",M.value)}switch(se=v?so(v):window,e){case"focusin":(_f(se)||se.contentEditable==="true")&&(io=se,Xc=v,_a=null);break;case"focusout":_a=Xc=io=null;break;case"mousedown":Yc=!0;break;case"contextmenu":case"mouseup":case"dragend":Yc=!1,Ef(I,r,S);break;case"selectionchange":if(L2)break;case"keydown":case"keyup":Ef(I,r,S)}var $;if(Kh)e:{switch(e){case"compositionstart":var J="onCompositionStart";break e;case"compositionend":J="onCompositionEnd";break e;case"compositionupdate":J="onCompositionUpdate";break e}J=void 0}else no?D0(e,r)&&(J="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(J="onCompositionStart");J&&(L0&&r.locale!=="ko"&&(no||J!=="onCompositionStart"?J==="onCompositionEnd"&&no&&($=P0()):(is=S,Gh="value"in is?is.value:is.textContent,no=!0)),se=ql(v,J),0<se.length&&(J=new ff(J,e,null,r,S),I.push({event:J,listeners:se}),$?J.data=$:($=B0(r),$!==null&&(J.data=$)))),($=A2?x2(e,r):S2(e,r))&&(v=ql(v,"onBeforeInput"),0<v.length&&(S=new ff("onBeforeInput","beforeinput",null,r,S),I.push({event:S,listeners:v}),S.data=$))}K0(I,n)})}function Pa(e,n,r){return{instance:e,listener:n,currentTarget:r}}function ql(e,n){for(var r=n+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Ia(e,r),f!=null&&l.unshift(Pa(e,f,d)),f=Ia(e,n),f!=null&&l.push(Pa(e,f,d))),e=e.return}return l}function qs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Sf(e,n,r,l,d){for(var f=n._reactName,_=[];r!==null&&r!==l;){var x=r,C=x.alternate,v=x.stateNode;if(C!==null&&C===l)break;x.tag===5&&v!==null&&(x=v,d?(C=Ia(r,f),C!=null&&_.unshift(Pa(r,C,x))):d||(C=Ia(r,f),C!=null&&_.push(Pa(r,C,x)))),r=r.return}_.length!==0&&e.push({event:n,listeners:_})}var j2=/\r\n?/g,z2=/\u0000|\uFFFD/g;function bf(e){return(typeof e=="string"?e:""+e).replace(j2,`
`).replace(z2,"")}function ml(e,n,r){if(n=bf(n),bf(e)!==n&&r)throw Error(Se(425))}function $l(){}var Kc=null,Qc=null;function qc(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var $c=typeof setTimeout=="function"?setTimeout:void 0,U2=typeof clearTimeout=="function"?clearTimeout:void 0,If=typeof Promise=="function"?Promise:void 0,H2=typeof queueMicrotask=="function"?queueMicrotask:typeof If<"u"?function(e){return If.resolve(null).then(e).catch(V2)}:$c;function V2(e){setTimeout(function(){throw e})}function dc(e,n){var r=n,l=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(l===0){e.removeChild(d),Ra(n);return}l--}else r!=="$"&&r!=="$?"&&r!=="$!"||l++;r=d}while(r);Ra(n)}function ls(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Tf(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return e;n--}else r==="/$"&&n++}e=e.previousSibling}return null}var Mo=Math.random().toString(36).slice(2),Cr="__reactFiber$"+Mo,La="__reactProps$"+Mo,zr="__reactContainer$"+Mo,Jc="__reactEvents$"+Mo,W2="__reactListeners$"+Mo,Z2="__reactHandles$"+Mo;function Ns(e){var n=e[Cr];if(n)return n;for(var r=e.parentNode;r;){if(n=r[zr]||r[Cr]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=Tf(e);e!==null;){if(r=e[Cr])return r;e=Tf(e)}return n}e=r,r=e.parentNode}return null}function Xa(e){return e=e[Cr]||e[zr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function so(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Se(33))}function Iu(e){return e[La]||null}var eh=[],oo=-1;function ms(e){return{current:e}}function Zt(e){0>oo||(e.current=eh[oo],eh[oo]=null,oo--)}function Ft(e,n){oo++,eh[oo]=e.current,e.current=n}var ps={},Zn=ms(ps),di=ms(!1),Ls=ps;function xo(e,n){var r=e.type.contextTypes;if(!r)return ps;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in r)d[f]=n[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=d),d}function fi(e){return e=e.childContextTypes,e!=null}function Jl(){Zt(di),Zt(Zn)}function Nf(e,n,r){if(Zn.current!==ps)throw Error(Se(168));Ft(Zn,n),Ft(di,r)}function q0(e,n,r){var l=e.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return r;l=l.getChildContext();for(var d in l)if(!(d in n))throw Error(Se(108,Nm(e)||"Unknown",d));return en({},r,l)}function eu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ps,Ls=Zn.current,Ft(Zn,e),Ft(di,di.current),!0}function Rf(e,n,r){var l=e.stateNode;if(!l)throw Error(Se(169));r?(e=q0(e,n,Ls),l.__reactInternalMemoizedMergedChildContext=e,Zt(di),Zt(Zn),Ft(Zn,e)):Zt(di),Ft(di,r)}var Lr=null,Tu=!1,fc=!1;function $0(e){Lr===null?Lr=[e]:Lr.push(e)}function G2(e){Tu=!0,$0(e)}function _s(){if(!fc&&Lr!==null){fc=!0;var e=0,n=It;try{var r=Lr;for(It=1;e<r.length;e++){var l=r[e];do l=l(!0);while(l!==null)}Lr=null,Tu=!1}catch(d){throw Lr!==null&&(Lr=Lr.slice(e+1)),A0(Hh,_s),d}finally{It=n,fc=!1}}return null}var ao=[],lo=0,tu=null,nu=0,ji=[],zi=0,Ds=null,Dr=1,Br="";function bs(e,n){ao[lo++]=nu,ao[lo++]=tu,tu=e,nu=n}function J0(e,n,r){ji[zi++]=Dr,ji[zi++]=Br,ji[zi++]=Ds,Ds=e;var l=Dr;e=Br;var d=32-sr(l)-1;l&=~(1<<d),r+=1;var f=32-sr(n)+d;if(30<f){var _=d-d%5;f=(l&(1<<_)-1).toString(32),l>>=_,d-=_,Dr=1<<32-sr(n)+d|r<<d|l,Br=f+e}else Dr=1<<f|r<<d|l,Br=e}function qh(e){e.return!==null&&(bs(e,1),J0(e,1,0))}function $h(e){for(;e===tu;)tu=ao[--lo],ao[lo]=null,nu=ao[--lo],ao[lo]=null;for(;e===Ds;)Ds=ji[--zi],ji[zi]=null,Br=ji[--zi],ji[zi]=null,Dr=ji[--zi],ji[zi]=null}var Si=null,xi=null,Xt=!1,rr=null;function ep(e,n){var r=Ui(5,null,null,0);r.elementType="DELETED",r.stateNode=n,r.return=e,n=e.deletions,n===null?(e.deletions=[r],e.flags|=16):n.push(r)}function Of(e,n){switch(e.tag){case 5:var r=e.type;return n=n.nodeType!==1||r.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Si=e,xi=ls(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Si=e,xi=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(r=Ds!==null?{id:Dr,overflow:Br}:null,e.memoizedState={dehydrated:n,treeContext:r,retryLane:1073741824},r=Ui(18,null,null,0),r.stateNode=n,r.return=e,e.child=r,Si=e,xi=null,!0):!1;default:return!1}}function th(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nh(e){if(Xt){var n=xi;if(n){var r=n;if(!Of(e,n)){if(th(e))throw Error(Se(418));n=ls(r.nextSibling);var l=Si;n&&Of(e,n)?ep(l,r):(e.flags=e.flags&-4097|2,Xt=!1,Si=e)}}else{if(th(e))throw Error(Se(418));e.flags=e.flags&-4097|2,Xt=!1,Si=e}}}function kf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Si=e}function _l(e){if(e!==Si)return!1;if(!Xt)return kf(e),Xt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!qc(e.type,e.memoizedProps)),n&&(n=xi)){if(th(e))throw tp(),Error(Se(418));for(;n;)ep(e,n),n=ls(n.nextSibling)}if(kf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Se(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(n===0){xi=ls(e.nextSibling);break e}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++}e=e.nextSibling}xi=null}}else xi=Si?ls(e.stateNode.nextSibling):null;return!0}function tp(){for(var e=xi;e;)e=ls(e.nextSibling)}function So(){xi=Si=null,Xt=!1}function Jh(e){rr===null?rr=[e]:rr.push(e)}var X2=Vr.ReactCurrentBatchConfig;function Jo(e,n,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Se(309));var l=r.stateNode}if(!l)throw Error(Se(147,e));var d=l,f=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===f?n.ref:(n=function(_){var x=d.refs;_===null?delete x[f]:x[f]=_},n._stringRef=f,n)}if(typeof e!="string")throw Error(Se(284));if(!r._owner)throw Error(Se(290,e))}return e}function yl(e,n){throw e=Object.prototype.toString.call(n),Error(Se(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Mf(e){var n=e._init;return n(e._payload)}function np(e){function n(H,B){if(e){var P=H.deletions;P===null?(H.deletions=[B],H.flags|=16):P.push(B)}}function r(H,B){if(!e)return null;for(;B!==null;)n(H,B),B=B.sibling;return null}function l(H,B){for(H=new Map;B!==null;)B.key!==null?H.set(B.key,B):H.set(B.index,B),B=B.sibling;return H}function d(H,B){return H=ds(H,B),H.index=0,H.sibling=null,H}function f(H,B,P){return H.index=P,e?(P=H.alternate,P!==null?(P=P.index,P<B?(H.flags|=2,B):P):(H.flags|=2,B)):(H.flags|=1048576,B)}function _(H){return e&&H.alternate===null&&(H.flags|=2),H}function x(H,B,P,X){return B===null||B.tag!==6?(B=wc(P,H.mode,X),B.return=H,B):(B=d(B,P),B.return=H,B)}function C(H,B,P,X){var ae=P.type;return ae===to?S(H,B,P.props.children,X,P.key):B!==null&&(B.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Jr&&Mf(ae)===B.type)?(X=d(B,P.props),X.ref=Jo(H,B,P),X.return=H,X):(X=Bl(P.type,P.key,P.props,null,H.mode,X),X.ref=Jo(H,B,P),X.return=H,X)}function v(H,B,P,X){return B===null||B.tag!==4||B.stateNode.containerInfo!==P.containerInfo||B.stateNode.implementation!==P.implementation?(B=Cc(P,H.mode,X),B.return=H,B):(B=d(B,P.children||[]),B.return=H,B)}function S(H,B,P,X,ae){return B===null||B.tag!==7?(B=Ps(P,H.mode,X,ae),B.return=H,B):(B=d(B,P),B.return=H,B)}function I(H,B,P){if(typeof B=="string"&&B!==""||typeof B=="number")return B=wc(""+B,H.mode,P),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case al:return P=Bl(B.type,B.key,B.props,null,H.mode,P),P.ref=Jo(H,null,B),P.return=H,P;case eo:return B=Cc(B,H.mode,P),B.return=H,B;case Jr:var X=B._init;return I(H,X(B._payload),P)}if(la(B)||Yo(B))return B=Ps(B,H.mode,P,null),B.return=H,B;yl(H,B)}return null}function M(H,B,P,X){var ae=B!==null?B.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return ae!==null?null:x(H,B,""+P,X);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case al:return P.key===ae?C(H,B,P,X):null;case eo:return P.key===ae?v(H,B,P,X):null;case Jr:return ae=P._init,M(H,B,ae(P._payload),X)}if(la(P)||Yo(P))return ae!==null?null:S(H,B,P,X,null);yl(H,P)}return null}function F(H,B,P,X,ae){if(typeof X=="string"&&X!==""||typeof X=="number")return H=H.get(P)||null,x(B,H,""+X,ae);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case al:return H=H.get(X.key===null?P:X.key)||null,C(B,H,X,ae);case eo:return H=H.get(X.key===null?P:X.key)||null,v(B,H,X,ae);case Jr:var se=X._init;return F(H,B,P,se(X._payload),ae)}if(la(X)||Yo(X))return H=H.get(P)||null,S(B,H,X,ae,null);yl(B,X)}return null}function z(H,B,P,X){for(var ae=null,se=null,$=B,J=B=0,V=null;$!==null&&J<P.length;J++){$.index>J?(V=$,$=null):V=$.sibling;var W=M(H,$,P[J],X);if(W===null){$===null&&($=V);break}e&&$&&W.alternate===null&&n(H,$),B=f(W,B,J),se===null?ae=W:se.sibling=W,se=W,$=V}if(J===P.length)return r(H,$),Xt&&bs(H,J),ae;if($===null){for(;J<P.length;J++)$=I(H,P[J],X),$!==null&&(B=f($,B,J),se===null?ae=$:se.sibling=$,se=$);return Xt&&bs(H,J),ae}for($=l(H,$);J<P.length;J++)V=F($,H,J,P[J],X),V!==null&&(e&&V.alternate!==null&&$.delete(V.key===null?J:V.key),B=f(V,B,J),se===null?ae=V:se.sibling=V,se=V);return e&&$.forEach(function(ee){return n(H,ee)}),Xt&&bs(H,J),ae}function U(H,B,P,X){var ae=Yo(P);if(typeof ae!="function")throw Error(Se(150));if(P=ae.call(P),P==null)throw Error(Se(151));for(var se=ae=null,$=B,J=B=0,V=null,W=P.next();$!==null&&!W.done;J++,W=P.next()){$.index>J?(V=$,$=null):V=$.sibling;var ee=M(H,$,W.value,X);if(ee===null){$===null&&($=V);break}e&&$&&ee.alternate===null&&n(H,$),B=f(ee,B,J),se===null?ae=ee:se.sibling=ee,se=ee,$=V}if(W.done)return r(H,$),Xt&&bs(H,J),ae;if($===null){for(;!W.done;J++,W=P.next())W=I(H,W.value,X),W!==null&&(B=f(W,B,J),se===null?ae=W:se.sibling=W,se=W);return Xt&&bs(H,J),ae}for($=l(H,$);!W.done;J++,W=P.next())W=F($,H,J,W.value,X),W!==null&&(e&&W.alternate!==null&&$.delete(W.key===null?J:W.key),B=f(W,B,J),se===null?ae=W:se.sibling=W,se=W);return e&&$.forEach(function(oe){return n(H,oe)}),Xt&&bs(H,J),ae}function ue(H,B,P,X){if(typeof P=="object"&&P!==null&&P.type===to&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case al:e:{for(var ae=P.key,se=B;se!==null;){if(se.key===ae){if(ae=P.type,ae===to){if(se.tag===7){r(H,se.sibling),B=d(se,P.props.children),B.return=H,H=B;break e}}else if(se.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Jr&&Mf(ae)===se.type){r(H,se.sibling),B=d(se,P.props),B.ref=Jo(H,se,P),B.return=H,H=B;break e}r(H,se);break}else n(H,se);se=se.sibling}P.type===to?(B=Ps(P.props.children,H.mode,X,P.key),B.return=H,H=B):(X=Bl(P.type,P.key,P.props,null,H.mode,X),X.ref=Jo(H,B,P),X.return=H,H=X)}return _(H);case eo:e:{for(se=P.key;B!==null;){if(B.key===se)if(B.tag===4&&B.stateNode.containerInfo===P.containerInfo&&B.stateNode.implementation===P.implementation){r(H,B.sibling),B=d(B,P.children||[]),B.return=H,H=B;break e}else{r(H,B);break}else n(H,B);B=B.sibling}B=Cc(P,H.mode,X),B.return=H,H=B}return _(H);case Jr:return se=P._init,ue(H,B,se(P._payload),X)}if(la(P))return z(H,B,P,X);if(Yo(P))return U(H,B,P,X);yl(H,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,B!==null&&B.tag===6?(r(H,B.sibling),B=d(B,P),B.return=H,H=B):(r(H,B),B=wc(P,H.mode,X),B.return=H,H=B),_(H)):r(H,B)}return ue}var bo=np(!0),ip=np(!1),iu=ms(null),ru=null,uo=null,ed=null;function td(){ed=uo=ru=null}function nd(e){var n=iu.current;Zt(iu),e._currentValue=n}function ih(e,n,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===r)break;e=e.return}}function vo(e,n){ru=e,ed=uo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(hi=!0),e.firstContext=null)}function Vi(e){var n=e._currentValue;if(ed!==e)if(e={context:e,memoizedValue:n,next:null},uo===null){if(ru===null)throw Error(Se(308));uo=e,ru.dependencies={lanes:0,firstContext:e}}else uo=uo.next=e;return n}var Rs=null;function id(e){Rs===null?Rs=[e]:Rs.push(e)}function rp(e,n,r,l){var d=n.interleaved;return d===null?(r.next=r,id(n)):(r.next=d.next,d.next=r),n.interleaved=r,Ur(e,l)}function Ur(e,n){e.lanes|=n;var r=e.alternate;for(r!==null&&(r.lanes|=n),r=e,e=e.return;e!==null;)e.childLanes|=n,r=e.alternate,r!==null&&(r.childLanes|=n),r=e,e=e.return;return r.tag===3?r.stateNode:null}var es=!1;function rd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sp(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fr(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function us(e,n,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,_t&2){var d=l.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),l.pending=n,Ur(e,r)}return d=l.interleaved,d===null?(n.next=n,id(l)):(n.next=d.next,d.next=n),l.interleaved=n,Ur(e,r)}function Ol(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194240)!==0)){var l=n.lanes;l&=e.pendingLanes,r|=l,n.lanes=r,Vh(e,r)}}function Pf(e,n){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var d=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var _={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?d=f=_:f=f.next=_,r=r.next}while(r!==null);f===null?d=f=n:f=f.next=n}else d=f=n;r={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}function su(e,n,r,l){var d=e.updateQueue;es=!1;var f=d.firstBaseUpdate,_=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var C=x,v=C.next;C.next=null,_===null?f=v:_.next=v,_=C;var S=e.alternate;S!==null&&(S=S.updateQueue,x=S.lastBaseUpdate,x!==_&&(x===null?S.firstBaseUpdate=v:x.next=v,S.lastBaseUpdate=C))}if(f!==null){var I=d.baseState;_=0,S=v=C=null,x=f;do{var M=x.lane,F=x.eventTime;if((l&M)===M){S!==null&&(S=S.next={eventTime:F,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var z=e,U=x;switch(M=n,F=r,U.tag){case 1:if(z=U.payload,typeof z=="function"){I=z.call(F,I,M);break e}I=z;break e;case 3:z.flags=z.flags&-65537|128;case 0:if(z=U.payload,M=typeof z=="function"?z.call(F,I,M):z,M==null)break e;I=en({},I,M);break e;case 2:es=!0}}x.callback!==null&&x.lane!==0&&(e.flags|=64,M=d.effects,M===null?d.effects=[x]:M.push(x))}else F={eventTime:F,lane:M,tag:x.tag,payload:x.payload,callback:x.callback,next:null},S===null?(v=S=F,C=I):S=S.next=F,_|=M;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;M=x,x=M.next,M.next=null,d.lastBaseUpdate=M,d.shared.pending=null}}while(!0);if(S===null&&(C=I),d.baseState=C,d.firstBaseUpdate=v,d.lastBaseUpdate=S,n=d.shared.interleaved,n!==null){d=n;do _|=d.lane,d=d.next;while(d!==n)}else f===null&&(d.shared.lanes=0);Fs|=_,e.lanes=_,e.memoizedState=I}}function Lf(e,n,r){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var l=e[n],d=l.callback;if(d!==null){if(l.callback=null,l=r,typeof d!="function")throw Error(Se(191,d));d.call(l)}}}var Ya={},Ar=ms(Ya),Da=ms(Ya),Ba=ms(Ya);function Os(e){if(e===Ya)throw Error(Se(174));return e}function sd(e,n){switch(Ft(Ba,n),Ft(Da,e),Ft(Ar,Ya),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Bc(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Bc(n,e)}Zt(Ar),Ft(Ar,n)}function Io(){Zt(Ar),Zt(Da),Zt(Ba)}function op(e){Os(Ba.current);var n=Os(Ar.current),r=Bc(n,e.type);n!==r&&(Ft(Da,e),Ft(Ar,r))}function od(e){Da.current===e&&(Zt(Ar),Zt(Da))}var $t=ms(0);function ou(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var pc=[];function ad(){for(var e=0;e<pc.length;e++)pc[e]._workInProgressVersionPrimary=null;pc.length=0}var kl=Vr.ReactCurrentDispatcher,gc=Vr.ReactCurrentBatchConfig,Bs=0,Jt=null,En=null,Nn=null,au=!1,ya=!1,Fa=0,Y2=0;function Hn(){throw Error(Se(321))}function ld(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!ar(e[r],n[r]))return!1;return!0}function ud(e,n,r,l,d,f){if(Bs=f,Jt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,kl.current=e===null||e.memoizedState===null?$2:J2,e=r(l,d),ya){f=0;do{if(ya=!1,Fa=0,25<=f)throw Error(Se(301));f+=1,Nn=En=null,n.updateQueue=null,kl.current=e_,e=r(l,d)}while(ya)}if(kl.current=lu,n=En!==null&&En.next!==null,Bs=0,Nn=En=Jt=null,au=!1,n)throw Error(Se(300));return e}function cd(){var e=Fa!==0;return Fa=0,e}function wr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?Jt.memoizedState=Nn=e:Nn=Nn.next=e,Nn}function Wi(){if(En===null){var e=Jt.alternate;e=e!==null?e.memoizedState:null}else e=En.next;var n=Nn===null?Jt.memoizedState:Nn.next;if(n!==null)Nn=n,En=e;else{if(e===null)throw Error(Se(310));En=e,e={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},Nn===null?Jt.memoizedState=Nn=e:Nn=Nn.next=e}return Nn}function ja(e,n){return typeof n=="function"?n(e):n}function mc(e){var n=Wi(),r=n.queue;if(r===null)throw Error(Se(311));r.lastRenderedReducer=e;var l=En,d=l.baseQueue,f=r.pending;if(f!==null){if(d!==null){var _=d.next;d.next=f.next,f.next=_}l.baseQueue=d=f,r.pending=null}if(d!==null){f=d.next,l=l.baseState;var x=_=null,C=null,v=f;do{var S=v.lane;if((Bs&S)===S)C!==null&&(C=C.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),l=v.hasEagerState?v.eagerState:e(l,v.action);else{var I={lane:S,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};C===null?(x=C=I,_=l):C=C.next=I,Jt.lanes|=S,Fs|=S}v=v.next}while(v!==null&&v!==f);C===null?_=l:C.next=x,ar(l,n.memoizedState)||(hi=!0),n.memoizedState=l,n.baseState=_,n.baseQueue=C,r.lastRenderedState=l}if(e=r.interleaved,e!==null){d=e;do f=d.lane,Jt.lanes|=f,Fs|=f,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[n.memoizedState,r.dispatch]}function _c(e){var n=Wi(),r=n.queue;if(r===null)throw Error(Se(311));r.lastRenderedReducer=e;var l=r.dispatch,d=r.pending,f=n.memoizedState;if(d!==null){r.pending=null;var _=d=d.next;do f=e(f,_.action),_=_.next;while(_!==d);ar(f,n.memoizedState)||(hi=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),r.lastRenderedState=f}return[f,l]}function ap(){}function lp(e,n){var r=Jt,l=Wi(),d=n(),f=!ar(l.memoizedState,d);if(f&&(l.memoizedState=d,hi=!0),l=l.queue,hd(hp.bind(null,r,l,e),[e]),l.getSnapshot!==n||f||Nn!==null&&Nn.memoizedState.tag&1){if(r.flags|=2048,za(9,cp.bind(null,r,l,d,n),void 0,null),Rn===null)throw Error(Se(349));Bs&30||up(r,n,d)}return d}function up(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=Jt.updateQueue,n===null?(n={lastEffect:null,stores:null},Jt.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function cp(e,n,r,l){n.value=r,n.getSnapshot=l,dp(n)&&fp(e)}function hp(e,n,r){return r(function(){dp(n)&&fp(e)})}function dp(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!ar(e,r)}catch{return!0}}function fp(e){var n=Ur(e,1);n!==null&&or(n,e,1,-1)}function Df(e){var n=wr();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:e},n.queue=e,e=e.dispatch=q2.bind(null,Jt,e),[n.memoizedState,e]}function za(e,n,r,l){return e={tag:e,create:n,destroy:r,deps:l,next:null},n=Jt.updateQueue,n===null?(n={lastEffect:null,stores:null},Jt.updateQueue=n,n.lastEffect=e.next=e):(r=n.lastEffect,r===null?n.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,n.lastEffect=e)),e}function pp(){return Wi().memoizedState}function Ml(e,n,r,l){var d=wr();Jt.flags|=e,d.memoizedState=za(1|n,r,void 0,l===void 0?null:l)}function Nu(e,n,r,l){var d=Wi();l=l===void 0?null:l;var f=void 0;if(En!==null){var _=En.memoizedState;if(f=_.destroy,l!==null&&ld(l,_.deps)){d.memoizedState=za(n,r,f,l);return}}Jt.flags|=e,d.memoizedState=za(1|n,r,f,l)}function Bf(e,n){return Ml(8390656,8,e,n)}function hd(e,n){return Nu(2048,8,e,n)}function gp(e,n){return Nu(4,2,e,n)}function mp(e,n){return Nu(4,4,e,n)}function _p(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function yp(e,n,r){return r=r!=null?r.concat([e]):null,Nu(4,4,_p.bind(null,n,e),r)}function dd(){}function vp(e,n){var r=Wi();n=n===void 0?null:n;var l=r.memoizedState;return l!==null&&n!==null&&ld(n,l[1])?l[0]:(r.memoizedState=[e,n],e)}function wp(e,n){var r=Wi();n=n===void 0?null:n;var l=r.memoizedState;return l!==null&&n!==null&&ld(n,l[1])?l[0]:(e=e(),r.memoizedState=[e,n],e)}function Cp(e,n,r){return Bs&21?(ar(r,n)||(r=b0(),Jt.lanes|=r,Fs|=r,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,hi=!0),e.memoizedState=r)}function K2(e,n){var r=It;It=r!==0&&4>r?r:4,e(!0);var l=gc.transition;gc.transition={};try{e(!1),n()}finally{It=r,gc.transition=l}}function Ep(){return Wi().memoizedState}function Q2(e,n,r){var l=hs(e);if(r={lane:l,action:r,hasEagerState:!1,eagerState:null,next:null},Ap(e))xp(n,r);else if(r=rp(e,n,r,l),r!==null){var d=ii();or(r,e,l,d),Sp(r,n,l)}}function q2(e,n,r){var l=hs(e),d={lane:l,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ap(e))xp(n,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var _=n.lastRenderedState,x=f(_,r);if(d.hasEagerState=!0,d.eagerState=x,ar(x,_)){var C=n.interleaved;C===null?(d.next=d,id(n)):(d.next=C.next,C.next=d),n.interleaved=d;return}}catch{}finally{}r=rp(e,n,d,l),r!==null&&(d=ii(),or(r,e,l,d),Sp(r,n,l))}}function Ap(e){var n=e.alternate;return e===Jt||n!==null&&n===Jt}function xp(e,n){ya=au=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function Sp(e,n,r){if(r&4194240){var l=n.lanes;l&=e.pendingLanes,r|=l,n.lanes=r,Vh(e,r)}}var lu={readContext:Vi,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},$2={readContext:Vi,useCallback:function(e,n){return wr().memoizedState=[e,n===void 0?null:n],e},useContext:Vi,useEffect:Bf,useImperativeHandle:function(e,n,r){return r=r!=null?r.concat([e]):null,Ml(4194308,4,_p.bind(null,n,e),r)},useLayoutEffect:function(e,n){return Ml(4194308,4,e,n)},useInsertionEffect:function(e,n){return Ml(4,2,e,n)},useMemo:function(e,n){var r=wr();return n=n===void 0?null:n,e=e(),r.memoizedState=[e,n],e},useReducer:function(e,n,r){var l=wr();return n=r!==void 0?r(n):n,l.memoizedState=l.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=Q2.bind(null,Jt,e),[l.memoizedState,e]},useRef:function(e){var n=wr();return e={current:e},n.memoizedState=e},useState:Df,useDebugValue:dd,useDeferredValue:function(e){return wr().memoizedState=e},useTransition:function(){var e=Df(!1),n=e[0];return e=K2.bind(null,e[1]),wr().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,r){var l=Jt,d=wr();if(Xt){if(r===void 0)throw Error(Se(407));r=r()}else{if(r=n(),Rn===null)throw Error(Se(349));Bs&30||up(l,n,r)}d.memoizedState=r;var f={value:r,getSnapshot:n};return d.queue=f,Bf(hp.bind(null,l,f,e),[e]),l.flags|=2048,za(9,cp.bind(null,l,f,r,n),void 0,null),r},useId:function(){var e=wr(),n=Rn.identifierPrefix;if(Xt){var r=Br,l=Dr;r=(l&~(1<<32-sr(l)-1)).toString(32)+r,n=":"+n+"R"+r,r=Fa++,0<r&&(n+="H"+r.toString(32)),n+=":"}else r=Y2++,n=":"+n+"r"+r.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},J2={readContext:Vi,useCallback:vp,useContext:Vi,useEffect:hd,useImperativeHandle:yp,useInsertionEffect:gp,useLayoutEffect:mp,useMemo:wp,useReducer:mc,useRef:pp,useState:function(){return mc(ja)},useDebugValue:dd,useDeferredValue:function(e){var n=Wi();return Cp(n,En.memoizedState,e)},useTransition:function(){var e=mc(ja)[0],n=Wi().memoizedState;return[e,n]},useMutableSource:ap,useSyncExternalStore:lp,useId:Ep,unstable_isNewReconciler:!1},e_={readContext:Vi,useCallback:vp,useContext:Vi,useEffect:hd,useImperativeHandle:yp,useInsertionEffect:gp,useLayoutEffect:mp,useMemo:wp,useReducer:_c,useRef:pp,useState:function(){return _c(ja)},useDebugValue:dd,useDeferredValue:function(e){var n=Wi();return En===null?n.memoizedState=e:Cp(n,En.memoizedState,e)},useTransition:function(){var e=_c(ja)[0],n=Wi().memoizedState;return[e,n]},useMutableSource:ap,useSyncExternalStore:lp,useId:Ep,unstable_isNewReconciler:!1};function tr(e,n){if(e&&e.defaultProps){n=en({},n),e=e.defaultProps;for(var r in e)n[r]===void 0&&(n[r]=e[r]);return n}return n}function rh(e,n,r,l){n=e.memoizedState,r=r(l,n),r=r==null?n:en({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ru={isMounted:function(e){return(e=e._reactInternals)?Vs(e)===e:!1},enqueueSetState:function(e,n,r){e=e._reactInternals;var l=ii(),d=hs(e),f=Fr(l,d);f.payload=n,r!=null&&(f.callback=r),n=us(e,f,d),n!==null&&(or(n,e,d,l),Ol(n,e,d))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var l=ii(),d=hs(e),f=Fr(l,d);f.tag=1,f.payload=n,r!=null&&(f.callback=r),n=us(e,f,d),n!==null&&(or(n,e,d,l),Ol(n,e,d))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=ii(),l=hs(e),d=Fr(r,l);d.tag=2,n!=null&&(d.callback=n),n=us(e,d,l),n!==null&&(or(n,e,l,r),Ol(n,e,l))}};function Ff(e,n,r,l,d,f,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,_):n.prototype&&n.prototype.isPureReactComponent?!ka(r,l)||!ka(d,f):!0}function bp(e,n,r){var l=!1,d=ps,f=n.contextType;return typeof f=="object"&&f!==null?f=Vi(f):(d=fi(n)?Ls:Zn.current,l=n.contextTypes,f=(l=l!=null)?xo(e,d):ps),n=new n(r,f),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Ru,e.stateNode=n,n._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),n}function jf(e,n,r,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,l),n.state!==e&&Ru.enqueueReplaceState(n,n.state,null)}function sh(e,n,r,l){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},rd(e);var f=n.contextType;typeof f=="object"&&f!==null?d.context=Vi(f):(f=fi(n)?Ls:Zn.current,d.context=xo(e,f)),d.state=e.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(rh(e,n,f,r),d.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(n=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),n!==d.state&&Ru.enqueueReplaceState(d,d.state,null),su(e,r,d,l),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function To(e,n){try{var r="",l=n;do r+=Tm(l),l=l.return;while(l);var d=r}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:n,stack:d,digest:null}}function yc(e,n,r){return{value:e,source:null,stack:r??null,digest:n??null}}function oh(e,n){try{console.error(n.value)}catch(r){setTimeout(function(){throw r})}}var t_=typeof WeakMap=="function"?WeakMap:Map;function Ip(e,n,r){r=Fr(-1,r),r.tag=3,r.payload={element:null};var l=n.value;return r.callback=function(){cu||(cu=!0,mh=l),oh(e,n)},r}function Tp(e,n,r){r=Fr(-1,r),r.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var d=n.value;r.payload=function(){return l(d)},r.callback=function(){oh(e,n)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){oh(e,n),typeof l!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var _=n.stack;this.componentDidCatch(n.value,{componentStack:_!==null?_:""})}),r}function zf(e,n,r){var l=e.pingCache;if(l===null){l=e.pingCache=new t_;var d=new Set;l.set(n,d)}else d=l.get(n),d===void 0&&(d=new Set,l.set(n,d));d.has(r)||(d.add(r),e=g_.bind(null,e,n,r),n.then(e,e))}function Uf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Hf(e,n,r,l,d){return e.mode&1?(e.flags|=65536,e.lanes=d,e):(e===n?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(n=Fr(-1,1),n.tag=2,us(r,n,1))),r.lanes|=1),e)}var n_=Vr.ReactCurrentOwner,hi=!1;function ni(e,n,r,l){n.child=e===null?ip(n,null,r,l):bo(n,e.child,r,l)}function Vf(e,n,r,l,d){r=r.render;var f=n.ref;return vo(n,d),l=ud(e,n,r,l,f,d),r=cd(),e!==null&&!hi?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~d,Hr(e,n,d)):(Xt&&r&&qh(n),n.flags|=1,ni(e,n,l,d),n.child)}function Wf(e,n,r,l,d){if(e===null){var f=r.type;return typeof f=="function"&&!wd(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(n.tag=15,n.type=f,Np(e,n,f,l,d)):(e=Bl(r.type,null,l,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!(e.lanes&d)){var _=f.memoizedProps;if(r=r.compare,r=r!==null?r:ka,r(_,l)&&e.ref===n.ref)return Hr(e,n,d)}return n.flags|=1,e=ds(f,l),e.ref=n.ref,e.return=n,n.child=e}function Np(e,n,r,l,d){if(e!==null){var f=e.memoizedProps;if(ka(f,l)&&e.ref===n.ref)if(hi=!1,n.pendingProps=l=f,(e.lanes&d)!==0)e.flags&131072&&(hi=!0);else return n.lanes=e.lanes,Hr(e,n,d)}return ah(e,n,r,l,d)}function Rp(e,n,r){var l=n.pendingProps,d=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(ho,Ai),Ai|=r;else{if(!(r&1073741824))return e=f!==null?f.baseLanes|r:r,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ft(ho,Ai),Ai|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:r,Ft(ho,Ai),Ai|=l}else f!==null?(l=f.baseLanes|r,n.memoizedState=null):l=r,Ft(ho,Ai),Ai|=l;return ni(e,n,d,r),n.child}function Op(e,n){var r=n.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(n.flags|=512,n.flags|=2097152)}function ah(e,n,r,l,d){var f=fi(r)?Ls:Zn.current;return f=xo(n,f),vo(n,d),r=ud(e,n,r,l,f,d),l=cd(),e!==null&&!hi?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~d,Hr(e,n,d)):(Xt&&l&&qh(n),n.flags|=1,ni(e,n,r,d),n.child)}function Zf(e,n,r,l,d){if(fi(r)){var f=!0;eu(n)}else f=!1;if(vo(n,d),n.stateNode===null)Pl(e,n),bp(n,r,l),sh(n,r,l,d),l=!0;else if(e===null){var _=n.stateNode,x=n.memoizedProps;_.props=x;var C=_.context,v=r.contextType;typeof v=="object"&&v!==null?v=Vi(v):(v=fi(r)?Ls:Zn.current,v=xo(n,v));var S=r.getDerivedStateFromProps,I=typeof S=="function"||typeof _.getSnapshotBeforeUpdate=="function";I||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(x!==l||C!==v)&&jf(n,_,l,v),es=!1;var M=n.memoizedState;_.state=M,su(n,l,_,d),C=n.memoizedState,x!==l||M!==C||di.current||es?(typeof S=="function"&&(rh(n,r,S,l),C=n.memoizedState),(x=es||Ff(n,r,x,l,M,C,v))?(I||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(n.flags|=4194308)):(typeof _.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=C),_.props=l,_.state=C,_.context=v,l=x):(typeof _.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{_=n.stateNode,sp(e,n),x=n.memoizedProps,v=n.type===n.elementType?x:tr(n.type,x),_.props=v,I=n.pendingProps,M=_.context,C=r.contextType,typeof C=="object"&&C!==null?C=Vi(C):(C=fi(r)?Ls:Zn.current,C=xo(n,C));var F=r.getDerivedStateFromProps;(S=typeof F=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(x!==I||M!==C)&&jf(n,_,l,C),es=!1,M=n.memoizedState,_.state=M,su(n,l,_,d);var z=n.memoizedState;x!==I||M!==z||di.current||es?(typeof F=="function"&&(rh(n,r,F,l),z=n.memoizedState),(v=es||Ff(n,r,v,l,M,z,C)||!1)?(S||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(l,z,C),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(l,z,C)),typeof _.componentDidUpdate=="function"&&(n.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof _.componentDidUpdate!="function"||x===e.memoizedProps&&M===e.memoizedState||(n.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&M===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=z),_.props=l,_.state=z,_.context=C,l=v):(typeof _.componentDidUpdate!="function"||x===e.memoizedProps&&M===e.memoizedState||(n.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&M===e.memoizedState||(n.flags|=1024),l=!1)}return lh(e,n,r,l,f,d)}function lh(e,n,r,l,d,f){Op(e,n);var _=(n.flags&128)!==0;if(!l&&!_)return d&&Rf(n,r,!1),Hr(e,n,f);l=n.stateNode,n_.current=n;var x=_&&typeof r.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,e!==null&&_?(n.child=bo(n,e.child,null,f),n.child=bo(n,null,x,f)):ni(e,n,x,f),n.memoizedState=l.state,d&&Rf(n,r,!0),n.child}function kp(e){var n=e.stateNode;n.pendingContext?Nf(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Nf(e,n.context,!1),sd(e,n.containerInfo)}function Gf(e,n,r,l,d){return So(),Jh(d),n.flags|=256,ni(e,n,r,l),n.child}var uh={dehydrated:null,treeContext:null,retryLane:0};function ch(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mp(e,n,r){var l=n.pendingProps,d=$t.current,f=!1,_=(n.flags&128)!==0,x;if((x=_)||(x=e!==null&&e.memoizedState===null?!1:(d&2)!==0),x?(f=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Ft($t,d&1),e===null)return nh(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(_=l.children,e=l.fallback,f?(l=n.mode,f=n.child,_={mode:"hidden",children:_},!(l&1)&&f!==null?(f.childLanes=0,f.pendingProps=_):f=Mu(_,l,0,null),e=Ps(e,l,r,null),f.return=n,e.return=n,f.sibling=e,n.child=f,n.child.memoizedState=ch(r),n.memoizedState=uh,e):fd(n,_));if(d=e.memoizedState,d!==null&&(x=d.dehydrated,x!==null))return i_(e,n,_,l,x,d,r);if(f){f=l.fallback,_=n.mode,d=e.child,x=d.sibling;var C={mode:"hidden",children:l.children};return!(_&1)&&n.child!==d?(l=n.child,l.childLanes=0,l.pendingProps=C,n.deletions=null):(l=ds(d,C),l.subtreeFlags=d.subtreeFlags&14680064),x!==null?f=ds(x,f):(f=Ps(f,_,r,null),f.flags|=2),f.return=n,l.return=n,l.sibling=f,n.child=l,l=f,f=n.child,_=e.child.memoizedState,_=_===null?ch(r):{baseLanes:_.baseLanes|r,cachePool:null,transitions:_.transitions},f.memoizedState=_,f.childLanes=e.childLanes&~r,n.memoizedState=uh,l}return f=e.child,e=f.sibling,l=ds(f,{mode:"visible",children:l.children}),!(n.mode&1)&&(l.lanes=r),l.return=n,l.sibling=null,e!==null&&(r=n.deletions,r===null?(n.deletions=[e],n.flags|=16):r.push(e)),n.child=l,n.memoizedState=null,l}function fd(e,n){return n=Mu({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function vl(e,n,r,l){return l!==null&&Jh(l),bo(n,e.child,null,r),e=fd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function i_(e,n,r,l,d,f,_){if(r)return n.flags&256?(n.flags&=-257,l=yc(Error(Se(422))),vl(e,n,_,l)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(f=l.fallback,d=n.mode,l=Mu({mode:"visible",children:l.children},d,0,null),f=Ps(f,d,_,null),f.flags|=2,l.return=n,f.return=n,l.sibling=f,n.child=l,n.mode&1&&bo(n,e.child,null,_),n.child.memoizedState=ch(_),n.memoizedState=uh,f);if(!(n.mode&1))return vl(e,n,_,null);if(d.data==="$!"){if(l=d.nextSibling&&d.nextSibling.dataset,l)var x=l.dgst;return l=x,f=Error(Se(419)),l=yc(f,l,void 0),vl(e,n,_,l)}if(x=(_&e.childLanes)!==0,hi||x){if(l=Rn,l!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(l.suspendedLanes|_)?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Ur(e,d),or(l,e,d,-1))}return vd(),l=yc(Error(Se(421))),vl(e,n,_,l)}return d.data==="$?"?(n.flags|=128,n.child=e.child,n=m_.bind(null,e),d._reactRetry=n,null):(e=f.treeContext,xi=ls(d.nextSibling),Si=n,Xt=!0,rr=null,e!==null&&(ji[zi++]=Dr,ji[zi++]=Br,ji[zi++]=Ds,Dr=e.id,Br=e.overflow,Ds=n),n=fd(n,l.children),n.flags|=4096,n)}function Xf(e,n,r){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),ih(e.return,n,r)}function vc(e,n,r,l,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:d}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=r,f.tailMode=d)}function Pp(e,n,r){var l=n.pendingProps,d=l.revealOrder,f=l.tail;if(ni(e,n,l.children,r),l=$t.current,l&2)l=l&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xf(e,r,n);else if(e.tag===19)Xf(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ft($t,l),!(n.mode&1))n.memoizedState=null;else switch(d){case"forwards":for(r=n.child,d=null;r!==null;)e=r.alternate,e!==null&&ou(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=n.child,n.child=null):(d=r.sibling,r.sibling=null),vc(n,!1,d,r,f);break;case"backwards":for(r=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&ou(e)===null){n.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}vc(n,!0,r,null,f);break;case"together":vc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Pl(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Hr(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),Fs|=n.lanes,!(r&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(Se(153));if(n.child!==null){for(e=n.child,r=ds(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=ds(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function r_(e,n,r){switch(n.tag){case 3:kp(n),So();break;case 5:op(n);break;case 1:fi(n.type)&&eu(n);break;case 4:sd(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,d=n.memoizedProps.value;Ft(iu,l._currentValue),l._currentValue=d;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(Ft($t,$t.current&1),n.flags|=128,null):r&n.child.childLanes?Mp(e,n,r):(Ft($t,$t.current&1),e=Hr(e,n,r),e!==null?e.sibling:null);Ft($t,$t.current&1);break;case 19:if(l=(r&n.childLanes)!==0,e.flags&128){if(l)return Pp(e,n,r);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ft($t,$t.current),l)break;return null;case 22:case 23:return n.lanes=0,Rp(e,n,r)}return Hr(e,n,r)}var Lp,hh,Dp,Bp;Lp=function(e,n){for(var r=n.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};hh=function(){};Dp=function(e,n,r,l){var d=e.memoizedProps;if(d!==l){e=n.stateNode,Os(Ar.current);var f=null;switch(r){case"input":d=Mc(e,d),l=Mc(e,l),f=[];break;case"select":d=en({},d,{value:void 0}),l=en({},l,{value:void 0}),f=[];break;case"textarea":d=Dc(e,d),l=Dc(e,l),f=[];break;default:typeof d.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=$l)}Fc(r,l);var _;r=null;for(v in d)if(!l.hasOwnProperty(v)&&d.hasOwnProperty(v)&&d[v]!=null)if(v==="style"){var x=d[v];for(_ in x)x.hasOwnProperty(_)&&(r||(r={}),r[_]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(Sa.hasOwnProperty(v)?f||(f=[]):(f=f||[]).push(v,null));for(v in l){var C=l[v];if(x=d!=null?d[v]:void 0,l.hasOwnProperty(v)&&C!==x&&(C!=null||x!=null))if(v==="style")if(x){for(_ in x)!x.hasOwnProperty(_)||C&&C.hasOwnProperty(_)||(r||(r={}),r[_]="");for(_ in C)C.hasOwnProperty(_)&&x[_]!==C[_]&&(r||(r={}),r[_]=C[_])}else r||(f||(f=[]),f.push(v,r)),r=C;else v==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,x=x?x.__html:void 0,C!=null&&x!==C&&(f=f||[]).push(v,C)):v==="children"?typeof C!="string"&&typeof C!="number"||(f=f||[]).push(v,""+C):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(Sa.hasOwnProperty(v)?(C!=null&&v==="onScroll"&&Vt("scroll",e),f||x===C||(f=[])):(f=f||[]).push(v,C))}r&&(f=f||[]).push("style",r);var v=f;(n.updateQueue=v)&&(n.flags|=4)}};Bp=function(e,n,r,l){r!==l&&(n.flags|=4)};function ea(e,n){if(!Xt)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Vn(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(n)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags&14680064,l|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=r,n}function s_(e,n,r){var l=n.pendingProps;switch($h(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(n),null;case 1:return fi(n.type)&&Jl(),Vn(n),null;case 3:return l=n.stateNode,Io(),Zt(di),Zt(Zn),ad(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(_l(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,rr!==null&&(vh(rr),rr=null))),hh(e,n),Vn(n),null;case 5:od(n);var d=Os(Ba.current);if(r=n.type,e!==null&&n.stateNode!=null)Dp(e,n,r,l,d),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(Se(166));return Vn(n),null}if(e=Os(Ar.current),_l(n)){l=n.stateNode,r=n.type;var f=n.memoizedProps;switch(l[Cr]=n,l[La]=f,e=(n.mode&1)!==0,r){case"dialog":Vt("cancel",l),Vt("close",l);break;case"iframe":case"object":case"embed":Vt("load",l);break;case"video":case"audio":for(d=0;d<ca.length;d++)Vt(ca[d],l);break;case"source":Vt("error",l);break;case"img":case"image":case"link":Vt("error",l),Vt("load",l);break;case"details":Vt("toggle",l);break;case"input":tf(l,f),Vt("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},Vt("invalid",l);break;case"textarea":rf(l,f),Vt("invalid",l)}Fc(r,f),d=null;for(var _ in f)if(f.hasOwnProperty(_)){var x=f[_];_==="children"?typeof x=="string"?l.textContent!==x&&(f.suppressHydrationWarning!==!0&&ml(l.textContent,x,e),d=["children",x]):typeof x=="number"&&l.textContent!==""+x&&(f.suppressHydrationWarning!==!0&&ml(l.textContent,x,e),d=["children",""+x]):Sa.hasOwnProperty(_)&&x!=null&&_==="onScroll"&&Vt("scroll",l)}switch(r){case"input":ll(l),nf(l,f,!0);break;case"textarea":ll(l),sf(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=$l)}l=d,n.updateQueue=l,l!==null&&(n.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=h0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=_.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=_.createElement(r,{is:l.is}):(e=_.createElement(r),r==="select"&&(_=e,l.multiple?_.multiple=!0:l.size&&(_.size=l.size))):e=_.createElementNS(e,r),e[Cr]=n,e[La]=l,Lp(e,n,!1,!1),n.stateNode=e;e:{switch(_=jc(r,l),r){case"dialog":Vt("cancel",e),Vt("close",e),d=l;break;case"iframe":case"object":case"embed":Vt("load",e),d=l;break;case"video":case"audio":for(d=0;d<ca.length;d++)Vt(ca[d],e);d=l;break;case"source":Vt("error",e),d=l;break;case"img":case"image":case"link":Vt("error",e),Vt("load",e),d=l;break;case"details":Vt("toggle",e),d=l;break;case"input":tf(e,l),d=Mc(e,l),Vt("invalid",e);break;case"option":d=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},d=en({},l,{value:void 0}),Vt("invalid",e);break;case"textarea":rf(e,l),d=Dc(e,l),Vt("invalid",e);break;default:d=l}Fc(r,d),x=d;for(f in x)if(x.hasOwnProperty(f)){var C=x[f];f==="style"?p0(e,C):f==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&d0(e,C)):f==="children"?typeof C=="string"?(r!=="textarea"||C!=="")&&ba(e,C):typeof C=="number"&&ba(e,""+C):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Sa.hasOwnProperty(f)?C!=null&&f==="onScroll"&&Vt("scroll",e):C!=null&&Bh(e,f,C,_))}switch(r){case"input":ll(e),nf(e,l,!1);break;case"textarea":ll(e),sf(e);break;case"option":l.value!=null&&e.setAttribute("value",""+fs(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?go(e,!!l.multiple,f,!1):l.defaultValue!=null&&go(e,!!l.multiple,l.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=$l)}switch(r){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Vn(n),null;case 6:if(e&&n.stateNode!=null)Bp(e,n,e.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(Se(166));if(r=Os(Ba.current),Os(Ar.current),_l(n)){if(l=n.stateNode,r=n.memoizedProps,l[Cr]=n,(f=l.nodeValue!==r)&&(e=Si,e!==null))switch(e.tag){case 3:ml(l.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ml(l.nodeValue,r,(e.mode&1)!==0)}f&&(n.flags|=4)}else l=(r.nodeType===9?r:r.ownerDocument).createTextNode(l),l[Cr]=n,n.stateNode=l}return Vn(n),null;case 13:if(Zt($t),l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Xt&&xi!==null&&n.mode&1&&!(n.flags&128))tp(),So(),n.flags|=98560,f=!1;else if(f=_l(n),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(Se(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(Se(317));f[Cr]=n}else So(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Vn(n),f=!1}else rr!==null&&(vh(rr),rr=null),f=!0;if(!f)return n.flags&65536?n:null}return n.flags&128?(n.lanes=r,n):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(n.child.flags|=8192,n.mode&1&&(e===null||$t.current&1?An===0&&(An=3):vd())),n.updateQueue!==null&&(n.flags|=4),Vn(n),null);case 4:return Io(),hh(e,n),e===null&&Ma(n.stateNode.containerInfo),Vn(n),null;case 10:return nd(n.type._context),Vn(n),null;case 17:return fi(n.type)&&Jl(),Vn(n),null;case 19:if(Zt($t),f=n.memoizedState,f===null)return Vn(n),null;if(l=(n.flags&128)!==0,_=f.rendering,_===null)if(l)ea(f,!1);else{if(An!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(_=ou(e),_!==null){for(n.flags|=128,ea(f,!1),l=_.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=r,r=n.child;r!==null;)f=r,e=l,f.flags&=14680066,_=f.alternate,_===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=_.childLanes,f.lanes=_.lanes,f.child=_.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=_.memoizedProps,f.memoizedState=_.memoizedState,f.updateQueue=_.updateQueue,f.type=_.type,e=_.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ft($t,$t.current&1|2),n.child}e=e.sibling}f.tail!==null&&hn()>No&&(n.flags|=128,l=!0,ea(f,!1),n.lanes=4194304)}else{if(!l)if(e=ou(_),e!==null){if(n.flags|=128,l=!0,r=e.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),ea(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!Xt)return Vn(n),null}else 2*hn()-f.renderingStartTime>No&&r!==1073741824&&(n.flags|=128,l=!0,ea(f,!1),n.lanes=4194304);f.isBackwards?(_.sibling=n.child,n.child=_):(r=f.last,r!==null?r.sibling=_:n.child=_,f.last=_)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=hn(),n.sibling=null,r=$t.current,Ft($t,l?r&1|2:r&1),n):(Vn(n),null);case 22:case 23:return yd(),l=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(n.flags|=8192),l&&n.mode&1?Ai&1073741824&&(Vn(n),n.subtreeFlags&6&&(n.flags|=8192)):Vn(n),null;case 24:return null;case 25:return null}throw Error(Se(156,n.tag))}function o_(e,n){switch($h(n),n.tag){case 1:return fi(n.type)&&Jl(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Io(),Zt(di),Zt(Zn),ad(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return od(n),null;case 13:if(Zt($t),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(Se(340));So()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Zt($t),null;case 4:return Io(),null;case 10:return nd(n.type._context),null;case 22:case 23:return yd(),null;case 24:return null;default:return null}}var wl=!1,Wn=!1,a_=typeof WeakSet=="function"?WeakSet:Set,ze=null;function co(e,n){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(l){rn(e,n,l)}else r.current=null}function dh(e,n,r){try{r()}catch(l){rn(e,n,l)}}var Yf=!1;function l_(e,n){if(Kc=Kl,e=H0(),Qh(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var _=0,x=-1,C=-1,v=0,S=0,I=e,M=null;t:for(;;){for(var F;I!==r||d!==0&&I.nodeType!==3||(x=_+d),I!==f||l!==0&&I.nodeType!==3||(C=_+l),I.nodeType===3&&(_+=I.nodeValue.length),(F=I.firstChild)!==null;)M=I,I=F;for(;;){if(I===e)break t;if(M===r&&++v===d&&(x=_),M===f&&++S===l&&(C=_),(F=I.nextSibling)!==null)break;I=M,M=I.parentNode}I=F}r=x===-1||C===-1?null:{start:x,end:C}}else r=null}r=r||{start:0,end:0}}else r=null;for(Qc={focusedElem:e,selectionRange:r},Kl=!1,ze=n;ze!==null;)if(n=ze,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ze=e;else for(;ze!==null;){n=ze;try{var z=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(z!==null){var U=z.memoizedProps,ue=z.memoizedState,H=n.stateNode,B=H.getSnapshotBeforeUpdate(n.elementType===n.type?U:tr(n.type,U),ue);H.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var P=n.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(X){rn(n,n.return,X)}if(e=n.sibling,e!==null){e.return=n.return,ze=e;break}ze=n.return}return z=Yf,Yf=!1,z}function va(e,n,r){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&dh(n,r,f)}d=d.next}while(d!==l)}}function Ou(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&e)===e){var l=r.create;r.destroy=l()}r=r.next}while(r!==n)}}function fh(e){var n=e.ref;if(n!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof n=="function"?n(e):n.current=e}}function Fp(e){var n=e.alternate;n!==null&&(e.alternate=null,Fp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Cr],delete n[La],delete n[Jc],delete n[W2],delete n[Z2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jp(e){return e.tag===5||e.tag===3||e.tag===4}function Kf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ph(e,n,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?r.nodeType===8?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(r.nodeType===8?(n=r.parentNode,n.insertBefore(e,r)):(n=r,n.appendChild(e)),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=$l));else if(l!==4&&(e=e.child,e!==null))for(ph(e,n,r),e=e.sibling;e!==null;)ph(e,n,r),e=e.sibling}function gh(e,n,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(gh(e,n,r),e=e.sibling;e!==null;)gh(e,n,r),e=e.sibling}var Pn=null,nr=!1;function $r(e,n,r){for(r=r.child;r!==null;)zp(e,n,r),r=r.sibling}function zp(e,n,r){if(Er&&typeof Er.onCommitFiberUnmount=="function")try{Er.onCommitFiberUnmount(Au,r)}catch{}switch(r.tag){case 5:Wn||co(r,n);case 6:var l=Pn,d=nr;Pn=null,$r(e,n,r),Pn=l,nr=d,Pn!==null&&(nr?(e=Pn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Pn.removeChild(r.stateNode));break;case 18:Pn!==null&&(nr?(e=Pn,r=r.stateNode,e.nodeType===8?dc(e.parentNode,r):e.nodeType===1&&dc(e,r),Ra(e)):dc(Pn,r.stateNode));break;case 4:l=Pn,d=nr,Pn=r.stateNode.containerInfo,nr=!0,$r(e,n,r),Pn=l,nr=d;break;case 0:case 11:case 14:case 15:if(!Wn&&(l=r.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){d=l=l.next;do{var f=d,_=f.destroy;f=f.tag,_!==void 0&&(f&2||f&4)&&dh(r,n,_),d=d.next}while(d!==l)}$r(e,n,r);break;case 1:if(!Wn&&(co(r,n),l=r.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=r.memoizedProps,l.state=r.memoizedState,l.componentWillUnmount()}catch(x){rn(r,n,x)}$r(e,n,r);break;case 21:$r(e,n,r);break;case 22:r.mode&1?(Wn=(l=Wn)||r.memoizedState!==null,$r(e,n,r),Wn=l):$r(e,n,r);break;default:$r(e,n,r)}}function Qf(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new a_),n.forEach(function(l){var d=__.bind(null,e,l);r.has(l)||(r.add(l),l.then(d,d))})}}function er(e,n){var r=n.deletions;if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];try{var f=e,_=n,x=_;e:for(;x!==null;){switch(x.tag){case 5:Pn=x.stateNode,nr=!1;break e;case 3:Pn=x.stateNode.containerInfo,nr=!0;break e;case 4:Pn=x.stateNode.containerInfo,nr=!0;break e}x=x.return}if(Pn===null)throw Error(Se(160));zp(f,_,d),Pn=null,nr=!1;var C=d.alternate;C!==null&&(C.return=null),d.return=null}catch(v){rn(d,n,v)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Up(n,e),n=n.sibling}function Up(e,n){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(er(n,e),vr(e),l&4){try{va(3,e,e.return),Ou(3,e)}catch(U){rn(e,e.return,U)}try{va(5,e,e.return)}catch(U){rn(e,e.return,U)}}break;case 1:er(n,e),vr(e),l&512&&r!==null&&co(r,r.return);break;case 5:if(er(n,e),vr(e),l&512&&r!==null&&co(r,r.return),e.flags&32){var d=e.stateNode;try{ba(d,"")}catch(U){rn(e,e.return,U)}}if(l&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,_=r!==null?r.memoizedProps:f,x=e.type,C=e.updateQueue;if(e.updateQueue=null,C!==null)try{x==="input"&&f.type==="radio"&&f.name!=null&&u0(d,f),jc(x,_);var v=jc(x,f);for(_=0;_<C.length;_+=2){var S=C[_],I=C[_+1];S==="style"?p0(d,I):S==="dangerouslySetInnerHTML"?d0(d,I):S==="children"?ba(d,I):Bh(d,S,I,v)}switch(x){case"input":Pc(d,f);break;case"textarea":c0(d,f);break;case"select":var M=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var F=f.value;F!=null?go(d,!!f.multiple,F,!1):M!==!!f.multiple&&(f.defaultValue!=null?go(d,!!f.multiple,f.defaultValue,!0):go(d,!!f.multiple,f.multiple?[]:"",!1))}d[La]=f}catch(U){rn(e,e.return,U)}}break;case 6:if(er(n,e),vr(e),l&4){if(e.stateNode===null)throw Error(Se(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(U){rn(e,e.return,U)}}break;case 3:if(er(n,e),vr(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Ra(n.containerInfo)}catch(U){rn(e,e.return,U)}break;case 4:er(n,e),vr(e);break;case 13:er(n,e),vr(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(md=hn())),l&4&&Qf(e);break;case 22:if(S=r!==null&&r.memoizedState!==null,e.mode&1?(Wn=(v=Wn)||S,er(n,e),Wn=v):er(n,e),vr(e),l&8192){if(v=e.memoizedState!==null,(e.stateNode.isHidden=v)&&!S&&e.mode&1)for(ze=e,S=e.child;S!==null;){for(I=ze=S;ze!==null;){switch(M=ze,F=M.child,M.tag){case 0:case 11:case 14:case 15:va(4,M,M.return);break;case 1:co(M,M.return);var z=M.stateNode;if(typeof z.componentWillUnmount=="function"){l=M,r=M.return;try{n=l,z.props=n.memoizedProps,z.state=n.memoizedState,z.componentWillUnmount()}catch(U){rn(l,r,U)}}break;case 5:co(M,M.return);break;case 22:if(M.memoizedState!==null){$f(I);continue}}F!==null?(F.return=M,ze=F):$f(I)}S=S.sibling}e:for(S=null,I=e;;){if(I.tag===5){if(S===null){S=I;try{d=I.stateNode,v?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(x=I.stateNode,C=I.memoizedProps.style,_=C!=null&&C.hasOwnProperty("display")?C.display:null,x.style.display=f0("display",_))}catch(U){rn(e,e.return,U)}}}else if(I.tag===6){if(S===null)try{I.stateNode.nodeValue=v?"":I.memoizedProps}catch(U){rn(e,e.return,U)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===e)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===e)break e;for(;I.sibling===null;){if(I.return===null||I.return===e)break e;S===I&&(S=null),I=I.return}S===I&&(S=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:er(n,e),vr(e),l&4&&Qf(e);break;case 21:break;default:er(n,e),vr(e)}}function vr(e){var n=e.flags;if(n&2){try{e:{for(var r=e.return;r!==null;){if(jp(r)){var l=r;break e}r=r.return}throw Error(Se(160))}switch(l.tag){case 5:var d=l.stateNode;l.flags&32&&(ba(d,""),l.flags&=-33);var f=Kf(e);gh(e,f,d);break;case 3:case 4:var _=l.stateNode.containerInfo,x=Kf(e);ph(e,x,_);break;default:throw Error(Se(161))}}catch(C){rn(e,e.return,C)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function u_(e,n,r){ze=e,Hp(e)}function Hp(e,n,r){for(var l=(e.mode&1)!==0;ze!==null;){var d=ze,f=d.child;if(d.tag===22&&l){var _=d.memoizedState!==null||wl;if(!_){var x=d.alternate,C=x!==null&&x.memoizedState!==null||Wn;x=wl;var v=Wn;if(wl=_,(Wn=C)&&!v)for(ze=d;ze!==null;)_=ze,C=_.child,_.tag===22&&_.memoizedState!==null?Jf(d):C!==null?(C.return=_,ze=C):Jf(d);for(;f!==null;)ze=f,Hp(f),f=f.sibling;ze=d,wl=x,Wn=v}qf(e)}else d.subtreeFlags&8772&&f!==null?(f.return=d,ze=f):qf(e)}}function qf(e){for(;ze!==null;){var n=ze;if(n.flags&8772){var r=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Wn||Ou(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!Wn)if(r===null)l.componentDidMount();else{var d=n.elementType===n.type?r.memoizedProps:tr(n.type,r.memoizedProps);l.componentDidUpdate(d,r.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=n.updateQueue;f!==null&&Lf(n,f,l);break;case 3:var _=n.updateQueue;if(_!==null){if(r=null,n.child!==null)switch(n.child.tag){case 5:r=n.child.stateNode;break;case 1:r=n.child.stateNode}Lf(n,_,r)}break;case 5:var x=n.stateNode;if(r===null&&n.flags&4){r=x;var C=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&r.focus();break;case"img":C.src&&(r.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var v=n.alternate;if(v!==null){var S=v.memoizedState;if(S!==null){var I=S.dehydrated;I!==null&&Ra(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}Wn||n.flags&512&&fh(n)}catch(M){rn(n,n.return,M)}}if(n===e){ze=null;break}if(r=n.sibling,r!==null){r.return=n.return,ze=r;break}ze=n.return}}function $f(e){for(;ze!==null;){var n=ze;if(n===e){ze=null;break}var r=n.sibling;if(r!==null){r.return=n.return,ze=r;break}ze=n.return}}function Jf(e){for(;ze!==null;){var n=ze;try{switch(n.tag){case 0:case 11:case 15:var r=n.return;try{Ou(4,n)}catch(C){rn(n,r,C)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var d=n.return;try{l.componentDidMount()}catch(C){rn(n,d,C)}}var f=n.return;try{fh(n)}catch(C){rn(n,f,C)}break;case 5:var _=n.return;try{fh(n)}catch(C){rn(n,_,C)}}}catch(C){rn(n,n.return,C)}if(n===e){ze=null;break}var x=n.sibling;if(x!==null){x.return=n.return,ze=x;break}ze=n.return}}var c_=Math.ceil,uu=Vr.ReactCurrentDispatcher,pd=Vr.ReactCurrentOwner,Hi=Vr.ReactCurrentBatchConfig,_t=0,Rn=null,_n=null,Ln=0,Ai=0,ho=ms(0),An=0,Ua=null,Fs=0,ku=0,gd=0,wa=null,ui=null,md=0,No=1/0,Pr=null,cu=!1,mh=null,cs=null,Cl=!1,rs=null,hu=0,Ca=0,_h=null,Ll=-1,Dl=0;function ii(){return _t&6?hn():Ll!==-1?Ll:Ll=hn()}function hs(e){return e.mode&1?_t&2&&Ln!==0?Ln&-Ln:X2.transition!==null?(Dl===0&&(Dl=b0()),Dl):(e=It,e!==0||(e=window.event,e=e===void 0?16:M0(e.type)),e):1}function or(e,n,r,l){if(50<Ca)throw Ca=0,_h=null,Error(Se(185));Za(e,r,l),(!(_t&2)||e!==Rn)&&(e===Rn&&(!(_t&2)&&(ku|=r),An===4&&ns(e,Ln)),pi(e,l),r===1&&_t===0&&!(n.mode&1)&&(No=hn()+500,Tu&&_s()))}function pi(e,n){var r=e.callbackNode;Xm(e,n);var l=Yl(e,e===Rn?Ln:0);if(l===0)r!==null&&lf(r),e.callbackNode=null,e.callbackPriority=0;else if(n=l&-l,e.callbackPriority!==n){if(r!=null&&lf(r),n===1)e.tag===0?G2(e1.bind(null,e)):$0(e1.bind(null,e)),H2(function(){!(_t&6)&&_s()}),r=null;else{switch(I0(l)){case 1:r=Hh;break;case 4:r=x0;break;case 16:r=Xl;break;case 536870912:r=S0;break;default:r=Xl}r=Qp(r,Vp.bind(null,e))}e.callbackPriority=n,e.callbackNode=r}}function Vp(e,n){if(Ll=-1,Dl=0,_t&6)throw Error(Se(327));var r=e.callbackNode;if(wo()&&e.callbackNode!==r)return null;var l=Yl(e,e===Rn?Ln:0);if(l===0)return null;if(l&30||l&e.expiredLanes||n)n=du(e,l);else{n=l;var d=_t;_t|=2;var f=Zp();(Rn!==e||Ln!==n)&&(Pr=null,No=hn()+500,Ms(e,n));do try{f_();break}catch(x){Wp(e,x)}while(!0);td(),uu.current=f,_t=d,_n!==null?n=0:(Rn=null,Ln=0,n=An)}if(n!==0){if(n===2&&(d=Wc(e),d!==0&&(l=d,n=yh(e,d))),n===1)throw r=Ua,Ms(e,0),ns(e,l),pi(e,hn()),r;if(n===6)ns(e,l);else{if(d=e.current.alternate,!(l&30)&&!h_(d)&&(n=du(e,l),n===2&&(f=Wc(e),f!==0&&(l=f,n=yh(e,f))),n===1))throw r=Ua,Ms(e,0),ns(e,l),pi(e,hn()),r;switch(e.finishedWork=d,e.finishedLanes=l,n){case 0:case 1:throw Error(Se(345));case 2:Is(e,ui,Pr);break;case 3:if(ns(e,l),(l&130023424)===l&&(n=md+500-hn(),10<n)){if(Yl(e,0)!==0)break;if(d=e.suspendedLanes,(d&l)!==l){ii(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=$c(Is.bind(null,e,ui,Pr),n);break}Is(e,ui,Pr);break;case 4:if(ns(e,l),(l&4194240)===l)break;for(n=e.eventTimes,d=-1;0<l;){var _=31-sr(l);f=1<<_,_=n[_],_>d&&(d=_),l&=~f}if(l=d,l=hn()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*c_(l/1960))-l,10<l){e.timeoutHandle=$c(Is.bind(null,e,ui,Pr),l);break}Is(e,ui,Pr);break;case 5:Is(e,ui,Pr);break;default:throw Error(Se(329))}}}return pi(e,hn()),e.callbackNode===r?Vp.bind(null,e):null}function yh(e,n){var r=wa;return e.current.memoizedState.isDehydrated&&(Ms(e,n).flags|=256),e=du(e,n),e!==2&&(n=ui,ui=r,n!==null&&vh(n)),e}function vh(e){ui===null?ui=e:ui.push.apply(ui,e)}function h_(e){for(var n=e;;){if(n.flags&16384){var r=n.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var l=0;l<r.length;l++){var d=r[l],f=d.getSnapshot;d=d.value;try{if(!ar(f(),d))return!1}catch{return!1}}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ns(e,n){for(n&=~gd,n&=~ku,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var r=31-sr(n),l=1<<r;e[r]=-1,n&=~l}}function e1(e){if(_t&6)throw Error(Se(327));wo();var n=Yl(e,0);if(!(n&1))return pi(e,hn()),null;var r=du(e,n);if(e.tag!==0&&r===2){var l=Wc(e);l!==0&&(n=l,r=yh(e,l))}if(r===1)throw r=Ua,Ms(e,0),ns(e,n),pi(e,hn()),r;if(r===6)throw Error(Se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Is(e,ui,Pr),pi(e,hn()),null}function _d(e,n){var r=_t;_t|=1;try{return e(n)}finally{_t=r,_t===0&&(No=hn()+500,Tu&&_s())}}function js(e){rs!==null&&rs.tag===0&&!(_t&6)&&wo();var n=_t;_t|=1;var r=Hi.transition,l=It;try{if(Hi.transition=null,It=1,e)return e()}finally{It=l,Hi.transition=r,_t=n,!(_t&6)&&_s()}}function yd(){Ai=ho.current,Zt(ho)}function Ms(e,n){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,U2(r)),_n!==null)for(r=_n.return;r!==null;){var l=r;switch($h(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Jl();break;case 3:Io(),Zt(di),Zt(Zn),ad();break;case 5:od(l);break;case 4:Io();break;case 13:Zt($t);break;case 19:Zt($t);break;case 10:nd(l.type._context);break;case 22:case 23:yd()}r=r.return}if(Rn=e,_n=e=ds(e.current,null),Ln=Ai=n,An=0,Ua=null,gd=ku=Fs=0,ui=wa=null,Rs!==null){for(n=0;n<Rs.length;n++)if(r=Rs[n],l=r.interleaved,l!==null){r.interleaved=null;var d=l.next,f=r.pending;if(f!==null){var _=f.next;f.next=d,l.next=_}r.pending=l}Rs=null}return e}function Wp(e,n){do{var r=_n;try{if(td(),kl.current=lu,au){for(var l=Jt.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}au=!1}if(Bs=0,Nn=En=Jt=null,ya=!1,Fa=0,pd.current=null,r===null||r.return===null){An=1,Ua=n,_n=null;break}e:{var f=e,_=r.return,x=r,C=n;if(n=Ln,x.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var v=C,S=x,I=S.tag;if(!(S.mode&1)&&(I===0||I===11||I===15)){var M=S.alternate;M?(S.updateQueue=M.updateQueue,S.memoizedState=M.memoizedState,S.lanes=M.lanes):(S.updateQueue=null,S.memoizedState=null)}var F=Uf(_);if(F!==null){F.flags&=-257,Hf(F,_,x,f,n),F.mode&1&&zf(f,v,n),n=F,C=v;var z=n.updateQueue;if(z===null){var U=new Set;U.add(C),n.updateQueue=U}else z.add(C);break e}else{if(!(n&1)){zf(f,v,n),vd();break e}C=Error(Se(426))}}else if(Xt&&x.mode&1){var ue=Uf(_);if(ue!==null){!(ue.flags&65536)&&(ue.flags|=256),Hf(ue,_,x,f,n),Jh(To(C,x));break e}}f=C=To(C,x),An!==4&&(An=2),wa===null?wa=[f]:wa.push(f),f=_;do{switch(f.tag){case 3:f.flags|=65536,n&=-n,f.lanes|=n;var H=Ip(f,C,n);Pf(f,H);break e;case 1:x=C;var B=f.type,P=f.stateNode;if(!(f.flags&128)&&(typeof B.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(cs===null||!cs.has(P)))){f.flags|=65536,n&=-n,f.lanes|=n;var X=Tp(f,x,n);Pf(f,X);break e}}f=f.return}while(f!==null)}Xp(r)}catch(ae){n=ae,_n===r&&r!==null&&(_n=r=r.return);continue}break}while(!0)}function Zp(){var e=uu.current;return uu.current=lu,e===null?lu:e}function vd(){(An===0||An===3||An===2)&&(An=4),Rn===null||!(Fs&268435455)&&!(ku&268435455)||ns(Rn,Ln)}function du(e,n){var r=_t;_t|=2;var l=Zp();(Rn!==e||Ln!==n)&&(Pr=null,Ms(e,n));do try{d_();break}catch(d){Wp(e,d)}while(!0);if(td(),_t=r,uu.current=l,_n!==null)throw Error(Se(261));return Rn=null,Ln=0,An}function d_(){for(;_n!==null;)Gp(_n)}function f_(){for(;_n!==null&&!Fm();)Gp(_n)}function Gp(e){var n=Kp(e.alternate,e,Ai);e.memoizedProps=e.pendingProps,n===null?Xp(e):_n=n,pd.current=null}function Xp(e){var n=e;do{var r=n.alternate;if(e=n.return,n.flags&32768){if(r=o_(r,n),r!==null){r.flags&=32767,_n=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{An=6,_n=null;return}}else if(r=s_(r,n,Ai),r!==null){_n=r;return}if(n=n.sibling,n!==null){_n=n;return}_n=n=e}while(n!==null);An===0&&(An=5)}function Is(e,n,r){var l=It,d=Hi.transition;try{Hi.transition=null,It=1,p_(e,n,r,l)}finally{Hi.transition=d,It=l}return null}function p_(e,n,r,l){do wo();while(rs!==null);if(_t&6)throw Error(Se(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Se(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(Ym(e,f),e===Rn&&(_n=Rn=null,Ln=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Cl||(Cl=!0,Qp(Xl,function(){return wo(),null})),f=(r.flags&15990)!==0,r.subtreeFlags&15990||f){f=Hi.transition,Hi.transition=null;var _=It;It=1;var x=_t;_t|=4,pd.current=null,l_(e,r),Up(r,e),P2(Qc),Kl=!!Kc,Qc=Kc=null,e.current=r,u_(r),jm(),_t=x,It=_,Hi.transition=f}else e.current=r;if(Cl&&(Cl=!1,rs=e,hu=d),f=e.pendingLanes,f===0&&(cs=null),Hm(r.stateNode),pi(e,hn()),n!==null)for(l=e.onRecoverableError,r=0;r<n.length;r++)d=n[r],l(d.value,{componentStack:d.stack,digest:d.digest});if(cu)throw cu=!1,e=mh,mh=null,e;return hu&1&&e.tag!==0&&wo(),f=e.pendingLanes,f&1?e===_h?Ca++:(Ca=0,_h=e):Ca=0,_s(),null}function wo(){if(rs!==null){var e=I0(hu),n=Hi.transition,r=It;try{if(Hi.transition=null,It=16>e?16:e,rs===null)var l=!1;else{if(e=rs,rs=null,hu=0,_t&6)throw Error(Se(331));var d=_t;for(_t|=4,ze=e.current;ze!==null;){var f=ze,_=f.child;if(ze.flags&16){var x=f.deletions;if(x!==null){for(var C=0;C<x.length;C++){var v=x[C];for(ze=v;ze!==null;){var S=ze;switch(S.tag){case 0:case 11:case 15:va(8,S,f)}var I=S.child;if(I!==null)I.return=S,ze=I;else for(;ze!==null;){S=ze;var M=S.sibling,F=S.return;if(Fp(S),S===v){ze=null;break}if(M!==null){M.return=F,ze=M;break}ze=F}}}var z=f.alternate;if(z!==null){var U=z.child;if(U!==null){z.child=null;do{var ue=U.sibling;U.sibling=null,U=ue}while(U!==null)}}ze=f}}if(f.subtreeFlags&2064&&_!==null)_.return=f,ze=_;else e:for(;ze!==null;){if(f=ze,f.flags&2048)switch(f.tag){case 0:case 11:case 15:va(9,f,f.return)}var H=f.sibling;if(H!==null){H.return=f.return,ze=H;break e}ze=f.return}}var B=e.current;for(ze=B;ze!==null;){_=ze;var P=_.child;if(_.subtreeFlags&2064&&P!==null)P.return=_,ze=P;else e:for(_=B;ze!==null;){if(x=ze,x.flags&2048)try{switch(x.tag){case 0:case 11:case 15:Ou(9,x)}}catch(ae){rn(x,x.return,ae)}if(x===_){ze=null;break e}var X=x.sibling;if(X!==null){X.return=x.return,ze=X;break e}ze=x.return}}if(_t=d,_s(),Er&&typeof Er.onPostCommitFiberRoot=="function")try{Er.onPostCommitFiberRoot(Au,e)}catch{}l=!0}return l}finally{It=r,Hi.transition=n}}return!1}function t1(e,n,r){n=To(r,n),n=Ip(e,n,1),e=us(e,n,1),n=ii(),e!==null&&(Za(e,1,n),pi(e,n))}function rn(e,n,r){if(e.tag===3)t1(e,e,r);else for(;n!==null;){if(n.tag===3){t1(n,e,r);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(cs===null||!cs.has(l))){e=To(r,e),e=Tp(n,e,1),n=us(n,e,1),e=ii(),n!==null&&(Za(n,1,e),pi(n,e));break}}n=n.return}}function g_(e,n,r){var l=e.pingCache;l!==null&&l.delete(n),n=ii(),e.pingedLanes|=e.suspendedLanes&r,Rn===e&&(Ln&r)===r&&(An===4||An===3&&(Ln&130023424)===Ln&&500>hn()-md?Ms(e,0):gd|=r),pi(e,n)}function Yp(e,n){n===0&&(e.mode&1?(n=hl,hl<<=1,!(hl&130023424)&&(hl=4194304)):n=1);var r=ii();e=Ur(e,n),e!==null&&(Za(e,n,r),pi(e,r))}function m_(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),Yp(e,r)}function __(e,n){var r=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(Se(314))}l!==null&&l.delete(n),Yp(e,r)}var Kp;Kp=function(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps||di.current)hi=!0;else{if(!(e.lanes&r)&&!(n.flags&128))return hi=!1,r_(e,n,r);hi=!!(e.flags&131072)}else hi=!1,Xt&&n.flags&1048576&&J0(n,nu,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;Pl(e,n),e=n.pendingProps;var d=xo(n,Zn.current);vo(n,r),d=ud(null,n,l,e,d,r);var f=cd();return n.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,fi(l)?(f=!0,eu(n)):f=!1,n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,rd(n),d.updater=Ru,n.stateNode=d,d._reactInternals=n,sh(n,l,e,r),n=lh(null,n,l,!0,f,r)):(n.tag=0,Xt&&f&&qh(n),ni(null,n,d,r),n=n.child),n;case 16:l=n.elementType;e:{switch(Pl(e,n),e=n.pendingProps,d=l._init,l=d(l._payload),n.type=l,d=n.tag=v_(l),e=tr(l,e),d){case 0:n=ah(null,n,l,e,r);break e;case 1:n=Zf(null,n,l,e,r);break e;case 11:n=Vf(null,n,l,e,r);break e;case 14:n=Wf(null,n,l,tr(l.type,e),r);break e}throw Error(Se(306,l,""))}return n;case 0:return l=n.type,d=n.pendingProps,d=n.elementType===l?d:tr(l,d),ah(e,n,l,d,r);case 1:return l=n.type,d=n.pendingProps,d=n.elementType===l?d:tr(l,d),Zf(e,n,l,d,r);case 3:e:{if(kp(n),e===null)throw Error(Se(387));l=n.pendingProps,f=n.memoizedState,d=f.element,sp(e,n),su(n,l,null,r);var _=n.memoizedState;if(l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){d=To(Error(Se(423)),n),n=Gf(e,n,l,r,d);break e}else if(l!==d){d=To(Error(Se(424)),n),n=Gf(e,n,l,r,d);break e}else for(xi=ls(n.stateNode.containerInfo.firstChild),Si=n,Xt=!0,rr=null,r=ip(n,null,l,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(So(),l===d){n=Hr(e,n,r);break e}ni(e,n,l,r)}n=n.child}return n;case 5:return op(n),e===null&&nh(n),l=n.type,d=n.pendingProps,f=e!==null?e.memoizedProps:null,_=d.children,qc(l,d)?_=null:f!==null&&qc(l,f)&&(n.flags|=32),Op(e,n),ni(e,n,_,r),n.child;case 6:return e===null&&nh(n),null;case 13:return Mp(e,n,r);case 4:return sd(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=bo(n,null,l,r):ni(e,n,l,r),n.child;case 11:return l=n.type,d=n.pendingProps,d=n.elementType===l?d:tr(l,d),Vf(e,n,l,d,r);case 7:return ni(e,n,n.pendingProps,r),n.child;case 8:return ni(e,n,n.pendingProps.children,r),n.child;case 12:return ni(e,n,n.pendingProps.children,r),n.child;case 10:e:{if(l=n.type._context,d=n.pendingProps,f=n.memoizedProps,_=d.value,Ft(iu,l._currentValue),l._currentValue=_,f!==null)if(ar(f.value,_)){if(f.children===d.children&&!di.current){n=Hr(e,n,r);break e}}else for(f=n.child,f!==null&&(f.return=n);f!==null;){var x=f.dependencies;if(x!==null){_=f.child;for(var C=x.firstContext;C!==null;){if(C.context===l){if(f.tag===1){C=Fr(-1,r&-r),C.tag=2;var v=f.updateQueue;if(v!==null){v=v.shared;var S=v.pending;S===null?C.next=C:(C.next=S.next,S.next=C),v.pending=C}}f.lanes|=r,C=f.alternate,C!==null&&(C.lanes|=r),ih(f.return,r,n),x.lanes|=r;break}C=C.next}}else if(f.tag===10)_=f.type===n.type?null:f.child;else if(f.tag===18){if(_=f.return,_===null)throw Error(Se(341));_.lanes|=r,x=_.alternate,x!==null&&(x.lanes|=r),ih(_,r,n),_=f.sibling}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}ni(e,n,d.children,r),n=n.child}return n;case 9:return d=n.type,l=n.pendingProps.children,vo(n,r),d=Vi(d),l=l(d),n.flags|=1,ni(e,n,l,r),n.child;case 14:return l=n.type,d=tr(l,n.pendingProps),d=tr(l.type,d),Wf(e,n,l,d,r);case 15:return Np(e,n,n.type,n.pendingProps,r);case 17:return l=n.type,d=n.pendingProps,d=n.elementType===l?d:tr(l,d),Pl(e,n),n.tag=1,fi(l)?(e=!0,eu(n)):e=!1,vo(n,r),bp(n,l,d),sh(n,l,d,r),lh(null,n,l,!0,e,r);case 19:return Pp(e,n,r);case 22:return Rp(e,n,r)}throw Error(Se(156,n.tag))};function Qp(e,n){return A0(e,n)}function y_(e,n,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ui(e,n,r,l){return new y_(e,n,r,l)}function wd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function v_(e){if(typeof e=="function")return wd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jh)return 11;if(e===zh)return 14}return 2}function ds(e,n){var r=e.alternate;return r===null?(r=Ui(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Bl(e,n,r,l,d,f){var _=2;if(l=e,typeof e=="function")wd(e)&&(_=1);else if(typeof e=="string")_=5;else e:switch(e){case to:return Ps(r.children,d,f,n);case Fh:_=8,d|=8;break;case Nc:return e=Ui(12,r,n,d|2),e.elementType=Nc,e.lanes=f,e;case Rc:return e=Ui(13,r,n,d),e.elementType=Rc,e.lanes=f,e;case Oc:return e=Ui(19,r,n,d),e.elementType=Oc,e.lanes=f,e;case o0:return Mu(r,d,f,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case r0:_=10;break e;case s0:_=9;break e;case jh:_=11;break e;case zh:_=14;break e;case Jr:_=16,l=null;break e}throw Error(Se(130,e==null?e:typeof e,""))}return n=Ui(_,r,n,d),n.elementType=e,n.type=l,n.lanes=f,n}function Ps(e,n,r,l){return e=Ui(7,e,l,n),e.lanes=r,e}function Mu(e,n,r,l){return e=Ui(22,e,l,n),e.elementType=o0,e.lanes=r,e.stateNode={isHidden:!1},e}function wc(e,n,r){return e=Ui(6,e,null,n),e.lanes=r,e}function Cc(e,n,r){return n=Ui(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function w_(e,n,r,l,d){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tc(0),this.expirationTimes=tc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tc(0),this.identifierPrefix=l,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Cd(e,n,r,l,d,f,_,x,C){return e=new w_(e,n,r,x,C),n===1?(n=1,f===!0&&(n|=8)):n=0,f=Ui(3,null,null,n),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},rd(f),e}function C_(e,n,r){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eo,key:l==null?null:""+l,children:e,containerInfo:n,implementation:r}}function qp(e){if(!e)return ps;e=e._reactInternals;e:{if(Vs(e)!==e||e.tag!==1)throw Error(Se(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(fi(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(Se(171))}if(e.tag===1){var r=e.type;if(fi(r))return q0(e,r,n)}return n}function $p(e,n,r,l,d,f,_,x,C){return e=Cd(r,l,!0,e,d,f,_,x,C),e.context=qp(null),r=e.current,l=ii(),d=hs(r),f=Fr(l,d),f.callback=n??null,us(r,f,d),e.current.lanes=d,Za(e,d,l),pi(e,l),e}function Pu(e,n,r,l){var d=n.current,f=ii(),_=hs(d);return r=qp(r),n.context===null?n.context=r:n.pendingContext=r,n=Fr(f,_),n.payload={element:e},l=l===void 0?null:l,l!==null&&(n.callback=l),e=us(d,n,_),e!==null&&(or(e,d,_,f),Ol(e,d,_)),_}function fu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function n1(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function Ed(e,n){n1(e,n),(e=e.alternate)&&n1(e,n)}function E_(){return null}var Jp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ad(e){this._internalRoot=e}Lu.prototype.render=Ad.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(Se(409));Pu(e,n,null,null)};Lu.prototype.unmount=Ad.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;js(function(){Pu(null,e,null,null)}),n[zr]=null}};function Lu(e){this._internalRoot=e}Lu.prototype.unstable_scheduleHydration=function(e){if(e){var n=R0();e={blockedOn:null,target:e,priority:n};for(var r=0;r<ts.length&&n!==0&&n<ts[r].priority;r++);ts.splice(r,0,e),r===0&&k0(e)}};function xd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Du(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function i1(){}function A_(e,n,r,l,d){if(d){if(typeof l=="function"){var f=l;l=function(){var v=fu(_);f.call(v)}}var _=$p(n,l,e,0,null,!1,!1,"",i1);return e._reactRootContainer=_,e[zr]=_.current,Ma(e.nodeType===8?e.parentNode:e),js(),_}for(;d=e.lastChild;)e.removeChild(d);if(typeof l=="function"){var x=l;l=function(){var v=fu(C);x.call(v)}}var C=Cd(e,0,!1,null,null,!1,!1,"",i1);return e._reactRootContainer=C,e[zr]=C.current,Ma(e.nodeType===8?e.parentNode:e),js(function(){Pu(n,C,r,l)}),C}function Bu(e,n,r,l,d){var f=r._reactRootContainer;if(f){var _=f;if(typeof d=="function"){var x=d;d=function(){var C=fu(_);x.call(C)}}Pu(n,_,e,d)}else _=A_(r,n,e,d,l);return fu(_)}T0=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var r=ua(n.pendingLanes);r!==0&&(Vh(n,r|1),pi(n,hn()),!(_t&6)&&(No=hn()+500,_s()))}break;case 13:js(function(){var l=Ur(e,1);if(l!==null){var d=ii();or(l,e,1,d)}}),Ed(e,1)}};Wh=function(e){if(e.tag===13){var n=Ur(e,134217728);if(n!==null){var r=ii();or(n,e,134217728,r)}Ed(e,134217728)}};N0=function(e){if(e.tag===13){var n=hs(e),r=Ur(e,n);if(r!==null){var l=ii();or(r,e,n,l)}Ed(e,n)}};R0=function(){return It};O0=function(e,n){var r=It;try{return It=e,n()}finally{It=r}};Uc=function(e,n,r){switch(n){case"input":if(Pc(e,r),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<r.length;n++){var l=r[n];if(l!==e&&l.form===e.form){var d=Iu(l);if(!d)throw Error(Se(90));l0(l),Pc(l,d)}}}break;case"textarea":c0(e,r);break;case"select":n=r.value,n!=null&&go(e,!!r.multiple,n,!1)}};_0=_d;y0=js;var x_={usingClientEntryPoint:!1,Events:[Xa,so,Iu,g0,m0,_d]},ta={findFiberByHostInstance:Ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S_={bundleType:ta.bundleType,version:ta.version,rendererPackageName:ta.rendererPackageName,rendererConfig:ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=C0(e),e===null?null:e.stateNode},findFiberByHostInstance:ta.findFiberByHostInstance||E_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var El=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!El.isDisabled&&El.supportsFiber)try{Au=El.inject(S_),Er=El}catch{}}Ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x_;Ii.createPortal=function(e,n){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xd(n))throw Error(Se(200));return C_(e,n,null,r)};Ii.createRoot=function(e,n){if(!xd(e))throw Error(Se(299));var r=!1,l="",d=Jp;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),n=Cd(e,1,!1,null,null,r,!1,l,d),e[zr]=n.current,Ma(e.nodeType===8?e.parentNode:e),new Ad(n)};Ii.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(Se(188)):(e=Object.keys(e).join(","),Error(Se(268,e)));return e=C0(n),e=e===null?null:e.stateNode,e};Ii.flushSync=function(e){return js(e)};Ii.hydrate=function(e,n,r){if(!Du(n))throw Error(Se(200));return Bu(null,e,n,!0,r)};Ii.hydrateRoot=function(e,n,r){if(!xd(e))throw Error(Se(405));var l=r!=null&&r.hydratedSources||null,d=!1,f="",_=Jp;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),n=$p(n,null,e,1,r??null,d,!1,f,_),e[zr]=n.current,Ma(e),l)for(e=0;e<l.length;e++)r=l[e],d=r._getVersion,d=d(r._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[r,d]:n.mutableSourceEagerHydrationData.push(r,d);return new Lu(n)};Ii.render=function(e,n,r){if(!Du(n))throw Error(Se(200));return Bu(null,e,n,!1,r)};Ii.unmountComponentAtNode=function(e){if(!Du(e))throw Error(Se(40));return e._reactRootContainer?(js(function(){Bu(null,null,e,!1,function(){e._reactRootContainer=null,e[zr]=null})}),!0):!1};Ii.unstable_batchedUpdates=_d;Ii.unstable_renderSubtreeIntoContainer=function(e,n,r,l){if(!Du(r))throw Error(Se(200));if(e==null||e._reactInternals===void 0)throw Error(Se(38));return Bu(e,n,r,!1,l)};Ii.version="18.3.1-next-f1338f8080-20240426";function eg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eg)}catch(e){console.error(e)}}eg(),e0.exports=Ii;var tg=e0.exports,r1=tg;Ic.createRoot=r1.createRoot,Ic.hydrateRoot=r1.hydrateRoot;var wh={exports:{}};/*! mobile-drag-drop 3.0.0-rc.0 | Copyright (c) 2022 Tim Ruffles | MIT License */(function(e,n){(function(r,l){l(n)})(wu,function(r){var l="dnd-poly-",d=["none","copy","copyLink","copyMove","link","linkMove","move","all"],f=["none","copy","move","link"];function _(){var Z=!1;try{var te=Object.defineProperty({},"passive",{get:function(){Z=!0}});window.addEventListener("test",null,te)}catch{}return Z}var x=_();function C(Z){return Z&&Z.tagName}function v(Z,te,G){document.addEventListener(Z,te,!!x&&{passive:G})}function S(Z,te){document.removeEventListener(Z,te)}function I(Z,te,G,me){me===void 0&&(me=!1);var fe=x?{passive:!0,capture:me}:me;return Z.addEventListener(te,G,fe),{off:function(){Z.removeEventListener(te,G,fe)}}}function M(Z){return Z.length===0?0:Z.reduce(function(te,G){return G+te},0)/Z.length}function F(Z,te){for(var G=0;G<Z.changedTouches.length;G++)if(Z.changedTouches[G].identifier===te)return!0;return!1}function z(Z,te,G){for(var me=[],fe=[],ne=0;ne<te.touches.length;ne++){var pe=te.touches[ne];me.push(pe[Z+"X"]),fe.push(pe[Z+"Y"])}G.x=M(me),G.y=M(fe)}var U=["","-webkit-"];function ue(Z,pe,G,me,fe){var ne=pe.x,pe=pe.y;me&&(ne+=me.x,pe+=me.y),(fe=fe===void 0||fe)&&(ne-=parseInt(Z.offsetWidth,10)/2,pe-=parseInt(Z.offsetHeight,10)/2);for(var he="translate3d("+ne+"px,"+pe+"px, 0)",Ce=0;Ce<U.length;Ce++){var be=U[Ce]+"transform";Z.style[be]=he+" "+G[Ce]}}var H=(Object.defineProperty(B.prototype,"dropEffect",{get:function(){return this.t},set:function(Z){this.i.mode!==0&&-1<d.indexOf(Z)&&(this.t=Z)},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"types",{get:function(){if(this.i.mode!==0)return Object.freeze(this.i.types)},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"effectAllowed",{get:function(){return this.i.effectAllowed},set:function(Z){this.i.mode===2&&-1<d.indexOf(Z)&&(this.i.effectAllowed=Z)},enumerable:!1,configurable:!0}),B.prototype.setData=function(Z,te){if(this.i.mode===2){if(-1<Z.indexOf(" "))throw new Error("illegal arg: type contains space");this.i.data[Z]=te,this.i.types.indexOf(Z)===-1&&this.i.types.push(Z)}},B.prototype.getData=function(Z){if(this.i.mode===1||this.i.mode===2)return this.i.data[Z]||""},B.prototype.clearData=function(Z){this.i.mode===2&&(Z&&this.i.data[Z]?(delete this.i.data[Z],-1<(Z=this.i.types.indexOf(Z))&&this.i.types.splice(Z,1)):(this.i.data={},this.i.types=[]))},B.prototype.setDragImage=function(Z,te,G){this.i.mode===2&&this.h(Z,te,G)},B);function B(Z,te){this.i=Z,this.h=te,this.t=f[0]}function P(Z,te){return Z?Z===d[0]?f[0]:Z.indexOf(d[1])===0||Z===d[7]?f[1]:Z.indexOf(d[4])===0?f[3]:Z===d[6]?f[2]:f[1]:te.nodeType===3&&te.tagName==="A"?f[3]:f[1]}function X(Z,te,G,me,fe,ne,pe){return pe===void 0&&(pe=null),fe=function(he,Ce,be,Be,ve,Re,ge){pe===void 0&&(ge=null);var nt=G.changedTouches[0],Be=new Event(Z,{bubbles:!0,cancelable:Be});return Be.dataTransfer=Re,Be.relatedTarget=ge,Be.screenX=nt.screenX,Be.screenY=nt.screenY,Be.clientX=nt.clientX,Be.clientY=nt.clientY,Be.pageX=nt.pageX,Be.pageY=nt.pageY,he=he.getBoundingClientRect(),Be.offsetX=Be.clientX-he.left,Be.offsetY=Be.clientY-he.top,Be}(te,0,0,ne=ne===void 0||ne,document.defaultView,fe,pe),fe=!te.dispatchEvent(fe),me.mode=0,fe}function ae(Z,te){if(!Z||Z===d[7])return te;if(te===f[1]){if(Z.indexOf(f[1])===0)return f[1]}else if(te===f[3]){if(Z.indexOf(f[3])===0||-1<Z.indexOf("Link"))return f[3]}else if(te===f[2]&&(Z.indexOf(f[2])===0||-1<Z.indexOf("Move")))return f[2];return f[0]}var se=($.prototype.o=function(){var Z=this;this.u=1,this.l=f[0],this.v={data:{},effectAllowed:void 0,mode:3,types:[]},this.p={x:null,y:null},this.g={x:null,y:null};var te=this.m;if(this.I=new H(this.v,function(ne,pe,he){te=ne,typeof pe!="number"&&typeof he!="number"||(Z.j={x:pe||0,y:he||0})}),this.v.mode=2,this.I.dropEffect=f[0],X("dragstart",this.m,this.k,this.v,this.I))return this.u=3,this.C(),!1;z("page",this.k,this.g);var G,me,fe=this.S.dragImageSetup(te);return this.A=(G=fe,U.map(function(ne){return ne=G.style[ne+"transform"],ne&&ne!=="none"?ne.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,""):""})),fe.style.position="absolute",fe.style.left="0px",fe.style.top="0px",fe.style.zIndex="999999",fe.classList.add("dnd-poly-drag-image"),fe.classList.add("dnd-poly-icon"),this.O=fe,this.j||(this.S.dragImageOffset?this.j={x:this.S.dragImageOffset.x,y:this.S.dragImageOffset.y}:this.S.dragImageCenterOnTouch?(me=getComputedStyle(te),this.j={x:0-parseInt(me.marginLeft,10),y:0-parseInt(me.marginTop,10)}):(fe=te.getBoundingClientRect(),me=getComputedStyle(te),this.j={x:fe.left-this.M.clientX-parseInt(me.marginLeft,10)+fe.width/2,y:fe.top-this.M.clientY-parseInt(me.marginTop,10)+fe.height/2})),ue(this.O,this.g,this.A,this.j,this.S.dragImageCenterOnTouch),document.body.appendChild(this.O),this.D=window.setInterval(function(){Z.F||(Z.F=!0,Z.N(),Z.F=!1)},this.S.iterationInterval),!0},$.prototype.C=function(){this.D&&(clearInterval(this.D),this.D=null),S("touchmove",this.P),S("touchend",this.T),S("touchcancel",this.T),this.O&&(this.O.parentNode.removeChild(this.O),this.O=null),this.L(this.S,this.k,this.u)},$.prototype._=function(Z){var te=this;if(F(Z,this.M.identifier)!==!1){if(this.k=Z,this.u===0){var G=void 0;if(this.S.dragStartConditionOverride)try{G=this.S.dragStartConditionOverride(Z)}catch{G=!1}else G=Z.touches.length===1;return G?void(this.o()===!0&&(this.H.preventDefault(),Z.preventDefault())):void this.C()}if(Z.preventDefault(),z("client",Z,this.p),z("page",Z,this.g),this.S.dragImageTranslateOverride)try{var me=!1;if(this.S.dragImageTranslateOverride(Z,{x:this.p.x,y:this.p.y},this.V,function(fe,ne){te.O&&(me=!0,te.p.x+=fe,te.p.y+=ne,te.g.x+=fe,te.g.y+=ne,ue(te.O,te.g,te.A,te.j,te.S.dragImageCenterOnTouch))}),me)return}catch{}ue(this.O,this.g,this.A,this.j,this.S.dragImageCenterOnTouch)}},$.prototype.X=function(Z){if(F(Z,this.M.identifier)!==!1){if(this.S.dragImageTranslateOverride)try{this.S.dragImageTranslateOverride(void 0,void 0,void 0,function(){})}catch{}this.u!==0?(Z.preventDefault(),this.u=Z.type==="touchcancel"?3:2):this.C()}},$.prototype.N=function(){var Z=this,te=this.l;this.v.mode=3,this.I.dropEffect=f[0];var G,me,fe,ne,pe,he=X("drag",this.m,this.k,this.v,this.I);if(he&&(this.l=f[0]),he||this.u===2||this.u===3)return this.Y(this.u)?(ne=this.m,G=this.O,me=this.A,be=function(){Z.q()},void((pe=getComputedStyle(ne)).visibility!=="hidden"&&pe.display!=="none"?(G.classList.add("dnd-poly-snapback"),fe=getComputedStyle(G),he=parseFloat(fe.transitionDuration),isNaN(he)||he===0?be():((ne={x:(Ce=ne.getBoundingClientRect()).left,y:Ce.top}).x+=document.body.scrollLeft||document.documentElement.scrollLeft,ne.y+=document.body.scrollTop||document.documentElement.scrollTop,ne.x-=parseInt(pe.marginLeft,10),ne.y-=parseInt(pe.marginTop,10),Ce=parseFloat(fe.transitionDelay),Ce=Math.round(1e3*(he+Ce)),ue(G,ne,me,void 0,!1),setTimeout(be,Ce))):be())):void this.q();var Ce=this.S.elementFromPoint(this.p.x,this.p.y),be=this.B;Ce!==this.V&&Ce!==this.B&&(this.V=Ce,this.B!==null&&(this.v.mode=3,this.I.dropEffect=f[0],X("dragexit",this.B,this.k,this.v,this.I,!1)),this.V===null?this.B=this.V:(this.v.mode=3,this.I.dropEffect=P(this.v.effectAllowed,this.m),X("dragenter",this.V,this.k,this.v,this.I)?(this.B=this.V,this.l=ae(this.I.effectAllowed,this.I.dropEffect)):this.V!==document.body&&(this.B=document.body))),be!==this.B&&C(be)&&(this.v.mode=3,this.I.dropEffect=f[0],X("dragleave",be,this.k,this.v,this.I,!1,this.B)),C(this.B)&&(this.v.mode=3,this.I.dropEffect=P(this.v.effectAllowed,this.m),X("dragover",this.B,this.k,this.v,this.I)===!1?this.l=f[0]:this.l=ae(this.I.effectAllowed,this.I.dropEffect)),te!==this.l&&this.O.classList.remove(l+te),te=l+this.l,this.O.classList.add(te)},$.prototype.Y=function(Z){return Z=this.l===f[0]||this.B===null||Z===3,Z?C(this.B)&&(this.v.mode=3,this.I.dropEffect=f[0],X("dragleave",this.B,this.k,this.v,this.I,!1)):C(this.B)&&(this.v.mode=1,this.I.dropEffect=this.l,X("drop",this.B,this.k,this.v,this.I)===!0?this.l=this.I.dropEffect:this.l=f[0]),Z},$.prototype.q=function(){this.v.mode=3,this.I.dropEffect=this.l,X("dragend",this.m,this.k,this.v,this.I,!1),this.u=2,this.C()},$);function $(Z,te,G,me){this.H=Z,this.S=te,this.m=G,this.L=me,this.u=0,this.V=null,this.B=null,this.k=Z,this.M=Z.changedTouches[0],this.P=this._.bind(this),this.T=this.X.bind(this),v("touchmove",this.P,!1),v("touchend",this.T,!1),v("touchcancel",this.T,!1)}var J,V={iterationInterval:150,tryFindDraggableTarget:function(Z){for(var te=0,G=Z.composedPath();te<G.length;te++){var me=G[te];do if(me.draggable!==!1&&(me.draggable===!0||me.getAttribute&&me.getAttribute("draggable")==="true"))return me;while((me=me.parentNode)&&me!==document.body)}},dragImageSetup:function(Z){var te=Z.cloneNode(!0);return function G(me,fe){if(me.nodeType===1){for(var ne,pe,he=getComputedStyle(me),Ce=0;Ce<he.length;Ce++){var be=he[Ce];fe.style.setProperty(be,he.getPropertyValue(be),he.getPropertyPriority(be))}fe.style.pointerEvents="none",fe.removeAttribute("id"),fe.removeAttribute("class"),fe.removeAttribute("draggable"),fe.nodeName==="CANVAS"&&(ne=fe,pe=(pe=me).getContext("2d").getImageData(0,0,pe.width,pe.height),ne.getContext("2d").putImageData(pe,0,0))}if(me.hasChildNodes())for(Ce=0;Ce<me.childNodes.length;Ce++)G(me.childNodes[Ce],fe.childNodes[Ce]);(function Ve(ve){if(ve instanceof HTMLElement&&(ve.style.pointerEvents="none"),ve.children&&ve.children.length)for(var Re=0;Re<ve.children.length;Re++)Ve(ve.children[Re]);if(ve.shadowRoot&&ve.shadowRoot.children.length)for(Re=0;Re<ve.shadowRoot.children.length;Re++)Ve(ve.shadowRoot.children[Re])})(fe)}(Z,te),te},elementFromPoint:function(Z,te){var G=document.elementFromPoint(Z,te);if(G){for(;G.shadowRoot;){var me=G.shadowRoot.elementFromPoint(Z,te);if(me===null||me===G)break;G=me}return G}}};function W(Z){if(!J){var te=V.tryFindDraggableTarget(Z);if(te)try{J=new se(Z,V,te,oe)}catch(G){throw oe(V,Z,3),G}}}function ee(Z){function te(Ce){fe.off(),ne.off(),pe.off(),he.off(),G&&G.dispatchEvent(new CustomEvent("dnd-poly-dragstart-cancel",{bubbles:!0,cancelable:!0})),clearTimeout(me)}var G=Z.target;G&&G.dispatchEvent(new CustomEvent("dnd-poly-dragstart-pending",{bubbles:!0,cancelable:!0}));var me=window.setTimeout(function(){fe.off(),ne.off(),pe.off(),he.off(),W(Z)},V.holdToDrag),fe=I(G,"touchend",te),ne=I(G,"touchcancel",te),pe=I(G,"touchmove",te),he=I(window,"scroll",te,!0)}function oe(Z,te,G){if(G===0&&Z.defaultActionOverride)try{Z.defaultActionOverride(te),te.defaultPrevented}catch{}J=null}r.polyfill=function(Z){if(Z&&Object.keys(Z).forEach(function(G){V[G]=Z[G]}),!V.forceApply&&(te=(te=!!window.chrome||/chrome/i.test(navigator.userAgent),{dragEvents:"ondragstart"in document.documentElement,draggable:"draggable"in document.documentElement,userAgentSupportingNativeDnD:!(/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||te&&"ontouchstart"in document.documentElement)}),te.userAgentSupportingNativeDnD&&te.draggable&&te.dragEvents))return!1;var te;return V.holdToDrag?v("touchstart",ee,!1):v("touchstart",W,!1),!0},r.supportsPassiveEventListener=_,Object.defineProperty(r,"G",{value:!0})})})(wh,wh.exports);var b_=wh.exports,Ch={exports:{}};(function(e,n){(function(r,l){l(n)})(wu,function(r){function l(V){return V===document.body||V===document.documentElement}function d(V,W){var ee;if(l(V))ee=W===0?V.clientLeft:V.clientTop;else{var oe=V.getBoundingClientRect();ee=W===0?oe.left:oe.top}return ee}function f(V,W){var ee;return l(V)?ee=W===0?window.innerWidth:window.innerHeight:ee=W===0?V.clientWidth:V.clientHeight,ee}function _(V,W,ee){var oe=W===0?"scrollLeft":"scrollTop",Z=l(V);if(arguments.length===2)return Z?document.body[oe]||document.documentElement[oe]:V[oe];Z?(document.documentElement[oe]+=ee,document.body[oe]+=ee):V[oe]+=ee}function x(V){var W=getComputedStyle(V);return V.scrollHeight>V.clientHeight&&(W.overflowY==="scroll"||W.overflowY==="auto")||V.scrollWidth>V.clientWidth&&(W.overflowX==="scroll"||W.overflowX==="auto")}function C(V){do{if(!V)return;if(x(V))return V;if(V===document.documentElement)return null}while(V=V.parentNode);return null}function v(V,W,ee){return V<ee?-1:W-V<ee?1:0}function S(V,W,ee,oe){return V===-1?Math.abs(W-oe):V===1?Math.abs(ee-W-oe):0}function I(V,W,ee){var oe=V===0?ee.scrollX:ee.scrollY;if(W===1){var Z=V===0?ee.scrollWidth-ee.width:ee.scrollHeight-ee.height;return oe>=Z}else if(W===-1)return oe<=0;return!0}var M={threshold:75,velocityFn:function(V,W){var ee=V/W,oe=ee*ee*ee;return oe*W}},F={horizontal:0,vertical:0},z={x:0,y:0},U,ue,H,B,P;function X(V,W,ee,oe){ue=W,P=oe,H!==ee&&(H=ee,B=C(H));var Z=$(ue,B,M.threshold,F,z);Z?ae():U&&(window.cancelAnimationFrame(U),U=null)}function ae(){U||(U=window.requestAnimationFrame(se))}function se(){var V=0,W=0,ee=l(B);F.horizontal!==0&&(V=Math.round(M.velocityFn(z.x,M.threshold)*F.horizontal),_(B,0,V)),F.vertical!==0&&(W=Math.round(M.velocityFn(z.y,M.threshold)*F.vertical),_(B,1,W)),ee?P(V,W):P(0,0),U=null,$(ue,B,M.threshold,F,z)&&ae()}function $(V,W,ee,oe,Z){if(!V||!W)return!1;var te={x:d(W,0),y:d(W,1),width:f(W,0),height:f(W,1),scrollX:_(W,0),scrollY:_(W,1),scrollWidth:W.scrollWidth,scrollHeight:W.scrollHeight},G={x:V.x-te.x,y:V.y-te.y};return oe.horizontal=v(G.x,te.width,ee),oe.vertical=v(G.y,te.height,ee),oe.horizontal&&I(0,oe.horizontal,te)?oe.horizontal=0:oe.horizontal&&(Z.x=S(oe.horizontal,G.x,te.width,ee)),oe.vertical&&I(1,oe.vertical,te)?oe.vertical=0:oe.vertical&&(Z.y=S(oe.vertical,G.y,te.height,ee)),!!(oe.horizontal||oe.vertical)}var J=X;r.scrollBehaviourDragImageTranslateOverride=J,Object.defineProperty(r,"__esModule",{value:!0})})})(Ch,Ch.exports);var I_=Ch.exports;const T_=""+new URL("compass-DjuYXV7z.png",import.meta.url).href,N_=""+new URL("layer-tgRGCNyO.png",import.meta.url).href,R_=""+new URL("menu-CTekbRYg.png",import.meta.url).href,O_=""+new URL("route-oCgy4FtE.png",import.meta.url).href,k_=""+new URL("settings-DL-iSASc.png",import.meta.url).href,M_=""+new URL("zoom-BsLudKLj.png",import.meta.url).href;function P_(e,n){const r=Q.useRef(n);Q.useEffect(function(){n!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),n!=null&&e.attributionControl.addAttribution(n)),r.current=n},[e,n])}const L_=1;function D_(e){return Object.freeze({__version:L_,map:e})}function ng(e,n){return Object.freeze({...e,...n})}const ig=Q.createContext(null),rg=ig.Provider;function Fu(){const e=Q.useContext(ig);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function sg(e){function n(r,l){const{instance:d,context:f}=e(r).current;return Q.useImperativeHandle(l,()=>d),r.children==null?null:Gt.createElement(rg,{value:f},r.children)}return Q.forwardRef(n)}function og(e){function n(r,l){const{instance:d}=e(r).current;return Q.useImperativeHandle(l,()=>d),null}return Q.forwardRef(n)}function B_(e){return function(r){const l=Fu(),d=e(r,l),{instance:f}=d.current,_=Q.useRef(r.position),{position:x}=r;return Q.useEffect(function(){return f.addTo(l.map),function(){f.remove()}},[l.map,f]),Q.useEffect(function(){x!=null&&x!==_.current&&(f.setPosition(x),_.current=x)},[f,x]),d}}function ag(e,n){const r=Q.useRef();Q.useEffect(function(){return n!=null&&e.instance.on(n),r.current=n,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,n])}function Sd(e,n){const r=e.pane??n.pane;return r?{...e,pane:r}:e}var Eh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(r,l){l(n)})(wu,function(r){var l="1.9.4";function d(s){var c,g,w,A;for(g=1,w=arguments.length;g<w;g++){A=arguments[g];for(c in A)s[c]=A[c]}return s}var f=Object.create||function(){function s(){}return function(c){return s.prototype=c,new s}}();function _(s,c){var g=Array.prototype.slice;if(s.bind)return s.bind.apply(s,g.call(arguments,1));var w=g.call(arguments,2);return function(){return s.apply(c,w.length?w.concat(g.call(arguments)):arguments)}}var x=0;function C(s){return"_leaflet_id"in s||(s._leaflet_id=++x),s._leaflet_id}function v(s,c,g){var w,A,k,Y;return Y=function(){w=!1,A&&(k.apply(g,A),A=!1)},k=function(){w?A=arguments:(s.apply(g,arguments),setTimeout(Y,c),w=!0)},k}function S(s,c,g){var w=c[1],A=c[0],k=w-A;return s===w&&g?s:((s-A)%k+k)%k+A}function I(){return!1}function M(s,c){if(c===!1)return s;var g=Math.pow(10,c===void 0?6:c);return Math.round(s*g)/g}function F(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function z(s){return F(s).split(/\s+/)}function U(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?f(s.options):{});for(var g in c)s.options[g]=c[g];return s.options}function ue(s,c,g){var w=[];for(var A in s)w.push(encodeURIComponent(g?A.toUpperCase():A)+"="+encodeURIComponent(s[A]));return(!c||c.indexOf("?")===-1?"?":"&")+w.join("&")}var H=/\{ *([\w_ -]+) *\}/g;function B(s,c){return s.replace(H,function(g,w){var A=c[w];if(A===void 0)throw new Error("No value provided for variable "+g);return typeof A=="function"&&(A=A(c)),A})}var P=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function X(s,c){for(var g=0;g<s.length;g++)if(s[g]===c)return g;return-1}var ae="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function se(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var $=0;function J(s){var c=+new Date,g=Math.max(0,16-(c-$));return $=c+g,window.setTimeout(s,g)}var V=window.requestAnimationFrame||se("RequestAnimationFrame")||J,W=window.cancelAnimationFrame||se("CancelAnimationFrame")||se("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function ee(s,c,g){if(g&&V===J)s.call(c);else return V.call(window,_(s,c))}function oe(s){s&&W.call(window,s)}var Z={__proto__:null,extend:d,create:f,bind:_,get lastId(){return x},stamp:C,throttle:v,wrapNum:S,falseFn:I,formatNum:M,trim:F,splitWords:z,setOptions:U,getParamString:ue,template:B,isArray:P,indexOf:X,emptyImageUrl:ae,requestFn:V,cancelFn:W,requestAnimFrame:ee,cancelAnimFrame:oe};function te(){}te.extend=function(s){var c=function(){U(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=c.__super__=this.prototype,w=f(g);w.constructor=c,c.prototype=w;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(c[A]=this[A]);return s.statics&&d(c,s.statics),s.includes&&(G(s.includes),d.apply(null,[w].concat(s.includes))),d(w,s),delete w.statics,delete w.includes,w.options&&(w.options=g.options?f(g.options):{},d(w.options,s.options)),w._initHooks=[],w.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var k=0,Y=w._initHooks.length;k<Y;k++)w._initHooks[k].call(this)}},c},te.include=function(s){var c=this.prototype.options;return d(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},te.mergeOptions=function(s){return d(this.prototype.options,s),this},te.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),g=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function G(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=P(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var me={on:function(s,c,g){if(typeof s=="object")for(var w in s)this._on(w,s[w],c);else{s=z(s);for(var A=0,k=s.length;A<k;A++)this._on(s[A],c,g)}return this},off:function(s,c,g){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var w in s)this._off(w,s[w],c);else{s=z(s);for(var A=arguments.length===1,k=0,Y=s.length;k<Y;k++)A?this._off(s[k]):this._off(s[k],c,g)}return this},_on:function(s,c,g,w){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,g)===!1){g===this&&(g=void 0);var A={fn:c,ctx:g};w&&(A.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(A)}},_off:function(s,c,g){var w,A,k;if(this._events&&(w=this._events[s],!!w)){if(arguments.length===1){if(this._firingCount)for(A=0,k=w.length;A<k;A++)w[A].fn=I;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var Y=this._listens(s,c,g);if(Y!==!1){var re=w[Y];this._firingCount&&(re.fn=I,this._events[s]=w=w.slice()),w.splice(Y,1)}}},fire:function(s,c,g){if(!this.listens(s,g))return this;var w=d({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var A=this._events[s];if(A){this._firingCount=this._firingCount+1||1;for(var k=0,Y=A.length;k<Y;k++){var re=A[k],de=re.fn;re.once&&this.off(s,de,re.ctx),de.call(re.ctx||this,w)}this._firingCount--}}return g&&this._propagateEvent(w),this},listens:function(s,c,g,w){typeof s!="string"&&console.warn('"string" type argument expected');var A=c;typeof c!="function"&&(w=!!c,A=void 0,g=void 0);var k=this._events&&this._events[s];if(k&&k.length&&this._listens(s,A,g)!==!1)return!0;if(w){for(var Y in this._eventParents)if(this._eventParents[Y].listens(s,c,g,w))return!0}return!1},_listens:function(s,c,g){if(!this._events)return!1;var w=this._events[s]||[];if(!c)return!!w.length;g===this&&(g=void 0);for(var A=0,k=w.length;A<k;A++)if(w[A].fn===c&&w[A].ctx===g)return A;return!1},once:function(s,c,g){if(typeof s=="object")for(var w in s)this._on(w,s[w],c,!0);else{s=z(s);for(var A=0,k=s.length;A<k;A++)this._on(s[A],c,g,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[C(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[C(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,d({layer:s.target,propagatedFrom:s.target},s),!0)}};me.addEventListener=me.on,me.removeEventListener=me.clearAllEventListeners=me.off,me.addOneTimeEventListener=me.once,me.fireEvent=me.fire,me.hasEventListeners=me.listens;var fe=te.extend(me);function ne(s,c,g){this.x=g?Math.round(s):s,this.y=g?Math.round(c):c}var pe=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(s){return this.clone()._add(he(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(he(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new ne(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new ne(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pe(this.x),this.y=pe(this.y),this},distanceTo:function(s){s=he(s);var c=s.x-this.x,g=s.y-this.y;return Math.sqrt(c*c+g*g)},equals:function(s){return s=he(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=he(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+M(this.x)+", "+M(this.y)+")"}};function he(s,c,g){return s instanceof ne?s:P(s)?new ne(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new ne(s.x,s.y):new ne(s,c,g)}function Ce(s,c){if(s)for(var g=c?[s,c]:s,w=0,A=g.length;w<A;w++)this.extend(g[w])}Ce.prototype={extend:function(s){var c,g;if(!s)return this;if(s instanceof ne||typeof s[0]=="number"||"x"in s)c=g=he(s);else if(s=be(s),c=s.min,g=s.max,!c||!g)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=g.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(s){return he((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return he(this.min.x,this.max.y)},getTopRight:function(){return he(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,g;return typeof s[0]=="number"||s instanceof ne?s=he(s):s=be(s),s instanceof Ce?(c=s.min,g=s.max):c=g=s,c.x>=this.min.x&&g.x<=this.max.x&&c.y>=this.min.y&&g.y<=this.max.y},intersects:function(s){s=be(s);var c=this.min,g=this.max,w=s.min,A=s.max,k=A.x>=c.x&&w.x<=g.x,Y=A.y>=c.y&&w.y<=g.y;return k&&Y},overlaps:function(s){s=be(s);var c=this.min,g=this.max,w=s.min,A=s.max,k=A.x>c.x&&w.x<g.x,Y=A.y>c.y&&w.y<g.y;return k&&Y},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,g=this.max,w=Math.abs(c.x-g.x)*s,A=Math.abs(c.y-g.y)*s;return be(he(c.x-w,c.y-A),he(g.x+w,g.y+A))},equals:function(s){return s?(s=be(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function be(s,c){return!s||s instanceof Ce?s:new Ce(s,c)}function Ve(s,c){if(s)for(var g=c?[s,c]:s,w=0,A=g.length;w<A;w++)this.extend(g[w])}Ve.prototype={extend:function(s){var c=this._southWest,g=this._northEast,w,A;if(s instanceof Re)w=s,A=s;else if(s instanceof Ve){if(w=s._southWest,A=s._northEast,!w||!A)return this}else return s?this.extend(ge(s)||ve(s)):this;return!c&&!g?(this._southWest=new Re(w.lat,w.lng),this._northEast=new Re(A.lat,A.lng)):(c.lat=Math.min(w.lat,c.lat),c.lng=Math.min(w.lng,c.lng),g.lat=Math.max(A.lat,g.lat),g.lng=Math.max(A.lng,g.lng)),this},pad:function(s){var c=this._southWest,g=this._northEast,w=Math.abs(c.lat-g.lat)*s,A=Math.abs(c.lng-g.lng)*s;return new Ve(new Re(c.lat-w,c.lng-A),new Re(g.lat+w,g.lng+A))},getCenter:function(){return new Re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Re(this.getNorth(),this.getWest())},getSouthEast:function(){return new Re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Re||"lat"in s?s=ge(s):s=ve(s);var c=this._southWest,g=this._northEast,w,A;return s instanceof Ve?(w=s.getSouthWest(),A=s.getNorthEast()):w=A=s,w.lat>=c.lat&&A.lat<=g.lat&&w.lng>=c.lng&&A.lng<=g.lng},intersects:function(s){s=ve(s);var c=this._southWest,g=this._northEast,w=s.getSouthWest(),A=s.getNorthEast(),k=A.lat>=c.lat&&w.lat<=g.lat,Y=A.lng>=c.lng&&w.lng<=g.lng;return k&&Y},overlaps:function(s){s=ve(s);var c=this._southWest,g=this._northEast,w=s.getSouthWest(),A=s.getNorthEast(),k=A.lat>c.lat&&w.lat<g.lat,Y=A.lng>c.lng&&w.lng<g.lng;return k&&Y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=ve(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ve(s,c){return s instanceof Ve?s:new Ve(s,c)}function Re(s,c,g){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,g!==void 0&&(this.alt=+g)}Re.prototype={equals:function(s,c){if(!s)return!1;s=ge(s);var g=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return g<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+M(this.lat,s)+", "+M(this.lng,s)+")"},distanceTo:function(s){return Be.distance(this,ge(s))},wrap:function(){return Be.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,g=c/Math.cos(Math.PI/180*this.lat);return ve([this.lat-c,this.lng-g],[this.lat+c,this.lng+g])},clone:function(){return new Re(this.lat,this.lng,this.alt)}};function ge(s,c,g){return s instanceof Re?s:P(s)&&typeof s[0]!="object"?s.length===3?new Re(s[0],s[1],s[2]):s.length===2?new Re(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Re(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new Re(s,c,g)}var nt={latLngToPoint:function(s,c){var g=this.projection.project(s),w=this.scale(c);return this.transformation._transform(g,w)},pointToLatLng:function(s,c){var g=this.scale(c),w=this.transformation.untransform(s,g);return this.projection.unproject(w)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,g=this.scale(s),w=this.transformation.transform(c.min,g),A=this.transformation.transform(c.max,g);return new Ce(w,A)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?S(s.lng,this.wrapLng,!0):s.lng,g=this.wrapLat?S(s.lat,this.wrapLat,!0):s.lat,w=s.alt;return new Re(g,c,w)},wrapLatLngBounds:function(s){var c=s.getCenter(),g=this.wrapLatLng(c),w=c.lat-g.lat,A=c.lng-g.lng;if(w===0&&A===0)return s;var k=s.getSouthWest(),Y=s.getNorthEast(),re=new Re(k.lat-w,k.lng-A),de=new Re(Y.lat-w,Y.lng-A);return new Ve(re,de)}},Be=d({},nt,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var g=Math.PI/180,w=s.lat*g,A=c.lat*g,k=Math.sin((c.lat-s.lat)*g/2),Y=Math.sin((c.lng-s.lng)*g/2),re=k*k+Math.cos(w)*Math.cos(A)*Y*Y,de=2*Math.atan2(Math.sqrt(re),Math.sqrt(1-re));return this.R*de}}),Mt=6378137,xn={R:Mt,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,g=this.MAX_LATITUDE,w=Math.max(Math.min(g,s.lat),-g),A=Math.sin(w*c);return new ne(this.R*s.lng*c,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(s){var c=180/Math.PI;return new Re((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:function(){var s=Mt*Math.PI;return new Ce([-s,-s],[s,s])}()};function xt(s,c,g,w){if(P(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=g,this._d=w}xt.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new ne((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function yt(s,c,g,w){return new xt(s,c,g,w)}var Ke=d({},Be,{code:"EPSG:3857",projection:xn,transformation:function(){var s=.5/(Math.PI*xn.R);return yt(s,.5,-s,.5)}()}),Sn=d({},Ke,{code:"EPSG:900913"});function Yt(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function On(s,c){var g="",w,A,k,Y,re,de;for(w=0,k=s.length;w<k;w++){for(re=s[w],A=0,Y=re.length;A<Y;A++)de=re[A],g+=(A?"L":"M")+de.x+" "+de.y;g+=c?Fe.svg?"z":"x":""}return g||"M0 0"}var Pe=document.documentElement.style,We="ActiveXObject"in window,Ye=We&&!document.addEventListener,Kt="msLaunchUri"in navigator&&!("documentMode"in document),Te=Nt("webkit"),Pt=Nt("android"),xr=Nt("android 2")||Nt("android 3"),dn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Sr=Pt&&Nt("Google")&&dn<537&&!("AudioNode"in window),Et=!!window.opera,lr=!Kt&&Nt("chrome"),Gn=Nt("gecko")&&!Te&&!Et&&!We,Lt=!lr&&Nt("safari"),Xn=Nt("phantom"),bn="OTransition"in Pe,Bn=navigator.platform.indexOf("Win")===0,Ct=We&&"transition"in Pe,Ie="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!xr,Ne="MozPerspective"in Pe,Oe=!window.L_DISABLE_3D&&(Ct||Ie||Ne)&&!bn&&!Xn,He=typeof orientation<"u"||Nt("mobile"),Tt=He&&Te,Dt=He&&Ie,Ge=!window.PointerEvent&&window.MSPointerEvent,ht=!!(window.PointerEvent||Ge),Ni="ontouchstart"in window||!!window.TouchEvent,Ws=!window.L_NO_TOUCH&&(Ni||ht),yn=He&&Et,Yn=He&&Gn,ys=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Qt=function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",I,c),window.removeEventListener("testPassiveEventSupport",I,c)}catch{}return s}(),ur=function(){return!!document.createElement("canvas").getContext}(),gi=!!(document.createElementNS&&Yt("svg").createSVGRect),jt=!!gi&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),br=!gi&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Ri=navigator.platform.indexOf("Mac")===0,cr=navigator.platform.indexOf("Linux")===0;function Nt(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var Fe={ie:We,ielt9:Ye,edge:Kt,webkit:Te,android:Pt,android23:xr,androidStock:Sr,opera:Et,chrome:lr,gecko:Gn,safari:Lt,phantom:Xn,opera12:bn,win:Bn,ie3d:Ct,webkit3d:Ie,gecko3d:Ne,any3d:Oe,mobile:He,mobileWebkit:Tt,mobileWebkit3d:Dt,msPointer:Ge,pointer:ht,touch:Ws,touchNative:Ni,mobileOpera:yn,mobileGecko:Yn,retina:ys,passiveEvents:Qt,canvas:ur,svg:gi,vml:br,inlineSvg:jt,mac:Ri,linux:cr},fn=Fe.msPointer?"MSPointerDown":"pointerdown",Me=Fe.msPointer?"MSPointerMove":"pointermove",Zi=Fe.msPointer?"MSPointerUp":"pointerup",hr=Fe.msPointer?"MSPointerCancel":"pointercancel",pn={touchstart:fn,touchmove:Me,touchend:Zi,touchcancel:hr},Gi={touchstart:Oi,touchmove:Ir,touchend:Ir,touchcancel:Ir},kn={},Xi=!1;function Kn(s,c,g){return c==="touchstart"&&Rt(),Gi[c]?(g=Gi[c].bind(this,g),s.addEventListener(pn[c],g,!1),g):(console.warn("wrong event specified:",c),I)}function sn(s,c,g){if(!pn[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(pn[c],g,!1)}function Do(s){kn[s.pointerId]=s}function Qn(s){kn[s.pointerId]&&(kn[s.pointerId]=s)}function on(s){delete kn[s.pointerId]}function Rt(){Xi||(document.addEventListener(fn,Do,!0),document.addEventListener(Me,Qn,!0),document.addEventListener(Zi,on,!0),document.addEventListener(hr,on,!0),Xi=!0)}function Ir(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var g in kn)c.touches.push(kn[g]);c.changedTouches=[c],s(c)}}function Oi(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&vn(c),Ir(s,c)}function vs(s){var c={},g,w;for(w in s)g=s[w],c[w]=g&&g.bind?g.bind(s):g;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var ye=200;function Bo(s,c){s.addEventListener("dblclick",c);var g=0,w;function A(k){if(k.detail!==1){w=k.detail;return}if(!(k.pointerType==="mouse"||k.sourceCapabilities&&!k.sourceCapabilities.firesTouchEvents)){var Y=Wr(k);if(!(Y.some(function(de){return de instanceof HTMLLabelElement&&de.attributes.for})&&!Y.some(function(de){return de instanceof HTMLInputElement||de instanceof HTMLSelectElement}))){var re=Date.now();re-g<=ye?(w++,w===2&&c(vs(k))):w=1,g=re}}}return s.addEventListener("click",A),{dblclick:c,simDblclick:A}}function Bt(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var ki=D(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),dr=D(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pt=dr==="webkitTransition"||dr==="OTransition"?dr+"End":"transitionend";function at(s){return typeof s=="string"?document.getElementById(s):s}function $e(s,c){var g=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!g||g==="auto")&&document.defaultView){var w=document.defaultView.getComputedStyle(s,null);g=w?w[c]:null}return g==="auto"?null:g}function st(s,c,g){var w=document.createElement(s);return w.className=c||"",g&&g.appendChild(w),w}function St(s){var c=s.parentNode;c&&c.removeChild(s)}function fr(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Ot(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function Mn(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function ws(s,c){if(s.classList!==void 0)return s.classList.contains(c);var g=qn(s);return g.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(g)}function Ue(s,c){if(s.classList!==void 0)for(var g=z(c),w=0,A=g.length;w<A;w++)s.classList.add(g[w]);else if(!ws(s,c)){var k=qn(s);Cs(s,(k?k+" ":"")+c)}}function vt(s,c){s.classList!==void 0?s.classList.remove(c):Cs(s,F((" "+qn(s)+" ").replace(" "+c+" "," ")))}function Cs(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function qn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function it(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&an(s,c)}function an(s,c){var g=!1,w="DXImageTransform.Microsoft.Alpha";try{g=s.filters.item(w)}catch{if(c===1)return}c=Math.round(c*100),g?(g.Enabled=c!==100,g.Opacity=c):s.style.filter+=" progid:"+w+"(opacity="+c+")"}function D(s){for(var c=document.documentElement.style,g=0;g<s.length;g++)if(s[g]in c)return s[g];return!1}function R(s,c,g){var w=c||new ne(0,0);s.style[ki]=(Fe.ie3d?"translate("+w.x+"px,"+w.y+"px)":"translate3d("+w.x+"px,"+w.y+"px,0)")+(g?" scale("+g+")":"")}function _e(s,c){s._leaflet_pos=c,Fe.any3d?R(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function Qe(s){return s._leaflet_pos||new ne(0,0)}var zt,pr,Yi;if("onselectstart"in document)zt=function(){Xe(window,"selectstart",vn)},pr=function(){ke(window,"selectstart",vn)};else{var ln=D(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);zt=function(){if(ln){var s=document.documentElement.style;Yi=s[ln],s[ln]="none"}},pr=function(){ln&&(document.documentElement.style[ln]=Yi,Yi=void 0)}}function Le(){Xe(window,"dragstart",vn)}function dt(){ke(window,"dragstart",vn)}var In,mi;function _i(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(yi(),In=s,mi=s.style.outlineStyle,s.style.outlineStyle="none",Xe(window,"keydown",yi))}function yi(){In&&(In.style.outlineStyle=mi,In=void 0,mi=void 0,ke(window,"keydown",yi))}function oi(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Ki(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var ft={__proto__:null,TRANSFORM:ki,TRANSITION:dr,TRANSITION_END:pt,get:at,getStyle:$e,create:st,remove:St,empty:fr,toFront:Ot,toBack:Mn,hasClass:ws,addClass:Ue,removeClass:vt,setClass:Cs,getClass:qn,setOpacity:it,testProp:D,setTransform:R,setPosition:_e,getPosition:Qe,get disableTextSelection(){return zt},get enableTextSelection(){return pr},disableImageDrag:Le,enableImageDrag:dt,preventOutline:_i,restoreOutline:yi,getSizedParentNode:oi,getScale:Ki};function Xe(s,c,g,w){if(c&&typeof c=="object")for(var A in c)cn(s,A,c[A],g);else{c=z(c);for(var k=0,Y=c.length;k<Y;k++)cn(s,c[k],g,w)}return this}var un="_leaflet_events";function ke(s,c,g,w){if(arguments.length===1)Qa(s),delete s[un];else if(c&&typeof c=="object")for(var A in c)Fo(s,A,c[A],g);else if(c=z(c),arguments.length===2)Qa(s,function(re){return X(c,re)!==-1});else for(var k=0,Y=c.length;k<Y;k++)Fo(s,c[k],g,w);return this}function Qa(s,c){for(var g in s[un]){var w=g.split(/\d/)[0];(!c||c(w))&&Fo(s,w,null,null,g)}}var Je={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function cn(s,c,g,w){var A=c+C(g)+(w?"_"+C(w):"");if(s[un]&&s[un][A])return this;var k=function(re){return g.call(w||s,re||window.event)},Y=k;!Fe.touchNative&&Fe.pointer&&c.indexOf("touch")===0?k=Kn(s,c,k):Fe.touch&&c==="dblclick"?k=Bo(s,k):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(Je[c]||c,k,Fe.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(k=function(re){re=re||window.event,Tr(s,re)&&Y(re)},s.addEventListener(Je[c],k,!1)):s.addEventListener(c,Y,!1):s.attachEvent("on"+c,k),s[un]=s[un]||{},s[un][A]=k}function Fo(s,c,g,w,A){A=A||c+C(g)+(w?"_"+C(w):"");var k=s[un]&&s[un][A];if(!k)return this;!Fe.touchNative&&Fe.pointer&&c.indexOf("touch")===0?sn(s,c,k):Fe.touch&&c==="dblclick"?Bt(s,k):"removeEventListener"in s?s.removeEventListener(Je[c]||c,k,!1):s.detachEvent("on"+c,k),s[un][A]=null}function Qi(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Zs(s){return cn(s,"wheel",Qi),this}function vi(s){return Xe(s,"mousedown touchstart dblclick contextmenu",Qi),s._leaflet_disable_click=!0,this}function vn(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function wi(s){return vn(s),Qi(s),this}function Wr(s){if(s.composedPath)return s.composedPath();for(var c=[],g=s.target;g;)c.push(g),g=g.parentNode;return c}function Zr(s,c){if(!c)return new ne(s.clientX,s.clientY);var g=Ki(c),w=g.boundingClientRect;return new ne((s.clientX-w.left)/g.x-c.clientLeft,(s.clientY-w.top)/g.y-c.clientTop)}var qa=Fe.linux&&Fe.chrome?window.devicePixelRatio:Fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Gr(s){return Fe.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/qa:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Tr(s,c){var g=c.relatedTarget;if(!g)return!0;try{for(;g&&g!==s;)g=g.parentNode}catch{return!1}return g!==s}var Fn={__proto__:null,on:Xe,off:ke,stopPropagation:Qi,disableScrollPropagation:Zs,disableClickPropagation:vi,preventDefault:vn,stop:wi,getPropagationPath:Wr,getMousePosition:Zr,getWheelDelta:Gr,isExternalTarget:Tr,addListener:Xe,removeListener:ke},jo=fe.extend({run:function(s,c,g,w){this.stop(),this._el=s,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(w||.5,.2),this._startPos=Qe(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ee(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,g=this._duration*1e3;c<g?this._runFrame(this._easeOut(c/g),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var g=this._startPos.add(this._offset.multiplyBy(s));c&&g._round(),_e(this._el,g),this.fire("step")},_complete:function(){oe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),lt=fe.extend({options:{crs:Ke,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=U(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=_(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ge(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=dr&&Fe.any3d&&!Fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Xe(this._proxy,pt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,g){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(ge(s),c,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=d({animate:g.animate},g.zoom),g.pan=d({animate:g.animate,duration:g.duration},g.pan));var w=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,g.zoom):this._tryAnimatedPan(s,g.pan);if(w)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,g.pan&&g.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,g){var w=this.getZoomScale(c),A=this.getSize().divideBy(2),k=s instanceof ne?s:this.latLngToContainerPoint(s),Y=k.subtract(A).multiplyBy(1-1/w),re=this.containerPointToLatLng(A.add(Y));return this.setView(re,c,{zoom:g})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():ve(s);var g=he(c.paddingTopLeft||c.padding||[0,0]),w=he(c.paddingBottomRight||c.padding||[0,0]),A=this.getBoundsZoom(s,!1,g.add(w));if(A=typeof c.maxZoom=="number"?Math.min(c.maxZoom,A):A,A===1/0)return{center:s.getCenter(),zoom:A};var k=w.subtract(g).divideBy(2),Y=this.project(s.getSouthWest(),A),re=this.project(s.getNorthEast(),A),de=this.unproject(Y.add(re).divideBy(2).add(k),A);return{center:de,zoom:A}},fitBounds:function(s,c){if(s=ve(s),!s.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(s,c);return this.setView(g.center,g.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=he(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new jo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Ue(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,g,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,g){if(g=g||{},g.animate===!1||!Fe.any3d)return this.setView(s,c,g);this._stop();var w=this.project(this.getCenter()),A=this.project(s),k=this.getSize(),Y=this._zoom;s=ge(s),c=c===void 0?Y:c;var re=Math.max(k.x,k.y),de=re*this.getZoomScale(Y,c),we=A.distanceTo(w)||1,De=1.42,qe=De*De;function ot(mn){var sl=mn?-1:1,Qg=mn?de:re,qg=de*de-re*re+sl*qe*qe*we*we,$g=2*Qg*qe*we,Ku=qg/$g,Yd=Math.sqrt(Ku*Ku+1)-Ku,Jg=Yd<1e-9?-18:Math.log(Yd);return Jg}function ti(mn){return(Math.exp(mn)-Math.exp(-mn))/2}function Tn(mn){return(Math.exp(mn)+Math.exp(-mn))/2}function Fi(mn){return ti(mn)/Tn(mn)}var li=ot(0);function Qs(mn){return re*(Tn(li)/Tn(li+De*mn))}function Gg(mn){return re*(Tn(li)*Fi(li+De*mn)-ti(li))/qe}function Xg(mn){return 1-Math.pow(1-mn,1.5)}var Yg=Date.now(),Gd=(ot(1)-li)/De,Kg=g.duration?1e3*g.duration:1e3*Gd*.8;function Xd(){var mn=(Date.now()-Yg)/Kg,sl=Xg(mn)*Gd;mn<=1?(this._flyToFrame=ee(Xd,this),this._move(this.unproject(w.add(A.subtract(w).multiplyBy(Gg(sl)/we)),Y),this.getScaleZoom(re/Qs(sl),Y),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),Xd.call(this),this},flyToBounds:function(s,c){var g=this._getBoundsCenterZoom(s,c);return this.flyTo(g.center,g.zoom,c)},setMaxBounds:function(s){return s=ve(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var g=this.getCenter(),w=this._limitCenter(g,this._zoom,ve(s));return g.equals(w)||this.panTo(w,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var g=he(c.paddingTopLeft||c.padding||[0,0]),w=he(c.paddingBottomRight||c.padding||[0,0]),A=this.project(this.getCenter()),k=this.project(s),Y=this.getPixelBounds(),re=be([Y.min.add(g),Y.max.subtract(w)]),de=re.getSize();if(!re.contains(k)){this._enforcingBounds=!0;var we=k.subtract(re.getCenter()),De=re.extend(k).getSize().subtract(de);A.x+=we.x<0?-De.x:De.x,A.y+=we.y<0?-De.y:De.y,this.panTo(this.unproject(A),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=d({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),w=c.divideBy(2).round(),A=g.divideBy(2).round(),k=w.subtract(A);return!k.x&&!k.y?this:(s.animate&&s.pan?this.panBy(k):(s.pan&&this._rawPanBy(k),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(_(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=d({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=_(this._handleGeolocationResponse,this),g=_(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,g,s):navigator.geolocation.getCurrentPosition(c,g,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,g=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,g=s.coords.longitude,w=new Re(c,g),A=w.toBounds(s.coords.accuracy*2),k=this._locateOptions;if(k.setView){var Y=this.getBoundsZoom(A);this.setView(w,k.maxZoom?Math.min(Y,k.maxZoom):Y)}var re={latlng:w,bounds:A,timestamp:s.timestamp};for(var de in s.coords)typeof s.coords[de]=="number"&&(re[de]=s.coords[de]);this.fire("locationfound",re)}},addHandler:function(s,c){if(!c)return this;var g=this[s]=new c(this);return this._handlers.push(g),this.options[s]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),St(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(oe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)St(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var g="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),w=st("div",g,c||this._mapPane);return s&&(this._panes[s]=w),w},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),g=this.unproject(s.getTopRight());return new Ve(c,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,g){s=ve(s),g=he(g||[0,0]);var w=this.getZoom()||0,A=this.getMinZoom(),k=this.getMaxZoom(),Y=s.getNorthWest(),re=s.getSouthEast(),de=this.getSize().subtract(g),we=be(this.project(re,w),this.project(Y,w)).getSize(),De=Fe.any3d?this.options.zoomSnap:1,qe=de.x/we.x,ot=de.y/we.y,ti=c?Math.max(qe,ot):Math.min(qe,ot);return w=this.getScaleZoom(ti,w),De&&(w=Math.round(w/(De/100))*(De/100),w=c?Math.ceil(w/De)*De:Math.floor(w/De)*De),Math.max(A,Math.min(k,w))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ne(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var g=this._getTopLeftPoint(s,c);return new Ce(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var g=this.options.crs;return c=c===void 0?this._zoom:c,g.scale(s)/g.scale(c)},getScaleZoom:function(s,c){var g=this.options.crs;c=c===void 0?this._zoom:c;var w=g.zoom(s*g.scale(c));return isNaN(w)?1/0:w},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ge(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(he(s),c)},layerPointToLatLng:function(s){var c=he(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(ge(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ge(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ve(s))},distance:function(s,c){return this.options.crs.distance(ge(s),ge(c))},containerPointToLayerPoint:function(s){return he(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return he(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(he(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(s)))},mouseEventToContainerPoint:function(s){return Zr(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=at(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Xe(c,"scroll",this._onScroll,this),this._containerId=C(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&Fe.any3d,Ue(s,"leaflet-container"+(Fe.touch?" leaflet-touch":"")+(Fe.retina?" leaflet-retina":"")+(Fe.ielt9?" leaflet-oldie":"")+(Fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=$e(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_e(this._mapPane,new ne(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ue(s.markerPane,"leaflet-zoom-hide"),Ue(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,g){_e(this._mapPane,new ne(0,0));var w=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var A=this._zoom!==c;this._moveStart(A,g)._move(s,c)._moveEnd(A),this.fire("viewreset"),w&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,g,w){c===void 0&&(c=this._zoom);var A=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),w?g&&g.pinch&&this.fire("zoom",g):((A||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return oe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){_e(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[C(this._container)]=this;var c=s?ke:Xe;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Fe.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){oe(this._resizeRequest),this._resizeRequest=ee(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var g=[],w,A=c==="mouseout"||c==="mouseover",k=s.target||s.srcElement,Y=!1;k;){if(w=this._targets[C(k)],w&&(c==="click"||c==="preclick")&&this._draggableMoved(w)){Y=!0;break}if(w&&w.listens(c,!0)&&(A&&!Tr(k,s)||(g.push(w),A))||k===this._container)break;k=k.parentNode}return!g.length&&!Y&&!A&&this.listens(c,!0)&&(g=[this]),g},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var g=s.type;g==="mousedown"&&_i(c),this._fireDOMEvent(s,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,g){if(s.type==="click"){var w=d({},s);w.type="preclick",this._fireDOMEvent(w,w.type,g)}var A=this._findEventTargets(s,c);if(g){for(var k=[],Y=0;Y<g.length;Y++)g[Y].listens(c,!0)&&k.push(g[Y]);A=k.concat(A)}if(A.length){c==="contextmenu"&&vn(s);var re=A[0],de={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var we=re.getLatLng&&(!re._radius||re._radius<=10);de.containerPoint=we?this.latLngToContainerPoint(re.getLatLng()):this.mouseEventToContainerPoint(s),de.layerPoint=this.containerPointToLayerPoint(de.containerPoint),de.latlng=we?re.getLatLng():this.layerPointToLatLng(de.layerPoint)}for(Y=0;Y<A.length;Y++)if(A[Y].fire(c,de,!0),de.originalEvent._stopped||A[Y].options.bubblingMouseEvents===!1&&X(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return Qe(this._mapPane)||new ne(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var g=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var g=this.getSize()._divideBy(2);return this.project(s,c)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,g){var w=this._getNewPixelOrigin(g,c);return this.project(s,c)._subtract(w)},_latLngBoundsToNewLayerBounds:function(s,c,g){var w=this._getNewPixelOrigin(g,c);return be([this.project(s.getSouthWest(),c)._subtract(w),this.project(s.getNorthWest(),c)._subtract(w),this.project(s.getSouthEast(),c)._subtract(w),this.project(s.getNorthEast(),c)._subtract(w)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,g){if(!g)return s;var w=this.project(s,c),A=this.getSize().divideBy(2),k=new Ce(w.subtract(A),w.add(A)),Y=this._getBoundsOffset(k,g,c);return Math.abs(Y.x)<=1&&Math.abs(Y.y)<=1?s:this.unproject(w.add(Y),c)},_limitOffset:function(s,c){if(!c)return s;var g=this.getPixelBounds(),w=new Ce(g.min.add(s),g.max.add(s));return s.add(this._getBoundsOffset(w,c))},_getBoundsOffset:function(s,c,g){var w=be(this.project(c.getNorthEast(),g),this.project(c.getSouthWest(),g)),A=w.min.subtract(s.min),k=w.max.subtract(s.max),Y=this._rebound(A.x,-k.x),re=this._rebound(A.y,-k.y);return new ne(Y,re)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),g=this.getMaxZoom(),w=Fe.any3d?this.options.zoomSnap:1;return w&&(s=Math.round(s/w)*w),Math.max(c,Math.min(g,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){vt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var g=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,c),!0)},_createAnimProxy:function(){var s=this._proxy=st("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var g=ki,w=this._proxy.style[g];R(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),w===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){St(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();R(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var w=this.getZoomScale(c),A=this._getCenterOffset(s)._divideBy(1-1/w);return g.animate!==!0&&!this.getSize().contains(A)?!1:(ee(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,g,w){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,Ue(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:w}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(_(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&vt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $a(s,c){return new lt(s,c)}var Ci=te.extend({options:{position:"topright"},initialize:function(s){U(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),g=this.getPosition(),w=s._controlCorners[g];return Ue(c,"leaflet-control"),g.indexOf("bottom")!==-1?w.insertBefore(c,w.firstChild):w.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(St(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Es=function(s){return new Ci(s)};lt.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",g=this._controlContainer=st("div",c+"control-container",this._container);function w(A,k){var Y=c+A+" "+c+k;s[A+k]=st("div",Y,g)}w("top","left"),w("top","right"),w("bottom","left"),w("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)St(this._controlCorners[s]);St(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ja=Ci.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,g,w){return g<w?-1:w<g?1:0}},initialize:function(s,c,g){U(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var w in s)this._addLayer(s[w],w);for(w in c)this._addLayer(c[w],w,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Ci.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(C(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Ue(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Ue(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):vt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return vt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=st("div",s),g=this.options.collapsed;c.setAttribute("aria-haspopup",!0),vi(c),Zs(c);var w=this._section=st("section",s+"-list");g&&(this._map.on("click",this.collapse,this),Xe(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=st("a",s+"-toggle",c);A.href="#",A.title="Layers",A.setAttribute("role","button"),Xe(A,{keydown:function(k){k.keyCode===13&&this._expandSafely()},click:function(k){vn(k),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=st("div",s+"-base",w),this._separator=st("div",s+"-separator",w),this._overlaysList=st("div",s+"-overlays",w),c.appendChild(w)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&C(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,g){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:g}),this.options.sortLayers&&this._layers.sort(_(function(w,A){return this.options.sortFunction(w.layer,A.layer,w.name,A.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;fr(this._baseLayersList),fr(this._overlaysList),this._layerControlInputs=[];var s,c,g,w,A=0;for(g=0;g<this._layers.length;g++)w=this._layers[g],this._addItem(w),c=c||w.overlay,s=s||!w.overlay,A+=w.overlay?0:1;return this.options.hideSingleBase&&(s=s&&A>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(C(s.target)),g=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;g&&this._map.fire(g,c)},_createRadioElement:function(s,c){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",w=document.createElement("div");return w.innerHTML=g,w.firstChild},_addItem:function(s){var c=document.createElement("label"),g=this._map.hasLayer(s.layer),w;s.overlay?(w=document.createElement("input"),w.type="checkbox",w.className="leaflet-control-layers-selector",w.defaultChecked=g):w=this._createRadioElement("leaflet-base-layers_"+C(this),g),this._layerControlInputs.push(w),w.layerId=C(s.layer),Xe(w,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+s.name;var k=document.createElement("span");c.appendChild(k),k.appendChild(w),k.appendChild(A);var Y=s.overlay?this._overlaysList:this._baseLayersList;return Y.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,g,w=[],A=[];this._handlingClick=!0;for(var k=s.length-1;k>=0;k--)c=s[k],g=this._getLayer(c.layerId).layer,c.checked?w.push(g):c.checked||A.push(g);for(k=0;k<A.length;k++)this._map.hasLayer(A[k])&&this._map.removeLayer(A[k]);for(k=0;k<w.length;k++)this._map.hasLayer(w[k])||this._map.addLayer(w[k]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,g,w=this._map.getZoom(),A=s.length-1;A>=0;A--)c=s[A],g=this._getLayer(c.layerId).layer,c.disabled=g.options.minZoom!==void 0&&w<g.options.minZoom||g.options.maxZoom!==void 0&&w>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Xe(s,"click",vn),this.expand();var c=this;setTimeout(function(){ke(s,"click",vn),c._preventClick=!1})}}),At=function(s,c,g){return new Ja(s,c,g)},Gs=Ci.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",g=st("div",c+" leaflet-bar"),w=this.options;return this._zoomInButton=this._createButton(w.zoomInText,w.zoomInTitle,c+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(w.zoomOutText,w.zoomOutTitle,c+"-out",g,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,g,w,A){var k=st("a",g,w);return k.innerHTML=s,k.href="#",k.title=c,k.setAttribute("role","button"),k.setAttribute("aria-label",c),vi(k),Xe(k,"click",wi),Xe(k,"click",A,this),Xe(k,"click",this._refocusOnMap,this),k},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";vt(this._zoomInButton,c),vt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Ue(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Ue(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});lt.mergeOptions({zoomControl:!0}),lt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Gs,this.addControl(this.zoomControl))});var Xs=function(s){return new Gs(s)},qi=Ci.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",g=st("div",c),w=this.options;return this._addScales(w,c+"-line",g),s.on(w.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),g},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,g){s.metric&&(this._mScale=st("div",c,g)),s.imperial&&(this._iScale=st("div",c,g))},_update:function(){var s=this._map,c=s.getSize().y/2,g=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(g)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),g=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,g,c/s)},_updateImperial:function(s){var c=s*3.2808399,g,w,A;c>5280?(g=c/5280,w=this._getRoundNum(g),this._updateScale(this._iScale,w+" mi",w/g)):(A=this._getRoundNum(c),this._updateScale(this._iScale,A+" ft",A/c))},_updateScale:function(s,c,g){s.style.width=Math.round(this.options.maxWidth*g)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),g=s/c;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,c*g}}),Vu=function(s){return new qi(s)},ce='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',tt=Ci.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Fe.inlineSvg?ce+" ":"")+"Leaflet</a>"},initialize:function(s){U(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=st("div","leaflet-control-attribution"),vi(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var g=[];this.options.prefix&&g.push(this.options.prefix),s.length&&g.push(s.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});lt.mergeOptions({attributionControl:!0}),lt.addInitHook(function(){this.options.attributionControl&&new tt().addTo(this)});var wn=function(s){return new tt(s)};Ci.Layers=Ja,Ci.Zoom=Gs,Ci.Scale=qi,Ci.Attribution=tt,Es.layers=At,Es.zoom=Xs,Es.scale=Vu,Es.attribution=wn;var $n=te.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});$n.addTo=function(s,c){return s.addHandler(c,this),this};var el={Events:me},tl=Fe.touch?"touchstart mousedown":"mousedown",gr=fe.extend({options:{clickTolerance:3},initialize:function(s,c,g,w){U(this,w),this._element=s,this._dragStartTarget=c||s,this._preventOutline=g},enable:function(){this._enabled||(Xe(this._dragStartTarget,tl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(gr._dragging===this&&this.finishDrag(!0),ke(this._dragStartTarget,tl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!ws(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){gr._dragging===this&&this.finishDrag();return}if(!(gr._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(gr._dragging=this,this._preventOutline&&_i(this._element),Le(),zt(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,g=oi(this._element);this._startPoint=new ne(c.clientX,c.clientY),this._startPos=Qe(this._element),this._parentScale=Ki(g);var w=s.type==="mousedown";Xe(document,w?"mousemove":"touchmove",this._onMove,this),Xe(document,w?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,g=new ne(c.clientX,c.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,vn(s),this._moved||(this.fire("dragstart"),this._moved=!0,Ue(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ue(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),_e(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){vt(document.body,"leaflet-dragging"),this._lastTarget&&(vt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ke(document,"mousemove touchmove",this._onMove,this),ke(document,"mouseup touchend touchcancel",this._onUp,this),dt(),pr();var c=this._moved&&this._moving;this._moving=!1,gr._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function nl(s,c,g){var w,A=[1,4,2,8],k,Y,re,de,we,De,qe,ot;for(k=0,De=s.length;k<De;k++)s[k]._code=Rr(s[k],c);for(re=0;re<4;re++){for(qe=A[re],w=[],k=0,De=s.length,Y=De-1;k<De;Y=k++)de=s[k],we=s[Y],de._code&qe?we._code&qe||(ot=$i(we,de,qe,c,g),ot._code=Rr(ot,c),w.push(ot)):(we._code&qe&&(ot=$i(we,de,qe,c,g),ot._code=Rr(ot,c),w.push(ot)),w.push(de));s=w}return s}function Ys(s,c){var g,w,A,k,Y,re,de,we,De;if(!s||s.length===0)throw new Error("latlngs not passed");Jn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var qe=ge([0,0]),ot=ve(s),ti=ot.getNorthWest().distanceTo(ot.getSouthWest())*ot.getNorthEast().distanceTo(ot.getNorthWest());ti<1700&&(qe=qt(s));var Tn=s.length,Fi=[];for(g=0;g<Tn;g++){var li=ge(s[g]);Fi.push(c.project(ge([li.lat-qe.lat,li.lng-qe.lng])))}for(re=de=we=0,g=0,w=Tn-1;g<Tn;w=g++)A=Fi[g],k=Fi[w],Y=A.y*k.x-k.y*A.x,de+=(A.x+k.x)*Y,we+=(A.y+k.y)*Y,re+=Y*3;re===0?De=Fi[0]:De=[de/re,we/re];var Qs=c.unproject(he(De));return ge([Qs.lat+qe.lat,Qs.lng+qe.lng])}function qt(s){for(var c=0,g=0,w=0,A=0;A<s.length;A++){var k=ge(s[A]);c+=k.lat,g+=k.lng,w++}return ge([c/w,g/w])}var zo={__proto__:null,clipPolygon:nl,polygonCenter:Ys,centroid:qt};function Ut(s,c){if(!c||!s.length)return s.slice();var g=c*c;return s=Wu(s,g),s=bt(s,g),s}function As(s,c,g){return Math.sqrt(Or(s,c,g,!0))}function Nr(s,c,g){return Or(s,c,g)}function bt(s,c){var g=s.length,w=typeof Uint8Array<"u"?Uint8Array:Array,A=new w(g);A[0]=A[g-1]=1,Ze(s,A,c,0,g-1);var k,Y=[];for(k=0;k<g;k++)A[k]&&Y.push(s[k]);return Y}function Ze(s,c,g,w,A){var k=0,Y,re,de;for(re=w+1;re<=A-1;re++)de=Or(s[re],s[w],s[A],!0),de>k&&(Y=re,k=de);k>g&&(c[Y]=1,Ze(s,c,g,w,Y),Ze(s,c,g,Y,A))}function Wu(s,c){for(var g=[s[0]],w=1,A=0,k=s.length;w<k;w++)Mi(s[w],s[A])>c&&(g.push(s[w]),A=w);return A<k-1&&g.push(s[k-1]),g}var kt;function mr(s,c,g,w,A){var k=w?kt:Rr(s,g),Y=Rr(c,g),re,de,we;for(kt=Y;;){if(!(k|Y))return[s,c];if(k&Y)return!1;re=k||Y,de=$i(s,c,re,g,A),we=Rr(de,g),re===k?(s=de,k=we):(c=de,Y=we)}}function $i(s,c,g,w,A){var k=c.x-s.x,Y=c.y-s.y,re=w.min,de=w.max,we,De;return g&8?(we=s.x+k*(de.y-s.y)/Y,De=de.y):g&4?(we=s.x+k*(re.y-s.y)/Y,De=re.y):g&2?(we=de.x,De=s.y+Y*(de.x-s.x)/k):g&1&&(we=re.x,De=s.y+Y*(re.x-s.x)/k),new ne(we,De,A)}function Rr(s,c){var g=0;return s.x<c.min.x?g|=1:s.x>c.max.x&&(g|=2),s.y<c.min.y?g|=4:s.y>c.max.y&&(g|=8),g}function Mi(s,c){var g=c.x-s.x,w=c.y-s.y;return g*g+w*w}function Or(s,c,g,w){var A=c.x,k=c.y,Y=g.x-A,re=g.y-k,de=Y*Y+re*re,we;return de>0&&(we=((s.x-A)*Y+(s.y-k)*re)/de,we>1?(A=g.x,k=g.y):we>0&&(A+=Y*we,k+=re*we)),Y=s.x-A,re=s.y-k,w?Y*Y+re*re:new ne(A,k)}function Jn(s){return!P(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Ks(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Jn(s)}function Uo(s,c){var g,w,A,k,Y,re,de,we;if(!s||s.length===0)throw new Error("latlngs not passed");Jn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var De=ge([0,0]),qe=ve(s),ot=qe.getNorthWest().distanceTo(qe.getSouthWest())*qe.getNorthEast().distanceTo(qe.getNorthWest());ot<1700&&(De=qt(s));var ti=s.length,Tn=[];for(g=0;g<ti;g++){var Fi=ge(s[g]);Tn.push(c.project(ge([Fi.lat-De.lat,Fi.lng-De.lng])))}for(g=0,w=0;g<ti-1;g++)w+=Tn[g].distanceTo(Tn[g+1])/2;if(w===0)we=Tn[0];else for(g=0,k=0;g<ti-1;g++)if(Y=Tn[g],re=Tn[g+1],A=Y.distanceTo(re),k+=A,k>w){de=(k-w)/A,we=[re.x-de*(re.x-Y.x),re.y-de*(re.y-Y.y)];break}var li=c.unproject(he(we));return ge([li.lat+De.lat,li.lng+De.lng])}var il={__proto__:null,simplify:Ut,pointToSegmentDistance:As,closestPointOnSegment:Nr,clipSegment:mr,_getEdgeIntersection:$i,_getBitCode:Rr,_sqClosestPointOnSegment:Or,isFlat:Jn,_flat:Ks,polylineCenter:Uo},Ho={project:function(s){return new ne(s.lng,s.lat)},unproject:function(s){return new Re(s.y,s.x)},bounds:new Ce([-180,-90],[180,90])},_r={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,g=this.R,w=s.lat*c,A=this.R_MINOR/g,k=Math.sqrt(1-A*A),Y=k*Math.sin(w),re=Math.tan(Math.PI/4-w/2)/Math.pow((1-Y)/(1+Y),k/2);return w=-g*Math.log(Math.max(re,1e-10)),new ne(s.lng*c*g,w)},unproject:function(s){for(var c=180/Math.PI,g=this.R,w=this.R_MINOR/g,A=Math.sqrt(1-w*w),k=Math.exp(-s.y/g),Y=Math.PI/2-2*Math.atan(k),re=0,de=.1,we;re<15&&Math.abs(de)>1e-7;re++)we=A*Math.sin(Y),we=Math.pow((1-we)/(1+we),A/2),de=Math.PI/2-2*Math.atan(k*we)-Y,Y+=de;return new Re(Y*c,s.x*c/g)}},Vo={__proto__:null,LonLat:Ho,Mercator:_r,SphericalMercator:xn},Zu=d({},Be,{code:"EPSG:3395",projection:_r,transformation:function(){var s=.5/(Math.PI*_r.R);return yt(s,.5,-s,.5)}()}),Xr=d({},Be,{code:"EPSG:4326",projection:Ho,transformation:yt(1/180,1,-1/180,.5)}),Gu=d({},nt,{projection:Ho,transformation:yt(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var g=c.lng-s.lng,w=c.lat-s.lat;return Math.sqrt(g*g+w*w)},infinite:!0});nt.Earth=Be,nt.EPSG3395=Zu,nt.EPSG3857=Ke,nt.EPSG900913=Sn,nt.EPSG4326=Xr,nt.Simple=Gu;var gn=fe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[C(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[C(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var g=this.getEvents();c.on(g,this),this.once("remove",function(){c.off(g,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});lt.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=C(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=C(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return C(s)in this._layers},eachLayer:function(s,c){for(var g in this._layers)s.call(c,this._layers[g]);return this},_addLayers:function(s){s=s?P(s)?s:[s]:[];for(var c=0,g=s.length;c<g;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[C(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=C(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,g=this._getZoomSpan();for(var w in this._zoomBoundLayers){var A=this._zoomBoundLayers[w].options;s=A.minZoom===void 0?s:Math.min(s,A.minZoom),c=A.maxZoom===void 0?c:Math.max(c,A.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ji=gn.extend({initialize:function(s,c){U(this,c),this._layers={};var g,w;if(s)for(g=0,w=s.length;g<w;g++)this.addLayer(s[g])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),g,w;for(g in this._layers)w=this._layers[g],w[s]&&w[s].apply(w,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var g in this._layers)s.call(c,this._layers[g]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return C(s)}}),ai=function(s,c){return new Ji(s,c)},Pi=Ji.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Ji.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Ji.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ve;for(var c in this._layers){var g=this._layers[c];s.extend(g.getBounds?g.getBounds():g.getLatLng())}return s}}),Li=function(s,c){return new Pi(s,c)},Yr=te.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){U(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var g=this._getIconUrl(s);if(!g){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var w=this._createImg(g,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(w,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),w},_setIconStyles:function(s,c){var g=this.options,w=g[c+"Size"];typeof w=="number"&&(w=[w,w]);var A=he(w),k=he(c==="shadow"&&g.shadowAnchor||g.iconAnchor||A&&A.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(g.className||""),k&&(s.style.marginLeft=-k.x+"px",s.style.marginTop=-k.y+"px"),A&&(s.style.width=A.x+"px",s.style.height=A.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return Fe.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Wo(s){return new Yr(s)}var xs=Yr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof xs.imagePath!="string"&&(xs.imagePath=this._detectIconPath()),(this.options.imagePath||xs.imagePath)+Yr.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(g,w,A){var k=w.exec(g);return k&&k[A]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=st("div","leaflet-default-icon-path",document.body),c=$e(s,"background-image")||$e(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),Zo=$n.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new gr(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ue(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&vt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,g=c._map,w=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,k=Qe(c._icon),Y=g.getPixelBounds(),re=g.getPixelOrigin(),de=be(Y.min._subtract(re).add(A),Y.max._subtract(re).subtract(A));if(!de.contains(k)){var we=he((Math.max(de.max.x,k.x)-de.max.x)/(Y.max.x-de.max.x)-(Math.min(de.min.x,k.x)-de.min.x)/(Y.min.x-de.min.x),(Math.max(de.max.y,k.y)-de.max.y)/(Y.max.y-de.max.y)-(Math.min(de.min.y,k.y)-de.min.y)/(Y.min.y-de.min.y)).multiplyBy(w);g.panBy(we,{animate:!1}),this._draggable._newPos._add(we),this._draggable._startPos._add(we),_e(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=ee(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(oe(this._panRequest),this._panRequest=ee(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,g=c._shadow,w=Qe(c._icon),A=c._map.layerPointToLatLng(w);g&&_e(g,w),c._latlng=A,s.latlng=A,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){oe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),ei=gn.extend({options:{icon:new xs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){U(this,c),this._latlng=ge(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=ge(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=s.icon.createIcon(this._icon),w=!1;g!==this._icon&&(this._icon&&this._removeIcon(),w=!0,s.title&&(g.title=s.title),g.tagName==="IMG"&&(g.alt=s.alt||"")),Ue(g,c),s.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xe(g,"focus",this._panOnFocus,this);var A=s.icon.createShadow(this._shadow),k=!1;A!==this._shadow&&(this._removeShadow(),k=!0),A&&(Ue(A,c),A.alt=""),this._shadow=A,s.opacity<1&&this._updateOpacity(),w&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&k&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ke(this._icon,"focus",this._panOnFocus,this),St(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&St(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&_e(this._icon,s),this._shadow&&_e(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Ue(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Zo)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Zo(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&it(this._icon,s),this._shadow&&it(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,g=c.iconSize?he(c.iconSize):he(0,0),w=c.iconAnchor?he(c.iconAnchor):he(0,0);s.panInside(this._latlng,{paddingTopLeft:w,paddingBottomRight:g.subtract(w)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Xu(s,c){return new ei(s,c)}var Di=gn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return U(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),yr=Di.extend({options:{fill:!0,radius:10},initialize:function(s,c){U(this,c),this._latlng=ge(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=ge(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return Di.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,g=this._clickTolerance(),w=[s+g,c+g];this._pxBounds=new Ce(this._point.subtract(w),this._point.add(w))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function gt(s,c){return new yr(s,c)}var Kr=yr.extend({initialize:function(s,c,g){if(typeof c=="number"&&(c=d({},g,{radius:c})),U(this,c),this._latlng=ge(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ve(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Di.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,g=this._map,w=g.options.crs;if(w.distance===Be.distance){var A=Math.PI/180,k=this._mRadius/Be.R/A,Y=g.project([c+k,s]),re=g.project([c-k,s]),de=Y.add(re).divideBy(2),we=g.unproject(de).lat,De=Math.acos((Math.cos(k*A)-Math.sin(c*A)*Math.sin(we*A))/(Math.cos(c*A)*Math.cos(we*A)))/A;(isNaN(De)||De===0)&&(De=k/Math.cos(Math.PI/180*c)),this._point=de.subtract(g.getPixelOrigin()),this._radius=isNaN(De)?0:de.x-g.project([we,s-De]).x,this._radiusY=de.y-Y.y}else{var qe=w.unproject(w.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(qe).x}this._updateBounds()}});function T(s,c,g){return new Kr(s,c,g)}var t=Di.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){U(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,g=null,w=Or,A,k,Y=0,re=this._parts.length;Y<re;Y++)for(var de=this._parts[Y],we=1,De=de.length;we<De;we++){A=de[we-1],k=de[we];var qe=w(s,A,k,!0);qe<c&&(c=qe,g=w(s,A,k))}return g&&(g.distance=Math.sqrt(c)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Uo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=ge(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ve,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Jn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],g=Jn(s),w=0,A=s.length;w<A;w++)g?(c[w]=ge(s[w]),this._bounds.extend(c[w])):c[w]=this._convertLatLngs(s[w]);return c},_project:function(){var s=new Ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new ne(s,s);this._rawPxBounds&&(this._pxBounds=new Ce([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,g){var w=s[0]instanceof Re,A=s.length,k,Y;if(w){for(Y=[],k=0;k<A;k++)Y[k]=this._map.latLngToLayerPoint(s[k]),g.extend(Y[k]);c.push(Y)}else for(k=0;k<A;k++)this._projectLatlngs(s[k],c,g)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,g,w,A,k,Y,re,de;for(g=0,A=0,k=this._rings.length;g<k;g++)for(de=this._rings[g],w=0,Y=de.length;w<Y-1;w++)re=mr(de[w],de[w+1],s,w,!0),re&&(c[A]=c[A]||[],c[A].push(re[0]),(re[1]!==de[w+1]||w===Y-2)&&(c[A].push(re[1]),A++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,g=0,w=s.length;g<w;g++)s[g]=Ut(s[g],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var g,w,A,k,Y,re,de=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(g=0,k=this._parts.length;g<k;g++)for(re=this._parts[g],w=0,Y=re.length,A=Y-1;w<Y;A=w++)if(!(!c&&w===0)&&As(s,re[A],re[w])<=de)return!0;return!1}});function i(s,c){return new t(s,c)}t._flat=Ks;var o=t.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ys(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=t.prototype._convertLatLngs.call(this,s),g=c.length;return g>=2&&c[0]instanceof Re&&c[0].equals(c[g-1])&&c.pop(),c},_setLatLngs:function(s){t.prototype._setLatLngs.call(this,s),Jn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Jn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,g=new ne(c,c);if(s=new Ce(s.min.subtract(g),s.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var w=0,A=this._rings.length,k;w<A;w++)k=nl(this._rings[w],s,!0),k.length&&this._parts.push(k)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,g,w,A,k,Y,re,de,we;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(k=0,de=this._parts.length;k<de;k++)for(g=this._parts[k],Y=0,we=g.length,re=we-1;Y<we;re=Y++)w=g[Y],A=g[re],w.y>s.y!=A.y>s.y&&s.x<(A.x-w.x)*(s.y-w.y)/(A.y-w.y)+w.x&&(c=!c);return c||t.prototype._containsPoint.call(this,s,!0)}});function a(s,c){return new o(s,c)}var u=Pi.extend({initialize:function(s,c){U(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=P(s)?s:s.features,g,w,A;if(c){for(g=0,w=c.length;g<w;g++)A=c[g],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var k=this.options;if(k.filter&&!k.filter(s))return this;var Y=h(s,k);return Y?(Y.feature=j(s),Y.defaultOptions=Y.options,this.resetStyle(Y),k.onEachFeature&&k.onEachFeature(s,Y),this.addLayer(Y)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=d({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function h(s,c){var g=s.type==="Feature"?s.geometry:s,w=g?g.coordinates:null,A=[],k=c&&c.pointToLayer,Y=c&&c.coordsToLatLng||m,re,de,we,De;if(!w&&!g)return null;switch(g.type){case"Point":return re=Y(w),p(k,s,re,c);case"MultiPoint":for(we=0,De=w.length;we<De;we++)re=Y(w[we]),A.push(p(k,s,re,c));return new Pi(A);case"LineString":case"MultiLineString":return de=y(w,g.type==="LineString"?0:1,Y),new t(de,c);case"Polygon":case"MultiPolygon":return de=y(w,g.type==="Polygon"?1:2,Y),new o(de,c);case"GeometryCollection":for(we=0,De=g.geometries.length;we<De;we++){var qe=h({geometry:g.geometries[we],type:"Feature",properties:s.properties},c);qe&&A.push(qe)}return new Pi(A);case"FeatureCollection":for(we=0,De=g.features.length;we<De;we++){var ot=h(g.features[we],c);ot&&A.push(ot)}return new Pi(A);default:throw new Error("Invalid GeoJSON object.")}}function p(s,c,g,w){return s?s(c,g):new ei(g,w&&w.markersInheritOptions&&w)}function m(s){return new Re(s[1],s[0],s[2])}function y(s,c,g){for(var w=[],A=0,k=s.length,Y;A<k;A++)Y=c?y(s[A],c-1,g):(g||m)(s[A]),w.push(Y);return w}function E(s,c){return s=ge(s),s.alt!==void 0?[M(s.lng,c),M(s.lat,c),M(s.alt,c)]:[M(s.lng,c),M(s.lat,c)]}function N(s,c,g,w){for(var A=[],k=0,Y=s.length;k<Y;k++)A.push(c?N(s[k],Jn(s[k])?0:c-1,g,w):E(s[k],w));return!c&&g&&A.length>0&&A.push(A[0].slice()),A}function O(s,c){return s.feature?d({},s.feature,{geometry:c}):j(c)}function j(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var K={toGeoJSON:function(s){return O(this,{type:"Point",coordinates:E(this.getLatLng(),s)})}};ei.include(K),Kr.include(K),yr.include(K),t.include({toGeoJSON:function(s){var c=!Jn(this._latlngs),g=N(this._latlngs,c?1:0,!1,s);return O(this,{type:(c?"Multi":"")+"LineString",coordinates:g})}}),o.include({toGeoJSON:function(s){var c=!Jn(this._latlngs),g=c&&!Jn(this._latlngs[0]),w=N(this._latlngs,g?2:c?1:0,!0,s);return c||(w=[w]),O(this,{type:(g?"Multi":"")+"Polygon",coordinates:w})}}),Ji.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(g){c.push(g.toGeoJSON(s).geometry.coordinates)}),O(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var g=c==="GeometryCollection",w=[];return this.eachLayer(function(A){if(A.toGeoJSON){var k=A.toGeoJSON(s);if(g)w.push(k.geometry);else{var Y=j(k);Y.type==="FeatureCollection"?w.push.apply(w,Y.features):w.push(Y)}}}),g?O(this,{geometries:w,type:"GeometryCollection"}):{type:"FeatureCollection",features:w}}});function q(s,c){return new u(s,c)}var ie=q,le=gn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,g){this._url=s,this._bounds=ve(c),U(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ue(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){St(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Ot(this._image),this},bringToBack:function(){return this._map&&Mn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ve(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:st("img");if(Ue(c,"leaflet-image-layer"),this._zoomAnimated&&Ue(c,"leaflet-zoom-animated"),this.options.className&&Ue(c,this.options.className),c.onselectstart=I,c.onmousemove=I,c.onload=_(this.fire,this,"load"),c.onerror=_(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;R(this._image,g,c)},_reset:function(){var s=this._image,c=new Ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=c.getSize();_e(s,c.min),s.style.width=g.x+"px",s.style.height=g.y+"px"},_updateOpacity:function(){it(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),Ae=function(s,c,g){return new le(s,c,g)},xe=le.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:st("video");if(Ue(c,"leaflet-image-layer"),this._zoomAnimated&&Ue(c,"leaflet-zoom-animated"),this.options.className&&Ue(c,this.options.className),c.onselectstart=I,c.onmousemove=I,c.onloadeddata=_(this.fire,this,"load"),s){for(var g=c.getElementsByTagName("source"),w=[],A=0;A<g.length;A++)w.push(g[A].src);this._url=g.length>0?w:[c.src];return}P(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var k=0;k<this._url.length;k++){var Y=st("source");Y.src=this._url[k],c.appendChild(Y)}}});function Ee(s,c,g){return new xe(s,c,g)}var rt=le.extend({_initImage:function(){var s=this._image=this._url;Ue(s,"leaflet-image-layer"),this._zoomAnimated&&Ue(s,"leaflet-zoom-animated"),this.options.className&&Ue(s,this.options.className),s.onselectstart=I,s.onmousemove=I}});function et(s,c,g){return new rt(s,c,g)}var Ht=gn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof Re||P(s))?(this._latlng=ge(s),U(this,c)):(U(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&it(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&it(this._container,1),this.bringToFront(),this.options.interactive&&(Ue(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(it(this._container,0),this._removeTimeout=setTimeout(_(St,void 0,this._container),200)):St(this._container),this.options.interactive&&(vt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ge(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ot(this._container),this},bringToBack:function(){return this._map&&Mn(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof Pi){c=null;var g=this._source._layers;for(var w in g)if(g[w]._map){c=g[w];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=he(this.options.offset),g=this._getAnchor();this._zoomAnimated?_e(this._container,s.add(g)):c=c.add(s).add(g);var w=this._containerBottom=-c.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=w+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});lt.include({_initOverlay:function(s,c,g,w){var A=c;return A instanceof s||(A=new s(w).setContent(c)),g&&A.setLatLng(g),A}}),gn.include({_initOverlay:function(s,c,g,w){var A=g;return A instanceof s?(U(A,w),A._source=this):(A=c&&!w?c:new s(w,this),A.setContent(g)),A}});var jn=Ht.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Ht.prototype.openOn.call(this,s)},onAdd:function(s){Ht.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Di||this._source.on("preclick",Qi))},onRemove:function(s){Ht.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Di||this._source.off("preclick",Qi))},getEvents:function(){var s=Ht.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=st("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=st("div",s+"-content-wrapper",c);if(this._contentNode=st("div",s+"-content",g),vi(c),Zs(this._contentNode),Xe(c,"contextmenu",Qi),this._tipContainer=st("div",s+"-tip-container",c),this._tip=st("div",s+"-tip",this._tipContainer),this.options.closeButton){var w=this._closeButton=st("a",s+"-close-button",c);w.setAttribute("role","button"),w.setAttribute("aria-label","Close popup"),w.href="#close",w.innerHTML='<span aria-hidden="true">&#215;</span>',Xe(w,"click",function(A){vn(A),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var g=s.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),c.width=g+1+"px",c.whiteSpace="",c.height="";var w=s.offsetHeight,A=this.options.maxHeight,k="leaflet-popup-scrolled";A&&w>A?(c.height=A+"px",Ue(s,k)):vt(s,k),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),g=this._getAnchor();_e(this._container,c.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt($e(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+c,w=this._containerWidth,A=new ne(this._containerLeft,-g-this._containerBottom);A._add(Qe(this._container));var k=s.layerPointToContainerPoint(A),Y=he(this.options.autoPanPadding),re=he(this.options.autoPanPaddingTopLeft||Y),de=he(this.options.autoPanPaddingBottomRight||Y),we=s.getSize(),De=0,qe=0;k.x+w+de.x>we.x&&(De=k.x+w-we.x+de.x),k.x-De-re.x<0&&(De=k.x-re.x),k.y+g+de.y>we.y&&(qe=k.y+g-we.y+de.y),k.y-qe-re.y<0&&(qe=k.y-re.y),(De||qe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([De,qe]))}},_getAnchor:function(){return he(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),zn=function(s,c){return new jn(s,c)};lt.mergeOptions({closePopupOnClick:!0}),lt.include({openPopup:function(s,c,g){return this._initOverlay(jn,s,c,g).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),gn.include({bindPopup:function(s,c){return this._popup=this._initOverlay(jn,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Pi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){wi(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof Di)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var wt=Ht.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Ht.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Ht.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Ht.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=st("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+C(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,g,w=this._map,A=this._container,k=w.latLngToContainerPoint(w.getCenter()),Y=w.layerPointToContainerPoint(s),re=this.options.direction,de=A.offsetWidth,we=A.offsetHeight,De=he(this.options.offset),qe=this._getAnchor();re==="top"?(c=de/2,g=we):re==="bottom"?(c=de/2,g=0):re==="center"?(c=de/2,g=we/2):re==="right"?(c=0,g=we/2):re==="left"?(c=de,g=we/2):Y.x<k.x?(re="right",c=0,g=we/2):(re="left",c=de+(De.x+qe.x)*2,g=we/2),s=s.subtract(he(c,g,!0)).add(De).add(qe),vt(A,"leaflet-tooltip-right"),vt(A,"leaflet-tooltip-left"),vt(A,"leaflet-tooltip-top"),vt(A,"leaflet-tooltip-bottom"),Ue(A,"leaflet-tooltip-"+re),_e(A,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&it(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return he(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Cn=function(s,c){return new wt(s,c)};lt.include({openTooltip:function(s,c,g){return this._initOverlay(wt,s,c,g).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),gn.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wt,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[c](g),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Pi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(Xe(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Xe(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,g,w;this._tooltip.options.sticky&&s.originalEvent&&(g=this._map.mouseEventToContainerPoint(s.originalEvent),w=this._map.containerPointToLayerPoint(g),c=this._map.layerPointToLatLng(w)),this._tooltip.setLatLng(c)}});var Un=Yr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),g=this.options;if(g.html instanceof Element?(fr(c),c.appendChild(g.html)):c.innerHTML=g.html!==!1?g.html:"",g.bgPos){var w=he(g.bgPos);c.style.backgroundPosition=-w.x+"px "+-w.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function Qr(s){return new Un(s)}Yr.Default=xs;var Bi=gn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){U(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),St(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ot(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Mn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof ne?s:new ne(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,g=-s(-1/0,1/0),w=0,A=c.length,k;w<A;w++)k=c[w].style.zIndex,c[w]!==this._container&&k&&(g=s(g,+k));isFinite(g)&&(this.options.zIndex=g+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Fe.ielt9){it(this._container,this.options.opacity);var s=+new Date,c=!1,g=!1;for(var w in this._tiles){var A=this._tiles[w];if(!(!A.current||!A.loaded)){var k=Math.min(1,(s-A.loaded)/200);it(A.el,k),k<1?c=!0:(A.active?g=!0:this._onOpaqueTile(A),A.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),c&&(oe(this._fadeFrame),this._fadeFrame=ee(this._updateOpacity,this))}},_onOpaqueTile:I,_initContainer:function(){this._container||(this._container=st("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===s?(this._levels[g].el.style.zIndex=c-Math.abs(s-g),this._onUpdateLevel(g)):(St(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var w=this._levels[s],A=this._map;return w||(w=this._levels[s]={},w.el=st("div","leaflet-tile-container leaflet-zoom-animated",this._container),w.el.style.zIndex=c,w.origin=A.project(A.unproject(A.getPixelOrigin()),s).round(),w.zoom=s,this._setZoomTransform(w,A.getCenter(),A.getZoom()),I(w.el.offsetWidth),this._onCreateLevel(w)),this._level=w,w}},_onUpdateLevel:I,_onRemoveLevel:I,_onCreateLevel:I,_pruneTiles:function(){if(this._map){var s,c,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var w=c.coords;this._retainParent(w.x,w.y,w.z,w.z-5)||this._retainChildren(w.x,w.y,w.z,w.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)St(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,g,w){var A=Math.floor(s/2),k=Math.floor(c/2),Y=g-1,re=new ne(+A,+k);re.z=+Y;var de=this._tileCoordsToKey(re),we=this._tiles[de];return we&&we.active?(we.retain=!0,!0):(we&&we.loaded&&(we.retain=!0),Y>w?this._retainParent(A,k,Y,w):!1)},_retainChildren:function(s,c,g,w){for(var A=2*s;A<2*s+2;A++)for(var k=2*c;k<2*c+2;k++){var Y=new ne(A,k);Y.z=g+1;var re=this._tileCoordsToKey(Y),de=this._tiles[re];if(de&&de.active){de.retain=!0;continue}else de&&de.loaded&&(de.retain=!0);g+1<w&&this._retainChildren(A,k,g+1,w)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,g,w){var A=Math.round(c);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var k=this.options.updateWhenZooming&&A!==this._tileZoom;(!w||k)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(s),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var g in this._levels)this._setZoomTransform(this._levels[g],s,c)},_setZoomTransform:function(s,c,g){var w=this._map.getZoomScale(g,s.zoom),A=s.origin.multiplyBy(w).subtract(this._map._getNewPixelOrigin(c,g)).round();Fe.any3d?R(s.el,A,w):_e(s.el,A)},_resetGrid:function(){var s=this._map,c=s.options.crs,g=this._tileSize=this.getTileSize(),w=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],w).x/g.x),Math.ceil(s.project([0,c.wrapLng[1]],w).x/g.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],w).y/g.x),Math.ceil(s.project([c.wrapLat[1],0],w).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,g=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),w=c.getZoomScale(g,this._tileZoom),A=c.project(s,this._tileZoom).floor(),k=c.getSize().divideBy(w*2);return new Ce(A.subtract(k),A.add(k))},_update:function(s){var c=this._map;if(c){var g=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var w=this._getTiledPixelBounds(s),A=this._pxBoundsToTileRange(w),k=A.getCenter(),Y=[],re=this.options.keepBuffer,de=new Ce(A.getBottomLeft().subtract([re,-re]),A.getTopRight().add([re,-re]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var we in this._tiles){var De=this._tiles[we].coords;(De.z!==this._tileZoom||!de.contains(new ne(De.x,De.y)))&&(this._tiles[we].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(s,g);return}for(var qe=A.min.y;qe<=A.max.y;qe++)for(var ot=A.min.x;ot<=A.max.x;ot++){var ti=new ne(ot,qe);if(ti.z=this._tileZoom,!!this._isValidTile(ti)){var Tn=this._tiles[this._tileCoordsToKey(ti)];Tn?Tn.current=!0:Y.push(ti)}}if(Y.sort(function(li,Qs){return li.distanceTo(k)-Qs.distanceTo(k)}),Y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Fi=document.createDocumentFragment();for(ot=0;ot<Y.length;ot++)this._addTile(Y[ot],Fi);this._level.el.appendChild(Fi)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var g=this._globalTileRange;if(!c.wrapLng&&(s.x<g.min.x||s.x>g.max.x)||!c.wrapLat&&(s.y<g.min.y||s.y>g.max.y))return!1}if(!this.options.bounds)return!0;var w=this._tileCoordsToBounds(s);return ve(this.options.bounds).overlaps(w)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,g=this.getTileSize(),w=s.scaleBy(g),A=w.add(g),k=c.unproject(w,s.z),Y=c.unproject(A,s.z);return[k,Y]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),g=new Ve(c[0],c[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),g=new ne(+c[0],+c[1]);return g.z=+c[2],g},_removeTile:function(s){var c=this._tiles[s];c&&(St(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Ue(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=I,s.onmousemove=I,Fe.ielt9&&this.options.opacity<1&&it(s,this.options.opacity)},_addTile:function(s,c){var g=this._getTilePos(s),w=this._tileCoordsToKey(s),A=this.createTile(this._wrapCoords(s),_(this._tileReady,this,s));this._initTile(A),this.createTile.length<2&&ee(_(this._tileReady,this,s,null,A)),_e(A,g),this._tiles[w]={el:A,coords:s,current:!0},c.appendChild(A),this.fire("tileloadstart",{tile:A,coords:s})},_tileReady:function(s,c,g){c&&this.fire("tileerror",{error:c,tile:g,coords:s});var w=this._tileCoordsToKey(s);g=this._tiles[w],g&&(g.loaded=+new Date,this._map._fadeAnimated?(it(g.el,0),oe(this._fadeFrame),this._fadeFrame=ee(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),c||(Ue(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Fe.ielt9||!this._map._fadeAnimated?ee(this._pruneTiles,this):setTimeout(_(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new ne(this._wrapX?S(s.x,this._wrapX):s.x,this._wrapY?S(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new Ce(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function Yu(s){return new Bi(s)}var qr=Bi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=U(this,c),c.detectRetina&&Fe.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var g=document.createElement("img");return Xe(g,"load",_(this._tileOnLoad,this,c,g)),Xe(g,"error",_(this._tileOnError,this,c,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(s),g},getTileUrl:function(s){var c={r:Fe.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=g),c["-y"]=g}return B(this._url,d(c,this.options))},_tileOnLoad:function(s,c){Fe.ielt9?setTimeout(_(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,g){var w=this.options.errorTileUrl;w&&c.getAttribute("src")!==w&&(c.src=w),s(g,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,g=this.options.zoomReverse,w=this.options.zoomOffset;return g&&(s=c-s),s+w},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=I,c.onerror=I,!c.complete)){c.src=ae;var g=this._tiles[s].coords;St(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:g})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",ae),Bi.prototype._removeTile.call(this,s)},_tileReady:function(s,c,g){if(!(!this._map||g&&g.getAttribute("src")===ae))return Bi.prototype._tileReady.call(this,s,c,g)}});function Md(s,c){return new qr(s,c)}var Pd=qr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var g=d({},this.defaultWmsParams);for(var w in c)w in this.options||(g[w]=c[w]);c=U(this,c);var A=c.detectRetina&&Fe.retina?2:1,k=this.getTileSize();g.width=k.x*A,g.height=k.y*A,this.wmsParams=g},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,qr.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),g=this._crs,w=be(g.project(c[0]),g.project(c[1])),A=w.min,k=w.max,Y=(this._wmsVersion>=1.3&&this._crs===Xr?[A.y,A.x,k.y,k.x]:[A.x,A.y,k.x,k.y]).join(","),re=qr.prototype.getTileUrl.call(this,s);return re+ue(this.wmsParams,re,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Y},setParams:function(s,c){return d(this.wmsParams,s),c||this.redraw(),this}});function Ug(s,c){return new Pd(s,c)}qr.WMS=Pd,Md.wms=Ug;var kr=gn.extend({options:{padding:.1},initialize:function(s){U(this,s),C(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ue(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var g=this._map.getZoomScale(c,this._zoom),w=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,c),k=w.multiplyBy(-g).add(A).subtract(this._map._getNewPixelOrigin(s,c));Fe.any3d?R(this._container,k,g):_e(this._container,k)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),g=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new Ce(g,g.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ld=kr.extend({options:{tolerance:0},getEvents:function(){var s=kr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){kr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Xe(s,"mousemove",this._onMouseMove,this),Xe(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Xe(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){oe(this._redrawRequest),delete this._ctx,St(this._container),ke(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){kr.prototype._update.call(this);var s=this._bounds,c=this._container,g=s.getSize(),w=Fe.retina?2:1;_e(c,s.min),c.width=w*g.x,c.height=w*g.y,c.style.width=g.x+"px",c.style.height=g.y+"px",Fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){kr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[C(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,g=c.next,w=c.prev;g?g.prev=w:this._drawLast=w,w?w.next=g:this._drawFirst=g,delete s._order,delete this._layers[C(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),g=[],w,A;for(A=0;A<c.length;A++){if(w=Number(c[A]),isNaN(w))return;g.push(w)}s.options._dashArray=g}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||ee(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ce,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var g=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var w=this._drawFirst;w;w=w.next)s=w.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var g,w,A,k,Y=s._parts,re=Y.length,de=this._ctx;if(re){for(de.beginPath(),g=0;g<re;g++){for(w=0,A=Y[g].length;w<A;w++)k=Y[g][w],de[w?"lineTo":"moveTo"](k.x,k.y);c&&de.closePath()}this._fillStroke(de,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,g=this._ctx,w=Math.max(Math.round(s._radius),1),A=(Math.max(Math.round(s._radiusY),1)||w)/w;A!==1&&(g.save(),g.scale(1,A)),g.beginPath(),g.arc(c.x,c.y/A,w,0,Math.PI*2,!1),A!==1&&g.restore(),this._fillStroke(g,s)}},_fillStroke:function(s,c){var g=c.options;g.fill&&(s.globalAlpha=g.fillOpacity,s.fillStyle=g.fillColor||g.color,s.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=g.opacity,s.lineWidth=g.weight,s.strokeStyle=g.color,s.lineCap=g.lineCap,s.lineJoin=g.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),g,w,A=this._drawFirst;A;A=A.next)g=A.layer,g.options.interactive&&g._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(g))&&(w=g);this._fireEvent(w?[w]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(vt(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var g,w,A=this._drawFirst;A;A=A.next)g=A.layer,g.options.interactive&&g._containsPoint(c)&&(w=g);w!==this._hoveredLayer&&(this._handleMouseOut(s),w&&(Ue(this._container,"leaflet-interactive"),this._fireEvent([w],s,"mouseover"),this._hoveredLayer=w)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(_(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,g){this._map._fireDOMEvent(c,g||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var g=c.next,w=c.prev;if(g)g.prev=w;else return;w?w.next=g:g&&(this._drawFirst=g),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var g=c.next,w=c.prev;if(w)w.next=g;else return;g?g.prev=w:w&&(this._drawLast=w),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function Dd(s){return Fe.canvas?new Ld(s):null}var Go=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Hg={_initContainer:function(){this._container=st("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(kr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=Go("shape");Ue(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=Go("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[C(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;St(c),s.removeInteractiveTarget(c),delete this._layers[C(s)]},_updateStyle:function(s){var c=s._stroke,g=s._fill,w=s.options,A=s._container;A.stroked=!!w.stroke,A.filled=!!w.fill,w.stroke?(c||(c=s._stroke=Go("stroke")),A.appendChild(c),c.weight=w.weight+"px",c.color=w.color,c.opacity=w.opacity,w.dashArray?c.dashStyle=P(w.dashArray)?w.dashArray.join(" "):w.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=w.lineCap.replace("butt","flat"),c.joinstyle=w.lineJoin):c&&(A.removeChild(c),s._stroke=null),w.fill?(g||(g=s._fill=Go("fill")),A.appendChild(g),g.color=w.fillColor||w.color,g.opacity=w.fillOpacity):g&&(A.removeChild(g),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),g=Math.round(s._radius),w=Math.round(s._radiusY||g);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+g+","+w+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){Ot(s._container)},_bringToBack:function(s){Mn(s._container)}},rl=Fe.vml?Go:Yt,Xo=kr.extend({_initContainer:function(){this._container=rl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=rl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){St(this._container),ke(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){kr.prototype._update.call(this);var s=this._bounds,c=s.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,g.setAttribute("width",c.x),g.setAttribute("height",c.y)),_e(g,s.min),g.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=rl("path");s.options.className&&Ue(c,s.options.className),s.options.interactive&&Ue(c,"leaflet-interactive"),this._updateStyle(s),this._layers[C(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){St(s._path),s.removeInteractiveTarget(s._path),delete this._layers[C(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,g=s.options;c&&(g.stroke?(c.setAttribute("stroke",g.color),c.setAttribute("stroke-opacity",g.opacity),c.setAttribute("stroke-width",g.weight),c.setAttribute("stroke-linecap",g.lineCap),c.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?c.setAttribute("stroke-dasharray",g.dashArray):c.removeAttribute("stroke-dasharray"),g.dashOffset?c.setAttribute("stroke-dashoffset",g.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),g.fill?(c.setAttribute("fill",g.fillColor||g.color),c.setAttribute("fill-opacity",g.fillOpacity),c.setAttribute("fill-rule",g.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,On(s._parts,c))},_updateCircle:function(s){var c=s._point,g=Math.max(Math.round(s._radius),1),w=Math.max(Math.round(s._radiusY),1)||g,A="a"+g+","+w+" 0 1,0 ",k=s._empty()?"M0 0":"M"+(c.x-g)+","+c.y+A+g*2+",0 "+A+-g*2+",0 ";this._setPath(s,k)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){Ot(s._path)},_bringToBack:function(s){Mn(s._path)}});Fe.vml&&Xo.include(Hg);function Bd(s){return Fe.svg||Fe.vml?new Xo(s):null}lt.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&Dd(s)||Bd(s)}});var Fd=o.extend({initialize:function(s,c){o.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ve(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Vg(s,c){return new Fd(s,c)}Xo.create=rl,Xo.pointsToPath=On,u.geometryToLayer=h,u.coordsToLatLng=m,u.coordsToLatLngs=y,u.latLngToCoords=E,u.latLngsToCoords=N,u.getFeature=O,u.asFeature=j,lt.mergeOptions({boxZoom:!0});var jd=$n.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Xe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ke(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){St(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),zt(),Le(),this._startPoint=this._map.mouseEventToContainerPoint(s),Xe(document,{contextmenu:wi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=st("div","leaflet-zoom-box",this._container),Ue(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new Ce(this._point,this._startPoint),g=c.getSize();_e(this._box,c.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(St(this._box),vt(this._container,"leaflet-crosshair")),pr(),dt(),ke(document,{contextmenu:wi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(_(this._resetState,this),0);var c=new Ve(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});lt.addInitHook("addHandler","boxZoom",jd),lt.mergeOptions({doubleClickZoom:!0});var zd=$n.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,g=c.getZoom(),w=c.options.zoomDelta,A=s.originalEvent.shiftKey?g-w:g+w;c.options.doubleClickZoom==="center"?c.setZoom(A):c.setZoomAround(s.containerPoint,A)}});lt.addInitHook("addHandler","doubleClickZoom",zd),lt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ud=$n.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new gr(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Ue(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){vt(this._map._container,"leaflet-grab"),vt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=ve(this._map.options.maxBounds);this._offsetLimit=be(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),g=this._initialWorldOffset,w=this._draggable._newPos.x,A=(w-c+g)%s+c-g,k=(w+c+g)%s-c-g,Y=Math.abs(A+g)<Math.abs(k+g)?A:k;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Y},_onDragEnd:function(s){var c=this._map,g=c.options,w=!g.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),w)c.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),k=(this._lastTime-this._times[0])/1e3,Y=g.easeLinearity,re=A.multiplyBy(Y/k),de=re.distanceTo([0,0]),we=Math.min(g.inertiaMaxSpeed,de),De=re.multiplyBy(we/de),qe=we/(g.inertiaDeceleration*Y),ot=De.multiplyBy(-qe/2).round();!ot.x&&!ot.y?c.fire("moveend"):(ot=c._limitOffset(ot,c.options.maxBounds),ee(function(){c.panBy(ot,{duration:qe,easeLinearity:Y,noMoveStart:!0,animate:!0})}))}}});lt.addInitHook("addHandler","dragging",Ud),lt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Hd=$n.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Xe(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ke(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,g=s.scrollTop||c.scrollTop,w=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(w,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},g=this.keyCodes,w,A;for(w=0,A=g.left.length;w<A;w++)c[g.left[w]]=[-1*s,0];for(w=0,A=g.right.length;w<A;w++)c[g.right[w]]=[s,0];for(w=0,A=g.down.length;w<A;w++)c[g.down[w]]=[0,s];for(w=0,A=g.up.length;w<A;w++)c[g.up[w]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},g=this.keyCodes,w,A;for(w=0,A=g.zoomIn.length;w<A;w++)c[g.zoomIn[w]]=s;for(w=0,A=g.zoomOut.length;w<A;w++)c[g.zoomOut[w]]=-s},_addHooks:function(){Xe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ke(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,g=this._map,w;if(c in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(w=this._panKeys[c],s.shiftKey&&(w=he(w).multiplyBy(3)),g.options.maxBounds&&(w=g._limitOffset(he(w),g.options.maxBounds)),g.options.worldCopyJump){var A=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(w)));g.panTo(A)}else g.panBy(w)}else if(c in this._zoomKeys)g.setZoom(g.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;wi(s)}}});lt.addInitHook("addHandler","keyboard",Hd),lt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Vd=$n.extend({addHooks:function(){Xe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ke(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=Gr(s),g=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var w=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(_(this._performZoom,this),w),wi(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),g=this._map.options.zoomSnap||0;s._stop();var w=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(w))))/Math.LN2,k=g?Math.ceil(A/g)*g:A,Y=s._limitZoom(c+(this._delta>0?k:-k))-c;this._delta=0,this._startTime=null,Y&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+Y):s.setZoomAround(this._lastMousePos,c+Y))}});lt.addInitHook("addHandler","scrollWheelZoom",Vd);var Wg=600;lt.mergeOptions({tapHold:Fe.touchNative&&Fe.safari&&Fe.mobile,tapTolerance:15});var Wd=$n.extend({addHooks:function(){Xe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ke(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new ne(c.clientX,c.clientY),this._holdTimeout=setTimeout(_(function(){this._cancel(),this._isTapValid()&&(Xe(document,"touchend",vn),Xe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),Wg),Xe(document,"touchend touchcancel contextmenu",this._cancel,this),Xe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){ke(document,"touchend",vn),ke(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),ke(document,"touchend touchcancel contextmenu",this._cancel,this),ke(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new ne(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var g=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});g._simulated=!0,c.target.dispatchEvent(g)}});lt.addInitHook("addHandler","tapHold",Wd),lt.mergeOptions({touchZoom:Fe.touch,bounceAtZoomLimits:!0});var Zd=$n.extend({addHooks:function(){Ue(this._map._container,"leaflet-touch-zoom"),Xe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){vt(this._map._container,"leaflet-touch-zoom"),ke(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var g=c.mouseEventToContainerPoint(s.touches[0]),w=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(g.add(w)._divideBy(2))),this._startDist=g.distanceTo(w),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Xe(document,"touchmove",this._onTouchMove,this),Xe(document,"touchend touchcancel",this._onTouchEnd,this),vn(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,g=c.mouseEventToContainerPoint(s.touches[0]),w=c.mouseEventToContainerPoint(s.touches[1]),A=g.distanceTo(w)/this._startDist;if(this._zoom=c.getScaleZoom(A,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&A<1||this._zoom>c.getMaxZoom()&&A>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var k=g._add(w)._divideBy(2)._subtract(this._centerPoint);if(A===1&&k.x===0&&k.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(k),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),oe(this._animRequest);var Y=_(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ee(Y,this,!0),vn(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,oe(this._animRequest),ke(document,"touchmove",this._onTouchMove,this),ke(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});lt.addInitHook("addHandler","touchZoom",Zd),lt.BoxZoom=jd,lt.DoubleClickZoom=zd,lt.Drag=Ud,lt.Keyboard=Hd,lt.ScrollWheelZoom=Vd,lt.TapHold=Wd,lt.TouchZoom=Zd,r.Bounds=Ce,r.Browser=Fe,r.CRS=nt,r.Canvas=Ld,r.Circle=Kr,r.CircleMarker=yr,r.Class=te,r.Control=Ci,r.DivIcon=Un,r.DivOverlay=Ht,r.DomEvent=Fn,r.DomUtil=ft,r.Draggable=gr,r.Evented=fe,r.FeatureGroup=Pi,r.GeoJSON=u,r.GridLayer=Bi,r.Handler=$n,r.Icon=Yr,r.ImageOverlay=le,r.LatLng=Re,r.LatLngBounds=Ve,r.Layer=gn,r.LayerGroup=Ji,r.LineUtil=il,r.Map=lt,r.Marker=ei,r.Mixin=el,r.Path=Di,r.Point=ne,r.PolyUtil=zo,r.Polygon=o,r.Polyline=t,r.Popup=jn,r.PosAnimation=jo,r.Projection=Vo,r.Rectangle=Fd,r.Renderer=kr,r.SVG=Xo,r.SVGOverlay=rt,r.TileLayer=qr,r.Tooltip=wt,r.Transformation=xt,r.Util=Z,r.VideoOverlay=xe,r.bind=_,r.bounds=be,r.canvas=Dd,r.circle=T,r.circleMarker=gt,r.control=Es,r.divIcon=Qr,r.extend=d,r.featureGroup=Li,r.geoJSON=q,r.geoJson=ie,r.gridLayer=Yu,r.icon=Wo,r.imageOverlay=Ae,r.latLng=ge,r.latLngBounds=ve,r.layerGroup=ai,r.map=$a,r.marker=Xu,r.point=he,r.polygon=a,r.polyline=i,r.popup=zn,r.rectangle=Vg,r.setOptions=U,r.stamp=C,r.svg=Bd,r.svgOverlay=et,r.tileLayer=Md,r.tooltip=Cn,r.transformation=yt,r.version=l,r.videoOverlay=Ee;var Zg=window.L;r.noConflict=function(){return window.L=Zg,this},window.L=r})})(Eh,Eh.exports);var Po=Eh.exports;const ju=Cu(Po);function zu(e,n,r){return Object.freeze({instance:e,context:n,container:r})}function Uu(e,n){return n==null?function(l,d){const f=Q.useRef();return f.current||(f.current=e(l,d)),f}:function(l,d){const f=Q.useRef();f.current||(f.current=e(l,d));const _=Q.useRef(l),{instance:x}=f.current;return Q.useEffect(function(){_.current!==l&&(n(x,l,_.current),_.current=l)},[x,l,d]),f}}function lg(e,n){Q.useEffect(function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){var f;(f=n.layerContainer)==null||f.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}function ug(e){return function(r){const l=Fu(),d=e(Sd(r,l),l);return P_(l.map,r.attribution),ag(d.current,r.eventHandlers),lg(d.current,l),d}}function F_(e,n){const r=Q.useRef();Q.useEffect(function(){if(n.pathOptions!==r.current){const d=n.pathOptions??{};e.instance.setStyle(d),r.current=d}},[e,n])}function j_(e){return function(r){const l=Fu(),d=e(Sd(r,l),l);return ag(d.current,r.eventHandlers),lg(d.current,l),F_(d.current,r),d}}function z_(e){function n(d,f){return zu(e(d),f)}const r=Uu(n),l=B_(r);return og(l)}function U_(e,n){const r=Uu(e,n),l=ug(r);return sg(l)}function H_(e,n){const r=Uu(e,n),l=j_(r);return sg(l)}function V_(e,n){const r=Uu(e,n),l=ug(r);return og(l)}function W_(e,n,r){const{opacity:l,zIndex:d}=n;l!=null&&l!==r.opacity&&e.setOpacity(l),d!=null&&d!==r.zIndex&&e.setZIndex(d)}function cg(){return Fu().map}function Z_(e){const n=cg();return Q.useEffect(function(){return n.on(e),function(){n.off(e)}},[n,e]),n}const G_=z_(function(n){return new Po.Control.Attribution(n)});function Ah(){return Ah=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},Ah.apply(this,arguments)}function X_({bounds:e,boundsOptions:n,center:r,children:l,className:d,id:f,placeholder:_,style:x,whenReady:C,zoom:v,...S},I){const[M]=Q.useState({className:d,id:f,style:x}),[F,z]=Q.useState(null);Q.useImperativeHandle(I,()=>(F==null?void 0:F.map)??null,[F]);const U=Q.useCallback(H=>{if(H!==null&&F===null){const B=new Po.Map(H,S);r!=null&&v!=null?B.setView(r,v):e!=null&&B.fitBounds(e,n),C!=null&&B.whenReady(C),z(D_(B))}},[]);Q.useEffect(()=>()=>{F==null||F.map.remove()},[F]);const ue=F?Gt.createElement(rg,{value:F},l):_??null;return Gt.createElement("div",Ah({},M,{ref:U}),ue)}const Y_=Q.forwardRef(X_),Fl=U_(function({position:n,...r},l){const d=new Po.Marker(n,r);return zu(d,ng(l,{overlayContainer:d}))},function(n,r,l){r.position!==l.position&&n.setLatLng(r.position),r.icon!=null&&r.icon!==l.icon&&n.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==l.zIndexOffset&&n.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==l.opacity&&n.setOpacity(r.opacity),n.dragging!=null&&r.draggable!==l.draggable&&(r.draggable===!0?n.dragging.enable():n.dragging.disable())}),na=H_(function({positions:n,...r},l){const d=new Po.Polyline(n,r);return zu(d,ng(l,{overlayContainer:d}))},function(n,r,l){r.positions!==l.positions&&n.setLatLngs(r.positions)}),K_=V_(function({url:n,...r},l){const d=new Po.TileLayer(n,Sd(r,l));return zu(d,l)},function(n,r,l){W_(n,r,l);const{url:d}=r;d!=null&&d!==l.url&&n.setUrl(d)}),Q_={},s1=e=>{let n;const r=new Set,l=(S,I)=>{const M=typeof S=="function"?S(n):S;if(!Object.is(M,n)){const F=n;n=I??(typeof M!="object"||M===null)?M:Object.assign({},n,M),r.forEach(z=>z(n,F))}},d=()=>n,C={setState:l,getState:d,getInitialState:()=>v,subscribe:S=>(r.add(S),()=>r.delete(S)),destroy:()=>{(Q_?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},v=n=e(l,d,C);return C},q_=e=>e?s1(e):s1;var hg={exports:{}},dg={},fg={exports:{}},pg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ro=Q;function $_(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var J_=typeof Object.is=="function"?Object.is:$_,ey=Ro.useState,ty=Ro.useEffect,ny=Ro.useLayoutEffect,iy=Ro.useDebugValue;function ry(e,n){var r=n(),l=ey({inst:{value:r,getSnapshot:n}}),d=l[0].inst,f=l[1];return ny(function(){d.value=r,d.getSnapshot=n,Ec(d)&&f({inst:d})},[e,r,n]),ty(function(){return Ec(d)&&f({inst:d}),e(function(){Ec(d)&&f({inst:d})})},[e]),iy(r),r}function Ec(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!J_(e,r)}catch{return!0}}function sy(e,n){return n()}var oy=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sy:ry;pg.useSyncExternalStore=Ro.useSyncExternalStore!==void 0?Ro.useSyncExternalStore:oy;fg.exports=pg;var ay=fg.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hu=Q,ly=ay;function uy(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var cy=typeof Object.is=="function"?Object.is:uy,hy=ly.useSyncExternalStore,dy=Hu.useRef,fy=Hu.useEffect,py=Hu.useMemo,gy=Hu.useDebugValue;dg.useSyncExternalStoreWithSelector=function(e,n,r,l,d){var f=dy(null);if(f.current===null){var _={hasValue:!1,value:null};f.current=_}else _=f.current;f=py(function(){function C(F){if(!v){if(v=!0,S=F,F=l(F),d!==void 0&&_.hasValue){var z=_.value;if(d(z,F))return I=z}return I=F}if(z=I,cy(S,F))return z;var U=l(F);return d!==void 0&&d(z,U)?(S=F,z):(S=F,I=U)}var v=!1,S,I,M=r===void 0?null:r;return[function(){return C(n())},M===null?void 0:function(){return C(M())}]},[n,r,l,d]);var x=hy(e,f[0],f[1]);return fy(function(){_.hasValue=!0,_.value=x},[x]),gy(x),x};hg.exports=dg;var my=hg.exports;const _y=Cu(my),gg={},{useDebugValue:yy}=Gt,{useSyncExternalStoreWithSelector:vy}=_y;let o1=!1;const wy=e=>e;function Cy(e,n=wy,r){(gg?"production":void 0)!=="production"&&r&&!o1&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),o1=!0);const l=vy(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return yy(l),l}const a1=e=>{(gg?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof e=="function"?q_(e):e,r=(l,d)=>Cy(n,l,d);return Object.assign(r,n),r},bd=e=>e?a1(e):a1,mg=e=>{if(typeof globalThis<"u"&&typeof globalThis.atob=="function")return globalThis.atob(e);if(typeof Buffer<"u")return Buffer.from(e,"base64").toString("utf-8");throw new Error("Base64 decoding is not supported in this environment.")},Ey=e=>{const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=1)n[r]=e.charCodeAt(r);return n},Ay=e=>{const n=e.replace(/-/g,"+").replace(/_/g,"/"),r=n.length%4===0?"":"=".repeat(4-n.length%4),l=mg(`${n}${r}`);return Ey(l)},l1=e=>Math.round(e*1e6)/1e6,u1=e=>typeof e=="number"&&Number.isFinite(e),Js=e=>{if(!e||typeof e!="object")return null;const n=Number(e.lat),r=Number(e.lng);return!u1(n)||!u1(r)||n<-90||n>90||r<-180||r>180?null:{lat:l1(n),lng:l1(r)}},Ha=4,$s=1e5,pu="#38bdf8",xh={r:"#ef4444",o:"#f97316",a:"#f59e0b",y:"#eab308",l:"#84cc16",g:"#22c55e",e:"#10b981",t:"#14b8a6",c:"#06b6d4",s:"#0ea5e9",b:"#3b82f6",i:"#6366f1",v:"#8b5cf6",p:"#a855f7",f:"#d946ef",k:"#ec4899",z:"#f43f5e",x:"#64748b",d:"#6b7280",m:"#71717a",n:"#737373",w:"#78716c",0:"#000000",1:"#ffffff"},c1=Object.entries(xh).reduce((e,[n,r])=>(e[r]=n,e),{}),Ea=e=>{if(!e||typeof e!="object")return null;const n=typeof e.version=="number"?e.version:Ha;if(n<3){let f=[],_="direct";if(n===1){_=e.connectVia==="route"?"route":"direct";const x=Js(e.start),C=Js(e.end),v=Array.isArray(e.checkpoints)?e.checkpoints.map(Js).filter(Boolean):[];x&&f.push(x),f.push(...v),C&&f.push(C)}else _=e.connectVia==="route"?"route":"direct",f=Array.isArray(e.checkpoints)?e.checkpoints.map(Js).filter(Boolean):[];return{version:3,connectVia:_,checkpoints:f,routes:[{name:"Route 1",color:"#38bdf8",indices:f.map((x,C)=>C),isVisible:!0}]}}if(n>Ha)return null;const r=e.connectVia==="route"?"route":"direct",l=Array.isArray(e.checkpoints)?e.checkpoints.map(Js).filter(Boolean):[],d=Array.isArray(e.routes)?e.routes.map(f=>({name:typeof f.name=="string"?f.name.slice(0,20):"Route",color:f.color===null?null:typeof f.color=="string"?f.color:pu,indices:Array.isArray(f.indices)?f.indices.filter(_=>typeof _=="number"&&_>=0&&_<l.length):[],isVisible:typeof f.isVisible=="boolean"?f.isVisible:!0})):[];return{version:n,connectVia:r,checkpoints:l,routes:d}},xy=({checkpointMap:e,routes:n,connectVia:r,includeNames:l=!1,includeColors:d=!1})=>{const f=new Set;n.forEach(v=>{Array.isArray(v.items)&&v.items.forEach(S=>f.add(S))});const _=[],x={};Array.from(f).forEach(v=>{const S=e[v];S&&S.position&&(x[v]=_.length,_.push(S.position))});const C=n.map(v=>({name:l?v.name:"",color:d?v.color:null,isVisible:v.isVisible,indices:(v.items||[]).map(S=>x[S]).filter(S=>typeof S=="number")}));return{version:Ha,connectVia:r,checkpoints:_,routes:C}},Sy=e=>{try{const n=Ay(e);if(n.length<4)return null;const r=new DataView(n.buffer,n.byteOffset,n.byteLength);let l=0;const d=r.getUint8(l);if(l+=1,d<1||d>Ha)return null;if(d<3){let I="direct";const M=[];if(d===1){const F=r.getUint8(l);l+=1,I=r.getUint8(l)===1?"route":"direct",l+=1;const z=r.getUint16(l,!1);l+=2;const U=()=>{const ue=r.getInt32(l,!1)/$s;l+=4;const H=r.getInt32(l,!1)/$s;return l+=4,{lat:ue,lng:H}};F&1&&M.push(U());for(let ue=0;ue<z;ue+=1)M.push(U());F&2&&M.push(U())}else{I=r.getUint8(l)===1?"route":"direct",l+=1;const F=r.getUint16(l,!1);l+=2;for(let z=0;z<F;z+=1){const U=r.getInt32(l,!1)/$s;l+=4;const ue=r.getInt32(l,!1)/$s;l+=4,M.push({lat:U,lng:ue})}}return{version:3,connectVia:I,checkpoints:M,routes:[{name:"Route 1",color:pu,isVisible:!0,indices:M.map((F,z)=>z)}]}}const f=r.getUint8(l)===1?"route":"direct";l+=1;const _=r.getUint16(l,!1);l+=2;const x=r.getUint8(l);l+=1;const C=[];for(let I=0;I<_;I+=1){const M=r.getInt32(l,!1)/$s;l+=4;const F=r.getInt32(l,!1)/$s;l+=4,C.push({lat:M,lng:F})}const v=new TextDecoder,S=[];for(let I=0;I<x;I+=1)if(d===3){const M=r.getUint8(l);l+=1;const F=new Uint8Array(n.buffer,n.byteOffset+l,M),z=v.decode(F);l+=M;const U=r.getUint8(l);l+=1;const ue=new Uint8Array(n.buffer,n.byteOffset+l,U),H=v.decode(ue);l+=U;const B=r.getUint8(l)===1;l+=1;const P=r.getUint16(l,!1);l+=2;const X=[];for(let ae=0;ae<P;ae+=1)X.push(r.getUint16(l,!1)),l+=2;S.push({name:H,color:z,isVisible:B,indices:X})}else{const M=r.getUint8(l);l+=1;const F=new Uint8Array(n.buffer,n.byteOffset+l,M);let z=v.decode(F);l+=M,z||(z=`Route ${I+1}`);const U=r.getUint16(l,!1);l+=2;const ue=[];for(let H=0;H<U;H+=1)ue.push(r.getUint16(l,!1)),l+=2;S.push({name:z,color:pu,isVisible:!0,indices:ue})}return{version:d,connectVia:f,checkpoints:C,routes:S}}catch(n){return console.error(n),null}},by=e=>{const n=e.checkpoints,r=e.routes;let l="";return r.map(d=>{const f=d.indices.map(v=>{const S=n[v];if(!S)return null;const I=Id(S,9);let M=0;if(l){const z=Math.min(l.length,I.length);for(;M<z&&l[M]===I[M];)M+=1}const F=I.slice(M);return l=I,F}).filter(v=>v!==null);if(f.length===0)return null;const _=f.join("_"),x=d.name&&d.name.trim().length>0,C=d.color&&d.color.trim().length>0;if(x||C){const v=x?encodeURIComponent(d.name).replace(/%20/g,"+"):"";let S="";if(C){const I=d.color.toLowerCase();c1[I]?S=c1[I]:I.startsWith("#")?(S=I.slice(1),S.length===6&&S[0]===S[1]&&S[2]===S[3]&&S[4]===S[5]&&(S=S[0]+S[2]+S[4])):S=encodeURIComponent(d.color)}return C?`(${v},${S})${_}`:`(${v})${_}`}return _}).filter(d=>d&&d.length>0).join(" ")},Iy=e=>{if(!/^[a-z0-9_ \(\)\%\-\.\~\!\*\'\(\)\,\+]+$/i.test(e))return null;const n=e.split(/\s+/).filter(Boolean);if(n.length===0)return null;const r=[],l=[];let d="";return n.forEach((f,_)=>{let x=`Route ${_+1}`,C=pu,v=f;const S=f.match(/^\((.*?)\)(.*)/);if(S){const F=S[1];v=S[2];const z=F.split(",");if(z.length>0&&z[0])try{x=decodeURIComponent(z[0].replace(/\+/g,"%20"))}catch{x=z[0]}if(z.length>1&&z[1]){const U=z[1];if(xh[U])C=xh[U];else if(/^[0-9a-f]{3,6}$/i.test(U))C=`#${U}`;else try{C=decodeURIComponent(U)}catch{C=U}}}const I=v.length===0?[""]:v.split("_"),M=[];I.forEach(F=>{let z=F;const ue=9-F.length;ue>0&&d.length>=ue&&(z=d.slice(0,ue)+F);const H=Sh(z);H&&(d=z,M.push(r.length),r.push(H))}),M.length>0&&l.push({name:x,color:C,isVisible:!0,indices:M})}),l.length===0?null:{version:Ha,connectVia:"direct",checkpoints:r,routes:l}},Ty=e=>{const n=Ea(e);return n?by(n):""},Ny=e=>{if(typeof e!="string")return null;const n=e.trim();if(!n)return null;const r=Sy(n);if(r)return Ea(r);const l=Iy(n);if(l)return Ea(l);try{const d=JSON.parse(mg(n));return Ea(d)}catch{return null}},_g="0123456789bcdefghjkmnpqrstuvwxyz",Aa=[16,8,4,2,1],Id=(e,n=9)=>{if(typeof n!="number"||n<1||n>12)throw new Error("encodeLocationCode precision must be between 1 and 12.");const r=Js(e);if(!r)return null;let l=-90,d=90,f=-180,_=180,x=!0,C=0,v=0,S="";for(;S.length<n;){if(x){const I=(f+_)/2;r.lng>=I?(v|=Aa[C],f=I):_=I}else{const I=(l+d)/2;r.lat>=I?(v|=Aa[C],l=I):d=I}x=!x,C<Aa.length-1?C+=1:(S+=_g[v],C=0,v=0)}return S},Sh=e=>{if(typeof e!="string"||e.length===0)return null;let n=-90,r=90,l=-180,d=180,f=!0;for(let _=0;_<e.length;_+=1){const x=e[_].toLowerCase(),C=_g.indexOf(x);if(C===-1)return null;for(let v=0;v<Aa.length;v+=1){const S=Aa[v];if(f){const I=(l+d)/2;C&S?l=I:d=I}else{const I=(n+r)/2;C&S?n=I:r=I}f=!f}}return{lat:(n+r)/2,lng:(l+d)/2}},ia=e=>`${e}-${Math.random().toString(36).slice(2,9)}`,bh="#38bdf8",Co={checkpointMap:{},routes:[{id:"route-1",name:"Route 1",color:bh,items:[],isVisible:!0,nextLabelIndex:1}],activeRouteId:"route-1",selectedId:null,connectVia:"direct",placementMode:null},h1=e=>e==null?null:typeof e=="string"?{type:e}:typeof e=="object"&&typeof e.type=="string"?e:null,Ry=bd((e,n)=>({...Co,addRoute:(r="New Route",l=bh)=>e(d=>{const f={id:ia("route"),name:r,color:l,items:[],isVisible:!0,nextLabelIndex:1};return{routes:[...d.routes,f],activeRouteId:f.id}}),removeRoute:r=>e(l=>{if(l.routes.length<=1)return l;const d=l.routes.filter(C=>C.id!==r),f=l.activeRouteId===r?d[0].id:l.activeRouteId,_=new Set(d.flatMap(C=>C.items)),x={};return Object.values(l.checkpointMap).forEach(C=>{_.has(C.id)&&(x[C.id]=C)}),{routes:d,activeRouteId:f,checkpointMap:x,selectedId:l.selectedId}}),setActiveRoute:r=>e(l=>({activeRouteId:l.routes.find(d=>d.id===r)?r:l.activeRouteId})),updateRoute:(r,l)=>e(d=>({routes:d.routes.map(f=>f.id===r?{...f,...l}:f)})),setPlacementMode:r=>e(l=>{const d=h1(r);if(!d)return{placementMode:null};const f=h1(l.placementMode);return(f==null?void 0:f.type)===d.type&&((f==null?void 0:f.insertIndex)??null)===((d==null?void 0:d.insertIndex)??null)?{placementMode:null}:{placementMode:d}}),toggleConnectMode:()=>e(r=>({connectVia:r.connectVia==="direct"?"route":"direct"})),addCheckpoint:(r,l)=>e(d=>{var M;const f=d.routes.find(F=>F.id===d.activeRouteId);if(!f)return d;const _=typeof f.nextLabelIndex=="number"?f.nextLabelIndex:(((M=f.items)==null?void 0:M.length)??0)+1,x={id:ia("checkpoint"),position:r,name:`Point ${_}`},C={...d.checkpointMap,[x.id]:x},v=[...f.items];typeof l=="number"&&l>=0&&l<=v.length?v.splice(l,0,x.id):v.push(x.id);const S={...f,items:v,nextLabelIndex:_+1},I=d.routes.map(F=>F.id===d.activeRouteId?S:F);return{checkpointMap:C,routes:I,placementMode:null,selectedId:x.id}}),selectCheckpoint:r=>e({selectedId:r}),updateCheckpoint:(r,l)=>e(d=>({checkpointMap:{...d.checkpointMap,[r]:{...d.checkpointMap[r],position:l}}})),moveCheckpoint:(r,l)=>e(d=>{const f=d.routes.find(C=>C.id===d.activeRouteId);if(!f)return d;const _=f.items.indexOf(r);if(_===-1||typeof l!="number")return d;const x=[...f.items];return l<0||l>=x.length||l===_?d:(x.splice(_,1),x.splice(l,0,r),{routes:d.routes.map(C=>C.id===d.activeRouteId?{...C,items:x}:C)})}),removeCheckpoint:r=>e(l=>{const d=l.routes.find(v=>v.id===l.activeRouteId);if(!d)return l;const f=d.items.includes(r);let _=l.routes;f?_=l.routes.map(v=>v.id===l.activeRouteId?{...v,items:v.items.filter(S=>S!==r)}:v):_=l.routes.map(v=>({...v,items:v.items.filter(S=>S!==r)}));const x=new Set(_.flatMap(v=>v.items)),C={};return Object.values(l.checkpointMap).forEach(v=>{x.has(v.id)&&(C[v.id]=v)}),{routes:_,checkpointMap:C,selectedId:l.selectedId===r?null:l.selectedId,placementMode:null}}),loadRouteSnapshot:r=>e(l=>{const d=Ea(r);if(!d)return l;const f={},x=(d.checkpoints||[]).map((v,S)=>{const I=ia("checkpoint");return f[I]={id:I,position:v,name:`Point ${S+1}`},I}),C=d.routes.map(v=>{const S=v.indices.map(I=>x[I]).filter(Boolean);return{id:ia("route"),name:v.name,color:v.color,isVisible:v.isVisible,items:S,nextLabelIndex:S.length+1}});if(C.length===0){const v=ia("route");C.push({id:v,name:"Route 1",color:bh,items:x,isVisible:!0,nextLabelIndex:x.length+1})}return{...Co,connectVia:d.connectVia,checkpointMap:f,routes:C,activeRouteId:C[0].id,selectedId:null,placementMode:null}}),clearAll:()=>e(Co),swapCheckpoints:(r,l)=>e(d=>{const f=d.routes.find(v=>v.id===d.activeRouteId);if(!f)return d;const _=f.items.indexOf(r),x=f.items.indexOf(l);if(_===-1||x===-1)return d;const C=[...f.items];return C[_]=l,C[x]=r,{routes:d.routes.map(v=>v.id===d.activeRouteId?{...v,items:C}:v)}})})),Lo=()=>Ry(e=>{const n=Array.isArray(e.routes)?e.routes:Co.routes,r=e.checkpointMap||Co.checkpointMap,l=e.activeRouteId||Co.activeRouteId,d=n.find(_=>_.id===l)||n[0],f=d?d.items.map(_=>r[_]).filter(Boolean):[];return{...e,routes:n,checkpointMap:r,activeRouteId:l,checkpoints:f,activeRoute:d}}),Oy=({onDropItem:e})=>{const n=cg();return Q.useEffect(()=>{if(!e)return;const r=n.getContainer(),l=_=>{_.preventDefault(),_.dataTransfer.dropEffect="copy"},d=_=>{_.preventDefault(),_.dataTransfer.dropEffect="copy"},f=_=>{_.preventDefault(),_.stopPropagation();const{clientX:x,clientY:C}=_,v=r.getBoundingClientRect(),S=x-v.left,I=C-v.top,M=n.containerPointToLatLng([S,I]),F=_.dataTransfer.getData("application/x-cadet-map-item");F&&e(F,M)};return r.addEventListener("dragenter",l),r.addEventListener("dragover",d),r.addEventListener("drop",f),()=>{r.removeEventListener("dragenter",l),r.removeEventListener("dragover",d),r.removeEventListener("drop",f)}},[n,e]),null},ky=Object.assign({"../../assets/compass.png":T_,"../../assets/layer.png":N_,"../../assets/menu.png":R_,"../../assets/route.png":O_,"../../assets/settings.png":k_,"../../assets/zoom.png":M_}),My=e=>ky[`../../assets/${e}.png`]??null,ra=({iconName:e,label:n,onClick:r,title:l,isActive:d=!1,disabled:f=!1,themeStyles:_})=>{const x=My(e),C=(_==null?void 0:_.button)??{},v=C.base??"flex h-12 w-12 items-center justify-center rounded-2xl border transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",S=C.active??"border-sky-500 bg-sky-200 text-slate-900 focus-visible:ring-sky-400",I=C.idle??"border-slate-300 bg-slate-100 text-slate-900 hover:border-slate-400 hover:bg-slate-200 focus-visible:ring-slate-500/50",M=f?C.disabled??"opacity-60 pointer-events-none":"",F=(_==null?void 0:_.iconStyle)??null,z=(_==null?void 0:_.iconClass)??"";return b.jsx("button",{type:"button",className:`${v} ${d?S:I} ${M}`,onClick:r,title:l??n,"aria-label":n,disabled:f,children:x?b.jsx("img",{src:x,alt:"",className:`h-5 w-5 object-contain select-none ${z}`,style:F??void 0,"aria-hidden":"true",draggable:"false"}):b.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide",children:n})})},Py=[51.505,10],Ac={street:{id:"street",label:"OpenStreetMap Standard",description:"Balanced street map with global coverage sourced from the OpenStreetMap community.",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:["a","b","c"],maxZoom:19,minZoom:3,category:"Streets"},light:{id:"light",label:"Carto Light",description:"Soft grayscale basemap designed for daylight navigation with minimal visual noise.",url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://carto.com/attributions">CARTO</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:["a","b","c","d"],maxZoom:19,minZoom:3,category:"Streets"},dark:{id:"dark",label:"Carto Dark Matter",description:"Night-friendly basemap with high contrast roads and landmarks on a deep navy canvas.",url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://carto.com/attributions">CARTO</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:["a","b","c","d"],maxZoom:19,minZoom:3,category:"Streets"},voyager:{id:"voyager",label:"Carto Voyager",description:"Colorful, detail-rich cartography ideal for orientation and wayfinding at multiple zoom levels.",url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://carto.com/attributions">CARTO</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:["a","b","c","d"],maxZoom:19,minZoom:3,category:"Streets"},hot:{id:"hot",label:"OSM Humanitarian",description:"Humanitarian OpenStreetMap Team basemap with emphasis on populated areas and infrastructure.",url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="https://www.hotosm.org/">Humanitarian OpenStreetMap Team</a>',subdomains:["a","b","c"],maxZoom:19,minZoom:3,category:"Streets"},topo:{id:"topo",label:"OpenTopoMap",description:"Topographic map derived from OSM data with contour lines and terrain shading.",url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | SRTM | <a href="https://opentopomap.org">OpenTopoMap</a>',subdomains:["a","b","c"],maxZoom:17,minZoom:3,category:"Outdoor"},satellite:{id:"satellite",label:"Esri World Imagery",description:"High-resolution satellite and aerial imagery from Esri and the GIS user community.",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Imagery &copy; Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",subdomains:[],maxZoom:19,minZoom:3,category:"Imagery"}},Ly=["street","light","dark","voyager","hot","topo","satellite"],d1={light:{container:"pointer-events-auto flex flex-col gap-2 rounded-3xl border border-slate-200 bg-slate-100 p-2 text-slate-900 backdrop-blur-sm",badge:"rounded-full border border-slate-300 bg-slate-100 px-3 py-1 text-[10px] font-semibold text-slate-700",button:{base:"flex h-12 w-12 items-center justify-center rounded-2xl border transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-slate-400/40 focus-visible:ring-offset-slate-100/60",active:"border-sky-500 bg-sky-200 text-slate-900",idle:"border-slate-300 bg-slate-100 text-slate-900 hover:border-slate-400 hover:bg-slate-200",disabled:"opacity-60 pointer-events-none"},panel:"pointer-events-auto w-60 rounded-3xl border border-slate-200 bg-slate-100 p-4 text-slate-900 backdrop-blur-md",panelTitle:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",panelButton:"rounded-xl border border-slate-300 bg-white px-3 py-1.5 text-[12px] font-semibold text-slate-900 transition hover:border-sky-400 hover:bg-sky-100",panelToggle:"rounded-xl border border-slate-300 bg-slate-100 px-3 py-1.5 text-[12px] font-semibold text-slate-900 transition hover:border-sky-400 hover:bg-sky-100",layerScroll:"flex max-h-60 flex-col gap-2 overflow-y-auto pr-1",layerOption:"flex flex-col gap-1 rounded-2xl border border-slate-300 bg-white px-3 py-2 text-left transition hover:border-sky-400 hover:bg-sky-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/40",layerOptionActive:"border-sky-500 bg-sky-100 text-slate-900 shadow-inner shadow-sky-200/60",layerOptionDescription:"text-[11px] text-slate-500 leading-snug",layerOptionCategory:"text-[10px] font-semibold uppercase tracking-wide text-slate-400",iconStyle:null,iconClass:""},dark:{container:"pointer-events-auto flex flex-col gap-2 rounded-3xl border border-slate-700 bg-[#0b1224] p-2 text-slate-100 backdrop-blur-sm",badge:"rounded-full border border-slate-600 bg-[#0f1b38] px-3 py-1 text-[10px] font-semibold text-slate-200",button:{base:"flex h-12 w-12 items-center justify-center rounded-2xl border transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-slate-200/30 focus-visible:ring-offset-[#0b1224]/40",active:"border-sky-400 bg-[#1e335d] text-sky-100",idle:"border-slate-600 bg-[#0d172e] text-slate-100 hover:border-slate-400 hover:bg-[#15213f]",disabled:"opacity-50 pointer-events-none"},panel:"pointer-events-auto w-60 rounded-3xl border border-slate-700 bg-[#080f1e] p-4 text-slate-100 backdrop-blur-md",panelTitle:"text-[11px] font-semibold uppercase tracking-wide text-slate-400",panelButton:"rounded-xl border border-slate-600 bg-[#111b33] px-3 py-1.5 text-[12px] font-semibold text-slate-100 transition hover:border-sky-400 hover:bg-[#1d2b4e]",panelToggle:"rounded-xl border border-slate-500 bg-[#0f1b38] px-3 py-1.5 text-[12px] font-semibold text-slate-100 transition hover:border-sky-400 hover:bg-[#1a2a4d]",layerScroll:"flex max-h-60 flex-col gap-2 overflow-y-auto pr-1",layerOption:"flex flex-col gap-1 rounded-2xl border border-slate-600 bg-[#101d39] px-3 py-2 text-left transition hover:border-sky-400 hover:bg-[#16254a] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-200/30",layerOptionActive:"border-sky-400 bg-[#1e335d] text-sky-100 shadow-inner shadow-sky-900/40",layerOptionDescription:"text-[11px] text-slate-300 leading-snug",layerOptionCategory:"text-[10px] font-semibold uppercase tracking-wide text-slate-400/90",iconStyle:{filter:"invert(0.9)"},iconClass:""}},Dy=6,By=[{id:"getting-started",title:"Getting started",description:"Allow location access, pick an active route, then use placement or grid tools to build precise checkpoint lists.",points:['Use the Route tab to manage multiple routes. Click "Add New Route" to start fresh, rename it, and choose a colour for quick identification.','Tap "Add Checkpoint" inside a route to enter placement mode. Drop the route-coloured puck onto the map or a Grid Tool preview marker to add that position.','Share progress from the Route tools: copy codes for a single route or use "All Routes" to export the full plan.']},{id:"toolbar",title:"Toolbar buttons",description:"Each button in the floating toolbar opens a tool. The Menu button mirrors these shortcuts, so every tool is reachable even when the bar is hidden.",points:["Menu toggles quick actions for Compass, Route, Grid, and Share tools without leaving the map.","Compass opens the heading overlay. Select a target route to get bearings and switch between degrees or mils.","Route opens the checkpoint manager where you can reorder points, adjust colours, and generate share codes."]},{id:"maps",title:"Choosing maps",description:"Different base layers emphasise different features. Pick the layer that best supports the task at hand.",points:["OpenStreetMap Street is the fallback layer and works reliably online or with low mobile reception.","Carto Light or Dark provide high-contrast styling that is easier to read in bright sun or at night.","OpenTopoMap is ideal for land navigation where contours and terrain shading matter.","Esri Satellite is ideal when you need to see real details, but is heavy on mobile data."]}],Fy=(e,n,r)=>{const l=e*Math.PI/180,d=2**r,f=Math.floor((n+180)/360*d),_=Math.floor((1-Math.log(Math.tan(l)+1/Math.cos(l))/Math.PI)/2*d),x=d-1;return{x:Math.min(Math.max(f,0),x),y:Math.min(Math.max(_,0),x),z:r}},jy=(e,n,{x:r,y:l,z:d})=>{const f=Array.isArray(n)&&n.length>0?n:[""],_=Math.abs((r+l)%f.length),x=f[_];return e.replace("{s}",x).replace("{x}",r).replace("{y}",l).replace("{z}",d)},Ka=(e,n)=>ju.divIcon({className:"flex items-center justify-center rounded-full text-xs font-semibold text-white shadow-lg shadow-slate-900/50",html:`<div style="background:${e};width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:9999px;">${n}</div>`});Ka("#22c55e","S");Ka("#ef4444","F");Ka("#3b82f6","");const zy=Ka("#d946ef",""),Uy=e=>ju.divIcon({className:"user-heading-icon",html:`
      <div style="position:relative;width:44px;height:44px;">
        <div style="position:absolute;inset:0;border-radius:50%;background:rgba(14,165,233,0.12);border:2px solid rgba(56,189,248,0.9);box-shadow:0 0 8px rgba(56,189,248,0.4);"></div>
        <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) rotate(${e}deg);transform-origin:center;">
          <div style="width:0;height:0;border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:18px solid #fbbf24;"></div>
        </div>
      </div>
    `,iconSize:[44,44],iconAnchor:[22,22]}),Hy=(e="#22c55e")=>ju.divIcon({className:"peer-icon",html:`
      <div style="position:relative;width:32px;height:32px;">
        <div style="position:absolute;inset:0;border-radius:50%;background:${e}33;border:2px solid ${e}E6;box-shadow:0 0 8px ${e}66;"></div>
        <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:10px;height:10px;background:${e};border-radius:50%;"></div>
      </div>
    `,iconSize:[32,32],iconAnchor:[16,16]}),Vy=()=>{const{placementMode:e,addCheckpoint:n,setPlacementMode:r}=Lo();return Z_({click:l=>{if(!e)return;const d=typeof e=="string"?{type:e}:e;if(!(d!=null&&d.type))return;const{latlng:f}=l;if(d.type==="checkpoint"){const _=typeof d.insertIndex=="number"?d.insertIndex:void 0;n({lat:f.lat,lng:f.lng},_)}r(null)}}),null},yg=Q.memo(({id:e,position:n,icon:r,onSelect:l,onUpdate:d})=>{const f=Q.useRef(null),_=Q.useMemo(()=>({click:()=>l(e),dragend:()=>{const C=f.current;if(C){const{lat:v,lng:S}=C.getLatLng();d(e,{lat:v,lng:S})}}}),[e,l,d]),x=Q.useMemo(()=>[n.lat,n.lng],[n]);return b.jsx(Fl,{draggable:!0,eventHandlers:_,position:x,icon:r,ref:f})});yg.displayName="DraggableMarker";const Wy=({userLocation:e,peers:n={},userHeading:r,targets:l=[],onEnableLocation:d,locationEnabled:f,hasLocationFix:_,isRequestingLocation:x,locationRequestToken:C=0,baseLayer:v="street",onBaseLayerChange:S,onToggleMenu:I,onOpenCompass:M,onOpenRoute:F,toolbarTheme:z="light",onToolbarThemeToggle:U,isMenuOpen:ue=!1,isSettingsOpen:H=!1,onToggleSettings:B,previewLocation:P,onDropItem:X,hideToolbar:ae=!1})=>{const{checkpoints:se,checkpointMap:$,routes:J,activeRouteId:V,connectVia:W,selectedId:ee,selectCheckpoint:oe,updateCheckpoint:Z,setPlacementMode:te,toggleConnectMode:G,loadRouteSnapshot:me,placementMode:fe,addCheckpoint:ne}=Lo(),pe=Q.useRef(null),he=Q.useRef(!1),Ce=Q.useRef(0),[be,Ve]=Q.useState(null),[ve,Re]=Q.useState(!1),[ge,nt]=Q.useState(!1),[Be,Mt]=Q.useState(!1),[xn,xt]=Q.useState(null),[yt,Ke]=Q.useState("settings"),[Sn,Yt]=Q.useState(0),[On,Pe]=Q.useState(null),[We,Ye]=Q.useState(""),[Kt,Te]=Q.useState(null),[Pt,xr]=Q.useState(!1),[dn,Sr]=Q.useState(!1),[Et,lr]=Q.useState(""),[Gn,Lt]=Q.useState("checkpoint"),[Xn,bn]=Q.useState(null),Bn=Q.useRef(null),Ct=Q.useRef(0),Ie=Q.useRef(null),Ne=Q.useRef(null),Oe=Q.useRef(null),He=Q.useRef(null),Tt=Q.useRef(null),Dt=Ac[v]??Ac.street,Ge=d1[z]??d1.light,ht=z==="dark"?"map-theme-dark":"map-theme-light",Ni=e?[e.lat,e.lng]:Py,Ws=e?"user-centered":"default-centered",yn=Q.useCallback(()=>{pe.current&&pe.current.invalidateSize({animate:!1})},[]),Yn=Q.useMemo(()=>Ly.map(D=>Ac[D]).filter(Boolean),[]),ys=Q.useMemo(()=>({top:"calc(env(safe-area-inset-top, 0px) + 1rem)",right:"calc(env(safe-area-inset-right, 0px) + 1rem)"}),[]),[Qt,ur]=Q.useState("all"),gi=Q.useMemo(()=>Qt==="all"?J:J.filter(D=>D.id===Qt),[J,Qt]),jt=Q.useMemo(()=>xy({checkpointMap:$,routes:gi,connectVia:W,includeNames:Pt,includeColors:dn}),[$,gi,W,Pt,dn]),br=Q.useMemo(()=>jt?Ty(jt):"",[jt]),Ri=Q.useMemo(()=>{if(!jt)return null;const D=[];jt.checkpoints.length>0&&D.push(`${jt.checkpoints.length} checkpoint${jt.checkpoints.length===1?"":"s"}`),jt.routes&&jt.routes.length>0&&D.push(`${jt.routes.length} route${jt.routes.length===1?"":"s"}`);const R=D.length?`Includes ${D.join(", ")}. `:"";return Pt&&dn?`${R}Compact text format (connection mode excluded).`:Pt?`${R}Compact text format (connection mode & colors excluded).`:dn?`${R}Compact text format (names & connection mode excluded).`:`${R}Compact text format (names, connection mode & colors excluded).`},[jt,Pt,dn]),cr=!!br,Nt=Q.useMemo(()=>gi.map(D=>{const R=D.items.map((_e,Qe)=>{const zt=$[_e];return zt?{key:`${D.id}-${zt.id}`,label:zt.name||`Point ${Qe+1}`,code:Id(zt.position),position:zt.position}:null}).filter(Boolean);return R.length===0?null:{route:D.name,color:D.color,codes:R}}).filter(Boolean),[gi,$]),Fe=Q.useCallback(D=>D==="success"?"text-emerald-500":D==="error"?"text-rose-500":D==="warning"?"text-amber-500":"text-slate-500",[]),fn=Q.useCallback((D,R,_e=2500)=>{Oe.current&&typeof window<"u"&&(window.clearTimeout(Oe.current),Oe.current=null),Pe(R?{tone:D,message:R}:null),R&&_e!==null&&typeof window<"u"&&(Oe.current=window.setTimeout(()=>{Pe(null),Oe.current=null},_e))},[Pe,Oe]),Me=Q.useCallback((D,R,_e=4e3)=>{He.current&&typeof window<"u"&&(window.clearTimeout(He.current),He.current=null),Te(R?{tone:D,message:R}:null),R&&_e!==null&&typeof window<"u"&&(He.current=window.setTimeout(()=>{Te(null),bn(null),He.current=null},_e))},[Te,He]),Zi=Q.useCallback(async()=>{var D;if(!cr){fn("warning","Define a route to generate a share code.",3200);return}try{let R=!1;if(typeof navigator<"u"&&((D=navigator.clipboard)!=null&&D.writeText))await navigator.clipboard.writeText(br),R=!0;else if(typeof document<"u"&&Ne.current){const _e=Ne.current;_e.focus(),_e.select(),typeof _e.setSelectionRange=="function"&&_e.setSelectionRange(0,br.length),R=!!(typeof document.execCommand=="function"&&document.execCommand("copy"))}if(!R)throw new Error("Copy not supported");fn("success","Share code copied to clipboard.",2500)}catch(R){fn("error",R!=null&&R.message&&R.message!=="Copy not supported"?R.message:"Copy failed. Try selecting and copying the code manually.",4e3)}},[cr,br,fn]),hr=Q.useCallback(()=>{const D=We.trim();if(!D){Me("warning","Paste a share code to import.",3500);return}const R=Ny(D);if(!R){Me("error","That share code could not be read. Check the full code and try again.",4e3);return}me(R),Ye(""),Me("success","Route imported. Close this panel to review it on the map.",4e3)},[me,We,Me]),pn=Q.useCallback(D=>{He.current&&typeof window<"u"&&(window.clearTimeout(He.current),He.current=null),Ye(D.target.value),Te(null)},[Te,Ye,He]),Gi=Q.useCallback(D=>{(D.ctrlKey||D.metaKey)&&D.key==="Enter"&&(D.preventDefault(),hr())},[hr]);Q.useEffect(()=>{yt!=="share"&&(Pe(null),Te(null),Oe.current&&typeof window<"u"&&(window.clearTimeout(Oe.current),Oe.current=null),He.current&&typeof window<"u"&&(window.clearTimeout(He.current),He.current=null))},[yt]);const kn=Q.useMemo(()=>z==="light"?"border border-slate-300 bg-white text-slate-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-400":"border border-slate-700 bg-slate-950 text-slate-100 focus:border-sky-400 focus:outline-none focus:ring-1 focus:ring-sky-500",[z]),Xi=Q.useMemo(()=>{if(!fe)return null;const D=typeof fe=="string"?{type:fe}:fe;return D!=null&&D.type?D.type==="start"?"Start point":D.type==="end"?"End point":D.type==="checkpoint"?typeof D.insertIndex=="number"?`Checkpoint (position ${D.insertIndex+1})`:"Checkpoint":null:null},[fe]),Kn=Q.useMemo(()=>Xi?[{key:"placement",text:`Currently placing: ${Xi}`,tone:"emerald"}]:[],[Xi]),sn=Q.useCallback((D,R="info",_e=4e3)=>{Bn.current&&typeof window<"u"&&(window.clearTimeout(Bn.current),Bn.current=null),Ve(D?{message:D,tone:R}:null),D&&_e!==null&&typeof window<"u"&&(Bn.current=window.setTimeout(()=>{Ve(null),Bn.current=null},_e))},[]);Q.useEffect(()=>{ju.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"})},[]),Q.useEffect(()=>{xt(null),sn(null),Re(!1),Ct.current=0,Yt(D=>D+1)},[v,sn]),Q.useEffect(()=>{ue&&Ke("settings")},[ue,Ke]),Q.useEffect(()=>{if(!ge||typeof window>"u")return;const D=()=>{window.requestAnimationFrame(yn)};return window.requestAnimationFrame(yn),window.addEventListener("resize",D,{passive:!0}),window.addEventListener("orientationchange",D,{passive:!0}),()=>{window.removeEventListener("resize",D),window.removeEventListener("orientationchange",D)}},[ge,yn]),Q.useEffect(()=>{var _e;if(!ge||typeof ResizeObserver>"u")return;const D=(_e=pe.current)==null?void 0:_e.getContainer();if(!D)return;const R=new ResizeObserver(()=>{typeof window<"u"?window.requestAnimationFrame(yn):yn()});return R.observe(D),()=>R.disconnect()},[ge,yn]),Q.useEffect(()=>{ge&&yn()},[ge,yn,z,H,ue,v]),Q.useEffect(()=>{!pe.current||!e||he.current||(pe.current.setView([e.lat,e.lng],16),he.current=!0)},[e]),Q.useEffect(()=>{Ie.current=e},[e]),Q.useEffect(()=>{if(!pe.current)return;he.current=!1,yn();const D=Ie.current;D&&(pe.current.flyTo([D.lat,D.lng],Math.max(pe.current.getZoom(),16),{animate:!1}),he.current=!0)},[v,yn]),Q.useEffect(()=>{pe.current&&(C===void 0||C===Ce.current||(Ce.current=C,he.current=!1,e&&(pe.current.flyTo([e.lat,e.lng],Math.max(pe.current.getZoom(),16),{animate:!0}),he.current=!0)))},[C,e]);const Do=Q.useMemo(()=>Uy(r??0),[r]),Qn=Q.useCallback(()=>{if(!pe.current)return;const D=Ie.current??e;if(!D)return;const R=pe.current;yn();const _e=Math.max(R.getZoom(),16);R.flyTo([D.lat,D.lng],_e,{animate:!0}),he.current=!0},[yn,e]);Q.useEffect(()=>()=>{pe.current&&(pe.current.getContainer().classList.remove("mapview-attribution-offset"),pe.current=null)},[]),Q.useEffect(()=>()=>{Bn.current&&typeof window<"u"&&window.clearTimeout(Bn.current),Oe.current&&typeof window<"u"&&window.clearTimeout(Oe.current),He.current&&typeof window<"u"&&window.clearTimeout(He.current),Tt.current&&typeof window<"u"&&window.clearTimeout(Tt.current)},[]);const on=Q.useCallback(()=>typeof d=="function"?d():!1,[d]),Rt=Q.useCallback(()=>{typeof I=="function"&&I()},[I]),Ir=Q.useCallback(()=>{typeof M=="function"&&M()},[M]),Oi=Q.useCallback(()=>{typeof F=="function"&&F()},[F]),vs=Q.useCallback(D=>{D!==v&&typeof S=="function"&&S(D)},[v,S]),ye=Q.useCallback((D,R,_e=3500)=>{Tt.current&&typeof window<"u"&&(window.clearTimeout(Tt.current),Tt.current=null),bn(R?{tone:D,message:R}:null),R&&_e!==null&&typeof window<"u"&&(Tt.current=window.setTimeout(()=>{bn(null),Tt.current=null},_e))},[bn,Tt]),Bo=Q.useCallback(async()=>{if(!ge||!pe.current){sn("Map not ready yet.","warning");return}if(v!=="satellite"){sn("Switch to satellite view to cache imagery.","warning");return}if(typeof window>"u"||!("caches"in window)){sn("Tile caching not supported in this browser.","error");return}const D=pe.current,R=Math.round(D.getZoom()),_e=2**R,Qe=[];if(e&&Qe.push(e),se.forEach(Le=>{Le!=null&&Le.position&&Qe.push(Le.position)}),Qe.length===0){sn("Add a checkpoint or enable location before caching.","warning");return}const pr=40075016686e-3/_e,Yi=new Set;if(Qe.forEach(Le=>{const dt=Fy(Le.lat,Le.lng,R),In=Le.lat*Math.PI/180,mi=Math.cos(In)||1e-4,_i=pr*mi,yi=pr,oi=Math.max(1,Math.ceil(2e3/_i)),Ki=Math.max(1,Math.ceil(2e3/yi));for(let ft=-oi;ft<=oi;ft+=1)for(let Xe=-Ki;Xe<=Ki;Xe+=1){const un=Math.min(Math.max(dt.x+ft,0),_e-1),ke=Math.min(Math.max(dt.y+Xe,0),_e-1);Yi.add(`${un}:${ke}:${R}`)}}),Yi.size===0){sn("No tiles identified for caching.","warning");return}const ln=Array.from(Yi).map(Le=>{const[dt,In,mi]=Le.split(":").map(_i=>Number(_i));return{x:dt,y:In,z:mi}});try{Re(!0),sn("Caching satellite tiles nearby","info",null);const Le=await caches.open("cadet-map-tile-cache");let dt=0;const In=[],mi=[...ln],_i=Math.min(Dy,mi.length),yi=async()=>{for(;mi.length>0;){const oi=mi.shift();if(!oi)continue;const Ki=jy(Dt.url,Dt.subdomains,oi);try{const ft=await fetch(Ki,{mode:"cors"});if(!ft.ok&&ft.type!=="opaque")throw new Error(`HTTP ${ft.status}`);await Le.put(Ki,ft.clone()),dt+=1}catch(ft){In.push((ft==null?void 0:ft.message)??"Unknown error")}await new Promise(ft=>{if(typeof window>"u"){ft();return}window.requestAnimationFrame(ft)})}};if(await Promise.all(Array.from({length:_i},yi)),In.length===ln.length)sn("Unable to cache tiles. Please try again later.","error");else{const oi=In.length?` (skipped ${In.length} tile${In.length===1?"":"s"})`:"";sn(`Cached ${dt} satellite tile${dt===1?"":"s"}${oi}.`,In.length?"warning":"success")}}catch(Le){sn(Le.message??"Tile caching failed.","error")}finally{Re(!1)}},[v,se,ge,sn,Dt.subdomains,Dt.url,e]),Bt=Q.useCallback(()=>{typeof B=="function"&&B(),Ke("settings")},[B]),ki=Q.useCallback(()=>{Ke("help"),!H&&typeof B=="function"&&B()},[H,B]),dr=Q.useCallback(()=>{!H&&typeof B=="function"&&B(),Ke("share")},[H,B]),pt=Q.useCallback(()=>{typeof U=="function"&&U()},[U]),at=Q.useCallback(()=>{if(e){Qn(),H&&typeof B=="function"&&B(),Ke("settings");return}on()?sn("Requesting location fix","info",2500):sn("Enable location permissions to center the map.","warning")},[on,Qn,H,B,sn,e]),$e=v!=="satellite"||ve,st=ve?"Caching":v!=="satellite"?"Satellite required":"Cache tiles",St=Q.useMemo(()=>({loading:()=>{Ct.current=0},load:()=>{yn()},tileerror:()=>{if(Ct.current+=1,Ct.current>=3){Ct.current=0;const D="Selected map unavailable";sn(D,"warning",6e3),xt(D),v!=="street"&&typeof S=="function"?S("street"):Yt(R=>R+1)}}}),[v,S,yn,Yt,sn]),fr=Q.useCallback(D=>{const R=D.target.value.replace(/\s+/g,"").toLowerCase();lr(R),bn(null),Tt.current&&typeof window<"u"&&(window.clearTimeout(Tt.current),Tt.current=null)},[]),Ot=Q.useCallback(D=>{Lt(D.target.value)},[]),Mn=Q.useCallback(()=>{const D=Et.trim().toLowerCase();if(!D){ye("warning","Enter a callout code to place it.");return}if(D.length<4||D.length>12){ye("error","Callouts should be between 4 and 12 characters.");return}const R=Sh(D);if(!R){ye("error","That code could not be decoded. Double-check the letters.");return}ne(R),ye("success","Checkpoint added from callout.",3e3),lr("")},[ne,Sh,Et,ye]),ws=Q.useMemo(()=>`${Ge.panelToggle} ${yt==="settings"?"ring-1 ring-sky-400 text-sky-500 border-sky-400":"opacity-80 hover:opacity-100"}`,[yt,Ge.panelToggle]),Ue=Q.useMemo(()=>`${Ge.panelToggle} ${yt==="share"?"ring-1 ring-sky-400 text-sky-500 border-sky-400":"opacity-80 hover:opacity-100"}`,[yt,Ge.panelToggle]),vt=Q.useMemo(()=>`${Ge.panelToggle} ${yt==="help"?"ring-1 ring-sky-400 text-sky-500 border-sky-400":"opacity-80 hover:opacity-100"}`,[yt,Ge.panelToggle]),Cs=Q.useMemo(()=>{const D={};return J.filter(R=>R.isVisible).forEach(R=>{var _e;(_e=R.items)==null||_e.forEach(Qe=>{(!D[Qe]||R.id===V)&&(D[Qe]={checkpoint:$[Qe],color:R.color,routeId:R.id})})}),Object.values(D).filter(R=>R.checkpoint)},[J,$,V]),qn=Q.useRef(new Map),it=Q.useCallback(D=>(qn.current.has(D)||qn.current.set(D,Ka(D,"")),qn.current.get(D)),[]),an=Q.useMemo(()=>J.filter(D=>D.isVisible).map(D=>{const R=(D.items||[]).map(_e=>{var Qe;return(Qe=$[_e])==null?void 0:Qe.position}).filter(Boolean).map(_e=>[_e.lat,_e.lng]);return{id:D.id,color:D.color,positions:R}}),[J,$]);return b.jsxs("div",{className:"relative h-full w-full flex-1",children:[b.jsxs(Y_,{center:Ni,zoom:13,className:`h-full w-full ${ht}`,preferCanvas:!0,ref:pe,attributionControl:!1,whenCreated:D=>{D.getContainer().classList.add("mapview-attribution-offset")},children:[b.jsx(Oy,{onDropItem:X}),b.jsx(G_,{position:"bottomleft",prefix:!1}),b.jsx(K_,{url:Dt.url,attribution:Dt.attribution,subdomains:Dt.subdomains,minZoom:Dt.minZoom,maxZoom:Dt.maxZoom,maxNativeZoom:Be?16:void 0,eventHandlers:St},`${Dt.id}-${Sn}-${Be}`),b.jsx(Vy,{}),e&&b.jsx(Fl,{position:[e.lat,e.lng],icon:Do,interactive:!1}),Object.values(n).map(D=>!D.location||typeof D.location.lat!="number"||typeof D.location.lng!="number"?null:b.jsx(Fl,{position:[D.location.lat,D.location.lng],icon:Hy(D.color),interactive:!1},`peer-loc-${D.id}`)),Cs.map(({checkpoint:D,color:R})=>b.jsx(yg,{id:D.id,position:D.position,icon:it(R),onSelect:oe,onUpdate:Z},D.id)),(P==null?void 0:P.position)&&b.jsxs(b.Fragment,{children:[b.jsx(Fl,{position:[P.position.lat,P.position.lng],icon:zy,opacity:.8}),P.source&&b.jsx(na,{positions:[[P.source.lat,P.source.lng],[P.position.lat,P.position.lng]],pathOptions:{color:"#d946ef",weight:3,dashArray:"5 5",opacity:.6}})]}),W==="direct"&&an.map(D=>D.positions.length>=2&&b.jsx(na,{positions:D.positions,pathOptions:{color:D.color,weight:4,opacity:.7}},`direct-${D.id}`)),W==="route"&&an.map(D=>D.positions.length>=2&&b.jsx(na,{positions:D.positions,pathOptions:{color:D.color,weight:4,dashArray:"10 6",opacity:.8}},`route-${D.id}`)),Object.values(n).map(D=>D.routes&&D.routes.map(R=>{if(!R.items||R.items.length<2)return null;const _e=R.items.filter(Qe=>Qe&&Qe.position&&typeof Qe.position.lat=="number"&&typeof Qe.position.lng=="number").map(Qe=>[Qe.position.lat,Qe.position.lng]);return _e.length<2?null:b.jsx(na,{positions:_e,pathOptions:{color:D.color||"#22c55e",weight:4,dashArray:"10 6",opacity:.6}},`peer-route-${D.id}-${R.id}`)})),e&&l.filter(D=>D.position).map(D=>b.jsx(na,{positions:[[e.lat,e.lng],[D.position.lat,D.position.lng]],pathOptions:{color:"#818cf8",weight:2,dashArray:"4 6",opacity:.4}},`user-target-${D.id}`))]},Ws),be&&b.jsx("div",{className:`pointer-events-none absolute left-1/2 top-4 z-[1000] -translate-x-1/2 rounded-full border px-4 py-1.5 text-[11px] font-semibold tracking-wide ${be.tone==="success"?"border-emerald-300 bg-emerald-200 text-emerald-900":be.tone==="warning"?"border-amber-300 bg-amber-200 text-amber-900":be.tone==="error"?"border-rose-300 bg-rose-200 text-rose-900":"border-sky-300 bg-sky-200 text-slate-900"}`,children:be.message}),b.jsxs("div",{className:`pointer-events-none absolute z-[990] flex flex-col items-end gap-3 transition-opacity duration-300 ${ae?"opacity-0":"opacity-100"}`,style:ys,children:[b.jsxs("div",{className:Ge.container,children:[b.jsx(ra,{iconName:"menu",label:"Menu",onClick:Rt,title:"Toggle navigation menu",isActive:ue,themeStyles:Ge}),b.jsx(ra,{iconName:"compass",label:"Compass",onClick:Ir,title:"Open compass overlay",themeStyles:Ge}),b.jsx(ra,{iconName:"route",label:"Route",onClick:Oi,title:"Open route tools",themeStyles:Ge}),b.jsx(ra,{iconName:"settings",label:"Settings",onClick:Bt,title:"Open settings",isActive:H,themeStyles:Ge})]}),(x||f&&!_)&&b.jsx("div",{className:`pointer-events-none ${Ge.badge}`,children:x?"Getting location":"GPS active, awaiting fix"})]}),b.jsx("div",{className:"pointer-events-none absolute z-[990] flex flex-col items-start gap-3",style:{bottom:"calc(env(safe-area-inset-bottom, 0px) + 1rem)",left:"calc(env(safe-area-inset-left, 0px) + 1rem)"},children:b.jsx("div",{className:"pointer-events-auto",children:b.jsx(ra,{iconName:"zoom",label:"Zoom",onClick:at,title:"Zoom to location",isActive:!1,themeStyles:Ge})})}),H&&b.jsxs("div",{className:"pointer-events-auto fixed inset-0 z-[1180] flex items-center justify-center p-4",children:[b.jsx("button",{type:"button",className:"absolute inset-0 rounded-none border-0 bg-slate-950 backdrop-blur-sm",style:{backgroundColor:"rgba(2, 6, 23, 0.45)"},"aria-label":"Close settings",onClick:()=>{typeof B=="function"&&B(),Ke("settings")}}),b.jsxs("div",{className:`${Ge.panel} w-full max-w-md max-h-[80vh] overflow-hidden shadow-2xl shadow-slate-950/50`,role:"dialog","aria-modal":"true","aria-label":yt==="help"?"Map help":yt==="share"?"Share current route":"Map settings",children:[b.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[b.jsx("span",{className:Ge.panelTitle,children:yt==="help"?"Help":yt==="share"?"Share route":"Settings"}),b.jsx("button",{type:"button",className:Ge.panelButton,onClick:()=>{typeof B=="function"&&B(),Ke("settings")},children:"Close"})]}),b.jsxs("div",{className:"mb-3 flex items-center gap-2 text-[11px]",children:[b.jsx("button",{type:"button",className:ws,onClick:()=>Ke("settings"),"aria-pressed":yt==="settings",children:"Settings"}),b.jsx("button",{type:"button",className:Ue,onClick:dr,"aria-pressed":yt==="share",children:"Share"}),b.jsx("button",{type:"button",className:vt,onClick:ki,"aria-pressed":yt==="help",children:"Help"})]}),b.jsx("div",{className:"flex h-full max-h-[65vh] flex-col gap-3 overflow-y-auto pr-1 text-[12px]",children:yt==="help"?b.jsx("div",{className:"flex flex-col gap-2",children:By.map(D=>b.jsxs("section",{className:`${Ge.layerOption} cursor-default`,"aria-labelledby":`${D.id}-title`,children:[b.jsx("h3",{id:`${D.id}-title`,className:"text-[12px] font-semibold leading-tight",children:D.title}),b.jsx("p",{className:Ge.layerOptionDescription,children:D.description}),b.jsx("ul",{className:"ml-3 list-disc space-y-1 text-[11px] leading-snug",children:D.points.map((R,_e)=>b.jsx("li",{children:R},_e))})]},D.id))}):yt==="share"?b.jsxs("div",{className:"flex flex-col gap-3",children:[b.jsxs("section",{className:`${Ge.layerOption} flex flex-col gap-2`,children:[b.jsxs("div",{className:"flex items-start justify-between gap-2",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Share code"}),b.jsx("p",{className:Ge.layerOptionDescription,children:"Copy and send this code to share the current route."})]}),b.jsx("button",{type:"button",className:`${Ge.panelButton} ${cr?"":"pointer-events-none opacity-50"}`,onClick:Zi,disabled:!cr,children:"Copy code"})]}),J.length>1&&b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("label",{className:"text-[11px] font-semibold opacity-70",children:"Scope:"}),b.jsxs("select",{value:Qt,onChange:D=>ur(D.target.value),className:`${kn} flex-1 rounded-lg px-2 py-1 text-[11px]`,children:[b.jsx("option",{value:"all",children:"All Routes"}),J.map(D=>b.jsx("option",{value:D.id,children:D.name},D.id))]})]}),b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"checkbox",id:"share-include-names",checked:Pt,onChange:D=>xr(D.target.checked),className:"h-3.5 w-3.5 rounded border-slate-300 text-sky-500 focus:ring-sky-500"}),b.jsx("label",{htmlFor:"share-include-names",className:"text-[11px] font-medium opacity-80",children:"Include names"})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"checkbox",id:"share-include-colors",checked:dn,onChange:D=>Sr(D.target.checked),className:"h-3.5 w-3.5 rounded border-slate-300 text-sky-500 focus:ring-sky-500"}),b.jsx("label",{htmlFor:"share-include-colors",className:"text-[11px] font-medium opacity-80",children:"Include colors"})]})]}),b.jsx("p",{className:Ge.layerOptionDescription,children:Ri??"Add at least one waypoint to generate a share code."}),b.jsx("textarea",{ref:Ne,className:`${kn} min-h-[90px] w-full rounded-xl px-3 py-2 text-[11px] leading-snug`,value:br,readOnly:!0,spellCheck:!1,"aria-label":"Current route share code",onFocus:D=>D.target.select()}),On&&b.jsx("span",{role:"status","aria-live":"polite",className:`text-[11px] font-semibold ${Fe(On.tone)}`,children:On.message})]}),b.jsxs("section",{className:`${Ge.layerOption} flex flex-col gap-2`,children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Import route"}),b.jsx("p",{className:Ge.layerOptionDescription,children:"Paste a code received from another teammate to replace your current route."})]}),b.jsx("textarea",{className:`${kn} min-h-[110px] w-full rounded-xl px-3 py-2 text-[11px] leading-snug`,value:We,onChange:pn,onKeyDown:Gi,placeholder:"Paste a share code here",spellCheck:!1,"aria-label":"Paste a share code to import"}),b.jsxs("div",{className:"flex items-center justify-between gap-2",children:[b.jsx("button",{type:"button",className:`${Ge.panelButton} ${We.trim()?"":"pointer-events-none opacity-50"}`,onClick:hr,disabled:!We.trim(),children:"Load route"}),Kt?b.jsx("span",{role:"status","aria-live":"polite",className:`text-[11px] font-semibold ${Fe(Kt.tone)}`,children:Kt.message}):b.jsx("span",{className:"text-[10px] opacity-60",children:"Press Ctrl/ + Enter to load"})]})]}),b.jsxs("section",{className:`${Ge.layerOption} flex flex-col gap-2`,children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Plot callout"}),b.jsx("p",{className:Ge.layerOptionDescription,children:"Drop a shared geohash onto the map as a start, checkpoint, or finish marker."})]}),b.jsx("input",{type:"text",className:`${kn} w-full rounded-xl px-3 py-2 text-[11px] uppercase tracking-wide`,value:Et,onChange:fr,placeholder:"e.g. u4pruydqq",spellCheck:!1,"aria-label":"Enter a location callout code"}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("label",{htmlFor:"callout-target",className:"text-[11px] font-semibold opacity-70",children:"Place as"}),b.jsx("select",{id:"callout-target",className:`${kn} w-full rounded-xl px-3 py-2 text-[11px]`,value:Gn,onChange:Ot,disabled:!0,children:b.jsx("option",{value:"checkpoint",children:"Checkpoint"})})]}),b.jsxs("div",{className:"flex items-center justify-between gap-2",children:[b.jsx("button",{type:"button",className:`${Ge.panelButton} ${Et.trim()?"":"pointer-events-none opacity-50"}`,onClick:Mn,disabled:!Et.trim(),children:"Place callout"}),Xn&&b.jsx("span",{role:"status","aria-live":"polite",className:`text-[11px] font-semibold ${Fe(Xn.tone)}`,children:Xn.message})]})]}),Nt.length>0&&b.jsxs("section",{className:`${Ge.layerOption} flex flex-col gap-2`,children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Location codes"}),b.jsx("p",{className:Ge.layerOptionDescription,children:"Geohash references 5m accuracy for quick callouts."})]}),b.jsx("div",{className:"flex flex-col gap-3",children:Nt.map(D=>b.jsxs("div",{className:"flex flex-col gap-1",children:[b.jsx("div",{className:"border-b border-slate-700/50 pb-1",children:b.jsx("span",{className:"text-[11px] font-semibold text-slate-300",children:D.route})}),b.jsx("ul",{className:"flex flex-col gap-1 text-[11px] font-mono",children:D.codes.map(R=>b.jsxs("li",{className:"flex items-center justify-between gap-3 pl-1",children:[b.jsx("span",{className:"font-semibold uppercase tracking-wide text-[10px] opacity-70",children:R.label}),b.jsx("span",{children:R.code})]},R.key))})]},D.route))})]})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex items-center justify-between gap-3",children:[b.jsx("span",{className:"font-medium",children:"Toolbar theme"}),b.jsx("button",{type:"button",className:Ge.panelToggle,onClick:pt,children:z==="light"?"Light":"Night"})]}),xn&&b.jsxs("div",{className:"rounded-lg border border-amber-500/50 bg-amber-500/10 p-3 text-[11px] text-amber-500",children:[b.jsx("p",{className:"font-semibold",children:"Map Error"}),b.jsx("p",{children:xn})]}),b.jsxs("div",{className:"flex items-center justify-between gap-3",children:[b.jsxs("div",{children:[b.jsx("span",{className:"font-medium",children:"Low data mode"}),b.jsx("p",{className:"text-[11px] opacity-70",children:"Reduce map detail to save data."})]}),b.jsx("button",{type:"button",role:"switch","aria-checked":Be,onClick:()=>Mt(!Be),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-offset-2 ${Be?"bg-orange-500":"bg-slate-600"}`,children:b.jsx("span",{className:`${Be?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),b.jsxs("div",{children:[b.jsx("span",{className:"font-medium",children:"Map layers"}),b.jsx("p",{className:"text-[11px] opacity-70",children:"Choose the basemap that suits your mission."}),b.jsx("div",{className:`${Ge.layerScroll} mt-2`,children:Yn.map(D=>{const R=D.id===v;return b.jsxs("button",{type:"button",className:`${Ge.layerOption} ${R?Ge.layerOptionActive:""}`,onClick:()=>vs(D.id),children:[b.jsxs("div",{className:"flex items-start justify-between gap-2",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:D.label}),D.category&&b.jsx("p",{className:Ge.layerOptionCategory,children:D.category})]}),R&&b.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wide text-sky-500",children:"Current"})]}),b.jsx("p",{className:Ge.layerOptionDescription,children:D.description})]},D.id)})})]}),b.jsxs("div",{className:"flex items-start justify-between gap-3",children:[b.jsxs("div",{children:[b.jsx("span",{className:"font-medium",children:"Cache imagery"}),b.jsx("p",{className:"text-[11px] opacity-70",children:"Download tiles within 2km"})]}),b.jsx("button",{type:"button",className:`${Ge.panelButton} ${$e?"opacity-60 pointer-events-none":""}`,onClick:Bo,disabled:$e,children:st})]}),b.jsxs("section",{className:`${Ge.layerOption} flex flex-col gap-2`,children:[b.jsxs("div",{className:"flex items-start justify-between gap-2",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Share this route"}),b.jsx("p",{className:Ge.layerOptionDescription,children:"switch to the share view to copy or import a route."})]}),b.jsx("button",{type:"button",className:Ge.panelButton,onClick:dr,children:"Open"})]}),b.jsx("p",{className:Ge.layerOptionDescription,children:Ri??"Add at least one waypoint to enable route sharing."})]}),b.jsx("button",{type:"button",className:Ge.panelButton,onClick:at,children:"Center map on my location"})]})})]})]}),Kn.length>0&&b.jsx("div",{className:"pointer-events-none absolute bottom-4 left-1/2 flex w-[min(90vw,18rem)] -translate-x-1/2 flex-col gap-2",children:Kn.map(D=>{const R=D.tone==="emerald"?"border-emerald-500 text-emerald-100":"border-sky-500 text-sky-200";return b.jsx("div",{className:`rounded-lg border bg-slate-950 p-3 text-center text-sm font-semibold shadow-lg shadow-slate-950 ${R}`,children:D.text},D.key)})})]})},ks=e=>e*Math.PI/180,Zy=e=>e*180/Math.PI,vg=(e,n)=>{if(!e||!n)return null;const r=ks(e.lat),l=ks(n.lat),d=ks(n.lng-e.lng),f=Math.sin(d)*Math.cos(l),_=Math.cos(r)*Math.sin(l)-Math.sin(r)*Math.cos(l)*Math.cos(d),x=Math.atan2(f,_);return(Zy(x)+360)%360},wg=(e,n)=>{if(!e||!n)return null;const r=6371e3,l=ks(e.lat),d=ks(n.lat),f=ks(n.lat-e.lat),_=ks(n.lng-e.lng),x=Math.sin(f/2)*Math.sin(f/2)+Math.cos(l)*Math.cos(d)*Math.sin(_/2)*Math.sin(_/2),C=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return r*C},Cg=(e,n)=>e==null||n==null?null:(n-e+360)%360,Gy=e=>{const[n,r]=Q.useState(null),[l,d]=Q.useState(null),[f,_]=Q.useState(null),[x,C]=Q.useState(!1),[v,S]=Q.useState(!0),[I,M]=Q.useState(!1),[F,z]=Q.useState(!1),[U,ue]=Q.useState(!1),H=Q.useRef(null),B=Q.useRef(null),P=Q.useRef(typeof navigator<"u"&&"geolocation"in navigator);Q.useEffect(()=>{if(!(typeof window>"u")){if(typeof DeviceOrientationEvent>"u"){S(!1),_(V=>V??"Compass not supported on this device");return}typeof DeviceOrientationEvent.requestPermission=="function"&&C(!0)}},[]);const X=Q.useCallback(V=>{if(typeof V.alpha=="number"){const W=V.webkitCompassHeading??360-V.alpha;r((W+360)%360)}},[]),ae=Q.useCallback(()=>{if(!P.current)return _("Geolocation not supported"),!1;H.current!==null&&(navigator.geolocation.clearWatch(H.current),H.current=null);const V=ee=>{const{latitude:oe,longitude:Z}=ee.coords;d({lat:oe,lng:Z}),M(!0),z(!0),ue(!1),_(null)},W=ee=>{var oe;(ee==null?void 0:ee.code)===1?(_("Location permission denied"),M(!1)):(ee==null?void 0:ee.code)===2?_("Location unavailable"):(ee==null?void 0:ee.code)===3?_("Location request timed out"):_((ee==null?void 0:ee.message)??"Unable to access location"),z(!1),M(!1),ue(!1),H.current!==null&&((oe=navigator.geolocation)!=null&&oe.clearWatch)&&(navigator.geolocation.clearWatch(H.current),H.current=null)};try{return ue(!0),navigator.geolocation.getCurrentPosition(V,W,{enableHighAccuracy:!0,maximumAge:0,timeout:15e3}),H.current=navigator.geolocation.watchPosition(V,W,{enableHighAccuracy:!0,maximumAge:0,timeout:15e3}),!0}catch(ee){return _(ee.message??"Unable to access location"),ue(!1),M(!1),!1}},[]),se=Q.useCallback(async()=>{if(typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function")try{await DeviceOrientationEvent.requestPermission()==="granted"?(window.removeEventListener("deviceorientation",X),window.addEventListener("deviceorientation",X),B.current="deviceorientation",ae(),C(!1)):_("Compass permission denied")}catch(V){_(V.message??"Compass permission error")}},[X,ae]);Q.useEffect(()=>{if(!P.current)return()=>{};if(typeof window>"u"||!window.isSecureContext)return()=>{};let V=!1;return(async()=>{var ee;if((ee=navigator.permissions)!=null&&ee.query)try{const oe=await navigator.permissions.query({name:"geolocation"});if(V)return;oe.state==="granted"?ae():oe.state==="denied"&&_(Z=>Z??"Location permission denied"),oe.onchange=()=>{V||(oe.state==="granted"?ae():oe.state==="denied"&&(_("Location permission denied"),M(!1),z(!1)))}}catch(oe){_(Z=>Z??oe.message??"Geolocation unavailable")}})(),()=>{var ee;H.current!==null&&((ee=navigator.geolocation)!=null&&ee.clearWatch)&&navigator.geolocation.clearWatch(H.current),H.current=null,V=!0}},[ae]),Q.useEffect(()=>{if(typeof window>"u")return()=>{};if(!v)return()=>{};if(typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function")return()=>{window.removeEventListener("deviceorientation",X)};const V="ondeviceorientationabsolute"in window?"deviceorientationabsolute":"deviceorientation";return window.addEventListener(V,X),B.current=V,()=>{B.current&&window.removeEventListener(B.current,X)}},[X,v]);const $=vg(l,e),J=wg(l,e);return{heading:n,bearing:$,distance:J,geolocation:l,error:f,needsPermission:x,isSupported:v,locationEnabled:I,hasLocationFix:F,isRequestingLocation:U,requestPermission:se,startGeolocation:ae}},f1=e=>e==null?"N/A":e<1e3?`${e.toFixed(0)} m`:`${(e/1e3).toFixed(2)} km`,Xy=3200/Math.PI,Yy=({heading:e,bearing:n,distance:r,error:l,enableCompass:d,onEnableLocation:f,needsPermission:_,isSupported:x,locationEnabled:C,hasLocationFix:v,isRequestingLocation:S,targets:I=[],selectedTarget:M=null,onSelectTarget:F,bearingUnit:z="degrees",onToggleBearingUnit:U,routes:ue=[],activeRouteId:H=null,onSelectRoute:B=null})=>{const P=Q.useMemo(()=>Cg(e,n),[e,n]),X=()=>{typeof f=="function"&&f()},ae=()=>{typeof d=="function"&&d()},se=v?"Location Active":S?"Locating":C?"Retry Location":"Enable Location",$=S||v,J=typeof U!="function",V=!x&&!_,W=typeof F=="function",ee=ve=>{if(!ve)return null;const{lat:Re,lng:ge}=ve;return typeof Re!="number"||typeof ge!="number"?null:`${Re.toFixed(4)}, ${ge.toFixed(4)}`},oe=ve=>{W&&F(ve)},Z=M?"Other checkpoints":"Select a checkpoint",te=ee(M==null?void 0:M.position),G=ve=>{if(ve==null)return null;const Re=(ve%360+360)%360;return z==="mils"?(Re*Math.PI/180*Xy+6400)%6400:Re},me=ve=>{if(ve==null)return"N/A";const Re=G(ve);return Re==null?"N/A":z==="mils"?`${Re.toFixed(1)} mil`:`${Re.toFixed(0)}`},fe=()=>{J||U()},ne=n!=null&&e!=null,pe=ne?P??0:null,he=e!=null?(360-e)%360:null,Ce=_||!x,be=Ce?"border border-rose-500 text-rose-200":"border border-slate-800 text-slate-100",Ve=Ce?"border-rose-500 bg-slate-800":"border-sky-500 bg-slate-950";return b.jsxs("div",{className:`flex flex-col items-center gap-4 rounded-2xl bg-slate-900 p-5 text-center shadow-lg shadow-slate-950 ${be}`,children:[ue&&ue.length>1&&B&&b.jsxs("div",{className:"w-full max-w-xs",children:[b.jsx("label",{className:"mb-1 block text-left text-xs font-medium text-slate-400",children:"Target Route"}),b.jsx("select",{value:H,onChange:ve=>B(ve.target.value),className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-2 text-sm text-slate-200 focus:border-sky-500 focus:outline-none",children:ue.map(ve=>b.jsx("option",{value:ve.id,children:ve.name},ve.id))})]}),b.jsxs("div",{className:"flex w-full flex-wrap items-center justify-center gap-2",children:[b.jsx("h2",{className:"text-base font-semibold text-sky-200",children:"Compass"}),b.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[b.jsx("button",{type:"button",className:"rounded-full border border-emerald-500 px-3 py-1 text-[11px] font-semibold text-emerald-200 hover:bg-emerald-700 hover:text-emerald-100 disabled:cursor-not-allowed disabled:opacity-60",onClick:X,disabled:$,children:se}),b.jsx("button",{type:"button",className:"rounded-full border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-700 hover:text-sky-100 disabled:cursor-not-allowed disabled:opacity-60",onClick:ae,disabled:V,children:"Enable Compass"}),b.jsx("button",{type:"button",className:"rounded-full border border-slate-700 px-3 py-1 text-[11px] font-semibold text-slate-200 hover:border-sky-500 hover:text-sky-200 disabled:cursor-not-allowed disabled:opacity-60",onClick:fe,disabled:J,children:z==="degrees"?"Show mils":"Show degrees"})]})]}),b.jsxs("div",{className:`relative flex h-44 w-44 items-center justify-center rounded-full shadow-inner shadow-slate-950/40 ${Ve}`,children:[b.jsx("div",{className:"absolute inset-3 rounded-full border border-slate-800","aria-hidden":"true"}),b.jsx("div",{className:"absolute inset-0","aria-hidden":"true",children:b.jsx("div",{className:"absolute left-1/2 top-0 h-1/2 w-[3px] -translate-x-1/2 rounded-full bg-slate-200 opacity-40"})}),he!=null&&b.jsxs("div",{className:"absolute inset-0",style:{transform:`rotate(${he}deg)`},"aria-hidden":"true",children:[[0,30,60,90,120,150,180,210,240,270,300,330].map(ve=>{const Re=ve%90===0;return b.jsx("div",{className:"absolute inset-0",style:{transform:`rotate(${ve}deg)`},children:b.jsx("div",{className:`absolute left-1/2 top-3 -translate-x-1/2 rounded-full bg-slate-600 ${Re?"h-3 w-[2px]":"h-1.5 w-[1px]"}`})},ve)}),b.jsx("span",{className:"absolute left-1/2 top-2 -translate-x-1/2 rounded-full border border-slate-600 bg-slate-950 px-2 py-[2px] text-[10px] font-semibold uppercase tracking-[0.25em] text-sky-200 shadow-sm shadow-slate-950/40",children:"N"})]}),ne&&pe!=null&&b.jsx("div",{className:"absolute inset-0",style:{transform:`rotate(${pe}deg)`},"aria-hidden":"true",children:b.jsx("div",{className:"absolute left-1/2 top-1 flex h-10 w-10 -translate-x-1/2 items-start justify-center drop-shadow-[0_0_8px_rgba(249,115,22,0.6)]",children:b.jsxs("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-orange-500",children:[b.jsx("path",{d:"M12 2L15 10H9L12 2Z",fill:"currentColor",stroke:"#c2410c",strokeWidth:"1.5",strokeLinejoin:"round"}),b.jsx("path",{d:"M12 22L9 14H15L12 22Z",fill:"currentColor",opacity:"0.5"})]})})}),Ce&&b.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center rounded-full bg-slate-950 text-center",style:{backgroundColor:"rgba(2, 6, 23, 0.85)"},children:[b.jsx("p",{className:"text-lg font-bold uppercase tracking-wide text-rose-200",children:"Compass not enabled"}),_&&b.jsx("p",{className:"mt-1 text-xs text-rose-200/80",children:"Tap Enable Compass to allow motion access."}),!_&&!x&&b.jsx("p",{className:"mt-1 text-xs text-rose-200/80",children:"This device does not expose compass sensors."})]}),b.jsx("span",{className:"absolute bottom-4 text-xs text-slate-300",children:e!=null?me(e):""})]}),b.jsxs("div",{className:"space-y-1 text-xs text-slate-300",children:[b.jsxs("p",{children:["Target bearing: ",me(n)]}),b.jsxs("p",{children:["Distance: ",f1(r)]}),(S||C&&!v)&&b.jsx("p",{className:"text-[11px] text-slate-400",children:"Awaiting GPS fix keep the device in the open."}),_&&x&&b.jsx("p",{className:"text-[11px] text-slate-400",children:"Tap Enable Compass to grant motion and orientation access."}),!x&&b.jsx("p",{className:"text-amber-400",children:"Compass not supported on this device."}),l&&b.jsxs("p",{className:"text-rose-400",children:["Error: ",l]})]}),b.jsxs("div",{className:"w-full rounded-xl border border-slate-800 bg-slate-950 p-3 text-left",children:[b.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-sky-300",children:"Active checkpoint"}),M?b.jsxs("div",{className:"mt-2",children:[b.jsx("p",{className:"text-sm font-semibold text-slate-100",children:M.label}),te&&b.jsx("p",{className:"text-[11px] text-slate-400",children:te})]}):b.jsx("p",{className:"mt-2 text-[11px] text-slate-400",children:I.length>0?"Pick a checkpoint below to set the compass target.":"Add checkpoints from the Route tools to set the compass target."})]}),I.length>0&&b.jsxs("div",{className:"w-full rounded-xl border border-slate-800 bg-slate-950 p-3 text-left",children:[b.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-sky-300",children:Z}),b.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:I.map(ve=>b.jsxs("div",{role:W?"button":void 0,tabIndex:W?0:void 0,className:`flex items-center justify-between gap-3 rounded-md border px-3 py-2 text-xs text-slate-200 transition ${W?"cursor-pointer border-slate-700 bg-slate-900 hover:border-sky-500 hover:bg-sky-900 focus:outline-none focus:ring-2 focus:ring-sky-500/60":"border-slate-800 bg-slate-900"}`,onClick:W?()=>oe(ve.id):void 0,onKeyDown:W?Re=>{(Re.key==="Enter"||Re.key===" ")&&(Re.preventDefault(),oe(ve.id))}:void 0,children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full border border-slate-700 bg-slate-950",children:b.jsx("svg",{viewBox:"0 0 24 24",className:"h-4 w-4 text-sky-300",style:{transform:`rotate(${ve.relativeBearing??0}deg)`,transformOrigin:"50% 50%"},children:b.jsx("path",{d:"M12 3l4.5 9H13l3 9-4-7-4 7 3-9H7.5z",fill:"currentColor"})})}),b.jsxs("div",{children:[b.jsx("p",{className:"font-semibold text-slate-100",children:ve.label}),b.jsx("p",{className:"text-[11px] text-slate-400",children:ve.bearing!=null?me(ve.bearing):""})]})]}),b.jsx("span",{className:"text-[11px] text-slate-400",children:f1(ve.distance)})]},ve.id))})]})]})},p1="rounded border border-slate-700 px-2 py-1 text-[11px] font-medium text-slate-200 transition hover:border-sky-500 hover:bg-slate-800",g1="border-sky-500 bg-sky-900 text-sky-100",Ky=({route:e,isActive:n,onActivate:r,checkpointMap:l,onUpdateRoute:d,onRemoveRoute:f,canRemove:_,selectedId:x,onSelectCheckpoint:C,onMoveCheckpoint:v,onRemoveCheckpoint:S,onAddCheckpoint:I,placementMode:M,onSetPlacementMode:F})=>{const[z,U]=Q.useState(!1),ue=Q.useMemo(()=>e.items.map((J,V)=>{const W=l[J];return W?{type:"checkpoint",id:W.id,label:W.name||`Point ${V+1}`,position:W.position,index:V,callout:Id(W.position)}:null}).filter(Boolean),[e.items,l]),H=J=>V=>{V.dataTransfer.setData("application/x-cadet-map-checkpoint-id",J.id),V.dataTransfer.effectAllowed="move";const W=V.target.closest("li");W&&V.dataTransfer.setDragImage(W,10,10)},B=J=>{J.preventDefault(),J.dataTransfer.dropEffect="move"},P=J=>{J.preventDefault(),J.dataTransfer.dropEffect="move"},X=J=>V=>{V.preventDefault();const W=V.dataTransfer.getData("application/x-cadet-map-checkpoint-id");!W||W===J.id||v(W,J.index)},ae=(M==null?void 0:M.type)??null,se=typeof(M==null?void 0:M.insertIndex)=="number"?M.insertIndex:null,$=J=>{J.index,J.index,ue.length-1;const V=n&&ae==="checkpoint"&&se===J.index,W=n&&ae==="checkpoint"&&se===J.index+1;return b.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[b.jsx("button",{type:"button",className:`${p1} ${V?g1:""}`,onClick:ee=>{ee.stopPropagation(),F({type:"checkpoint",insertIndex:J.index})},children:"Insert Before"}),b.jsx("button",{type:"button",className:`${p1} ${W?g1:""}`,onClick:ee=>{ee.stopPropagation(),F({type:"checkpoint",insertIndex:J.index+1})},children:"Insert After"}),b.jsx("button",{type:"button",className:"rounded border border-rose-500 px-2 py-1 text-[11px] font-medium text-rose-300 transition hover:bg-rose-900 hover:text-rose-100",onClick:ee=>{ee.stopPropagation(),S(J.id)},children:"Remove"})]})};return b.jsxs("div",{className:`border-b border-slate-700/50 ${n?"bg-slate-800/30":""}`,children:[b.jsxs("div",{className:"flex cursor-pointer items-center gap-3 p-4 hover:bg-slate-800/50",onClick:r,children:[b.jsx("div",{className:`transition-transform duration-200 ${n?"rotate-90":""}`,children:b.jsx("svg",{className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),b.jsx("input",{type:"color",value:e.color,onClick:J=>J.stopPropagation(),onChange:J=>d(e.id,{color:J.target.value}),className:"h-5 w-5 cursor-pointer rounded border-0 bg-transparent p-0",title:"Route color"}),b.jsx("div",{className:"flex-1",children:b.jsx("input",{type:"text",value:e.name,onClick:J=>J.stopPropagation(),onChange:J=>d(e.id,{name:J.target.value}),className:"w-full bg-transparent text-sm font-medium text-slate-200 placeholder-slate-500 focus:outline-none",placeholder:"Route Name"})}),_&&b.jsx("button",{onClick:J=>{J.stopPropagation(),f(e.id)},className:"rounded p-1 text-slate-400 hover:bg-red-500/10 hover:text-red-400",title:"Delete route",children:b.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),n&&b.jsxs("div",{className:"px-4 pb-4",children:[b.jsxs("ul",{className:"space-y-2 text-sm text-slate-200",children:[ue.length===0&&b.jsx("li",{className:"text-xs text-slate-500",children:"No markers yet. Add one below."}),ue.map(J=>b.jsxs("li",{onDragEnter:B,onDragOver:P,onDrop:X(J),className:`flex items-start gap-2 rounded-md border px-3 py-2 transition ${x===J.id?"border-sky-500 bg-sky-900 text-sky-100":"cursor-pointer border-slate-800 hover:border-slate-600 hover:bg-slate-800"}`,onClick:()=>C(J.id),children:[b.jsx("div",{draggable:"true",onDragStart:H(J),className:"drag-handle mt-1 flex h-8 w-8 shrink-0 cursor-grab items-center justify-center rounded border border-slate-700 bg-slate-800 text-slate-400 touch-none hover:bg-slate-700 hover:text-slate-200 active:cursor-grabbing",onClick:V=>V.stopPropagation(),children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-5 w-5",children:b.jsx("path",{fillRule:"evenodd",d:"M10 3a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM10 8.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM11.5 15.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",clipRule:"evenodd"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("div",{className:"font-semibold",children:J.label}),b.jsxs("div",{className:"text-xs text-slate-400",children:[J.position.lat.toFixed(4),", ",J.position.lng.toFixed(4)]}),J.callout&&b.jsxs("div",{className:"text-[11px] font-mono uppercase text-amber-300",children:["Callout: ",J.callout]}),$(J)]})]},J.id))]}),b.jsx("button",{onClick:I,style:ae==="checkpoint"&&!se?{borderColor:e.color,color:e.color,backgroundColor:`${e.color}20`}:{},className:`mt-3 w-full rounded border border-dashed border-slate-600 py-2 text-xs font-medium text-slate-400 transition hover:bg-slate-800 ${ae==="checkpoint"&&!se?"":"hover:border-sky-500 hover:text-sky-400"}`,children:"+ Add Checkpoint"})]})]})},Qy=({onEnterPlacingMode:e})=>{const{checkpointMap:n,routes:r,activeRouteId:l,setActiveRoute:d,addRoute:f,removeRoute:_,updateRoute:x,selectedId:C,selectCheckpoint:v,connectVia:S,toggleConnectMode:I,clearAll:M,setPlacementMode:F,moveCheckpoint:z,removeCheckpoint:U,placementMode:ue}=Lo(),[H,B]=Q.useState(l),P=X=>{H===X?B(null):(B(X),d(X))};return b.jsxs("div",{className:"flex h-full flex-col bg-slate-900/95 backdrop-blur-md",children:[b.jsxs("div",{className:"flex-1 overflow-y-auto",children:[r.map(X=>b.jsx(Ky,{route:X,isActive:X.id===H,onActivate:()=>P(X.id),checkpointMap:n,onUpdateRoute:x,onRemoveRoute:_,canRemove:r.length>1,selectedId:C,onSelectCheckpoint:v,onMoveCheckpoint:z,onRemoveCheckpoint:U,onAddCheckpoint:()=>{d(X.id),F({type:"checkpoint"}),e&&e()},placementMode:ue,onSetPlacementMode:F},X.id)),b.jsx("div",{className:"p-4",children:b.jsxs("button",{onClick:()=>f(),className:"flex w-full items-center justify-center gap-2 rounded-lg border border-slate-600 bg-slate-800 py-2 text-sm text-slate-200 hover:border-sky-500 hover:bg-slate-700",children:[b.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Route"]})})]}),b.jsxs("div",{className:"border-t border-slate-700/50 p-4",children:[b.jsx("div",{className:"flex gap-2",children:b.jsx("button",{onClick:I,className:`flex-1 rounded border border-slate-600 py-2 text-xs font-medium transition ${S==="route"?"border-sky-500 bg-sky-900/20 text-sky-400":"text-slate-400 hover:border-sky-500 hover:bg-slate-800 hover:text-sky-400"}`,children:S==="route"?"Routing: Road":"Routing: Direct"})}),b.jsx("button",{onClick:M,className:"mt-2 w-full rounded border border-red-900/30 py-2 text-xs font-medium text-red-400 transition hover:bg-red-900/20 hover:text-red-300",children:"Clear All"})]})]})},m1=e=>e===4?4:3,_1={origin:null,originReference:null,precision:3},qy=bd(e=>({..._1,setPrecision:n=>e(r=>{const l=m1(n);return{precision:l,originReference:r.originReference?{...r.originReference,precision:l}:null}}),setOrigin:n=>e({origin:n}),setOriginReference:n=>e(r=>({originReference:n?{...n,precision:m1(n.precision??r.precision)}:null})),resetGrid:()=>e(_1)})),$y=()=>qy(e=>({origin:e.origin,originReference:e.originReference,precision:e.precision,setOrigin:e.setOrigin,setOriginReference:e.setOriginReference,setPrecision:e.setPrecision,resetGrid:e.resetGrid})),Va=6371e3,jl=e=>e*Math.PI/180,y1=e=>e*180/Math.PI,Jy=e=>(e+540)%360-180,Td=e=>{if(e===3||e===4)return e;throw new Error("Unsupported grid precision. Use 3 or 4 figure references.")},Nd=e=>Td(e)===3?100:10,Al=(e,n)=>{if(e==null)return null;const r=String(e).trim();if(!r)return null;if(!/^\d+$/.test(r))throw new Error("Grid references must contain digits only.");if(r.length!==n)throw new Error(`Expected ${n} digits for this precision setting.`);return parseInt(r,10)},ev=({lat:e,lng:n},r,l)=>{const d=jl(e),f=e+l/Va*(180/Math.PI),_=n+r/(Va*Math.cos(d))*180/Math.PI;return{lat:f,lng:_}},tv=({origin:e,bearingDegrees:n,distanceMeters:r})=>{if(!e)throw new Error("Provide a valid origin location first.");if(n==null||Number.isNaN(n))throw new Error("Bearing must be a number.");if(r==null||Number.isNaN(r)||r<0)throw new Error("Distance must be a non-negative number.");const l=r/Va,d=jl(n),f=jl(e.lat),_=jl(e.lng),x=Math.sin(f),C=Math.cos(f),v=Math.sin(l),S=Math.cos(l),I=Math.asin(x*S+C*v*Math.cos(d)),M=_+Math.atan2(Math.sin(d)*v*C,S-x*Math.sin(I));return{lat:y1(I),lng:Jy(y1(M))}},nv=({origin:e,originReference:n,targetReference:r,precision:l})=>{if(!e)throw new Error("Set a grid origin location first.");if(!n)throw new Error("Set a grid origin reference first.");const d=Td(l??n.precision??(r==null?void 0:r.precision)??3),f=Al(n.easting,d),_=Al(n.northing,d),x=Al(r.easting,d),C=Al(r.northing,d),v=Nd(d),S=(x-f)*v,I=(C-_)*v;return ev(e,S,I)},iv=({origin:e,originReference:n,point:r,precision:l})=>{if(!e||!n)throw new Error("Grid origin must be configured.");const d=Td(l??n.precision??3),f=Nd(d),_=e.lat*Math.PI/180,x=(r.lat-e.lat)*Math.PI*Va/180,C=(r.lng-e.lng)*Math.PI*Va*Math.cos(_)/180,v=Math.round(n.easting+C/f),S=Math.round(n.northing+x/f),I=M=>M.toString().padStart(d,"0");return{easting:I(v),northing:I(S),precision:d}},xl=e=>e!=null?e.toFixed(6):"",rv=e=>e==null||Number.isNaN(e)?"":e>=1e3?`${(e/1e3).toFixed(2)} km`:e>=10?`${e.toFixed(0)} m`:`${e.toFixed(1)} m`,xc=({show:e,onToggle:n})=>b.jsx("button",{type:"button",onClick:n,className:`flex h-5 w-5 items-center justify-center rounded-full border text-[10px] font-bold transition ${e?"border-sky-500 bg-sky-500 text-slate-900":"border-slate-600 text-slate-400 hover:border-sky-500 hover:text-sky-200"}`,"aria-label":"Toggle help",children:"?"}),sv=({userLocation:e,selectedPosition:n,onPreviewLocationChange:r})=>{const{origin:l,originReference:d,precision:f,setOrigin:_,setOriginReference:x,setPrecision:C,resetGrid:v}=$y(),{addCheckpoint:S}=Lo(),[I,M]=Q.useState(""),[F,z]=Q.useState(""),[U,ue]=Q.useState(""),[H,B]=Q.useState(""),[P,X]=Q.useState(null),[ae,se]=Q.useState(null),[$,J]=Q.useState(null),[V,W]=Q.useState("user"),[ee,oe]=Q.useState(""),[Z,te]=Q.useState("degrees"),[G,me]=Q.useState(""),[fe,ne]=Q.useState(null),[pe,he]=Q.useState(null),[Ce,be]=Q.useState("origin"),[Ve,ve]=Q.useState(!1);Q.useEffect(()=>{var Pe,We;d&&(M(((Pe=d.easting)==null?void 0:Pe.toString().padStart(f,"0"))??""),z(((We=d.northing)==null?void 0:We.toString().padStart(f,"0"))??""))},[d,f]);const Re=Q.useMemo(()=>{if(!l||!d)return null;try{const Pe=iv({origin:l,originReference:d,point:l,precision:f});return`${Pe.easting} / ${Pe.northing}`}catch(Pe){return console.warn(Pe),null}},[l,d,f]),ge=Q.useMemo(()=>{if(!ee)return null;const Pe=Number(ee);return Number.isNaN(Pe)?null:Z==="mils"?Pe*360/6400:Pe},[ee,Z]),nt=Q.useMemo(()=>ge==null?null:ge*6400/360,[ge]),Be=(pe==null?void 0:pe.bearingDegrees)??null,Mt=Be!=null?Be*6400/360:null,xn=()=>{let Pe=e;if(!Pe)if(n)Pe=n;else{J("Waiting for GPS location (or select a point on the map).");return}const We=I.trim(),Ye=F.trim();if(!We||!Ye){J("Enter grid reference digits.");return}if(We.length!==Ye.length){J("Easting and Northing must have same number of digits.");return}let Kt=3;if(We.length===3)Kt=3;else if(We.length===4)Kt=4;else{J("Grid ref must be 3 or 4 digits (e.g. 123 456).");return}try{const Te=Number(We),Pt=Number(Ye);if(Number.isNaN(Te)||Number.isNaN(Pt))throw new Error("Grid reference must be numbers.");_(Pe),x({easting:Te,northing:Pt,precision:Kt}),C(Kt),J(null),X(`Grid calibrated to ${Kt}-figure reference.`)}catch(Te){J(Te.message)}},xt=()=>{if(V==="user"){if(!e)throw new Error("No user location fix yet.");return e}if(V==="selected"){if(!n)throw new Error("Select a marker on the map to use as the origin.");return n}throw new Error("Select a valid start point.")},yt=()=>{try{if(!ee)throw new Error("Enter a bearing value.");if(!G)throw new Error("Enter a distance in meters.");const Pe=xt(),We=Number(ee),Ye=Number(G);if(Number.isNaN(We))throw new Error("Bearing must be a number.");if(Number.isNaN(Ye)||Ye<0)throw new Error("Distance must be zero or greater.");const Te=((Z==="mils"?We*360/6400:We)%360+360)%360,Pt=tv({origin:Pe,bearingDegrees:Te,distanceMeters:Ye});ne(Pt),he({bearingDegrees:Te,bearingInput:We,bearingUnit:Z,distanceMeters:Ye,origin:Pe}),X("Projected point from bearing and distance."),J(null)}catch(Pe){ne(null),he(null),J(Pe.message??"Unable to project bearing.")}},Ke=()=>{if(!U||!H){J("Enter both easting and northing for the grid reference.");return}try{const Pe=nv({origin:l,originReference:d,targetReference:{easting:U,northing:H,precision:f},precision:f});se(Pe),X("Grid reference resolved."),J(null)}catch(Pe){se(null),J(Pe.message)}},Sn=(Pe=ae,We="grid reference")=>{if(!Pe){J(`Resolve a ${We} first.`);return}S(Pe),X(`Checkpoint added from ${We}.`),J(null)},Yt=()=>{v(),M(""),z(""),ue(""),B(""),se(null),W("user"),oe(""),te("degrees"),me(""),ne(null),he(null),X("Grid settings cleared."),J(null)},On=Nd(f);return Q.useEffect(()=>{r&&r(Ce==="convert"&&ae?{position:ae,source:l}:Ce==="project"&&fe?{position:fe,source:(pe==null?void 0:pe.origin)??null}:null)},[Ce,ae,fe,pe,l,r]),b.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl bg-slate-900 p-4 text-xs text-slate-200 shadow-lg shadow-slate-950",children:[b.jsxs("div",{className:"flex items-center justify-between gap-2",children:[b.jsx("h2",{className:"text-base font-semibold text-sky-200",children:"Grid Tools"}),b.jsx("div",{className:"flex gap-1",children:b.jsxs("span",{className:"rounded-full border border-slate-700 px-2 py-1 text-[10px] font-semibold text-slate-400",children:[f,"-fig mode"]})})]}),b.jsxs("div",{className:"flex gap-1 rounded-lg border border-slate-800 bg-slate-950 p-1",children:[b.jsx("button",{type:"button",onClick:()=>be("origin"),className:`flex-1 rounded-md py-1.5 text-[11px] font-semibold transition ${Ce==="origin"?"bg-slate-800 text-sky-200 shadow-sm":"text-slate-400 hover:bg-slate-900 hover:text-slate-200"}`,children:"Origin"}),b.jsx("button",{type:"button",onClick:()=>be("convert"),className:`flex-1 rounded-md py-1.5 text-[11px] font-semibold transition ${Ce==="convert"?"bg-slate-800 text-sky-200 shadow-sm":"text-slate-400 hover:bg-slate-900 hover:text-slate-200"}`,children:"Convert"}),b.jsx("button",{type:"button",onClick:()=>be("project"),className:`flex-1 rounded-md py-1.5 text-[11px] font-semibold transition ${Ce==="project"?"bg-slate-800 text-sky-200 shadow-sm":"text-slate-400 hover:bg-slate-900 hover:text-slate-200"}`,children:"Project"})]}),Ce==="origin"&&b.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950 p-3",children:[b.jsxs("div",{className:"mb-3 flex items-start justify-between gap-2",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide text-sky-300",children:"Calibrate Grid Origin"}),b.jsx("p",{className:"mt-1 text-[11px] text-slate-400",children:"Sync your current location to a grid reference."})]}),b.jsx(xc,{show:Ve,onToggle:()=>ve(!Ve)})]}),Ve&&b.jsxs("div",{className:"mb-4 rounded-lg bg-slate-900 p-2 text-[11px] text-slate-300",children:[b.jsx("p",{className:"mb-1 font-semibold text-sky-200",children:"How to calibrate:"}),b.jsx("p",{className:"text-slate-400",children:"Enter the Grid Reference for your current location (e.g. from a paper map) and tap 'Set Origin'. The app will link your GPS position to that grid reference."}),b.jsx("p",{className:"mt-2 text-slate-500 italic",children:"Note: If GPS is unavailable, select a point on the map first."})]}),b.jsxs("div",{className:"flex flex-col gap-3",children:[b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[b.jsxs("label",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Easting"}),b.jsx("input",{value:I,onChange:Pe=>M(Pe.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. 123"})]}),b.jsxs("label",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Northing"}),b.jsx("input",{value:F,onChange:Pe=>z(Pe.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. 456"})]})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{type:"button",className:"flex-1 rounded-md border border-sky-500 bg-sky-500/10 px-3 py-2 font-semibold text-sky-200 hover:bg-sky-500/20",onClick:xn,children:"Set Origin"}),b.jsx("button",{type:"button",className:"rounded-md border border-slate-700 px-3 py-2 font-semibold text-slate-300 hover:border-rose-500 hover:text-rose-200",onClick:Yt,children:"Clear"})]}),b.jsx("div",{className:"mt-1 text-center text-[11px]",children:Re?b.jsxs("span",{className:"text-emerald-400",children:["Active: ",Re," (",f,"-fig)"]}):b.jsx("span",{className:"text-slate-500",children:"Origin not set"})})]})]}),Ce==="convert"&&b.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950 p-3",children:[b.jsxs("div",{className:"mb-3 flex items-start justify-between gap-2",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide text-sky-300",children:"Convert Grid Ref"}),b.jsx("p",{className:"mt-1 text-[11px] text-slate-400",children:"Enter a grid reference to find its location on the map relative to your origin."})]}),b.jsx(xc,{show:Ve,onToggle:()=>ve(!Ve)})]}),Ve&&b.jsxs("div",{className:"mb-4 rounded-lg bg-slate-900 p-2 text-[11px] text-slate-300",children:[b.jsx("p",{className:"mb-1 font-semibold text-sky-200",children:"How to convert:"}),b.jsx("p",{className:"text-slate-400",children:'Once you have calibrated the origin, you can enter any other grid reference here. The app will calculate the offset from the origin, show you where that point lands, and the "Add checkpoint" button will drop it into your active route.'})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[b.jsxs("label",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Easting"}),b.jsx("input",{value:U,onChange:Pe=>ue(Pe.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. ".concat("2".repeat(f))})]}),b.jsxs("label",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Northing"}),b.jsx("input",{value:H,onChange:Pe=>B(Pe.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. ".concat("3".repeat(f))})]})]}),b.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[b.jsx("button",{type:"button",className:"rounded-md border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-900",onClick:Ke,children:"Preview location"}),b.jsxs("span",{className:"text-[11px] text-slate-400",children:["1 digit = ",On," m offset"]})]}),ae&&b.jsxs("div",{className:"mt-3 rounded-md border border-slate-800 bg-slate-900 p-3 text-[11px] text-slate-200",children:[b.jsx("p",{className:"font-semibold text-sky-200",children:"Resolved coordinates"}),b.jsxs("p",{className:"mt-1 text-slate-300",children:["Lat ",xl(ae.lat)," | Lng ",xl(ae.lng)]}),b.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:b.jsx("button",{type:"button",className:"rounded-md border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-900",onClick:()=>Sn(ae,"grid reference"),children:"Add checkpoint"})})]})]}),Ce==="project"&&b.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950 p-3",children:[b.jsxs("div",{className:"mb-3 flex items-start justify-between gap-2",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide text-sky-300",children:"Project by bearing"}),b.jsx("p",{className:"mt-1 text-[11px] text-slate-400",children:"Calculate a new point by moving a specific distance and bearing from a starting point."})]}),b.jsx(xc,{show:Ve,onToggle:()=>ve(!Ve)})]}),Ve&&b.jsxs("div",{className:"mb-4 rounded-lg bg-slate-900 p-2 text-[11px] text-slate-300",children:[b.jsx("p",{className:"mb-1 font-semibold text-sky-200",children:"How to project:"}),b.jsxs("ol",{className:"list-decimal space-y-1 pl-4 text-slate-400",children:[b.jsx("li",{children:"Choose a start point (your current GPS fix or a checkpoint you selected on the map)."}),b.jsx("li",{children:"Enter the bearing (direction) and distance to travel."}),b.jsx("li",{children:"Click 'Project location' to see the destination on the map, then use 'Add checkpoint' to store it in the active route."})]})]}),b.jsxs("div",{className:"mb-3",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Start Point"}),b.jsxs("div",{className:"mt-1 flex gap-2",children:[b.jsx("button",{type:"button",onClick:()=>W("user"),className:`flex-1 rounded-md border py-2 text-[11px] font-semibold transition ${V==="user"?"border-sky-500 bg-sky-500/10 text-sky-200":"border-slate-700 text-slate-400 hover:border-slate-500 hover:text-slate-200"}`,children:"My Location"}),b.jsx("button",{type:"button",onClick:()=>W("selected"),className:`flex-1 rounded-md border py-2 text-[11px] font-semibold transition ${V==="selected"?"border-sky-500 bg-sky-500/10 text-sky-200":"border-slate-700 text-slate-400 hover:border-slate-500 hover:text-slate-200"}`,children:"Selected Marker"})]}),!e&&V==="user"&&b.jsx("p",{className:"mt-1 text-[10px] text-rose-400",children:"Waiting for GPS fix..."}),!n&&V==="selected"&&b.jsx("p",{className:"mt-1 text-[10px] text-rose-400",children:"No marker selected on map."})]}),b.jsxs("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:[b.jsxs("label",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Bearing"}),b.jsx("input",{value:ee,onChange:Pe=>oe(Pe.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:Z==="degrees"?"0  360":"0  6400 mil"})]}),b.jsxs("div",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Units"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{type:"button",className:`flex-1 rounded-md px-2 py-1 text-[11px] font-semibold ${Z==="degrees"?"border border-sky-500 text-sky-200":"border border-slate-700 text-slate-200 hover:border-sky-500 hover:text-sky-200"}`,onClick:()=>te("degrees"),children:"Degrees"}),b.jsx("button",{type:"button",className:`flex-1 rounded-md px-2 py-1 text-[11px] font-semibold ${Z==="mils"?"border border-sky-500 text-sky-200":"border border-slate-700 text-slate-200 hover:border-sky-500 hover:text-sky-200"}`,onClick:()=>te("mils"),children:"Mils"})]})]})]}),b.jsxs("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:[b.jsxs("label",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Distance (m)"}),b.jsx("input",{value:G,onChange:Pe=>me(Pe.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. 250"})]}),b.jsx("div",{className:"flex flex-col justify-end text-[11px] text-slate-400",children:b.jsx("span",{children:ge!=null?` ${ge.toFixed(1)} / ${(nt==null?void 0:nt.toFixed(0))??""} mil`:"Enter a bearing to preview conversions."})})]}),b.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[b.jsx("button",{type:"button",className:"rounded-md border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-900",onClick:yt,children:"Project location"}),b.jsx("span",{className:"text-[11px] text-slate-400",children:"Distance measured in straight line"})]}),fe&&b.jsxs("div",{className:"mt-3 rounded-md border border-slate-800 bg-slate-900 p-3 text-[11px] text-slate-200",children:[b.jsx("p",{className:"font-semibold text-sky-200",children:"Projected coordinates"}),b.jsxs("p",{className:"mt-1 text-slate-300",children:["Lat ",xl(fe.lat)," | Lng ",xl(fe.lng)]}),b.jsxs("p",{className:"text-slate-400",children:["Bearing used:"," ",Be!=null?`${Be.toFixed(1)}${Mt!=null?` (${Mt.toFixed(0)} mil)`:""}`:""]}),(pe==null?void 0:pe.distanceMeters)!=null&&b.jsxs("p",{className:"text-slate-400",children:["Distance: ",rv(pe.distanceMeters)]}),b.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:b.jsx("button",{type:"button",className:"rounded-md border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-900",onClick:()=>Sn(fe,"bearing projection"),children:"Add checkpoint"})})]})]}),($||P)&&b.jsxs("div",{className:"rounded-md border border-slate-800 bg-slate-950 p-3 text-[11px]",children:[$&&b.jsx("p",{className:"text-rose-400",children:$}),P&&b.jsx("p",{className:"text-emerald-300",children:P})]}),b.jsx("button",{type:"button",className:"rounded-md border border-slate-700 px-3 py-1 text-[11px] font-semibold text-slate-300 hover:border-rose-500 hover:text-rose-200",onClick:Yt,children:"Clear grid settings"})]})},ov=({type:e,color:n})=>{const r=Q.useRef(null),l=_=>{_.dataTransfer.setData("application/x-cadet-map-item",e),_.dataTransfer.effectAllowed="copy",r.current&&_.dataTransfer.setDragImage(r.current,10,20)},d={borderColor:n,backgroundColor:`${n}33`},f={backgroundColor:n};return b.jsxs(b.Fragment,{children:[b.jsx("div",{draggable:!0,onDragStart:l,className:"flex h-16 w-16 cursor-grab items-center justify-center rounded-full border-2 shadow-lg backdrop-blur-sm transition hover:scale-110 active:cursor-grabbing active:scale-95 touch-none",style:d,children:b.jsx("div",{className:"h-4 w-4 rounded-full",style:f})}),b.jsx("div",{ref:r,className:"absolute -top-[1000px] left-0 h-5 w-5 rounded-full border-2",style:d})]})},av=()=>{const{routes:e,activeRouteId:n}=Lo(),r=e.find(d=>d.id===n)||e[0],l=(r==null?void 0:r.color)||"#38bdf8";return b.jsx("div",{className:"pointer-events-auto flex gap-6 p-4",children:b.jsx(ov,{type:"checkpoint",color:l})})};var lv=Object.defineProperty,gu=Object.getOwnPropertySymbols,Eg=Object.prototype.hasOwnProperty,Ag=Object.prototype.propertyIsEnumerable,v1=(e,n,r)=>n in e?lv(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,Ih=(e,n)=>{for(var r in n||(n={}))Eg.call(n,r)&&v1(e,r,n[r]);if(gu)for(var r of gu(n))Ag.call(n,r)&&v1(e,r,n[r]);return e},Th=(e,n)=>{var r={};for(var l in e)Eg.call(e,l)&&n.indexOf(l)<0&&(r[l]=e[l]);if(e!=null&&gu)for(var l of gu(e))n.indexOf(l)<0&&Ag.call(e,l)&&(r[l]=e[l]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var zs;(e=>{const n=class ut{constructor(C,v,S,I){if(this.version=C,this.errorCorrectionLevel=v,this.modules=[],this.isFunction=[],C<ut.MIN_VERSION||C>ut.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=C*4+17;let M=[];for(let z=0;z<this.size;z++)M.push(!1);for(let z=0;z<this.size;z++)this.modules.push(M.slice()),this.isFunction.push(M.slice());this.drawFunctionPatterns();const F=this.addEccAndInterleave(S);if(this.drawCodewords(F),I==-1){let z=1e9;for(let U=0;U<8;U++){this.applyMask(U),this.drawFormatBits(U);const ue=this.getPenaltyScore();ue<z&&(I=U,z=ue),this.applyMask(U)}}d(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(C,v){const S=e.QrSegment.makeSegments(C);return ut.encodeSegments(S,v)}static encodeBinary(C,v){const S=e.QrSegment.makeBytes(C);return ut.encodeSegments([S],v)}static encodeSegments(C,v,S=1,I=40,M=-1,F=!0){if(!(ut.MIN_VERSION<=S&&S<=I&&I<=ut.MAX_VERSION)||M<-1||M>7)throw new RangeError("Invalid value");let z,U;for(z=S;;z++){const P=ut.getNumDataCodewords(z,v)*8,X=_.getTotalBits(C,z);if(X<=P){U=X;break}if(z>=I)throw new RangeError("Data too long")}for(const P of[ut.Ecc.MEDIUM,ut.Ecc.QUARTILE,ut.Ecc.HIGH])F&&U<=ut.getNumDataCodewords(z,P)*8&&(v=P);let ue=[];for(const P of C){r(P.mode.modeBits,4,ue),r(P.numChars,P.mode.numCharCountBits(z),ue);for(const X of P.getData())ue.push(X)}d(ue.length==U);const H=ut.getNumDataCodewords(z,v)*8;d(ue.length<=H),r(0,Math.min(4,H-ue.length),ue),r(0,(8-ue.length%8)%8,ue),d(ue.length%8==0);for(let P=236;ue.length<H;P^=253)r(P,8,ue);let B=[];for(;B.length*8<ue.length;)B.push(0);return ue.forEach((P,X)=>B[X>>>3]|=P<<7-(X&7)),new ut(z,v,B,M)}getModule(C,v){return 0<=C&&C<this.size&&0<=v&&v<this.size&&this.modules[v][C]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const C=this.getAlignmentPatternPositions(),v=C.length;for(let S=0;S<v;S++)for(let I=0;I<v;I++)S==0&&I==0||S==0&&I==v-1||S==v-1&&I==0||this.drawAlignmentPattern(C[S],C[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(C){const v=this.errorCorrectionLevel.formatBits<<3|C;let S=v;for(let M=0;M<10;M++)S=S<<1^(S>>>9)*1335;const I=(v<<10|S)^21522;d(I>>>15==0);for(let M=0;M<=5;M++)this.setFunctionModule(8,M,l(I,M));this.setFunctionModule(8,7,l(I,6)),this.setFunctionModule(8,8,l(I,7)),this.setFunctionModule(7,8,l(I,8));for(let M=9;M<15;M++)this.setFunctionModule(14-M,8,l(I,M));for(let M=0;M<8;M++)this.setFunctionModule(this.size-1-M,8,l(I,M));for(let M=8;M<15;M++)this.setFunctionModule(8,this.size-15+M,l(I,M));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let C=this.version;for(let S=0;S<12;S++)C=C<<1^(C>>>11)*7973;const v=this.version<<12|C;d(v>>>18==0);for(let S=0;S<18;S++){const I=l(v,S),M=this.size-11+S%3,F=Math.floor(S/3);this.setFunctionModule(M,F,I),this.setFunctionModule(F,M,I)}}drawFinderPattern(C,v){for(let S=-4;S<=4;S++)for(let I=-4;I<=4;I++){const M=Math.max(Math.abs(I),Math.abs(S)),F=C+I,z=v+S;0<=F&&F<this.size&&0<=z&&z<this.size&&this.setFunctionModule(F,z,M!=2&&M!=4)}}drawAlignmentPattern(C,v){for(let S=-2;S<=2;S++)for(let I=-2;I<=2;I++)this.setFunctionModule(C+I,v+S,Math.max(Math.abs(I),Math.abs(S))!=1)}setFunctionModule(C,v,S){this.modules[v][C]=S,this.isFunction[v][C]=!0}addEccAndInterleave(C){const v=this.version,S=this.errorCorrectionLevel;if(C.length!=ut.getNumDataCodewords(v,S))throw new RangeError("Invalid argument");const I=ut.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][v],M=ut.ECC_CODEWORDS_PER_BLOCK[S.ordinal][v],F=Math.floor(ut.getNumRawDataModules(v)/8),z=I-F%I,U=Math.floor(F/I);let ue=[];const H=ut.reedSolomonComputeDivisor(M);for(let P=0,X=0;P<I;P++){let ae=C.slice(X,X+U-M+(P<z?0:1));X+=ae.length;const se=ut.reedSolomonComputeRemainder(ae,H);P<z&&ae.push(0),ue.push(ae.concat(se))}let B=[];for(let P=0;P<ue[0].length;P++)ue.forEach((X,ae)=>{(P!=U-M||ae>=z)&&B.push(X[P])});return d(B.length==F),B}drawCodewords(C){if(C.length!=Math.floor(ut.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let v=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let I=0;I<this.size;I++)for(let M=0;M<2;M++){const F=S-M,U=(S+1&2)==0?this.size-1-I:I;!this.isFunction[U][F]&&v<C.length*8&&(this.modules[U][F]=l(C[v>>>3],7-(v&7)),v++)}}d(v==C.length*8)}applyMask(C){if(C<0||C>7)throw new RangeError("Mask value out of range");for(let v=0;v<this.size;v++)for(let S=0;S<this.size;S++){let I;switch(C){case 0:I=(S+v)%2==0;break;case 1:I=v%2==0;break;case 2:I=S%3==0;break;case 3:I=(S+v)%3==0;break;case 4:I=(Math.floor(S/3)+Math.floor(v/2))%2==0;break;case 5:I=S*v%2+S*v%3==0;break;case 6:I=(S*v%2+S*v%3)%2==0;break;case 7:I=((S+v)%2+S*v%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[v][S]&&I&&(this.modules[v][S]=!this.modules[v][S])}}getPenaltyScore(){let C=0;for(let M=0;M<this.size;M++){let F=!1,z=0,U=[0,0,0,0,0,0,0];for(let ue=0;ue<this.size;ue++)this.modules[M][ue]==F?(z++,z==5?C+=ut.PENALTY_N1:z>5&&C++):(this.finderPenaltyAddHistory(z,U),F||(C+=this.finderPenaltyCountPatterns(U)*ut.PENALTY_N3),F=this.modules[M][ue],z=1);C+=this.finderPenaltyTerminateAndCount(F,z,U)*ut.PENALTY_N3}for(let M=0;M<this.size;M++){let F=!1,z=0,U=[0,0,0,0,0,0,0];for(let ue=0;ue<this.size;ue++)this.modules[ue][M]==F?(z++,z==5?C+=ut.PENALTY_N1:z>5&&C++):(this.finderPenaltyAddHistory(z,U),F||(C+=this.finderPenaltyCountPatterns(U)*ut.PENALTY_N3),F=this.modules[ue][M],z=1);C+=this.finderPenaltyTerminateAndCount(F,z,U)*ut.PENALTY_N3}for(let M=0;M<this.size-1;M++)for(let F=0;F<this.size-1;F++){const z=this.modules[M][F];z==this.modules[M][F+1]&&z==this.modules[M+1][F]&&z==this.modules[M+1][F+1]&&(C+=ut.PENALTY_N2)}let v=0;for(const M of this.modules)v=M.reduce((F,z)=>F+(z?1:0),v);const S=this.size*this.size,I=Math.ceil(Math.abs(v*20-S*10)/S)-1;return d(0<=I&&I<=9),C+=I*ut.PENALTY_N4,d(0<=C&&C<=2568888),C}getAlignmentPatternPositions(){if(this.version==1)return[];{const C=Math.floor(this.version/7)+2,v=this.version==32?26:Math.ceil((this.version*4+4)/(C*2-2))*2;let S=[6];for(let I=this.size-7;S.length<C;I-=v)S.splice(1,0,I);return S}}static getNumRawDataModules(C){if(C<ut.MIN_VERSION||C>ut.MAX_VERSION)throw new RangeError("Version number out of range");let v=(16*C+128)*C+64;if(C>=2){const S=Math.floor(C/7)+2;v-=(25*S-10)*S-55,C>=7&&(v-=36)}return d(208<=v&&v<=29648),v}static getNumDataCodewords(C,v){return Math.floor(ut.getNumRawDataModules(C)/8)-ut.ECC_CODEWORDS_PER_BLOCK[v.ordinal][C]*ut.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][C]}static reedSolomonComputeDivisor(C){if(C<1||C>255)throw new RangeError("Degree out of range");let v=[];for(let I=0;I<C-1;I++)v.push(0);v.push(1);let S=1;for(let I=0;I<C;I++){for(let M=0;M<v.length;M++)v[M]=ut.reedSolomonMultiply(v[M],S),M+1<v.length&&(v[M]^=v[M+1]);S=ut.reedSolomonMultiply(S,2)}return v}static reedSolomonComputeRemainder(C,v){let S=v.map(I=>0);for(const I of C){const M=I^S.shift();S.push(0),v.forEach((F,z)=>S[z]^=ut.reedSolomonMultiply(F,M))}return S}static reedSolomonMultiply(C,v){if(C>>>8||v>>>8)throw new RangeError("Byte out of range");let S=0;for(let I=7;I>=0;I--)S=S<<1^(S>>>7)*285,S^=(v>>>I&1)*C;return d(S>>>8==0),S}finderPenaltyCountPatterns(C){const v=C[1];d(v<=this.size*3);const S=v>0&&C[2]==v&&C[3]==v*3&&C[4]==v&&C[5]==v;return(S&&C[0]>=v*4&&C[6]>=v?1:0)+(S&&C[6]>=v*4&&C[0]>=v?1:0)}finderPenaltyTerminateAndCount(C,v,S){return C&&(this.finderPenaltyAddHistory(v,S),v=0),v+=this.size,this.finderPenaltyAddHistory(v,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(C,v){v[0]==0&&(C+=this.size),v.pop(),v.unshift(C)}};n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=n;function r(x,C,v){if(C<0||C>31||x>>>C)throw new RangeError("Value out of range");for(let S=C-1;S>=0;S--)v.push(x>>>S&1)}function l(x,C){return(x>>>C&1)!=0}function d(x){if(!x)throw new Error("Assertion error")}const f=class tn{constructor(C,v,S){if(this.mode=C,this.numChars=v,this.bitData=S,v<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(C){let v=[];for(const S of C)r(S,8,v);return new tn(tn.Mode.BYTE,C.length,v)}static makeNumeric(C){if(!tn.isNumeric(C))throw new RangeError("String contains non-numeric characters");let v=[];for(let S=0;S<C.length;){const I=Math.min(C.length-S,3);r(parseInt(C.substring(S,S+I),10),I*3+1,v),S+=I}return new tn(tn.Mode.NUMERIC,C.length,v)}static makeAlphanumeric(C){if(!tn.isAlphanumeric(C))throw new RangeError("String contains unencodable characters in alphanumeric mode");let v=[],S;for(S=0;S+2<=C.length;S+=2){let I=tn.ALPHANUMERIC_CHARSET.indexOf(C.charAt(S))*45;I+=tn.ALPHANUMERIC_CHARSET.indexOf(C.charAt(S+1)),r(I,11,v)}return S<C.length&&r(tn.ALPHANUMERIC_CHARSET.indexOf(C.charAt(S)),6,v),new tn(tn.Mode.ALPHANUMERIC,C.length,v)}static makeSegments(C){return C==""?[]:tn.isNumeric(C)?[tn.makeNumeric(C)]:tn.isAlphanumeric(C)?[tn.makeAlphanumeric(C)]:[tn.makeBytes(tn.toUtf8ByteArray(C))]}static makeEci(C){let v=[];if(C<0)throw new RangeError("ECI assignment value out of range");if(C<128)r(C,8,v);else if(C<16384)r(2,2,v),r(C,14,v);else if(C<1e6)r(6,3,v),r(C,21,v);else throw new RangeError("ECI assignment value out of range");return new tn(tn.Mode.ECI,0,v)}static isNumeric(C){return tn.NUMERIC_REGEX.test(C)}static isAlphanumeric(C){return tn.ALPHANUMERIC_REGEX.test(C)}getData(){return this.bitData.slice()}static getTotalBits(C,v){let S=0;for(const I of C){const M=I.mode.numCharCountBits(v);if(I.numChars>=1<<M)return 1/0;S+=4+M+I.bitData.length}return S}static toUtf8ByteArray(C){C=encodeURI(C);let v=[];for(let S=0;S<C.length;S++)C.charAt(S)!="%"?v.push(C.charCodeAt(S)):(v.push(parseInt(C.substring(S+1,S+3),16)),S+=2);return v}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let _=f;e.QrSegment=f})(zs||(zs={}));(e=>{(n=>{const r=class{constructor(d,f){this.ordinal=d,this.formatBits=f}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),n.Ecc=r})(e.QrCode||(e.QrCode={}))})(zs||(zs={}));(e=>{(n=>{const r=class{constructor(d,f){this.modeBits=d,this.numBitsCharCount=f}numCharCountBits(d){return this.numBitsCharCount[Math.floor((d+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),n.Mode=r})(e.QrSegment||(e.QrSegment={}))})(zs||(zs={}));var fo=zs;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var uv={L:fo.QrCode.Ecc.LOW,M:fo.QrCode.Ecc.MEDIUM,Q:fo.QrCode.Ecc.QUARTILE,H:fo.QrCode.Ecc.HIGH},xg=128,Sg="L",bg="#FFFFFF",Ig="#000000",Tg=!1,Ng=1,cv=4,hv=0,dv=.1;function Rg(e,n=0){const r=[];return e.forEach(function(l,d){let f=null;l.forEach(function(_,x){if(!_&&f!==null){r.push(`M${f+n} ${d+n}h${x-f}v1H${f+n}z`),f=null;return}if(x===l.length-1){if(!_)return;f===null?r.push(`M${x+n},${d+n} h1v1H${x+n}z`):r.push(`M${f+n},${d+n} h${x+1-f}v1H${f+n}z`);return}_&&f===null&&(f=x)})}),r.join("")}function Og(e,n){return e.slice().map((r,l)=>l<n.y||l>=n.y+n.h?r:r.map((d,f)=>f<n.x||f>=n.x+n.w?d:!1))}function fv(e,n,r,l){if(l==null)return null;const d=e.length+r*2,f=Math.floor(n*dv),_=d/n,x=(l.width||f)*_,C=(l.height||f)*_,v=l.x==null?e.length/2-x/2:l.x*_,S=l.y==null?e.length/2-C/2:l.y*_,I=l.opacity==null?1:l.opacity;let M=null;if(l.excavate){let z=Math.floor(v),U=Math.floor(S),ue=Math.ceil(x+v-z),H=Math.ceil(C+S-U);M={x:z,y:U,w:ue,h:H}}const F=l.crossOrigin;return{x:v,y:S,h:C,w:x,excavation:M,opacity:I,crossOrigin:F}}function pv(e,n){return n!=null?Math.max(Math.floor(n),0):e?cv:hv}function kg({value:e,level:n,minVersion:r,includeMargin:l,marginSize:d,imageSettings:f,size:_,boostLevel:x}){let C=Gt.useMemo(()=>{const z=(Array.isArray(e)?e:[e]).reduce((U,ue)=>(U.push(...fo.QrSegment.makeSegments(ue)),U),[]);return fo.QrCode.encodeSegments(z,uv[n],r,void 0,void 0,x)},[e,n,r,x]);const{cells:v,margin:S,numCells:I,calculatedImageSettings:M}=Gt.useMemo(()=>{let F=C.getModules();const z=pv(l,d),U=F.length+z*2,ue=fv(F,_,z,f);return{cells:F,margin:z,numCells:U,calculatedImageSettings:ue}},[C,_,f,l,d]);return{qrcode:C,margin:S,cells:v,numCells:I,calculatedImageSettings:M}}var gv=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),mv=Gt.forwardRef(function(n,r){const l=n,{value:d,size:f=xg,level:_=Sg,bgColor:x=bg,fgColor:C=Ig,includeMargin:v=Tg,minVersion:S=Ng,boostLevel:I,marginSize:M,imageSettings:F}=l,U=Th(l,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:ue}=U,H=Th(U,["style"]),B=F==null?void 0:F.src,P=Gt.useRef(null),X=Gt.useRef(null),ae=Gt.useCallback(te=>{P.current=te,typeof r=="function"?r(te):r&&(r.current=te)},[r]),[se,$]=Gt.useState(!1),{margin:J,cells:V,numCells:W,calculatedImageSettings:ee}=kg({value:d,level:_,minVersion:S,boostLevel:I,includeMargin:v,marginSize:M,imageSettings:F,size:f});Gt.useEffect(()=>{if(P.current!=null){const te=P.current,G=te.getContext("2d");if(!G)return;let me=V;const fe=X.current,ne=ee!=null&&fe!==null&&fe.complete&&fe.naturalHeight!==0&&fe.naturalWidth!==0;ne&&ee.excavation!=null&&(me=Og(V,ee.excavation));const pe=window.devicePixelRatio||1;te.height=te.width=f*pe;const he=f/W*pe;G.scale(he,he),G.fillStyle=x,G.fillRect(0,0,W,W),G.fillStyle=C,gv?G.fill(new Path2D(Rg(me,J))):V.forEach(function(Ce,be){Ce.forEach(function(Ve,ve){Ve&&G.fillRect(ve+J,be+J,1,1)})}),ee&&(G.globalAlpha=ee.opacity),ne&&G.drawImage(fe,ee.x+J,ee.y+J,ee.w,ee.h)}}),Gt.useEffect(()=>{$(!1)},[B]);const oe=Ih({height:f,width:f},ue);let Z=null;return B!=null&&(Z=Gt.createElement("img",{src:B,key:B,style:{display:"none"},onLoad:()=>{$(!0)},ref:X,crossOrigin:ee==null?void 0:ee.crossOrigin})),Gt.createElement(Gt.Fragment,null,Gt.createElement("canvas",Ih({style:oe,height:f,width:f,ref:ae,role:"img"},H)),Z)});mv.displayName="QRCodeCanvas";var Mg=Gt.forwardRef(function(n,r){const l=n,{value:d,size:f=xg,level:_=Sg,bgColor:x=bg,fgColor:C=Ig,includeMargin:v=Tg,minVersion:S=Ng,boostLevel:I,title:M,marginSize:F,imageSettings:z}=l,U=Th(l,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:ue,cells:H,numCells:B,calculatedImageSettings:P}=kg({value:d,level:_,minVersion:S,boostLevel:I,includeMargin:v,marginSize:F,imageSettings:z,size:f});let X=H,ae=null;z!=null&&P!=null&&(P.excavation!=null&&(X=Og(H,P.excavation)),ae=Gt.createElement("image",{href:z.src,height:P.h,width:P.w,x:P.x+ue,y:P.y+ue,preserveAspectRatio:"none",opacity:P.opacity,crossOrigin:P.crossOrigin}));const se=Rg(X,ue);return Gt.createElement("svg",Ih({height:f,width:f,viewBox:`0 0 ${B} ${B}`,ref:r,role:"img"},U),!!M&&Gt.createElement("title",null,M),Gt.createElement("path",{fill:x,d:`M0,0 h${B}v${B}H0z`,shapeRendering:"crispEdges"}),Gt.createElement("path",{fill:C,d:se,shapeRendering:"crispEdges"}),ae)});Mg.displayName="QRCodeSVG";var je;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(je||(je={}));var w1=new Map([[je.QR_CODE,"QR_CODE"],[je.AZTEC,"AZTEC"],[je.CODABAR,"CODABAR"],[je.CODE_39,"CODE_39"],[je.CODE_93,"CODE_93"],[je.CODE_128,"CODE_128"],[je.DATA_MATRIX,"DATA_MATRIX"],[je.MAXICODE,"MAXICODE"],[je.ITF,"ITF"],[je.EAN_13,"EAN_13"],[je.EAN_8,"EAN_8"],[je.PDF_417,"PDF_417"],[je.RSS_14,"RSS_14"],[je.RSS_EXPANDED,"RSS_EXPANDED"],[je.UPC_A,"UPC_A"],[je.UPC_E,"UPC_E"],[je.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),C1;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(C1||(C1={}));function _v(e){return Object.values(je).includes(e)}var mu;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(mu||(mu={}));var yv=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[mu.SCAN_TYPE_CAMERA,mu.SCAN_TYPE_FILE],e}(),Pg=function(){function e(n,r){this.format=n,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(n){if(!w1.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new e(n,w1.get(n))},e}(),E1=function(){function e(){}return e.createFromText=function(n){var r={text:n};return{decodedText:n,result:r}},e.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},e}(),Nh;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Nh||(Nh={}));var vv=function(){function e(){}return e.createFrom=function(n){return{errorMessage:n,type:Nh.UNKWOWN_ERROR}},e}(),wv=function(){function e(n){this.verbose=n}return e.prototype.log=function(n){this.verbose&&console.log(n)},e.prototype.warn=function(n){this.verbose&&console.warn(n)},e.prototype.logError=function(n,r){(this.verbose||r===!0)&&console.error(n)},e.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},e}();function Mr(e){return typeof e>"u"||e===null}var po=function(){function e(){}return e.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},e.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Lg=function(){function e(){}return e.isMediaStreamConstraintsValid=function(n,r){if(typeof n!="object"){var l=typeof n;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(l,"."),!0),!1}for(var d=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(d),_=Object.keys(n),x=0,C=_;x<C.length;x++){var v=C[x];if(f.has(v))return r.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},e}(),Rh={exports:{}};(function(e,n){(function(r,l){l(n)})(wu,function(r){function l(T){return T==null}var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,t){T.__proto__=t}||function(T,t){for(var i in t)t.hasOwnProperty(i)&&(T[i]=t[i])};function f(T,t){d(T,t);function i(){this.constructor=T}T.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function _(T,t){var i=Object.setPrototypeOf;i?i(T,t):T.__proto__=t}function x(T,t){t===void 0&&(t=T.constructor);var i=Error.captureStackTrace;i&&i(T,t)}var C=function(T){f(t,T);function t(i){var o=this.constructor,a=T.call(this,i)||this;return Object.defineProperty(a,"name",{value:o.name,enumerable:!1}),_(a,o.prototype),x(a),a}return t}(Error);class v extends C{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}v.kind="Exception";class S extends v{}S.kind="ArgumentException";class I extends v{}I.kind="IllegalArgumentException";class M{constructor(t){if(this.binarizer=t,t===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,i){return this.binarizer.getBlackRow(t,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,i,o,a){const u=this.binarizer.getLuminanceSource().crop(t,i,o,a);return new M(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new M(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new M(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class F extends v{static getChecksumInstance(){return new F}}F.kind="ChecksumException";class z{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class U{static arraycopy(t,i,o,a,u){for(;u--;)o[a++]=t[i++]}static currentTimeMillis(){return Date.now()}}class ue extends v{}ue.kind="IndexOutOfBoundsException";class H extends ue{constructor(t=void 0,i=void 0){super(i),this.index=t,this.message=i}}H.kind="ArrayIndexOutOfBoundsException";class B{static fill(t,i){for(let o=0,a=t.length;o<a;o++)t[o]=i}static fillWithin(t,i,o,a){B.rangeCheck(t.length,i,o);for(let u=i;u<o;u++)t[u]=a}static rangeCheck(t,i,o){if(i>o)throw new I("fromIndex("+i+") > toIndex("+o+")");if(i<0)throw new H(i);if(o>t)throw new H(o)}static asList(...t){return t}static create(t,i,o){return Array.from({length:t}).map(u=>Array.from({length:i}).fill(o))}static createInt32Array(t,i,o){return Array.from({length:t}).map(u=>Int32Array.from({length:i}).fill(o))}static equals(t,i){if(!t||!i||!t.length||!i.length||t.length!==i.length)return!1;for(let o=0,a=t.length;o<a;o++)if(t[o]!==i[o])return!1;return!0}static hashCode(t){if(t===null)return 0;let i=1;for(const o of t)i=31*i+o;return i}static fillUint8Array(t,i){for(let o=0;o!==t.length;o++)t[o]=i}static copyOf(t,i){return t.slice(0,i)}static copyOfUint8Array(t,i){if(t.length<=i){const o=new Uint8Array(i);return o.set(t),o}return t.slice(0,i)}static copyOfRange(t,i,o){const a=o-i,u=new Int32Array(a);return U.arraycopy(t,i,u,0,a),u}static binarySearch(t,i,o){o===void 0&&(o=B.numberComparator);let a=0,u=t.length-1;for(;a<=u;){const h=u+a>>1,p=o(i,t[h]);if(p>0)a=h+1;else if(p<0)u=h-1;else return h}return-a-1}static numberComparator(t,i){return t-i}}class P{static numberOfTrailingZeros(t){let i;if(t===0)return 32;let o=31;return i=t<<16,i!==0&&(o-=16,t=i),i=t<<8,i!==0&&(o-=8,t=i),i=t<<4,i!==0&&(o-=4,t=i),i=t<<2,i!==0&&(o-=2,t=i),o-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let i=1;return t>>>16||(i+=16,t<<=16),t>>>24||(i+=8,t<<=8),t>>>28||(i+=4,t<<=4),t>>>30||(i+=2,t<<=2),i-=t>>>31,i}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,i){return Math.trunc(t/i)}static parseInt(t,i=void 0){return parseInt(t,i)}}P.MIN_VALUE_32_BITS=-2147483648,P.MAX_VALUE=Number.MAX_SAFE_INTEGER;class X{constructor(t,i){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,i==null?this.bits=X.makeArray(t):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const i=X.makeArray(t);U.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const i=this.size;if(t>=i)return i;const o=this.bits;let a=Math.floor(t/32),u=o[a];u&=~((1<<(t&31))-1);const h=o.length;for(;u===0;){if(++a===h)return i;u=o[a]}const p=a*32+P.numberOfTrailingZeros(u);return p>i?i:p}getNextUnset(t){const i=this.size;if(t>=i)return i;const o=this.bits;let a=Math.floor(t/32),u=~o[a];u&=~((1<<(t&31))-1);const h=o.length;for(;u===0;){if(++a===h)return i;u=~o[a]}const p=a*32+P.numberOfTrailingZeros(u);return p>i?i:p}setBulk(t,i){this.bits[Math.floor(t/32)]=i}setRange(t,i){if(i<t||t<0||i>this.size)throw new I;if(i===t)return;i--;const o=Math.floor(t/32),a=Math.floor(i/32),u=this.bits;for(let h=o;h<=a;h++){const p=h>o?0:t&31,y=(2<<(h<a?31:i&31))-(1<<p);u[h]|=y}}clear(){const t=this.bits.length,i=this.bits;for(let o=0;o<t;o++)i[o]=0}isRange(t,i,o){if(i<t||t<0||i>this.size)throw new I;if(i===t)return!0;i--;const a=Math.floor(t/32),u=Math.floor(i/32),h=this.bits;for(let p=a;p<=u;p++){const m=p>a?0:t&31,E=(2<<(p<u?31:i&31))-(1<<m)&4294967295;if((h[p]&E)!==(o?E:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,i){if(i<0||i>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let o=i;o>0;o--)this.appendBit((t>>o-1&1)===1)}appendBitArray(t){const i=t.size;this.ensureCapacity(this.size+i);for(let o=0;o<i;o++)this.appendBit(t.get(o))}xor(t){if(this.size!==t.size)throw new I("Sizes don't match");const i=this.bits;for(let o=0,a=i.length;o<a;o++)i[o]^=t.bits[o]}toBytes(t,i,o,a){for(let u=0;u<a;u++){let h=0;for(let p=0;p<8;p++)this.get(t)&&(h|=1<<7-p),t++;i[o+u]=h}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),o=i+1,a=this.bits;for(let u=0;u<o;u++){let h=a[u];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,t[i-u]=h}if(this.size!==o*32){const u=o*32-this.size;let h=t[0]>>>u;for(let p=1;p<o;p++){const m=t[p];h|=m<<32-u,t[p-1]=h,h=m>>>u}t[o-1]=h}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof X))return!1;const i=t;return this.size===i.size&&B.equals(this.bits,i.bits)}hashCode(){return 31*this.size+B.hashCode(this.bits)}toString(){let t="";for(let i=0,o=this.size;i<o;i++)i&7||(t+=" "),t+=this.get(i)?"X":".";return t}clone(){return new X(this.size,this.bits.slice())}}var ae;(function(T){T[T.OTHER=0]="OTHER",T[T.PURE_BARCODE=1]="PURE_BARCODE",T[T.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",T[T.TRY_HARDER=3]="TRY_HARDER",T[T.CHARACTER_SET=4]="CHARACTER_SET",T[T.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",T[T.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",T[T.ASSUME_GS1=7]="ASSUME_GS1",T[T.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",T[T.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",T[T.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ae||(ae={}));var se=ae;class $ extends v{static getFormatInstance(){return new $}}$.kind="FormatException";var J;(function(T){T[T.Cp437=0]="Cp437",T[T.ISO8859_1=1]="ISO8859_1",T[T.ISO8859_2=2]="ISO8859_2",T[T.ISO8859_3=3]="ISO8859_3",T[T.ISO8859_4=4]="ISO8859_4",T[T.ISO8859_5=5]="ISO8859_5",T[T.ISO8859_6=6]="ISO8859_6",T[T.ISO8859_7=7]="ISO8859_7",T[T.ISO8859_8=8]="ISO8859_8",T[T.ISO8859_9=9]="ISO8859_9",T[T.ISO8859_10=10]="ISO8859_10",T[T.ISO8859_11=11]="ISO8859_11",T[T.ISO8859_13=12]="ISO8859_13",T[T.ISO8859_14=13]="ISO8859_14",T[T.ISO8859_15=14]="ISO8859_15",T[T.ISO8859_16=15]="ISO8859_16",T[T.SJIS=16]="SJIS",T[T.Cp1250=17]="Cp1250",T[T.Cp1251=18]="Cp1251",T[T.Cp1252=19]="Cp1252",T[T.Cp1256=20]="Cp1256",T[T.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",T[T.UTF8=22]="UTF8",T[T.ASCII=23]="ASCII",T[T.Big5=24]="Big5",T[T.GB18030=25]="GB18030",T[T.EUC_KR=26]="EUC_KR"})(J||(J={}));class V{constructor(t,i,o,...a){this.valueIdentifier=t,this.name=o,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=a,V.VALUE_IDENTIFIER_TO_ECI.set(t,this),V.NAME_TO_ECI.set(o,this);const u=this.values;for(let h=0,p=u.length;h!==p;h++){const m=u[h];V.VALUES_TO_ECI.set(m,this)}for(const h of a)V.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new $("incorect value");const i=V.VALUES_TO_ECI.get(t);if(i===void 0)throw new $("incorect value");return i}static getCharacterSetECIByName(t){const i=V.NAME_TO_ECI.get(t);if(i===void 0)throw new $("incorect value");return i}equals(t){if(!(t instanceof V))return!1;const i=t;return this.getName()===i.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(J.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(J.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(J.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(J.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(J.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(J.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(J.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(J.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(J.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(J.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(J.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(J.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(J.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(J.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(J.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(J.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(J.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(J.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(J.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(J.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(J.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(J.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(J.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(J.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(J.Big5,28,"Big5"),V.GB18030=new V(J.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(J.EUC_KR,30,"EUC_KR","EUC-KR");class W extends v{}W.kind="UnsupportedOperationException";class ee{static decode(t,i){const o=this.encodingName(i);return this.customDecoder?this.customDecoder(t,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(t,o):new TextDecoder(o).decode(t)}static shouldDecodeOnFallback(t){return!ee.isBrowser()&&t==="ISO-8859-1"}static encode(t,i){const o=this.encodingName(i);return this.customEncoder?this.customEncoder(t,o):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof V?t:V.getCharacterSetECIByName(t)}static decodeFallback(t,i){const o=this.encodingCharacterSet(i);if(ee.isDecodeFallbackSupported(o)){let a="";for(let u=0,h=t.length;u<h;u++){let p=t[u].toString(16);p.length<2&&(p="0"+p),a+="%"+p}return decodeURIComponent(a)}if(o.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new W(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(V.UTF8)||t.equals(V.ISO8859_1)||t.equals(V.ASCII)}static encodeFallback(t){const o=btoa(unescape(encodeURIComponent(t))).split(""),a=[];for(let u=0;u<o.length;u++)a.push(o[u].charCodeAt(0));return new Uint8Array(a)}}class oe{static castAsNonUtf8Char(t,i=null){const o=i?i.getName():this.ISO88591;return ee.decode(new Uint8Array([t]),o)}static guessEncoding(t,i){if(i!=null&&i.get(se.CHARACTER_SET)!==void 0)return i.get(se.CHARACTER_SET).toString();const o=t.length;let a=!0,u=!0,h=!0,p=0,m=0,y=0,E=0,N=0,O=0,j=0,K=0,q=0,ie=0,le=0;const Ae=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let xe=0;xe<o&&(a||u||h);xe++){const Ee=t[xe]&255;h&&(p>0?Ee&128?p--:h=!1:Ee&128&&(Ee&64?(p++,Ee&32?(p++,Ee&16?(p++,Ee&8?h=!1:E++):y++):m++):h=!1)),a&&(Ee>127&&Ee<160?a=!1:Ee>159&&(Ee<192||Ee===215||Ee===247)&&le++),u&&(N>0?Ee<64||Ee===127||Ee>252?u=!1:N--:Ee===128||Ee===160||Ee>239?u=!1:Ee>160&&Ee<224?(O++,K=0,j++,j>q&&(q=j)):Ee>127?(N++,j=0,K++,K>ie&&(ie=K)):(j=0,K=0))}return h&&p>0&&(h=!1),u&&N>0&&(u=!1),h&&(Ae||m+y+E>0)?oe.UTF8:u&&(oe.ASSUME_SHIFT_JIS||q>=3||ie>=3)?oe.SHIFT_JIS:a&&u?q===2&&O===2||le*10>=o?oe.SHIFT_JIS:oe.ISO88591:a?oe.ISO88591:u?oe.SHIFT_JIS:h?oe.UTF8:oe.PLATFORM_DEFAULT_ENCODING}static format(t,...i){let o=-1;function a(h,p,m,y,E,N){if(h==="%%")return"%";if(i[++o]===void 0)return;h=y?parseInt(y.substr(1)):void 0;let O=E?parseInt(E.substr(1)):void 0,j;switch(N){case"s":j=i[o];break;case"c":j=i[o][0];break;case"f":j=parseFloat(i[o]).toFixed(h);break;case"p":j=parseFloat(i[o]).toPrecision(h);break;case"e":j=parseFloat(i[o]).toExponential(h);break;case"x":j=parseInt(i[o]).toString(O||16);break;case"d":j=parseFloat(parseInt(i[o],O||10).toPrecision(h)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(O);let K=parseInt(m),q=m&&m[0]+""=="0"?"0":" ";for(;j.length<K;)j=p!==void 0?j+q:q+j;return j}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,a)}static getBytes(t,i){return ee.encode(t,i)}static getCharCode(t,i=0){return t.charCodeAt(i)}static getCharAt(t){return String.fromCharCode(t)}}oe.SHIFT_JIS=V.SJIS.getName(),oe.GB2312="GB2312",oe.ISO88591=V.ISO8859_1.getName(),oe.EUC_JP="EUC_JP",oe.UTF8=V.UTF8.getName(),oe.PLATFORM_DEFAULT_ENCODING=oe.UTF8,oe.ASSUME_SHIFT_JIS=!1;class Z{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=oe.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,i,o){for(let a=i;i<i+o;a++)this.append(t[a]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+1)}substring(t,i){return this.value.substring(t,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+i.length)}}class te{constructor(t,i,o,a){if(this.width=t,this.height=i,this.rowSize=o,this.bits=a,i==null&&(i=t),this.height=i,t<1||i<1)throw new I("Both dimensions must be greater than 0");o==null&&(o=Math.floor((t+31)/32)),this.rowSize=o,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const i=t.length,o=t[0].length,a=new te(o,i);for(let u=0;u<i;u++){const h=t[u];for(let p=0;p<o;p++)h[p]&&a.set(p,u)}return a}static parseFromString(t,i,o){if(t===null)throw new I("stringRepresentation cannot be null");const a=new Array(t.length);let u=0,h=0,p=-1,m=0,y=0;for(;y<t.length;)if(t.charAt(y)===`
`||t.charAt(y)==="\r"){if(u>h){if(p===-1)p=u-h;else if(u-h!==p)throw new I("row lengths do not match");h=u,m++}y++}else if(t.substring(y,y+i.length)===i)y+=i.length,a[u]=!0,u++;else if(t.substring(y,y+o.length)===o)y+=o.length,a[u]=!1,u++;else throw new I("illegal character encountered: "+t.substring(y));if(u>h){if(p===-1)p=u-h;else if(u-h!==p)throw new I("row lengths do not match");m++}const E=new te(p,m);for(let N=0;N<u;N++)a[N]&&E.set(Math.floor(N%p),Math.floor(N/p));return E}get(t,i){const o=i*this.rowSize+Math.floor(t/32);return(this.bits[o]>>>(t&31)&1)!==0}set(t,i){const o=i*this.rowSize+Math.floor(t/32);this.bits[o]|=1<<(t&31)&4294967295}unset(t,i){const o=i*this.rowSize+Math.floor(t/32);this.bits[o]&=~(1<<(t&31)&4294967295)}flip(t,i){const o=i*this.rowSize+Math.floor(t/32);this.bits[o]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new I("input matrix dimensions do not match");const i=new X(Math.floor(this.width/32)+1),o=this.rowSize,a=this.bits;for(let u=0,h=this.height;u<h;u++){const p=u*o,m=t.getRow(u,i).getBitArray();for(let y=0;y<o;y++)a[p+y]^=m[y]}}clear(){const t=this.bits,i=t.length;for(let o=0;o<i;o++)t[o]=0}setRegion(t,i,o,a){if(i<0||t<0)throw new I("Left and top must be nonnegative");if(a<1||o<1)throw new I("Height and width must be at least 1");const u=t+o,h=i+a;if(h>this.height||u>this.width)throw new I("The region must fit inside the matrix");const p=this.rowSize,m=this.bits;for(let y=i;y<h;y++){const E=y*p;for(let N=t;N<u;N++)m[E+Math.floor(N/32)]|=1<<(N&31)&4294967295}}getRow(t,i){i==null||i.getSize()<this.width?i=new X(this.width):i.clear();const o=this.rowSize,a=this.bits,u=t*o;for(let h=0;h<o;h++)i.setBulk(h*32,a[u+h]);return i}setRow(t,i){U.arraycopy(i.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),i=this.getHeight();let o=new X(t),a=new X(t);for(let u=0,h=Math.floor((i+1)/2);u<h;u++)o=this.getRow(u,o),a=this.getRow(i-1-u,a),o.reverse(),a.reverse(),this.setRow(u,a),this.setRow(i-1-u,o)}getEnclosingRectangle(){const t=this.width,i=this.height,o=this.rowSize,a=this.bits;let u=t,h=i,p=-1,m=-1;for(let y=0;y<i;y++)for(let E=0;E<o;E++){const N=a[y*o+E];if(N!==0){if(y<h&&(h=y),y>m&&(m=y),E*32<u){let O=0;for(;!(N<<31-O&4294967295);)O++;E*32+O<u&&(u=E*32+O)}if(E*32+31>p){let O=31;for(;!(N>>>O);)O--;E*32+O>p&&(p=E*32+O)}}}return p<u||m<h?null:Int32Array.from([u,h,p-u+1,m-h+1])}getTopLeftOnBit(){const t=this.rowSize,i=this.bits;let o=0;for(;o<i.length&&i[o]===0;)o++;if(o===i.length)return null;const a=o/t;let u=o%t*32;const h=i[o];let p=0;for(;!(h<<31-p&4294967295);)p++;return u+=p,Int32Array.from([u,a])}getBottomRightOnBit(){const t=this.rowSize,i=this.bits;let o=i.length-1;for(;o>=0&&i[o]===0;)o--;if(o<0)return null;const a=Math.floor(o/t);let u=Math.floor(o%t)*32;const h=i[o];let p=31;for(;!(h>>>p);)p--;return u+=p,Int32Array.from([u,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof te))return!1;const i=t;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&B.equals(this.bits,i.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+B.hashCode(this.bits),t}toString(t="X ",i="  ",o=`
`){return this.buildToString(t,i,o)}buildToString(t,i,o){let a=new Z;for(let u=0,h=this.height;u<h;u++){for(let p=0,m=this.width;p<m;p++)a.append(this.get(p,u)?t:i);a.append(o)}return a.toString()}clone(){return new te(this.width,this.height,this.rowSize,this.bits.slice())}}class G extends v{static getNotFoundInstance(){return new G}}G.kind="NotFoundException";class me extends z{constructor(t){super(t),this.luminances=me.EMPTY,this.buckets=new Int32Array(me.LUMINANCE_BUCKETS)}getBlackRow(t,i){const o=this.getLuminanceSource(),a=o.getWidth();i==null||i.getSize()<a?i=new X(a):i.clear(),this.initArrays(a);const u=o.getRow(t,this.luminances),h=this.buckets;for(let m=0;m<a;m++)h[(u[m]&255)>>me.LUMINANCE_SHIFT]++;const p=me.estimateBlackPoint(h);if(a<3)for(let m=0;m<a;m++)(u[m]&255)<p&&i.set(m);else{let m=u[0]&255,y=u[1]&255;for(let E=1;E<a-1;E++){const N=u[E+1]&255;(y*4-m-N)/2<p&&i.set(E),m=y,y=N}}return i}getBlackMatrix(){const t=this.getLuminanceSource(),i=t.getWidth(),o=t.getHeight(),a=new te(i,o);this.initArrays(i);const u=this.buckets;for(let m=1;m<5;m++){const y=Math.floor(o*m/5),E=t.getRow(y,this.luminances),N=Math.floor(i*4/5);for(let O=Math.floor(i/5);O<N;O++){const j=E[O]&255;u[j>>me.LUMINANCE_SHIFT]++}}const h=me.estimateBlackPoint(u),p=t.getMatrix();for(let m=0;m<o;m++){const y=m*i;for(let E=0;E<i;E++)(p[y+E]&255)<h&&a.set(E,m)}return a}createBinarizer(t){return new me(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const i=this.buckets;for(let o=0;o<me.LUMINANCE_BUCKETS;o++)i[o]=0}static estimateBlackPoint(t){const i=t.length;let o=0,a=0,u=0;for(let E=0;E<i;E++)t[E]>u&&(a=E,u=t[E]),t[E]>o&&(o=t[E]);let h=0,p=0;for(let E=0;E<i;E++){const N=E-a,O=t[E]*N*N;O>p&&(h=E,p=O)}if(a>h){const E=a;a=h,h=E}if(h-a<=i/16)throw new G;let m=h-1,y=-1;for(let E=h-1;E>a;E--){const N=E-a,O=N*N*(h-E)*(o-t[E]);O>y&&(m=E,y=O)}return m<<me.LUMINANCE_SHIFT}}me.LUMINANCE_BITS=5,me.LUMINANCE_SHIFT=8-me.LUMINANCE_BITS,me.LUMINANCE_BUCKETS=1<<me.LUMINANCE_BITS,me.EMPTY=Uint8ClampedArray.from([0]);class fe extends me{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),i=t.getWidth(),o=t.getHeight();if(i>=fe.MINIMUM_DIMENSION&&o>=fe.MINIMUM_DIMENSION){const a=t.getMatrix();let u=i>>fe.BLOCK_SIZE_POWER;i&fe.BLOCK_SIZE_MASK&&u++;let h=o>>fe.BLOCK_SIZE_POWER;o&fe.BLOCK_SIZE_MASK&&h++;const p=fe.calculateBlackPoints(a,u,h,i,o),m=new te(i,o);fe.calculateThresholdForBlock(a,u,h,i,o,p,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new fe(t)}static calculateThresholdForBlock(t,i,o,a,u,h,p){const m=u-fe.BLOCK_SIZE,y=a-fe.BLOCK_SIZE;for(let E=0;E<o;E++){let N=E<<fe.BLOCK_SIZE_POWER;N>m&&(N=m);const O=fe.cap(E,2,o-3);for(let j=0;j<i;j++){let K=j<<fe.BLOCK_SIZE_POWER;K>y&&(K=y);const q=fe.cap(j,2,i-3);let ie=0;for(let Ae=-2;Ae<=2;Ae++){const xe=h[O+Ae];ie+=xe[q-2]+xe[q-1]+xe[q]+xe[q+1]+xe[q+2]}const le=ie/25;fe.thresholdBlock(t,K,N,le,a,p)}}}static cap(t,i,o){return t<i?i:t>o?o:t}static thresholdBlock(t,i,o,a,u,h){for(let p=0,m=o*u+i;p<fe.BLOCK_SIZE;p++,m+=u)for(let y=0;y<fe.BLOCK_SIZE;y++)(t[m+y]&255)<=a&&h.set(i+y,o+p)}static calculateBlackPoints(t,i,o,a,u){const h=u-fe.BLOCK_SIZE,p=a-fe.BLOCK_SIZE,m=new Array(o);for(let y=0;y<o;y++){m[y]=new Int32Array(i);let E=y<<fe.BLOCK_SIZE_POWER;E>h&&(E=h);for(let N=0;N<i;N++){let O=N<<fe.BLOCK_SIZE_POWER;O>p&&(O=p);let j=0,K=255,q=0;for(let le=0,Ae=E*a+O;le<fe.BLOCK_SIZE;le++,Ae+=a){for(let xe=0;xe<fe.BLOCK_SIZE;xe++){const Ee=t[Ae+xe]&255;j+=Ee,Ee<K&&(K=Ee),Ee>q&&(q=Ee)}if(q-K>fe.MIN_DYNAMIC_RANGE)for(le++,Ae+=a;le<fe.BLOCK_SIZE;le++,Ae+=a)for(let xe=0;xe<fe.BLOCK_SIZE;xe++)j+=t[Ae+xe]&255}let ie=j>>fe.BLOCK_SIZE_POWER*2;if(q-K<=fe.MIN_DYNAMIC_RANGE&&(ie=K/2,y>0&&N>0)){const le=(m[y-1][N]+2*m[y][N-1]+m[y-1][N-1])/4;K<le&&(ie=le)}m[y][N]=ie}}return m}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class ne{constructor(t,i){this.width=t,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,i,o,a){throw new W("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new W("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new W("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let i=new Z;for(let o=0;o<this.height;o++){const a=this.getRow(o,t);for(let u=0;u<this.width;u++){const h=a[u]&255;let p;h<64?p="#":h<128?p="+":h<192?p=".":p=" ",i.append(p)}i.append(`
`)}return i.toString()}}class pe extends ne{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,i){const o=this.delegate.getRow(t,i),a=this.getWidth();for(let u=0;u<a;u++)o[u]=255-(o[u]&255);return o}getMatrix(){const t=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(i);for(let a=0;a<i;a++)o[a]=255-(t[a]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(t,i,o,a){return new pe(this.delegate.crop(t,i,o,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new pe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new pe(this.delegate.rotateCounterClockwise45())}}class he extends ne{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=he.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const i=t.getContext("2d").getImageData(0,0,t.width,t.height);return he.toGrayscaleBuffer(i.data,t.width,t.height)}static toGrayscaleBuffer(t,i,o){const a=new Uint8ClampedArray(i*o);for(let u=0,h=0,p=t.length;u<p;u+=4,h++){let m;if(t[u+3]===0)m=255;else{const E=t[u],N=t[u+1],O=t[u+2];m=306*E+601*N+117*O+512>>10}a[h]=m}return a}getRow(t,i){if(t<0||t>=this.getHeight())throw new I("Requested row is outside the image: "+t);const o=this.getWidth(),a=t*o;return i===null?i=this.buffer.slice(a,a+o):(i.length<o&&(i=new Uint8ClampedArray(o)),i.set(this.buffer.slice(a,a+o))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,i,o,a){return super.crop(t,i,o,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const i=this.getTempCanvasElement(),o=i.getContext("2d"),a=t*he.DEGREE_TO_RADIANS,u=this.canvas.width,h=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(a))*u+Math.abs(Math.sin(a))*h),m=Math.ceil(Math.abs(Math.sin(a))*u+Math.abs(Math.cos(a))*h);return i.width=p,i.height=m,o.translate(p/2,m/2),o.rotate(a),o.drawImage(this.canvas,u/-2,h/-2),this.buffer=he.makeBufferFromCanvasImageData(i),this}invert(){return new pe(this)}}he.DEGREE_TO_RADIANS=Math.PI/180;class Ce{constructor(t,i,o){this.deviceId=t,this.label=i,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var be=(globalThis||window||self||window||void 0)&&(globalThis||window||self||window||void 0).__awaiter||function(T,t,i,o){function a(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(E){try{y(o.next(E))}catch(N){h(N)}}function m(E){try{y(o.throw(E))}catch(N){h(N)}}function y(E){E.done?u(E.value):a(E.value).then(p,m)}y((o=o.apply(T,t||[])).next())})};class Ve{constructor(t,i=500,o){this.reader=t,this.timeBetweenScansMillis=i,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return be(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const o of t){const a=o.kind==="video"?"videoinput":o.kind;if(a!=="videoinput")continue;const u=o.deviceId||o.id,h=o.label||`Video device ${i.length+1}`,p=o.groupId,m={deviceId:u,label:h,kind:a,groupId:p};i.push(m)}return i})}getVideoInputDevices(){return be(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new Ce(i.deviceId,i.label))})}findDeviceById(t){return be(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(o=>o.deviceId===t):null})}decodeFromInputVideoDevice(t,i){return be(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,i)})}decodeOnceFromVideoDevice(t,i){return be(this,void 0,void 0,function*(){this.reset();let o;t?o={deviceId:{exact:t}}:o={facingMode:"environment"};const a={video:o};return yield this.decodeOnceFromConstraints(a,i)})}decodeOnceFromConstraints(t,i){return be(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(o,i)})}decodeOnceFromStream(t,i){return be(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(t,i);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(t,i,o){return be(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,i,o)})}decodeFromVideoDevice(t,i,o){return be(this,void 0,void 0,function*(){let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const u={video:a};return yield this.decodeFromConstraints(u,i,o)})}decodeFromConstraints(t,i,o){return be(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(a,i,o)})}decodeFromStream(t,i,o){return be(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,i);return yield this.decodeContinuously(a,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,i){return be(this,void 0,void 0,function*(){const o=this.prepareVideoElement(i);return this.addVideoSource(o,t),this.videoElement=o,this.stream=t,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(t){return new Promise((i,o)=>this.playVideoOnLoad(t,()=>i()))}playVideoOnLoad(t,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",i),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return be(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,i){const o=document.getElementById(t);if(!o)throw new S(`element with id '${t}' not found`);if(o.nodeName.toLowerCase()!==i.toLowerCase())throw new S(`element with id '${t}' must be an ${i} element`);return o}decodeFromImage(t,i){if(!t&&!i)throw new S("either imageElement with a src set or an url must be provided");return i&&!t?this.decodeFromImageUrl(i):this.decodeFromImageElement(t)}decodeFromVideo(t,i){if(!t&&!i)throw new S("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,i,o){if(t===void 0&&i===void 0)throw new S("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrlContinuously(i,o):this.decodeFromVideoElementContinuously(t,o)}decodeFromImageElement(t){if(!t)throw new S("An image element must be provided.");this.reset();const i=this.prepareImageElement(t);this.imageElement=i;let o;return this.isImageLoaded(i)?o=this.decodeOnce(i,!1,!0):o=this._decodeOnLoadImage(i),o}decodeFromVideoElement(t){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(t,i){const o=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(o,i)}_decodeFromVideoElementSetup(t){if(!t)throw new S("A video element must be provided.");this.reset();const i=this.prepareVideoElement(t);return this.videoElement=i,i}decodeFromImageUrl(t){if(!t)throw new S("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const o=this._decodeOnLoadImage(i);return i.src=t,o}decodeFromVideoUrl(t){if(!t)throw new S("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElement(i);return i.src=t,o}decodeFromVideoUrlContinuously(t,i){if(!t)throw new S("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(o,i);return o.src=t,a}_decodeOnLoadImage(t){return new Promise((i,o)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(i,o),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return be(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,i){return be(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,i)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let i;return typeof t>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(i=t),i}prepareVideoElement(t){let i;return!t&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(i=t),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(t,i=!0,o=!0){this._stopAsyncDecode=!1;const a=(u,h)=>{if(this._stopAsyncDecode){h(new G("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(t);u(p)}catch(p){const m=i&&p instanceof G,E=(p instanceof F||p instanceof $)&&o;if(m||E)return setTimeout(a,this._timeBetweenDecodingAttempts,u,h);h(p)}};return new Promise((u,h)=>a(u,h))}decodeContinuously(t,i){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(t);i(a,null),setTimeout(o,this.timeBetweenScansMillis)}catch(a){i(null,a);const u=a instanceof F||a instanceof $,h=a instanceof G;(u||h)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(t){const i=this.createBinaryBitmap(t);return this.decodeBitmap(i)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,i,o){i||(i={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(t,i,o=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const i=this.getCaptureCanvas(t),o=new he(i),a=new fe(o);return new M(a)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const i=this.createCaptureCanvas(t);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let o,a;return typeof t<"u"&&(t instanceof HTMLVideoElement?(o=t.videoWidth,a=t.videoHeight):t instanceof HTMLImageElement&&(o=t.naturalWidth||t.width,a=t.naturalHeight||t.height)),i.style.width=o+"px",i.style.height=a+"px",i.width=o,i.height=a,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,i){try{t.srcObject=i}catch{t.src=URL.createObjectURL(i)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class ve{constructor(t,i,o=i==null?0:8*i.length,a,u,h=U.currentTimeMillis()){this.text=t,this.rawBytes=i,this.numBits=o,this.resultPoints=a,this.format=u,this.timestamp=h,this.text=t,this.rawBytes=i,o==null?this.numBits=i==null?0:8*i.length:this.numBits=o,this.resultPoints=a,this.format=u,this.resultMetadata=null,h==null?this.timestamp=U.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,i)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const i=this.resultPoints;if(i===null)this.resultPoints=t;else if(t!==null&&t.length>0){const o=new Array(i.length+t.length);U.arraycopy(i,0,o,0,i.length),U.arraycopy(t,0,o,i.length,t.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Re;(function(T){T[T.AZTEC=0]="AZTEC",T[T.CODABAR=1]="CODABAR",T[T.CODE_39=2]="CODE_39",T[T.CODE_93=3]="CODE_93",T[T.CODE_128=4]="CODE_128",T[T.DATA_MATRIX=5]="DATA_MATRIX",T[T.EAN_8=6]="EAN_8",T[T.EAN_13=7]="EAN_13",T[T.ITF=8]="ITF",T[T.MAXICODE=9]="MAXICODE",T[T.PDF_417=10]="PDF_417",T[T.QR_CODE=11]="QR_CODE",T[T.RSS_14=12]="RSS_14",T[T.RSS_EXPANDED=13]="RSS_EXPANDED",T[T.UPC_A=14]="UPC_A",T[T.UPC_E=15]="UPC_E",T[T.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Re||(Re={}));var ge=Re,nt;(function(T){T[T.OTHER=0]="OTHER",T[T.ORIENTATION=1]="ORIENTATION",T[T.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",T[T.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",T[T.ISSUE_NUMBER=4]="ISSUE_NUMBER",T[T.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",T[T.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",T[T.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",T[T.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",T[T.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",T[T.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(nt||(nt={}));var Be=nt;class Mt{constructor(t,i,o,a,u=-1,h=-1){this.rawBytes=t,this.text=i,this.byteSegments=o,this.ecLevel=a,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=h,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class xn{exp(t){return this.expTable[t]}log(t){if(t===0)throw new I;return this.logTable[t]}static addOrSubtract(t,i){return t^i}}class xt{constructor(t,i){if(i.length===0)throw new I;this.field=t;const o=i.length;if(o>1&&i[0]===0){let a=1;for(;a<o&&i[a]===0;)a++;a===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-a),U.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const i=this.coefficients;let o;if(t===1){o=0;for(let h=0,p=i.length;h!==p;h++){const m=i[h];o=xn.addOrSubtract(o,m)}return o}o=i[0];const a=i.length,u=this.field;for(let h=1;h<a;h++)o=xn.addOrSubtract(u.multiply(t,o),i[h]);return o}addOrSubtract(t){if(!this.field.equals(t.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,o=t.coefficients;if(i.length>o.length){const h=i;i=o,o=h}let a=new Int32Array(o.length);const u=o.length-i.length;U.arraycopy(o,0,a,0,u);for(let h=u;h<o.length;h++)a[h]=xn.addOrSubtract(i[h-u],o[h]);return new xt(this.field,a)}multiply(t){if(!this.field.equals(t.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const i=this.coefficients,o=i.length,a=t.coefficients,u=a.length,h=new Int32Array(o+u-1),p=this.field;for(let m=0;m<o;m++){const y=i[m];for(let E=0;E<u;E++)h[m+E]=xn.addOrSubtract(h[m+E],p.multiply(y,a[E]))}return new xt(p,h)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const i=this.coefficients.length,o=this.field,a=new Int32Array(i),u=this.coefficients;for(let h=0;h<i;h++)a[h]=o.multiply(u[h],t);return new xt(o,a)}multiplyByMonomial(t,i){if(t<0)throw new I;if(i===0)return this.field.getZero();const o=this.coefficients,a=o.length,u=new Int32Array(a+t),h=this.field;for(let p=0;p<a;p++)u[p]=h.multiply(o[p],i);return new xt(h,u)}divide(t){if(!this.field.equals(t.field))throw new I("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new I("Divide by 0");const i=this.field;let o=i.getZero(),a=this;const u=t.getCoefficient(t.getDegree()),h=i.inverse(u);for(;a.getDegree()>=t.getDegree()&&!a.isZero();){const p=a.getDegree()-t.getDegree(),m=i.multiply(a.getCoefficient(a.getDegree()),h),y=t.multiplyByMonomial(p,m),E=i.buildMonomial(p,m);o=o.addOrSubtract(E),a=a.addOrSubtract(y)}return[o,a]}toString(){let t="";for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);if(o!==0){if(o<0?(t+=" - ",o=-o):t.length>0&&(t+=" + "),i===0||o!==1){const a=this.field.log(o);a===0?t+="1":a===1?t+="a":(t+="a^",t+=a)}i!==0&&(i===1?t+="x":(t+="x^",t+=i))}}return t}}class yt extends v{}yt.kind="ArithmeticException";class Ke extends xn{constructor(t,i,o){super(),this.primitive=t,this.size=i,this.generatorBase=o;const a=new Int32Array(i);let u=1;for(let p=0;p<i;p++)a[p]=u,u*=2,u>=i&&(u^=t,u&=i-1);this.expTable=a;const h=new Int32Array(i);for(let p=0;p<i-1;p++)h[a[p]]=p;this.logTable=h,this.zero=new xt(this,Int32Array.from([0])),this.one=new xt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new I;if(i===0)return this.zero;const o=new Int32Array(t+1);return o[0]=i,new xt(this,o)}inverse(t){if(t===0)throw new yt;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+P.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}Ke.AZTEC_DATA_12=new Ke(4201,4096,1),Ke.AZTEC_DATA_10=new Ke(1033,1024,1),Ke.AZTEC_DATA_6=new Ke(67,64,1),Ke.AZTEC_PARAM=new Ke(19,16,1),Ke.QR_CODE_FIELD_256=new Ke(285,256,0),Ke.DATA_MATRIX_FIELD_256=new Ke(301,256,1),Ke.AZTEC_DATA_8=Ke.DATA_MATRIX_FIELD_256,Ke.MAXICODE_FIELD_64=Ke.AZTEC_DATA_6;class Sn extends v{}Sn.kind="ReedSolomonException";class Yt extends v{}Yt.kind="IllegalStateException";class On{constructor(t){this.field=t}decode(t,i){const o=this.field,a=new xt(o,t),u=new Int32Array(i);let h=!0;for(let j=0;j<i;j++){const K=a.evaluateAt(o.exp(j+o.getGeneratorBase()));u[u.length-1-j]=K,K!==0&&(h=!1)}if(h)return;const p=new xt(o,u),m=this.runEuclideanAlgorithm(o.buildMonomial(i,1),p,i),y=m[0],E=m[1],N=this.findErrorLocations(y),O=this.findErrorMagnitudes(E,N);for(let j=0;j<N.length;j++){const K=t.length-1-o.log(N[j]);if(K<0)throw new Sn("Bad error location");t[K]=Ke.addOrSubtract(t[K],O[j])}}runEuclideanAlgorithm(t,i,o){if(t.getDegree()<i.getDegree()){const j=t;t=i,i=j}const a=this.field;let u=t,h=i,p=a.getZero(),m=a.getOne();for(;h.getDegree()>=(o/2|0);){let j=u,K=p;if(u=h,p=m,u.isZero())throw new Sn("r_{i-1} was zero");h=j;let q=a.getZero();const ie=u.getCoefficient(u.getDegree()),le=a.inverse(ie);for(;h.getDegree()>=u.getDegree()&&!h.isZero();){const Ae=h.getDegree()-u.getDegree(),xe=a.multiply(h.getCoefficient(h.getDegree()),le);q=q.addOrSubtract(a.buildMonomial(Ae,xe)),h=h.addOrSubtract(u.multiplyByMonomial(Ae,xe))}if(m=q.multiply(p).addOrSubtract(K),h.getDegree()>=u.getDegree())throw new Yt("Division algorithm failed to reduce polynomial?")}const y=m.getCoefficient(0);if(y===0)throw new Sn("sigmaTilde(0) was zero");const E=a.inverse(y),N=m.multiplyScalar(E),O=h.multiplyScalar(E);return[N,O]}findErrorLocations(t){const i=t.getDegree();if(i===1)return Int32Array.from([t.getCoefficient(1)]);const o=new Int32Array(i);let a=0;const u=this.field;for(let h=1;h<u.getSize()&&a<i;h++)t.evaluateAt(h)===0&&(o[a]=u.inverse(h),a++);if(a!==i)throw new Sn("Error locator degree does not match number of roots");return o}findErrorMagnitudes(t,i){const o=i.length,a=new Int32Array(o),u=this.field;for(let h=0;h<o;h++){const p=u.inverse(i[h]);let m=1;for(let y=0;y<o;y++)if(h!==y){const E=u.multiply(i[y],p),N=E&1?E&-2:E|1;m=u.multiply(m,N)}a[h]=u.multiply(t.evaluateAt(p),u.inverse(m)),u.getGeneratorBase()!==0&&(a[h]=u.multiply(a[h],p))}return a}}var Pe;(function(T){T[T.UPPER=0]="UPPER",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.DIGIT=3]="DIGIT",T[T.PUNCT=4]="PUNCT",T[T.BINARY=5]="BINARY"})(Pe||(Pe={}));class We{decode(t){this.ddata=t;let i=t.getBits(),o=this.extractBits(i),a=this.correctBits(o),u=We.convertBoolArrayToByteArray(a),h=We.getEncodedData(a),p=new Mt(u,h,null,null);return p.setNumBits(a.length),p}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let i=t.length,o=Pe.UPPER,a=Pe.UPPER,u="",h=0;for(;h<i;)if(a===Pe.BINARY){if(i-h<5)break;let p=We.readCode(t,h,5);if(h+=5,p===0){if(i-h<11)break;p=We.readCode(t,h,11)+31,h+=11}for(let m=0;m<p;m++){if(i-h<8){h=i;break}const y=We.readCode(t,h,8);u+=oe.castAsNonUtf8Char(y),h+=8}a=o}else{let p=a===Pe.DIGIT?4:5;if(i-h<p)break;let m=We.readCode(t,h,p);h+=p;let y=We.getCharacter(a,m);y.startsWith("CTRL_")?(o=a,a=We.getTable(y.charAt(5)),y.charAt(6)==="L"&&(o=a)):(u+=y,a=o)}return u}static getTable(t){switch(t){case"L":return Pe.LOWER;case"P":return Pe.PUNCT;case"M":return Pe.MIXED;case"D":return Pe.DIGIT;case"B":return Pe.BINARY;case"U":default:return Pe.UPPER}}static getCharacter(t,i){switch(t){case Pe.UPPER:return We.UPPER_TABLE[i];case Pe.LOWER:return We.LOWER_TABLE[i];case Pe.MIXED:return We.MIXED_TABLE[i];case Pe.PUNCT:return We.PUNCT_TABLE[i];case Pe.DIGIT:return We.DIGIT_TABLE[i];default:throw new Yt("Bad table")}}correctBits(t){let i,o;this.ddata.getNbLayers()<=2?(o=6,i=Ke.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,i=Ke.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,i=Ke.AZTEC_DATA_10):(o=12,i=Ke.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),u=t.length/o;if(u<a)throw new $;let h=t.length%o,p=new Int32Array(u);for(let O=0;O<u;O++,h+=o)p[O]=We.readCode(t,h,o);try{new On(i).decode(p,u-a)}catch(O){throw new $(O)}let m=(1<<o)-1,y=0;for(let O=0;O<a;O++){let j=p[O];if(j===0||j===m)throw new $;(j===1||j===m-1)&&y++}let E=new Array(a*o-y),N=0;for(let O=0;O<a;O++){let j=p[O];if(j===1||j===m-1)E.fill(j>1,N,N+o-1),N+=o-1;else for(let K=o-1;K>=0;--K)E[N++]=(j&1<<K)!==0}return E}extractBits(t){let i=this.ddata.isCompact(),o=this.ddata.getNbLayers(),a=(i?11:14)+o*4,u=new Int32Array(a),h=new Array(this.totalBitsInLayer(o,i));if(i)for(let p=0;p<u.length;p++)u[p]=p;else{let p=a+1+2*P.truncDivision(P.truncDivision(a,2)-1,15),m=a/2,y=P.truncDivision(p,2);for(let E=0;E<m;E++){let N=E+P.truncDivision(E,15);u[m-E-1]=y-N-1,u[m+E]=y+N+1}}for(let p=0,m=0;p<o;p++){let y=(o-p)*4+(i?9:12),E=p*2,N=a-1-E;for(let O=0;O<y;O++){let j=O*2;for(let K=0;K<2;K++)h[m+j+K]=t.get(u[E+K],u[E+O]),h[m+2*y+j+K]=t.get(u[E+O],u[N-K]),h[m+4*y+j+K]=t.get(u[N-K],u[N-O]),h[m+6*y+j+K]=t.get(u[N-O],u[E+K])}m+=y*8}return h}static readCode(t,i,o){let a=0;for(let u=i;u<i+o;u++)a<<=1,t[u]&&(a|=1);return a}static readByte(t,i){let o=t.length-i;return o>=8?We.readCode(t,i,8):We.readCode(t,i,o)<<8-o}static convertBoolArrayToByteArray(t){let i=new Uint8Array((t.length+7)/8);for(let o=0;o<i.length;o++)i[o]=We.readByte(t,8*o);return i}totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}We.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],We.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],We.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],We.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],We.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ye{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,i,o,a){const u=t-o,h=i-a;return Math.sqrt(u*u+h*h)}static sum(t){let i=0;for(let o=0,a=t.length;o!==a;o++){const u=t[o];i+=u}return i}}class Kt{static floatToIntBits(t){return t}}Kt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Te{constructor(t,i){this.x=t,this.y=i}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Te){const i=t;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*Kt.floatToIntBits(this.x)+Kt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const i=this.distance(t[0],t[1]),o=this.distance(t[1],t[2]),a=this.distance(t[0],t[2]);let u,h,p;if(o>=i&&o>=a?(h=t[0],u=t[1],p=t[2]):a>=o&&a>=i?(h=t[1],u=t[0],p=t[2]):(h=t[2],u=t[0],p=t[1]),this.crossProductZ(u,h,p)<0){const m=u;u=p,p=m}t[0]=u,t[1]=h,t[2]=p}static distance(t,i){return Ye.distance(t.x,t.y,i.x,i.y)}static crossProductZ(t,i,o){const a=i.x,u=i.y;return(o.x-a)*(t.y-u)-(o.y-u)*(t.x-a)}}class Pt{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class xr extends Pt{constructor(t,i,o,a,u){super(t,i),this.compact=o,this.nbDatablocks=a,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class dn{constructor(t,i,o,a){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),i==null&&(i=dn.INIT_SIZE),o==null&&(o=t.getWidth()/2|0),a==null&&(a=t.getHeight()/2|0);const u=i/2|0;if(this.leftInit=o-u,this.rightInit=o+u,this.upInit=a-u,this.downInit=a+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new G}detect(){let t=this.leftInit,i=this.rightInit,o=this.upInit,a=this.downInit,u=!1,h=!0,p=!1,m=!1,y=!1,E=!1,N=!1;const O=this.width,j=this.height;for(;h;){h=!1;let K=!0;for(;(K||!m)&&i<O;)K=this.containsBlackPoint(o,a,i,!1),K?(i++,h=!0,m=!0):m||i++;if(i>=O){u=!0;break}let q=!0;for(;(q||!y)&&a<j;)q=this.containsBlackPoint(t,i,a,!0),q?(a++,h=!0,y=!0):y||a++;if(a>=j){u=!0;break}let ie=!0;for(;(ie||!E)&&t>=0;)ie=this.containsBlackPoint(o,a,t,!1),ie?(t--,h=!0,E=!0):E||t--;if(t<0){u=!0;break}let le=!0;for(;(le||!N)&&o>=0;)le=this.containsBlackPoint(t,i,o,!0),le?(o--,h=!0,N=!0):N||o--;if(o<0){u=!0;break}h&&(p=!0)}if(!u&&p){const K=i-t;let q=null;for(let xe=1;q===null&&xe<K;xe++)q=this.getBlackPointOnSegment(t,a-xe,t+xe,a);if(q==null)throw new G;let ie=null;for(let xe=1;ie===null&&xe<K;xe++)ie=this.getBlackPointOnSegment(t,o+xe,t+xe,o);if(ie==null)throw new G;let le=null;for(let xe=1;le===null&&xe<K;xe++)le=this.getBlackPointOnSegment(i,o+xe,i-xe,o);if(le==null)throw new G;let Ae=null;for(let xe=1;Ae===null&&xe<K;xe++)Ae=this.getBlackPointOnSegment(i,a-xe,i-xe,a);if(Ae==null)throw new G;return this.centerEdges(Ae,q,le,ie)}else throw new G}getBlackPointOnSegment(t,i,o,a){const u=Ye.round(Ye.distance(t,i,o,a)),h=(o-t)/u,p=(a-i)/u,m=this.image;for(let y=0;y<u;y++){const E=Ye.round(t+y*h),N=Ye.round(i+y*p);if(m.get(E,N))return new Te(E,N)}return null}centerEdges(t,i,o,a){const u=t.getX(),h=t.getY(),p=i.getX(),m=i.getY(),y=o.getX(),E=o.getY(),N=a.getX(),O=a.getY(),j=dn.CORR;return u<this.width/2?[new Te(N-j,O+j),new Te(p+j,m+j),new Te(y-j,E-j),new Te(u+j,h-j)]:[new Te(N+j,O+j),new Te(p+j,m-j),new Te(y-j,E+j),new Te(u-j,h-j)]}containsBlackPoint(t,i,o,a){const u=this.image;if(a){for(let h=t;h<=i;h++)if(u.get(h,o))return!0}else for(let h=t;h<=i;h++)if(u.get(o,h))return!0;return!1}}dn.INIT_SIZE=10,dn.CORR=1;class Sr{static checkAndNudgePoints(t,i){const o=t.getWidth(),a=t.getHeight();let u=!0;for(let h=0;h<i.length&&u;h+=2){const p=Math.floor(i[h]),m=Math.floor(i[h+1]);if(p<-1||p>o||m<-1||m>a)throw new G;u=!1,p===-1?(i[h]=0,u=!0):p===o&&(i[h]=o-1,u=!0),m===-1?(i[h+1]=0,u=!0):m===a&&(i[h+1]=a-1,u=!0)}u=!0;for(let h=i.length-2;h>=0&&u;h-=2){const p=Math.floor(i[h]),m=Math.floor(i[h+1]);if(p<-1||p>o||m<-1||m>a)throw new G;u=!1,p===-1?(i[h]=0,u=!0):p===o&&(i[h]=o-1,u=!0),m===-1?(i[h+1]=0,u=!0):m===a&&(i[h+1]=a-1,u=!0)}}}class Et{constructor(t,i,o,a,u,h,p,m,y){this.a11=t,this.a21=i,this.a31=o,this.a12=a,this.a22=u,this.a32=h,this.a13=p,this.a23=m,this.a33=y}static quadrilateralToQuadrilateral(t,i,o,a,u,h,p,m,y,E,N,O,j,K,q,ie){const le=Et.quadrilateralToSquare(t,i,o,a,u,h,p,m);return Et.squareToQuadrilateral(y,E,N,O,j,K,q,ie).times(le)}transformPoints(t){const i=t.length,o=this.a11,a=this.a12,u=this.a13,h=this.a21,p=this.a22,m=this.a23,y=this.a31,E=this.a32,N=this.a33;for(let O=0;O<i;O+=2){const j=t[O],K=t[O+1],q=u*j+m*K+N;t[O]=(o*j+h*K+y)/q,t[O+1]=(a*j+p*K+E)/q}}transformPointsWithValues(t,i){const o=this.a11,a=this.a12,u=this.a13,h=this.a21,p=this.a22,m=this.a23,y=this.a31,E=this.a32,N=this.a33,O=t.length;for(let j=0;j<O;j++){const K=t[j],q=i[j],ie=u*K+m*q+N;t[j]=(o*K+h*q+y)/ie,i[j]=(a*K+p*q+E)/ie}}static squareToQuadrilateral(t,i,o,a,u,h,p,m){const y=t-o+u-p,E=i-a+h-m;if(y===0&&E===0)return new Et(o-t,u-o,t,a-i,h-a,i,0,0,1);{const N=o-u,O=p-u,j=a-h,K=m-h,q=N*K-O*j,ie=(y*K-O*E)/q,le=(N*E-y*j)/q;return new Et(o-t+ie*o,p-t+le*p,t,a-i+ie*a,m-i+le*m,i,ie,le,1)}}static quadrilateralToSquare(t,i,o,a,u,h,p,m){return Et.squareToQuadrilateral(t,i,o,a,u,h,p,m).buildAdjoint()}buildAdjoint(){return new Et(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Et(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class lr extends Sr{sampleGrid(t,i,o,a,u,h,p,m,y,E,N,O,j,K,q,ie,le,Ae,xe){const Ee=Et.quadrilateralToQuadrilateral(a,u,h,p,m,y,E,N,O,j,K,q,ie,le,Ae,xe);return this.sampleGridWithTransform(t,i,o,Ee)}sampleGridWithTransform(t,i,o,a){if(i<=0||o<=0)throw new G;const u=new te(i,o),h=new Float32Array(2*i);for(let p=0;p<o;p++){const m=h.length,y=p+.5;for(let E=0;E<m;E+=2)h[E]=E/2+.5,h[E+1]=y;a.transformPoints(h),Sr.checkAndNudgePoints(t,h);try{for(let E=0;E<m;E+=2)t.get(Math.floor(h[E]),Math.floor(h[E+1]))&&u.set(E/2,p)}catch{throw new G}}return u}}class Gn{static setGridSampler(t){Gn.gridSampler=t}static getInstance(){return Gn.gridSampler}}Gn.gridSampler=new lr;class Lt{constructor(t,i){this.x=t,this.y=i}toResultPoint(){return new Te(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Xn{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let i=this.getMatrixCenter(),o=this.getBullsEyeCorners(i);if(t){let h=o[0];o[0]=o[2],o[2]=h}this.extractParameters(o);let a=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),u=this.getMatrixCornerPoints(o);return new xr(a,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new G;let i=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(t[0],t[1],i),this.sampleLine(t[1],t[2],i),this.sampleLine(t[2],t[3],i),this.sampleLine(t[3],t[0],i)]);this.shift=this.getRotation(o,i);let a=0;for(let h=0;h<4;h++){let p=o[(this.shift+h)%4];this.compact?(a<<=7,a+=p>>1&127):(a<<=10,a+=(p>>2&992)+(p>>1&31))}let u=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(t,i){let o=0;t.forEach((a,u,h)=>{let p=(a>>i-2<<1)+(a&1);o=(o<<3)+p}),o=((o&1)<<11)+(o>>1);for(let a=0;a<4;a++)if(P.bitCount(o^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new G}getCorrectedParameterData(t,i){let o,a;i?(o=7,a=2):(o=10,a=4);let u=o-a,h=new Int32Array(o);for(let m=o-1;m>=0;--m)h[m]=t&15,t>>=4;try{new On(Ke.AZTEC_PARAM).decode(h,u)}catch{throw new G}let p=0;for(let m=0;m<a;m++)p=(p<<4)+h[m];return p}getBullsEyeCorners(t){let i=t,o=t,a=t,u=t,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let N=this.getFirstDifferent(i,h,1,-1),O=this.getFirstDifferent(o,h,1,1),j=this.getFirstDifferent(a,h,-1,1),K=this.getFirstDifferent(u,h,-1,-1);if(this.nbCenterLayers>2){let q=this.distancePoint(K,N)*this.nbCenterLayers/(this.distancePoint(u,i)*(this.nbCenterLayers+2));if(q<.75||q>1.25||!this.isWhiteOrBlackRectangle(N,O,j,K))break}i=N,o=O,a=j,u=K,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new G;this.compact=this.nbCenterLayers===5;let p=new Te(i.getX()+.5,i.getY()-.5),m=new Te(o.getX()+.5,o.getY()+.5),y=new Te(a.getX()-.5,a.getY()+.5),E=new Te(u.getX()-.5,u.getY()-.5);return this.expandSquare([p,m,y,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,i,o,a;try{let p=new dn(this.image).detect();t=p[0],i=p[1],o=p[2],a=p[3]}catch{let m=this.image.getWidth()/2,y=this.image.getHeight()/2;t=this.getFirstDifferent(new Lt(m+7,y-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Lt(m+7,y+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Lt(m-7,y+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Lt(m-7,y-7),!1,-1,-1).toResultPoint()}let u=Ye.round((t.getX()+a.getX()+i.getX()+o.getX())/4),h=Ye.round((t.getY()+a.getY()+i.getY()+o.getY())/4);try{let p=new dn(this.image,15,u,h).detect();t=p[0],i=p[1],o=p[2],a=p[3]}catch{t=this.getFirstDifferent(new Lt(u+7,h-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Lt(u+7,h+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Lt(u-7,h+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Lt(u-7,h-7),!1,-1,-1).toResultPoint()}return u=Ye.round((t.getX()+a.getX()+i.getX()+o.getX())/4),h=Ye.round((t.getY()+a.getY()+i.getY()+o.getY())/4),new Lt(u,h)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,i,o,a,u){let h=Gn.getInstance(),p=this.getDimension(),m=p/2-this.nbCenterLayers,y=p/2+this.nbCenterLayers;return h.sampleGrid(t,p,p,m,m,y,m,y,y,m,y,i.getX(),i.getY(),o.getX(),o.getY(),a.getX(),a.getY(),u.getX(),u.getY())}sampleLine(t,i,o){let a=0,u=this.distanceResultPoint(t,i),h=u/o,p=t.getX(),m=t.getY(),y=h*(i.getX()-t.getX())/u,E=h*(i.getY()-t.getY())/u;for(let N=0;N<o;N++)this.image.get(Ye.round(p+N*y),Ye.round(m+N*E))&&(a|=1<<o-N-1);return a}isWhiteOrBlackRectangle(t,i,o,a){let u=3;t=new Lt(t.getX()-u,t.getY()+u),i=new Lt(i.getX()-u,i.getY()-u),o=new Lt(o.getX()+u,o.getY()-u),a=new Lt(a.getX()+u,a.getY()+u);let h=this.getColor(a,t);if(h===0)return!1;let p=this.getColor(t,i);return p!==h||(p=this.getColor(i,o),p!==h)?!1:(p=this.getColor(o,a),p===h)}getColor(t,i){let o=this.distancePoint(t,i),a=(i.getX()-t.getX())/o,u=(i.getY()-t.getY())/o,h=0,p=t.getX(),m=t.getY(),y=this.image.get(t.getX(),t.getY()),E=Math.ceil(o);for(let O=0;O<E;O++)p+=a,m+=u,this.image.get(Ye.round(p),Ye.round(m))!==y&&h++;let N=h/o;return N>.1&&N<.9?0:N<=.1===y?1:-1}getFirstDifferent(t,i,o,a){let u=t.getX()+o,h=t.getY()+a;for(;this.isValid(u,h)&&this.image.get(u,h)===i;)u+=o,h+=a;for(u-=o,h-=a;this.isValid(u,h)&&this.image.get(u,h)===i;)u+=o;for(u-=o;this.isValid(u,h)&&this.image.get(u,h)===i;)h+=a;return h-=a,new Lt(u,h)}expandSquare(t,i,o){let a=o/(2*i),u=t[0].getX()-t[2].getX(),h=t[0].getY()-t[2].getY(),p=(t[0].getX()+t[2].getX())/2,m=(t[0].getY()+t[2].getY())/2,y=new Te(p+a*u,m+a*h),E=new Te(p-a*u,m-a*h);u=t[1].getX()-t[3].getX(),h=t[1].getY()-t[3].getY(),p=(t[1].getX()+t[3].getX())/2,m=(t[1].getY()+t[3].getY())/2;let N=new Te(p+a*u,m+a*h),O=new Te(p-a*u,m-a*h);return[y,N,E,O]}isValid(t,i){return t>=0&&t<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(t){let i=Ye.round(t.getX()),o=Ye.round(t.getY());return this.isValid(i,o)}distancePoint(t,i){return Ye.distance(t.getX(),t.getY(),i.getX(),i.getY())}distanceResultPoint(t,i){return Ye.distance(t.getX(),t.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(P.truncDivision(this.nbLayers-4,8)+1)+15}}class bn{decode(t,i=null){let o=null,a=new Xn(t.getBlackMatrix()),u=null,h=null;try{let E=a.detectMirror(!1);u=E.getPoints(),this.reportFoundResultPoints(i,u),h=new We().decode(E)}catch(E){o=E}if(h==null)try{let E=a.detectMirror(!0);u=E.getPoints(),this.reportFoundResultPoints(i,u),h=new We().decode(E)}catch(E){throw o??E}let p=new ve(h.getText(),h.getRawBytes(),h.getNumBits(),u,ge.AZTEC,U.currentTimeMillis()),m=h.getByteSegments();m!=null&&p.putMetadata(Be.BYTE_SEGMENTS,m);let y=h.getECLevel();return y!=null&&p.putMetadata(Be.ERROR_CORRECTION_LEVEL,y),p}reportFoundResultPoints(t,i){if(t!=null){let o=t.get(se.NEED_RESULT_POINT_CALLBACK);o!=null&&i.forEach((a,u,h)=>{o.foundPossibleResultPoint(a)})}}reset(){}}class Bn extends Ve{constructor(t=500){super(new bn,t)}}class Ct{decode(t,i){try{return this.doDecode(t,i)}catch{if(i&&i.get(se.TRY_HARDER)===!0&&t.isRotateSupported()){const u=t.rotateCounterClockwise(),h=this.doDecode(u,i),p=h.getResultMetadata();let m=270;p!==null&&p.get(Be.ORIENTATION)===!0&&(m=m+p.get(Be.ORIENTATION)%360),h.putMetadata(Be.ORIENTATION,m);const y=h.getResultPoints();if(y!==null){const E=u.getHeight();for(let N=0;N<y.length;N++)y[N]=new Te(E-y[N].getY()-1,y[N].getX())}return h}else throw new G}}reset(){}doDecode(t,i){const o=t.getWidth(),a=t.getHeight();let u=new X(o);const h=i&&i.get(se.TRY_HARDER)===!0,p=Math.max(1,a>>(h?8:5));let m;h?m=a:m=15;const y=Math.trunc(a/2);for(let E=0;E<m;E++){const N=Math.trunc((E+1)/2),O=(E&1)===0,j=y+p*(O?N:-N);if(j<0||j>=a)break;try{u=t.getBlackRow(j,u)}catch{continue}for(let K=0;K<2;K++){if(K===1&&(u.reverse(),i&&i.get(se.NEED_RESULT_POINT_CALLBACK)===!0)){const q=new Map;i.forEach((ie,le)=>q.set(le,ie)),q.delete(se.NEED_RESULT_POINT_CALLBACK),i=q}try{const q=this.decodeRow(j,u,i);if(K===1){q.putMetadata(Be.ORIENTATION,180);const ie=q.getResultPoints();ie!==null&&(ie[0]=new Te(o-ie[0].getX()-1,ie[0].getY()),ie[1]=new Te(o-ie[1].getX()-1,ie[1].getY()))}return q}catch{}}}throw new G}static recordPattern(t,i,o){const a=o.length;for(let y=0;y<a;y++)o[y]=0;const u=t.getSize();if(i>=u)throw new G;let h=!t.get(i),p=0,m=i;for(;m<u;){if(t.get(m)!==h)o[p]++;else{if(++p===a)break;o[p]=1,h=!h}m++}if(!(p===a||p===a-1&&m===u))throw new G}static recordPatternInReverse(t,i,o){let a=o.length,u=t.get(i);for(;i>0&&a>=0;)t.get(--i)!==u&&(a--,u=!u);if(a>=0)throw new G;Ct.recordPattern(t,i+1,o)}static patternMatchVariance(t,i,o){const a=t.length;let u=0,h=0;for(let y=0;y<a;y++)u+=t[y],h+=i[y];if(u<h)return Number.POSITIVE_INFINITY;const p=u/h;o*=p;let m=0;for(let y=0;y<a;y++){const E=t[y],N=i[y]*p,O=E>N?E-N:N-E;if(O>o)return Number.POSITIVE_INFINITY;m+=O}return m/u}}class Ie extends Ct{static findStartPattern(t){const i=t.getSize(),o=t.getNextSet(0);let a=0,u=Int32Array.from([0,0,0,0,0,0]),h=o,p=!1;const m=6;for(let y=o;y<i;y++)if(t.get(y)!==p)u[a]++;else{if(a===m-1){let E=Ie.MAX_AVG_VARIANCE,N=-1;for(let O=Ie.CODE_START_A;O<=Ie.CODE_START_C;O++){const j=Ct.patternMatchVariance(u,Ie.CODE_PATTERNS[O],Ie.MAX_INDIVIDUAL_VARIANCE);j<E&&(E=j,N=O)}if(N>=0&&t.isRange(Math.max(0,h-(y-h)/2),h,!1))return Int32Array.from([h,y,N]);h+=u[0]+u[1],u=u.slice(2,u.length-1),u[a-1]=0,u[a]=0,a--}else a++;u[a]=1,p=!p}throw new G}static decodeCode(t,i,o){Ct.recordPattern(t,o,i);let a=Ie.MAX_AVG_VARIANCE,u=-1;for(let h=0;h<Ie.CODE_PATTERNS.length;h++){const p=Ie.CODE_PATTERNS[h],m=this.patternMatchVariance(i,p,Ie.MAX_INDIVIDUAL_VARIANCE);m<a&&(a=m,u=h)}if(u>=0)return u;throw new G}decodeRow(t,i,o){const a=o&&o.get(se.ASSUME_GS1)===!0,u=Ie.findStartPattern(i),h=u[2];let p=0;const m=new Uint8Array(20);m[p++]=h;let y;switch(h){case Ie.CODE_START_A:y=Ie.CODE_CODE_A;break;case Ie.CODE_START_B:y=Ie.CODE_CODE_B;break;case Ie.CODE_START_C:y=Ie.CODE_CODE_C;break;default:throw new $}let E=!1,N=!1,O="",j=u[0],K=u[1];const q=Int32Array.from([0,0,0,0,0,0]);let ie=0,le=0,Ae=h,xe=0,Ee=!0,rt=!1,et=!1;for(;!E;){const Bi=N;switch(N=!1,ie=le,le=Ie.decodeCode(i,q,K),m[p++]=le,le!==Ie.CODE_STOP&&(Ee=!0),le!==Ie.CODE_STOP&&(xe++,Ae+=xe*le),j=K,K+=q.reduce((Yu,qr)=>Yu+qr,0),le){case Ie.CODE_START_A:case Ie.CODE_START_B:case Ie.CODE_START_C:throw new $}switch(y){case Ie.CODE_CODE_A:if(le<64)et===rt?O+=String.fromCharCode(32+le):O+=String.fromCharCode(32+le+128),et=!1;else if(le<96)et===rt?O+=String.fromCharCode(le-64):O+=String.fromCharCode(le+64),et=!1;else switch(le!==Ie.CODE_STOP&&(Ee=!1),le){case Ie.CODE_FNC_1:a&&(O.length===0?O+="]C1":O+="");break;case Ie.CODE_FNC_2:case Ie.CODE_FNC_3:break;case Ie.CODE_FNC_4_A:!rt&&et?(rt=!0,et=!1):rt&&et?(rt=!1,et=!1):et=!0;break;case Ie.CODE_SHIFT:N=!0,y=Ie.CODE_CODE_B;break;case Ie.CODE_CODE_B:y=Ie.CODE_CODE_B;break;case Ie.CODE_CODE_C:y=Ie.CODE_CODE_C;break;case Ie.CODE_STOP:E=!0;break}break;case Ie.CODE_CODE_B:if(le<96)et===rt?O+=String.fromCharCode(32+le):O+=String.fromCharCode(32+le+128),et=!1;else switch(le!==Ie.CODE_STOP&&(Ee=!1),le){case Ie.CODE_FNC_1:a&&(O.length===0?O+="]C1":O+="");break;case Ie.CODE_FNC_2:case Ie.CODE_FNC_3:break;case Ie.CODE_FNC_4_B:!rt&&et?(rt=!0,et=!1):rt&&et?(rt=!1,et=!1):et=!0;break;case Ie.CODE_SHIFT:N=!0,y=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_A:y=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_C:y=Ie.CODE_CODE_C;break;case Ie.CODE_STOP:E=!0;break}break;case Ie.CODE_CODE_C:if(le<100)le<10&&(O+="0"),O+=le;else switch(le!==Ie.CODE_STOP&&(Ee=!1),le){case Ie.CODE_FNC_1:a&&(O.length===0?O+="]C1":O+="");break;case Ie.CODE_CODE_A:y=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_B:y=Ie.CODE_CODE_B;break;case Ie.CODE_STOP:E=!0;break}break}Bi&&(y=y===Ie.CODE_CODE_A?Ie.CODE_CODE_B:Ie.CODE_CODE_A)}const Ht=K-j;if(K=i.getNextUnset(K),!i.isRange(K,Math.min(i.getSize(),K+(K-j)/2),!1))throw new G;if(Ae-=xe*ie,Ae%103!==ie)throw new F;const jn=O.length;if(jn===0)throw new G;jn>0&&Ee&&(y===Ie.CODE_CODE_C?O=O.substring(0,jn-2):O=O.substring(0,jn-1));const zn=(u[1]+u[0])/2,wt=j+Ht/2,Cn=m.length,Un=new Uint8Array(Cn);for(let Bi=0;Bi<Cn;Bi++)Un[Bi]=m[Bi];const Qr=[new Te(zn,t),new Te(wt,t)];return new ve(O,Un,0,Qr,ge.CODE_128,new Date().getTime())}}Ie.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ie.MAX_AVG_VARIANCE=.25,Ie.MAX_INDIVIDUAL_VARIANCE=.7,Ie.CODE_SHIFT=98,Ie.CODE_CODE_C=99,Ie.CODE_CODE_B=100,Ie.CODE_CODE_A=101,Ie.CODE_FNC_1=102,Ie.CODE_FNC_2=97,Ie.CODE_FNC_3=96,Ie.CODE_FNC_4_A=101,Ie.CODE_FNC_4_B=100,Ie.CODE_START_A=103,Ie.CODE_START_B=104,Ie.CODE_START_C=105,Ie.CODE_STOP=106;class Ne extends Ct{constructor(t=!1,i=!1){super(),this.usingCheckDigit=t,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,i,o){let a=this.counters;a.fill(0),this.decodeRowResult="";let u=Ne.findAsteriskPattern(i,a),h=i.getNextSet(u[1]),p=i.getSize(),m,y;do{Ne.recordPattern(i,h,a);let q=Ne.toNarrowWidePattern(a);if(q<0)throw new G;m=Ne.patternToChar(q),this.decodeRowResult+=m,y=h;for(let ie of a)h+=ie;h=i.getNextSet(h)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let q of a)E+=q;let N=h-y-E;if(h!==p&&N*2<E)throw new G;if(this.usingCheckDigit){let q=this.decodeRowResult.length-1,ie=0;for(let le=0;le<q;le++)ie+=Ne.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(le));if(this.decodeRowResult.charAt(q)!==Ne.ALPHABET_STRING.charAt(ie%43))throw new F;this.decodeRowResult=this.decodeRowResult.substring(0,q)}if(this.decodeRowResult.length===0)throw new G;let O;this.extendedMode?O=Ne.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;let j=(u[1]+u[0])/2,K=y+E/2;return new ve(O,null,0,[new Te(j,t),new Te(K,t)],ge.CODE_39,new Date().getTime())}static findAsteriskPattern(t,i){let o=t.getSize(),a=t.getNextSet(0),u=0,h=a,p=!1,m=i.length;for(let y=a;y<o;y++)if(t.get(y)!==p)i[u]++;else{if(u===m-1){if(this.toNarrowWidePattern(i)===Ne.ASTERISK_ENCODING&&t.isRange(Math.max(0,h-Math.floor((y-h)/2)),h,!1))return[h,y];h+=i[0]+i[1],i.copyWithin(0,2,2+u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,p=!p}throw new G}static toNarrowWidePattern(t){let i=t.length,o=0,a;do{let u=2147483647;for(let m of t)m<u&&m>o&&(u=m);o=u,a=0;let h=0,p=0;for(let m=0;m<i;m++){let y=t[m];y>o&&(p|=1<<i-1-m,a++,h+=y)}if(a===3){for(let m=0;m<i&&a>0;m++){let y=t[m];if(y>o&&(a--,y*2>=h))return-1}return p}}while(a>3);return-1}static patternToChar(t){for(let i=0;i<Ne.CHARACTER_ENCODINGS.length;i++)if(Ne.CHARACTER_ENCODINGS[i]===t)return Ne.ALPHABET_STRING.charAt(i);if(t===Ne.ASTERISK_ENCODING)return"*";throw new G}static decodeExtended(t){let i=t.length,o="";for(let a=0;a<i;a++){let u=t.charAt(a);if(u==="+"||u==="$"||u==="%"||u==="/"){let h=t.charAt(a+1),p="\0";switch(u){case"+":if(h>="A"&&h<="Z")p=String.fromCharCode(h.charCodeAt(0)+32);else throw new $;break;case"$":if(h>="A"&&h<="Z")p=String.fromCharCode(h.charCodeAt(0)-64);else throw new $;break;case"%":if(h>="A"&&h<="E")p=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")p=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")p=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")p=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")p="\0";else if(h==="V")p="@";else if(h==="W")p="`";else if(h==="X"||h==="Y"||h==="Z")p="";else throw new $;break;case"/":if(h>="A"&&h<="O")p=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")p=":";else throw new $;break}o+=p,a++}else o+=u}return o}}Ne.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ne.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ne.ASTERISK_ENCODING=148;class Oe extends Ct{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,i,o){let a=this.decodeStart(i),u=this.decodeEnd(i),h=new Z;Oe.decodeMiddle(i,a[1],u[0],h);let p=h.toString(),m=null;o!=null&&(m=o.get(se.ALLOWED_LENGTHS)),m==null&&(m=Oe.DEFAULT_ALLOWED_LENGTHS);let y=p.length,E=!1,N=0;for(let K of m){if(y===K){E=!0;break}K>N&&(N=K)}if(!E&&y>N&&(E=!0),!E)throw new $;const O=[new Te(a[1],t),new Te(u[0],t)];return new ve(p,null,0,O,ge.ITF,new Date().getTime())}static decodeMiddle(t,i,o,a){let u=new Int32Array(10),h=new Int32Array(5),p=new Int32Array(5);for(u.fill(0),h.fill(0),p.fill(0);i<o;){Ct.recordPattern(t,i,u);for(let y=0;y<5;y++){let E=2*y;h[y]=u[E],p[y]=u[E+1]}let m=Oe.decodeDigit(h);a.append(m.toString()),m=this.decodeDigit(p),a.append(m.toString()),u.forEach(function(y){i+=y})}}decodeStart(t){let i=Oe.skipWhiteSpace(t),o=Oe.findGuardPattern(t,i,Oe.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(t,o[0]),o}validateQuietZone(t,i){let o=this.narrowLineWidth*10;o=o<i?o:i;for(let a=i-1;o>0&&a>=0&&!t.get(a);a--)o--;if(o!==0)throw new G}static skipWhiteSpace(t){const i=t.getSize(),o=t.getNextSet(0);if(o===i)throw new G;return o}decodeEnd(t){t.reverse();try{let i=Oe.skipWhiteSpace(t),o;try{o=Oe.findGuardPattern(t,i,Oe.END_PATTERN_REVERSED[0])}catch(u){u instanceof G&&(o=Oe.findGuardPattern(t,i,Oe.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,o[0]);let a=o[0];return o[0]=t.getSize()-o[1],o[1]=t.getSize()-a,o}finally{t.reverse()}}static findGuardPattern(t,i,o){let a=o.length,u=new Int32Array(a),h=t.getSize(),p=!1,m=0,y=i;u.fill(0);for(let E=i;E<h;E++)if(t.get(E)!==p)u[m]++;else{if(m===a-1){if(Ct.patternMatchVariance(u,o,Oe.MAX_INDIVIDUAL_VARIANCE)<Oe.MAX_AVG_VARIANCE)return[y,E];y+=u[0]+u[1],U.arraycopy(u,2,u,0,m-1),u[m-1]=0,u[m]=0,m--}else m++;u[m]=1,p=!p}throw new G}static decodeDigit(t){let i=Oe.MAX_AVG_VARIANCE,o=-1,a=Oe.PATTERNS.length;for(let u=0;u<a;u++){let h=Oe.PATTERNS[u],p=Ct.patternMatchVariance(t,h,Oe.MAX_INDIVIDUAL_VARIANCE);p<i?(i=p,o=u):p===i&&(o=-1)}if(o>=0)return o%10;throw new G}}Oe.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Oe.MAX_AVG_VARIANCE=.38,Oe.MAX_INDIVIDUAL_VARIANCE=.5,Oe.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Oe.START_PATTERN=Int32Array.from([1,1,1,1]),Oe.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class He extends Ct{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let i=!1,o,a=0,u=Int32Array.from([0,0,0]);for(;!i;){u=Int32Array.from([0,0,0]),o=He.findGuardPattern(t,a,!1,this.START_END_PATTERN,u);let h=o[0];a=o[1];let p=h-(a-h);p>=0&&(i=t.isRange(p,h,!1))}return o}static checkChecksum(t){return He.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let o=parseInt(t.charAt(i-1),10);return He.getStandardUPCEANChecksum(t.substring(0,i-1))===o}static getStandardUPCEANChecksum(t){let i=t.length,o=0;for(let a=i-1;a>=0;a-=2){let u=t.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new $;o+=u}o*=3;for(let a=i-2;a>=0;a-=2){let u=t.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new $;o+=u}return(1e3-o)%10}static decodeEnd(t,i){return He.findGuardPattern(t,i,!1,He.START_END_PATTERN,new Int32Array(He.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,i,o,a){return this.findGuardPattern(t,i,o,a,new Int32Array(a.length))}static findGuardPattern(t,i,o,a,u){let h=t.getSize();i=o?t.getNextUnset(i):t.getNextSet(i);let p=0,m=i,y=a.length,E=o;for(let N=i;N<h;N++)if(t.get(N)!==E)u[p]++;else{if(p===y-1){if(Ct.patternMatchVariance(u,a,He.MAX_INDIVIDUAL_VARIANCE)<He.MAX_AVG_VARIANCE)return Int32Array.from([m,N]);m+=u[0]+u[1];let O=u.slice(2,u.length-1);for(let j=0;j<p-1;j++)u[j]=O[j];u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,E=!E}throw new G}static decodeDigit(t,i,o,a){this.recordPattern(t,o,i);let u=this.MAX_AVG_VARIANCE,h=-1,p=a.length;for(let m=0;m<p;m++){let y=a[m],E=Ct.patternMatchVariance(i,y,He.MAX_INDIVIDUAL_VARIANCE);E<u&&(u=E,h=m)}if(h>=0)return h;throw new G}}He.MAX_AVG_VARIANCE=.48,He.MAX_INDIVIDUAL_VARIANCE=.7,He.START_END_PATTERN=Int32Array.from([1,1,1]),He.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),He.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),He.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Tt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,o){let a=this.decodeRowStringBuffer,u=this.decodeMiddle(i,o,a),h=a.toString(),p=Tt.parseExtensionString(h),m=[new Te((o[0]+o[1])/2,t),new Te(u,t)],y=new ve(h,null,0,m,ge.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&y.putAllMetadata(p),y}decodeMiddle(t,i,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=t.getSize(),h=i[1],p=0;for(let y=0;y<5&&h<u;y++){let E=He.decodeDigit(t,a,h,He.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let N of a)h+=N;E>=10&&(p|=1<<4-y),y!==4&&(h=t.getNextSet(h),h=t.getNextUnset(h))}if(o.length!==5)throw new G;let m=this.determineCheckDigit(p);if(Tt.extensionChecksum(o.toString())!==m)throw new G;return h}static extensionChecksum(t){let i=t.length,o=0;for(let a=i-2;a>=0;a-=2)o+=t.charAt(a).charCodeAt(0)-48;o*=3;for(let a=i-1;a>=0;a-=2)o+=t.charAt(a).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(t){for(let i=0;i<10;i++)if(t===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new G}static parseExtensionString(t){if(t.length!==5)return null;let i=Tt.parseExtension5String(t);return i==null?null:new Map([[Be.SUGGESTED_PRICE,i]])}static parseExtension5String(t){let i;switch(t.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let o=parseInt(t.substring(1)),a=(o/100).toString(),u=o%100,h=u<10?"0"+u:u.toString();return i+a+"."+h}}class Dt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,o){let a=this.decodeRowStringBuffer,u=this.decodeMiddle(i,o,a),h=a.toString(),p=Dt.parseExtensionString(h),m=[new Te((o[0]+o[1])/2,t),new Te(u,t)],y=new ve(h,null,0,m,ge.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&y.putAllMetadata(p),y}decodeMiddle(t,i,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=t.getSize(),h=i[1],p=0;for(let m=0;m<2&&h<u;m++){let y=He.decodeDigit(t,a,h,He.L_AND_G_PATTERNS);o+=String.fromCharCode(48+y%10);for(let E of a)h+=E;y>=10&&(p|=1<<1-m),m!==1&&(h=t.getNextSet(h),h=t.getNextUnset(h))}if(o.length!==2)throw new G;if(parseInt(o.toString())%4!==p)throw new G;return h}static parseExtensionString(t){return t.length!==2?null:new Map([[Be.ISSUE_NUMBER,parseInt(t)]])}}class Ge{static decodeRow(t,i,o){let a=He.findGuardPattern(i,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Tt().decodeRow(t,i,a)}catch{return new Dt().decodeRow(t,i,a)}}}Ge.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ht extends He{constructor(){super(),this.decodeRowStringBuffer="",ht.L_AND_G_PATTERNS=ht.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let i=ht.L_PATTERNS[t-10],o=new Int32Array(i.length);for(let a=0;a<i.length;a++)o[a]=i[i.length-a-1];ht.L_AND_G_PATTERNS[t]=o}}decodeRow(t,i,o){let a=ht.findStartGuardPattern(i),u=o==null?null:o.get(se.NEED_RESULT_POINT_CALLBACK);if(u!=null){const Ee=new Te((a[0]+a[1])/2,t);u.foundPossibleResultPoint(Ee)}let h=this.decodeMiddle(i,a,this.decodeRowStringBuffer),p=h.rowOffset,m=h.resultString;if(u!=null){const Ee=new Te(p,t);u.foundPossibleResultPoint(Ee)}let y=this.decodeEnd(i,p);if(u!=null){const Ee=new Te((y[0]+y[1])/2,t);u.foundPossibleResultPoint(Ee)}let E=y[1],N=E+(E-y[0]);if(N>=i.getSize()||!i.isRange(E,N,!1))throw new G;let O=m.toString();if(O.length<8)throw new $;if(!ht.checkChecksum(O))throw new F;let j=(a[1]+a[0])/2,K=(y[1]+y[0])/2,q=this.getBarcodeFormat(),ie=[new Te(j,t),new Te(K,t)],le=new ve(O,null,0,ie,q,new Date().getTime()),Ae=0;try{let Ee=Ge.decodeRow(t,i,y[1]);le.putMetadata(Be.UPC_EAN_EXTENSION,Ee.getText()),le.putAllMetadata(Ee.getResultMetadata()),le.addResultPoints(Ee.getResultPoints()),Ae=Ee.getText().length}catch{}let xe=o==null?null:o.get(se.ALLOWED_EAN_EXTENSIONS);if(xe!=null){let Ee=!1;for(let rt in xe)if(Ae.toString()===rt){Ee=!0;break}if(!Ee)throw new G}return le}decodeEnd(t,i){return ht.findGuardPattern(t,i,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return ht.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let o=parseInt(t.charAt(i-1),10);return ht.getStandardUPCEANChecksum(t.substring(0,i-1))===o}static getStandardUPCEANChecksum(t){let i=t.length,o=0;for(let a=i-1;a>=0;a-=2){let u=t.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new $;o+=u}o*=3;for(let a=i-2;a>=0;a-=2){let u=t.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new $;o+=u}return(1e3-o)%10}}class Ni extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=t.getSize(),h=i[1],p=0;for(let y=0;y<6&&h<u;y++){let E=ht.decodeDigit(t,a,h,ht.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let N of a)h+=N;E>=10&&(p|=1<<5-y)}o=Ni.determineFirstDigit(o,p),h=ht.findGuardPattern(t,h,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<6&&h<u;y++){let E=ht.decodeDigit(t,a,h,ht.L_PATTERNS);o+=String.fromCharCode(48+E);for(let N of a)h+=N}return{rowOffset:h,resultString:o}}getBarcodeFormat(){return ge.EAN_13}static determineFirstDigit(t,i){for(let o=0;o<10;o++)if(i===this.FIRST_DIGIT_ENCODINGS[o])return t=String.fromCharCode(48+o)+t,t;throw new G}}Ni.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ws extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,o){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=t.getSize(),h=i[1];for(let m=0;m<4&&h<u;m++){let y=ht.decodeDigit(t,a,h,ht.L_PATTERNS);o+=String.fromCharCode(48+y);for(let E of a)h+=E}h=ht.findGuardPattern(t,h,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&h<u;m++){let y=ht.decodeDigit(t,a,h,ht.L_PATTERNS);o+=String.fromCharCode(48+y);for(let E of a)h+=E}return{rowOffset:h,resultString:o}}getBarcodeFormat(){return ge.EAN_8}}class yn extends ht{constructor(){super(...arguments),this.ean13Reader=new Ni}getBarcodeFormat(){return ge.UPC_A}decode(t,i){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,i,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,i,o))}decodeMiddle(t,i,o){return this.ean13Reader.decodeMiddle(t,i,o)}maybeReturnResult(t){let i=t.getText();if(i.charAt(0)==="0"){let o=new ve(i.substring(1),null,null,t.getResultPoints(),ge.UPC_A);return t.getResultMetadata()!=null&&o.putAllMetadata(t.getResultMetadata()),o}else throw new G}reset(){this.ean13Reader.reset()}}class Yn extends ht{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,i,o){const a=this.decodeMiddleCounters.map(y=>y);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const u=t.getSize();let h=i[1],p=0;for(let y=0;y<6&&h<u;y++){const E=Yn.decodeDigit(t,a,h,Yn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let N of a)h+=N;E>=10&&(p|=1<<5-y)}let m=Yn.determineNumSysAndCheckDigit(o,p);return{rowOffset:h,resultString:m}}decodeEnd(t,i){return Yn.findGuardPatternWithoutCounters(t,i,!0,Yn.MIDDLE_END_PATTERN)}checkChecksum(t){return ht.checkChecksum(Yn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,i){for(let o=0;o<=1;o++)for(let a=0;a<10;a++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][a]){let u=String.fromCharCode(48+o),h=String.fromCharCode(48+a);return u+t+h}throw G.getNotFoundInstance()}getBarcodeFormat(){return ge.UPC_E}static convertUPCEtoUPCA(t){const i=t.slice(1,7).split("").map(u=>u.charCodeAt(0)),o=new Z;o.append(t.charAt(0));let a=i[5];switch(a){case 0:case 1:case 2:o.appendChars(i,0,2),o.append(a),o.append("0000"),o.appendChars(i,2,3);break;case 3:o.appendChars(i,0,3),o.append("00000"),o.appendChars(i,3,2);break;case 4:o.appendChars(i,0,4),o.append("00000"),o.append(i[4]);break;default:o.appendChars(i,0,5),o.append("0000"),o.append(a);break}return t.length>=8&&o.append(t.charAt(7)),o.toString()}}Yn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Yn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ys extends Ct{constructor(t){super();let i=t==null?null:t.get(se.POSSIBLE_FORMATS),o=[];l(i)?(o.push(new Ni),o.push(new yn),o.push(new Ws),o.push(new Yn)):(i.indexOf(ge.EAN_13)>-1&&o.push(new Ni),i.indexOf(ge.UPC_A)>-1&&o.push(new yn),i.indexOf(ge.EAN_8)>-1&&o.push(new Ws),i.indexOf(ge.UPC_E)>-1&&o.push(new Yn)),this.readers=o}decodeRow(t,i,o){for(let a of this.readers)try{const u=a.decodeRow(t,i,o),h=u.getBarcodeFormat()===ge.EAN_13&&u.getText().charAt(0)==="0",p=o==null?null:o.get(se.POSSIBLE_FORMATS),m=p==null||p.includes(ge.UPC_A);if(h&&m){const y=u.getRawBytes(),E=new ve(u.getText().substring(1),y,y?y.length:null,u.getResultPoints(),ge.UPC_A);return E.putAllMetadata(u.getResultMetadata()),E}return u}catch{}throw new G}reset(){for(let t of this.readers)t.reset()}}class Qt extends Ct{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,i){for(let o=0;o<i.length;o++)if(Ct.patternMatchVariance(t,i[o],Qt.MAX_INDIVIDUAL_VARIANCE)<Qt.MAX_AVG_VARIANCE)return o;throw new G}static count(t){return Ye.sum(new Int32Array(t))}static increment(t,i){let o=0,a=i[0];for(let u=1;u<t.length;u++)i[u]>a&&(a=i[u],o=u);t[o]++}static decrement(t,i){let o=0,a=i[0];for(let u=1;u<t.length;u++)i[u]<a&&(a=i[u],o=u);t[o]--}static isFinderPattern(t){let i=t[0]+t[1],o=i+t[2]+t[3],a=i/o;if(a>=Qt.MIN_FINDER_PATTERN_RATIO&&a<=Qt.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let p of t)p>h&&(h=p),p<u&&(u=p);return h<10*u}return!1}}Qt.MAX_AVG_VARIANCE=.2,Qt.MAX_INDIVIDUAL_VARIANCE=.45,Qt.MIN_FINDER_PATTERN_RATIO=9.5/12,Qt.MAX_FINDER_PATTERN_RATIO=12.5/14;class ur{constructor(t,i){this.value=t,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof ur))return!1;const i=t;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class gi{constructor(t,i,o,a,u){this.value=t,this.startEnd=i,this.value=t,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new Te(o,u)),this.resultPoints.push(new Te(a,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof gi))return!1;const i=t;return this.value===i.value}hashCode(){return this.value}}class jt{constructor(){}static getRSSvalue(t,i,o){let a=0;for(let m of t)a+=m;let u=0,h=0,p=t.length;for(let m=0;m<p-1;m++){let y;for(y=1,h|=1<<m;y<t[m];y++,h&=~(1<<m)){let E=jt.combins(a-y-1,p-m-2);if(o&&h===0&&a-y-(p-m-1)>=p-m-1&&(E-=jt.combins(a-y-(p-m),p-m-2)),p-m-1>1){let N=0;for(let O=a-y-(p-m-2);O>i;O--)N+=jt.combins(a-y-O-1,p-m-3);E-=N*(p-1-m)}else a-y>i&&E--;u+=E}a-=y}return u}static combins(t,i){let o,a;t-i>i?(a=i,o=t-i):(a=t-i,o=i);let u=1,h=1;for(let p=t;p>o;p--)u*=p,h<=a&&(u/=h,h++);for(;h<=a;)u/=h,h++;return u}}class br{static buildBitArray(t){let i=t.length*2-1;t[t.length-1].getRightChar()==null&&(i-=1);let o=12*i,a=new X(o),u=0,p=t[0].getRightChar().getValue();for(let m=11;m>=0;--m)p&1<<m&&a.set(u),u++;for(let m=1;m<t.length;++m){let y=t[m],E=y.getLeftChar().getValue();for(let N=11;N>=0;--N)E&1<<N&&a.set(u),u++;if(y.getRightChar()!=null){let N=y.getRightChar().getValue();for(let O=11;O>=0;--O)N&1<<O&&a.set(u),u++}}return a}}class Ri{constructor(t,i){i?this.decodedInformation=null:(this.finished=t,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class cr{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Nt extends cr{constructor(t,i){super(t),this.value=i}getValue(){return this.value}isFNC1(){return this.value===Nt.FNC1}}Nt.FNC1="$";class Fe extends cr{constructor(t,i,o){super(t),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class fn extends cr{constructor(t,i,o){if(super(t),i<0||i>10||o<0||o>10)throw new $;this.firstDigit=i,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===fn.FNC1}isSecondDigitFNC1(){return this.secondDigit===fn.FNC1}isAnyFNC1(){return this.firstDigit===fn.FNC1||this.secondDigit===fn.FNC1}}fn.FNC1=10;class Me{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new G;let i=t.substring(0,2);for(let u of Me.TWO_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(2,u[2],t):Me.processFixedAI(2,u[1],t);if(t.length<3)throw new G;let o=t.substring(0,3);for(let u of Me.THREE_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(3,u[2],t):Me.processFixedAI(3,u[1],t);for(let u of Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,u[2],t):Me.processFixedAI(4,u[1],t);if(t.length<4)throw new G;let a=t.substring(0,4);for(let u of Me.FOUR_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,u[2],t):Me.processFixedAI(4,u[1],t);throw new G}static processFixedAI(t,i,o){if(o.length<t)throw new G;let a=o.substring(0,t);if(o.length<t+i)throw new G;let u=o.substring(t,t+i),h=o.substring(t+i),p="("+a+")"+u,m=Me.parseFieldsInGeneralPurpose(h);return m==null?p:p+m}static processVariableAI(t,i,o){let a=o.substring(0,t),u;o.length<t+i?u=o.length:u=t+i;let h=o.substring(t,u),p=o.substring(u),m="("+a+")"+h,y=Me.parseFieldsInGeneralPurpose(p);return y==null?m:m+y}}Me.VARIABLE_LENGTH=[],Me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Me.VARIABLE_LENGTH,20],["22",Me.VARIABLE_LENGTH,29],["30",Me.VARIABLE_LENGTH,8],["37",Me.VARIABLE_LENGTH,8],["90",Me.VARIABLE_LENGTH,30],["91",Me.VARIABLE_LENGTH,30],["92",Me.VARIABLE_LENGTH,30],["93",Me.VARIABLE_LENGTH,30],["94",Me.VARIABLE_LENGTH,30],["95",Me.VARIABLE_LENGTH,30],["96",Me.VARIABLE_LENGTH,30],["97",Me.VARIABLE_LENGTH,3],["98",Me.VARIABLE_LENGTH,30],["99",Me.VARIABLE_LENGTH,30]],Me.THREE_DIGIT_DATA_LENGTH=[["240",Me.VARIABLE_LENGTH,30],["241",Me.VARIABLE_LENGTH,30],["242",Me.VARIABLE_LENGTH,6],["250",Me.VARIABLE_LENGTH,30],["251",Me.VARIABLE_LENGTH,30],["253",Me.VARIABLE_LENGTH,17],["254",Me.VARIABLE_LENGTH,20],["400",Me.VARIABLE_LENGTH,30],["401",Me.VARIABLE_LENGTH,30],["402",17],["403",Me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Me.VARIABLE_LENGTH,20],["421",Me.VARIABLE_LENGTH,15],["422",3],["423",Me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Me.VARIABLE_LENGTH,15],["391",Me.VARIABLE_LENGTH,18],["392",Me.VARIABLE_LENGTH,15],["393",Me.VARIABLE_LENGTH,18],["703",Me.VARIABLE_LENGTH,30]],Me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Me.VARIABLE_LENGTH,20],["8003",Me.VARIABLE_LENGTH,30],["8004",Me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Me.VARIABLE_LENGTH,30],["8008",Me.VARIABLE_LENGTH,12],["8018",18],["8020",Me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Me.VARIABLE_LENGTH,70],["8200",Me.VARIABLE_LENGTH,70]];class Zi{constructor(t){this.buffer=new Z,this.information=t}decodeAllCodes(t,i){let o=i,a=null;do{let u=this.decodeGeneralPurposeField(o,a),h=Me.parseFieldsInGeneralPurpose(u.getNewString());if(h!=null&&t.append(h),u.isRemaining()?a=""+u.getRemainingValue():a=null,o===u.getNewPosition())break;o=u.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let i=t;i<t+3;++i)if(this.information.get(i))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(t,4);return u===0?new fn(this.information.getSize(),fn.FNC1,fn.FNC1):new fn(this.information.getSize(),u-1,fn.FNC1)}let i=this.extractNumericValueFromBitArray(t,7),o=(i-8)/11,a=(i-8)%11;return new fn(t+7,o,a)}extractNumericValueFromBitArray(t,i){return Zi.extractNumericValueFromBitArray(this.information,t,i)}static extractNumericValueFromBitArray(t,i,o){let a=0;for(let u=0;u<o;++u)t.get(i+u)&&(a|=1<<o-u-1);return a}decodeGeneralPurposeField(t,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(t);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Fe(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Fe(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,i;do{let o=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),t=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),t=i.isFinished()):(i=this.parseNumericBlock(),t=i.isFinished()),!(o!==this.current.getPosition())&&!t)break}while(!t);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let i;return t.isSecondDigitFNC1()?i=new Fe(this.current.getPosition(),this.buffer.toString()):i=new Fe(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Ri(!0,i)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let i=new Fe(this.current.getPosition(),this.buffer.toString());return new Ri(!0,i)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ri(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Fe(this.current.getPosition(),this.buffer.toString());return new Ri(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ri(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Fe(this.current.getPosition(),this.buffer.toString());return new Ri(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ri(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<116)return!0;if(t+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,8);return a>=232&&a<253}decodeIsoIec646(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Nt(t+5,Nt.FNC1);if(i>=5&&i<15)return new Nt(t+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<90)return new Nt(t+7,""+(o+1));if(o>=90&&o<116)return new Nt(t+7,""+(o+7));let a=this.extractNumericValueFromBitArray(t,8),u;switch(a){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new $}return new Nt(t+8,u)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,6);return o>=16&&o<63}decodeAlphanumeric(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Nt(t+5,Nt.FNC1);if(i>=5&&i<15)return new Nt(t+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(t,6);if(o>=32&&o<58)return new Nt(t+6,""+(o+33));let a;switch(o){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Yt("Decoding invalid alphanumeric value: "+o)}return new Nt(t+6,a)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<5&&i+t<this.information.getSize();++i)if(i===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+i))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let i=t;i<t+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<4&&i+t<this.information.getSize();++i)if(this.information.get(t+i))return!1;return!0}}class hr{constructor(t){this.information=t,this.generalDecoder=new Zi(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class pn extends hr{constructor(t){super(t)}encodeCompressedGtin(t,i){t.append("(01)");let o=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,i,o)}encodeCompressedGtinWithoutAI(t,i,o){for(let a=0;a<4;++a){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*a,10);u/100===0&&t.append("0"),u/10===0&&t.append("0"),t.append(u)}pn.appendCheckDigit(t,o)}static appendCheckDigit(t,i){let o=0;for(let a=0;a<13;a++){let u=t.charAt(a+i).charCodeAt(0)-48;o+=a&1?u:3*u}o=10-o%10,o===10&&(o=0),t.append(o)}}pn.GTIN_SIZE=40;class Gi extends pn{constructor(t){super(t)}parseInformation(){let t=new Z;t.append("(01)");let i=t.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(Gi.HEADER_SIZE,4);return t.append(o),this.encodeCompressedGtinWithoutAI(t,Gi.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(t,Gi.HEADER_SIZE+44)}}Gi.HEADER_SIZE=4;class kn extends hr{constructor(t){super(t)}parseInformation(){let t=new Z;return this.getGeneralDecoder().decodeAllCodes(t,kn.HEADER_SIZE)}}kn.HEADER_SIZE=5;class Xi extends pn{constructor(t){super(t)}encodeCompressedWeight(t,i,o){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,o);this.addWeightCode(t,a);let u=this.checkWeight(a),h=1e5;for(let p=0;p<5;++p)u/h===0&&t.append("0"),h/=10;t.append(u)}}class Kn extends Xi{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Kn.HEADER_SIZE+Xi.GTIN_SIZE+Kn.WEIGHT_SIZE)throw new G;let t=new Z;return this.encodeCompressedGtin(t,Kn.HEADER_SIZE),this.encodeCompressedWeight(t,Kn.HEADER_SIZE+Xi.GTIN_SIZE,Kn.WEIGHT_SIZE),t.toString()}}Kn.HEADER_SIZE=5,Kn.WEIGHT_SIZE=15;class sn extends Kn{constructor(t){super(t)}addWeightCode(t,i){t.append("(3103)")}checkWeight(t){return t}}class Do extends Kn{constructor(t){super(t)}addWeightCode(t,i){i<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Qn extends pn{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Qn.HEADER_SIZE+pn.GTIN_SIZE)throw new G;let t=new Z;this.encodeCompressedGtin(t,Qn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE+pn.GTIN_SIZE,Qn.LAST_DIGIT_SIZE);t.append("(392"),t.append(i),t.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(Qn.HEADER_SIZE+pn.GTIN_SIZE+Qn.LAST_DIGIT_SIZE,null);return t.append(o.getNewString()),t.toString()}}Qn.HEADER_SIZE=8,Qn.LAST_DIGIT_SIZE=2;class on extends pn{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<on.HEADER_SIZE+pn.GTIN_SIZE)throw new G;let t=new Z;this.encodeCompressedGtin(t,on.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(on.HEADER_SIZE+pn.GTIN_SIZE,on.LAST_DIGIT_SIZE);t.append("(393"),t.append(i),t.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(on.HEADER_SIZE+pn.GTIN_SIZE+on.LAST_DIGIT_SIZE,on.FIRST_THREE_DIGITS_SIZE);o/100==0&&t.append("0"),o/10==0&&t.append("0"),t.append(o);let a=this.getGeneralDecoder().decodeGeneralPurposeField(on.HEADER_SIZE+pn.GTIN_SIZE+on.LAST_DIGIT_SIZE+on.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()}}on.HEADER_SIZE=8,on.LAST_DIGIT_SIZE=2,on.FIRST_THREE_DIGITS_SIZE=10;class Rt extends Xi{constructor(t,i,o){super(t),this.dateCode=o,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE+Rt.DATE_SIZE)throw new G;let t=new Z;return this.encodeCompressedGtin(t,Rt.HEADER_SIZE),this.encodeCompressedWeight(t,Rt.HEADER_SIZE+Rt.GTIN_SIZE,Rt.WEIGHT_SIZE),this.encodeCompressedDate(t,Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(i,Rt.DATE_SIZE);if(o==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let a=o%32;o/=32;let u=o%12+1;o/=12;let h=o;h/10==0&&t.append("0"),t.append(h),u/10==0&&t.append("0"),t.append(u),a/10==0&&t.append("0"),t.append(a)}addWeightCode(t,i){t.append("("),t.append(this.firstAIdigits),t.append(i/1e5),t.append(")")}checkWeight(t){return t%1e5}}Rt.HEADER_SIZE=8,Rt.WEIGHT_SIZE=20,Rt.DATE_SIZE=16;function Ir(T){try{if(T.get(1))return new Gi(T);if(!T.get(2))return new kn(T);switch(Zi.extractNumericValueFromBitArray(T,1,4)){case 4:return new sn(T);case 5:return new Do(T)}switch(Zi.extractNumericValueFromBitArray(T,1,5)){case 12:return new Qn(T);case 13:return new on(T)}switch(Zi.extractNumericValueFromBitArray(T,1,7)){case 56:return new Rt(T,"310","11");case 57:return new Rt(T,"320","11");case 58:return new Rt(T,"310","13");case 59:return new Rt(T,"320","13");case 60:return new Rt(T,"310","15");case 61:return new Rt(T,"320","15");case 62:return new Rt(T,"310","17");case 63:return new Rt(T,"320","17")}}catch(t){throw console.log(t),new Yt("unknown decoder: "+T)}}class Oi{constructor(t,i,o,a){this.leftchar=t,this.rightchar=i,this.finderpattern=o,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,i){return t instanceof Oi?Oi.equalsOrNull(t.leftchar,i.leftchar)&&Oi.equalsOrNull(t.rightchar,i.rightchar)&&Oi.equalsOrNull(t.finderpattern,i.finderpattern):!1}static equalsOrNull(t,i){return t===null?i===null:Oi.equals(t,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class vs{constructor(t,i,o){this.pairs=t,this.rowNumber=i,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,i){return t instanceof vs?this.checkEqualitity(t,i)&&t.wasReversed===i.wasReversed:!1}checkEqualitity(t,i){if(!t||!i)return;let o;return t.forEach((a,u)=>{i.forEach(h=>{a.getLeftChar().getValue()===h.getLeftChar().getValue()&&a.getRightChar().getValue()===h.getRightChar().getValue()&&a.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(o=!0)})}),o}}class ye extends Qt{constructor(t){super(...arguments),this.pairs=new Array(ye.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,i,o){this.pairs.length=0,this.startFromEven=!1;try{return ye.constructResult(this.decodeRow2pairs(t,i))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,ye.constructResult(this.decodeRow2pairs(t,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,i){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,t))}catch(u){if(u instanceof G){if(!this.pairs.length)throw new G;o=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new G}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return t&&(this.rows=this.rows.reverse()),i}checkRows(t,i){for(let o=i;o<this.rows.length;o++){let a=this.rows[o];this.pairs.length=0;for(let h of t)this.pairs.push(h.getPairs());if(this.pairs.push(a.getPairs()),!ye.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(t);u.push(a);try{return this.checkRows(u,o+1)}catch(h){this.verbose&&console.log(h)}}throw new G}static isValidSequence(t){for(let i of ye.FINDER_PATTERN_SEQUENCES){if(t.length>i.length)continue;let o=!0;for(let a=0;a<t.length;a++)if(t[a].getFinderPattern().getValue()!=i[a]){o=!1;break}if(o)return!0}return!1}storeRow(t,i){let o=0,a=!1,u=!1;for(;o<this.rows.length;){let h=this.rows[o];if(h.getRowNumber()>t){u=h.isEquivalent(this.pairs);break}a=h.isEquivalent(this.pairs),o++}u||a||ye.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new vs(this.pairs,t,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,i){for(let o of i)if(o.getPairs().length!==t.length){for(let a of o.getPairs())for(let u of t)if(Oi.equals(a,u))break}}static isPartialRow(t,i){for(let o of i){let a=!0;for(let u of t){let h=!1;for(let p of o.getPairs())if(u.equals(p)){h=!0;break}if(!h){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(t){let i=br.buildBitArray(t),a=Ir(i).parseInformation(),u=t[0].getFinderPattern().getResultPoints(),h=t[t.length-1].getFinderPattern().getResultPoints(),p=[u[0],u[1],h[0],h[1]];return new ve(a,null,null,p,ge.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),i=t.getLeftChar(),o=t.getRightChar();if(o==null)return!1;let a=o.getChecksumPortion(),u=2;for(let p=1;p<this.pairs.size();++p){let m=this.pairs.get(p);a+=m.getLeftChar().getChecksumPortion(),u++;let y=m.getRightChar();y!=null&&(a+=y.getChecksumPortion(),u++)}return a%=211,211*(u-4)+a==i.getValue()}static getNextSecondBar(t,i){let o;return t.get(i)?(o=t.getNextUnset(i),o=t.getNextSet(o)):(o=t.getNextSet(i),o=t.getNextUnset(o)),o}retrieveNextPair(t,i,o){let a=i.length%2==0;this.startFromEven&&(a=!a);let u,h=!0,p=-1;do this.findNextPair(t,i,p),u=this.parseFoundFinderPattern(t,o,a),u==null?p=ye.getNextSecondBar(t,this.startEnd[0]):h=!1;while(h);let m=this.decodeDataCharacter(t,u,a,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new G;let y;try{y=this.decodeDataCharacter(t,u,a,!1)}catch(E){y=null,this.verbose&&console.log(E)}return new Oi(m,y,u,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,i,o){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=t.getSize(),h;o>=0?h=o:this.isEmptyPair(i)?h=0:h=i[i.length-1].getFinderPattern().getStartEnd()[1];let p=i.length%2!=0;this.startFromEven&&(p=!p);let m=!1;for(;h<u&&(m=!t.get(h),!!m);)h++;let y=0,E=h;for(let N=h;N<u;N++)if(t.get(N)!=m)a[y]++;else{if(y==3){if(p&&ye.reverseCounters(a),ye.isFinderPattern(a)){this.startEnd[0]=E,this.startEnd[1]=N;return}p&&ye.reverseCounters(a),E+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,y--}else y++;a[y]=1,m=!m}throw new G}static reverseCounters(t){let i=t.length;for(let o=0;o<i/2;++o){let a=t[o];t[o]=t[i-o-1],t[i-o-1]=a}}parseFoundFinderPattern(t,i,o){let a,u,h;if(o){let y=this.startEnd[0]-1;for(;y>=0&&!t.get(y);)y--;y++,a=this.startEnd[0]-y,u=y,h=this.startEnd[1]}else u=this.startEnd[0],h=t.getNextUnset(this.startEnd[1]+1),a=h-this.startEnd[1];let p=this.getDecodeFinderCounters();U.arraycopy(p,0,p,1,p.length-1),p[0]=a;let m;try{m=this.parseFinderValue(p,ye.FINDER_PATTERNS)}catch{return null}return new gi(m,[u,h],u,h,i)}decodeDataCharacter(t,i,o,a){let u=this.getDataCharacterCounters();for(let wt=0;wt<u.length;wt++)u[wt]=0;if(a)ye.recordPatternInReverse(t,i.getStartEnd()[0],u);else{ye.recordPattern(t,i.getStartEnd()[1],u);for(let wt=0,Cn=u.length-1;wt<Cn;wt++,Cn--){let Un=u[wt];u[wt]=u[Cn],u[Cn]=Un}}let h=17,p=Ye.sum(new Int32Array(u))/h,m=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(p-m)/m>.3)throw new G;let y=this.getOddCounts(),E=this.getEvenCounts(),N=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let wt=0;wt<u.length;wt++){let Cn=1*u[wt]/p,Un=Cn+.5;if(Un<1){if(Cn<.3)throw new G;Un=1}else if(Un>8){if(Cn>8.7)throw new G;Un=8}let Qr=wt/2;wt&1?(E[Qr]=Un,O[Qr]=Cn-Un):(y[Qr]=Un,N[Qr]=Cn-Un)}this.adjustOddEvenCounts(h);let j=4*i.getValue()+(o?0:2)+(a?0:1)-1,K=0,q=0;for(let wt=y.length-1;wt>=0;wt--){if(ye.isNotA1left(i,o,a)){let Cn=ye.WEIGHTS[j][2*wt];q+=y[wt]*Cn}K+=y[wt]}let ie=0;for(let wt=E.length-1;wt>=0;wt--)if(ye.isNotA1left(i,o,a)){let Cn=ye.WEIGHTS[j][2*wt+1];ie+=E[wt]*Cn}let le=q+ie;if(K&1||K>13||K<4)throw new G;let Ae=(13-K)/2,xe=ye.SYMBOL_WIDEST[Ae],Ee=9-xe,rt=jt.getRSSvalue(y,xe,!0),et=jt.getRSSvalue(E,Ee,!1),Ht=ye.EVEN_TOTAL_SUBSET[Ae],jn=ye.GSUM[Ae],zn=rt*Ht+et+jn;return new ur(zn,le)}static isNotA1left(t,i,o){return!(t.getValue()==0&&i&&o)}adjustOddEvenCounts(t){let i=Ye.sum(new Int32Array(this.getOddCounts())),o=Ye.sum(new Int32Array(this.getEvenCounts())),a=!1,u=!1;i>13?u=!0:i<4&&(a=!0);let h=!1,p=!1;o>13?p=!0:o<4&&(h=!0);let m=i+o-t,y=(i&1)==1,E=(o&1)==0;if(m==1)if(y){if(E)throw new G;u=!0}else{if(!E)throw new G;p=!0}else if(m==-1)if(y){if(E)throw new G;a=!0}else{if(!E)throw new G;h=!0}else if(m==0){if(y){if(!E)throw new G;i<o?(a=!0,p=!0):(u=!0,h=!0)}else if(E)throw new G}else throw new G;if(a){if(u)throw new G;ye.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&ye.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(p)throw new G;ye.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&ye.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ye.SYMBOL_WIDEST=[7,5,4,3,1],ye.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ye.GSUM=[0,348,1388,2948,3988],ye.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ye.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ye.FINDER_PAT_A=0,ye.FINDER_PAT_B=1,ye.FINDER_PAT_C=2,ye.FINDER_PAT_D=3,ye.FINDER_PAT_E=4,ye.FINDER_PAT_F=5,ye.FINDER_PATTERN_SEQUENCES=[[ye.FINDER_PAT_A,ye.FINDER_PAT_A],[ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B],[ye.FINDER_PAT_A,ye.FINDER_PAT_C,ye.FINDER_PAT_B,ye.FINDER_PAT_D],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_C],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_D,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_D],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_E],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F]],ye.MAX_PAIRS=11;class Bo extends ur{constructor(t,i,o){super(t,i),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Bt extends Qt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,i,o){const a=this.decodePair(i,!1,t,o);Bt.addOrTally(this.possibleLeftPairs,a),i.reverse();let u=this.decodePair(i,!0,t,o);Bt.addOrTally(this.possibleRightPairs,u),i.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Bt.checkChecksum(h,p))return Bt.constructResult(h,p)}throw new G}static addOrTally(t,i){if(i==null)return;let o=!1;for(let a of t)if(a.getValue()===i.getValue()){a.incrementCount(),o=!0;break}o||t.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,i){let o=4537077*t.getValue()+i.getValue(),a=new String(o).toString(),u=new Z;for(let y=13-a.length;y>0;y--)u.append("0");u.append(a);let h=0;for(let y=0;y<13;y++){let E=u.charAt(y).charCodeAt(0)-48;h+=y&1?E:3*E}h=10-h%10,h===10&&(h=0),u.append(h.toString());let p=t.getFinderPattern().getResultPoints(),m=i.getFinderPattern().getResultPoints();return new ve(u.toString(),null,0,[p[0],p[1],m[0],m[1]],ge.RSS_14,new Date().getTime())}static checkChecksum(t,i){let o=(t.getChecksumPortion()+16*i.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+i.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,o===a}decodePair(t,i,o,a){try{let u=this.findFinderPattern(t,i),h=this.parseFoundFinderPattern(t,o,i,u),p=a==null?null:a.get(se.NEED_RESULT_POINT_CALLBACK);if(p!=null){let E=(u[0]+u[1])/2;i&&(E=t.getSize()-1-E),p.foundPossibleResultPoint(new Te(E,o))}let m=this.decodeDataCharacter(t,h,!0),y=this.decodeDataCharacter(t,h,!1);return new Bo(1597*m.getValue()+y.getValue(),m.getChecksumPortion()+4*y.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(t,i,o){let a=this.getDataCharacterCounters();for(let ie=0;ie<a.length;ie++)a[ie]=0;if(o)Ct.recordPatternInReverse(t,i.getStartEnd()[0],a);else{Ct.recordPattern(t,i.getStartEnd()[1]+1,a);for(let ie=0,le=a.length-1;ie<le;ie++,le--){let Ae=a[ie];a[ie]=a[le],a[le]=Ae}}let u=o?16:15,h=Ye.sum(new Int32Array(a))/u,p=this.getOddCounts(),m=this.getEvenCounts(),y=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let ie=0;ie<a.length;ie++){let le=a[ie]/h,Ae=Math.floor(le+.5);Ae<1?Ae=1:Ae>8&&(Ae=8);let xe=Math.floor(ie/2);ie&1?(m[xe]=Ae,E[xe]=le-Ae):(p[xe]=Ae,y[xe]=le-Ae)}this.adjustOddEvenCounts(o,u);let N=0,O=0;for(let ie=p.length-1;ie>=0;ie--)O*=9,O+=p[ie],N+=p[ie];let j=0,K=0;for(let ie=m.length-1;ie>=0;ie--)j*=9,j+=m[ie],K+=m[ie];let q=O+3*j;if(o){if(N&1||N>12||N<4)throw new G;let ie=(12-N)/2,le=Bt.OUTSIDE_ODD_WIDEST[ie],Ae=9-le,xe=jt.getRSSvalue(p,le,!1),Ee=jt.getRSSvalue(m,Ae,!0),rt=Bt.OUTSIDE_EVEN_TOTAL_SUBSET[ie],et=Bt.OUTSIDE_GSUM[ie];return new ur(xe*rt+Ee+et,q)}else{if(K&1||K>10||K<4)throw new G;let ie=(10-K)/2,le=Bt.INSIDE_ODD_WIDEST[ie],Ae=9-le,xe=jt.getRSSvalue(p,le,!0),Ee=jt.getRSSvalue(m,Ae,!1),rt=Bt.INSIDE_ODD_TOTAL_SUBSET[ie],et=Bt.INSIDE_GSUM[ie];return new ur(Ee*rt+xe+et,q)}}findFinderPattern(t,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),u=!1,h=0;for(;h<a&&(u=!t.get(h),i!==u);)h++;let p=0,m=h;for(let y=h;y<a;y++)if(t.get(y)!==u)o[p]++;else{if(p===3){if(Qt.isFinderPattern(o))return[m,y];m+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,p--}else p++;o[p]=1,u=!u}throw new G}parseFoundFinderPattern(t,i,o,a){let u=t.get(a[0]),h=a[0]-1;for(;h>=0&&u!==t.get(h);)h--;h++;const p=a[0]-h,m=this.getDecodeFinderCounters(),y=new Int32Array(m.length);U.arraycopy(m,0,y,1,m.length-1),y[0]=p;const E=this.parseFinderValue(y,Bt.FINDER_PATTERNS);let N=h,O=a[1];return o&&(N=t.getSize()-1-N,O=t.getSize()-1-O),new gi(E,[h,a[1]],N,O,i)}adjustOddEvenCounts(t,i){let o=Ye.sum(new Int32Array(this.getOddCounts())),a=Ye.sum(new Int32Array(this.getEvenCounts())),u=!1,h=!1,p=!1,m=!1;t?(o>12?h=!0:o<4&&(u=!0),a>12?m=!0:a<4&&(p=!0)):(o>11?h=!0:o<5&&(u=!0),a>10?m=!0:a<4&&(p=!0));let y=o+a-i,E=(o&1)===(t?1:0),N=(a&1)===1;if(y===1)if(E){if(N)throw new G;h=!0}else{if(!N)throw new G;m=!0}else if(y===-1)if(E){if(N)throw new G;u=!0}else{if(!N)throw new G;p=!0}else if(y===0){if(E){if(!N)throw new G;o<a?(u=!0,m=!0):(h=!0,p=!0)}else if(N)throw new G}else throw new G;if(u){if(h)throw new G;Qt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&Qt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(m)throw new G;Qt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&Qt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Bt.OUTSIDE_GSUM=[0,161,961,2015,2715],Bt.INSIDE_GSUM=[0,336,1036,1516],Bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Bt.INSIDE_ODD_WIDEST=[2,4,6,8],Bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ki extends Ct{constructor(t,i){super(),this.readers=[],this.verbose=i===!0;const o=t?t.get(se.POSSIBLE_FORMATS):null,a=t&&t.get(se.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(ge.EAN_13)||o.includes(ge.UPC_A)||o.includes(ge.EAN_8)||o.includes(ge.UPC_E))&&this.readers.push(new ys(t)),o.includes(ge.CODE_39)&&this.readers.push(new Ne(a)),o.includes(ge.CODE_128)&&this.readers.push(new Ie),o.includes(ge.ITF)&&this.readers.push(new Oe),o.includes(ge.RSS_14)&&this.readers.push(new Bt),o.includes(ge.RSS_EXPANDED)&&this.readers.push(new ye(this.verbose))):(this.readers.push(new ys(t)),this.readers.push(new Ne),this.readers.push(new ys(t)),this.readers.push(new Ie),this.readers.push(new Oe),this.readers.push(new Bt),this.readers.push(new ye(this.verbose)))}decodeRow(t,i,o){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,i,o)}catch{}throw new G}reset(){this.readers.forEach(t=>t.reset())}}class dr extends Ve{constructor(t=500,i){super(new ki(i),t,i)}}class pt{constructor(t,i,o){this.ecCodewords=t,this.ecBlocks=[i],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class at{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class $e{constructor(t,i,o,a,u,h){this.versionNumber=t,this.symbolSizeRows=i,this.symbolSizeColumns=o,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=u,this.ecBlocks=h;let p=0;const m=h.getECCodewords(),y=h.getECBlocks();for(let E of y)p+=E.getCount()*(E.getDataCodewords()+m);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,i){if(t&1||i&1)throw new $;for(let o of $e.VERSIONS)if(o.symbolSizeRows===t&&o.symbolSizeColumns===i)return o;throw new $}toString(){return""+this.versionNumber}static buildVersions(){return[new $e(1,10,10,8,8,new pt(5,new at(1,3))),new $e(2,12,12,10,10,new pt(7,new at(1,5))),new $e(3,14,14,12,12,new pt(10,new at(1,8))),new $e(4,16,16,14,14,new pt(12,new at(1,12))),new $e(5,18,18,16,16,new pt(14,new at(1,18))),new $e(6,20,20,18,18,new pt(18,new at(1,22))),new $e(7,22,22,20,20,new pt(20,new at(1,30))),new $e(8,24,24,22,22,new pt(24,new at(1,36))),new $e(9,26,26,24,24,new pt(28,new at(1,44))),new $e(10,32,32,14,14,new pt(36,new at(1,62))),new $e(11,36,36,16,16,new pt(42,new at(1,86))),new $e(12,40,40,18,18,new pt(48,new at(1,114))),new $e(13,44,44,20,20,new pt(56,new at(1,144))),new $e(14,48,48,22,22,new pt(68,new at(1,174))),new $e(15,52,52,24,24,new pt(42,new at(2,102))),new $e(16,64,64,14,14,new pt(56,new at(2,140))),new $e(17,72,72,16,16,new pt(36,new at(4,92))),new $e(18,80,80,18,18,new pt(48,new at(4,114))),new $e(19,88,88,20,20,new pt(56,new at(4,144))),new $e(20,96,96,22,22,new pt(68,new at(4,174))),new $e(21,104,104,24,24,new pt(56,new at(6,136))),new $e(22,120,120,18,18,new pt(68,new at(6,175))),new $e(23,132,132,20,20,new pt(62,new at(8,163))),new $e(24,144,144,22,22,new pt(62,new at(8,156),new at(2,155))),new $e(25,8,18,6,16,new pt(7,new at(1,5))),new $e(26,8,32,6,14,new pt(11,new at(1,10))),new $e(27,12,26,10,24,new pt(14,new at(1,16))),new $e(28,12,36,10,16,new pt(18,new at(1,22))),new $e(29,16,36,14,16,new pt(24,new at(1,32))),new $e(30,16,48,14,22,new pt(28,new at(1,49)))]}}$e.VERSIONS=$e.buildVersions();class st{constructor(t){const i=t.getHeight();if(i<8||i>144||i&1)throw new $;this.version=st.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new te(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const i=t.getHeight(),o=t.getWidth();return $e.getVersionForDimensions(i,o)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let i=0,o=4,a=0;const u=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let p=!1,m=!1,y=!1,E=!1;do if(o===u&&a===0&&!p)t[i++]=this.readCorner1(u,h)&255,o-=2,a+=2,p=!0;else if(o===u-2&&a===0&&h&3&&!m)t[i++]=this.readCorner2(u,h)&255,o-=2,a+=2,m=!0;else if(o===u+4&&a===2&&!(h&7)&&!y)t[i++]=this.readCorner3(u,h)&255,o-=2,a+=2,y=!0;else if(o===u-2&&a===0&&(h&7)===4&&!E)t[i++]=this.readCorner4(u,h)&255,o-=2,a+=2,E=!0;else{do o<u&&a>=0&&!this.readMappingMatrix.get(a,o)&&(t[i++]=this.readUtah(o,a,u,h)&255),o-=2,a+=2;while(o>=0&&a<h);o+=1,a+=3;do o>=0&&a<h&&!this.readMappingMatrix.get(a,o)&&(t[i++]=this.readUtah(o,a,u,h)&255),o+=2,a-=2;while(o<u&&a>=0);o+=3,a+=1}while(o<u||a<h);if(i!==this.version.getTotalCodewords())throw new $;return t}readModule(t,i,o,a){return t<0&&(t+=o,i+=4-(o+4&7)),i<0&&(i+=a,t+=4-(a+4&7)),this.readMappingMatrix.set(i,t),this.mappingBitMatrix.get(i,t)}readUtah(t,i,o,a){let u=0;return this.readModule(t-2,i-2,o,a)&&(u|=1),u<<=1,this.readModule(t-2,i-1,o,a)&&(u|=1),u<<=1,this.readModule(t-1,i-2,o,a)&&(u|=1),u<<=1,this.readModule(t-1,i-1,o,a)&&(u|=1),u<<=1,this.readModule(t-1,i,o,a)&&(u|=1),u<<=1,this.readModule(t,i-2,o,a)&&(u|=1),u<<=1,this.readModule(t,i-1,o,a)&&(u|=1),u<<=1,this.readModule(t,i,o,a)&&(u|=1),u}readCorner1(t,i){let o=0;return this.readModule(t-1,0,t,i)&&(o|=1),o<<=1,this.readModule(t-1,1,t,i)&&(o|=1),o<<=1,this.readModule(t-1,2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-1,t,i)&&(o|=1),o<<=1,this.readModule(1,i-1,t,i)&&(o|=1),o<<=1,this.readModule(2,i-1,t,i)&&(o|=1),o<<=1,this.readModule(3,i-1,t,i)&&(o|=1),o}readCorner2(t,i){let o=0;return this.readModule(t-3,0,t,i)&&(o|=1),o<<=1,this.readModule(t-2,0,t,i)&&(o|=1),o<<=1,this.readModule(t-1,0,t,i)&&(o|=1),o<<=1,this.readModule(0,i-4,t,i)&&(o|=1),o<<=1,this.readModule(0,i-3,t,i)&&(o|=1),o<<=1,this.readModule(0,i-2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-1,t,i)&&(o|=1),o<<=1,this.readModule(1,i-1,t,i)&&(o|=1),o}readCorner3(t,i){let o=0;return this.readModule(t-1,0,t,i)&&(o|=1),o<<=1,this.readModule(t-1,i-1,t,i)&&(o|=1),o<<=1,this.readModule(0,i-3,t,i)&&(o|=1),o<<=1,this.readModule(0,i-2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-1,t,i)&&(o|=1),o<<=1,this.readModule(1,i-3,t,i)&&(o|=1),o<<=1,this.readModule(1,i-2,t,i)&&(o|=1),o<<=1,this.readModule(1,i-1,t,i)&&(o|=1),o}readCorner4(t,i){let o=0;return this.readModule(t-3,0,t,i)&&(o|=1),o<<=1,this.readModule(t-2,0,t,i)&&(o|=1),o<<=1,this.readModule(t-1,0,t,i)&&(o|=1),o<<=1,this.readModule(0,i-2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-1,t,i)&&(o|=1),o<<=1,this.readModule(1,i-1,t,i)&&(o|=1),o<<=1,this.readModule(2,i-1,t,i)&&(o|=1),o<<=1,this.readModule(3,i-1,t,i)&&(o|=1),o}extractDataRegion(t){const i=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(t.getHeight()!==i)throw new I("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),h=i/a|0,p=o/u|0,m=h*a,y=p*u,E=new te(y,m);for(let N=0;N<h;++N){const O=N*a;for(let j=0;j<p;++j){const K=j*u;for(let q=0;q<a;++q){const ie=N*(a+2)+1+q,le=O+q;for(let Ae=0;Ae<u;++Ae){const xe=j*(u+2)+1+Ae;if(t.get(xe,ie)){const Ee=K+Ae;E.set(Ee,le)}}}}}return E}}class St{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i){const o=i.getECBlocks();let a=0;const u=o.getECBlocks();for(let q of u)a+=q.getCount();const h=new Array(a);let p=0;for(let q of u)for(let ie=0;ie<q.getCount();ie++){const le=q.getDataCodewords(),Ae=o.getECCodewords()+le;h[p++]=new St(le,new Uint8Array(Ae))}const y=h[0].codewords.length-o.getECCodewords(),E=y-1;let N=0;for(let q=0;q<E;q++)for(let ie=0;ie<p;ie++)h[ie].codewords[q]=t[N++];const O=i.getVersionNumber()===24,j=O?8:p;for(let q=0;q<j;q++)h[q].codewords[y-1]=t[N++];const K=h[0].codewords.length;for(let q=y;q<K;q++)for(let ie=0;ie<p;ie++){const le=O?(ie+8)%p:ie,Ae=O&&le>7?q-1:q;h[le].codewords[Ae]=t[N++]}if(N!==t.length)throw new I;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class fr{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new I(""+t);let i=0,o=this.bitOffset,a=this.byteOffset;const u=this.bytes;if(o>0){const h=8-o,p=t<h?t:h,m=h-p,y=255>>8-p<<m;i=(u[a]&y)>>m,t-=p,o+=p,o===8&&(o=0,a++)}if(t>0){for(;t>=8;)i=i<<8|u[a]&255,a++,t-=8;if(t>0){const h=8-t,p=255>>h<<h;i=i<<t|(u[a]&p)>>h,o+=t}}return this.bitOffset=o,this.byteOffset=a,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ot;(function(T){T[T.PAD_ENCODE=0]="PAD_ENCODE",T[T.ASCII_ENCODE=1]="ASCII_ENCODE",T[T.C40_ENCODE=2]="C40_ENCODE",T[T.TEXT_ENCODE=3]="TEXT_ENCODE",T[T.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",T[T.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",T[T.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ot||(Ot={}));class Mn{static decode(t){const i=new fr(t),o=new Z,a=new Z,u=new Array;let h=Ot.ASCII_ENCODE;do if(h===Ot.ASCII_ENCODE)h=this.decodeAsciiSegment(i,o,a);else{switch(h){case Ot.C40_ENCODE:this.decodeC40Segment(i,o);break;case Ot.TEXT_ENCODE:this.decodeTextSegment(i,o);break;case Ot.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,o);break;case Ot.EDIFACT_ENCODE:this.decodeEdifactSegment(i,o);break;case Ot.BASE256_ENCODE:this.decodeBase256Segment(i,o,u);break;default:throw new $}h=Ot.ASCII_ENCODE}while(h!==Ot.PAD_ENCODE&&i.available()>0);return a.length()>0&&o.append(a.toString()),new Mt(t,o.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(t,i,o){let a=!1;do{let u=t.readBits(8);if(u===0)throw new $;if(u<=128)return a&&(u+=128),i.append(String.fromCharCode(u-1)),Ot.ASCII_ENCODE;if(u===129)return Ot.PAD_ENCODE;if(u<=229){const h=u-130;h<10&&i.append("0"),i.append(""+h)}else switch(u){case 230:return Ot.C40_ENCODE;case 231:return Ot.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:i.append("[)>05"),o.insert(0,"");break;case 237:i.append("[)>06"),o.insert(0,"");break;case 238:return Ot.ANSIX12_ENCODE;case 239:return Ot.TEXT_ENCODE;case 240:return Ot.EDIFACT_ENCODE;case 241:break;default:if(u!==254||t.available()!==0)throw new $;break}}while(t.available()>0);return Ot.ASCII_ENCODE}static decodeC40Segment(t,i){let o=!1;const a=[];let u=0;do{if(t.available()===8)return;const h=t.readBits(8);if(h===254)return;this.parseTwoBytes(h,t.readBits(8),a);for(let p=0;p<3;p++){const m=a[p];switch(u){case 0:if(m<3)u=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const y=this.C40_BASIC_SET_CHARS[m];o?(i.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):i.append(y)}else throw new $;break;case 1:o?(i.append(String.fromCharCode(m+128)),o=!1):i.append(String.fromCharCode(m)),u=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const y=this.C40_SHIFT2_SET_CHARS[m];o?(i.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):i.append(y)}else switch(m){case 27:i.append("");break;case 30:o=!0;break;default:throw new $}u=0;break;case 3:o?(i.append(String.fromCharCode(m+224)),o=!1):i.append(String.fromCharCode(m+96)),u=0;break;default:throw new $}}}while(t.available()>0)}static decodeTextSegment(t,i){let o=!1,a=[],u=0;do{if(t.available()===8)return;const h=t.readBits(8);if(h===254)return;this.parseTwoBytes(h,t.readBits(8),a);for(let p=0;p<3;p++){const m=a[p];switch(u){case 0:if(m<3)u=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const y=this.TEXT_BASIC_SET_CHARS[m];o?(i.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):i.append(y)}else throw new $;break;case 1:o?(i.append(String.fromCharCode(m+128)),o=!1):i.append(String.fromCharCode(m)),u=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const y=this.TEXT_SHIFT2_SET_CHARS[m];o?(i.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):i.append(y)}else switch(m){case 27:i.append("");break;case 30:o=!0;break;default:throw new $}u=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const y=this.TEXT_SHIFT3_SET_CHARS[m];o?(i.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):i.append(y),u=0}else throw new $;break;default:throw new $}}}while(t.available()>0)}static decodeAnsiX12Segment(t,i){const o=[];do{if(t.available()===8)return;const a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),o);for(let u=0;u<3;u++){const h=o[u];switch(h){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(h<14)i.append(String.fromCharCode(h+44));else if(h<40)i.append(String.fromCharCode(h+51));else throw new $;break}}}while(t.available()>0)}static parseTwoBytes(t,i,o){let a=(t<<8)+i-1,u=Math.floor(a/1600);o[0]=u,a-=u*1600,u=Math.floor(a/40),o[1]=u,o[2]=a-u*40}static decodeEdifactSegment(t,i){do{if(t.available()<=16)return;for(let o=0;o<4;o++){let a=t.readBits(6);if(a===31){const u=8-t.getBitOffset();u!==8&&t.readBits(u);return}a&32||(a|=64),i.append(String.fromCharCode(a))}}while(t.available()>0)}static decodeBase256Segment(t,i,o){let a=1+t.getByteOffset();const u=this.unrandomize255State(t.readBits(8),a++);let h;if(u===0?h=t.available()/8|0:u<250?h=u:h=250*(u-249)+this.unrandomize255State(t.readBits(8),a++),h<0)throw new $;const p=new Uint8Array(h);for(let m=0;m<h;m++){if(t.available()<8)throw new $;p[m]=this.unrandomize255State(t.readBits(8),a++)}o.push(p);try{i.append(ee.decode(p,oe.ISO88591))}catch(m){throw new Yt("Platform does not support required encoding: "+m.message)}}static unrandomize255State(t,i){const o=149*i%255+1,a=t-o;return a>=0?a:a+256}}Mn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Mn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Mn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Mn.TEXT_SHIFT2_SET_CHARS=Mn.C40_SHIFT2_SET_CHARS,Mn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ws{constructor(){this.rsDecoder=new On(Ke.DATA_MATRIX_FIELD_256)}decode(t){const i=new st(t),o=i.getVersion(),a=i.readCodewords(),u=St.getDataBlocks(a,o);let h=0;for(let y of u)h+=y.getNumDataCodewords();const p=new Uint8Array(h),m=u.length;for(let y=0;y<m;y++){const E=u[y],N=E.getCodewords(),O=E.getNumDataCodewords();this.correctErrors(N,O);for(let j=0;j<O;j++)p[j*m+y]=N[j]}return Mn.decode(p)}correctErrors(t,i){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-i)}catch{throw new F}for(let a=0;a<i;a++)t[a]=o[a]}}class Ue{constructor(t){this.image=t,this.rectangleDetector=new dn(this.image)}detect(){const t=this.rectangleDetector.detect();let i=this.detectSolid1(t);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new G;i=this.shiftToModuleCenter(i);const o=i[0],a=i[1],u=i[2],h=i[3];let p=this.transitionsBetween(o,h)+1,m=this.transitionsBetween(u,h)+1;(p&1)===1&&(p+=1),(m&1)===1&&(m+=1),4*p<7*m&&4*m<7*p&&(p=m=Math.max(p,m));let y=Ue.sampleGrid(this.image,o,a,u,h,p,m);return new Pt(y,[o,a,u,h])}static shiftPoint(t,i,o){let a=(i.getX()-t.getX())/(o+1),u=(i.getY()-t.getY())/(o+1);return new Te(t.getX()+a,t.getY()+u)}static moveAway(t,i,o){let a=t.getX(),u=t.getY();return a<i?a-=1:a+=1,u<o?u-=1:u+=1,new Te(a,u)}detectSolid1(t){let i=t[0],o=t[1],a=t[3],u=t[2],h=this.transitionsBetween(i,o),p=this.transitionsBetween(o,a),m=this.transitionsBetween(a,u),y=this.transitionsBetween(u,i),E=h,N=[u,i,o,a];return E>p&&(E=p,N[0]=i,N[1]=o,N[2]=a,N[3]=u),E>m&&(E=m,N[0]=o,N[1]=a,N[2]=u,N[3]=i),E>y&&(N[0]=a,N[1]=u,N[2]=i,N[3]=o),N}detectSolid2(t){let i=t[0],o=t[1],a=t[2],u=t[3],h=this.transitionsBetween(i,u),p=Ue.shiftPoint(o,a,(h+1)*4),m=Ue.shiftPoint(a,o,(h+1)*4),y=this.transitionsBetween(p,i),E=this.transitionsBetween(m,u);return y<E?(t[0]=i,t[1]=o,t[2]=a,t[3]=u):(t[0]=o,t[1]=a,t[2]=u,t[3]=i),t}correctTopRight(t){let i=t[0],o=t[1],a=t[2],u=t[3],h=this.transitionsBetween(i,u),p=this.transitionsBetween(o,u),m=Ue.shiftPoint(i,o,(p+1)*4),y=Ue.shiftPoint(a,o,(h+1)*4);h=this.transitionsBetween(m,u),p=this.transitionsBetween(y,u);let E=new Te(u.getX()+(a.getX()-o.getX())/(h+1),u.getY()+(a.getY()-o.getY())/(h+1)),N=new Te(u.getX()+(i.getX()-o.getX())/(p+1),u.getY()+(i.getY()-o.getY())/(p+1));if(!this.isValid(E))return this.isValid(N)?N:null;if(!this.isValid(N))return E;let O=this.transitionsBetween(m,E)+this.transitionsBetween(y,E),j=this.transitionsBetween(m,N)+this.transitionsBetween(y,N);return O>j?E:N}shiftToModuleCenter(t){let i=t[0],o=t[1],a=t[2],u=t[3],h=this.transitionsBetween(i,u)+1,p=this.transitionsBetween(a,u)+1,m=Ue.shiftPoint(i,o,p*4),y=Ue.shiftPoint(a,o,h*4);h=this.transitionsBetween(m,u)+1,p=this.transitionsBetween(y,u)+1,(h&1)===1&&(h+=1),(p&1)===1&&(p+=1);let E=(i.getX()+o.getX()+a.getX()+u.getX())/4,N=(i.getY()+o.getY()+a.getY()+u.getY())/4;i=Ue.moveAway(i,E,N),o=Ue.moveAway(o,E,N),a=Ue.moveAway(a,E,N),u=Ue.moveAway(u,E,N);let O,j;return m=Ue.shiftPoint(i,o,p*4),m=Ue.shiftPoint(m,u,h*4),O=Ue.shiftPoint(o,i,p*4),O=Ue.shiftPoint(O,a,h*4),y=Ue.shiftPoint(a,u,p*4),y=Ue.shiftPoint(y,o,h*4),j=Ue.shiftPoint(u,a,p*4),j=Ue.shiftPoint(j,i,h*4),[m,O,y,j]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,i,o,a,u,h,p){return Gn.getInstance().sampleGrid(t,h,p,.5,.5,h-.5,.5,h-.5,p-.5,.5,p-.5,i.getX(),i.getY(),u.getX(),u.getY(),a.getX(),a.getY(),o.getX(),o.getY())}transitionsBetween(t,i){let o=Math.trunc(t.getX()),a=Math.trunc(t.getY()),u=Math.trunc(i.getX()),h=Math.trunc(i.getY()),p=Math.abs(h-a)>Math.abs(u-o);if(p){let q=o;o=a,a=q,q=u,u=h,h=q}let m=Math.abs(u-o),y=Math.abs(h-a),E=-m/2,N=a<h?1:-1,O=o<u?1:-1,j=0,K=this.image.get(p?a:o,p?o:a);for(let q=o,ie=a;q!==u;q+=O){let le=this.image.get(p?ie:q,p?q:ie);if(le!==K&&(j++,K=le),E+=y,E>0){if(ie===h)break;ie+=N,E-=m}}return j}}class vt{constructor(){this.decoder=new ws}decode(t,i=null){let o,a;if(i!=null&&i.has(se.PURE_BARCODE)){const y=vt.extractPureBits(t.getBlackMatrix());o=this.decoder.decode(y),a=vt.NO_POINTS}else{const y=new Ue(t.getBlackMatrix()).detect();o=this.decoder.decode(y.getBits()),a=y.getPoints()}const u=o.getRawBytes(),h=new ve(o.getText(),u,8*u.length,a,ge.DATA_MATRIX,U.currentTimeMillis()),p=o.getByteSegments();p!=null&&h.putMetadata(Be.BYTE_SEGMENTS,p);const m=o.getECLevel();return m!=null&&h.putMetadata(Be.ERROR_CORRECTION_LEVEL,m),h}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(i==null||o==null)throw new G;const a=this.moduleSize(i,t);let u=i[1];const h=o[1];let p=i[0];const y=(o[0]-p+1)/a,E=(h-u+1)/a;if(y<=0||E<=0)throw new G;const N=a/2;u+=N,p+=N;const O=new te(y,E);for(let j=0;j<E;j++){const K=u+j*a;for(let q=0;q<y;q++)t.get(p+q*a,K)&&O.set(q,j)}return O}static moduleSize(t,i){const o=i.getWidth();let a=t[0];const u=t[1];for(;a<o&&i.get(a,u);)a++;if(a===o)throw new G;const h=a-t[0];if(h===0)throw new G;return h}}vt.NO_POINTS=[];class Cs extends Ve{constructor(t=500){super(new vt,t)}}var qn;(function(T){T[T.L=0]="L",T[T.M=1]="M",T[T.Q=2]="Q",T[T.H=3]="H"})(qn||(qn={}));class it{constructor(t,i,o){this.value=t,this.stringValue=i,this.bits=o,it.FOR_BITS.set(o,this),it.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return it.L;case"M":return it.M;case"Q":return it.Q;case"H":return it.H;default:throw new S(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof it))return!1;const i=t;return this.value===i.value}static forBits(t){if(t<0||t>=it.FOR_BITS.size)throw new I;return it.FOR_BITS.get(t)}}it.FOR_BITS=new Map,it.FOR_VALUE=new Map,it.L=new it(qn.L,"L",1),it.M=new it(qn.M,"M",0),it.Q=new it(qn.Q,"Q",3),it.H=new it(qn.H,"H",2);class an{constructor(t){this.errorCorrectionLevel=it.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,i){return P.bitCount(t^i)}static decodeFormatInformation(t,i){const o=an.doDecodeFormatInformation(t,i);return o!==null?o:an.doDecodeFormatInformation(t^an.FORMAT_INFO_MASK_QR,i^an.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,i){let o=Number.MAX_SAFE_INTEGER,a=0;for(const u of an.FORMAT_INFO_DECODE_LOOKUP){const h=u[0];if(h===t||h===i)return new an(u[1]);let p=an.numBitsDiffering(t,h);p<o&&(a=u[1],o=p),t!==i&&(p=an.numBitsDiffering(i,h),p<o&&(a=u[1],o=p))}return o<=3?new an(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof an))return!1;const i=t;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}an.FORMAT_INFO_MASK_QR=21522,an.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class D{constructor(t,...i){this.ecCodewordsPerBlock=t,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const i=this.ecBlocks;for(const o of i)t+=o.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class R{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _e{constructor(t,i,...o){this.versionNumber=t,this.alignmentPatternCenters=i,this.ecBlocks=o;let a=0;const u=o[0].getECCodewordsPerBlock(),h=o[0].getECBlocks();for(const p of h)a+=p.getCount()*(p.getDataCodewords()+u);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new $;try{return this.getVersionForNumber((t-17)/4)}catch{throw new $}}static getVersionForNumber(t){if(t<1||t>40)throw new I;return _e.VERSIONS[t-1]}static decodeVersionInformation(t){let i=Number.MAX_SAFE_INTEGER,o=0;for(let a=0;a<_e.VERSION_DECODE_INFO.length;a++){const u=_e.VERSION_DECODE_INFO[a];if(u===t)return _e.getVersionForNumber(a+7);const h=an.numBitsDiffering(t,u);h<i&&(o=a+7,i=h)}return i<=3?_e.getVersionForNumber(o):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),i=new te(t);i.setRegion(0,0,9,9),i.setRegion(t-8,0,8,9),i.setRegion(0,t-8,9,8);const o=this.alignmentPatternCenters.length;for(let a=0;a<o;a++){const u=this.alignmentPatternCenters[a]-2;for(let h=0;h<o;h++)a===0&&(h===0||h===o-1)||a===o-1&&h===0||i.setRegion(this.alignmentPatternCenters[h]-2,u,5,5)}return i.setRegion(6,9,1,t-17),i.setRegion(9,6,t-17,1),this.versionNumber>6&&(i.setRegion(t-11,0,3,6),i.setRegion(0,t-11,6,3)),i}toString(){return""+this.versionNumber}}_e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),_e.VERSIONS=[new _e(1,new Int32Array(0),new D(7,new R(1,19)),new D(10,new R(1,16)),new D(13,new R(1,13)),new D(17,new R(1,9))),new _e(2,Int32Array.from([6,18]),new D(10,new R(1,34)),new D(16,new R(1,28)),new D(22,new R(1,22)),new D(28,new R(1,16))),new _e(3,Int32Array.from([6,22]),new D(15,new R(1,55)),new D(26,new R(1,44)),new D(18,new R(2,17)),new D(22,new R(2,13))),new _e(4,Int32Array.from([6,26]),new D(20,new R(1,80)),new D(18,new R(2,32)),new D(26,new R(2,24)),new D(16,new R(4,9))),new _e(5,Int32Array.from([6,30]),new D(26,new R(1,108)),new D(24,new R(2,43)),new D(18,new R(2,15),new R(2,16)),new D(22,new R(2,11),new R(2,12))),new _e(6,Int32Array.from([6,34]),new D(18,new R(2,68)),new D(16,new R(4,27)),new D(24,new R(4,19)),new D(28,new R(4,15))),new _e(7,Int32Array.from([6,22,38]),new D(20,new R(2,78)),new D(18,new R(4,31)),new D(18,new R(2,14),new R(4,15)),new D(26,new R(4,13),new R(1,14))),new _e(8,Int32Array.from([6,24,42]),new D(24,new R(2,97)),new D(22,new R(2,38),new R(2,39)),new D(22,new R(4,18),new R(2,19)),new D(26,new R(4,14),new R(2,15))),new _e(9,Int32Array.from([6,26,46]),new D(30,new R(2,116)),new D(22,new R(3,36),new R(2,37)),new D(20,new R(4,16),new R(4,17)),new D(24,new R(4,12),new R(4,13))),new _e(10,Int32Array.from([6,28,50]),new D(18,new R(2,68),new R(2,69)),new D(26,new R(4,43),new R(1,44)),new D(24,new R(6,19),new R(2,20)),new D(28,new R(6,15),new R(2,16))),new _e(11,Int32Array.from([6,30,54]),new D(20,new R(4,81)),new D(30,new R(1,50),new R(4,51)),new D(28,new R(4,22),new R(4,23)),new D(24,new R(3,12),new R(8,13))),new _e(12,Int32Array.from([6,32,58]),new D(24,new R(2,92),new R(2,93)),new D(22,new R(6,36),new R(2,37)),new D(26,new R(4,20),new R(6,21)),new D(28,new R(7,14),new R(4,15))),new _e(13,Int32Array.from([6,34,62]),new D(26,new R(4,107)),new D(22,new R(8,37),new R(1,38)),new D(24,new R(8,20),new R(4,21)),new D(22,new R(12,11),new R(4,12))),new _e(14,Int32Array.from([6,26,46,66]),new D(30,new R(3,115),new R(1,116)),new D(24,new R(4,40),new R(5,41)),new D(20,new R(11,16),new R(5,17)),new D(24,new R(11,12),new R(5,13))),new _e(15,Int32Array.from([6,26,48,70]),new D(22,new R(5,87),new R(1,88)),new D(24,new R(5,41),new R(5,42)),new D(30,new R(5,24),new R(7,25)),new D(24,new R(11,12),new R(7,13))),new _e(16,Int32Array.from([6,26,50,74]),new D(24,new R(5,98),new R(1,99)),new D(28,new R(7,45),new R(3,46)),new D(24,new R(15,19),new R(2,20)),new D(30,new R(3,15),new R(13,16))),new _e(17,Int32Array.from([6,30,54,78]),new D(28,new R(1,107),new R(5,108)),new D(28,new R(10,46),new R(1,47)),new D(28,new R(1,22),new R(15,23)),new D(28,new R(2,14),new R(17,15))),new _e(18,Int32Array.from([6,30,56,82]),new D(30,new R(5,120),new R(1,121)),new D(26,new R(9,43),new R(4,44)),new D(28,new R(17,22),new R(1,23)),new D(28,new R(2,14),new R(19,15))),new _e(19,Int32Array.from([6,30,58,86]),new D(28,new R(3,113),new R(4,114)),new D(26,new R(3,44),new R(11,45)),new D(26,new R(17,21),new R(4,22)),new D(26,new R(9,13),new R(16,14))),new _e(20,Int32Array.from([6,34,62,90]),new D(28,new R(3,107),new R(5,108)),new D(26,new R(3,41),new R(13,42)),new D(30,new R(15,24),new R(5,25)),new D(28,new R(15,15),new R(10,16))),new _e(21,Int32Array.from([6,28,50,72,94]),new D(28,new R(4,116),new R(4,117)),new D(26,new R(17,42)),new D(28,new R(17,22),new R(6,23)),new D(30,new R(19,16),new R(6,17))),new _e(22,Int32Array.from([6,26,50,74,98]),new D(28,new R(2,111),new R(7,112)),new D(28,new R(17,46)),new D(30,new R(7,24),new R(16,25)),new D(24,new R(34,13))),new _e(23,Int32Array.from([6,30,54,78,102]),new D(30,new R(4,121),new R(5,122)),new D(28,new R(4,47),new R(14,48)),new D(30,new R(11,24),new R(14,25)),new D(30,new R(16,15),new R(14,16))),new _e(24,Int32Array.from([6,28,54,80,106]),new D(30,new R(6,117),new R(4,118)),new D(28,new R(6,45),new R(14,46)),new D(30,new R(11,24),new R(16,25)),new D(30,new R(30,16),new R(2,17))),new _e(25,Int32Array.from([6,32,58,84,110]),new D(26,new R(8,106),new R(4,107)),new D(28,new R(8,47),new R(13,48)),new D(30,new R(7,24),new R(22,25)),new D(30,new R(22,15),new R(13,16))),new _e(26,Int32Array.from([6,30,58,86,114]),new D(28,new R(10,114),new R(2,115)),new D(28,new R(19,46),new R(4,47)),new D(28,new R(28,22),new R(6,23)),new D(30,new R(33,16),new R(4,17))),new _e(27,Int32Array.from([6,34,62,90,118]),new D(30,new R(8,122),new R(4,123)),new D(28,new R(22,45),new R(3,46)),new D(30,new R(8,23),new R(26,24)),new D(30,new R(12,15),new R(28,16))),new _e(28,Int32Array.from([6,26,50,74,98,122]),new D(30,new R(3,117),new R(10,118)),new D(28,new R(3,45),new R(23,46)),new D(30,new R(4,24),new R(31,25)),new D(30,new R(11,15),new R(31,16))),new _e(29,Int32Array.from([6,30,54,78,102,126]),new D(30,new R(7,116),new R(7,117)),new D(28,new R(21,45),new R(7,46)),new D(30,new R(1,23),new R(37,24)),new D(30,new R(19,15),new R(26,16))),new _e(30,Int32Array.from([6,26,52,78,104,130]),new D(30,new R(5,115),new R(10,116)),new D(28,new R(19,47),new R(10,48)),new D(30,new R(15,24),new R(25,25)),new D(30,new R(23,15),new R(25,16))),new _e(31,Int32Array.from([6,30,56,82,108,134]),new D(30,new R(13,115),new R(3,116)),new D(28,new R(2,46),new R(29,47)),new D(30,new R(42,24),new R(1,25)),new D(30,new R(23,15),new R(28,16))),new _e(32,Int32Array.from([6,34,60,86,112,138]),new D(30,new R(17,115)),new D(28,new R(10,46),new R(23,47)),new D(30,new R(10,24),new R(35,25)),new D(30,new R(19,15),new R(35,16))),new _e(33,Int32Array.from([6,30,58,86,114,142]),new D(30,new R(17,115),new R(1,116)),new D(28,new R(14,46),new R(21,47)),new D(30,new R(29,24),new R(19,25)),new D(30,new R(11,15),new R(46,16))),new _e(34,Int32Array.from([6,34,62,90,118,146]),new D(30,new R(13,115),new R(6,116)),new D(28,new R(14,46),new R(23,47)),new D(30,new R(44,24),new R(7,25)),new D(30,new R(59,16),new R(1,17))),new _e(35,Int32Array.from([6,30,54,78,102,126,150]),new D(30,new R(12,121),new R(7,122)),new D(28,new R(12,47),new R(26,48)),new D(30,new R(39,24),new R(14,25)),new D(30,new R(22,15),new R(41,16))),new _e(36,Int32Array.from([6,24,50,76,102,128,154]),new D(30,new R(6,121),new R(14,122)),new D(28,new R(6,47),new R(34,48)),new D(30,new R(46,24),new R(10,25)),new D(30,new R(2,15),new R(64,16))),new _e(37,Int32Array.from([6,28,54,80,106,132,158]),new D(30,new R(17,122),new R(4,123)),new D(28,new R(29,46),new R(14,47)),new D(30,new R(49,24),new R(10,25)),new D(30,new R(24,15),new R(46,16))),new _e(38,Int32Array.from([6,32,58,84,110,136,162]),new D(30,new R(4,122),new R(18,123)),new D(28,new R(13,46),new R(32,47)),new D(30,new R(48,24),new R(14,25)),new D(30,new R(42,15),new R(32,16))),new _e(39,Int32Array.from([6,26,54,82,110,138,166]),new D(30,new R(20,117),new R(4,118)),new D(28,new R(40,47),new R(7,48)),new D(30,new R(43,24),new R(22,25)),new D(30,new R(10,15),new R(67,16))),new _e(40,Int32Array.from([6,30,58,86,114,142,170]),new D(30,new R(19,118),new R(6,119)),new D(28,new R(18,47),new R(31,48)),new D(30,new R(34,24),new R(34,25)),new D(30,new R(20,15),new R(61,16)))];var Qe;(function(T){T[T.DATA_MASK_000=0]="DATA_MASK_000",T[T.DATA_MASK_001=1]="DATA_MASK_001",T[T.DATA_MASK_010=2]="DATA_MASK_010",T[T.DATA_MASK_011=3]="DATA_MASK_011",T[T.DATA_MASK_100=4]="DATA_MASK_100",T[T.DATA_MASK_101=5]="DATA_MASK_101",T[T.DATA_MASK_110=6]="DATA_MASK_110",T[T.DATA_MASK_111=7]="DATA_MASK_111"})(Qe||(Qe={}));class zt{constructor(t,i){this.value=t,this.isMasked=i}unmaskBitMatrix(t,i){for(let o=0;o<i;o++)for(let a=0;a<i;a++)this.isMasked(o,a)&&t.flip(a,o)}}zt.values=new Map([[Qe.DATA_MASK_000,new zt(Qe.DATA_MASK_000,(T,t)=>(T+t&1)===0)],[Qe.DATA_MASK_001,new zt(Qe.DATA_MASK_001,(T,t)=>(T&1)===0)],[Qe.DATA_MASK_010,new zt(Qe.DATA_MASK_010,(T,t)=>t%3===0)],[Qe.DATA_MASK_011,new zt(Qe.DATA_MASK_011,(T,t)=>(T+t)%3===0)],[Qe.DATA_MASK_100,new zt(Qe.DATA_MASK_100,(T,t)=>(Math.floor(T/2)+Math.floor(t/3)&1)===0)],[Qe.DATA_MASK_101,new zt(Qe.DATA_MASK_101,(T,t)=>T*t%6===0)],[Qe.DATA_MASK_110,new zt(Qe.DATA_MASK_110,(T,t)=>T*t%6<3)],[Qe.DATA_MASK_111,new zt(Qe.DATA_MASK_111,(T,t)=>(T+t+T*t%3&1)===0)]]);class pr{constructor(t){const i=t.getHeight();if(i<21||(i&3)!==1)throw new $;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let u=0;u<6;u++)t=this.copyBit(u,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let u=5;u>=0;u--)t=this.copyBit(8,u,t);const i=this.bitMatrix.getHeight();let o=0;const a=i-7;for(let u=i-1;u>=a;u--)o=this.copyBit(8,u,o);for(let u=i-8;u<i;u++)o=this.copyBit(u,8,o);if(this.parsedFormatInfo=an.decodeFormatInformation(t,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new $}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),i=Math.floor((t-17)/4);if(i<=6)return _e.getVersionForNumber(i);let o=0;const a=t-11;for(let h=5;h>=0;h--)for(let p=t-9;p>=a;p--)o=this.copyBit(p,h,o);let u=_e.decodeVersionInformation(o);if(u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;o=0;for(let h=5;h>=0;h--)for(let p=t-9;p>=a;p--)o=this.copyBit(h,p,o);if(u=_e.decodeVersionInformation(o),u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;throw new $}copyBit(t,i,o){return(this.isMirror?this.bitMatrix.get(i,t):this.bitMatrix.get(t,i))?o<<1|1:o<<1}readCodewords(){const t=this.readFormatInformation(),i=this.readVersion(),o=zt.values.get(t.getDataMask()),a=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,a);const u=i.buildFunctionPattern();let h=!0;const p=new Uint8Array(i.getTotalCodewords());let m=0,y=0,E=0;for(let N=a-1;N>0;N-=2){N===6&&N--;for(let O=0;O<a;O++){const j=h?a-1-O:O;for(let K=0;K<2;K++)u.get(N-K,j)||(E++,y<<=1,this.bitMatrix.get(N-K,j)&&(y|=1),E===8&&(p[m++]=y,E=0,y=0))}h=!h}if(m!==i.getTotalCodewords())throw new $;return p}remask(){if(this.parsedFormatInfo===null)return;const t=zt.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,i)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let i=0,o=t.getWidth();i<o;i++)for(let a=i+1,u=t.getHeight();a<u;a++)t.get(i,a)!==t.get(a,i)&&(t.flip(a,i),t.flip(i,a))}}class Yi{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i,o){if(t.length!==i.getTotalCodewords())throw new I;const a=i.getECBlocksForLevel(o);let u=0;const h=a.getECBlocks();for(const K of h)u+=K.getCount();const p=new Array(u);let m=0;for(const K of h)for(let q=0;q<K.getCount();q++){const ie=K.getDataCodewords(),le=a.getECCodewordsPerBlock()+ie;p[m++]=new Yi(ie,new Uint8Array(le))}const y=p[0].codewords.length;let E=p.length-1;for(;E>=0&&p[E].codewords.length!==y;)E--;E++;const N=y-a.getECCodewordsPerBlock();let O=0;for(let K=0;K<N;K++)for(let q=0;q<m;q++)p[q].codewords[K]=t[O++];for(let K=E;K<m;K++)p[K].codewords[N]=t[O++];const j=p[0].codewords.length;for(let K=N;K<j;K++)for(let q=0;q<m;q++){const ie=q<E?K:K+1;p[q].codewords[ie]=t[O++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ln;(function(T){T[T.TERMINATOR=0]="TERMINATOR",T[T.NUMERIC=1]="NUMERIC",T[T.ALPHANUMERIC=2]="ALPHANUMERIC",T[T.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",T[T.BYTE=4]="BYTE",T[T.ECI=5]="ECI",T[T.KANJI=6]="KANJI",T[T.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",T[T.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",T[T.HANZI=9]="HANZI"})(ln||(ln={}));class Le{constructor(t,i,o,a){this.value=t,this.stringValue=i,this.characterCountBitsForVersions=o,this.bits=a,Le.FOR_BITS.set(a,this),Le.FOR_VALUE.set(t,this)}static forBits(t){const i=Le.FOR_BITS.get(t);if(i===void 0)throw new I;return i}getCharacterCountBits(t){const i=t.getVersionNumber();let o;return i<=9?o=0:i<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Le))return!1;const i=t;return this.value===i.value}toString(){return this.stringValue}}Le.FOR_BITS=new Map,Le.FOR_VALUE=new Map,Le.TERMINATOR=new Le(ln.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Le.NUMERIC=new Le(ln.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Le.ALPHANUMERIC=new Le(ln.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Le.STRUCTURED_APPEND=new Le(ln.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Le.BYTE=new Le(ln.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Le.ECI=new Le(ln.ECI,"ECI",Int32Array.from([0,0,0]),7),Le.KANJI=new Le(ln.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Le.FNC1_FIRST_POSITION=new Le(ln.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Le.FNC1_SECOND_POSITION=new Le(ln.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Le.HANZI=new Le(ln.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class dt{static decode(t,i,o,a){const u=new fr(t);let h=new Z;const p=new Array;let m=-1,y=-1;try{let E=null,N=!1,O;do{if(u.available()<4)O=Le.TERMINATOR;else{const j=u.readBits(4);O=Le.forBits(j)}switch(O){case Le.TERMINATOR:break;case Le.FNC1_FIRST_POSITION:case Le.FNC1_SECOND_POSITION:N=!0;break;case Le.STRUCTURED_APPEND:if(u.available()<16)throw new $;m=u.readBits(8),y=u.readBits(8);break;case Le.ECI:const j=dt.parseECIValue(u);if(E=V.getCharacterSetECIByValue(j),E===null)throw new $;break;case Le.HANZI:const K=u.readBits(4),q=u.readBits(O.getCharacterCountBits(i));K===dt.GB2312_SUBSET&&dt.decodeHanziSegment(u,h,q);break;default:const ie=u.readBits(O.getCharacterCountBits(i));switch(O){case Le.NUMERIC:dt.decodeNumericSegment(u,h,ie);break;case Le.ALPHANUMERIC:dt.decodeAlphanumericSegment(u,h,ie,N);break;case Le.BYTE:dt.decodeByteSegment(u,h,ie,E,p,a);break;case Le.KANJI:dt.decodeKanjiSegment(u,h,ie);break;default:throw new $}break}}while(O!==Le.TERMINATOR)}catch{throw new $}return new Mt(t,h.toString(),p.length===0?null:p,o===null?null:o.toString(),m,y)}static decodeHanziSegment(t,i,o){if(o*13>t.available())throw new $;const a=new Uint8Array(2*o);let u=0;for(;o>0;){const h=t.readBits(13);let p=h/96<<8&4294967295|h%96;p<959?p+=41377:p+=42657,a[u]=p>>8&255,a[u+1]=p&255,u+=2,o--}try{i.append(ee.decode(a,oe.GB2312))}catch(h){throw new $(h)}}static decodeKanjiSegment(t,i,o){if(o*13>t.available())throw new $;const a=new Uint8Array(2*o);let u=0;for(;o>0;){const h=t.readBits(13);let p=h/192<<8&4294967295|h%192;p<7936?p+=33088:p+=49472,a[u]=p>>8,a[u+1]=p,u+=2,o--}try{i.append(ee.decode(a,oe.SHIFT_JIS))}catch(h){throw new $(h)}}static decodeByteSegment(t,i,o,a,u,h){if(8*o>t.available())throw new $;const p=new Uint8Array(o);for(let y=0;y<o;y++)p[y]=t.readBits(8);let m;a===null?m=oe.guessEncoding(p,h):m=a.getName();try{i.append(ee.decode(p,m))}catch(y){throw new $(y)}u.push(p)}static toAlphaNumericChar(t){if(t>=dt.ALPHANUMERIC_CHARS.length)throw new $;return dt.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,i,o,a){const u=i.length();for(;o>1;){if(t.available()<11)throw new $;const h=t.readBits(11);i.append(dt.toAlphaNumericChar(Math.floor(h/45))),i.append(dt.toAlphaNumericChar(h%45)),o-=2}if(o===1){if(t.available()<6)throw new $;i.append(dt.toAlphaNumericChar(t.readBits(6)))}if(a)for(let h=u;h<i.length();h++)i.charAt(h)==="%"&&(h<i.length()-1&&i.charAt(h+1)==="%"?i.deleteCharAt(h+1):i.setCharAt(h,""))}static decodeNumericSegment(t,i,o){for(;o>=3;){if(t.available()<10)throw new $;const a=t.readBits(10);if(a>=1e3)throw new $;i.append(dt.toAlphaNumericChar(Math.floor(a/100))),i.append(dt.toAlphaNumericChar(Math.floor(a/10)%10)),i.append(dt.toAlphaNumericChar(a%10)),o-=3}if(o===2){if(t.available()<7)throw new $;const a=t.readBits(7);if(a>=100)throw new $;i.append(dt.toAlphaNumericChar(Math.floor(a/10))),i.append(dt.toAlphaNumericChar(a%10))}else if(o===1){if(t.available()<4)throw new $;const a=t.readBits(4);if(a>=10)throw new $;i.append(dt.toAlphaNumericChar(a))}}static parseECIValue(t){const i=t.readBits(8);if(!(i&128))return i&127;if((i&192)===128){const o=t.readBits(8);return(i&63)<<8&4294967295|o}if((i&224)===192){const o=t.readBits(16);return(i&31)<<16&4294967295|o}throw new $}}dt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",dt.GB2312_SUBSET=1;class In{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const i=t[0];t[0]=t[2],t[2]=i}}class mi{constructor(){this.rsDecoder=new On(Ke.QR_CODE_FIELD_256)}decodeBooleanArray(t,i){return this.decodeBitMatrix(te.parseFromBooleanArray(t),i)}decodeBitMatrix(t,i){const o=new pr(t);let a=null;try{return this.decodeBitMatrixParser(o,i)}catch(u){a=u}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const u=this.decodeBitMatrixParser(o,i);return u.setOther(new In(!0)),u}catch(u){throw a!==null?a:u}}decodeBitMatrixParser(t,i){const o=t.readVersion(),a=t.readFormatInformation().getErrorCorrectionLevel(),u=t.readCodewords(),h=Yi.getDataBlocks(u,o,a);let p=0;for(const E of h)p+=E.getNumDataCodewords();const m=new Uint8Array(p);let y=0;for(const E of h){const N=E.getCodewords(),O=E.getNumDataCodewords();this.correctErrors(N,O);for(let j=0;j<O;j++)m[y++]=N[j]}return dt.decode(m,o,a,i)}correctErrors(t,i){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-i)}catch{throw new F}for(let a=0;a<i;a++)t[a]=o[a]}}class _i extends Te{constructor(t,i,o){super(t,i),this.estimatedModuleSize=o}aboutEquals(t,i,o){if(Math.abs(i-this.getY())<=t&&Math.abs(o-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,i,o){const a=(this.getX()+i)/2,u=(this.getY()+t)/2,h=(this.estimatedModuleSize+o)/2;return new _i(a,u,h)}}class yi{constructor(t,i,o,a,u,h,p){this.image=t,this.startX=i,this.startY=o,this.width=a,this.height=u,this.moduleSize=h,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,i=this.height,o=this.width,a=t+o,u=this.startY+i/2,h=new Int32Array(3),p=this.image;for(let m=0;m<i;m++){const y=u+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));h[0]=0,h[1]=0,h[2]=0;let E=t;for(;E<a&&!p.get(E,y);)E++;let N=0;for(;E<a;){if(p.get(E,y))if(N===1)h[1]++;else if(N===2){if(this.foundPatternCross(h)){const O=this.handlePossibleCenter(h,y,E);if(O!==null)return O}h[0]=h[2],h[1]=1,h[2]=0,N=1}else h[++N]++;else N===1&&N++,h[N]++;E++}if(this.foundPatternCross(h)){const O=this.handlePossibleCenter(h,y,a);if(O!==null)return O}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new G}static centerFromEnd(t,i){return i-t[2]-t[1]/2}foundPatternCross(t){const i=this.moduleSize,o=i/2;for(let a=0;a<3;a++)if(Math.abs(i-t[a])>=o)return!1;return!0}crossCheckVertical(t,i,o,a){const u=this.image,h=u.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let m=t;for(;m>=0&&u.get(i,m)&&p[1]<=o;)p[1]++,m--;if(m<0||p[1]>o)return NaN;for(;m>=0&&!u.get(i,m)&&p[0]<=o;)p[0]++,m--;if(p[0]>o)return NaN;for(m=t+1;m<h&&u.get(i,m)&&p[1]<=o;)p[1]++,m++;if(m===h||p[1]>o)return NaN;for(;m<h&&!u.get(i,m)&&p[2]<=o;)p[2]++,m++;if(p[2]>o)return NaN;const y=p[0]+p[1]+p[2];return 5*Math.abs(y-a)>=2*a?NaN:this.foundPatternCross(p)?yi.centerFromEnd(p,m):NaN}handlePossibleCenter(t,i,o){const a=t[0]+t[1]+t[2],u=yi.centerFromEnd(t,o),h=this.crossCheckVertical(i,u,2*t[1],a);if(!isNaN(h)){const p=(t[0]+t[1]+t[2])/3;for(const y of this.possibleCenters)if(y.aboutEquals(p,h,u))return y.combineEstimate(h,u,p);const m=new _i(u,h,p);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class oi extends Te{constructor(t,i,o,a){super(t,i),this.estimatedModuleSize=o,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,i,o){if(Math.abs(i-this.getY())<=t&&Math.abs(o-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,i,o){const a=this.count+1,u=(this.count*this.getX()+i)/a,h=(this.count*this.getY()+t)/a,p=(this.count*this.estimatedModuleSize+o)/a;return new oi(u,h,p,a)}}class Ki{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class ft{constructor(t,i){this.image=t,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const i=t!=null&&t.get(se.TRY_HARDER)!==void 0,o=t!=null&&t.get(se.PURE_BARCODE)!==void 0,a=this.image,u=a.getHeight(),h=a.getWidth();let p=Math.floor(3*u/(4*ft.MAX_MODULES));(p<ft.MIN_SKIP||i)&&(p=ft.MIN_SKIP);let m=!1;const y=new Int32Array(5);for(let N=p-1;N<u&&!m;N+=p){y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0;let O=0;for(let j=0;j<h;j++)if(a.get(j,N))(O&1)===1&&O++,y[O]++;else if(O&1)y[O]++;else if(O===4)if(ft.foundPatternCross(y)){if(this.handlePossibleCenter(y,N,j,o)===!0)if(p=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const q=this.findRowSkip();q>y[2]&&(N+=q-y[2]-p,j=h-1)}else{y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,O=3;continue}O=0,y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0}else y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,O=3;else y[++O]++;ft.foundPatternCross(y)&&this.handlePossibleCenter(y,N,h,o)===!0&&(p=y[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return Te.orderBestPatterns(E),new Ki(E)}static centerFromEnd(t,i){return i-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let i=0;for(let u=0;u<5;u++){const h=t[u];if(h===0)return!1;i+=h}if(i<7)return!1;const o=i/7,a=o/2;return Math.abs(o-t[0])<a&&Math.abs(o-t[1])<a&&Math.abs(3*o-t[2])<3*a&&Math.abs(o-t[3])<a&&Math.abs(o-t[4])<a}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,i,o,a){const u=this.getCrossCheckStateCount();let h=0;const p=this.image;for(;t>=h&&i>=h&&p.get(i-h,t-h);)u[2]++,h++;if(t<h||i<h)return!1;for(;t>=h&&i>=h&&!p.get(i-h,t-h)&&u[1]<=o;)u[1]++,h++;if(t<h||i<h||u[1]>o)return!1;for(;t>=h&&i>=h&&p.get(i-h,t-h)&&u[0]<=o;)u[0]++,h++;if(u[0]>o)return!1;const m=p.getHeight(),y=p.getWidth();for(h=1;t+h<m&&i+h<y&&p.get(i+h,t+h);)u[2]++,h++;if(t+h>=m||i+h>=y)return!1;for(;t+h<m&&i+h<y&&!p.get(i+h,t+h)&&u[3]<o;)u[3]++,h++;if(t+h>=m||i+h>=y||u[3]>=o)return!1;for(;t+h<m&&i+h<y&&p.get(i+h,t+h)&&u[4]<o;)u[4]++,h++;if(u[4]>=o)return!1;const E=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(E-a)<2*a&&ft.foundPatternCross(u)}crossCheckVertical(t,i,o,a){const u=this.image,h=u.getHeight(),p=this.getCrossCheckStateCount();let m=t;for(;m>=0&&u.get(i,m);)p[2]++,m--;if(m<0)return NaN;for(;m>=0&&!u.get(i,m)&&p[1]<=o;)p[1]++,m--;if(m<0||p[1]>o)return NaN;for(;m>=0&&u.get(i,m)&&p[0]<=o;)p[0]++,m--;if(p[0]>o)return NaN;for(m=t+1;m<h&&u.get(i,m);)p[2]++,m++;if(m===h)return NaN;for(;m<h&&!u.get(i,m)&&p[3]<o;)p[3]++,m++;if(m===h||p[3]>=o)return NaN;for(;m<h&&u.get(i,m)&&p[4]<o;)p[4]++,m++;if(p[4]>=o)return NaN;const y=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(y-a)>=2*a?NaN:ft.foundPatternCross(p)?ft.centerFromEnd(p,m):NaN}crossCheckHorizontal(t,i,o,a){const u=this.image,h=u.getWidth(),p=this.getCrossCheckStateCount();let m=t;for(;m>=0&&u.get(m,i);)p[2]++,m--;if(m<0)return NaN;for(;m>=0&&!u.get(m,i)&&p[1]<=o;)p[1]++,m--;if(m<0||p[1]>o)return NaN;for(;m>=0&&u.get(m,i)&&p[0]<=o;)p[0]++,m--;if(p[0]>o)return NaN;for(m=t+1;m<h&&u.get(m,i);)p[2]++,m++;if(m===h)return NaN;for(;m<h&&!u.get(m,i)&&p[3]<o;)p[3]++,m++;if(m===h||p[3]>=o)return NaN;for(;m<h&&u.get(m,i)&&p[4]<o;)p[4]++,m++;if(p[4]>=o)return NaN;const y=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(y-a)>=a?NaN:ft.foundPatternCross(p)?ft.centerFromEnd(p,m):NaN}handlePossibleCenter(t,i,o,a){const u=t[0]+t[1]+t[2]+t[3]+t[4];let h=ft.centerFromEnd(t,o),p=this.crossCheckVertical(i,Math.floor(h),t[2],u);if(!isNaN(p)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(p),t[2],u),!isNaN(h)&&(!a||this.crossCheckDiagonal(Math.floor(p),Math.floor(h),t[2],u)))){const m=u/7;let y=!1;const E=this.possibleCenters;for(let N=0,O=E.length;N<O;N++){const j=E[N];if(j.aboutEquals(m,p,h)){E[N]=j.combineEstimate(p,h,m),y=!0;break}}if(!y){const N=new oi(h,p,m);E.push(N),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(N)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const o of this.possibleCenters)if(o.getCount()>=ft.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,i=0;const o=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=ft.CENTER_QUORUM&&(t++,i+=h.getEstimatedModuleSize());if(t<3)return!1;const a=i/o;let u=0;for(const h of this.possibleCenters)u+=Math.abs(h.getEstimatedModuleSize()-a);return u<=.05*i}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new G;const i=this.possibleCenters;let o;if(t>3){let a=0,u=0;for(const m of this.possibleCenters){const y=m.getEstimatedModuleSize();a+=y,u+=y*y}o=a/t;let h=Math.sqrt(u/t-o*o);i.sort((m,y)=>{const E=Math.abs(y.getEstimatedModuleSize()-o),N=Math.abs(m.getEstimatedModuleSize()-o);return E<N?-1:E>N?1:0});const p=Math.max(.2*o,h);for(let m=0;m<i.length&&i.length>3;m++){const y=i[m];Math.abs(y.getEstimatedModuleSize()-o)>p&&(i.splice(m,1),m--)}}if(i.length>3){let a=0;for(const u of i)a+=u.getEstimatedModuleSize();o=a/i.length,i.sort((u,h)=>{if(h.getCount()===u.getCount()){const p=Math.abs(h.getEstimatedModuleSize()-o),m=Math.abs(u.getEstimatedModuleSize()-o);return p<m?1:p>m?-1:0}else return h.getCount()-u.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}ft.CENTER_QUORUM=2,ft.MIN_SKIP=3,ft.MAX_MODULES=57;class Xe{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(se.NEED_RESULT_POINT_CALLBACK);const o=new ft(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(o)}processFinderPatternInfo(t){const i=t.getTopLeft(),o=t.getTopRight(),a=t.getBottomLeft(),u=this.calculateModuleSize(i,o,a);if(u<1)throw new G("No pattern found in proccess finder.");const h=Xe.computeDimension(i,o,a,u),p=_e.getProvisionalVersionForDimension(h),m=p.getDimensionForVersion()-7;let y=null;if(p.getAlignmentPatternCenters().length>0){const j=o.getX()-i.getX()+a.getX(),K=o.getY()-i.getY()+a.getY(),q=1-3/m,ie=Math.floor(i.getX()+q*(j-i.getX())),le=Math.floor(i.getY()+q*(K-i.getY()));for(let Ae=4;Ae<=16;Ae<<=1)try{y=this.findAlignmentInRegion(u,ie,le,Ae);break}catch(xe){if(!(xe instanceof G))throw xe}}const E=Xe.createTransform(i,o,a,y,h),N=Xe.sampleGrid(this.image,E,h);let O;return y===null?O=[a,i,o]:O=[a,i,o,y],new Pt(N,O)}static createTransform(t,i,o,a,u){const h=u-3.5;let p,m,y,E;return a!==null?(p=a.getX(),m=a.getY(),y=h-3,E=y):(p=i.getX()-t.getX()+o.getX(),m=i.getY()-t.getY()+o.getY(),y=h,E=h),Et.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,y,E,3.5,h,t.getX(),t.getY(),i.getX(),i.getY(),p,m,o.getX(),o.getY())}static sampleGrid(t,i,o){return Gn.getInstance().sampleGridWithTransform(t,o,o,i)}static computeDimension(t,i,o,a){const u=Ye.round(Te.distance(t,i)/a),h=Ye.round(Te.distance(t,o)/a);let p=Math.floor((u+h)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new G("Dimensions could be not found.")}return p}calculateModuleSize(t,i,o){return(this.calculateModuleSizeOneWay(t,i)+this.calculateModuleSizeOneWay(t,o))/2}calculateModuleSizeOneWay(t,i){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(i.getX()),Math.floor(i.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(o)?a/7:isNaN(a)?o/7:(o+a)/14}sizeOfBlackWhiteBlackRunBothWays(t,i,o,a){let u=this.sizeOfBlackWhiteBlackRun(t,i,o,a),h=1,p=t-(o-t);p<0?(h=t/(t-p),p=0):p>=this.image.getWidth()&&(h=(this.image.getWidth()-1-t)/(p-t),p=this.image.getWidth()-1);let m=Math.floor(i-(a-i)*h);return h=1,m<0?(h=i/(i-m),m=0):m>=this.image.getHeight()&&(h=(this.image.getHeight()-1-i)/(m-i),m=this.image.getHeight()-1),p=Math.floor(t+(p-t)*h),u+=this.sizeOfBlackWhiteBlackRun(t,i,p,m),u-1}sizeOfBlackWhiteBlackRun(t,i,o,a){const u=Math.abs(a-i)>Math.abs(o-t);if(u){let j=t;t=i,i=j,j=o,o=a,a=j}const h=Math.abs(o-t),p=Math.abs(a-i);let m=-h/2;const y=t<o?1:-1,E=i<a?1:-1;let N=0;const O=o+y;for(let j=t,K=i;j!==O;j+=y){const q=u?K:j,ie=u?j:K;if(N===1===this.image.get(q,ie)){if(N===2)return Ye.distance(j,K,t,i);N++}if(m+=p,m>0){if(K===a)break;K+=E,m-=h}}return N===2?Ye.distance(o+y,a,t,i):NaN}findAlignmentInRegion(t,i,o,a){const u=Math.floor(a*t),h=Math.max(0,i-u),p=Math.min(this.image.getWidth()-1,i+u);if(p-h<t*3)throw new G("Alignment top exceeds estimated module size.");const m=Math.max(0,o-u),y=Math.min(this.image.getHeight()-1,o+u);if(y-m<t*3)throw new G("Alignment bottom exceeds estimated module size.");return new yi(this.image,h,m,p-h,y-m,t,this.resultPointCallback).find()}}class un{constructor(){this.decoder=new mi}getDecoder(){return this.decoder}decode(t,i){let o,a;if(i!=null&&i.get(se.PURE_BARCODE)!==void 0){const m=un.extractPureBits(t.getBlackMatrix());o=this.decoder.decodeBitMatrix(m,i),a=un.NO_POINTS}else{const m=new Xe(t.getBlackMatrix()).detect(i);o=this.decoder.decodeBitMatrix(m.getBits(),i),a=m.getPoints()}o.getOther()instanceof In&&o.getOther().applyMirroredCorrection(a);const u=new ve(o.getText(),o.getRawBytes(),void 0,a,ge.QR_CODE,void 0),h=o.getByteSegments();h!==null&&u.putMetadata(Be.BYTE_SEGMENTS,h);const p=o.getECLevel();return p!==null&&u.putMetadata(Be.ERROR_CORRECTION_LEVEL,p),o.hasStructuredAppend()&&(u.putMetadata(Be.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),u.putMetadata(Be.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),u}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(i===null||o===null)throw new G;const a=this.moduleSize(i,t);let u=i[1],h=o[1],p=i[0],m=o[0];if(p>=m||u>=h)throw new G;if(h-u!==m-p&&(m=p+(h-u),m>=t.getWidth()))throw new G;const y=Math.round((m-p+1)/a),E=Math.round((h-u+1)/a);if(y<=0||E<=0)throw new G;if(E!==y)throw new G;const N=Math.floor(a/2);u+=N,p+=N;const O=p+Math.floor((y-1)*a)-m;if(O>0){if(O>N)throw new G;p-=O}const j=u+Math.floor((E-1)*a)-h;if(j>0){if(j>N)throw new G;u-=j}const K=new te(y,E);for(let q=0;q<E;q++){const ie=u+Math.floor(q*a);for(let le=0;le<y;le++)t.get(p+Math.floor(le*a),ie)&&K.set(le,q)}return K}static moduleSize(t,i){const o=i.getHeight(),a=i.getWidth();let u=t[0],h=t[1],p=!0,m=0;for(;u<a&&h<o;){if(p!==i.get(u,h)){if(++m===5)break;p=!p}u++,h++}if(u===a||h===o)throw new G;return(u-t[0])/7}}un.NO_POINTS=new Array;class ke{PDF417Common(){}static getBitCountSum(t){return Ye.sum(t)}static toIntArray(t){if(t==null||!t.length)return ke.EMPTY_INT_ARRAY;const i=new Int32Array(t.length);let o=0;for(const a of t)i[o++]=a;return i}static getCodeword(t){const i=B.binarySearch(ke.SYMBOL_TABLE,t&262143);return i<0?-1:(ke.CODEWORD_TABLE[i]-1)%ke.NUMBER_OF_CODEWORDS}}ke.NUMBER_OF_CODEWORDS=929,ke.MAX_CODEWORDS_IN_BARCODE=ke.NUMBER_OF_CODEWORDS-1,ke.MIN_ROWS_IN_BARCODE=3,ke.MAX_ROWS_IN_BARCODE=90,ke.MODULES_IN_CODEWORD=17,ke.MODULES_IN_STOP_PATTERN=18,ke.BARS_IN_MODULE=8,ke.EMPTY_INT_ARRAY=new Int32Array([]),ke.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ke.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Qa{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Je{static detectMultiple(t,i,o){let a=t.getBlackMatrix(),u=Je.detect(o,a);return u.length||(a=a.clone(),a.rotate180(),u=Je.detect(o,a)),new Qa(a,u)}static detect(t,i){const o=new Array;let a=0,u=0,h=!1;for(;a<i.getHeight();){const p=Je.findVertices(i,a,u);if(p[0]==null&&p[3]==null){if(!h)break;h=!1,u=0;for(const m of o)m[1]!=null&&(a=Math.trunc(Math.max(a,m[1].getY()))),m[3]!=null&&(a=Math.max(a,Math.trunc(m[3].getY())));a+=Je.ROW_STEP;continue}if(h=!0,o.push(p),!t)break;p[2]!=null?(u=Math.trunc(p[2].getX()),a=Math.trunc(p[2].getY())):(u=Math.trunc(p[4].getX()),a=Math.trunc(p[4].getY()))}return o}static findVertices(t,i,o){const a=t.getHeight(),u=t.getWidth(),h=new Array(8);return Je.copyToResult(h,Je.findRowsWithPattern(t,a,u,i,o,Je.START_PATTERN),Je.INDEXES_START_PATTERN),h[4]!=null&&(o=Math.trunc(h[4].getX()),i=Math.trunc(h[4].getY())),Je.copyToResult(h,Je.findRowsWithPattern(t,a,u,i,o,Je.STOP_PATTERN),Je.INDEXES_STOP_PATTERN),h}static copyToResult(t,i,o){for(let a=0;a<o.length;a++)t[o[a]]=i[a]}static findRowsWithPattern(t,i,o,a,u,h){const p=new Array(4);let m=!1;const y=new Int32Array(h.length);for(;a<i;a+=Je.ROW_STEP){let N=Je.findGuardPattern(t,u,a,o,!1,h,y);if(N!=null){for(;a>0;){const O=Je.findGuardPattern(t,u,--a,o,!1,h,y);if(O!=null)N=O;else{a++;break}}p[0]=new Te(N[0],a),p[1]=new Te(N[1],a),m=!0;break}}let E=a+1;if(m){let N=0,O=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;E<i;E++){const j=Je.findGuardPattern(t,O[0],E,o,!1,h,y);if(j!=null&&Math.abs(O[0]-j[0])<Je.MAX_PATTERN_DRIFT&&Math.abs(O[1]-j[1])<Je.MAX_PATTERN_DRIFT)O=j,N=0;else{if(N>Je.SKIPPED_ROW_COUNT_MAX)break;N++}}E-=N+1,p[2]=new Te(O[0],E),p[3]=new Te(O[1],E)}return E-a<Je.BARCODE_MIN_HEIGHT&&B.fill(p,null),p}static findGuardPattern(t,i,o,a,u,h,p){B.fillWithin(p,0,p.length,0);let m=i,y=0;for(;t.get(m,o)&&m>0&&y++<Je.MAX_PIXEL_DRIFT;)m--;let E=m,N=0,O=h.length;for(let j=u;E<a;E++)if(t.get(E,o)!==j)p[N]++;else{if(N===O-1){if(Je.patternMatchVariance(p,h,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE)return new Int32Array([m,E]);m+=p[0]+p[1],U.arraycopy(p,2,p,0,N-1),p[N-1]=0,p[N]=0,N--}else N++;p[N]=1,j=!j}return N===O-1&&Je.patternMatchVariance(p,h,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE?new Int32Array([m,E-1]):null}static patternMatchVariance(t,i,o){let a=t.length,u=0,h=0;for(let y=0;y<a;y++)u+=t[y],h+=i[y];if(u<h)return 1/0;let p=u/h;o*=p;let m=0;for(let y=0;y<a;y++){let E=t[y],N=i[y]*p,O=E>N?E-N:N-E;if(O>o)return 1/0;m+=O}return m/u}}Je.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Je.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Je.MAX_AVG_VARIANCE=.42,Je.MAX_INDIVIDUAL_VARIANCE=.8,Je.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Je.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Je.MAX_PIXEL_DRIFT=3,Je.MAX_PATTERN_DRIFT=5,Je.SKIPPED_ROW_COUNT_MAX=25,Je.ROW_STEP=5,Je.BARCODE_MIN_HEIGHT=10;class cn{constructor(t,i){if(i.length===0)throw new I;this.field=t;let o=i.length;if(o>1&&i[0]===0){let a=1;for(;a<o&&i[a]===0;)a++;a===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-a),U.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let a=0;for(let u of this.coefficients)a=this.field.add(a,u);return a}let i=this.coefficients[0],o=this.coefficients.length;for(let a=1;a<o;a++)i=this.field.add(this.field.multiply(t,i),this.coefficients[a]);return i}add(t){if(!this.field.equals(t.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,o=t.coefficients;if(i.length>o.length){let h=i;i=o,o=h}let a=new Int32Array(o.length),u=o.length-i.length;U.arraycopy(o,0,a,0,u);for(let h=u;h<o.length;h++)a[h]=this.field.add(i[h-u],o[h]);return new cn(this.field,a)}subtract(t){if(!this.field.equals(t.field))throw new I("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof cn?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new cn(this.field,new Int32Array([0]));let i=this.coefficients,o=i.length,a=t.coefficients,u=a.length,h=new Int32Array(o+u-1);for(let p=0;p<o;p++){let m=i[p];for(let y=0;y<u;y++)h[p+y]=this.field.add(h[p+y],this.field.multiply(m,a[y]))}return new cn(this.field,h)}negative(){let t=this.coefficients.length,i=new Int32Array(t);for(let o=0;o<t;o++)i[o]=this.field.subtract(0,this.coefficients[o]);return new cn(this.field,i)}multiplyScalar(t){if(t===0)return new cn(this.field,new Int32Array([0]));if(t===1)return this;let i=this.coefficients.length,o=new Int32Array(i);for(let a=0;a<i;a++)o[a]=this.field.multiply(this.coefficients[a],t);return new cn(this.field,o)}multiplyByMonomial(t,i){if(t<0)throw new I;if(i===0)return new cn(this.field,new Int32Array([0]));let o=this.coefficients.length,a=new Int32Array(o+t);for(let u=0;u<o;u++)a[u]=this.field.multiply(this.coefficients[u],i);return new cn(this.field,a)}toString(){let t=new Z;for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);o!==0&&(o<0?(t.append(" - "),o=-o):t.length()>0&&t.append(" + "),(i===0||o!==1)&&t.append(o),i!==0&&(i===1?t.append("x"):(t.append("x^"),t.append(i))))}return t.toString()}}class Fo{add(t,i){return(t+i)%this.modulus}subtract(t,i){return(this.modulus+t-i)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new I;return this.logTable[t]}inverse(t){if(t===0)throw new yt;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class Qi extends Fo{constructor(t,i){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let o=1;for(let a=0;a<t;a++)this.expTable[a]=o,o=o*i%t;for(let a=0;a<t-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new cn(this,new Int32Array([0])),this.one=new cn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new I;if(i===0)return this.zero;let o=new Int32Array(t+1);return o[0]=i,new cn(this,o)}}Qi.PDF417_GF=new Qi(ke.NUMBER_OF_CODEWORDS,3);class Zs{constructor(){this.field=Qi.PDF417_GF}decode(t,i,o){let a=new cn(this.field,t),u=new Int32Array(i),h=!1;for(let K=i;K>0;K--){let q=a.evaluateAt(this.field.exp(K));u[i-K]=q,q!==0&&(h=!0)}if(!h)return 0;let p=this.field.getOne();if(o!=null)for(const K of o){let q=this.field.exp(t.length-1-K),ie=new cn(this.field,new Int32Array([this.field.subtract(0,q),1]));p=p.multiply(ie)}let m=new cn(this.field,u),y=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),m,i),E=y[0],N=y[1],O=this.findErrorLocations(E),j=this.findErrorMagnitudes(N,E,O);for(let K=0;K<O.length;K++){let q=t.length-1-this.field.log(O[K]);if(q<0)throw F.getChecksumInstance();t[q]=this.field.subtract(t[q],j[K])}return O.length}runEuclideanAlgorithm(t,i,o){if(t.getDegree()<i.getDegree()){let O=t;t=i,i=O}let a=t,u=i,h=this.field.getZero(),p=this.field.getOne();for(;u.getDegree()>=Math.round(o/2);){let O=a,j=h;if(a=u,h=p,a.isZero())throw F.getChecksumInstance();u=O;let K=this.field.getZero(),q=a.getCoefficient(a.getDegree()),ie=this.field.inverse(q);for(;u.getDegree()>=a.getDegree()&&!u.isZero();){let le=u.getDegree()-a.getDegree(),Ae=this.field.multiply(u.getCoefficient(u.getDegree()),ie);K=K.add(this.field.buildMonomial(le,Ae)),u=u.subtract(a.multiplyByMonomial(le,Ae))}p=K.multiply(h).subtract(j).negative()}let m=p.getCoefficient(0);if(m===0)throw F.getChecksumInstance();let y=this.field.inverse(m),E=p.multiply(y),N=u.multiply(y);return[E,N]}findErrorLocations(t){let i=t.getDegree(),o=new Int32Array(i),a=0;for(let u=1;u<this.field.getSize()&&a<i;u++)t.evaluateAt(u)===0&&(o[a]=this.field.inverse(u),a++);if(a!==i)throw F.getChecksumInstance();return o}findErrorMagnitudes(t,i,o){let a=i.getDegree(),u=new Int32Array(a);for(let y=1;y<=a;y++)u[a-y]=this.field.multiply(y,i.getCoefficient(y));let h=new cn(this.field,u),p=o.length,m=new Int32Array(p);for(let y=0;y<p;y++){let E=this.field.inverse(o[y]),N=this.field.subtract(0,t.evaluateAt(E)),O=this.field.inverse(h.evaluateAt(E));m[y]=this.field.multiply(N,O)}return m}}class vi{constructor(t,i,o,a,u){t instanceof vi?this.constructor_2(t):this.constructor_1(t,i,o,a,u)}constructor_1(t,i,o,a,u){const h=i==null||o==null,p=a==null||u==null;if(h&&p)throw new G;h?(i=new Te(0,a.getY()),o=new Te(0,u.getY())):p&&(a=new Te(t.getWidth()-1,i.getY()),u=new Te(t.getWidth()-1,o.getY())),this.image=t,this.topLeft=i,this.bottomLeft=o,this.topRight=a,this.bottomRight=u,this.minX=Math.trunc(Math.min(i.getX(),o.getX())),this.maxX=Math.trunc(Math.max(a.getX(),u.getX())),this.minY=Math.trunc(Math.min(i.getY(),a.getY())),this.maxY=Math.trunc(Math.max(o.getY(),u.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,i){return t==null?i:i==null?t:new vi(t.image,t.topLeft,t.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(t,i,o){let a=this.topLeft,u=this.bottomLeft,h=this.topRight,p=this.bottomRight;if(t>0){let m=o?this.topLeft:this.topRight,y=Math.trunc(m.getY()-t);y<0&&(y=0);let E=new Te(m.getX(),y);o?a=E:h=E}if(i>0){let m=o?this.bottomLeft:this.bottomRight,y=Math.trunc(m.getY()+i);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);let E=new Te(m.getX(),y);o?u=E:p=E}return new vi(this.image,a,u,h,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class vn{constructor(t,i,o,a){this.columnCount=t,this.errorCorrectionLevel=a,this.rowCountUpperPart=i,this.rowCountLowerPart=o,this.rowCount=i+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class wi{constructor(){this.buffer=""}static form(t,i){let o=-1;function a(h,p,m,y,E,N){if(h==="%%")return"%";if(i[++o]===void 0)return;h=y?parseInt(y.substr(1)):void 0;let O=E?parseInt(E.substr(1)):void 0,j;switch(N){case"s":j=i[o];break;case"c":j=i[o][0];break;case"f":j=parseFloat(i[o]).toFixed(h);break;case"p":j=parseFloat(i[o]).toPrecision(h);break;case"e":j=parseFloat(i[o]).toExponential(h);break;case"x":j=parseInt(i[o]).toString(O||16);break;case"d":j=parseFloat(parseInt(i[o],O||10).toPrecision(h)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(O);let K=parseInt(m),q=m&&m[0]+""=="0"?"0":" ";for(;j.length<K;)j=p!==void 0?j+q:q+j;return j}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,a)}format(t,...i){this.buffer+=wi.form(t,i)}toString(){return this.buffer}}class Wr{constructor(t){this.boundingBox=new vi(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let i=this.getCodeword(t);if(i!=null)return i;for(let o=1;o<Wr.MAX_NEARBY_DISTANCE;o++){let a=this.imageRowToCodewordIndex(t)-o;if(a>=0&&(i=this.codewords[a],i!=null)||(a=this.imageRowToCodewordIndex(t)+o,a<this.codewords.length&&(i=this.codewords[a],i!=null)))return i}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,i){this.codewords[this.imageRowToCodewordIndex(t)]=i}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new wi;let i=0;for(const o of this.codewords){if(o==null){t.format("%3d:    |   %n",i++);continue}t.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}return t.toString()}}Wr.MAX_NEARBY_DISTANCE=5;class Zr{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let i=this.values.get(t);i==null&&(i=0),i++,this.values.set(t,i)}getValue(){let t=-1,i=new Array;for(const[o,a]of this.values.entries()){const u={getKey:()=>o,getValue:()=>a};u.getValue()>t?(t=u.getValue(),i=[],i.push(u.getKey())):u.getValue()===t&&i.push(u.getKey())}return ke.toIntArray(i)}getConfidence(t){return this.values.get(t)}}class qa extends Wr{constructor(t,i){super(t),this._isLeft=i}setRowNumbers(){for(let t of this.getCodewords())t!=null&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,t);let o=this.getBoundingBox(),a=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),m=-1,y=1,E=0;for(let N=h;N<p;N++){if(i[N]==null)continue;let O=i[N],j=O.getRowNumber()-m;if(j===0)E++;else if(j===1)y=Math.max(y,E),E=1,m=O.getRowNumber();else if(j<0||O.getRowNumber()>=t.getRowCount()||j>N)i[N]=null;else{let K;y>2?K=(y-2)*j:K=j;let q=K>=N;for(let ie=1;ie<=K&&!q;ie++)q=i[N-ie]!=null;q?i[N]=null:(m=O.getRowNumber(),E=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let i=new Int32Array(t.getRowCount());for(let o of this.getCodewords())if(o!=null){let a=o.getRowNumber();if(a>=i.length)continue;i[a]++}return i}adjustIncompleteIndicatorColumnRowNumbers(t){let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),p=this.getCodewords(),m=-1;for(let y=u;y<h;y++){if(p[y]==null)continue;let E=p[y];E.setRowNumberAsRowIndicatorColumn();let N=E.getRowNumber()-m;N===0||(N===1?m=E.getRowNumber():E.getRowNumber()>=t.getRowCount()?p[y]=null:m=E.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),i=new Zr,o=new Zr,a=new Zr,u=new Zr;for(let p of t){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let m=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:o.setValue(m*3+1);break;case 1:u.setValue(m/3),a.setValue(m%3);break;case 2:i.setValue(m+1);break}}if(i.getValue().length===0||o.getValue().length===0||a.getValue().length===0||u.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+a.getValue()[0]<ke.MIN_ROWS_IN_BARCODE||o.getValue()[0]+a.getValue()[0]>ke.MAX_ROWS_IN_BARCODE)return null;let h=new vn(i.getValue()[0],o.getValue()[0],a.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(t,h),h}removeIncorrectCodewords(t,i){for(let o=0;o<t.length;o++){let a=t[o];if(t[o]==null)continue;let u=a.getValue()%30,h=a.getRowNumber();if(h>i.getRowCount()){t[o]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:u*3+1!==i.getRowCountUpperPart()&&(t[o]=null);break;case 1:(Math.trunc(u/3)!==i.getErrorCorrectionLevel()||u%3!==i.getRowCountLowerPart())&&(t[o]=null);break;case 2:u+1!==i.getColumnCount()&&(t[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Gr{constructor(t,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=ke.MAX_CODEWORDS_IN_BARCODE,i;do i=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let o=this.detectionResultColumns[i].getCodewords();for(let a=0;a<o.length;a++)o[a]!=null&&(o[a].hasValidRowNumber()||this.adjustRowNumbers(i,a,o))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<t.length;o++)if(t[o]!=null&&i[o]!=null&&t[o].getRowNumber()===i[o].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let u=this.detectionResultColumns[a].getCodewords()[o];u!=null&&(u.setRowNumber(t[o].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let a=i[o].getRowNumber(),u=0;for(let h=this.barcodeColumnCount+1;h>0&&u<this.ADJUST_ROW_NUMBER_SKIP;h--){let p=this.detectionResultColumns[h].getCodewords()[o];p!=null&&(u=Gr.adjustRowNumberIfValid(a,u,p),p.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,i=this.detectionResultColumns[0].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let a=i[o].getRowNumber(),u=0;for(let h=1;h<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;h++){let p=this.detectionResultColumns[h].getCodewords()[o];p!=null&&(u=Gr.adjustRowNumberIfValid(a,u,p),p.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,i,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(t)?(o.setRowNumber(t),i=0):++i),i}adjustRowNumbers(t,i,o){if(!this.detectionResultColumns[t-1])return;let a=o[i],u=this.detectionResultColumns[t-1].getCodewords(),h=u;this.detectionResultColumns[t+1]!=null&&(h=this.detectionResultColumns[t+1].getCodewords());let p=new Array(14);p[2]=u[i],p[3]=h[i],i>0&&(p[0]=o[i-1],p[4]=u[i-1],p[5]=h[i-1]),i>1&&(p[8]=o[i-2],p[10]=u[i-2],p[11]=h[i-2]),i<o.length-1&&(p[1]=o[i+1],p[6]=u[i+1],p[7]=h[i+1]),i<o.length-2&&(p[9]=o[i+2],p[12]=u[i+2],p[13]=h[i+2]);for(let m of p)if(Gr.adjustRowNumber(a,m))return}static adjustRowNumber(t,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===t.getBucket()?(t.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,i){this.detectionResultColumns[t]=i}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new wi;for(let o=0;o<t.getCodewords().length;o++){i.format("CW %3d:",o);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){i.format("    |   ");continue}let u=this.detectionResultColumns[a].getCodewords()[o];if(u==null){i.format("    |   ");continue}i.format(" %3d|%3d",u.getRowNumber(),u.getValue())}i.format("%n")}return i.toString()}}class Tr{constructor(t,i,o,a){this.rowNumber=Tr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(i),this.bucket=Math.trunc(o),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==Tr.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}Tr.BARCODE_ROW_UNKNOWN=-1;class Fn{static initialize(){for(let t=0;t<ke.SYMBOL_TABLE.length;t++){let i=ke.SYMBOL_TABLE[t],o=i&1;for(let a=0;a<ke.BARS_IN_MODULE;a++){let u=0;for(;(i&1)===o;)u+=1,i>>=1;o=i&1,Fn.RATIOS_TABLE[t]||(Fn.RATIOS_TABLE[t]=new Array(ke.BARS_IN_MODULE)),Fn.RATIOS_TABLE[t][ke.BARS_IN_MODULE-a-1]=Math.fround(u/ke.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let i=Fn.getDecodedCodewordValue(Fn.sampleBitCounts(t));return i!==-1?i:Fn.getClosestDecodedValue(t)}static sampleBitCounts(t){let i=Ye.sum(t),o=new Int32Array(ke.BARS_IN_MODULE),a=0,u=0;for(let h=0;h<ke.MODULES_IN_CODEWORD;h++){let p=i/(2*ke.MODULES_IN_CODEWORD)+h*i/ke.MODULES_IN_CODEWORD;u+t[a]<=p&&(u+=t[a],a++),o[a]++}return o}static getDecodedCodewordValue(t){let i=Fn.getBitValue(t);return ke.getCodeword(i)===-1?-1:i}static getBitValue(t){let i=0;for(let o=0;o<t.length;o++)for(let a=0;a<t[o];a++)i=i<<1|(o%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(t){let i=Ye.sum(t),o=new Array(ke.BARS_IN_MODULE);if(i>1)for(let h=0;h<o.length;h++)o[h]=Math.fround(t[h]/i);let a=Kt.MAX_VALUE,u=-1;this.bSymbolTableReady||Fn.initialize();for(let h=0;h<Fn.RATIOS_TABLE.length;h++){let p=0,m=Fn.RATIOS_TABLE[h];for(let y=0;y<ke.BARS_IN_MODULE;y++){let E=Math.fround(m[y]-o[y]);if(p+=Math.fround(E*E),p>=a)break}p<a&&(a=p,u=ke.SYMBOL_TABLE[h])}return u}}Fn.bSymbolTableReady=!1,Fn.RATIOS_TABLE=new Array(ke.SYMBOL_TABLE.length).map(T=>new Array(ke.BARS_IN_MODULE));class jo{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class lt{static parseLong(t,i=void 0){return parseInt(t,i)}}class $a extends v{}$a.kind="NullPointerException";class Ci{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,i,o){if(t==null)throw new $a;if(i<0||i>t.length||o<0||i+o>t.length||i+o<0)throw new ue;if(o===0)return;for(let a=0;a<o;a++)this.write(t[i+a])}flush(){}close(){}}class Es extends v{}class Ja extends Ci{constructor(t=32){if(super(),this.count=0,t<0)throw new I("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let o=this.buf.length<<1;if(o-t<0&&(o=t),o<0){if(t<0)throw new Es;o=P.MAX_VALUE}this.buf=B.copyOfUint8Array(this.buf,o)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,i,o){if(i<0||i>t.length||o<0||i+o-t.length>0)throw new ue;this.ensureCapacity(this.count+o),U.arraycopy(t,i,this.buf,this.count,o),this.count+=o}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return B.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var At;(function(T){T[T.ALPHA=0]="ALPHA",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.PUNCT=3]="PUNCT",T[T.ALPHA_SHIFT=4]="ALPHA_SHIFT",T[T.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(At||(At={}));function Gs(){if(typeof window<"u"||typeof window<"u")return window.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Xs;function qi(T){if(typeof Xs>"u"&&(Xs=Gs()),Xs===null)throw new Error("BigInt is not supported!");return Xs(T)}function Vu(){let T=[];T[0]=qi(1);let t=qi(900);T[1]=t;for(let i=2;i<16;i++)T[i]=T[i-1]*t;return T}class ce{static decode(t,i){let o=new Z(""),a=V.ISO8859_1;o.enableDecoding(a);let u=1,h=t[u++],p=new jo;for(;u<t[0];){switch(h){case ce.TEXT_COMPACTION_MODE_LATCH:u=ce.textCompaction(t,u,o);break;case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:u=ce.byteCompaction(h,t,a,u,o);break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(t[u++]);break;case ce.NUMERIC_COMPACTION_MODE_LATCH:u=ce.numericCompaction(t,u,o);break;case ce.ECI_CHARSET:V.getCharacterSetECIByValue(t[u++]);break;case ce.ECI_GENERAL_PURPOSE:u+=2;break;case ce.ECI_USER_DEFINED:u++;break;case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=ce.decodeMacroBlock(t,u,p);break;case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:throw new $;default:u--,u=ce.textCompaction(t,u,o);break}if(u<t.length)h=t[u++];else throw $.getFormatInstance()}if(o.length()===0)throw $.getFormatInstance();let m=new Mt(null,o.toString(),null,i);return m.setOther(p),m}static decodeMacroBlock(t,i,o){if(i+ce.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw $.getFormatInstance();let a=new Int32Array(ce.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<ce.NUMBER_OF_SEQUENCE_CODEWORDS;p++,i++)a[p]=t[i];o.setSegmentIndex(P.parseInt(ce.decodeBase900toBase10(a,ce.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new Z;i=ce.textCompaction(t,i,u),o.setFileId(u.toString());let h=-1;for(t[i]===ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=i+1);i<t[0];)switch(t[i]){case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,t[i]){case ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new Z;i=ce.textCompaction(t,i+1,p),o.setFileName(p.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new Z;i=ce.textCompaction(t,i+1,m),o.setSender(m.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let y=new Z;i=ce.textCompaction(t,i+1,y),o.setAddressee(y.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new Z;i=ce.numericCompaction(t,i+1,E),o.setSegmentCount(P.parseInt(E.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let N=new Z;i=ce.numericCompaction(t,i+1,N),o.setTimestamp(lt.parseLong(N.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let O=new Z;i=ce.numericCompaction(t,i+1,O),o.setChecksum(P.parseInt(O.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let j=new Z;i=ce.numericCompaction(t,i+1,j),o.setFileSize(lt.parseLong(j.toString()));break;default:throw $.getFormatInstance()}break;case ce.MACRO_PDF417_TERMINATOR:i++,o.setLastSegment(!0);break;default:throw $.getFormatInstance()}if(h!==-1){let p=i-h;o.isLastSegment()&&p--,o.setOptionalData(B.copyOfRange(t,h,h+p))}return i}static textCompaction(t,i,o){let a=new Int32Array((t[0]-i)*2),u=new Int32Array((t[0]-i)*2),h=0,p=!1;for(;i<t[0]&&!p;){let m=t[i++];if(m<ce.TEXT_COMPACTION_MODE_LATCH)a[h]=m/30,a[h+1]=m%30,h+=2;else switch(m){case ce.TEXT_COMPACTION_MODE_LATCH:a[h++]=ce.TEXT_COMPACTION_MODE_LATCH;break;case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:i--,p=!0;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[h]=ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=t[i++],u[h]=m,h++;break}}return ce.decodeTextCompaction(a,u,h,o),i}static decodeTextCompaction(t,i,o,a){let u=At.ALPHA,h=At.ALPHA,p=0;for(;p<o;){let m=t[p],y="";switch(u){case At.ALPHA:if(m<26)y=String.fromCharCode(65+m);else switch(m){case 26:y=" ";break;case ce.LL:u=At.LOWER;break;case ce.ML:u=At.MIXED;break;case ce.PS:h=u,u=At.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:u=At.ALPHA;break}break;case At.LOWER:if(m<26)y=String.fromCharCode(97+m);else switch(m){case 26:y=" ";break;case ce.AS:h=u,u=At.ALPHA_SHIFT;break;case ce.ML:u=At.MIXED;break;case ce.PS:h=u,u=At.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:u=At.ALPHA;break}break;case At.MIXED:if(m<ce.PL)y=ce.MIXED_CHARS[m];else switch(m){case ce.PL:u=At.PUNCT;break;case 26:y=" ";break;case ce.LL:u=At.LOWER;break;case ce.AL:u=At.ALPHA;break;case ce.PS:h=u,u=At.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:u=At.ALPHA;break}break;case At.PUNCT:if(m<ce.PAL)y=ce.PUNCT_CHARS[m];else switch(m){case ce.PAL:u=At.ALPHA;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:u=At.ALPHA;break}break;case At.ALPHA_SHIFT:if(u=h,m<26)y=String.fromCharCode(65+m);else switch(m){case 26:y=" ";break;case ce.TEXT_COMPACTION_MODE_LATCH:u=At.ALPHA;break}break;case At.PUNCT_SHIFT:if(u=h,m<ce.PAL)y=ce.PUNCT_CHARS[m];else switch(m){case ce.PAL:u=At.ALPHA;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:u=At.ALPHA;break}break}y!==""&&a.append(y),p++}}static byteCompaction(t,i,o,a,u){let h=new Ja,p=0,m=0,y=!1;switch(t){case ce.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),N=i[a++];for(;a<i[0]&&!y;)switch(E[p++]=N,m=900*m+N,N=i[a++],N){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:a--,y=!0;break;default:if(p%5===0&&p>0){for(let O=0;O<6;++O)h.write(Number(qi(m)>>qi(8*(5-O))));m=0,p=0}break}a===i[0]&&N<ce.TEXT_COMPACTION_MODE_LATCH&&(E[p++]=N);for(let O=0;O<p;O++)h.write(E[O]);break;case ce.BYTE_COMPACTION_MODE_LATCH_6:for(;a<i[0]&&!y;){let O=i[a++];if(O<ce.TEXT_COMPACTION_MODE_LATCH)p++,m=900*m+O;else switch(O){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:a--,y=!0;break}if(p%5===0&&p>0){for(let j=0;j<6;++j)h.write(Number(qi(m)>>qi(8*(5-j))));m=0,p=0}}break}return u.append(ee.decode(h.toByteArray(),o)),a}static numericCompaction(t,i,o){let a=0,u=!1,h=new Int32Array(ce.MAX_NUMERIC_CODEWORDS);for(;i<t[0]&&!u;){let p=t[i++];if(i===t[0]&&(u=!0),p<ce.TEXT_COMPACTION_MODE_LATCH)h[a]=p,a++;else switch(p){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:i--,u=!0;break}(a%ce.MAX_NUMERIC_CODEWORDS===0||p===ce.NUMERIC_COMPACTION_MODE_LATCH||u)&&a>0&&(o.append(ce.decodeBase900toBase10(h,a)),a=0)}return i}static decodeBase900toBase10(t,i){let o=qi(0);for(let u=0;u<i;u++)o+=ce.EXP900[i-u-1]*qi(t[u]);let a=o.toString();if(a.charAt(0)!=="1")throw new $;return a.substring(1)}}ce.TEXT_COMPACTION_MODE_LATCH=900,ce.BYTE_COMPACTION_MODE_LATCH=901,ce.NUMERIC_COMPACTION_MODE_LATCH=902,ce.BYTE_COMPACTION_MODE_LATCH_6=924,ce.ECI_USER_DEFINED=925,ce.ECI_GENERAL_PURPOSE=926,ce.ECI_CHARSET=927,ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ce.MACRO_PDF417_TERMINATOR=922,ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ce.MAX_NUMERIC_CODEWORDS=15,ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ce.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ce.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ce.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ce.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ce.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ce.PL=25,ce.LL=27,ce.AS=27,ce.ML=28,ce.AL=28,ce.PS=29,ce.PAL=29,ce.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ce.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ce.EXP900=Gs()?Vu():[],ce.NUMBER_OF_SEQUENCE_CODEWORDS=2;class tt{constructor(){}static decode(t,i,o,a,u,h,p){let m=new vi(t,i,o,a,u),y=null,E=null,N;for(let K=!0;;K=!1){if(i!=null&&(y=tt.getRowIndicatorColumn(t,m,i,!0,h,p)),a!=null&&(E=tt.getRowIndicatorColumn(t,m,a,!1,h,p)),N=tt.merge(y,E),N==null)throw G.getNotFoundInstance();let q=N.getBoundingBox();if(K&&q!=null&&(q.getMinY()<m.getMinY()||q.getMaxY()>m.getMaxY()))m=q;else break}N.setBoundingBox(m);let O=N.getBarcodeColumnCount()+1;N.setDetectionResultColumn(0,y),N.setDetectionResultColumn(O,E);let j=y!=null;for(let K=1;K<=O;K++){let q=j?K:O-K;if(N.getDetectionResultColumn(q)!==void 0)continue;let ie;q===0||q===O?ie=new qa(m,q===0):ie=new Wr(m),N.setDetectionResultColumn(q,ie);let le=-1,Ae=le;for(let xe=m.getMinY();xe<=m.getMaxY();xe++){if(le=tt.getStartColumn(N,q,xe,j),le<0||le>m.getMaxX()){if(Ae===-1)continue;le=Ae}let Ee=tt.detectCodeword(t,m.getMinX(),m.getMaxX(),j,le,xe,h,p);Ee!=null&&(ie.setCodeword(xe,Ee),Ae=le,h=Math.min(h,Ee.getWidth()),p=Math.max(p,Ee.getWidth()))}}return tt.createDecoderResult(N)}static merge(t,i){if(t==null&&i==null)return null;let o=tt.getBarcodeMetadata(t,i);if(o==null)return null;let a=vi.merge(tt.adjustBoundingBox(t),tt.adjustBoundingBox(i));return new Gr(o,a)}static adjustBoundingBox(t){if(t==null)return null;let i=t.getRowHeights();if(i==null)return null;let o=tt.getMax(i),a=0;for(let p of i)if(a+=o-p,p>0)break;let u=t.getCodewords();for(let p=0;a>0&&u[p]==null;p++)a--;let h=0;for(let p=i.length-1;p>=0&&(h+=o-i[p],!(i[p]>0));p--);for(let p=u.length-1;h>0&&u[p]==null;p--)h--;return t.getBoundingBox().addMissingRows(a,h,t.isLeft())}static getMax(t){let i=-1;for(let o of t)i=Math.max(i,o);return i}static getBarcodeMetadata(t,i){let o;if(t==null||(o=t.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let a;return i==null||(a=i.getBarcodeMetadata())==null?o:o.getColumnCount()!==a.getColumnCount()&&o.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&o.getRowCount()!==a.getRowCount()?null:o}static getRowIndicatorColumn(t,i,o,a,u,h){let p=new qa(i,a);for(let m=0;m<2;m++){let y=m===0?1:-1,E=Math.trunc(Math.trunc(o.getX()));for(let N=Math.trunc(Math.trunc(o.getY()));N<=i.getMaxY()&&N>=i.getMinY();N+=y){let O=tt.detectCodeword(t,0,t.getWidth(),a,E,N,u,h);O!=null&&(p.setCodeword(N,O),a?E=O.getStartX():E=O.getEndX())}}return p}static adjustCodewordCount(t,i){let o=i[0][1],a=o.getValue(),u=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-tt.getNumberOfECCodeWords(t.getBarcodeECLevel());if(a.length===0){if(u<1||u>ke.MAX_CODEWORDS_IN_BARCODE)throw G.getNotFoundInstance();o.setValue(u)}else a[0]!==u&&o.setValue(u)}static createDecoderResult(t){let i=tt.createBarcodeMatrix(t);tt.adjustCodewordCount(t,i);let o=new Array,a=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),u=[],h=new Array;for(let m=0;m<t.getBarcodeRowCount();m++)for(let y=0;y<t.getBarcodeColumnCount();y++){let E=i[m][y+1].getValue(),N=m*t.getBarcodeColumnCount()+y;E.length===0?o.push(N):E.length===1?a[N]=E[0]:(h.push(N),u.push(E))}let p=new Array(u.length);for(let m=0;m<p.length;m++)p[m]=u[m];return tt.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),a,ke.toIntArray(o),ke.toIntArray(h),p)}static createDecoderResultFromAmbiguousValues(t,i,o,a,u){let h=new Int32Array(a.length),p=100;for(;p-- >0;){for(let m=0;m<h.length;m++)i[a[m]]=u[m][h[m]];try{return tt.decodeCodewords(i,t,o)}catch(m){if(!(m instanceof F))throw m}if(h.length===0)throw F.getChecksumInstance();for(let m=0;m<h.length;m++)if(h[m]<u[m].length-1){h[m]++;break}else if(h[m]=0,m===h.length-1)throw F.getChecksumInstance()}throw F.getChecksumInstance()}static createBarcodeMatrix(t){let i=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let a=0;a<i.length;a++)for(let u=0;u<i[a].length;u++)i[a][u]=new Zr;let o=0;for(let a of t.getDetectionResultColumns()){if(a!=null){for(let u of a.getCodewords())if(u!=null){let h=u.getRowNumber();if(h>=0){if(h>=i.length)continue;i[h][o].setValue(u.getValue())}}}o++}return i}static isValidBarcodeColumn(t,i){return i>=0&&i<=t.getBarcodeColumnCount()+1}static getStartColumn(t,i,o,a){let u=a?1:-1,h=null;if(tt.isValidBarcodeColumn(t,i-u)&&(h=t.getDetectionResultColumn(i-u).getCodeword(o)),h!=null)return a?h.getEndX():h.getStartX();if(h=t.getDetectionResultColumn(i).getCodewordNearby(o),h!=null)return a?h.getStartX():h.getEndX();if(tt.isValidBarcodeColumn(t,i-u)&&(h=t.getDetectionResultColumn(i-u).getCodewordNearby(o)),h!=null)return a?h.getEndX():h.getStartX();let p=0;for(;tt.isValidBarcodeColumn(t,i-u);){i-=u;for(let m of t.getDetectionResultColumn(i).getCodewords())if(m!=null)return(a?m.getEndX():m.getStartX())+u*p*(m.getEndX()-m.getStartX());p++}return a?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,i,o,a,u,h,p,m){u=tt.adjustCodewordStartColumn(t,i,o,a,u,h);let y=tt.getModuleBitCount(t,i,o,a,u,h);if(y==null)return null;let E,N=Ye.sum(y);if(a)E=u+N;else{for(let K=0;K<y.length/2;K++){let q=y[K];y[K]=y[y.length-1-K],y[y.length-1-K]=q}E=u,u=E-N}if(!tt.checkCodewordSkew(N,p,m))return null;let O=Fn.getDecodedValue(y),j=ke.getCodeword(O);return j===-1?null:new Tr(u,E,tt.getCodewordBucketNumber(O),j)}static getModuleBitCount(t,i,o,a,u,h){let p=u,m=new Int32Array(8),y=0,E=a?1:-1,N=a;for(;(a?p<o:p>=i)&&y<m.length;)t.get(p,h)===N?(m[y]++,p+=E):(y++,N=!N);return y===m.length||p===(a?o:i)&&y===m.length-1?m:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,i,o,a,u,h){let p=u,m=a?-1:1;for(let y=0;y<2;y++){for(;(a?p>=i:p<o)&&a===t.get(p,h);){if(Math.abs(u-p)>tt.CODEWORD_SKEW_SIZE)return u;p+=m}m=-m,a=!a}return p}static checkCodewordSkew(t,i,o){return i-tt.CODEWORD_SKEW_SIZE<=t&&t<=o+tt.CODEWORD_SKEW_SIZE}static decodeCodewords(t,i,o){if(t.length===0)throw $.getFormatInstance();let a=1<<i+1,u=tt.correctErrors(t,o,a);tt.verifyCodewordCount(t,a);let h=ce.decode(t,""+i);return h.setErrorsCorrected(u),h.setErasures(o.length),h}static correctErrors(t,i,o){if(i!=null&&i.length>o/2+tt.MAX_ERRORS||o<0||o>tt.MAX_EC_CODEWORDS)throw F.getChecksumInstance();return tt.errorCorrection.decode(t,o,i)}static verifyCodewordCount(t,i){if(t.length<4)throw $.getFormatInstance();let o=t[0];if(o>t.length)throw $.getFormatInstance();if(o===0)if(i<t.length)t[0]=t.length-i;else throw $.getFormatInstance()}static getBitCountForCodeword(t){let i=new Int32Array(8),o=0,a=i.length-1;for(;!((t&1)!==o&&(o=t&1,a--,a<0));)i[a]++,t>>=1;return i}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return tt.getCodewordBucketNumber(tt.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let i=new wi;for(let o=0;o<t.length;o++){i.format("Row %2d: ",o);for(let a=0;a<t[o].length;a++){let u=t[o][a];u.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}i.format("%n")}return i.toString()}}tt.CODEWORD_SKEW_SIZE=2,tt.MAX_ERRORS=3,tt.MAX_EC_CODEWORDS=512,tt.errorCorrection=new Zs;class wn{decode(t,i=null){let o=wn.decode(t,i,!1);if(o==null||o.length===0||o[0]==null)throw G.getNotFoundInstance();return o[0]}decodeMultiple(t,i=null){try{return wn.decode(t,i,!0)}catch(o){throw o instanceof $||o instanceof F?G.getNotFoundInstance():o}}static decode(t,i,o){const a=new Array,u=Je.detectMultiple(t,i,o);for(const h of u.getPoints()){const p=tt.decode(u.getBits(),h[4],h[5],h[6],h[7],wn.getMinCodewordWidth(h),wn.getMaxCodewordWidth(h)),m=new ve(p.getText(),p.getRawBytes(),void 0,h,ge.PDF_417);m.putMetadata(Be.ERROR_CORRECTION_LEVEL,p.getECLevel());const y=p.getOther();y!=null&&m.putMetadata(Be.PDF417_EXTRA_METADATA,y),a.push(m)}return a.map(h=>h)}static getMaxWidth(t,i){return t==null||i==null?0:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMinWidth(t,i){return t==null||i==null?P.MAX_VALUE:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(wn.getMaxWidth(t[0],t[4]),wn.getMaxWidth(t[6],t[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.max(wn.getMaxWidth(t[1],t[5]),wn.getMaxWidth(t[7],t[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(wn.getMinWidth(t[0],t[4]),wn.getMinWidth(t[6],t[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.min(wn.getMinWidth(t[1],t[5]),wn.getMinWidth(t[7],t[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))}reset(){}}class $n extends v{}$n.kind="ReaderException";class el{constructor(t,i){this.verbose=t===!0,i&&this.setHints(i)}decode(t,i){return i&&this.setHints(i),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const i=!l(t)&&t.get(se.TRY_HARDER)===!0,o=l(t)?null:t.get(se.POSSIBLE_FORMATS),a=new Array;if(!l(o)){const u=o.some(h=>h===ge.UPC_A||h===ge.UPC_E||h===ge.EAN_13||h===ge.EAN_8||h===ge.CODABAR||h===ge.CODE_39||h===ge.CODE_93||h===ge.CODE_128||h===ge.ITF||h===ge.RSS_14||h===ge.RSS_EXPANDED);u&&!i&&a.push(new ki(t,this.verbose)),o.includes(ge.QR_CODE)&&a.push(new un),o.includes(ge.DATA_MATRIX)&&a.push(new vt),o.includes(ge.AZTEC)&&a.push(new bn),o.includes(ge.PDF_417)&&a.push(new wn),u&&i&&a.push(new ki(t,this.verbose))}a.length===0&&(i||a.push(new ki(t,this.verbose)),a.push(new un),a.push(new vt),a.push(new bn),a.push(new wn),i&&a.push(new ki(t,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new $n("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(t,this.hints)}catch(o){if(o instanceof $n)continue}throw new G("No MultiFormat Readers were able to detect the code.")}}class tl extends Ve{constructor(t=null,i=500){const o=new el;o.setHints(t),super(o,i)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class gr extends Ve{constructor(t=500){super(new wn,t)}}class nl extends Ve{constructor(t=500){super(new un,t)}}var Ys;(function(T){T[T.ERROR_CORRECTION=0]="ERROR_CORRECTION",T[T.CHARACTER_SET=1]="CHARACTER_SET",T[T.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",T[T.MIN_SIZE=3]="MIN_SIZE",T[T.MAX_SIZE=4]="MAX_SIZE",T[T.MARGIN=5]="MARGIN",T[T.PDF417_COMPACT=6]="PDF417_COMPACT",T[T.PDF417_COMPACTION=7]="PDF417_COMPACTION",T[T.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",T[T.AZTEC_LAYERS=9]="AZTEC_LAYERS",T[T.QR_VERSION=10]="QR_VERSION"})(Ys||(Ys={}));var qt=Ys;class zo{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new xt(t,Int32Array.from([1])))}buildGenerator(t){const i=this.cachedGenerators;if(t>=i.length){let o=i[i.length-1];const a=this.field;for(let u=i.length;u<=t;u++){const h=o.multiply(new xt(a,Int32Array.from([1,a.exp(u-1+a.getGeneratorBase())])));i.push(h),o=h}}return i[t]}encode(t,i){if(i===0)throw new I("No error correction bytes");const o=t.length-i;if(o<=0)throw new I("No data bytes provided");const a=this.buildGenerator(i),u=new Int32Array(o);U.arraycopy(t,0,u,0,o);let h=new xt(this.field,u);h=h.multiplyByMonomial(i,1);const m=h.divide(a)[1].getCoefficients(),y=i-m.length;for(let E=0;E<y;E++)t[o+E]=0;U.arraycopy(m,0,t,o+y,m.length)}}class Ut{constructor(){}static applyMaskPenaltyRule1(t){return Ut.applyMaskPenaltyRule1Internal(t,!0)+Ut.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let i=0;const o=t.getArray(),a=t.getWidth(),u=t.getHeight();for(let h=0;h<u-1;h++){const p=o[h];for(let m=0;m<a-1;m++){const y=p[m];y===p[m+1]&&y===o[h+1][m]&&y===o[h+1][m+1]&&i++}}return Ut.N2*i}static applyMaskPenaltyRule3(t){let i=0;const o=t.getArray(),a=t.getWidth(),u=t.getHeight();for(let h=0;h<u;h++)for(let p=0;p<a;p++){const m=o[h];p+6<a&&m[p]===1&&m[p+1]===0&&m[p+2]===1&&m[p+3]===1&&m[p+4]===1&&m[p+5]===0&&m[p+6]===1&&(Ut.isWhiteHorizontal(m,p-4,p)||Ut.isWhiteHorizontal(m,p+7,p+11))&&i++,h+6<u&&o[h][p]===1&&o[h+1][p]===0&&o[h+2][p]===1&&o[h+3][p]===1&&o[h+4][p]===1&&o[h+5][p]===0&&o[h+6][p]===1&&(Ut.isWhiteVertical(o,p,h-4,h)||Ut.isWhiteVertical(o,p,h+7,h+11))&&i++}return i*Ut.N3}static isWhiteHorizontal(t,i,o){i=Math.max(i,0),o=Math.min(o,t.length);for(let a=i;a<o;a++)if(t[a]===1)return!1;return!0}static isWhiteVertical(t,i,o,a){o=Math.max(o,0),a=Math.min(a,t.length);for(let u=o;u<a;u++)if(t[u][i]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let i=0;const o=t.getArray(),a=t.getWidth(),u=t.getHeight();for(let m=0;m<u;m++){const y=o[m];for(let E=0;E<a;E++)y[E]===1&&i++}const h=t.getHeight()*t.getWidth();return Math.floor(Math.abs(i*2-h)*10/h)*Ut.N4}static getDataMaskBit(t,i,o){let a,u;switch(t){case 0:a=o+i&1;break;case 1:a=o&1;break;case 2:a=i%3;break;case 3:a=(o+i)%3;break;case 4:a=Math.floor(o/2)+Math.floor(i/3)&1;break;case 5:u=o*i,a=(u&1)+u%3;break;case 6:u=o*i,a=(u&1)+u%3&1;break;case 7:u=o*i,a=u%3+(o+i&1)&1;break;default:throw new I("Invalid mask pattern: "+t)}return a===0}static applyMaskPenaltyRule1Internal(t,i){let o=0;const a=i?t.getHeight():t.getWidth(),u=i?t.getWidth():t.getHeight(),h=t.getArray();for(let p=0;p<a;p++){let m=0,y=-1;for(let E=0;E<u;E++){const N=i?h[p][E]:h[E][p];N===y?m++:(m>=5&&(o+=Ut.N1+(m-5)),m=1,y=N)}m>=5&&(o+=Ut.N1+(m-5))}return o}}Ut.N1=3,Ut.N2=3,Ut.N3=40,Ut.N4=10;class As{constructor(t,i){this.width=t,this.height=i;const o=new Array(i);for(let a=0;a!==i;a++)o[a]=new Uint8Array(t);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(t,i){return this.bytes[i][t]}getArray(){return this.bytes}setNumber(t,i,o){this.bytes[i][t]=o}setBoolean(t,i,o){this.bytes[i][t]=o?1:0}clear(t){for(const i of this.bytes)B.fill(i,t)}equals(t){if(!(t instanceof As))return!1;const i=t;if(this.width!==i.width||this.height!==i.height)return!1;for(let o=0,a=this.height;o<a;++o){const u=this.bytes[o],h=i.bytes[o];for(let p=0,m=this.width;p<m;++p)if(u[p]!==h[p])return!1}return!0}toString(){const t=new Z;for(let i=0,o=this.height;i<o;++i){const a=this.bytes[i];for(let u=0,h=this.width;u<h;++u)switch(a[u]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class Nr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new Z;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<Nr.NUM_MASK_PATTERNS}}Nr.NUM_MASK_PATTERNS=8;class bt extends v{}bt.kind="WriterException";class Ze{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,i,o,a,u){Ze.clearMatrix(u),Ze.embedBasicPatterns(o,u),Ze.embedTypeInfo(i,a,u),Ze.maybeEmbedVersionInfo(o,u),Ze.embedDataBits(t,a,u)}static embedBasicPatterns(t,i){Ze.embedPositionDetectionPatternsAndSeparators(i),Ze.embedDarkDotAtLeftBottomCorner(i),Ze.maybeEmbedPositionAdjustmentPatterns(t,i),Ze.embedTimingPatterns(i)}static embedTypeInfo(t,i,o){const a=new X;Ze.makeTypeInfoBits(t,i,a);for(let u=0,h=a.getSize();u<h;++u){const p=a.get(a.getSize()-1-u),m=Ze.TYPE_INFO_COORDINATES[u],y=m[0],E=m[1];if(o.setBoolean(y,E,p),u<8){const N=o.getWidth()-u-1;o.setBoolean(N,8,p)}else{const O=o.getHeight()-7+(u-8);o.setBoolean(8,O,p)}}}static maybeEmbedVersionInfo(t,i){if(t.getVersionNumber()<7)return;const o=new X;Ze.makeVersionInfoBits(t,o);let a=6*3-1;for(let u=0;u<6;++u)for(let h=0;h<3;++h){const p=o.get(a);a--,i.setBoolean(u,i.getHeight()-11+h,p),i.setBoolean(i.getHeight()-11+h,u,p)}}static embedDataBits(t,i,o){let a=0,u=-1,h=o.getWidth()-1,p=o.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);p>=0&&p<o.getHeight();){for(let m=0;m<2;++m){const y=h-m;if(!Ze.isEmpty(o.get(y,p)))continue;let E;a<t.getSize()?(E=t.get(a),++a):E=!1,i!==255&&Ut.getDataMaskBit(i,y,p)&&(E=!E),o.setBoolean(y,p,E)}p+=u}u=-u,p+=u,h-=2}if(a!==t.getSize())throw new bt("Not all bits consumed: "+a+"/"+t.getSize())}static findMSBSet(t){return 32-P.numberOfLeadingZeros(t)}static calculateBCHCode(t,i){if(i===0)throw new I("0 polynomial");const o=Ze.findMSBSet(i);for(t<<=o-1;Ze.findMSBSet(t)>=o;)t^=i<<Ze.findMSBSet(t)-o;return t}static makeTypeInfoBits(t,i,o){if(!Nr.isValidMaskPattern(i))throw new bt("Invalid mask pattern");const a=t.getBits()<<3|i;o.appendBits(a,5);const u=Ze.calculateBCHCode(a,Ze.TYPE_INFO_POLY);o.appendBits(u,10);const h=new X;if(h.appendBits(Ze.TYPE_INFO_MASK_PATTERN,15),o.xor(h),o.getSize()!==15)throw new bt("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(t,i){i.appendBits(t.getVersionNumber(),6);const o=Ze.calculateBCHCode(t.getVersionNumber(),Ze.VERSION_INFO_POLY);if(i.appendBits(o,12),i.getSize()!==18)throw new bt("should not happen but we got: "+i.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let i=8;i<t.getWidth()-8;++i){const o=(i+1)%2;Ze.isEmpty(t.get(i,6))&&t.setNumber(i,6,o),Ze.isEmpty(t.get(6,i))&&t.setNumber(6,i,o)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new bt;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,i,o){for(let a=0;a<8;++a){if(!Ze.isEmpty(o.get(t+a,i)))throw new bt;o.setNumber(t+a,i,0)}}static embedVerticalSeparationPattern(t,i,o){for(let a=0;a<7;++a){if(!Ze.isEmpty(o.get(t,i+a)))throw new bt;o.setNumber(t,i+a,0)}}static embedPositionAdjustmentPattern(t,i,o){for(let a=0;a<5;++a){const u=Ze.POSITION_ADJUSTMENT_PATTERN[a];for(let h=0;h<5;++h)o.setNumber(t+h,i+a,u[h])}}static embedPositionDetectionPattern(t,i,o){for(let a=0;a<7;++a){const u=Ze.POSITION_DETECTION_PATTERN[a];for(let h=0;h<7;++h)o.setNumber(t+h,i+a,u[h])}}static embedPositionDetectionPatternsAndSeparators(t){const i=Ze.POSITION_DETECTION_PATTERN[0].length;Ze.embedPositionDetectionPattern(0,0,t),Ze.embedPositionDetectionPattern(t.getWidth()-i,0,t),Ze.embedPositionDetectionPattern(0,t.getWidth()-i,t);const o=8;Ze.embedHorizontalSeparationPattern(0,o-1,t),Ze.embedHorizontalSeparationPattern(t.getWidth()-o,o-1,t),Ze.embedHorizontalSeparationPattern(0,t.getWidth()-o,t);const a=7;Ze.embedVerticalSeparationPattern(a,0,t),Ze.embedVerticalSeparationPattern(t.getHeight()-a-1,0,t),Ze.embedVerticalSeparationPattern(a,t.getHeight()-a,t)}static maybeEmbedPositionAdjustmentPatterns(t,i){if(t.getVersionNumber()<2)return;const o=t.getVersionNumber()-1,a=Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let u=0,h=a.length;u!==h;u++){const p=a[u];if(p>=0)for(let m=0;m!==h;m++){const y=a[m];y>=0&&Ze.isEmpty(i.get(y,p))&&Ze.embedPositionAdjustmentPattern(y-2,p-2,i)}}}}Ze.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ze.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ze.VERSION_INFO_POLY=7973,Ze.TYPE_INFO_POLY=1335,Ze.TYPE_INFO_MASK_PATTERN=21522;class Wu{constructor(t,i){this.dataBytes=t,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class kt{constructor(){}static calculateMaskPenalty(t){return Ut.applyMaskPenaltyRule1(t)+Ut.applyMaskPenaltyRule2(t)+Ut.applyMaskPenaltyRule3(t)+Ut.applyMaskPenaltyRule4(t)}static encode(t,i,o=null){let a=kt.DEFAULT_BYTE_MODE_ENCODING;const u=o!==null&&o.get(qt.CHARACTER_SET)!==void 0;u&&(a=o.get(qt.CHARACTER_SET).toString());const h=this.chooseMode(t,a),p=new X;if(h===Le.BYTE&&(u||kt.DEFAULT_BYTE_MODE_ENCODING!==a)){const xe=V.getCharacterSetECIByName(a);xe!==void 0&&this.appendECI(xe,p)}this.appendModeInfo(h,p);const m=new X;this.appendBytes(t,h,m,a);let y;if(o!==null&&o.get(qt.QR_VERSION)!==void 0){const xe=Number.parseInt(o.get(qt.QR_VERSION).toString(),10);y=_e.getVersionForNumber(xe);const Ee=this.calculateBitsNeeded(h,p,m,y);if(!this.willFit(Ee,y,i))throw new bt("Data too big for requested version")}else y=this.recommendVersion(i,h,p,m);const E=new X;E.appendBitArray(p);const N=h===Le.BYTE?m.getSizeInBytes():t.length;this.appendLengthInfo(N,y,h,E),E.appendBitArray(m);const O=y.getECBlocksForLevel(i),j=y.getTotalCodewords()-O.getTotalECCodewords();this.terminateBits(j,E);const K=this.interleaveWithECBytes(E,y.getTotalCodewords(),j,O.getNumBlocks()),q=new Nr;q.setECLevel(i),q.setMode(h),q.setVersion(y);const ie=y.getDimensionForVersion(),le=new As(ie,ie),Ae=this.chooseMaskPattern(K,i,y,le);return q.setMaskPattern(Ae),Ze.buildMatrix(K,i,y,Ae,le),q.setMatrix(le),q}static recommendVersion(t,i,o,a){const u=this.calculateBitsNeeded(i,o,a,_e.getVersionForNumber(1)),h=this.chooseVersion(u,t),p=this.calculateBitsNeeded(i,o,a,h);return this.chooseVersion(p,t)}static calculateBitsNeeded(t,i,o,a){return i.getSize()+t.getCharacterCountBits(a)+o.getSize()}static getAlphanumericCode(t){return t<kt.ALPHANUMERIC_TABLE.length?kt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,i=null){if(V.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(t))return Le.KANJI;let o=!1,a=!1;for(let u=0,h=t.length;u<h;++u){const p=t.charAt(u);if(kt.isDigit(p))o=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)a=!0;else return Le.BYTE}return a?Le.ALPHANUMERIC:o?Le.NUMERIC:Le.BYTE}static isOnlyDoubleByteKanji(t){let i;try{i=ee.encode(t,V.SJIS)}catch{return!1}const o=i.length;if(o%2!==0)return!1;for(let a=0;a<o;a+=2){const u=i[a]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(t,i,o,a){let u=Number.MAX_SAFE_INTEGER,h=-1;for(let p=0;p<Nr.NUM_MASK_PATTERNS;p++){Ze.buildMatrix(t,i,o,p,a);let m=this.calculateMaskPenalty(a);m<u&&(u=m,h=p)}return h}static chooseVersion(t,i){for(let o=1;o<=40;o++){const a=_e.getVersionForNumber(o);if(kt.willFit(t,a,i))return a}throw new bt("Data too big")}static willFit(t,i,o){const a=i.getTotalCodewords(),h=i.getECBlocksForLevel(o).getTotalECCodewords(),p=a-h,m=(t+7)/8;return p>=m}static terminateBits(t,i){const o=t*8;if(i.getSize()>o)throw new bt("data bits cannot fit in the QR Code"+i.getSize()+" > "+o);for(let h=0;h<4&&i.getSize()<o;++h)i.appendBit(!1);const a=i.getSize()&7;if(a>0)for(let h=a;h<8;h++)i.appendBit(!1);const u=t-i.getSizeInBytes();for(let h=0;h<u;++h)i.appendBits(h&1?17:236,8);if(i.getSize()!==o)throw new bt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,i,o,a,u,h){if(a>=o)throw new bt("Block ID too large");const p=t%o,m=o-p,y=Math.floor(t/o),E=y+1,N=Math.floor(i/o),O=N+1,j=y-N,K=E-O;if(j!==K)throw new bt("EC bytes mismatch");if(o!==m+p)throw new bt("RS blocks mismatch");if(t!==(N+j)*m+(O+K)*p)throw new bt("Total bytes mismatch");a<m?(u[0]=N,h[0]=j):(u[0]=O,h[0]=K)}static interleaveWithECBytes(t,i,o,a){if(t.getSizeInBytes()!==o)throw new bt("Number of bits and data bytes does not match");let u=0,h=0,p=0;const m=new Array;for(let E=0;E<a;++E){const N=new Int32Array(1),O=new Int32Array(1);kt.getNumDataBytesAndNumECBytesForBlockID(i,o,a,E,N,O);const j=N[0],K=new Uint8Array(j);t.toBytes(8*u,K,0,j);const q=kt.generateECBytes(K,O[0]);m.push(new Wu(K,q)),h=Math.max(h,j),p=Math.max(p,q.length),u+=N[0]}if(o!==u)throw new bt("Data bytes does not match offset");const y=new X;for(let E=0;E<h;++E)for(const N of m){const O=N.getDataBytes();E<O.length&&y.appendBits(O[E],8)}for(let E=0;E<p;++E)for(const N of m){const O=N.getErrorCorrectionBytes();E<O.length&&y.appendBits(O[E],8)}if(i!==y.getSizeInBytes())throw new bt("Interleaving error: "+i+" and "+y.getSizeInBytes()+" differ.");return y}static generateECBytes(t,i){const o=t.length,a=new Int32Array(o+i);for(let h=0;h<o;h++)a[h]=t[h]&255;new zo(Ke.QR_CODE_FIELD_256).encode(a,i);const u=new Uint8Array(i);for(let h=0;h<i;h++)u[h]=a[o+h];return u}static appendModeInfo(t,i){i.appendBits(t.getBits(),4)}static appendLengthInfo(t,i,o,a){const u=o.getCharacterCountBits(i);if(t>=1<<u)throw new bt(t+" is bigger than "+((1<<u)-1));a.appendBits(t,u)}static appendBytes(t,i,o,a){switch(i){case Le.NUMERIC:kt.appendNumericBytes(t,o);break;case Le.ALPHANUMERIC:kt.appendAlphanumericBytes(t,o);break;case Le.BYTE:kt.append8BitBytes(t,o,a);break;case Le.KANJI:kt.appendKanjiBytes(t,o);break;default:throw new bt("Invalid mode: "+i)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const i=kt.getDigit(t);return i>=0&&i<=9}static appendNumericBytes(t,i){const o=t.length;let a=0;for(;a<o;){const u=kt.getDigit(t.charAt(a));if(a+2<o){const h=kt.getDigit(t.charAt(a+1)),p=kt.getDigit(t.charAt(a+2));i.appendBits(u*100+h*10+p,10),a+=3}else if(a+1<o){const h=kt.getDigit(t.charAt(a+1));i.appendBits(u*10+h,7),a+=2}else i.appendBits(u,4),a++}}static appendAlphanumericBytes(t,i){const o=t.length;let a=0;for(;a<o;){const u=kt.getAlphanumericCode(t.charCodeAt(a));if(u===-1)throw new bt;if(a+1<o){const h=kt.getAlphanumericCode(t.charCodeAt(a+1));if(h===-1)throw new bt;i.appendBits(u*45+h,11),a+=2}else i.appendBits(u,6),a++}}static append8BitBytes(t,i,o){let a;try{a=ee.encode(t,o)}catch(u){throw new bt(u)}for(let u=0,h=a.length;u!==h;u++){const p=a[u];i.appendBits(p,8)}}static appendKanjiBytes(t,i){let o;try{o=ee.encode(t,V.SJIS)}catch(u){throw new bt(u)}const a=o.length;for(let u=0;u<a;u+=2){const h=o[u]&255,p=o[u+1]&255,m=h<<8&4294967295|p;let y=-1;if(m>=33088&&m<=40956?y=m-33088:m>=57408&&m<=60351&&(y=m-49472),y===-1)throw new bt("Invalid byte sequence");const E=(y>>8)*192+(y&255);i.appendBits(E,13)}}static appendECI(t,i){i.appendBits(Le.ECI.getBits(),4),i.appendBits(t.getValue(),8)}}kt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),kt.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class mr{write(t,i,o,a=null){if(t.length===0)throw new I("Found empty contents");if(i<0||o<0)throw new I("Requested dimensions are too small: "+i+"x"+o);let u=it.L,h=mr.QUIET_ZONE_SIZE;a!==null&&(a.get(qt.ERROR_CORRECTION)!==void 0&&(u=it.fromString(a.get(qt.ERROR_CORRECTION).toString())),a.get(qt.MARGIN)!==void 0&&(h=Number.parseInt(a.get(qt.MARGIN).toString(),10)));const p=kt.encode(t,u,a);return this.renderResult(p,i,o,h)}writeToDom(t,i,o,a,u=null){typeof t=="string"&&(t=document.querySelector(t));const h=this.write(i,o,a,u);t&&t.appendChild(h)}renderResult(t,i,o,a){const u=t.getMatrix();if(u===null)throw new Yt;const h=u.getWidth(),p=u.getHeight(),m=h+a*2,y=p+a*2,E=Math.max(i,m),N=Math.max(o,y),O=Math.min(Math.floor(E/m),Math.floor(N/y)),j=Math.floor((E-h*O)/2),K=Math.floor((N-p*O)/2),q=this.createSVGElement(E,N);for(let ie=0,le=K;ie<p;ie++,le+=O)for(let Ae=0,xe=j;Ae<h;Ae++,xe+=O)if(u.get(Ae,ie)===1){const Ee=this.createSvgRectElement(xe,le,O,O);q.appendChild(Ee)}return q}createSVGElement(t,i){const o=document.createElementNS(mr.SVG_NS,"svg");return o.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width",i.toString()),o}createSvgRectElement(t,i,o,a){const u=document.createElementNS(mr.SVG_NS,"rect");return u.setAttributeNS(null,"x",t.toString()),u.setAttributeNS(null,"y",i.toString()),u.setAttributeNS(null,"height",o.toString()),u.setAttributeNS(null,"width",a.toString()),u.setAttributeNS(null,"fill","#000000"),u}}mr.QUIET_ZONE_SIZE=4,mr.SVG_NS="http://www.w3.org/2000/svg";class $i{encode(t,i,o,a,u){if(t.length===0)throw new I("Found empty contents");if(i!==ge.QR_CODE)throw new I("Can only encode QR_CODE, but got "+i);if(o<0||a<0)throw new I(`Requested dimensions are too small: ${o}x${a}`);let h=it.L,p=$i.QUIET_ZONE_SIZE;u!==null&&(u.get(qt.ERROR_CORRECTION)!==void 0&&(h=it.fromString(u.get(qt.ERROR_CORRECTION).toString())),u.get(qt.MARGIN)!==void 0&&(p=Number.parseInt(u.get(qt.MARGIN).toString(),10)));const m=kt.encode(t,h,u);return $i.renderResult(m,o,a,p)}static renderResult(t,i,o,a){const u=t.getMatrix();if(u===null)throw new Yt;const h=u.getWidth(),p=u.getHeight(),m=h+a*2,y=p+a*2,E=Math.max(i,m),N=Math.max(o,y),O=Math.min(Math.floor(E/m),Math.floor(N/y)),j=Math.floor((E-h*O)/2),K=Math.floor((N-p*O)/2),q=new te(E,N);for(let ie=0,le=K;ie<p;ie++,le+=O)for(let Ae=0,xe=j;Ae<h;Ae++,xe+=O)u.get(Ae,ie)===1&&q.setRegion(xe,le,O,O);return q}}$i.QUIET_ZONE_SIZE=4;class Rr{encode(t,i,o,a,u){let h;switch(i){case ge.QR_CODE:h=new $i;break;default:throw new I("No encoder available for format "+i)}return h.encode(t,i,o,a,u)}}class Mi extends ne{constructor(t,i,o,a,u,h,p,m){if(super(h,p),this.yuvData=t,this.dataWidth=i,this.dataHeight=o,this.left=a,this.top=u,a+h>i||u+p>o)throw new I("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(h,p)}getRow(t,i){if(t<0||t>=this.getHeight())throw new I("Requested row is outside the image: "+t);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const a=(t+this.top)*this.dataWidth+this.left;return U.arraycopy(this.yuvData,a,i,0,o),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.yuvData;const o=t*i,a=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return U.arraycopy(this.yuvData,u,a,0,o),a;for(let h=0;h<i;h++){const p=h*t;U.arraycopy(this.yuvData,u,a,p,t),u+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,i,o,a){return new Mi(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+i,o,a,!1)}renderThumbnail(){const t=this.getWidth()/Mi.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Mi.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(t*i),a=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let h=0;h<i;h++){const p=h*t;for(let m=0;m<t;m++){const y=a[u+m*Mi.THUMBNAIL_SCALE_FACTOR]&255;o[p+m]=4278190080|y*65793}u+=this.dataWidth*Mi.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/Mi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Mi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,i){const o=this.yuvData;for(let a=0,u=this.top*this.dataWidth+this.left;a<i;a++,u+=this.dataWidth){const h=u+t/2;for(let p=u,m=u+t-1;p<h;p++,m--){const y=o[p];o[p]=o[m],o[m]=y}}}invert(){return new pe(this)}}Mi.THUMBNAIL_SCALE_FACTOR=2;class Or extends ne{constructor(t,i,o,a,u,h,p){if(super(i,o),this.dataWidth=a,this.dataHeight=u,this.left=h,this.top=p,t.BYTES_PER_ELEMENT===4){const m=i*o,y=new Uint8ClampedArray(m);for(let E=0;E<m;E++){const N=t[E],O=N>>16&255,j=N>>7&510,K=N&255;y[E]=(O+j+K)/4&255}this.luminances=y}else this.luminances=t;if(a===void 0&&(this.dataWidth=i),u===void 0&&(this.dataHeight=o),h===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+o>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(t,i){if(t<0||t>=this.getHeight())throw new I("Requested row is outside the image: "+t);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const a=(t+this.top)*this.dataWidth+this.left;return U.arraycopy(this.luminances,a,i,0,o),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.luminances;const o=t*i,a=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return U.arraycopy(this.luminances,u,a,0,o),a;for(let h=0;h<i;h++){const p=h*t;U.arraycopy(this.luminances,u,a,p,t),u+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,i,o,a){return new Or(this.luminances,o,a,this.dataWidth,this.dataHeight,this.left+t,this.top+i)}invert(){return new pe(this)}}class Jn extends V{static forName(t){return this.getCharacterSetECIByName(t)}}class Ks{}Ks.ISO_8859_1=V.ISO8859_1;class Uo{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class il{static singletonList(t){return[t]}static min(t,i){return t.sort(i)[0]}}class Ho{constructor(t){this.previous=t}getPrevious(){return this.previous}}class _r extends Ho{constructor(t,i,o){super(t),this.value=i,this.bitCount=o}appendTo(t,i){t.appendBits(this.value,this.bitCount)}add(t,i){return new _r(this,t,i)}addBinaryShift(t,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new _r(this,t,i)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+P.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class Vo extends _r{constructor(t,i,o){super(t,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=o}appendTo(t,i){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):o===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(i[this.binaryShiftStart+o],8)}addBinaryShift(t,i){return new Vo(this,t,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Zu(T,t,i){return new Vo(T,t,i)}function Xr(T,t,i){return new _r(T,t,i)}const Gu=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],gn=0,Ji=1,ai=2,Pi=3,Li=4,Yr=new _r(null,0,0),Wo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function xs(T){for(let t of T)B.fill(t,-1);return T[gn][Li]=0,T[Ji][Li]=0,T[Ji][gn]=28,T[Pi][Li]=0,T[ai][Li]=0,T[ai][gn]=15,T}const Zo=xs(B.createInt32Array(6,6));class ei{constructor(t,i,o,a){this.token=t,this.mode=i,this.binaryShiftByteCount=o,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,i){let o=this.bitCount,a=this.token;if(t!==this.mode){let h=Wo[this.mode][t];a=Xr(a,h&65535,h>>16),o+=h>>16}let u=t===ai?4:5;return a=Xr(a,i,u),new ei(a,t,0,o+u)}shiftAndAppend(t,i){let o=this.token,a=this.mode===ai?4:5;return o=Xr(o,Zo[this.mode][t],a),o=Xr(o,i,5),new ei(o,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(t){let i=this.token,o=this.mode,a=this.bitCount;if(this.mode===Li||this.mode===ai){let p=Wo[o][gn];i=Xr(i,p&65535,p>>16),a+=p>>16,o=gn}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new ei(i,o,this.binaryShiftByteCount+1,a+u);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(t+1)),h}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=Zu(i,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new ei(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let i=this.bitCount+(Wo[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?i+=ei.calculateBinaryShiftCost(t)-ei.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(i+=10),i<=t.bitCount}toBitArray(t){let i=[];for(let a=this.endBinaryShift(t.length).token;a!==null;a=a.getPrevious())i.unshift(a);let o=new X;for(const a of i)a.appendTo(o,t);return o}toString(){return oe.format("%s bits=%d bytes=%d",Gu[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}ei.INITIAL_STATE=new ei(Yr,gn,0,0);function Xu(T){const t=oe.getCharCode(" "),i=oe.getCharCode("."),o=oe.getCharCode(",");T[gn][t]=1;const a=oe.getCharCode("Z"),u=oe.getCharCode("A");for(let O=u;O<=a;O++)T[gn][O]=O-u+2;T[Ji][t]=1;const h=oe.getCharCode("z"),p=oe.getCharCode("a");for(let O=p;O<=h;O++)T[Ji][O]=O-p+2;T[ai][t]=1;const m=oe.getCharCode("9"),y=oe.getCharCode("0");for(let O=y;O<=m;O++)T[ai][O]=O-y+2;T[ai][o]=12,T[ai][i]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let O=0;O<E.length;O++)T[Pi][oe.getCharCode(E[O])]=O;const N=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let O=0;O<N.length;O++)oe.getCharCode(N[O])>0&&(T[Li][oe.getCharCode(N[O])]=O);return T}const Di=Xu(B.createInt32Array(5,256));class yr{constructor(t){this.text=t}encode(){const t=oe.getCharCode(" "),i=oe.getCharCode(`
`);let o=il.singletonList(ei.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let h,p=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case oe.getCharCode("\r"):h=p===i?2:0;break;case oe.getCharCode("."):h=p===t?3:0;break;case oe.getCharCode(","):h=p===t?4:0;break;case oe.getCharCode(":"):h=p===t?5:0;break;default:h=0}h>0?(o=yr.updateStateListForPair(o,u,h),u++):o=this.updateStateListForChar(o,u)}return il.min(o,(u,h)=>u.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,i){const o=[];for(let a of t)this.updateStateForChar(a,i,o);return yr.simplifyStates(o)}updateStateForChar(t,i,o){let a=this.text[i]&255,u=Di[t.getMode()][a]>0,h=null;for(let p=0;p<=Li;p++){let m=Di[p][a];if(m>0){if(h==null&&(h=t.endBinaryShift(i)),!u||p===t.getMode()||p===ai){const y=h.latchAndAppend(p,m);o.push(y)}if(!u&&Zo[t.getMode()][p]>=0){const y=h.shiftAndAppend(p,m);o.push(y)}}}if(t.getBinaryShiftByteCount()>0||Di[t.getMode()][a]===0){let p=t.addBinaryShiftChar(i);o.push(p)}}static updateStateListForPair(t,i,o){const a=[];for(let u of t)this.updateStateForPair(u,i,o,a);return this.simplifyStates(a)}static updateStateForPair(t,i,o,a){let u=t.endBinaryShift(i);if(a.push(u.latchAndAppend(Li,o)),t.getMode()!==Li&&a.push(u.shiftAndAppend(Li,o)),o===3||o===4){let h=u.latchAndAppend(ai,16-o).latchAndAppend(ai,1);a.push(h)}if(t.getBinaryShiftByteCount()>0){let h=t.addBinaryShiftChar(i).addBinaryShiftChar(i+1);a.push(h)}}static simplifyStates(t){let i=[];for(const o of t){let a=!0;for(const u of i){if(u.isBetterThanOrEqualTo(o)){a=!1;break}o.isBetterThanOrEqualTo(u)&&(i=i.filter(h=>h!==u))}a&&i.push(o)}return i}}class gt{constructor(){}static encodeBytes(t){return gt.encode(t,gt.DEFAULT_EC_PERCENT,gt.DEFAULT_AZTEC_LAYERS)}static encode(t,i,o){let a=new yr(t).encode(),u=P.truncDivision(a.getSize()*i,100)+11,h=a.getSize()+u,p,m,y,E,N;if(o!==gt.DEFAULT_AZTEC_LAYERS){if(p=o<0,m=Math.abs(o),m>(p?gt.MAX_NB_BITS_COMPACT:gt.MAX_NB_BITS))throw new I(oe.format("Illegal value %s for layers",o));y=gt.totalBitsInLayer(m,p),E=gt.WORD_SIZE[m];let Ee=y-y%E;if(N=gt.stuffBits(a,E),N.getSize()+u>Ee)throw new I("Data to large for user specified layer");if(p&&N.getSize()>E*64)throw new I("Data to large for user specified layer")}else{E=0,N=null;for(let Ee=0;;Ee++){if(Ee>gt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(p=Ee<=3,m=p?Ee+1:Ee,y=gt.totalBitsInLayer(m,p),h>y)continue;(N==null||E!==gt.WORD_SIZE[m])&&(E=gt.WORD_SIZE[m],N=gt.stuffBits(a,E));let rt=y-y%E;if(!(p&&N.getSize()>E*64)&&N.getSize()+u<=rt)break}}let O=gt.generateCheckWords(N,y,E),j=N.getSize()/E,K=gt.generateModeMessage(p,m,j),q=(p?11:14)+m*4,ie=new Int32Array(q),le;if(p){le=q;for(let Ee=0;Ee<ie.length;Ee++)ie[Ee]=Ee}else{le=q+1+2*P.truncDivision(P.truncDivision(q,2)-1,15);let Ee=P.truncDivision(q,2),rt=P.truncDivision(le,2);for(let et=0;et<Ee;et++){let Ht=et+P.truncDivision(et,15);ie[Ee-et-1]=rt-Ht-1,ie[Ee+et]=rt+Ht+1}}let Ae=new te(le);for(let Ee=0,rt=0;Ee<m;Ee++){let et=(m-Ee)*4+(p?9:12);for(let Ht=0;Ht<et;Ht++){let jn=Ht*2;for(let zn=0;zn<2;zn++)O.get(rt+jn+zn)&&Ae.set(ie[Ee*2+zn],ie[Ee*2+Ht]),O.get(rt+et*2+jn+zn)&&Ae.set(ie[Ee*2+Ht],ie[q-1-Ee*2-zn]),O.get(rt+et*4+jn+zn)&&Ae.set(ie[q-1-Ee*2-zn],ie[q-1-Ee*2-Ht]),O.get(rt+et*6+jn+zn)&&Ae.set(ie[q-1-Ee*2-Ht],ie[Ee*2+zn])}rt+=et*8}if(gt.drawModeMessage(Ae,p,le,K),p)gt.drawBullsEye(Ae,P.truncDivision(le,2),5);else{gt.drawBullsEye(Ae,P.truncDivision(le,2),7);for(let Ee=0,rt=0;Ee<P.truncDivision(q,2)-1;Ee+=15,rt+=16)for(let et=P.truncDivision(le,2)&1;et<le;et+=2)Ae.set(P.truncDivision(le,2)-rt,et),Ae.set(P.truncDivision(le,2)+rt,et),Ae.set(et,P.truncDivision(le,2)-rt),Ae.set(et,P.truncDivision(le,2)+rt)}let xe=new Uo;return xe.setCompact(p),xe.setSize(le),xe.setLayers(m),xe.setCodeWords(j),xe.setMatrix(Ae),xe}static drawBullsEye(t,i,o){for(let a=0;a<o;a+=2)for(let u=i-a;u<=i+a;u++)t.set(u,i-a),t.set(u,i+a),t.set(i-a,u),t.set(i+a,u);t.set(i-o,i-o),t.set(i-o+1,i-o),t.set(i-o,i-o+1),t.set(i+o,i-o),t.set(i+o,i-o+1),t.set(i+o,i+o-1)}static generateModeMessage(t,i,o){let a=new X;return t?(a.appendBits(i-1,2),a.appendBits(o-1,6),a=gt.generateCheckWords(a,28,4)):(a.appendBits(i-1,5),a.appendBits(o-1,11),a=gt.generateCheckWords(a,40,4)),a}static drawModeMessage(t,i,o,a){let u=P.truncDivision(o,2);if(i)for(let h=0;h<7;h++){let p=u-3+h;a.get(h)&&t.set(p,u-5),a.get(h+7)&&t.set(u+5,p),a.get(20-h)&&t.set(p,u+5),a.get(27-h)&&t.set(u-5,p)}else for(let h=0;h<10;h++){let p=u-5+h+P.truncDivision(h,5);a.get(h)&&t.set(p,u-7),a.get(h+10)&&t.set(u+7,p),a.get(29-h)&&t.set(p,u+7),a.get(39-h)&&t.set(u-7,p)}}static generateCheckWords(t,i,o){let a=t.getSize()/o,u=new zo(gt.getGF(o)),h=P.truncDivision(i,o),p=gt.bitsToWords(t,o,h);u.encode(p,h-a);let m=i%o,y=new X;y.appendBits(0,m);for(const E of Array.from(p))y.appendBits(E,o);return y}static bitsToWords(t,i,o){let a=new Int32Array(o),u,h;for(u=0,h=t.getSize()/i;u<h;u++){let p=0;for(let m=0;m<i;m++)p|=t.get(u*i+m)?1<<i-m-1:0;a[u]=p}return a}static getGF(t){switch(t){case 4:return Ke.AZTEC_PARAM;case 6:return Ke.AZTEC_DATA_6;case 8:return Ke.AZTEC_DATA_8;case 10:return Ke.AZTEC_DATA_10;case 12:return Ke.AZTEC_DATA_12;default:throw new I("Unsupported word size "+t)}}static stuffBits(t,i){let o=new X,a=t.getSize(),u=(1<<i)-2;for(let h=0;h<a;h+=i){let p=0;for(let m=0;m<i;m++)(h+m>=a||t.get(h+m))&&(p|=1<<i-1-m);(p&u)===u?(o.appendBits(p&u,i),h--):p&u?o.appendBits(p,i):(o.appendBits(p|1,i),h--)}return o}static totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}gt.DEFAULT_EC_PERCENT=33,gt.DEFAULT_AZTEC_LAYERS=0,gt.MAX_NB_BITS=32,gt.MAX_NB_BITS_COMPACT=4,gt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Kr{encode(t,i,o,a){return this.encodeWithHints(t,i,o,a,null)}encodeWithHints(t,i,o,a,u){let h=Ks.ISO_8859_1,p=gt.DEFAULT_EC_PERCENT,m=gt.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(qt.CHARACTER_SET)&&(h=Jn.forName(u.get(qt.CHARACTER_SET).toString())),u.has(qt.ERROR_CORRECTION)&&(p=P.parseInt(u.get(qt.ERROR_CORRECTION).toString())),u.has(qt.AZTEC_LAYERS)&&(m=P.parseInt(u.get(qt.AZTEC_LAYERS).toString()))),Kr.encodeLayers(t,i,o,a,h,p,m)}static encodeLayers(t,i,o,a,u,h,p){if(i!==ge.AZTEC)throw new I("Can only encode AZTEC, but got "+i);let m=gt.encode(oe.getBytes(t,u),h,p);return Kr.renderResult(m,o,a)}static renderResult(t,i,o){let a=t.getMatrix();if(a==null)throw new Yt;let u=a.getWidth(),h=a.getHeight(),p=Math.max(i,u),m=Math.max(o,h),y=Math.min(p/u,m/h),E=(p-u*y)/2,N=(m-h*y)/2,O=new te(p,m);for(let j=0,K=N;j<h;j++,K+=y)for(let q=0,ie=E;q<u;q++,ie+=y)a.get(q,j)&&O.setRegion(ie,K,y,y);return O}}r.AbstractExpandedDecoder=hr,r.ArgumentException=S,r.ArithmeticException=yt,r.AztecCode=Uo,r.AztecCodeReader=bn,r.AztecCodeWriter=Kr,r.AztecDecoder=We,r.AztecDetector=Xn,r.AztecDetectorResult=xr,r.AztecEncoder=gt,r.AztecHighLevelEncoder=yr,r.AztecPoint=Lt,r.BarcodeFormat=ge,r.Binarizer=z,r.BinaryBitmap=M,r.BitArray=X,r.BitMatrix=te,r.BitSource=fr,r.BrowserAztecCodeReader=Bn,r.BrowserBarcodeReader=dr,r.BrowserCodeReader=Ve,r.BrowserDatamatrixCodeReader=Cs,r.BrowserMultiFormatReader=tl,r.BrowserPDF417Reader=gr,r.BrowserQRCodeReader=nl,r.BrowserQRCodeSvgWriter=mr,r.CharacterSetECI=V,r.ChecksumException=F,r.Code128Reader=Ie,r.Code39Reader=Ne,r.DataMatrixDecodedBitStreamParser=Mn,r.DataMatrixReader=vt,r.DecodeHintType=se,r.DecoderResult=Mt,r.DefaultGridSampler=lr,r.DetectorResult=Pt,r.EAN13Reader=Ni,r.EncodeHintType=qt,r.Exception=v,r.FormatException=$,r.GenericGF=Ke,r.GenericGFPoly=xt,r.GlobalHistogramBinarizer=me,r.GridSampler=Sr,r.GridSamplerInstance=Gn,r.HTMLCanvasElementLuminanceSource=he,r.HybridBinarizer=fe,r.ITFReader=Oe,r.IllegalArgumentException=I,r.IllegalStateException=Yt,r.InvertedLuminanceSource=pe,r.LuminanceSource=ne,r.MathUtils=Ye,r.MultiFormatOneDReader=ki,r.MultiFormatReader=el,r.MultiFormatWriter=Rr,r.NotFoundException=G,r.OneDReader=Ct,r.PDF417DecodedBitStreamParser=ce,r.PDF417DecoderErrorCorrection=Zs,r.PDF417Reader=wn,r.PDF417ResultMetadata=jo,r.PerspectiveTransform=Et,r.PlanarYUVLuminanceSource=Mi,r.QRCodeByteMatrix=As,r.QRCodeDataMask=zt,r.QRCodeDecodedBitStreamParser=dt,r.QRCodeDecoderErrorCorrectionLevel=it,r.QRCodeDecoderFormatInformation=an,r.QRCodeEncoder=kt,r.QRCodeEncoderQRCode=Nr,r.QRCodeMaskUtil=Ut,r.QRCodeMatrixUtil=Ze,r.QRCodeMode=Le,r.QRCodeReader=un,r.QRCodeVersion=_e,r.QRCodeWriter=$i,r.RGBLuminanceSource=Or,r.RSS14Reader=Bt,r.RSSExpandedReader=ye,r.ReaderException=$n,r.ReedSolomonDecoder=On,r.ReedSolomonEncoder=zo,r.ReedSolomonException=Sn,r.Result=ve,r.ResultMetadataType=Be,r.ResultPoint=Te,r.StringUtils=oe,r.UnsupportedOperationException=W,r.VideoInputDevice=Ce,r.WhiteRectangleDetector=dn,r.WriterException=bt,r.ZXingArrays=B,r.ZXingCharset=Jn,r.ZXingInteger=P,r.ZXingStandardCharsets=Ks,r.ZXingStringBuilder=Z,r.ZXingStringEncoding=ee,r.ZXingSystem=U,r.createAbstractExpandedDecoder=Ir,Object.defineProperty(r,"__esModule",{value:!0})})})(Rh,Rh.exports);var Wt=Rh.exports;const Cv=Cu(Wt),Ev=em({__proto__:null,default:Cv},[Wt]);var A1=function(){function e(n,r,l){if(this.formatMap=new Map([[je.QR_CODE,Wt.BarcodeFormat.QR_CODE],[je.AZTEC,Wt.BarcodeFormat.AZTEC],[je.CODABAR,Wt.BarcodeFormat.CODABAR],[je.CODE_39,Wt.BarcodeFormat.CODE_39],[je.CODE_93,Wt.BarcodeFormat.CODE_93],[je.CODE_128,Wt.BarcodeFormat.CODE_128],[je.DATA_MATRIX,Wt.BarcodeFormat.DATA_MATRIX],[je.MAXICODE,Wt.BarcodeFormat.MAXICODE],[je.ITF,Wt.BarcodeFormat.ITF],[je.EAN_13,Wt.BarcodeFormat.EAN_13],[je.EAN_8,Wt.BarcodeFormat.EAN_8],[je.PDF_417,Wt.BarcodeFormat.PDF_417],[je.RSS_14,Wt.BarcodeFormat.RSS_14],[je.RSS_EXPANDED,Wt.BarcodeFormat.RSS_EXPANDED],[je.UPC_A,Wt.BarcodeFormat.UPC_A],[je.UPC_E,Wt.BarcodeFormat.UPC_E],[je.UPC_EAN_EXTENSION,Wt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Ev)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=l;var d=this.createZXingFormats(n),f=new Map;f.set(Wt.DecodeHintType.POSSIBLE_FORMATS,d),f.set(Wt.DecodeHintType.TRY_HARDER,!1),this.hints=f}return e.prototype.decodeAsync=function(n){var r=this;return new Promise(function(l,d){try{l(r.decode(n))}catch(f){d(f)}})},e.prototype.decode=function(n){var r=new Wt.MultiFormatReader(this.verbose,this.hints),l=new Wt.HTMLCanvasElementLuminanceSource(n),d=new Wt.BinaryBitmap(new Wt.HybridBinarizer(l)),f=r.decode(d);return{text:f.text,format:Pg.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(r,l,d){n.set(r,l)}),n},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createZXingFormats=function(n){for(var r=[],l=0,d=n;l<d.length;l++){var f=d[l];this.formatMap.has(f)?r.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),Av=function(e,n,r,l){function d(f){return f instanceof r?f:new r(function(_){_(f)})}return new(r||(r=Promise))(function(f,_){function x(S){try{v(l.next(S))}catch(I){_(I)}}function C(S){try{v(l.throw(S))}catch(I){_(I)}}function v(S){S.done?f(S.value):d(S.value).then(x,C)}v((l=l.apply(e,n||[])).next())})},xv=function(e,n){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,d,f,_;return _={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function x(v){return function(S){return C([v,S])}}function C(v){if(l)throw new TypeError("Generator is already executing.");for(;_&&(_=0,v[0]&&(r=0)),r;)try{if(l=1,d&&(f=v[0]&2?d.return:v[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,v[1])).done)return f;switch(d=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return r.label++,{value:v[1],done:!1};case 5:r.label++,d=v[1],v=[0];continue;case 7:v=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){r=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){r.label=v[1];break}if(v[0]===6&&r.label<f[1]){r.label=f[1],f=v;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(v);break}f[2]&&r.ops.pop(),r.trys.pop();continue}v=n.call(e,r)}catch(S){v=[6,S],d=0}finally{l=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},x1=function(){function e(n,r,l){if(this.formatMap=new Map([[je.QR_CODE,"qr_code"],[je.AZTEC,"aztec"],[je.CODABAR,"codabar"],[je.CODE_39,"code_39"],[je.CODE_93,"code_93"],[je.CODE_128,"code_128"],[je.DATA_MATRIX,"data_matrix"],[je.ITF,"itf"],[je.EAN_13,"ean_13"],[je.EAN_8,"ean_8"],[je.PDF_417,"pdf417"],[je.UPC_A,"upc_a"],[je.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=l;var d=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(d),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},e.prototype.decodeAsync=function(n){return Av(this,void 0,void 0,function(){var r,l;return xv(this,function(d){switch(d.label){case 0:return[4,this.detector.detect(n)];case 1:if(r=d.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return l=this.selectLargestBarcode(r),[2,{text:l.rawValue,format:Pg.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(n){for(var r=null,l=0,d=0,f=n;d<f.length;d++){var _=f[d],x=_.boundingBox.width*_.boundingBox.height;x>l&&(l=x,r=_)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(n){for(var r=[],l=0,d=n;l<d.length;l++){var f=d[l];this.formatMap.has(f)?r.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(r,l,d){n.set(r,l)}),n},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),S1=function(e,n,r,l){function d(f){return f instanceof r?f:new r(function(_){_(f)})}return new(r||(r=Promise))(function(f,_){function x(S){try{v(l.next(S))}catch(I){_(I)}}function C(S){try{v(l.throw(S))}catch(I){_(I)}}function v(S){S.done?f(S.value):d(S.value).then(x,C)}v((l=l.apply(e,n||[])).next())})},b1=function(e,n){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,d,f,_;return _={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function x(v){return function(S){return C([v,S])}}function C(v){if(l)throw new TypeError("Generator is already executing.");for(;_&&(_=0,v[0]&&(r=0)),r;)try{if(l=1,d&&(f=v[0]&2?d.return:v[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,v[1])).done)return f;switch(d=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return r.label++,{value:v[1],done:!1};case 5:r.label++,d=v[1],v=[0];continue;case 7:v=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){r=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){r.label=v[1];break}if(v[0]===6&&r.label<f[1]){r.label=f[1],f=v;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(v);break}f[2]&&r.ops.pop(),r.trys.pop();continue}v=n.call(e,r)}catch(S){v=[6,S],d=0}finally{l=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Sv=function(){function e(n,r,l,d){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=l,r&&x1.isSupported()?(this.primaryDecoder=new x1(n,l,d),this.secondaryDecoder=new A1(n,l,d)):this.primaryDecoder=new A1(n,l,d)}return e.prototype.decodeAsync=function(n){return S1(this,void 0,void 0,function(){var r;return b1(this,function(l){switch(l.label){case 0:r=performance.now(),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,l.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(n){return S1(this,void 0,void 0,function(){var r,l;return b1(this,function(d){switch(d.label){case 0:r=performance.now(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,d.sent()];case 3:if(l=d.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw l;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(n){if(this.verbose){var r=performance.now()-n;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,r=0,l=this.executionResults;r<l.length;r++){var d=l[r];n+=d}var f=n/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Rd=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(l[f]=d[f])},e(n,r)};return function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(n,r);function l(){this.constructor=n}n.prototype=r===null?Object.create(r):(l.prototype=r.prototype,new l)}}(),_u=function(e,n,r,l){function d(f){return f instanceof r?f:new r(function(_){_(f)})}return new(r||(r=Promise))(function(f,_){function x(S){try{v(l.next(S))}catch(I){_(I)}}function C(S){try{v(l.throw(S))}catch(I){_(I)}}function v(S){S.done?f(S.value):d(S.value).then(x,C)}v((l=l.apply(e,n||[])).next())})},yu=function(e,n){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,d,f,_;return _={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function x(v){return function(S){return C([v,S])}}function C(v){if(l)throw new TypeError("Generator is already executing.");for(;_&&(_=0,v[0]&&(r=0)),r;)try{if(l=1,d&&(f=v[0]&2?d.return:v[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,v[1])).done)return f;switch(d=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return r.label++,{value:v[1],done:!1};case 5:r.label++,d=v[1],v=[0];continue;case 7:v=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){r=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){r.label=v[1];break}if(v[0]===6&&r.label<f[1]){r.label=f[1],f=v;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(v);break}f[2]&&r.ops.pop(),r.trys.pop();continue}v=n.call(e,r)}catch(S){v=[6,S],d=0}finally{l=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Dg=function(){function e(n,r){this.name=n,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(n){var r={};r[this.name]=n;var l={advanced:[r]};return this.track.applyConstraints(l)},e.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var r=n[this.name];return r}return null},e}(),bv=function(e){Rd(n,e);function n(r,l){return e.call(this,r,l)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(r){var l={};l[this.name]=r;var d={advanced:[l]};return this.track.applyConstraints(d)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),l=r[this.name];return{min:l.min,max:l.max,step:l.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n}(Dg),Iv=function(e){Rd(n,e);function n(r){return e.call(this,"zoom",r)||this}return n}(bv),Tv=function(e){Rd(n,e);function n(r){return e.call(this,"torch",r)||this}return n}(Dg),Nv=function(){function e(n){this.track=n}return e.prototype.zoomFeature=function(){return new Iv(this.track)},e.prototype.torchFeature=function(){return new Tv(this.track)},e}(),Rv=function(){function e(n,r,l){this.isClosed=!1,this.parentElement=n,this.mediaStream=r,this.callbacks=l,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return e.prototype.createVideoElement=function(n){var r=document.createElement("video");return r.style.width="".concat(n,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var l=n.surface.clientWidth,d=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(l,d),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(n,r,l,d){return _u(this,void 0,void 0,function(){var f,_;return yu(this,function(x){switch(x.label){case 0:return f=new e(n,r,d),l.aspectRatio?(_={aspectRatio:l.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(_)]):[3,2];case 1:x.sent(),x.label=2;case 2:return f.setupSurface(),[2,f]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(n){this.failIfClosed();var r=this,l=function(){setTimeout(n,200),r.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(n){return _u(this,void 0,void 0,function(){return yu(this,function(r){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(r,l){var d=n.mediaStream.getVideoTracks(),f=d.length,_=0;n.mediaStream.getVideoTracks().forEach(function(x){n.mediaStream.removeTrack(x),x.stop(),++_,_>=f&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),r())})})},e.prototype.getCapabilities=function(){return new Nv(this.getFirstTrackOrFail())},e}(),Ov=function(){function e(n){this.mediaStream=n}return e.prototype.render=function(n,r,l){return _u(this,void 0,void 0,function(){return yu(this,function(d){return[2,Rv.create(n,this.mediaStream,r,l)]})})},e.create=function(n){return _u(this,void 0,void 0,function(){var r,l;return yu(this,function(d){switch(d.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return l=d.sent(),[2,new e(l)]}})})},e}(),I1=function(e,n,r,l){function d(f){return f instanceof r?f:new r(function(_){_(f)})}return new(r||(r=Promise))(function(f,_){function x(S){try{v(l.next(S))}catch(I){_(I)}}function C(S){try{v(l.throw(S))}catch(I){_(I)}}function v(S){S.done?f(S.value):d(S.value).then(x,C)}v((l=l.apply(e,n||[])).next())})},T1=function(e,n){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,d,f,_;return _={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function x(v){return function(S){return C([v,S])}}function C(v){if(l)throw new TypeError("Generator is already executing.");for(;_&&(_=0,v[0]&&(r=0)),r;)try{if(l=1,d&&(f=v[0]&2?d.return:v[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,v[1])).done)return f;switch(d=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return r.label++,{value:v[1],done:!1};case 5:r.label++,d=v[1],v=[0];continue;case 7:v=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){r=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){r.label=v[1];break}if(v[0]===6&&r.label<f[1]){r.label=f[1],f=v;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(v);break}f[2]&&r.ops.pop(),r.trys.pop();continue}v=n.call(e,r)}catch(S){v=[6,S],d=0}finally{l=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},kv=function(){function e(){}return e.failIfNotSupported=function(){return I1(this,void 0,void 0,function(){return T1(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(n){return I1(this,void 0,void 0,function(){return T1(this,function(r){return[2,Ov.create(n)]})})},e}(),Mv=function(e,n,r,l){function d(f){return f instanceof r?f:new r(function(_){_(f)})}return new(r||(r=Promise))(function(f,_){function x(S){try{v(l.next(S))}catch(I){_(I)}}function C(S){try{v(l.throw(S))}catch(I){_(I)}}function v(S){S.done?f(S.value):d(S.value).then(x,C)}v((l=l.apply(e,n||[])).next())})},Pv=function(e,n){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,d,f,_;return _={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function x(v){return function(S){return C([v,S])}}function C(v){if(l)throw new TypeError("Generator is already executing.");for(;_&&(_=0,v[0]&&(r=0)),r;)try{if(l=1,d&&(f=v[0]&2?d.return:v[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,v[1])).done)return f;switch(d=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return r.label++,{value:v[1],done:!1};case 5:r.label++,d=v[1],v=[0];continue;case 7:v=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){r=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){r.label=v[1];break}if(v[0]===6&&r.label<f[1]){r.label=f[1],f=v;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(v);break}f[2]&&r.ops.pop(),r.trys.pop();continue}v=n.call(e,r)}catch(S){v=[6,S],d=0}finally{l=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Lv=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var n=po.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(n=po.insecureContextCameraQueryError()),Promise.reject(n)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},e.getCamerasFromMediaDevices=function(){return Mv(this,void 0,void 0,function(){var n,r,l,d,f,_,x;return Pv(this,function(C){switch(C.label){case 0:return n=function(v){for(var S=v.getVideoTracks(),I=0,M=S;I<M.length;I++){var F=M[I];F.enabled=!1,F.stop(),v.removeTrack(F)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=C.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(l=C.sent(),d=[],f=0,_=l;f<_.length;f++)x=_[f],x.kind==="videoinput"&&d.push({id:x.deviceId,label:x.label});return n(r),[2,d]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,r){var l=function(f){for(var _=[],x=0,C=f;x<C.length;x++){var v=C[x];v.kind==="video"&&_.push({id:v.id,label:v.label})}n(_)},d=MediaStreamTrack;d.getSources(l)})},e}(),nn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(nn||(nn={}));var Dv=function(){function e(){this.state=nn.NOT_STARTED,this.onGoingTransactionNewState=nn.UNKNOWN}return e.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},e.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===nn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=nn.UNKNOWN,this.directTransition(n)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===nn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=nn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==nn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(n){switch(this.state){case nn.UNKNOWN:throw"Transition from unknown is not allowed";case nn.NOT_STARTED:this.failIfNewStateIs(n,[nn.PAUSED]);break;case nn.SCANNING:break;case nn.PAUSED:break}},e.prototype.failIfNewStateIs=function(n,r){for(var l=0,d=r;l<d.length;l++){var f=d[l];if(n===f)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},e}(),Bv=function(){function e(n){this.stateManager=n}return e.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},e.prototype.directTransition=function(n){this.stateManager.directTransition(n)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===nn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==nn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===nn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===nn.PAUSED},e}(),Fv=function(){function e(){}return e.create=function(){return new Bv(new Dv)},e}(),jv=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(l[f]=d[f])},e(n,r)};return function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(n,r);function l(){this.constructor=n}n.prototype=r===null?Object.create(r):(l.prototype=r.prototype,new l)}}(),Ei=function(e){jv(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n}(yv),zv=function(){function e(n,r){this.logger=r,this.fps=Ei.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=Ei.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Lg.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Mr(this.qrbox)},e.create=function(n,r){return new e(n,r)},e}(),Uv=function(){function e(n,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var l;typeof r=="boolean"?this.verbose=r===!0:r&&(l=r,this.verbose=l.verbose===!0,l.experimentalFeatures),this.logger=new wv(this.verbose),this.qrcode=new Sv(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(l),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Fv.create()}return e.prototype.start=function(n,r,l,d){var f=this;if(!n)throw"cameraIdOrConfig is required";if(!l||typeof l!="function")throw"qrCodeSuccessCallback is required and should be a function.";var _;d?_=d:_=this.verbose?this.logger.log:function(){};var x=zv.create(r,this.logger);this.clearElement();var C=!1;x.videoConstraints&&(x.isMediaStreamConstraintsValid()?C=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=C,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:Ei.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var I=this,M=this.stateManagerProxy.startTransition(nn.SCANNING);return new Promise(function(F,z){var U=v?x.videoConstraints:I.createVideoConstraints(n);if(!U){M.cancel(),z("videoConstraints should be defined");return}var ue={};(!v||x.aspectRatio)&&(ue.aspectRatio=x.aspectRatio);var H={onRenderSurfaceReady:function(B,P){I.setupUi(B,P,x),I.isScanning=!0,I.foreverScan(x,l,_)}};kv.failIfNotSupported().then(function(B){B.create(U).then(function(P){return P.render(f.element,ue,H).then(function(X){I.renderedCamera=X,M.execute(),F(null)}).catch(function(X){M.cancel(),z(X)})}).catch(function(P){M.cancel(),z(po.errorGettingUserMedia(P))})}).catch(function(B){M.cancel(),z(po.cameraStreamingNotSupported())})})},e.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(nn.PAUSED),this.showPausedState(),(Mr(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,r=function(){n.stateManagerProxy.directTransition(nn.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(nn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var l=function(){if(n.element){var f=document.getElementById(Ei.SHADED_REGION_ELEMENT_ID);f&&n.element.removeChild(f)}},d=this;return this.renderedCamera.close().then(function(){return d.renderedCamera=null,d.element&&(d.element.removeChild(d.canvasElement),d.canvasElement=null),l(),d.qrRegion&&(d.qrRegion=null),d.context&&(d.context=null),r.execute(),d.hidePausedState(),d.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(n,r){return this.scanFileV2(n,r).then(function(l){return l.decodedText})},e.prototype.scanFileV2=function(n,r){var l=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Mr(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(d,f){l.possiblyCloseLastScanImageFile(),l.clearElement(),l.lastScanImageFile=URL.createObjectURL(n);var _=new Image;_.onload=function(){var x=_.width,C=_.height,v=document.getElementById(l.elementId),S=v.clientWidth?v.clientWidth:Ei.DEFAULT_WIDTH,I=Math.max(v.clientHeight?v.clientHeight:C,Ei.FILE_SCAN_MIN_HEIGHT),M=l.computeCanvasDrawConfig(x,C,S,I);if(r){var F=l.createCanvasElement(S,I,"qr-canvas-visible");F.style.display="inline-block",v.appendChild(F);var z=F.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=S,z.canvas.height=I,z.drawImage(_,0,0,x,C,M.x,M.y,M.width,M.height)}var U=Ei.FILE_SCAN_HIDDEN_CANVAS_PADDING,ue=Math.max(_.width,M.width),H=Math.max(_.height,M.height),B=ue+2*U,P=H+2*U,X=l.createCanvasElement(B,P);v.appendChild(X);var ae=X.getContext("2d");if(!ae)throw"Unable to get 2d context from canvas";ae.canvas.width=B,ae.canvas.height=P,ae.drawImage(_,0,0,x,C,U,U,ue,H);try{l.qrcode.decodeRobustlyAsync(X).then(function(se){d(E1.createFromQrcodeResult(se))}).catch(f)}catch(se){f("QR code parse error, error = ".concat(se))}},_.onerror=f,_.onabort=f,_.onstalled=f,_.onsuspend=f,_.src=URL.createObjectURL(n)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Lv.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(n){if(n){if(!Lg.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(n){var r=[je.QR_CODE,je.AZTEC,je.CODABAR,je.CODE_39,je.CODE_93,je.CODE_128,je.DATA_MATRIX,je.MAXICODE,je.ITF,je.EAN_13,je.EAN_8,je.PDF_417,je.RSS_14,je.RSS_EXPANDED,je.UPC_A,je.UPC_E,je.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return r;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var l=[],d=0,f=n.formatsToSupport;d<f.length;d++){var _=f[d];_v(_)?l.push(_):this.logger.warn("Invalid format: ".concat(_," passed in config, ignoring."))}if(l.length===0)throw"None of formatsToSupport match supported values.";return l},e.prototype.getUseBarCodeDetectorIfSupported=function(n){if(Mr(n))return!0;if(!Mr(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(Mr(n.experimentalFeatures))return!0;var r=n.experimentalFeatures;return Mr(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(n,r,l){var d=this,f=l.qrbox;this.validateQrboxConfig(f);var _=this.toQrdimensions(n,r,f),x=function(v){if(v<Ei.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ei.MIN_QR_BOX_SIZE,"px.")},C=function(v){return v>n&&(d.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=n),v};x(_.width),x(_.height),_.width=C(_.width)},e.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(n,r,l){if(typeof l=="number")return{width:l,height:l};if(typeof l=="function")try{return l(n,r)}catch(d){throw new Error("qrbox config was passed as a function but it failed with unknown error"+d)}return l},e.prototype.setupUi=function(n,r,l){l.isShadedBoxEnabled()&&this.validateQrboxSize(n,r,l);var d=Mr(l.qrbox)?{width:n,height:r}:l.qrbox;this.validateQrboxConfig(d);var f=this.toQrdimensions(n,r,d);f.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var _=l.isShadedBoxEnabled()&&f.height<=r,x={x:0,y:0,width:n,height:r},C=_?this.getShadedRegionBounds(n,r,f):x,v=this.createCanvasElement(C.width,C.height),S={willReadFrequently:!0},I=v.getContext("2d",S);I.canvas.width=C.width,I.canvas.height=C.height,this.element.append(v),_&&this.possiblyInsertShadingElement(this.element,n,r,f),this.createScannerPausedUiElement(this.element),this.qrRegion=C,this.context=I,this.canvasElement=v},e.prototype.createScannerPausedUiElement=function(n){var r=document.createElement("div");r.innerText=po.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",n.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(n,r){var l=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(d){return n(d.text,E1.createFromQrcodeResult(d)),l.possiblyUpdateShaders(!0),!0}).catch(function(d){l.possiblyUpdateShaders(!1);var f=po.codeParseError(d);return r(f,vv.createFrom(f)),!1})},e.prototype.foreverScan=function(n,r,l){var d=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),_=f.videoWidth/f.clientWidth,x=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var C=this.qrRegion.width*_,v=this.qrRegion.height*x,S=this.qrRegion.x*_,I=this.qrRegion.y*x;this.context.drawImage(f,S,I,C,v,0,0,this.qrRegion.width,this.qrRegion.height);var M=function(){d.foreverScanTimeout=setTimeout(function(){d.foreverScan(n,r,l)},d.getTimeoutFps(n.fps))};this.scanContext(r,l).then(function(F){!F&&n.disableFlip!==!0?(d.context.translate(d.context.canvas.width,0),d.context.scale(-1,1),d.scanContext(r,l).finally(function(){M()})):M()}).catch(function(F){d.logger.logError("Error happend while scanning context",F),M()})}},e.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var r="facingMode",l="deviceId",d={user:!0,environment:!0},f="exact",_=function(z){if(z in d)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(z,"'")},x=Object.keys(n);if(x.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(x.length," keys");var C=Object.keys(n)[0];if(C!==r&&C!==l)throw"Only '".concat(r,"' and '").concat(l,"' ")+" are supported for 'cameraIdOrConfig'";if(C===r){var v=n.facingMode;if(typeof v=="string"){if(_(v))return{facingMode:v}}else if(typeof v=="object")if(f in v){if(_(v["".concat(f)]))return{facingMode:{exact:v["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var S=typeof v;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var I=n.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(f in I)return{deviceId:{exact:I["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var M=typeof I;throw"Invalid type of 'deviceId' = ".concat(M)}}}var F=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(F)},e.prototype.computeCanvasDrawConfig=function(n,r,l,d){if(n<=l&&r<=d){var f=(l-n)/2,_=(d-r)/2;return{x:f,y:_,width:n,height:r}}else{var x=n,C=r;return n>l&&(r=l/n*r,n=l),r>d&&(n=d/r*n,r=d),this.logger.log("Image downsampled from "+"".concat(x,"X").concat(C)+" to ".concat(n,"X").concat(r,".")),this.computeCanvasDrawConfig(n,r,l,d)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},e.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=n?Ei.BORDER_SHADER_MATCH_COLOR:Ei.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(n,r,l){var d=n,f=r,_=document.createElement("canvas");return _.style.width="".concat(d,"px"),_.style.height="".concat(f,"px"),_.style.display="none",_.id=Mr(l)?"qr-canvas":l,_},e.prototype.getShadedRegionBounds=function(n,r,l){if(l.width>n||l.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-l.width)/2,y:(r-l.height)/2,width:l.width,height:l.height}},e.prototype.possiblyInsertShadingElement=function(n,r,l,d){if(!(r-d.width<1||l-d.height<1)){var f=document.createElement("div");f.style.position="absolute";var _=(r-d.width)/2,x=(l-d.height)/2;if(f.style.borderLeft="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(Ei.SHADED_REGION_ELEMENT_ID),r-d.width<11||l-d.height<11)this.hasBorderShaders=!1;else{var C=5,v=40;this.insertShaderBorders(f,v,C,-C,null,0,!0),this.insertShaderBorders(f,v,C,-C,null,0,!1),this.insertShaderBorders(f,v,C,null,-C,0,!0),this.insertShaderBorders(f,v,C,null,-C,0,!1),this.insertShaderBorders(f,C,v+C,-C,null,-C,!0),this.insertShaderBorders(f,C,v+C,null,-C,-C,!0),this.insertShaderBorders(f,C,v+C,-C,null,-C,!1),this.insertShaderBorders(f,C,v+C,null,-C,-C,!1),this.hasBorderShaders=!0}n.append(f)}},e.prototype.insertShaderBorders=function(n,r,l,d,f,_,x){var C=document.createElement("div");C.style.position="absolute",C.style.backgroundColor=Ei.BORDER_SHADER_DEFAULT_COLOR,C.style.width="".concat(r,"px"),C.style.height="".concat(l,"px"),d!==null&&(C.style.top="".concat(d,"px")),f!==null&&(C.style.bottom="".concat(f,"px")),x?C.style.left="".concat(_,"px"):C.style.right="".concat(_,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(C),n.appendChild(C)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(n){return 1e3/n},e}(),N1;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(N1||(N1={}));/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const R1=64*1024,Hv=5*1e3,Vv=5*1e3;function O1(e){const n=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=Math.random()*256|0;return n}function Bg(){if(typeof globalThis>"u")return null;const e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}function mt(e,n){return Object.defineProperty(e,"code",{value:n,enumerable:!0,configurable:!0}),e}function k1(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function Wv(e){console.warn(e)}class Us{constructor(n={}){if(this._map=new Map,this._id=O1(4).toString("hex").slice(0,7),this._doDebug=n.debug,this._debug("new peer %o",n),this.channelName=n.initiator?n.channelName||O1(20).toString("hex"):null,this.initiator=n.initiator||!1,this.channelConfig=n.channelConfig||Us.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Us.config,n.config),this.offerOptions=n.offerOptions||{},this.answerOptions=n.answerOptions||{},this.sdpTransform=n.sdpTransform||(r=>r),this.streams=n.streams||(n.stream?[n.stream]:[]),this.trickle=n.trickle!==void 0?n.trickle:!0,this.allowHalfTrickle=n.allowHalfTrickle!==void 0?n.allowHalfTrickle:!1,this.iceCompleteTimeout=n.iceCompleteTimeout||Hv,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=n.wrtc&&typeof n.wrtc=="object"?n.wrtc:Bg(),!this._wrtc)throw mt(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(r){this.destroy(mt(r,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=r=>{this._onIceCandidate(r)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(r=>{this.destroy(mt(r,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=r=>{this._setupData(r)},this.streams&&this.streams.forEach(r=>{this.addStream(r)}),this._pc.ontrack=r=>{this._onTrack(r)},this._debug("initial negotiation"),this._needsNegotiation()}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(n){if(!this.destroying){if(this.destroyed)throw mt(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof n=="string")try{n=JSON.parse(n)}catch{n={}}this._debug("signal()"),n.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),n.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(n.transceiverRequest.kind,n.transceiverRequest.init)),n.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(n.candidate):this._pendingCandidates.push(n.candidate)),n.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(n)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(r=>{this._addIceCandidate(r)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(r=>{this.destroy(mt(r,"ERR_SET_REMOTE_DESCRIPTION"))}),!n.sdp&&!n.candidate&&!n.renegotiate&&!n.transceiverRequest&&this.destroy(mt(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(n){const r=new this._wrtc.RTCIceCandidate(n);this._pc.addIceCandidate(r).catch(l=>{!r.address||r.address.endsWith(".local")?Wv("Ignoring unsupported ICE candidate."):this.destroy(mt(l,"ERR_ADD_ICE_CANDIDATE"))})}send(n){if(!this.destroying){if(this.destroyed)throw mt(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(n)}}addTransceiver(n,r){if(!this.destroying){if(this.destroyed)throw mt(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(n,r),this._needsNegotiation()}catch(l){this.destroy(mt(l,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:n,init:r}})}}addStream(n){if(!this.destroying){if(this.destroyed)throw mt(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),n.getTracks().forEach(r=>{this.addTrack(r,n)})}}addTrack(n,r){if(this.destroying)return;if(this.destroyed)throw mt(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const l=this._senderMap.get(n)||new Map;let d=l.get(r);if(!d)d=this._pc.addTrack(n,r),l.set(r,d),this._senderMap.set(n,l),this._needsNegotiation();else throw d.removed?mt(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):mt(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(n,r,l){if(this.destroying)return;if(this.destroyed)throw mt(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const d=this._senderMap.get(n),f=d?d.get(l):null;if(!f)throw mt(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");r&&this._senderMap.set(r,d),f.replaceTrack!=null?f.replaceTrack(r):this.destroy(mt(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(n,r){if(this.destroying)return;if(this.destroyed)throw mt(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const l=this._senderMap.get(n),d=l?l.get(r):null;if(!d)throw mt(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{d.removed=!0,this._pc.removeTrack(d)}catch(f){f.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(d):this.destroy(mt(f,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(n){if(!this.destroying){if(this.destroyed)throw mt(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),n.getTracks().forEach(r=>{this.removeTrack(r,n)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,queueMicrotask(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw mt(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(n){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",n&&(n.message||n)),queueMicrotask(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",n&&(n.message||n)),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,n&&this.emit("error",n),this.emit("close")}))}_setupData(n){if(!n.channel)return this.destroy(mt(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=n.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=R1),this.channelName=this._channel.label,this._channel.onmessage=l=>{this._onChannelMessage(l)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=l=>{this.destroy(mt(l,"ERR_DATA_CHANNEL"))};let r=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(r&&this._onChannelClose(),r=!0):r=!1},Vv)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(n=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(n.sdp=k1(n.sdp)),n.sdp=this.sdpTransform(n.sdp);const r=()=>{if(this.destroyed)return;const f=this._pc.localDescription||n;this._debug("signal"),this.emit("signal",{type:f.type,sdp:f.sdp})},l=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},d=f=>{this.destroy(mt(f,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(n).then(l).catch(d)}).catch(n=>{this.destroy(mt(n,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(n=>{!n.mid&&n.sender.track&&!n.requested&&(n.requested=!0,this.addTransceiver(n.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(n=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(n.sdp=k1(n.sdp)),n.sdp=this.sdpTransform(n.sdp);const r=()=>{if(this.destroyed)return;const f=this._pc.localDescription||n;this._debug("signal"),this.emit("signal",{type:f.type,sdp:f.sdp}),this.initiator||this._requestMissingTransceivers()},l=()=>{this.destroyed||(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},d=f=>{this.destroy(mt(f,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(n).then(l).catch(d)}).catch(n=>{this.destroy(mt(n,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(mt(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const n=this._pc.iceConnectionState,r=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",n,r),this.emit("iceStateChange",n,r),(n==="connected"||n==="completed")&&(this._pcReady=!0,this._maybeReady()),n==="failed"&&this.destroy(mt(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),n==="closed"&&this.destroy(mt(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(n){const r=l=>(Object.prototype.toString.call(l.values)==="[object Array]"&&l.values.forEach(d=>{Object.assign(l,d)}),l);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(l=>{const d=[];l.forEach(f=>{d.push(r(f))}),n(null,d)},l=>n(l)):this._pc.getStats.length>0?this._pc.getStats(l=>{if(this.destroyed)return;const d=[];l.result().forEach(f=>{const _={};f.names().forEach(x=>{_[x]=f.stat(x)}),_.id=f.id,_.type=f.type,_.timestamp=f.timestamp,d.push(r(_))}),n(null,d)},l=>n(l)):n(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const n=()=>{this.destroyed||this.getStats((r,l)=>{if(this.destroyed)return;r&&(l=[]);const d={},f={},_={};let x=!1;l.forEach(v=>{(v.type==="remotecandidate"||v.type==="remote-candidate")&&(d[v.id]=v),(v.type==="localcandidate"||v.type==="local-candidate")&&(f[v.id]=v),(v.type==="candidatepair"||v.type==="candidate-pair")&&(_[v.id]=v)});const C=v=>{x=!0;let S=f[v.localCandidateId];S&&(S.ip||S.address)?(this.localAddress=S.ip||S.address,this.localPort=Number(S.port)):S&&S.ipAddress?(this.localAddress=S.ipAddress,this.localPort=Number(S.portNumber)):typeof v.googLocalAddress=="string"&&(S=v.googLocalAddress.split(":"),this.localAddress=S[0],this.localPort=Number(S[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let I=d[v.remoteCandidateId];I&&(I.ip||I.address)?(this.remoteAddress=I.ip||I.address,this.remotePort=Number(I.port)):I&&I.ipAddress?(this.remoteAddress=I.ipAddress,this.remotePort=Number(I.portNumber)):typeof v.googRemoteAddress=="string"&&(I=v.googRemoteAddress.split(":"),this.remoteAddress=I[0],this.remotePort=Number(I[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(l.forEach(v=>{v.type==="transport"&&v.selectedCandidatePairId&&C(_[v.selectedCandidatePairId]),(v.type==="googCandidatePair"&&v.googActiveConnection==="true"||(v.type==="candidatepair"||v.type==="candidate-pair")&&v.selected)&&C(v)}),!x&&(!Object.keys(_).length||Object.keys(f).length)){setTimeout(n,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(S){return this.destroy(mt(S,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const v=this._cb;this._cb=null,v(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};n()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>R1||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(n=>{this._pc.removeTrack(n),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(n){this.destroyed||(n.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:n.candidate.candidate,sdpMLineIndex:n.candidate.sdpMLineIndex,sdpMid:n.candidate.sdpMid}}):!n.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),n.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(n){if(this.destroyed)return;let r=n.data;r instanceof ArrayBuffer&&(r=new Uint8Array(r)),this.emit("data",r)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const n=this._cb;this._cb=null,n(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(n){this.destroyed||n.streams.forEach(r=>{this._debug("on track"),this.emit("track",n.track,r),this._remoteTracks.push({track:n.track,stream:r}),!this._remoteStreams.some(l=>l.id===r.id)&&(this._remoteStreams.push(r),queueMicrotask(()=>{this._debug("on stream"),this.emit("stream",r)}))})}_debug(...n){this._doDebug&&(n[0]="["+this._id+"] "+n[0],console.log(...n))}on(n,r){const l=this._map;l.has(n)||l.set(n,new Set),l.get(n).add(r)}off(n,r){const l=this._map,d=l.get(n);d&&(d.delete(r),d.size===0&&l.delete(n))}once(n,r){const l=(...d)=>{this.off(n,l),r(...d)};this.on(n,l)}emit(n,...r){const l=this._map;if(l.has(n))for(const d of l.get(n))try{d(...r)}catch(f){console.error(f)}}}Us.WEBRTC_SUPPORT=!!Bg();Us.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};Us.channelConfig={};const M1="0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz",P1=(e,n,r)=>{const l=new Us({initiator:e,trickle:n,config:r}),d=f=>l.__earlyDataBuffer.push(f);return l.on(ci.data,d),l.__earlyDataBuffer=[],l.__drainEarlyData=f=>{l.off(ci.data,d),l.__earlyDataBuffer.forEach(f),delete l.__earlyDataBuffer,delete l.__drainEarlyData},l},Fg=e=>Array(e).fill().map(()=>M1[Math.floor(Math.random()*M1.length)]).join(""),Zv=(e,n)=>(r,l)=>{if(e[l])return e[l];if(!r)throw ir("requires a config map as the first argument");if(!r.appId&&!r.firebaseApp)throw ir("config map is missing appId field");if(!l)throw ir("namespace argument required");return e[l]=n(r,l)},xa="Trystero",Sc=Fg(20),{keys:Gv,values:Xv,entries:vu,fromEntries:Od}=Object,Ts=()=>{},ir=e=>new Error(`${xa}: ${e}`),Eo=e=>new TextEncoder().encode(e),zl=e=>new TextDecoder().decode(e),ci=Od(["close","connect","data","error","signal","stream","track"].map(e=>[e,e])),Yv=(e,n,r)=>(e.relayUrls||n).slice(0,e.relayUrls?e.relayUrls.length:e.relayRedundancy||r),Kv=e=>new Promise(n=>setTimeout(n,e)),Qv=Object.getPrototypeOf(Uint8Array),Ul=12,jg=0,Hl=jg+Ul,Vl=Hl+1,ha=Vl+1,da=ha+1,Ss=16*2**10-da,Sl=255,L1="bufferedamountlow",qv=(e,n)=>{const r={},l={},d={},f={},_={},x={},C=(W,ee)=>(W?Array.isArray(W)?W:[W]:Gv(r)).flatMap(oe=>{const Z=r[oe];return Z?ee(oe,Z):(console.warn(`${xa}: no peer with id ${oe} found`),[])}),v=W=>{r[W]&&(delete r[W],delete d[W],delete f[W],$(W))},S=W=>{if(l[W])return[l[W].send,l[W].setOnComplete,l[W].setOnProgress];if(!W)throw ir("action type argument is required");const ee=Eo(W);if(ee.byteLength>Ul)throw ir(`action type string "${W}" (${ee.byteLength}b) exceeds byte limit (${Ul}). Hint: choose a shorter name.`);const oe=new Uint8Array(Ul);oe.set(ee);let Z=0;return l[W]={onComplete:Ts,onProgress:Ts,setOnComplete:te=>l[W]={...l[W],onComplete:te},setOnProgress:te=>l[W]={...l[W],onProgress:te},send:async(te,G,me,fe)=>{if(me&&typeof me!="object")throw ir("action meta argument must be an object");if(te===void 0)throw ir("action data cannot be undefined");const ne=typeof te!="string",pe=te instanceof Blob,he=pe||te instanceof ArrayBuffer||te instanceof Qv;if(me&&!he)throw ir("action meta argument can only be used with binary data");const Ce=he?new Uint8Array(pe?await te.arrayBuffer():te):Eo(ne?JSON.stringify(te):te),be=me?Eo(JSON.stringify(me)):null,Ve=Math.ceil(Ce.byteLength/Ss)+(me?1:0)||1,ve=Array(Ve).fill().map((Re,ge)=>{const nt=ge===Ve-1,Be=me&&ge===0,Mt=new Uint8Array(da+(Be?be.byteLength:nt?Ce.byteLength-Ss*(Ve-(me?2:1)):Ss));return Mt.set(oe),Mt.set([Z],Hl),Mt.set([nt|Be<<1|he<<2|ne<<3],Vl),Mt.set([Math.round((ge+1)/Ve*Sl)],ha),Mt.set(me?Be?be:Ce.subarray((ge-1)*Ss,ge*Ss):Ce.subarray(ge*Ss,(ge+1)*Ss),da),Mt});return Z=Z+1&Sl,Promise.all(C(G,async(Re,ge)=>{const nt=ge._channel;let Be=0;for(;Be<Ve;){const Mt=ve[Be];if(nt.bufferedAmount>nt.bufferedAmountLowThreshold&&await new Promise(xn=>{const xt=()=>{nt.removeEventListener(L1,xt),xn()};nt.addEventListener(L1,xt)}),!r[Re])break;ge.send(Mt),Be++,fe&&fe(Mt[ha]/Sl,Re,me)}}))}},[l[W].send,l[W].setOnComplete,l[W].setOnProgress]},I=(W,ee)=>{const oe=new Uint8Array(ee),Z=zl(oe.subarray(jg,Hl)).replaceAll("\0",""),[te]=oe.subarray(Hl,Vl),[G]=oe.subarray(Vl,ha),[me]=oe.subarray(ha,da),fe=oe.subarray(da),ne=!!(G&1),pe=!!(G&2),he=!!(G&4),Ce=!!(G&8);if(!l[Z])throw ir(`received message with unregistered type (${Z})`);d[W]||(d[W]={}),d[W][Z]||(d[W][Z]={});let be=d[W][Z][te];if(be||(be=d[W][Z][te]={chunks:[]}),pe?be.meta=JSON.parse(zl(fe)):be.chunks.push(fe),l[Z].onProgress(me/Sl,W,be.meta),!ne)return;const Ve=new Uint8Array(be.chunks.reduce((ve,Re)=>ve+Re.byteLength,0));if(be.chunks.reduce((ve,Re)=>(Ve.set(Re,ve),ve+Re.byteLength),0),he)l[Z].onComplete(Ve,W,be.meta);else{const ve=zl(Ve);l[Z].onComplete(Ce?JSON.parse(ve):ve,W)}delete d[W][Z][te]},[M,F]=S("__91n6__"),[z,U]=S("__90n6__"),[ue,H]=S("__516n4L__"),[B,P]=S("__57r34m__"),[X,ae]=S("__7r4ck__");let se=Ts,$=Ts,J=Ts,V=Ts;return e((W,ee)=>{if(r[ee])return;const oe=I.bind(null,ee);r[ee]=W,W.on(ci.signal,Z=>ue(Z,ee)),W.on(ci.close,()=>v(ee)),W.on(ci.data,oe),W.on(ci.stream,Z=>{J(Z,ee,_[ee]),delete _[ee]}),W.on(ci.track,(Z,te)=>{V(Z,te,ee,x[ee]),delete x[ee]}),W.on(ci.error,Z=>{Z.code!=="ERR_DATA_CHANNEL"&&console.error(Z)}),se(ee),W.__drainEarlyData(oe)}),F((W,ee)=>z("",ee)),U((W,ee)=>{f[ee]&&(f[ee](),delete f[ee])}),H((W,ee)=>{r[ee]&&r[ee].signal(W)}),P((W,ee)=>_[ee]=W),ae((W,ee)=>x[ee]=W),{makeAction:S,ping:async W=>{if(!W)throw ir("ping() must be called with target peer ID");const ee=Date.now();return M("",W),await new Promise(oe=>f[W]=oe),Date.now()-ee},leave:()=>{vu(r).forEach(([W,ee])=>{ee.destroy(),delete r[W]}),n()},getPeers:()=>Od(vu(r).map(([W,ee])=>[W,ee._pc])),addStream:(W,ee,oe)=>C(ee,async(Z,te)=>{oe&&await B(oe,Z),te.addStream(W)}),removeStream:(W,ee)=>C(ee,(oe,Z)=>Z.removeStream(W)),addTrack:(W,ee,oe,Z)=>C(oe,async(te,G)=>{Z&&await X(Z,te),G.addTrack(W,ee)}),removeTrack:(W,ee,oe)=>C(oe,(Z,te)=>te.removeTrack(W,ee)),replaceTrack:(W,ee,oe,Z,te)=>C(Z,async(G,me)=>{te&&await X(te,G),me.replaceTrack(W,ee,oe)}),onPeerJoin:W=>se=W,onPeerLeave:W=>$=W,onPeerStream:W=>J=W,onPeerTrack:W=>V=W}},kd="AES-CBC",$v=e=>btoa(String.fromCharCode.apply(null,new Uint8Array(e))),Jv=e=>{const n=atob(e);return new Uint8Array(n.length).map((r,l)=>n.charCodeAt(l)).buffer},ew=async(e,n)=>crypto.subtle.importKey("raw",await crypto.subtle.digest({name:"SHA-256"},Eo(`${e}:${n}`)),{name:kd},!1,["encrypt","decrypt"]),D1=async(e,n)=>{const r=crypto.getRandomValues(new Uint8Array(16));return JSON.stringify({c:$v(await crypto.subtle.encrypt({name:kd,iv:r},await e,Eo(n))),iv:[...r]})},B1=async(e,n)=>{const{c:r,iv:l}=JSON.parse(n);return zl(await crypto.subtle.decrypt({name:kd,iv:new Uint8Array(l)},await e,Jv(r)))},F1={},bc={},sa={},oa={},j1=20,z1=10,tw=3,nw=33,iw=120,U1=4,H1="announce",rw=["wss://tracker.webtorrent.dev","wss://tracker.openwebtorrent.com","wss://tracker.files.fm:7073/announce","wss://tracker.btorrent.xyz"],sw=Zv(F1,(e,n)=>{if(e.trackerUrls||e.trackerRedundancy)throw ir("trackerUrls/trackerRedundancy have been replaced by relayUrls/relayRedundancy");const r={},l=e.password&&ew(e.password,n),d=Yv(e,rw,tw),f=crypto.subtle.digest("SHA-1",Eo(`${xa}:${e.appId}:${n}`)).then(P=>Array.from(new Uint8Array(P)).map(X=>X.toString(36)).join("").slice(0,j1)),_=P=>Od(Array(P).fill().map(()=>{const X=P1(!0,!1,e.rtcConfig);return[Fg(j1),{peer:X,offerP:new Promise(ae=>X.once(ci.signal,ae))}]})),x=async(P,X)=>{const ae=await f;let se;try{se=JSON.parse(X.data)}catch{console.error(`${xa}: received malformed SDP JSON`);return}if(se.info_hash!==ae||se.peer_id&&se.peer_id===Sc)return;const $=se["failure reason"];if($){console.warn(`${xa}: torrent tracker failure from ${P.url} - ${$}`);return}if(se.interval&&se.interval>z&&se.interval<=iw&&(clearInterval(U),z=se.interval,U=setInterval(S,z*1e3)),se.offer&&se.offer_id){if(r[se.peer_id]||H[se.offer_id])return;H[se.offer_id]=!0;const J=P1(!1,!1,e.rtcConfig);J.once(ci.signal,async V=>P.send(JSON.stringify({answer:l?{...V,sdp:await D1(l,V.sdp)}:V,action:H1,info_hash:ae,peer_id:Sc,to_peer_id:se.peer_id,offer_id:se.offer_id}))),J.on(ci.connect,()=>M(J,se.peer_id)),J.on(ci.close,()=>F(J,se.peer_id,se.offer_id)),J.signal(l?{...se.offer,sdp:await B1(l,se.offer.sdp)}:se.offer);return}if(se.answer){if(r[se.peer_id]||H[se.offer_id])return;const J=B[se.offer_id];if(J){const{peer:V}=J;if(V.destroyed)return;H[se.offer_id]=!0,V.on(ci.connect,()=>M(V,se.peer_id,se.offer_id)),V.on(ci.close,()=>F(V,se.peer_id,se.offer_id)),V.signal(l?{...se.answer,sdp:await B1(l,se.answer.sdp)}:se.answer)}}},C=async(P,X)=>P.send(JSON.stringify({action:H1,info_hash:X,numwant:z1,peer_id:Sc,offers:await Promise.all(vu(B).map(async([ae,{offerP:se}])=>{const $=await se;return{offer_id:ae,offer:l?{...$,sdp:await D1(l,$.sdp)}:$}}))})),v=(P,X,ae)=>(ae||!bc[P]?(oa[P]={...oa[P],[X]:x},bc[P]=new Promise(se=>{const $=new WebSocket(P);$.addEventListener("open",()=>{sa[P]=U1*1e3,se($)}),$.addEventListener("message",J=>Xv(oa[P]).forEach(V=>V($,J))),$.addEventListener("close",async()=>{sa[P]=sa[P]??U1*1e3,await Kv(sa[P]),sa[P]*=2,v(P,X,!0)})})):oa[P][X]=x,bc[P]),S=async()=>{const P=await f;B&&I(),B=_(z1),d.forEach(async X=>{const ae=await v(X,P);ae.readyState===WebSocket.OPEN?C(ae,P):ae.readyState!==WebSocket.CONNECTING&&C(await v(X,P,!0),P)})},I=()=>{vu(B).forEach(([P,{peer:X}])=>{!H[P]&&!r[P]&&X.destroy()}),H={}},M=(P,X,ae)=>{ue(P,X),r[X]=!0,ae&&(r[ae]=!0)},F=(P,X,ae)=>{delete r[X],P.destroy(),ae in B&&(delete B[ae],B={...B,..._(1)})};let z=nw,U=setInterval(S,z*1e3),ue=Ts,H={},B;return S(),qv(P=>ue=P,async()=>{const P=await f;d.forEach(X=>delete oa[X][P]),delete F1[n],clearInterval(U),I()})}),ow=()=>{const e=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981","#06b6d4","#3b82f6","#8b5cf6","#d946ef","#f43f5e"];return e[Math.floor(Math.random()*e.length)]},aw=()=>"MAP-"+Math.random().toString(36).substr(2,6).toUpperCase(),lw="IGSCadetOpenMap_v1",zg=bd((e,n)=>({connectionStatus:"disconnected",roomId:null,myPeerId:null,logs:[],peers:{},myColor:ow(),room:null,actions:{},myLocation:null,myRoutes:null,addLog:(r,l="info")=>{console.log(`[P2P] ${r}`),e(d=>({logs:[...d.logs,{time:new Date().toLocaleTimeString(),message:r,type:l}]}))},clearLogs:()=>e({logs:[]}),cleanup:()=>{const{room:r}=n();r&&r.leave(),e({connectionStatus:"disconnected",roomId:null,myPeerId:null,peers:{},room:null,actions:{}}),n().addLog("Left session and cleaned up")},reconnect:()=>{const{roomId:r}=n();r&&n().joinSession(r)},initializeReceiver:()=>{n().cleanup();const r=aw();n().joinSession(r)},connectToReceiver:r=>{n().cleanup(),n().joinSession(r)},joinSession:r=>{try{e({connectionStatus:"connecting",roomId:r}),n().addLog(`Joining session: ${r}...`);const l=sw({appId:lw},r),d=l.selfId;e({connectionStatus:"connected",roomId:r,room:l,myPeerId:d}),n().addLog(`Joined session as ${d}`);const[f,_]=l.makeAction("handshake"),[x,C]=l.makeAction("location"),[v,S]=l.makeAction("routes"),[I,M]=l.makeAction("chat");e({actions:{sendHandshake:f,sendLocation:x,sendRoutes:v,sendMessage:I}}),l.onPeerJoin(F=>{n().addLog(`Peer joined: ${F}`);const{myColor:z,myLocation:U,myRoutes:ue}=n();f({color:z},F),U&&x(U,F),ue&&v(ue,F),e(H=>({peers:{...H.peers,[F]:{id:F,status:"connected"}}}))}),l.onPeerLeave(F=>{n().addLog(`Peer left: ${F}`),e(z=>{const U={...z.peers};return delete U[F],{peers:U}})}),_((F,z)=>{n().addLog(`[${z}] Handshake received`),e(U=>({peers:{...U.peers,[z]:{...U.peers[z],color:F.color,id:z}}}))}),C((F,z)=>{e(U=>({peers:{...U.peers,[z]:{...U.peers[z],location:F,id:z}}}))}),S((F,z)=>{n().addLog(`[${z}] Routes updated`),e(U=>({peers:{...U.peers,[z]:{...U.peers[z],routes:F,id:z}}}))}),M((F,z)=>{n().addLog(`[${z}] Says: ${F}`,"message-received")})}catch(l){n().addLog(`Error joining session: ${l.message}`,"error"),e({connectionStatus:"disconnected"})}},sendMessage:r=>{const{actions:l}=n();l.sendMessage&&(l.sendMessage(r),n().addLog(`Sent: ${r}`,"message-sent"))},sendLocation:r=>{e({myLocation:r});const{actions:l}=n();l.sendLocation&&l.sendLocation(r)},sendRoutes:r=>{e({myRoutes:r});const{actions:l}=n();l.sendRoutes&&(l.sendRoutes(r),n().addLog("Sent routes update"))}})),uw=({onScan:e,onClose:n})=>{const[r,l]=Q.useState(null),d=Q.useRef(null);return Q.useEffect(()=>{const f=setTimeout(()=>{if(!document.getElementById("reader"))return;const _=new Uv("reader");d.current=_,(async()=>{try{await _.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},C=>{e(C),_.stop().catch(console.error)},C=>{})}catch(C){console.error("Failed to start scanner",C),l("Camera access denied or unavailable. Please ensure you are using HTTPS and have granted camera permissions.")}})()},100);return()=>{clearTimeout(f),d.current&&d.current.isScanning&&d.current.stop().catch(console.error).finally(()=>{d.current.clear()})}},[e]),tg.createPortal(b.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black flex flex-col items-center justify-center",children:[b.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent z-[10000]",children:[b.jsx("h3",{className:"text-white font-bold text-lg",children:"Scan Session Code"}),b.jsx("button",{onClick:n,className:"bg-slate-800/80 text-white p-3 rounded-full hover:bg-slate-700 border border-slate-600 backdrop-blur-sm","aria-label":"Close Camera",children:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),b.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),b.jsx("div",{className:"w-full max-w-lg px-4 relative",children:r?b.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 text-red-400 p-6 rounded-lg text-center backdrop-blur-sm",children:[b.jsx("p",{className:"mb-2 font-bold text-lg",children:"Camera Error"}),b.jsx("p",{className:"text-sm",children:r}),b.jsx("button",{onClick:n,className:"mt-6 px-6 py-2 bg-slate-800 rounded border border-slate-700 text-white",children:"Close"})]}):b.jsxs("div",{className:"relative rounded-xl overflow-hidden border-2 border-slate-700 shadow-2xl bg-black",children:[b.jsx("div",{id:"reader",className:"w-full h-[400px] bg-black"}),b.jsx("div",{className:"absolute inset-0 pointer-events-none border-[30px] border-black/30"})]})}),b.jsx("p",{className:"text-slate-400 mt-8 text-sm font-medium text-center px-4",children:"Point camera at the HQ Session QR Code"})]}),document.body)},cw=()=>{const{connectionStatus:e,roomId:n,initializeReceiver:r,connectToReceiver:l,logs:d,sendMessage:f,cleanup:_,reconnect:x,peers:C,myColor:v,clearLogs:S}=zg(),[I,M]=Q.useState(""),[F,z]=Q.useState(""),[U,ue]=Q.useState("receiver"),[H,B]=Q.useState(!1),P=Q.useRef(null);Q.useEffect(()=>{var W;(W=P.current)==null||W.scrollIntoView({behavior:"smooth"})},[d]);const X=()=>{navigator.clipboard.writeText(n),alert("ID copied to clipboard!")},ae=()=>{r()},se=()=>{I&&l(I)},$=W=>{M(W),B(!1),l(W)},J=W=>{W.preventDefault(),F&&(f(F),z(""))},V=Object.keys(C).length;return b.jsxs("div",{className:"p-4 bg-slate-900 text-slate-100 rounded-lg shadow-md max-w-md mx-auto mt-4 border border-slate-800",children:[b.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-100",children:"P2P Connection Manager"}),b.jsxs("div",{className:"mb-4 flex flex-col gap-2",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("span",{className:`px-2 py-1 rounded text-sm font-semibold ${e==="connected"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/50":e==="connecting"?"bg-amber-500/20 text-amber-400 border border-amber-500/50":e==="reconnecting"?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-slate-800 text-slate-400 border border-slate-700"}`,children:["Status: ",e]}),e==="connected"&&b.jsxs("span",{className:"text-xs text-slate-400",children:["(",V," peer",V!==1?"s":"",")"]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"w-4 h-4 rounded-full border border-white/20",style:{backgroundColor:v},title:"My Color"}),e!=="disconnected"&&b.jsxs("div",{className:"flex gap-2",children:[e==="reconnecting"&&b.jsx("button",{onClick:x,className:"text-sm text-sky-400 hover:text-sky-300 underline",children:"Retry"}),b.jsx("button",{onClick:_,className:"text-sm text-rose-400 hover:text-rose-300 underline",children:"Disconnect"})]})]})]}),V>0&&b.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:Object.values(C).map(W=>b.jsxs("div",{className:"flex items-center gap-1 bg-slate-800 px-2 py-1 rounded border border-slate-700 text-xs",children:[b.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:W.color||"#ccc"}}),b.jsx("span",{className:"text-slate-300",title:W.id,children:W.id.substring(0,6)})]},W.id))})]}),b.jsxs("div",{className:"flex space-x-4 mb-6 border-b border-slate-700 pb-2",children:[b.jsx("button",{className:`pb-2 transition-colors ${U==="receiver"?"border-b-2 border-sky-500 font-bold text-sky-400":"text-slate-400 hover:text-slate-200"}`,onClick:()=>ue("receiver"),children:"Receiver (HQ)"}),b.jsx("button",{className:`pb-2 transition-colors ${U==="sender"?"border-b-2 border-sky-500 font-bold text-sky-400":"text-slate-400 hover:text-slate-200"}`,onClick:()=>ue("sender"),children:"Sender (Field)"})]}),U==="receiver"&&b.jsxs("div",{children:[b.jsx("button",{onClick:ae,className:"w-full bg-sky-600 text-white py-2 rounded hover:bg-sky-500 transition font-semibold mb-4",disabled:e!=="disconnected",children:e==="disconnected"?"Start Session":"Session Active"}),e==="connecting"&&!n&&b.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-500"}),b.jsx("p",{className:"text-slate-400 text-sm",children:"Initializing Session..."})]}),n&&b.jsxs("div",{className:"mt-4 space-y-4 animate-in fade-in slide-in-from-top-4 duration-300",children:[b.jsxs("div",{className:"bg-amber-500/10 p-3 rounded border border-amber-500/30 text-sm text-amber-200",children:["Share this ",b.jsx("strong",{children:"Session Code"})," with field agents"]}),b.jsx("div",{className:"flex justify-center bg-white p-4 rounded-lg",children:b.jsx(Mg,{value:n,size:192})}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("input",{readOnly:!0,value:n,className:"flex-1 p-2 text-center text-lg font-bold tracking-widest border border-slate-700 rounded bg-slate-950 text-sky-400 font-mono focus:outline-none"}),b.jsx("button",{onClick:X,className:"px-4 border border-slate-600 rounded hover:bg-slate-800 text-slate-300 transition",children:"Copy"})]})]})]}),U==="sender"&&b.jsxs("div",{children:[e==="disconnected"&&b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"bg-amber-500/10 p-3 rounded border border-amber-500/30 text-sm text-amber-200",children:["Enter the ",b.jsx("strong",{children:"Session Code"})," from HQ"]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("input",{placeholder:"Enter Code",value:I,onChange:W=>M(W.target.value.toUpperCase()),className:"flex-1 p-2 text-lg font-mono border border-slate-700 rounded bg-slate-950 text-slate-100 focus:border-sky-500 focus:outline-none"}),b.jsx("button",{onClick:()=>B(!0),className:"px-3 bg-slate-700 text-white rounded hover:bg-slate-600 transition",title:"Scan QR Code",children:""})]}),b.jsx("button",{onClick:se,className:"w-full bg-emerald-600 text-white py-2 rounded hover:bg-emerald-500 transition font-semibold disabled:opacity-50 disabled:cursor-not-allowed",disabled:!I,children:"Connect to HQ"})]}),e==="connecting"&&b.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-500"}),b.jsx("p",{className:"text-slate-400 text-sm",children:"Connecting to HQ..."})]})]}),H&&b.jsx(uw,{onScan:$,onClose:()=>B(!1)}),e==="connected"&&b.jsx("div",{className:"mt-4",children:b.jsxs("form",{onSubmit:J,className:"flex gap-2",children:[b.jsx("input",{type:"text",value:F,onChange:W=>z(W.target.value),placeholder:"Type a message...",className:"flex-1 border border-slate-700 bg-slate-950 text-slate-100 rounded px-2 py-1 focus:border-sky-500 focus:outline-none"}),b.jsx("button",{type:"submit",className:"bg-sky-600 text-white px-4 py-1 rounded hover:bg-sky-500 transition",children:"Send"})]})}),b.jsxs("div",{className:"mt-6 border-t border-slate-700 pt-2",children:[b.jsxs("div",{className:"flex items-center justify-between mb-1",children:[b.jsx("h3",{className:"text-xs font-bold text-slate-500",children:"Connection Logs"}),b.jsx("button",{onClick:S,className:"text-[10px] text-slate-500 hover:text-slate-300 underline",children:"Clear"})]}),b.jsxs("div",{className:"h-32 overflow-y-auto bg-slate-950 p-2 text-xs font-mono rounded border border-slate-800",children:[d.length===0&&b.jsx("span",{className:"text-slate-600",children:"No logs yet..."}),d.map((W,ee)=>{const oe=W.type==="message-received"||W.type==="message-sent",Z=W.type==="message-received"?"text-sky-400":W.type==="message-sent"?"text-emerald-400":W.type==="error"?"text-rose-400":"text-slate-400";return b.jsxs("div",{className:`${Z} ${oe?"font-bold":""}`,children:[b.jsxs("span",{className:"opacity-50 mr-2",children:["[",W.time,"]"]}),W.message]},ee)}),b.jsx("div",{ref:P})]})]})]})},hw=()=>{const{checkpoints:e,checkpointMap:n,routes:r,activeRouteId:l,selectedId:d,selectCheckpoint:f,addCheckpoint:_}=Lo(),[x,C]=Q.useState(null);Q.useEffect(()=>{!x&&l&&C(l)},[l,x]);const v=Q.useMemo(()=>{const Ne=x||l,Oe=r.find(He=>He.id===Ne);return Oe?Oe.items.map((He,Tt)=>{const Dt=n[He];return Dt?{id:Dt.id,label:Dt.name||`Point ${Tt+1}`,position:Dt.position}:null}).filter(Boolean):[]},[x,l,r,n]),S=Q.useMemo(()=>v.find(Ne=>Ne.id===d)??null,[v,d]),I=(S==null?void 0:S.position)??null,{heading:M,bearing:F,distance:z,geolocation:U,error:ue,needsPermission:H,isSupported:B,locationEnabled:P,hasLocationFix:X,isRequestingLocation:ae,requestPermission:se,startGeolocation:$}=Gy(I),{sendLocation:J,sendRoutes:V,connectionStatus:W,peers:ee}=zg(),oe=Q.useRef(0);Q.useEffect(()=>{if(W==="connected"&&U){const Ne=Date.now();Ne-oe.current>1e4&&(J(U),oe.current=Ne)}},[U,W,J]),Q.useEffect(()=>{if(W==="connected"){const Ne=r.map(Oe=>({...Oe,items:Oe.items.map(He=>n[He]).filter(Boolean)}));V(Ne)}},[W,r,n,V]);const Z=Q.useMemo(()=>v.filter(Ne=>Ne.id!==d).map(Ne=>{if(!U)return{...Ne,bearing:null,distance:null,relativeBearing:null};const Oe=vg(U,Ne.position),He=Cg(M,Oe);return{...Ne,bearing:Oe,distance:wg(U,Ne.position),relativeBearing:He??Oe}}),[U,v,d,M]),[te,G]=Q.useState(null),[me,fe]=Q.useState(!1),[ne,pe]=Q.useState(!1),[he,Ce]=Q.useState(0),[be,Ve]=Q.useState("degrees"),[ve,Re]=Q.useState("topo"),[ge,nt]=Q.useState("light"),[Be,Mt]=Q.useState(.58),[xn,xt]=Q.useState(null),[yt,Ke]=Q.useState(!1),Sn=Q.useRef(null),Yt=Q.useRef(!1),On=Q.useRef(null),[Pe,We]=Q.useState(!1),Ye=.32,Kt=.85,Te=Q.useCallback(Ne=>Math.min(Math.max(Ne,Ye),Kt),[Kt,Ye]),Pt=Q.useCallback(()=>{const Ne=$();return Ne&&Ce(Oe=>Oe+1),Ne},[$]),xr=Q.useCallback(()=>{Ve(Ne=>Ne==="degrees"?"mils":"degrees")},[]),dn=Q.useCallback(()=>{fe(Ne=>{const Oe=!Ne;return Oe&&(G(null),pe(!1)),Oe})},[]),Sr=Q.useCallback(()=>{pe(Ne=>{const Oe=!Ne;return Oe&&(G(null),fe(!1)),Oe})},[]),Et=Q.useCallback(Ne=>{G(Oe=>Oe===Ne?null:Ne),fe(!1),pe(!1),Mt(Oe=>Te(Oe))},[Te]),lr=Q.useCallback(()=>{Et("compass")},[Et]),Gn=Q.useCallback(()=>{Et("checkpoints")},[Et]),Lt=Q.useCallback(Ne=>{const Oe=Sn.current;if(!Oe)return;const{startY:He,startHeight:Tt}=Oe;if(window.innerHeight===0)return;const Dt=(He-Ne.clientY)/window.innerHeight,Ge=Math.abs(He-Ne.clientY);!Oe.moved&&Ge>6&&(Oe.moved=!0),Mt(Te(Tt+Dt))},[Te]),Xn=Q.useCallback(()=>{var Oe,He;const Ne=Sn.current;Ne!=null&&Ne.target&&Ne.pointerId!=null&&((He=(Oe=Ne.target).releasePointerCapture)==null||He.call(Oe,Ne.pointerId)),Sn.current=null,window.removeEventListener("pointermove",Lt),window.removeEventListener("pointerup",Xn),Ne&&!Ne.moved&&Ne.overlayId&&G(Tt=>Tt===Ne.overlayId?null:Tt)},[Lt,G]),bn=Q.useCallback(Ne=>{var Dt,Ge;if(window.innerHeight===0)return;Ne.preventDefault();const Oe=Ne.pointerId,He=Ne.clientY,Tt=Ne.currentTarget.dataset.overlayId??null;Sn.current={startY:He,startHeight:Be,pointerId:Oe,target:Ne.currentTarget,overlayId:Tt,moved:!1},(Ge=(Dt=Ne.currentTarget).setPointerCapture)==null||Ge.call(Dt,Oe),window.addEventListener("pointermove",Lt,{passive:!0}),window.addEventListener("pointerup",Xn,{passive:!0})},[Be,Lt,Xn]);Q.useEffect(()=>()=>{window.removeEventListener("pointermove",Lt),window.removeEventListener("pointerup",Xn)},[Lt,Xn]);const Bn=Q.useMemo(()=>({"--overlay-height":`${(Te(Be)*100).toFixed(2)}vh`,"--overlay-max-height":`${(Kt*100).toFixed(2)}vh`}),[Kt,Te,Be]);Q.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;window.matchMedia("(prefers-color-scheme: dark)").matches&&(Re(Oe=>Oe==="street"?"dark":Oe),nt("dark"))},[]),Q.useEffect(()=>{Pt()},[Pt]),Q.useEffect(()=>{On.current=U},[U]),Q.useEffect(()=>{if(!Yt.current){Yt.current=!0;return}P?Pt():On.current&&Ce(Ne=>Ne+1)},[ve,P,Pt]);const Ct=Q.useCallback(()=>{nt(Ne=>Ne==="light"?"dark":"light")},[]),Ie=Q.useCallback((Ne,Oe)=>{_(Oe)},[_]);return Q.useEffect(()=>{xt(null)},[e]),b.jsxs("div",{className:"relative viewport-safe bg-slate-950 text-slate-100",children:[b.jsx(Wy,{userLocation:U,peers:ee,userHeading:M,targets:Z,onEnableLocation:Pt,locationEnabled:P,hasLocationFix:X,isRequestingLocation:ae,locationRequestToken:he,baseLayer:ve,onBaseLayerChange:Re,onToggleMenu:dn,onOpenCompass:lr,onOpenRoute:Gn,toolbarTheme:ge,onToolbarThemeToggle:Ct,isMenuOpen:me,isSettingsOpen:ne,onToggleSettings:Sr,previewLocation:xn,onDropItem:Ie,hideToolbar:Pe}),!Pe&&te==="compass"&&b.jsxs("div",{className:"pointer-events-auto overlay-sheet fixed inset-x-0 bottom-0 z-[1300] mx-auto w-full max-w-md overflow-y-auto overscroll-contain rounded-t-3xl border border-slate-800 bg-slate-900 p-3 shadow-2xl shadow-slate-950/80 md:bottom-6 md:left-auto md:right-6 md:max-w-sm md:rounded-2xl",style:Bn,children:[b.jsx("div",{className:"mb-3 flex justify-center",children:b.jsx("button",{type:"button","data-overlay-id":"compass",className:"group flex h-12 w-full max-w-[220px] cursor-row-resize items-center justify-center rounded-full bg-slate-900 shadow-inner shadow-slate-950/40 ring-1 ring-slate-700/60 transition hover:ring-slate-500/80 active:bg-slate-800 touch-none","aria-label":"Drag to resize or tap to close panel",onPointerDown:bn,children:b.jsx("span",{className:"block h-2 w-16 rounded-full bg-slate-500 transition group-active:bg-slate-300"})})}),b.jsxs("div",{className:"mb-2 text-left text-[11px]",children:[b.jsx("p",{className:"font-semibold uppercase tracking-wide text-slate-500",children:"Compass"}),b.jsx("p",{className:"text-xs text-slate-400",children:"Heading & bearings"})]}),b.jsx(Yy,{heading:M,bearing:F,distance:z,error:ue,enableCompass:se,onEnableLocation:Pt,needsPermission:H,isSupported:B,locationEnabled:P,hasLocationFix:X,isRequestingLocation:ae,targets:Z,selectedTarget:S,onSelectTarget:f,bearingUnit:be,onToggleBearingUnit:xr,routes:r,activeRouteId:x,onSelectRoute:C})]}),!Pe&&te==="checkpoints"&&b.jsxs("div",{className:"pointer-events-auto overlay-sheet fixed inset-x-0 bottom-0 z-[1300] mx-auto w-full max-w-md overflow-y-auto overscroll-contain rounded-t-3xl border border-slate-800 bg-slate-900 p-3 shadow-2xl shadow-slate-950/80 md:left-6 md:right-auto md:top-6 md:max-w-xs md:rounded-2xl md:rounded-bl-none md:rounded-br-xl",style:Bn,children:[b.jsx("div",{className:"mb-3 flex justify-center",children:b.jsx("button",{type:"button","data-overlay-id":"checkpoints",className:"group flex h-12 w-full max-w-[220px] cursor-row-resize items-center justify-center rounded-full bg-slate-900 shadow-inner shadow-slate-950/40 ring-1 ring-slate-700/60 transition hover:ring-slate-500/80 active:bg-slate-800 touch-none","aria-label":"Drag to resize or tap to close panel",onPointerDown:bn,children:b.jsx("span",{className:"block h-2 w-16 rounded-full bg-slate-500 transition group-active:bg-slate-300"})})}),b.jsxs("div",{className:"mb-2 text-left text-[11px]",children:[b.jsx("p",{className:"font-semibold uppercase tracking-wide text-slate-500",children:"Route tools"}),b.jsx("p",{className:"text-xs text-slate-400",children:"Manage checkpoints"})]}),b.jsx(Qy,{onEnterPlacingMode:()=>We(!0)})]}),!Pe&&te==="grid"&&b.jsxs("div",{className:"pointer-events-auto overlay-sheet fixed inset-x-0 bottom-0 z-[1300] mx-auto w-full max-w-md overflow-y-auto overscroll-contain rounded-t-3xl border border-slate-800 bg-slate-900 p-3 shadow-2xl shadow-slate-950/80 md:left-auto md:right-6 md:top-6 md:max-w-md md:rounded-2xl",style:Bn,children:[b.jsx("div",{className:"mb-3 flex justify-center",children:b.jsx("button",{type:"button","data-overlay-id":"grid",className:"group flex h-12 w-full max-w-[220px] cursor-row-resize items-center justify-center rounded-full bg-slate-900 shadow-inner shadow-slate-950/40 ring-1 ring-slate-700/60 transition hover:ring-slate-500/80 active:bg-slate-800 touch-none","aria-label":"Drag to resize or tap to close panel",onPointerDown:bn,children:b.jsx("span",{className:"block h-2 w-16 rounded-full bg-slate-500 transition group-active:bg-slate-300"})})}),b.jsxs("div",{className:"mb-2 text-left text-[11px]",children:[b.jsx("p",{className:"font-semibold uppercase tracking-wide text-slate-500",children:"Grid tools"}),b.jsx("p",{className:"text-xs text-slate-400",children:"References & bearings"})]}),b.jsx(sv,{userLocation:U,selectedPosition:I,onPreviewLocationChange:xt})]}),!Pe&&te==="p2p"&&b.jsxs("div",{className:"pointer-events-auto overlay-sheet fixed inset-x-0 bottom-0 z-[1300] mx-auto w-full max-w-md overflow-y-auto overscroll-contain rounded-t-3xl border border-slate-800 bg-slate-900 p-3 shadow-2xl shadow-slate-950/80 md:left-auto md:right-6 md:top-6 md:max-w-md md:rounded-2xl",style:Bn,children:[b.jsx("div",{className:"mb-3 flex justify-center",children:b.jsx("button",{type:"button","data-overlay-id":"p2p",className:"group flex h-12 w-full max-w-[220px] cursor-row-resize items-center justify-center rounded-full bg-slate-900 shadow-inner shadow-slate-950/40 ring-1 ring-slate-700/60 transition hover:ring-slate-500/80 active:bg-slate-800 touch-none","aria-label":"Drag to resize or tap to close panel",onPointerDown:bn,children:b.jsx("span",{className:"block h-2 w-16 rounded-full bg-slate-500 transition group-active:bg-slate-300"})})}),b.jsxs("div",{className:"mb-2 text-left text-[11px]",children:[b.jsx("p",{className:"font-semibold uppercase tracking-wide text-slate-500",children:"P2P Connection"}),b.jsx("p",{className:"text-xs text-slate-400",children:"Share location & routes"})]}),b.jsx(cw,{})]}),!Pe&&me&&b.jsx("div",{className:"pointer-events-auto absolute inset-x-0 bottom-28 z-[1300] flex justify-center px-4 md:bottom-32",children:b.jsxs("div",{className:"w-full max-w-xs rounded-2xl border border-slate-800 bg-slate-950 p-3 text-[12px] text-slate-100 shadow-xl shadow-slate-950/80",children:[b.jsx("p",{className:"mb-2 text-[11px] font-semibold uppercase tracking-wide text-slate-400",children:"Navigate"}),b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsxs("button",{type:"button",className:`flex items-center justify-between rounded-lg border px-3 py-2 font-semibold transition ${te==="compass"?"border-sky-500 bg-sky-500 text-slate-950":"border-slate-700 bg-slate-900 hover:border-sky-500 hover:text-sky-100"}`,onClick:()=>Et("compass"),children:["Compass",b.jsx("span",{className:`text-[10px] ${te==="compass"?"text-slate-800":"text-slate-400"}`,children:"Heading"})]}),b.jsxs("button",{type:"button",className:`flex items-center justify-between rounded-lg border px-3 py-2 font-semibold transition ${te==="checkpoints"?"border-sky-500 bg-sky-500 text-slate-950":"border-slate-700 bg-slate-900 hover:border-sky-500 hover:text-sky-100"}`,onClick:()=>Et("checkpoints"),children:["Route",b.jsx("span",{className:`text-[10px] ${te==="checkpoints"?"text-slate-800":"text-slate-400"}`,children:"Checkpoints"})]}),b.jsxs("button",{type:"button",className:`flex items-center justify-between rounded-lg border px-3 py-2 font-semibold transition ${te==="grid"?"border-sky-500 bg-sky-500 text-slate-950":"border-slate-700 bg-slate-900 hover:border-sky-500 hover:text-sky-100"}`,onClick:()=>Et("grid"),children:["Grid",b.jsx("span",{className:`text-[10px] ${te==="grid"?"text-slate-800":"text-slate-400"}`,children:"Conversions"})]}),b.jsxs("button",{type:"button",className:`flex items-center justify-between rounded-lg border px-3 py-2 font-semibold transition ${te==="p2p"?"border-sky-500 bg-sky-500 text-slate-950":"border-slate-700 bg-slate-900 hover:border-sky-500 hover:text-sky-100"}`,onClick:()=>Et("p2p"),children:["P2P Share",b.jsx("span",{className:`text-[10px] ${te==="p2p"?"text-slate-800":"text-slate-400"}`,children:"Connect"})]})]}),b.jsx("p",{className:"mt-3 text-[11px] text-slate-400",children:"Choose a tool to open its overlay. Tap Menu again to close this panel."})]})}),Pe&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"absolute inset-x-0 bottom-8 z-[1400] flex justify-center pointer-events-none",children:b.jsx(av,{})}),b.jsxs("div",{className:"absolute top-4 right-4 z-[1400] flex gap-3",children:[b.jsx("button",{type:"button",className:"flex h-10 w-10 items-center justify-center rounded-full border border-slate-600 bg-slate-900 text-slate-200 shadow-lg transition hover:bg-slate-800",title:"Help",onClick:()=>Ke(!0),children:"?"}),b.jsx("button",{onClick:()=>We(!1),className:"flex h-10 w-10 items-center justify-center rounded-full border border-red-500/50 bg-red-900/40 text-red-200 shadow-lg backdrop-blur-sm transition hover:bg-red-900/60",title:"Exit Placing Mode",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"h-6 w-6",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),yt&&b.jsx("div",{className:"fixed inset-0 z-[1500] flex items-center justify-center bg-slate-950/60 p-4 backdrop-blur-sm",children:b.jsxs("div",{className:"w-full max-w-sm rounded-2xl border border-slate-700 bg-slate-900 p-6 shadow-2xl",children:[b.jsx("h3",{className:"mb-2 text-lg font-bold text-slate-100",children:"How placement works"}),b.jsxs("ul",{className:"mb-6 list-disc space-y-2 pl-5 text-sm text-slate-300",children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Drag & drop:"})," The single puck in the bottom toolbar matches your active route colour. Drag it onto the map to add a checkpoint to that route at the drop point."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Control the order:"})," In the Route panel, tap ",b.jsx("em",{children:"Insert Before"})," or ",b.jsx("em",{children:"Insert After"}),". The next checkpoint you drop will slot into that position; otherwise its appended to the end."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Grid & projections:"})," Use the Grid Tools to resolve or project a coordinate. Drop the puck onto the magenta preview marker to capture that exact location."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Edit or move:"})," Drag any existing checkpoint marker to fine-tune its location, or use the accordion controls to rename, recolour, or delete it."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Exit placement:"})," Tap the red X button in the top-right corner when youre done."]})]}),b.jsx("button",{onClick:()=>Ke(!1),className:"w-full rounded-lg bg-sky-600 py-2.5 text-sm font-semibold text-white transition hover:bg-sky-500",children:"Got it"})]})})]})},dw=()=>b.jsx(hw,{});b_.polyfill({dragImageTranslateOverride:I_.scrollBehaviourDragImageTranslateOverride});window.addEventListener("touchmove",()=>{},{passive:!1});Ic.createRoot(document.getElementById("root")).render(b.jsx(Gt.StrictMode,{children:b.jsx(dw,{})}));
