function bg(e,n){for(var s=0;s<n.length;s++){const u=n[s];if(typeof u!="string"&&!Array.isArray(u)){for(const d in u)if(d!=="default"&&!(d in e)){const f=Object.getOwnPropertyDescriptor(u,d);f&&Object.defineProperty(e,d,f.get?f:{enumerable:!0,get:()=>u[d]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const w of f.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&u(w)}).observe(document,{childList:!0,subtree:!0});function s(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(d){if(d.ep)return;d.ep=!0;const f=s(d);fetch(d.href,f)}})();var iu=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function su(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w1={exports:{}},ou={},y1={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pa=Symbol.for("react.element"),Tg=Symbol.for("react.portal"),Ng=Symbol.for("react.fragment"),Og=Symbol.for("react.strict_mode"),Rg=Symbol.for("react.profiler"),kg=Symbol.for("react.provider"),Mg=Symbol.for("react.context"),Pg=Symbol.for("react.forward_ref"),Lg=Symbol.for("react.suspense"),Dg=Symbol.for("react.memo"),Bg=Symbol.for("react.lazy"),Md=Symbol.iterator;function Fg(e){return e===null||typeof e!="object"?null:(e=Md&&e[Md]||e["@@iterator"],typeof e=="function"?e:null)}var _1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C1=Object.assign,E1={};function Io(e,n,s){this.props=e,this.context=n,this.refs=E1,this.updater=s||_1}Io.prototype.isReactComponent={};Io.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};Io.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function A1(){}A1.prototype=Io.prototype;function gh(e,n,s){this.props=e,this.context=n,this.refs=E1,this.updater=s||_1}var mh=gh.prototype=new A1;mh.constructor=gh;C1(mh,Io.prototype);mh.isPureReactComponent=!0;var Pd=Array.isArray,x1=Object.prototype.hasOwnProperty,vh={current:null},S1={key:!0,ref:!0,__self:!0,__source:!0};function I1(e,n,s){var u,d={},f=null,w=null;if(n!=null)for(u in n.ref!==void 0&&(w=n.ref),n.key!==void 0&&(f=""+n.key),n)x1.call(n,u)&&!S1.hasOwnProperty(u)&&(d[u]=n[u]);var A=arguments.length-2;if(A===1)d.children=s;else if(1<A){for(var C=Array(A),v=0;v<A;v++)C[v]=arguments[v+2];d.children=C}if(e&&e.defaultProps)for(u in A=e.defaultProps,A)d[u]===void 0&&(d[u]=A[u]);return{$$typeof:Pa,type:e,key:f,ref:w,props:d,_owner:vh.current}}function jg(e,n){return{$$typeof:Pa,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function wh(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pa}function zg(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return n[s]})}var Ld=/\/+/g;function Pu(e,n){return typeof e=="object"&&e!==null&&e.key!=null?zg(""+e.key):n.toString(36)}function gl(e,n,s,u,d){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var w=!1;if(e===null)w=!0;else switch(f){case"string":case"number":w=!0;break;case"object":switch(e.$$typeof){case Pa:case Tg:w=!0}}if(w)return w=e,d=d(w),e=u===""?"."+Pu(w,0):u,Pd(d)?(s="",e!=null&&(s=e.replace(Ld,"$&/")+"/"),gl(d,n,s,"",function(v){return v})):d!=null&&(wh(d)&&(d=jg(d,s+(!d.key||w&&w.key===d.key?"":(""+d.key).replace(Ld,"$&/")+"/")+e)),n.push(d)),1;if(w=0,u=u===""?".":u+":",Pd(e))for(var A=0;A<e.length;A++){f=e[A];var C=u+Pu(f,A);w+=gl(f,n,s,C,d)}else if(C=Fg(e),typeof C=="function")for(e=C.call(e),A=0;!(f=e.next()).done;)f=f.value,C=u+Pu(f,A++),w+=gl(f,n,s,C,d);else if(f==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return w}function Qa(e,n,s){if(e==null)return e;var u=[],d=0;return gl(e,u,"","",function(f){return n.call(s,f,d++)}),u}function Ug(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var rr={current:null},ml={transition:null},Hg={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:ml,ReactCurrentOwner:vh};function b1(){throw Error("act(...) is not supported in production builds of React.")}ut.Children={map:Qa,forEach:function(e,n,s){Qa(e,function(){n.apply(this,arguments)},s)},count:function(e){var n=0;return Qa(e,function(){n++}),n},toArray:function(e){return Qa(e,function(n){return n})||[]},only:function(e){if(!wh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ut.Component=Io;ut.Fragment=Ng;ut.Profiler=Rg;ut.PureComponent=gh;ut.StrictMode=Og;ut.Suspense=Lg;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hg;ut.act=b1;ut.cloneElement=function(e,n,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var u=C1({},e.props),d=e.key,f=e.ref,w=e._owner;if(n!=null){if(n.ref!==void 0&&(f=n.ref,w=vh.current),n.key!==void 0&&(d=""+n.key),e.type&&e.type.defaultProps)var A=e.type.defaultProps;for(C in n)x1.call(n,C)&&!S1.hasOwnProperty(C)&&(u[C]=n[C]===void 0&&A!==void 0?A[C]:n[C])}var C=arguments.length-2;if(C===1)u.children=s;else if(1<C){A=Array(C);for(var v=0;v<C;v++)A[v]=arguments[v+2];u.children=A}return{$$typeof:Pa,type:e.type,key:d,ref:f,props:u,_owner:w}};ut.createContext=function(e){return e={$$typeof:Mg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kg,_context:e},e.Consumer=e};ut.createElement=I1;ut.createFactory=function(e){var n=I1.bind(null,e);return n.type=e,n};ut.createRef=function(){return{current:null}};ut.forwardRef=function(e){return{$$typeof:Pg,render:e}};ut.isValidElement=wh;ut.lazy=function(e){return{$$typeof:Bg,_payload:{_status:-1,_result:e},_init:Ug}};ut.memo=function(e,n){return{$$typeof:Dg,type:e,compare:n===void 0?null:n}};ut.startTransition=function(e){var n=ml.transition;ml.transition={};try{e()}finally{ml.transition=n}};ut.unstable_act=b1;ut.useCallback=function(e,n){return rr.current.useCallback(e,n)};ut.useContext=function(e){return rr.current.useContext(e)};ut.useDebugValue=function(){};ut.useDeferredValue=function(e){return rr.current.useDeferredValue(e)};ut.useEffect=function(e,n){return rr.current.useEffect(e,n)};ut.useId=function(){return rr.current.useId()};ut.useImperativeHandle=function(e,n,s){return rr.current.useImperativeHandle(e,n,s)};ut.useInsertionEffect=function(e,n){return rr.current.useInsertionEffect(e,n)};ut.useLayoutEffect=function(e,n){return rr.current.useLayoutEffect(e,n)};ut.useMemo=function(e,n){return rr.current.useMemo(e,n)};ut.useReducer=function(e,n,s){return rr.current.useReducer(e,n,s)};ut.useRef=function(e){return rr.current.useRef(e)};ut.useState=function(e){return rr.current.useState(e)};ut.useSyncExternalStore=function(e,n,s){return rr.current.useSyncExternalStore(e,n,s)};ut.useTransition=function(){return rr.current.useTransition()};ut.version="18.3.1";y1.exports=ut;var K=y1.exports;const Vt=su(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg=K,Wg=Symbol.for("react.element"),Zg=Symbol.for("react.fragment"),Gg=Object.prototype.hasOwnProperty,Xg=Vg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yg={key:!0,ref:!0,__self:!0,__source:!0};function T1(e,n,s){var u,d={},f=null,w=null;s!==void 0&&(f=""+s),n.key!==void 0&&(f=""+n.key),n.ref!==void 0&&(w=n.ref);for(u in n)Gg.call(n,u)&&!Yg.hasOwnProperty(u)&&(d[u]=n[u]);if(e&&e.defaultProps)for(u in n=e.defaultProps,n)d[u]===void 0&&(d[u]=n[u]);return{$$typeof:Wg,type:e,key:f,ref:w,props:d,_owner:Xg.current}}ou.Fragment=Zg;ou.jsx=T1;ou.jsxs=T1;w1.exports=ou;var I=w1.exports,hc={},N1={exports:{}},Nr={},O1={exports:{}},R1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(te,pe){var ae=te.length;te.push(pe);e:for(;0<ae;){var Ae=ae-1>>>1,Ne=te[Ae];if(0<d(Ne,pe))te[Ae]=pe,te[ae]=Ne,ae=Ae;else break e}}function s(te){return te.length===0?null:te[0]}function u(te){if(te.length===0)return null;var pe=te[0],ae=te.pop();if(ae!==pe){te[0]=ae;e:for(var Ae=0,Ne=te.length,Ce=Ne>>>1;Ae<Ce;){var ye=2*(Ae+1)-1,Re=te[ye],ge=ye+1,dt=te[ge];if(0>d(Re,ae))ge<Ne&&0>d(dt,Re)?(te[Ae]=dt,te[ge]=ae,Ae=ge):(te[Ae]=Re,te[ye]=ae,Ae=ye);else if(ge<Ne&&0>d(dt,ae))te[Ae]=dt,te[ge]=ae,Ae=ge;else break e}}return pe}function d(te,pe){var ae=te.sortIndex-pe.sortIndex;return ae!==0?ae:te.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var w=Date,A=w.now();e.unstable_now=function(){return w.now()-A}}var C=[],v=[],S=1,b=null,R=3,z=!1,V=!1,W=!1,se=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(te){for(var pe=s(v);pe!==null;){if(pe.callback===null)u(v);else if(pe.startTime<=te)u(v),pe.sortIndex=pe.expirationTime,n(C,pe);else break;pe=s(v)}}function H(te){if(W=!1,T(te),!V)if(s(C)!==null)V=!0,_e(q);else{var pe=s(v);pe!==null&&fe(H,pe.startTime-te)}}function q(te,pe){V=!1,W&&(W=!1,B(Z),Z=-1),z=!0;var ae=R;try{for(T(pe),b=s(C);b!==null&&(!(b.expirationTime>pe)||te&&!re());){var Ae=b.callback;if(typeof Ae=="function"){b.callback=null,R=b.priorityLevel;var Ne=Ae(b.expirationTime<=pe);pe=e.unstable_now(),typeof Ne=="function"?b.callback=Ne:b===s(C)&&u(C),T(pe)}else u(C);b=s(C)}if(b!==null)var Ce=!0;else{var ye=s(v);ye!==null&&fe(H,ye.startTime-pe),Ce=!1}return Ce}finally{b=null,R=ae,z=!1}}var X=!1,U=null,Z=-1,G=5,oe=-1;function re(){return!(e.unstable_now()-oe<G)}function de(){if(U!==null){var te=e.unstable_now();oe=te;var pe=!0;try{pe=U(!0,te)}finally{pe?ee():(X=!1,U=null)}}else X=!1}var ee;if(typeof k=="function")ee=function(){k(de)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,Q=le.port2;le.port1.onmessage=de,ee=function(){Q.postMessage(null)}}else ee=function(){se(de,0)};function _e(te){U=te,X||(X=!0,ee())}function fe(te,pe){Z=se(function(){te(e.unstable_now())},pe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){V||z||(V=!0,_e(q))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return s(C)},e.unstable_next=function(te){switch(R){case 1:case 2:case 3:var pe=3;break;default:pe=R}var ae=R;R=pe;try{return te()}finally{R=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,pe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ae=R;R=te;try{return pe()}finally{R=ae}},e.unstable_scheduleCallback=function(te,pe,ae){var Ae=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Ae+ae:Ae):ae=Ae,te){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=ae+Ne,te={id:S++,callback:pe,priorityLevel:te,startTime:ae,expirationTime:Ne,sortIndex:-1},ae>Ae?(te.sortIndex=ae,n(v,te),s(C)===null&&te===s(v)&&(W?(B(Z),Z=-1):W=!0,fe(H,ae-Ae))):(te.sortIndex=Ne,n(C,te),V||z||(V=!0,_e(q))),te},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(te){var pe=R;return function(){var ae=R;R=pe;try{return te.apply(this,arguments)}finally{R=ae}}}})(R1);O1.exports=R1;var Kg=O1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg=K,Tr=Kg;function Te(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k1=new Set,ga={};function js(e,n){wo(e,n),wo(e+"Capture",n)}function wo(e,n){for(ga[e]=n,e=0;e<n.length;e++)k1.add(n[e])}var Fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dc=Object.prototype.hasOwnProperty,$g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dd={},Bd={};function qg(e){return dc.call(Bd,e)?!0:dc.call(Dd,e)?!1:$g.test(e)?Bd[e]=!0:(Dd[e]=!0,!1)}function Jg(e,n,s,u){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return u?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function em(e,n,s,u){if(n===null||typeof n>"u"||Jg(e,n,s,u))return!0;if(u)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function ir(e,n,s,u,d,f,w){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=f,this.removeEmptyString=w}var Pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pn[e]=new ir(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Pn[n]=new ir(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pn[e]=new ir(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pn[e]=new ir(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pn[e]=new ir(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pn[e]=new ir(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pn[e]=new ir(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pn[e]=new ir(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pn[e]=new ir(e,5,!1,e.toLowerCase(),null,!1,!1)});var yh=/[\-:]([a-z])/g;function _h(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(yh,_h);Pn[n]=new ir(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(yh,_h);Pn[n]=new ir(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(yh,_h);Pn[n]=new ir(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pn[e]=new ir(e,1,!1,e.toLowerCase(),null,!1,!1)});Pn.xlinkHref=new ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pn[e]=new ir(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ch(e,n,s,u){var d=Pn.hasOwnProperty(n)?Pn[n]:null;(d!==null?d.type!==0:u||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(em(n,s,d,u)&&(s=null),u||d===null?qg(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):d.mustUseProperty?e[d.propertyName]=s===null?d.type===3?!1:"":s:(n=d.attributeName,u=d.attributeNamespace,s===null?e.removeAttribute(n):(d=d.type,s=d===3||d===4&&s===!0?"":""+s,u?e.setAttributeNS(u,n,s):e.setAttribute(n,s))))}var Hi=Qg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$a=Symbol.for("react.element"),Qs=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),Eh=Symbol.for("react.strict_mode"),fc=Symbol.for("react.profiler"),M1=Symbol.for("react.provider"),P1=Symbol.for("react.context"),Ah=Symbol.for("react.forward_ref"),pc=Symbol.for("react.suspense"),gc=Symbol.for("react.suspense_list"),xh=Symbol.for("react.memo"),Ji=Symbol.for("react.lazy"),L1=Symbol.for("react.offscreen"),Fd=Symbol.iterator;function Vo(e){return e===null||typeof e!="object"?null:(e=Fd&&e[Fd]||e["@@iterator"],typeof e=="function"?e:null)}var $t=Object.assign,Lu;function ea(e){if(Lu===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Lu=n&&n[1]||""}return`
`+Lu+e}var Du=!1;function Bu(e,n){if(!e||Du)return"";Du=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(v){var u=v}Reflect.construct(e,[],n)}else{try{n.call()}catch(v){u=v}e.call(n.prototype)}else{try{throw Error()}catch(v){u=v}e()}}catch(v){if(v&&u&&typeof v.stack=="string"){for(var d=v.stack.split(`
`),f=u.stack.split(`
`),w=d.length-1,A=f.length-1;1<=w&&0<=A&&d[w]!==f[A];)A--;for(;1<=w&&0<=A;w--,A--)if(d[w]!==f[A]){if(w!==1||A!==1)do if(w--,A--,0>A||d[w]!==f[A]){var C=`
`+d[w].replace(" at new "," at ");return e.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",e.displayName)),C}while(1<=w&&0<=A);break}}}finally{Du=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?ea(e):""}function tm(e){switch(e.tag){case 5:return ea(e.type);case 16:return ea("Lazy");case 13:return ea("Suspense");case 19:return ea("SuspenseList");case 0:case 2:case 15:return e=Bu(e.type,!1),e;case 11:return e=Bu(e.type.render,!1),e;case 1:return e=Bu(e.type,!0),e;default:return""}}function mc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $s:return"Fragment";case Qs:return"Portal";case fc:return"Profiler";case Eh:return"StrictMode";case pc:return"Suspense";case gc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case P1:return(e.displayName||"Context")+".Consumer";case M1:return(e._context.displayName||"Context")+".Provider";case Ah:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xh:return n=e.displayName||null,n!==null?n:mc(e.type)||"Memo";case Ji:n=e._payload,e=e._init;try{return mc(e(n))}catch{}}return null}function nm(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mc(n);case 8:return n===Eh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function fs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function D1(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function rm(e){var n=D1(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),u=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,f=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(w){u=""+w,f.call(this,w)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function qa(e){e._valueTracker||(e._valueTracker=rm(e))}function B1(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),u="";return e&&(u=D1(e)?e.checked?"true":"false":e.value),e=u,e!==s?(n.setValue(e),!0):!1}function Nl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vc(e,n){var s=n.checked;return $t({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function jd(e,n){var s=n.defaultValue==null?"":n.defaultValue,u=n.checked!=null?n.checked:n.defaultChecked;s=fs(n.value!=null?n.value:s),e._wrapperState={initialChecked:u,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function F1(e,n){n=n.checked,n!=null&&Ch(e,"checked",n,!1)}function wc(e,n){F1(e,n);var s=fs(n.value),u=n.type;if(s!=null)u==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?yc(e,n.type,s):n.hasOwnProperty("defaultValue")&&yc(e,n.type,fs(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function zd(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var u=n.type;if(!(u!=="submit"&&u!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function yc(e,n,s){(n!=="number"||Nl(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var ta=Array.isArray;function co(e,n,s,u){if(e=e.options,n){n={};for(var d=0;d<s.length;d++)n["$"+s[d]]=!0;for(s=0;s<e.length;s++)d=n.hasOwnProperty("$"+e[s].value),e[s].selected!==d&&(e[s].selected=d),d&&u&&(e[s].defaultSelected=!0)}else{for(s=""+fs(s),n=null,d=0;d<e.length;d++){if(e[d].value===s){e[d].selected=!0,u&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function _c(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(Te(91));return $t({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ud(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(Te(92));if(ta(s)){if(1<s.length)throw Error(Te(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:fs(s)}}function j1(e,n){var s=fs(n.value),u=fs(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),u!=null&&(e.defaultValue=""+u)}function Hd(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function z1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cc(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?z1(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ja,U1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,u,d){MSApp.execUnsafeLocalFunction(function(){return e(n,s,u,d)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Ja=Ja||document.createElement("div"),Ja.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Ja.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function ma(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},im=["Webkit","ms","Moz","O"];Object.keys(ia).forEach(function(e){im.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),ia[n]=ia[e]})});function H1(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||ia.hasOwnProperty(e)&&ia[e]?(""+n).trim():n+"px"}function V1(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var u=s.indexOf("--")===0,d=H1(s,n[s],u);s==="float"&&(s="cssFloat"),u?e.setProperty(s,d):e[s]=d}}var sm=$t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ec(e,n){if(n){if(sm[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(Te(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(Te(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(Te(61))}if(n.style!=null&&typeof n.style!="object")throw Error(Te(62))}}function Ac(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xc=null;function Sh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sc=null,ho=null,fo=null;function Vd(e){if(e=Ba(e)){if(typeof Sc!="function")throw Error(Te(280));var n=e.stateNode;n&&(n=hu(n),Sc(e.stateNode,e.type,n))}}function W1(e){ho?fo?fo.push(e):fo=[e]:ho=e}function Z1(){if(ho){var e=ho,n=fo;if(fo=ho=null,Vd(e),n)for(e=0;e<n.length;e++)Vd(n[e])}}function G1(e,n){return e(n)}function X1(){}var Fu=!1;function Y1(e,n,s){if(Fu)return e(n,s);Fu=!0;try{return G1(e,n,s)}finally{Fu=!1,(ho!==null||fo!==null)&&(X1(),Z1())}}function va(e,n){var s=e.stateNode;if(s===null)return null;var u=hu(s);if(u===null)return null;s=u[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(Te(231,n,typeof s));return s}var Ic=!1;if(Fi)try{var Wo={};Object.defineProperty(Wo,"passive",{get:function(){Ic=!0}}),window.addEventListener("test",Wo,Wo),window.removeEventListener("test",Wo,Wo)}catch{Ic=!1}function om(e,n,s,u,d,f,w,A,C){var v=Array.prototype.slice.call(arguments,3);try{n.apply(s,v)}catch(S){this.onError(S)}}var sa=!1,Ol=null,Rl=!1,bc=null,am={onError:function(e){sa=!0,Ol=e}};function lm(e,n,s,u,d,f,w,A,C){sa=!1,Ol=null,om.apply(am,arguments)}function um(e,n,s,u,d,f,w,A,C){if(lm.apply(this,arguments),sa){if(sa){var v=Ol;sa=!1,Ol=null}else throw Error(Te(198));Rl||(Rl=!0,bc=v)}}function zs(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function K1(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Wd(e){if(zs(e)!==e)throw Error(Te(188))}function cm(e){var n=e.alternate;if(!n){if(n=zs(e),n===null)throw Error(Te(188));return n!==e?null:e}for(var s=e,u=n;;){var d=s.return;if(d===null)break;var f=d.alternate;if(f===null){if(u=d.return,u!==null){s=u;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===s)return Wd(d),e;if(f===u)return Wd(d),n;f=f.sibling}throw Error(Te(188))}if(s.return!==u.return)s=d,u=f;else{for(var w=!1,A=d.child;A;){if(A===s){w=!0,s=d,u=f;break}if(A===u){w=!0,u=d,s=f;break}A=A.sibling}if(!w){for(A=f.child;A;){if(A===s){w=!0,s=f,u=d;break}if(A===u){w=!0,u=f,s=d;break}A=A.sibling}if(!w)throw Error(Te(189))}}if(s.alternate!==u)throw Error(Te(190))}if(s.tag!==3)throw Error(Te(188));return s.stateNode.current===s?e:n}function Q1(e){return e=cm(e),e!==null?$1(e):null}function $1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=$1(e);if(n!==null)return n;e=e.sibling}return null}var q1=Tr.unstable_scheduleCallback,Zd=Tr.unstable_cancelCallback,hm=Tr.unstable_shouldYield,dm=Tr.unstable_requestPaint,dn=Tr.unstable_now,fm=Tr.unstable_getCurrentPriorityLevel,Ih=Tr.unstable_ImmediatePriority,J1=Tr.unstable_UserBlockingPriority,kl=Tr.unstable_NormalPriority,pm=Tr.unstable_LowPriority,e0=Tr.unstable_IdlePriority,au=null,Ai=null;function gm(e){if(Ai&&typeof Ai.onCommitFiberRoot=="function")try{Ai.onCommitFiberRoot(au,e,void 0,(e.current.flags&128)===128)}catch{}}var oi=Math.clz32?Math.clz32:wm,mm=Math.log,vm=Math.LN2;function wm(e){return e>>>=0,e===0?32:31-(mm(e)/vm|0)|0}var el=64,tl=4194304;function na(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ml(e,n){var s=e.pendingLanes;if(s===0)return 0;var u=0,d=e.suspendedLanes,f=e.pingedLanes,w=s&268435455;if(w!==0){var A=w&~d;A!==0?u=na(A):(f&=w,f!==0&&(u=na(f)))}else w=s&~d,w!==0?u=na(w):f!==0&&(u=na(f));if(u===0)return 0;if(n!==0&&n!==u&&!(n&d)&&(d=u&-u,f=n&-n,d>=f||d===16&&(f&4194240)!==0))return n;if(u&4&&(u|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=u;0<n;)s=31-oi(n),d=1<<s,u|=e[s],n&=~d;return u}function ym(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _m(e,n){for(var s=e.suspendedLanes,u=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var w=31-oi(f),A=1<<w,C=d[w];C===-1?(!(A&s)||A&u)&&(d[w]=ym(A,n)):C<=n&&(e.expiredLanes|=A),f&=~A}}function Tc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function t0(){var e=el;return el<<=1,!(el&4194240)&&(el=64),e}function ju(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function La(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-oi(n),e[n]=s}function Cm(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var u=e.eventTimes;for(e=e.expirationTimes;0<s;){var d=31-oi(s),f=1<<d;n[d]=0,u[d]=-1,e[d]=-1,s&=~f}}function bh(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var u=31-oi(s),d=1<<u;d&n|e[u]&n&&(e[u]|=n),s&=~d}}var It=0;function n0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var r0,Th,i0,s0,o0,Nc=!1,nl=[],ss=null,os=null,as=null,wa=new Map,ya=new Map,ts=[],Em="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gd(e,n){switch(e){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":wa.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ya.delete(n.pointerId)}}function Zo(e,n,s,u,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:s,eventSystemFlags:u,nativeEvent:f,targetContainers:[d]},n!==null&&(n=Ba(n),n!==null&&Th(n)),e):(e.eventSystemFlags|=u,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function Am(e,n,s,u,d){switch(n){case"focusin":return ss=Zo(ss,e,n,s,u,d),!0;case"dragenter":return os=Zo(os,e,n,s,u,d),!0;case"mouseover":return as=Zo(as,e,n,s,u,d),!0;case"pointerover":var f=d.pointerId;return wa.set(f,Zo(wa.get(f)||null,e,n,s,u,d)),!0;case"gotpointercapture":return f=d.pointerId,ya.set(f,Zo(ya.get(f)||null,e,n,s,u,d)),!0}return!1}function a0(e){var n=bs(e.target);if(n!==null){var s=zs(n);if(s!==null){if(n=s.tag,n===13){if(n=K1(s),n!==null){e.blockedOn=n,o0(e.priority,function(){i0(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Oc(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var u=new s.constructor(s.type,s);xc=u,s.target.dispatchEvent(u),xc=null}else return n=Ba(s),n!==null&&Th(n),e.blockedOn=s,!1;n.shift()}return!0}function Xd(e,n,s){vl(e)&&s.delete(n)}function xm(){Nc=!1,ss!==null&&vl(ss)&&(ss=null),os!==null&&vl(os)&&(os=null),as!==null&&vl(as)&&(as=null),wa.forEach(Xd),ya.forEach(Xd)}function Go(e,n){e.blockedOn===n&&(e.blockedOn=null,Nc||(Nc=!0,Tr.unstable_scheduleCallback(Tr.unstable_NormalPriority,xm)))}function _a(e){function n(d){return Go(d,e)}if(0<nl.length){Go(nl[0],e);for(var s=1;s<nl.length;s++){var u=nl[s];u.blockedOn===e&&(u.blockedOn=null)}}for(ss!==null&&Go(ss,e),os!==null&&Go(os,e),as!==null&&Go(as,e),wa.forEach(n),ya.forEach(n),s=0;s<ts.length;s++)u=ts[s],u.blockedOn===e&&(u.blockedOn=null);for(;0<ts.length&&(s=ts[0],s.blockedOn===null);)a0(s),s.blockedOn===null&&ts.shift()}var po=Hi.ReactCurrentBatchConfig,Pl=!0;function Sm(e,n,s,u){var d=It,f=po.transition;po.transition=null;try{It=1,Nh(e,n,s,u)}finally{It=d,po.transition=f}}function Im(e,n,s,u){var d=It,f=po.transition;po.transition=null;try{It=4,Nh(e,n,s,u)}finally{It=d,po.transition=f}}function Nh(e,n,s,u){if(Pl){var d=Oc(e,n,s,u);if(d===null)Ku(e,n,u,Ll,s),Gd(e,u);else if(Am(d,e,n,s,u))u.stopPropagation();else if(Gd(e,u),n&4&&-1<Em.indexOf(e)){for(;d!==null;){var f=Ba(d);if(f!==null&&r0(f),f=Oc(e,n,s,u),f===null&&Ku(e,n,u,Ll,s),f===d)break;d=f}d!==null&&u.stopPropagation()}else Ku(e,n,u,null,s)}}var Ll=null;function Oc(e,n,s,u){if(Ll=null,e=Sh(u),e=bs(e),e!==null)if(n=zs(e),n===null)e=null;else if(s=n.tag,s===13){if(e=K1(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Ll=e,null}function l0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fm()){case Ih:return 1;case J1:return 4;case kl:case pm:return 16;case e0:return 536870912;default:return 16}default:return 16}}var rs=null,Oh=null,wl=null;function u0(){if(wl)return wl;var e,n=Oh,s=n.length,u,d="value"in rs?rs.value:rs.textContent,f=d.length;for(e=0;e<s&&n[e]===d[e];e++);var w=s-e;for(u=1;u<=w&&n[s-u]===d[f-u];u++);return wl=d.slice(e,1<u?1-u:void 0)}function yl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function rl(){return!0}function Yd(){return!1}function Or(e){function n(s,u,d,f,w){this._reactName=s,this._targetInst=d,this.type=u,this.nativeEvent=f,this.target=w,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(s=e[A],this[A]=s?s(f):f[A]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?rl:Yd,this.isPropagationStopped=Yd,this}return $t(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=rl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=rl)},persist:function(){},isPersistent:rl}),n}var bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rh=Or(bo),Da=$t({},bo,{view:0,detail:0}),bm=Or(Da),zu,Uu,Xo,lu=$t({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xo&&(Xo&&e.type==="mousemove"?(zu=e.screenX-Xo.screenX,Uu=e.screenY-Xo.screenY):Uu=zu=0,Xo=e),zu)},movementY:function(e){return"movementY"in e?e.movementY:Uu}}),Kd=Or(lu),Tm=$t({},lu,{dataTransfer:0}),Nm=Or(Tm),Om=$t({},Da,{relatedTarget:0}),Hu=Or(Om),Rm=$t({},bo,{animationName:0,elapsedTime:0,pseudoElement:0}),km=Or(Rm),Mm=$t({},bo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pm=Or(Mm),Lm=$t({},bo,{data:0}),Qd=Or(Lm),Dm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jm(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Fm[e])?!!n[e]:!1}function kh(){return jm}var zm=$t({},Da,{key:function(e){if(e.key){var n=Dm[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=yl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kh,charCode:function(e){return e.type==="keypress"?yl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Um=Or(zm),Hm=$t({},lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$d=Or(Hm),Vm=$t({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kh}),Wm=Or(Vm),Zm=$t({},bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gm=Or(Zm),Xm=$t({},lu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ym=Or(Xm),Km=[9,13,27,32],Mh=Fi&&"CompositionEvent"in window,oa=null;Fi&&"documentMode"in document&&(oa=document.documentMode);var Qm=Fi&&"TextEvent"in window&&!oa,c0=Fi&&(!Mh||oa&&8<oa&&11>=oa),qd=" ",Jd=!1;function h0(e,n){switch(e){case"keyup":return Km.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qs=!1;function $m(e,n){switch(e){case"compositionend":return d0(n);case"keypress":return n.which!==32?null:(Jd=!0,qd);case"textInput":return e=n.data,e===qd&&Jd?null:e;default:return null}}function qm(e,n){if(qs)return e==="compositionend"||!Mh&&h0(e,n)?(e=u0(),wl=Oh=rs=null,qs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return c0&&n.locale!=="ko"?null:n.data;default:return null}}var Jm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ef(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Jm[e.type]:n==="textarea"}function f0(e,n,s,u){W1(u),n=Dl(n,"onChange"),0<n.length&&(s=new Rh("onChange","change",null,s,u),e.push({event:s,listeners:n}))}var aa=null,Ca=null;function e2(e){x0(e,0)}function uu(e){var n=to(e);if(B1(n))return e}function t2(e,n){if(e==="change")return n}var p0=!1;if(Fi){var Vu;if(Fi){var Wu="oninput"in document;if(!Wu){var tf=document.createElement("div");tf.setAttribute("oninput","return;"),Wu=typeof tf.oninput=="function"}Vu=Wu}else Vu=!1;p0=Vu&&(!document.documentMode||9<document.documentMode)}function nf(){aa&&(aa.detachEvent("onpropertychange",g0),Ca=aa=null)}function g0(e){if(e.propertyName==="value"&&uu(Ca)){var n=[];f0(n,Ca,e,Sh(e)),Y1(e2,n)}}function n2(e,n,s){e==="focusin"?(nf(),aa=n,Ca=s,aa.attachEvent("onpropertychange",g0)):e==="focusout"&&nf()}function r2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uu(Ca)}function i2(e,n){if(e==="click")return uu(n)}function s2(e,n){if(e==="input"||e==="change")return uu(n)}function o2(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var li=typeof Object.is=="function"?Object.is:o2;function Ea(e,n){if(li(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),u=Object.keys(n);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var d=s[u];if(!dc.call(n,d)||!li(e[d],n[d]))return!1}return!0}function rf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sf(e,n){var s=rf(e);e=0;for(var u;s;){if(s.nodeType===3){if(u=e+s.textContent.length,e<=n&&u>=n)return{node:s,offset:n-e};e=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=rf(s)}}function m0(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?m0(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function v0(){for(var e=window,n=Nl();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=Nl(e.document)}return n}function Ph(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function a2(e){var n=v0(),s=e.focusedElem,u=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&m0(s.ownerDocument.documentElement,s)){if(u!==null&&Ph(s)){if(n=u.start,e=u.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var d=s.textContent.length,f=Math.min(u.start,d);u=u.end===void 0?f:Math.min(u.end,d),!e.extend&&f>u&&(d=u,u=f,f=d),d=sf(s,f);var w=sf(s,u);d&&w&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==w.node||e.focusOffset!==w.offset)&&(n=n.createRange(),n.setStart(d.node,d.offset),e.removeAllRanges(),f>u?(e.addRange(n),e.extend(w.node,w.offset)):(n.setEnd(w.node,w.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var l2=Fi&&"documentMode"in document&&11>=document.documentMode,Js=null,Rc=null,la=null,kc=!1;function of(e,n,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;kc||Js==null||Js!==Nl(u)||(u=Js,"selectionStart"in u&&Ph(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),la&&Ea(la,u)||(la=u,u=Dl(Rc,"onSelect"),0<u.length&&(n=new Rh("onSelect","select",null,n,s),e.push({event:n,listeners:u}),n.target=Js)))}function il(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var eo={animationend:il("Animation","AnimationEnd"),animationiteration:il("Animation","AnimationIteration"),animationstart:il("Animation","AnimationStart"),transitionend:il("Transition","TransitionEnd")},Zu={},w0={};Fi&&(w0=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function cu(e){if(Zu[e])return Zu[e];if(!eo[e])return e;var n=eo[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in w0)return Zu[e]=n[s];return e}var y0=cu("animationend"),_0=cu("animationiteration"),C0=cu("animationstart"),E0=cu("transitionend"),A0=new Map,af="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gs(e,n){A0.set(e,n),js(n,[e])}for(var Gu=0;Gu<af.length;Gu++){var Xu=af[Gu],u2=Xu.toLowerCase(),c2=Xu[0].toUpperCase()+Xu.slice(1);gs(u2,"on"+c2)}gs(y0,"onAnimationEnd");gs(_0,"onAnimationIteration");gs(C0,"onAnimationStart");gs("dblclick","onDoubleClick");gs("focusin","onFocus");gs("focusout","onBlur");gs(E0,"onTransitionEnd");wo("onMouseEnter",["mouseout","mouseover"]);wo("onMouseLeave",["mouseout","mouseover"]);wo("onPointerEnter",["pointerout","pointerover"]);wo("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h2=new Set("cancel close invalid load scroll toggle".split(" ").concat(ra));function lf(e,n,s){var u=e.type||"unknown-event";e.currentTarget=s,um(u,n,void 0,e),e.currentTarget=null}function x0(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var u=e[s],d=u.event;u=u.listeners;e:{var f=void 0;if(n)for(var w=u.length-1;0<=w;w--){var A=u[w],C=A.instance,v=A.currentTarget;if(A=A.listener,C!==f&&d.isPropagationStopped())break e;lf(d,A,v),f=C}else for(w=0;w<u.length;w++){if(A=u[w],C=A.instance,v=A.currentTarget,A=A.listener,C!==f&&d.isPropagationStopped())break e;lf(d,A,v),f=C}}}if(Rl)throw e=bc,Rl=!1,bc=null,e}function zt(e,n){var s=n[Bc];s===void 0&&(s=n[Bc]=new Set);var u=e+"__bubble";s.has(u)||(S0(n,e,2,!1),s.add(u))}function Yu(e,n,s){var u=0;n&&(u|=4),S0(s,e,u,n)}var sl="_reactListening"+Math.random().toString(36).slice(2);function Aa(e){if(!e[sl]){e[sl]=!0,k1.forEach(function(s){s!=="selectionchange"&&(h2.has(s)||Yu(s,!1,e),Yu(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[sl]||(n[sl]=!0,Yu("selectionchange",!1,n))}}function S0(e,n,s,u){switch(l0(n)){case 1:var d=Sm;break;case 4:d=Im;break;default:d=Nh}s=d.bind(null,n,s,e),d=void 0,!Ic||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),u?d!==void 0?e.addEventListener(n,s,{capture:!0,passive:d}):e.addEventListener(n,s,!0):d!==void 0?e.addEventListener(n,s,{passive:d}):e.addEventListener(n,s,!1)}function Ku(e,n,s,u,d){var f=u;if(!(n&1)&&!(n&2)&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var A=u.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(w===4)for(w=u.return;w!==null;){var C=w.tag;if((C===3||C===4)&&(C=w.stateNode.containerInfo,C===d||C.nodeType===8&&C.parentNode===d))return;w=w.return}for(;A!==null;){if(w=bs(A),w===null)return;if(C=w.tag,C===5||C===6){u=f=w;continue e}A=A.parentNode}}u=u.return}Y1(function(){var v=f,S=Sh(s),b=[];e:{var R=A0.get(e);if(R!==void 0){var z=Rh,V=e;switch(e){case"keypress":if(yl(s)===0)break e;case"keydown":case"keyup":z=Um;break;case"focusin":V="focus",z=Hu;break;case"focusout":V="blur",z=Hu;break;case"beforeblur":case"afterblur":z=Hu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=Nm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=Wm;break;case y0:case _0:case C0:z=km;break;case E0:z=Gm;break;case"scroll":z=bm;break;case"wheel":z=Ym;break;case"copy":case"cut":case"paste":z=Pm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=$d}var W=(n&4)!==0,se=!W&&e==="scroll",B=W?R!==null?R+"Capture":null:R;W=[];for(var k=v,T;k!==null;){T=k;var H=T.stateNode;if(T.tag===5&&H!==null&&(T=H,B!==null&&(H=va(k,B),H!=null&&W.push(xa(k,H,T)))),se)break;k=k.return}0<W.length&&(R=new z(R,V,null,s,S),b.push({event:R,listeners:W}))}}if(!(n&7)){e:{if(R=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",R&&s!==xc&&(V=s.relatedTarget||s.fromElement)&&(bs(V)||V[ji]))break e;if((z||R)&&(R=S.window===S?S:(R=S.ownerDocument)?R.defaultView||R.parentWindow:window,z?(V=s.relatedTarget||s.toElement,z=v,V=V?bs(V):null,V!==null&&(se=zs(V),V!==se||V.tag!==5&&V.tag!==6)&&(V=null)):(z=null,V=v),z!==V)){if(W=Kd,H="onMouseLeave",B="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(W=$d,H="onPointerLeave",B="onPointerEnter",k="pointer"),se=z==null?R:to(z),T=V==null?R:to(V),R=new W(H,k+"leave",z,s,S),R.target=se,R.relatedTarget=T,H=null,bs(S)===v&&(W=new W(B,k+"enter",V,s,S),W.target=T,W.relatedTarget=se,H=W),se=H,z&&V)t:{for(W=z,B=V,k=0,T=W;T;T=Xs(T))k++;for(T=0,H=B;H;H=Xs(H))T++;for(;0<k-T;)W=Xs(W),k--;for(;0<T-k;)B=Xs(B),T--;for(;k--;){if(W===B||B!==null&&W===B.alternate)break t;W=Xs(W),B=Xs(B)}W=null}else W=null;z!==null&&uf(b,R,z,W,!1),V!==null&&se!==null&&uf(b,se,V,W,!0)}}e:{if(R=v?to(v):window,z=R.nodeName&&R.nodeName.toLowerCase(),z==="select"||z==="input"&&R.type==="file")var q=t2;else if(ef(R))if(p0)q=s2;else{q=r2;var X=n2}else(z=R.nodeName)&&z.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(q=i2);if(q&&(q=q(e,v))){f0(b,q,s,S);break e}X&&X(e,R,v),e==="focusout"&&(X=R._wrapperState)&&X.controlled&&R.type==="number"&&yc(R,"number",R.value)}switch(X=v?to(v):window,e){case"focusin":(ef(X)||X.contentEditable==="true")&&(Js=X,Rc=v,la=null);break;case"focusout":la=Rc=Js=null;break;case"mousedown":kc=!0;break;case"contextmenu":case"mouseup":case"dragend":kc=!1,of(b,s,S);break;case"selectionchange":if(l2)break;case"keydown":case"keyup":of(b,s,S)}var U;if(Mh)e:{switch(e){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else qs?h0(e,s)&&(Z="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Z="onCompositionStart");Z&&(c0&&s.locale!=="ko"&&(qs||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&qs&&(U=u0()):(rs=S,Oh="value"in rs?rs.value:rs.textContent,qs=!0)),X=Dl(v,Z),0<X.length&&(Z=new Qd(Z,e,null,s,S),b.push({event:Z,listeners:X}),U?Z.data=U:(U=d0(s),U!==null&&(Z.data=U)))),(U=Qm?$m(e,s):qm(e,s))&&(v=Dl(v,"onBeforeInput"),0<v.length&&(S=new Qd("onBeforeInput","beforeinput",null,s,S),b.push({event:S,listeners:v}),S.data=U))}x0(b,n)})}function xa(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Dl(e,n){for(var s=n+"Capture",u=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=va(e,s),f!=null&&u.unshift(xa(e,f,d)),f=va(e,n),f!=null&&u.push(xa(e,f,d))),e=e.return}return u}function Xs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function uf(e,n,s,u,d){for(var f=n._reactName,w=[];s!==null&&s!==u;){var A=s,C=A.alternate,v=A.stateNode;if(C!==null&&C===u)break;A.tag===5&&v!==null&&(A=v,d?(C=va(s,f),C!=null&&w.unshift(xa(s,C,A))):d||(C=va(s,f),C!=null&&w.push(xa(s,C,A)))),s=s.return}w.length!==0&&e.push({event:n,listeners:w})}var d2=/\r\n?/g,f2=/\u0000|\uFFFD/g;function cf(e){return(typeof e=="string"?e:""+e).replace(d2,`
`).replace(f2,"")}function ol(e,n,s){if(n=cf(n),cf(e)!==n&&s)throw Error(Te(425))}function Bl(){}var Mc=null,Pc=null;function Lc(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Dc=typeof setTimeout=="function"?setTimeout:void 0,p2=typeof clearTimeout=="function"?clearTimeout:void 0,hf=typeof Promise=="function"?Promise:void 0,g2=typeof queueMicrotask=="function"?queueMicrotask:typeof hf<"u"?function(e){return hf.resolve(null).then(e).catch(m2)}:Dc;function m2(e){setTimeout(function(){throw e})}function Qu(e,n){var s=n,u=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(u===0){e.removeChild(d),_a(n);return}u--}else s!=="$"&&s!=="$?"&&s!=="$!"||u++;s=d}while(s);_a(n)}function ls(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function df(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var To=Math.random().toString(36).slice(2),Ei="__reactFiber$"+To,Sa="__reactProps$"+To,ji="__reactContainer$"+To,Bc="__reactEvents$"+To,v2="__reactListeners$"+To,w2="__reactHandles$"+To;function bs(e){var n=e[Ei];if(n)return n;for(var s=e.parentNode;s;){if(n=s[ji]||s[Ei]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=df(e);e!==null;){if(s=e[Ei])return s;e=df(e)}return n}e=s,s=e.parentNode}return null}function Ba(e){return e=e[Ei]||e[ji],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function to(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Te(33))}function hu(e){return e[Sa]||null}var Fc=[],no=-1;function ms(e){return{current:e}}function Ht(e){0>no||(e.current=Fc[no],Fc[no]=null,no--)}function Dt(e,n){no++,Fc[no]=e.current,e.current=n}var ps={},Wn=ms(ps),hr=ms(!1),Ms=ps;function yo(e,n){var s=e.type.contextTypes;if(!s)return ps;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===n)return u.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in s)d[f]=n[f];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=d),d}function dr(e){return e=e.childContextTypes,e!=null}function Fl(){Ht(hr),Ht(Wn)}function ff(e,n,s){if(Wn.current!==ps)throw Error(Te(168));Dt(Wn,n),Dt(hr,s)}function I0(e,n,s){var u=e.stateNode;if(n=n.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var d in u)if(!(d in n))throw Error(Te(108,nm(e)||"Unknown",d));return $t({},s,u)}function jl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ps,Ms=Wn.current,Dt(Wn,e),Dt(hr,hr.current),!0}function pf(e,n,s){var u=e.stateNode;if(!u)throw Error(Te(169));s?(e=I0(e,n,Ms),u.__reactInternalMemoizedMergedChildContext=e,Ht(hr),Ht(Wn),Dt(Wn,e)):Ht(hr),Dt(hr,s)}var Pi=null,du=!1,$u=!1;function b0(e){Pi===null?Pi=[e]:Pi.push(e)}function y2(e){du=!0,b0(e)}function vs(){if(!$u&&Pi!==null){$u=!0;var e=0,n=It;try{var s=Pi;for(It=1;e<s.length;e++){var u=s[e];do u=u(!0);while(u!==null)}Pi=null,du=!1}catch(d){throw Pi!==null&&(Pi=Pi.slice(e+1)),q1(Ih,vs),d}finally{It=n,$u=!1}}return null}var ro=[],io=0,zl=null,Ul=0,Ur=[],Hr=0,Ps=null,Li=1,Di="";function Ss(e,n){ro[io++]=Ul,ro[io++]=zl,zl=e,Ul=n}function T0(e,n,s){Ur[Hr++]=Li,Ur[Hr++]=Di,Ur[Hr++]=Ps,Ps=e;var u=Li;e=Di;var d=32-oi(u)-1;u&=~(1<<d),s+=1;var f=32-oi(n)+d;if(30<f){var w=d-d%5;f=(u&(1<<w)-1).toString(32),u>>=w,d-=w,Li=1<<32-oi(n)+d|s<<d|u,Di=f+e}else Li=1<<f|s<<d|u,Di=e}function Lh(e){e.return!==null&&(Ss(e,1),T0(e,1,0))}function Dh(e){for(;e===zl;)zl=ro[--io],ro[io]=null,Ul=ro[--io],ro[io]=null;for(;e===Ps;)Ps=Ur[--Hr],Ur[Hr]=null,Di=Ur[--Hr],Ur[Hr]=null,Li=Ur[--Hr],Ur[Hr]=null}var br=null,Ir=null,Wt=!1,si=null;function N0(e,n){var s=Vr(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function gf(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,br=e,Ir=ls(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,br=e,Ir=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=Ps!==null?{id:Li,overflow:Di}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Vr(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,br=e,Ir=null,!0):!1;default:return!1}}function jc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zc(e){if(Wt){var n=Ir;if(n){var s=n;if(!gf(e,n)){if(jc(e))throw Error(Te(418));n=ls(s.nextSibling);var u=br;n&&gf(e,n)?N0(u,s):(e.flags=e.flags&-4097|2,Wt=!1,br=e)}}else{if(jc(e))throw Error(Te(418));e.flags=e.flags&-4097|2,Wt=!1,br=e}}}function mf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;br=e}function al(e){if(e!==br)return!1;if(!Wt)return mf(e),Wt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Lc(e.type,e.memoizedProps)),n&&(n=Ir)){if(jc(e))throw O0(),Error(Te(418));for(;n;)N0(e,n),n=ls(n.nextSibling)}if(mf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Te(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){Ir=ls(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}Ir=null}}else Ir=br?ls(e.stateNode.nextSibling):null;return!0}function O0(){for(var e=Ir;e;)e=ls(e.nextSibling)}function _o(){Ir=br=null,Wt=!1}function Bh(e){si===null?si=[e]:si.push(e)}var _2=Hi.ReactCurrentBatchConfig;function Yo(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Te(309));var u=s.stateNode}if(!u)throw Error(Te(147,e));var d=u,f=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===f?n.ref:(n=function(w){var A=d.refs;w===null?delete A[f]:A[f]=w},n._stringRef=f,n)}if(typeof e!="string")throw Error(Te(284));if(!s._owner)throw Error(Te(290,e))}return e}function ll(e,n){throw e=Object.prototype.toString.call(n),Error(Te(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function vf(e){var n=e._init;return n(e._payload)}function R0(e){function n(B,k){if(e){var T=B.deletions;T===null?(B.deletions=[k],B.flags|=16):T.push(k)}}function s(B,k){if(!e)return null;for(;k!==null;)n(B,k),k=k.sibling;return null}function u(B,k){for(B=new Map;k!==null;)k.key!==null?B.set(k.key,k):B.set(k.index,k),k=k.sibling;return B}function d(B,k){return B=ds(B,k),B.index=0,B.sibling=null,B}function f(B,k,T){return B.index=T,e?(T=B.alternate,T!==null?(T=T.index,T<k?(B.flags|=2,k):T):(B.flags|=2,k)):(B.flags|=1048576,k)}function w(B){return e&&B.alternate===null&&(B.flags|=2),B}function A(B,k,T,H){return k===null||k.tag!==6?(k=ic(T,B.mode,H),k.return=B,k):(k=d(k,T),k.return=B,k)}function C(B,k,T,H){var q=T.type;return q===$s?S(B,k,T.props.children,H,T.key):k!==null&&(k.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Ji&&vf(q)===k.type)?(H=d(k,T.props),H.ref=Yo(B,k,T),H.return=B,H):(H=Il(T.type,T.key,T.props,null,B.mode,H),H.ref=Yo(B,k,T),H.return=B,H)}function v(B,k,T,H){return k===null||k.tag!==4||k.stateNode.containerInfo!==T.containerInfo||k.stateNode.implementation!==T.implementation?(k=sc(T,B.mode,H),k.return=B,k):(k=d(k,T.children||[]),k.return=B,k)}function S(B,k,T,H,q){return k===null||k.tag!==7?(k=ks(T,B.mode,H,q),k.return=B,k):(k=d(k,T),k.return=B,k)}function b(B,k,T){if(typeof k=="string"&&k!==""||typeof k=="number")return k=ic(""+k,B.mode,T),k.return=B,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case $a:return T=Il(k.type,k.key,k.props,null,B.mode,T),T.ref=Yo(B,null,k),T.return=B,T;case Qs:return k=sc(k,B.mode,T),k.return=B,k;case Ji:var H=k._init;return b(B,H(k._payload),T)}if(ta(k)||Vo(k))return k=ks(k,B.mode,T,null),k.return=B,k;ll(B,k)}return null}function R(B,k,T,H){var q=k!==null?k.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return q!==null?null:A(B,k,""+T,H);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case $a:return T.key===q?C(B,k,T,H):null;case Qs:return T.key===q?v(B,k,T,H):null;case Ji:return q=T._init,R(B,k,q(T._payload),H)}if(ta(T)||Vo(T))return q!==null?null:S(B,k,T,H,null);ll(B,T)}return null}function z(B,k,T,H,q){if(typeof H=="string"&&H!==""||typeof H=="number")return B=B.get(T)||null,A(k,B,""+H,q);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case $a:return B=B.get(H.key===null?T:H.key)||null,C(k,B,H,q);case Qs:return B=B.get(H.key===null?T:H.key)||null,v(k,B,H,q);case Ji:var X=H._init;return z(B,k,T,X(H._payload),q)}if(ta(H)||Vo(H))return B=B.get(T)||null,S(k,B,H,q,null);ll(k,H)}return null}function V(B,k,T,H){for(var q=null,X=null,U=k,Z=k=0,G=null;U!==null&&Z<T.length;Z++){U.index>Z?(G=U,U=null):G=U.sibling;var oe=R(B,U,T[Z],H);if(oe===null){U===null&&(U=G);break}e&&U&&oe.alternate===null&&n(B,U),k=f(oe,k,Z),X===null?q=oe:X.sibling=oe,X=oe,U=G}if(Z===T.length)return s(B,U),Wt&&Ss(B,Z),q;if(U===null){for(;Z<T.length;Z++)U=b(B,T[Z],H),U!==null&&(k=f(U,k,Z),X===null?q=U:X.sibling=U,X=U);return Wt&&Ss(B,Z),q}for(U=u(B,U);Z<T.length;Z++)G=z(U,B,Z,T[Z],H),G!==null&&(e&&G.alternate!==null&&U.delete(G.key===null?Z:G.key),k=f(G,k,Z),X===null?q=G:X.sibling=G,X=G);return e&&U.forEach(function(re){return n(B,re)}),Wt&&Ss(B,Z),q}function W(B,k,T,H){var q=Vo(T);if(typeof q!="function")throw Error(Te(150));if(T=q.call(T),T==null)throw Error(Te(151));for(var X=q=null,U=k,Z=k=0,G=null,oe=T.next();U!==null&&!oe.done;Z++,oe=T.next()){U.index>Z?(G=U,U=null):G=U.sibling;var re=R(B,U,oe.value,H);if(re===null){U===null&&(U=G);break}e&&U&&re.alternate===null&&n(B,U),k=f(re,k,Z),X===null?q=re:X.sibling=re,X=re,U=G}if(oe.done)return s(B,U),Wt&&Ss(B,Z),q;if(U===null){for(;!oe.done;Z++,oe=T.next())oe=b(B,oe.value,H),oe!==null&&(k=f(oe,k,Z),X===null?q=oe:X.sibling=oe,X=oe);return Wt&&Ss(B,Z),q}for(U=u(B,U);!oe.done;Z++,oe=T.next())oe=z(U,B,Z,oe.value,H),oe!==null&&(e&&oe.alternate!==null&&U.delete(oe.key===null?Z:oe.key),k=f(oe,k,Z),X===null?q=oe:X.sibling=oe,X=oe);return e&&U.forEach(function(de){return n(B,de)}),Wt&&Ss(B,Z),q}function se(B,k,T,H){if(typeof T=="object"&&T!==null&&T.type===$s&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case $a:e:{for(var q=T.key,X=k;X!==null;){if(X.key===q){if(q=T.type,q===$s){if(X.tag===7){s(B,X.sibling),k=d(X,T.props.children),k.return=B,B=k;break e}}else if(X.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Ji&&vf(q)===X.type){s(B,X.sibling),k=d(X,T.props),k.ref=Yo(B,X,T),k.return=B,B=k;break e}s(B,X);break}else n(B,X);X=X.sibling}T.type===$s?(k=ks(T.props.children,B.mode,H,T.key),k.return=B,B=k):(H=Il(T.type,T.key,T.props,null,B.mode,H),H.ref=Yo(B,k,T),H.return=B,B=H)}return w(B);case Qs:e:{for(X=T.key;k!==null;){if(k.key===X)if(k.tag===4&&k.stateNode.containerInfo===T.containerInfo&&k.stateNode.implementation===T.implementation){s(B,k.sibling),k=d(k,T.children||[]),k.return=B,B=k;break e}else{s(B,k);break}else n(B,k);k=k.sibling}k=sc(T,B.mode,H),k.return=B,B=k}return w(B);case Ji:return X=T._init,se(B,k,X(T._payload),H)}if(ta(T))return V(B,k,T,H);if(Vo(T))return W(B,k,T,H);ll(B,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,k!==null&&k.tag===6?(s(B,k.sibling),k=d(k,T),k.return=B,B=k):(s(B,k),k=ic(T,B.mode,H),k.return=B,B=k),w(B)):s(B,k)}return se}var Co=R0(!0),k0=R0(!1),Hl=ms(null),Vl=null,so=null,Fh=null;function jh(){Fh=so=Vl=null}function zh(e){var n=Hl.current;Ht(Hl),e._currentValue=n}function Uc(e,n,s){for(;e!==null;){var u=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),e===s)break;e=e.return}}function go(e,n){Vl=e,Fh=so=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(cr=!0),e.firstContext=null)}function Zr(e){var n=e._currentValue;if(Fh!==e)if(e={context:e,memoizedValue:n,next:null},so===null){if(Vl===null)throw Error(Te(308));so=e,Vl.dependencies={lanes:0,firstContext:e}}else so=so.next=e;return n}var Ts=null;function Uh(e){Ts===null?Ts=[e]:Ts.push(e)}function M0(e,n,s,u){var d=n.interleaved;return d===null?(s.next=s,Uh(n)):(s.next=d.next,d.next=s),n.interleaved=s,zi(e,u)}function zi(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var es=!1;function Hh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P0(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bi(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function us(e,n,s){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,mt&2){var d=u.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),u.pending=n,zi(e,s)}return d=u.interleaved,d===null?(n.next=n,Uh(u)):(n.next=d.next,d.next=n),u.interleaved=n,zi(e,s)}function _l(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var u=n.lanes;u&=e.pendingLanes,s|=u,n.lanes=s,bh(e,s)}}function wf(e,n){var s=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var d=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var w={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};f===null?d=f=w:f=f.next=w,s=s.next}while(s!==null);f===null?d=f=n:f=f.next=n}else d=f=n;s={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:u.shared,effects:u.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Wl(e,n,s,u){var d=e.updateQueue;es=!1;var f=d.firstBaseUpdate,w=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var C=A,v=C.next;C.next=null,w===null?f=v:w.next=v,w=C;var S=e.alternate;S!==null&&(S=S.updateQueue,A=S.lastBaseUpdate,A!==w&&(A===null?S.firstBaseUpdate=v:A.next=v,S.lastBaseUpdate=C))}if(f!==null){var b=d.baseState;w=0,S=v=C=null,A=f;do{var R=A.lane,z=A.eventTime;if((u&R)===R){S!==null&&(S=S.next={eventTime:z,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var V=e,W=A;switch(R=n,z=s,W.tag){case 1:if(V=W.payload,typeof V=="function"){b=V.call(z,b,R);break e}b=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=W.payload,R=typeof V=="function"?V.call(z,b,R):V,R==null)break e;b=$t({},b,R);break e;case 2:es=!0}}A.callback!==null&&A.lane!==0&&(e.flags|=64,R=d.effects,R===null?d.effects=[A]:R.push(A))}else z={eventTime:z,lane:R,tag:A.tag,payload:A.payload,callback:A.callback,next:null},S===null?(v=S=z,C=b):S=S.next=z,w|=R;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;R=A,A=R.next,R.next=null,d.lastBaseUpdate=R,d.shared.pending=null}}while(!0);if(S===null&&(C=b),d.baseState=C,d.firstBaseUpdate=v,d.lastBaseUpdate=S,n=d.shared.interleaved,n!==null){d=n;do w|=d.lane,d=d.next;while(d!==n)}else f===null&&(d.shared.lanes=0);Ds|=w,e.lanes=w,e.memoizedState=b}}function yf(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var u=e[n],d=u.callback;if(d!==null){if(u.callback=null,u=s,typeof d!="function")throw Error(Te(191,d));d.call(u)}}}var Fa={},xi=ms(Fa),Ia=ms(Fa),ba=ms(Fa);function Ns(e){if(e===Fa)throw Error(Te(174));return e}function Vh(e,n){switch(Dt(ba,n),Dt(Ia,e),Dt(xi,Fa),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Cc(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Cc(n,e)}Ht(xi),Dt(xi,n)}function Eo(){Ht(xi),Ht(Ia),Ht(ba)}function L0(e){Ns(ba.current);var n=Ns(xi.current),s=Cc(n,e.type);n!==s&&(Dt(Ia,e),Dt(xi,s))}function Wh(e){Ia.current===e&&(Ht(xi),Ht(Ia))}var Kt=ms(0);function Zl(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var qu=[];function Zh(){for(var e=0;e<qu.length;e++)qu[e]._workInProgressVersionPrimary=null;qu.length=0}var Cl=Hi.ReactCurrentDispatcher,Ju=Hi.ReactCurrentBatchConfig,Ls=0,Qt=null,En=null,Tn=null,Gl=!1,ua=!1,Ta=0,C2=0;function Un(){throw Error(Te(321))}function Gh(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!li(e[s],n[s]))return!1;return!0}function Xh(e,n,s,u,d,f){if(Ls=f,Qt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Cl.current=e===null||e.memoizedState===null?S2:I2,e=s(u,d),ua){f=0;do{if(ua=!1,Ta=0,25<=f)throw Error(Te(301));f+=1,Tn=En=null,n.updateQueue=null,Cl.current=b2,e=s(u,d)}while(ua)}if(Cl.current=Xl,n=En!==null&&En.next!==null,Ls=0,Tn=En=Qt=null,Gl=!1,n)throw Error(Te(300));return e}function Yh(){var e=Ta!==0;return Ta=0,e}function _i(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Qt.memoizedState=Tn=e:Tn=Tn.next=e,Tn}function Gr(){if(En===null){var e=Qt.alternate;e=e!==null?e.memoizedState:null}else e=En.next;var n=Tn===null?Qt.memoizedState:Tn.next;if(n!==null)Tn=n,En=e;else{if(e===null)throw Error(Te(310));En=e,e={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},Tn===null?Qt.memoizedState=Tn=e:Tn=Tn.next=e}return Tn}function Na(e,n){return typeof n=="function"?n(e):n}function ec(e){var n=Gr(),s=n.queue;if(s===null)throw Error(Te(311));s.lastRenderedReducer=e;var u=En,d=u.baseQueue,f=s.pending;if(f!==null){if(d!==null){var w=d.next;d.next=f.next,f.next=w}u.baseQueue=d=f,s.pending=null}if(d!==null){f=d.next,u=u.baseState;var A=w=null,C=null,v=f;do{var S=v.lane;if((Ls&S)===S)C!==null&&(C=C.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),u=v.hasEagerState?v.eagerState:e(u,v.action);else{var b={lane:S,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};C===null?(A=C=b,w=u):C=C.next=b,Qt.lanes|=S,Ds|=S}v=v.next}while(v!==null&&v!==f);C===null?w=u:C.next=A,li(u,n.memoizedState)||(cr=!0),n.memoizedState=u,n.baseState=w,n.baseQueue=C,s.lastRenderedState=u}if(e=s.interleaved,e!==null){d=e;do f=d.lane,Qt.lanes|=f,Ds|=f,d=d.next;while(d!==e)}else d===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function tc(e){var n=Gr(),s=n.queue;if(s===null)throw Error(Te(311));s.lastRenderedReducer=e;var u=s.dispatch,d=s.pending,f=n.memoizedState;if(d!==null){s.pending=null;var w=d=d.next;do f=e(f,w.action),w=w.next;while(w!==d);li(f,n.memoizedState)||(cr=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),s.lastRenderedState=f}return[f,u]}function D0(){}function B0(e,n){var s=Qt,u=Gr(),d=n(),f=!li(u.memoizedState,d);if(f&&(u.memoizedState=d,cr=!0),u=u.queue,Kh(z0.bind(null,s,u,e),[e]),u.getSnapshot!==n||f||Tn!==null&&Tn.memoizedState.tag&1){if(s.flags|=2048,Oa(9,j0.bind(null,s,u,d,n),void 0,null),Nn===null)throw Error(Te(349));Ls&30||F0(s,n,d)}return d}function F0(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Qt.updateQueue,n===null?(n={lastEffect:null,stores:null},Qt.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function j0(e,n,s,u){n.value=s,n.getSnapshot=u,U0(n)&&H0(e)}function z0(e,n,s){return s(function(){U0(n)&&H0(e)})}function U0(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!li(e,s)}catch{return!0}}function H0(e){var n=zi(e,1);n!==null&&ai(n,e,1,-1)}function _f(e){var n=_i();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:e},n.queue=e,e=e.dispatch=x2.bind(null,Qt,e),[n.memoizedState,e]}function Oa(e,n,s,u){return e={tag:e,create:n,destroy:s,deps:u,next:null},n=Qt.updateQueue,n===null?(n={lastEffect:null,stores:null},Qt.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(u=s.next,s.next=e,e.next=u,n.lastEffect=e)),e}function V0(){return Gr().memoizedState}function El(e,n,s,u){var d=_i();Qt.flags|=e,d.memoizedState=Oa(1|n,s,void 0,u===void 0?null:u)}function fu(e,n,s,u){var d=Gr();u=u===void 0?null:u;var f=void 0;if(En!==null){var w=En.memoizedState;if(f=w.destroy,u!==null&&Gh(u,w.deps)){d.memoizedState=Oa(n,s,f,u);return}}Qt.flags|=e,d.memoizedState=Oa(1|n,s,f,u)}function Cf(e,n){return El(8390656,8,e,n)}function Kh(e,n){return fu(2048,8,e,n)}function W0(e,n){return fu(4,2,e,n)}function Z0(e,n){return fu(4,4,e,n)}function G0(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function X0(e,n,s){return s=s!=null?s.concat([e]):null,fu(4,4,G0.bind(null,n,e),s)}function Qh(){}function Y0(e,n){var s=Gr();n=n===void 0?null:n;var u=s.memoizedState;return u!==null&&n!==null&&Gh(n,u[1])?u[0]:(s.memoizedState=[e,n],e)}function K0(e,n){var s=Gr();n=n===void 0?null:n;var u=s.memoizedState;return u!==null&&n!==null&&Gh(n,u[1])?u[0]:(e=e(),s.memoizedState=[e,n],e)}function Q0(e,n,s){return Ls&21?(li(s,n)||(s=t0(),Qt.lanes|=s,Ds|=s,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,cr=!0),e.memoizedState=s)}function E2(e,n){var s=It;It=s!==0&&4>s?s:4,e(!0);var u=Ju.transition;Ju.transition={};try{e(!1),n()}finally{It=s,Ju.transition=u}}function $0(){return Gr().memoizedState}function A2(e,n,s){var u=hs(e);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},q0(e))J0(n,s);else if(s=M0(e,n,s,u),s!==null){var d=nr();ai(s,e,u,d),ep(s,n,u)}}function x2(e,n,s){var u=hs(e),d={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(q0(e))J0(n,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var w=n.lastRenderedState,A=f(w,s);if(d.hasEagerState=!0,d.eagerState=A,li(A,w)){var C=n.interleaved;C===null?(d.next=d,Uh(n)):(d.next=C.next,C.next=d),n.interleaved=d;return}}catch{}finally{}s=M0(e,n,d,u),s!==null&&(d=nr(),ai(s,e,u,d),ep(s,n,u))}}function q0(e){var n=e.alternate;return e===Qt||n!==null&&n===Qt}function J0(e,n){ua=Gl=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function ep(e,n,s){if(s&4194240){var u=n.lanes;u&=e.pendingLanes,s|=u,n.lanes=s,bh(e,s)}}var Xl={readContext:Zr,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},S2={readContext:Zr,useCallback:function(e,n){return _i().memoizedState=[e,n===void 0?null:n],e},useContext:Zr,useEffect:Cf,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,El(4194308,4,G0.bind(null,n,e),s)},useLayoutEffect:function(e,n){return El(4194308,4,e,n)},useInsertionEffect:function(e,n){return El(4,2,e,n)},useMemo:function(e,n){var s=_i();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var u=_i();return n=s!==void 0?s(n):n,u.memoizedState=u.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},u.queue=e,e=e.dispatch=A2.bind(null,Qt,e),[u.memoizedState,e]},useRef:function(e){var n=_i();return e={current:e},n.memoizedState=e},useState:_f,useDebugValue:Qh,useDeferredValue:function(e){return _i().memoizedState=e},useTransition:function(){var e=_f(!1),n=e[0];return e=E2.bind(null,e[1]),_i().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var u=Qt,d=_i();if(Wt){if(s===void 0)throw Error(Te(407));s=s()}else{if(s=n(),Nn===null)throw Error(Te(349));Ls&30||F0(u,n,s)}d.memoizedState=s;var f={value:s,getSnapshot:n};return d.queue=f,Cf(z0.bind(null,u,f,e),[e]),u.flags|=2048,Oa(9,j0.bind(null,u,f,s,n),void 0,null),s},useId:function(){var e=_i(),n=Nn.identifierPrefix;if(Wt){var s=Di,u=Li;s=(u&~(1<<32-oi(u)-1)).toString(32)+s,n=":"+n+"R"+s,s=Ta++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=C2++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},I2={readContext:Zr,useCallback:Y0,useContext:Zr,useEffect:Kh,useImperativeHandle:X0,useInsertionEffect:W0,useLayoutEffect:Z0,useMemo:K0,useReducer:ec,useRef:V0,useState:function(){return ec(Na)},useDebugValue:Qh,useDeferredValue:function(e){var n=Gr();return Q0(n,En.memoizedState,e)},useTransition:function(){var e=ec(Na)[0],n=Gr().memoizedState;return[e,n]},useMutableSource:D0,useSyncExternalStore:B0,useId:$0,unstable_isNewReconciler:!1},b2={readContext:Zr,useCallback:Y0,useContext:Zr,useEffect:Kh,useImperativeHandle:X0,useInsertionEffect:W0,useLayoutEffect:Z0,useMemo:K0,useReducer:tc,useRef:V0,useState:function(){return tc(Na)},useDebugValue:Qh,useDeferredValue:function(e){var n=Gr();return En===null?n.memoizedState=e:Q0(n,En.memoizedState,e)},useTransition:function(){var e=tc(Na)[0],n=Gr().memoizedState;return[e,n]},useMutableSource:D0,useSyncExternalStore:B0,useId:$0,unstable_isNewReconciler:!1};function ri(e,n){if(e&&e.defaultProps){n=$t({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function Hc(e,n,s,u){n=e.memoizedState,s=s(u,n),s=s==null?n:$t({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var pu={isMounted:function(e){return(e=e._reactInternals)?zs(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var u=nr(),d=hs(e),f=Bi(u,d);f.payload=n,s!=null&&(f.callback=s),n=us(e,f,d),n!==null&&(ai(n,e,d,u),_l(n,e,d))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var u=nr(),d=hs(e),f=Bi(u,d);f.tag=1,f.payload=n,s!=null&&(f.callback=s),n=us(e,f,d),n!==null&&(ai(n,e,d,u),_l(n,e,d))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=nr(),u=hs(e),d=Bi(s,u);d.tag=2,n!=null&&(d.callback=n),n=us(e,d,u),n!==null&&(ai(n,e,u,s),_l(n,e,u))}};function Ef(e,n,s,u,d,f,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,f,w):n.prototype&&n.prototype.isPureReactComponent?!Ea(s,u)||!Ea(d,f):!0}function tp(e,n,s){var u=!1,d=ps,f=n.contextType;return typeof f=="object"&&f!==null?f=Zr(f):(d=dr(n)?Ms:Wn.current,u=n.contextTypes,f=(u=u!=null)?yo(e,d):ps),n=new n(s,f),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=pu,e.stateNode=n,n._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),n}function Af(e,n,s,u){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,u),n.state!==e&&pu.enqueueReplaceState(n,n.state,null)}function Vc(e,n,s,u){var d=e.stateNode;d.props=s,d.state=e.memoizedState,d.refs={},Hh(e);var f=n.contextType;typeof f=="object"&&f!==null?d.context=Zr(f):(f=dr(n)?Ms:Wn.current,d.context=yo(e,f)),d.state=e.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(Hc(e,n,f,s),d.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(n=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),n!==d.state&&pu.enqueueReplaceState(d,d.state,null),Wl(e,s,d,u),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Ao(e,n){try{var s="",u=n;do s+=tm(u),u=u.return;while(u);var d=s}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:n,stack:d,digest:null}}function nc(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function Wc(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var T2=typeof WeakMap=="function"?WeakMap:Map;function np(e,n,s){s=Bi(-1,s),s.tag=3,s.payload={element:null};var u=n.value;return s.callback=function(){Kl||(Kl=!0,eh=u),Wc(e,n)},s}function rp(e,n,s){s=Bi(-1,s),s.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var d=n.value;s.payload=function(){return u(d)},s.callback=function(){Wc(e,n)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(s.callback=function(){Wc(e,n),typeof u!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var w=n.stack;this.componentDidCatch(n.value,{componentStack:w!==null?w:""})}),s}function xf(e,n,s){var u=e.pingCache;if(u===null){u=e.pingCache=new T2;var d=new Set;u.set(n,d)}else d=u.get(n),d===void 0&&(d=new Set,u.set(n,d));d.has(s)||(d.add(s),e=H2.bind(null,e,n,s),n.then(e,e))}function Sf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function If(e,n,s,u,d){return e.mode&1?(e.flags|=65536,e.lanes=d,e):(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=Bi(-1,1),n.tag=2,us(s,n,1))),s.lanes|=1),e)}var N2=Hi.ReactCurrentOwner,cr=!1;function tr(e,n,s,u){n.child=e===null?k0(n,null,s,u):Co(n,e.child,s,u)}function bf(e,n,s,u,d){s=s.render;var f=n.ref;return go(n,d),u=Xh(e,n,s,u,f,d),s=Yh(),e!==null&&!cr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~d,Ui(e,n,d)):(Wt&&s&&Lh(n),n.flags|=1,tr(e,n,u,d),n.child)}function Tf(e,n,s,u,d){if(e===null){var f=s.type;return typeof f=="function"&&!id(f)&&f.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=f,ip(e,n,f,u,d)):(e=Il(s.type,null,u,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!(e.lanes&d)){var w=f.memoizedProps;if(s=s.compare,s=s!==null?s:Ea,s(w,u)&&e.ref===n.ref)return Ui(e,n,d)}return n.flags|=1,e=ds(f,u),e.ref=n.ref,e.return=n,n.child=e}function ip(e,n,s,u,d){if(e!==null){var f=e.memoizedProps;if(Ea(f,u)&&e.ref===n.ref)if(cr=!1,n.pendingProps=u=f,(e.lanes&d)!==0)e.flags&131072&&(cr=!0);else return n.lanes=e.lanes,Ui(e,n,d)}return Zc(e,n,s,u,d)}function sp(e,n,s){var u=n.pendingProps,d=u.children,f=e!==null?e.memoizedState:null;if(u.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(ao,Sr),Sr|=s;else{if(!(s&1073741824))return e=f!==null?f.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Dt(ao,Sr),Sr|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=f!==null?f.baseLanes:s,Dt(ao,Sr),Sr|=u}else f!==null?(u=f.baseLanes|s,n.memoizedState=null):u=s,Dt(ao,Sr),Sr|=u;return tr(e,n,d,s),n.child}function op(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function Zc(e,n,s,u,d){var f=dr(s)?Ms:Wn.current;return f=yo(n,f),go(n,d),s=Xh(e,n,s,u,f,d),u=Yh(),e!==null&&!cr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~d,Ui(e,n,d)):(Wt&&u&&Lh(n),n.flags|=1,tr(e,n,s,d),n.child)}function Nf(e,n,s,u,d){if(dr(s)){var f=!0;jl(n)}else f=!1;if(go(n,d),n.stateNode===null)Al(e,n),tp(n,s,u),Vc(n,s,u,d),u=!0;else if(e===null){var w=n.stateNode,A=n.memoizedProps;w.props=A;var C=w.context,v=s.contextType;typeof v=="object"&&v!==null?v=Zr(v):(v=dr(s)?Ms:Wn.current,v=yo(n,v));var S=s.getDerivedStateFromProps,b=typeof S=="function"||typeof w.getSnapshotBeforeUpdate=="function";b||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==u||C!==v)&&Af(n,w,u,v),es=!1;var R=n.memoizedState;w.state=R,Wl(n,u,w,d),C=n.memoizedState,A!==u||R!==C||hr.current||es?(typeof S=="function"&&(Hc(n,s,S,u),C=n.memoizedState),(A=es||Ef(n,s,A,u,R,C,v))?(b||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(n.flags|=4194308)):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=C),w.props=u,w.state=C,w.context=v,u=A):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{w=n.stateNode,P0(e,n),A=n.memoizedProps,v=n.type===n.elementType?A:ri(n.type,A),w.props=v,b=n.pendingProps,R=w.context,C=s.contextType,typeof C=="object"&&C!==null?C=Zr(C):(C=dr(s)?Ms:Wn.current,C=yo(n,C));var z=s.getDerivedStateFromProps;(S=typeof z=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==b||R!==C)&&Af(n,w,u,C),es=!1,R=n.memoizedState,w.state=R,Wl(n,u,w,d);var V=n.memoizedState;A!==b||R!==V||hr.current||es?(typeof z=="function"&&(Hc(n,s,z,u),V=n.memoizedState),(v=es||Ef(n,s,v,u,R,V,C)||!1)?(S||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(u,V,C),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(u,V,C)),typeof w.componentDidUpdate=="function"&&(n.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===e.memoizedProps&&R===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&R===e.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=V),w.props=u,w.state=V,w.context=C,u=v):(typeof w.componentDidUpdate!="function"||A===e.memoizedProps&&R===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&R===e.memoizedState||(n.flags|=1024),u=!1)}return Gc(e,n,s,u,f,d)}function Gc(e,n,s,u,d,f){op(e,n);var w=(n.flags&128)!==0;if(!u&&!w)return d&&pf(n,s,!1),Ui(e,n,f);u=n.stateNode,N2.current=n;var A=w&&typeof s.getDerivedStateFromError!="function"?null:u.render();return n.flags|=1,e!==null&&w?(n.child=Co(n,e.child,null,f),n.child=Co(n,null,A,f)):tr(e,n,A,f),n.memoizedState=u.state,d&&pf(n,s,!0),n.child}function ap(e){var n=e.stateNode;n.pendingContext?ff(e,n.pendingContext,n.pendingContext!==n.context):n.context&&ff(e,n.context,!1),Vh(e,n.containerInfo)}function Of(e,n,s,u,d){return _o(),Bh(d),n.flags|=256,tr(e,n,s,u),n.child}var Xc={dehydrated:null,treeContext:null,retryLane:0};function Yc(e){return{baseLanes:e,cachePool:null,transitions:null}}function lp(e,n,s){var u=n.pendingProps,d=Kt.current,f=!1,w=(n.flags&128)!==0,A;if((A=w)||(A=e!==null&&e.memoizedState===null?!1:(d&2)!==0),A?(f=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Dt(Kt,d&1),e===null)return zc(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(w=u.children,e=u.fallback,f?(u=n.mode,f=n.child,w={mode:"hidden",children:w},!(u&1)&&f!==null?(f.childLanes=0,f.pendingProps=w):f=vu(w,u,0,null),e=ks(e,u,s,null),f.return=n,e.return=n,f.sibling=e,n.child=f,n.child.memoizedState=Yc(s),n.memoizedState=Xc,e):$h(n,w));if(d=e.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return O2(e,n,w,u,A,d,s);if(f){f=u.fallback,w=n.mode,d=e.child,A=d.sibling;var C={mode:"hidden",children:u.children};return!(w&1)&&n.child!==d?(u=n.child,u.childLanes=0,u.pendingProps=C,n.deletions=null):(u=ds(d,C),u.subtreeFlags=d.subtreeFlags&14680064),A!==null?f=ds(A,f):(f=ks(f,w,s,null),f.flags|=2),f.return=n,u.return=n,u.sibling=f,n.child=u,u=f,f=n.child,w=e.child.memoizedState,w=w===null?Yc(s):{baseLanes:w.baseLanes|s,cachePool:null,transitions:w.transitions},f.memoizedState=w,f.childLanes=e.childLanes&~s,n.memoizedState=Xc,u}return f=e.child,e=f.sibling,u=ds(f,{mode:"visible",children:u.children}),!(n.mode&1)&&(u.lanes=s),u.return=n,u.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=u,n.memoizedState=null,u}function $h(e,n){return n=vu({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function ul(e,n,s,u){return u!==null&&Bh(u),Co(n,e.child,null,s),e=$h(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function O2(e,n,s,u,d,f,w){if(s)return n.flags&256?(n.flags&=-257,u=nc(Error(Te(422))),ul(e,n,w,u)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(f=u.fallback,d=n.mode,u=vu({mode:"visible",children:u.children},d,0,null),f=ks(f,d,w,null),f.flags|=2,u.return=n,f.return=n,u.sibling=f,n.child=u,n.mode&1&&Co(n,e.child,null,w),n.child.memoizedState=Yc(w),n.memoizedState=Xc,f);if(!(n.mode&1))return ul(e,n,w,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var A=u.dgst;return u=A,f=Error(Te(419)),u=nc(f,u,void 0),ul(e,n,w,u)}if(A=(w&e.childLanes)!==0,cr||A){if(u=Nn,u!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(u.suspendedLanes|w)?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,zi(e,d),ai(u,e,d,-1))}return rd(),u=nc(Error(Te(421))),ul(e,n,w,u)}return d.data==="$?"?(n.flags|=128,n.child=e.child,n=V2.bind(null,e),d._reactRetry=n,null):(e=f.treeContext,Ir=ls(d.nextSibling),br=n,Wt=!0,si=null,e!==null&&(Ur[Hr++]=Li,Ur[Hr++]=Di,Ur[Hr++]=Ps,Li=e.id,Di=e.overflow,Ps=n),n=$h(n,u.children),n.flags|=4096,n)}function Rf(e,n,s){e.lanes|=n;var u=e.alternate;u!==null&&(u.lanes|=n),Uc(e.return,n,s)}function rc(e,n,s,u,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:d}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=u,f.tail=s,f.tailMode=d)}function up(e,n,s){var u=n.pendingProps,d=u.revealOrder,f=u.tail;if(tr(e,n,u.children,s),u=Kt.current,u&2)u=u&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rf(e,s,n);else if(e.tag===19)Rf(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(Dt(Kt,u),!(n.mode&1))n.memoizedState=null;else switch(d){case"forwards":for(s=n.child,d=null;s!==null;)e=s.alternate,e!==null&&Zl(e)===null&&(d=s),s=s.sibling;s=d,s===null?(d=n.child,n.child=null):(d=s.sibling,s.sibling=null),rc(n,!1,d,s,f);break;case"backwards":for(s=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&Zl(e)===null){n.child=d;break}e=d.sibling,d.sibling=s,s=d,d=e}rc(n,!0,s,null,f);break;case"together":rc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Al(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Ui(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Ds|=n.lanes,!(s&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(Te(153));if(n.child!==null){for(e=n.child,s=ds(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=ds(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function R2(e,n,s){switch(n.tag){case 3:ap(n),_o();break;case 5:L0(n);break;case 1:dr(n.type)&&jl(n);break;case 4:Vh(n,n.stateNode.containerInfo);break;case 10:var u=n.type._context,d=n.memoizedProps.value;Dt(Hl,u._currentValue),u._currentValue=d;break;case 13:if(u=n.memoizedState,u!==null)return u.dehydrated!==null?(Dt(Kt,Kt.current&1),n.flags|=128,null):s&n.child.childLanes?lp(e,n,s):(Dt(Kt,Kt.current&1),e=Ui(e,n,s),e!==null?e.sibling:null);Dt(Kt,Kt.current&1);break;case 19:if(u=(s&n.childLanes)!==0,e.flags&128){if(u)return up(e,n,s);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Dt(Kt,Kt.current),u)break;return null;case 22:case 23:return n.lanes=0,sp(e,n,s)}return Ui(e,n,s)}var cp,Kc,hp,dp;cp=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Kc=function(){};hp=function(e,n,s,u){var d=e.memoizedProps;if(d!==u){e=n.stateNode,Ns(xi.current);var f=null;switch(s){case"input":d=vc(e,d),u=vc(e,u),f=[];break;case"select":d=$t({},d,{value:void 0}),u=$t({},u,{value:void 0}),f=[];break;case"textarea":d=_c(e,d),u=_c(e,u),f=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=Bl)}Ec(s,u);var w;s=null;for(v in d)if(!u.hasOwnProperty(v)&&d.hasOwnProperty(v)&&d[v]!=null)if(v==="style"){var A=d[v];for(w in A)A.hasOwnProperty(w)&&(s||(s={}),s[w]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(ga.hasOwnProperty(v)?f||(f=[]):(f=f||[]).push(v,null));for(v in u){var C=u[v];if(A=d!=null?d[v]:void 0,u.hasOwnProperty(v)&&C!==A&&(C!=null||A!=null))if(v==="style")if(A){for(w in A)!A.hasOwnProperty(w)||C&&C.hasOwnProperty(w)||(s||(s={}),s[w]="");for(w in C)C.hasOwnProperty(w)&&A[w]!==C[w]&&(s||(s={}),s[w]=C[w])}else s||(f||(f=[]),f.push(v,s)),s=C;else v==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,A=A?A.__html:void 0,C!=null&&A!==C&&(f=f||[]).push(v,C)):v==="children"?typeof C!="string"&&typeof C!="number"||(f=f||[]).push(v,""+C):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(ga.hasOwnProperty(v)?(C!=null&&v==="onScroll"&&zt("scroll",e),f||A===C||(f=[])):(f=f||[]).push(v,C))}s&&(f=f||[]).push("style",s);var v=f;(n.updateQueue=v)&&(n.flags|=4)}};dp=function(e,n,s,u){s!==u&&(n.flags|=4)};function Ko(e,n){if(!Wt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Hn(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,u=0;if(n)for(var d=e.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=u,e.childLanes=s,n}function k2(e,n,s){var u=n.pendingProps;switch(Dh(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(n),null;case 1:return dr(n.type)&&Fl(),Hn(n),null;case 3:return u=n.stateNode,Eo(),Ht(hr),Ht(Wn),Zh(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(al(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,si!==null&&(rh(si),si=null))),Kc(e,n),Hn(n),null;case 5:Wh(n);var d=Ns(ba.current);if(s=n.type,e!==null&&n.stateNode!=null)hp(e,n,s,u,d),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!u){if(n.stateNode===null)throw Error(Te(166));return Hn(n),null}if(e=Ns(xi.current),al(n)){u=n.stateNode,s=n.type;var f=n.memoizedProps;switch(u[Ei]=n,u[Sa]=f,e=(n.mode&1)!==0,s){case"dialog":zt("cancel",u),zt("close",u);break;case"iframe":case"object":case"embed":zt("load",u);break;case"video":case"audio":for(d=0;d<ra.length;d++)zt(ra[d],u);break;case"source":zt("error",u);break;case"img":case"image":case"link":zt("error",u),zt("load",u);break;case"details":zt("toggle",u);break;case"input":jd(u,f),zt("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!f.multiple},zt("invalid",u);break;case"textarea":Ud(u,f),zt("invalid",u)}Ec(s,f),d=null;for(var w in f)if(f.hasOwnProperty(w)){var A=f[w];w==="children"?typeof A=="string"?u.textContent!==A&&(f.suppressHydrationWarning!==!0&&ol(u.textContent,A,e),d=["children",A]):typeof A=="number"&&u.textContent!==""+A&&(f.suppressHydrationWarning!==!0&&ol(u.textContent,A,e),d=["children",""+A]):ga.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&zt("scroll",u)}switch(s){case"input":qa(u),zd(u,f,!0);break;case"textarea":qa(u),Hd(u);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(u.onclick=Bl)}u=d,n.updateQueue=u,u!==null&&(n.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=z1(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=w.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=w.createElement(s,{is:u.is}):(e=w.createElement(s),s==="select"&&(w=e,u.multiple?w.multiple=!0:u.size&&(w.size=u.size))):e=w.createElementNS(e,s),e[Ei]=n,e[Sa]=u,cp(e,n,!1,!1),n.stateNode=e;e:{switch(w=Ac(s,u),s){case"dialog":zt("cancel",e),zt("close",e),d=u;break;case"iframe":case"object":case"embed":zt("load",e),d=u;break;case"video":case"audio":for(d=0;d<ra.length;d++)zt(ra[d],e);d=u;break;case"source":zt("error",e),d=u;break;case"img":case"image":case"link":zt("error",e),zt("load",e),d=u;break;case"details":zt("toggle",e),d=u;break;case"input":jd(e,u),d=vc(e,u),zt("invalid",e);break;case"option":d=u;break;case"select":e._wrapperState={wasMultiple:!!u.multiple},d=$t({},u,{value:void 0}),zt("invalid",e);break;case"textarea":Ud(e,u),d=_c(e,u),zt("invalid",e);break;default:d=u}Ec(s,d),A=d;for(f in A)if(A.hasOwnProperty(f)){var C=A[f];f==="style"?V1(e,C):f==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&U1(e,C)):f==="children"?typeof C=="string"?(s!=="textarea"||C!=="")&&ma(e,C):typeof C=="number"&&ma(e,""+C):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ga.hasOwnProperty(f)?C!=null&&f==="onScroll"&&zt("scroll",e):C!=null&&Ch(e,f,C,w))}switch(s){case"input":qa(e),zd(e,u,!1);break;case"textarea":qa(e),Hd(e);break;case"option":u.value!=null&&e.setAttribute("value",""+fs(u.value));break;case"select":e.multiple=!!u.multiple,f=u.value,f!=null?co(e,!!u.multiple,f,!1):u.defaultValue!=null&&co(e,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=Bl)}switch(s){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Hn(n),null;case 6:if(e&&n.stateNode!=null)dp(e,n,e.memoizedProps,u);else{if(typeof u!="string"&&n.stateNode===null)throw Error(Te(166));if(s=Ns(ba.current),Ns(xi.current),al(n)){if(u=n.stateNode,s=n.memoizedProps,u[Ei]=n,(f=u.nodeValue!==s)&&(e=br,e!==null))switch(e.tag){case 3:ol(u.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ol(u.nodeValue,s,(e.mode&1)!==0)}f&&(n.flags|=4)}else u=(s.nodeType===9?s:s.ownerDocument).createTextNode(u),u[Ei]=n,n.stateNode=u}return Hn(n),null;case 13:if(Ht(Kt),u=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Wt&&Ir!==null&&n.mode&1&&!(n.flags&128))O0(),_o(),n.flags|=98560,f=!1;else if(f=al(n),u!==null&&u.dehydrated!==null){if(e===null){if(!f)throw Error(Te(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(Te(317));f[Ei]=n}else _o(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Hn(n),f=!1}else si!==null&&(rh(si),si=null),f=!0;if(!f)return n.flags&65536?n:null}return n.flags&128?(n.lanes=s,n):(u=u!==null,u!==(e!==null&&e.memoizedState!==null)&&u&&(n.child.flags|=8192,n.mode&1&&(e===null||Kt.current&1?An===0&&(An=3):rd())),n.updateQueue!==null&&(n.flags|=4),Hn(n),null);case 4:return Eo(),Kc(e,n),e===null&&Aa(n.stateNode.containerInfo),Hn(n),null;case 10:return zh(n.type._context),Hn(n),null;case 17:return dr(n.type)&&Fl(),Hn(n),null;case 19:if(Ht(Kt),f=n.memoizedState,f===null)return Hn(n),null;if(u=(n.flags&128)!==0,w=f.rendering,w===null)if(u)Ko(f,!1);else{if(An!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(w=Zl(e),w!==null){for(n.flags|=128,Ko(f,!1),u=w.updateQueue,u!==null&&(n.updateQueue=u,n.flags|=4),n.subtreeFlags=0,u=s,s=n.child;s!==null;)f=s,e=u,f.flags&=14680066,w=f.alternate,w===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=w.childLanes,f.lanes=w.lanes,f.child=w.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=w.memoizedProps,f.memoizedState=w.memoizedState,f.updateQueue=w.updateQueue,f.type=w.type,e=w.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Dt(Kt,Kt.current&1|2),n.child}e=e.sibling}f.tail!==null&&dn()>xo&&(n.flags|=128,u=!0,Ko(f,!1),n.lanes=4194304)}else{if(!u)if(e=Zl(w),e!==null){if(n.flags|=128,u=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),Ko(f,!0),f.tail===null&&f.tailMode==="hidden"&&!w.alternate&&!Wt)return Hn(n),null}else 2*dn()-f.renderingStartTime>xo&&s!==1073741824&&(n.flags|=128,u=!0,Ko(f,!1),n.lanes=4194304);f.isBackwards?(w.sibling=n.child,n.child=w):(s=f.last,s!==null?s.sibling=w:n.child=w,f.last=w)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=dn(),n.sibling=null,s=Kt.current,Dt(Kt,u?s&1|2:s&1),n):(Hn(n),null);case 22:case 23:return nd(),u=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==u&&(n.flags|=8192),u&&n.mode&1?Sr&1073741824&&(Hn(n),n.subtreeFlags&6&&(n.flags|=8192)):Hn(n),null;case 24:return null;case 25:return null}throw Error(Te(156,n.tag))}function M2(e,n){switch(Dh(n),n.tag){case 1:return dr(n.type)&&Fl(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Eo(),Ht(hr),Ht(Wn),Zh(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return Wh(n),null;case 13:if(Ht(Kt),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(Te(340));_o()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ht(Kt),null;case 4:return Eo(),null;case 10:return zh(n.type._context),null;case 22:case 23:return nd(),null;case 24:return null;default:return null}}var cl=!1,Vn=!1,P2=typeof WeakSet=="function"?WeakSet:Set,ze=null;function oo(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){tn(e,n,u)}else s.current=null}function Qc(e,n,s){try{s()}catch(u){tn(e,n,u)}}var kf=!1;function L2(e,n){if(Mc=Pl,e=v0(),Ph(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var d=u.anchorOffset,f=u.focusNode;u=u.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var w=0,A=-1,C=-1,v=0,S=0,b=e,R=null;t:for(;;){for(var z;b!==s||d!==0&&b.nodeType!==3||(A=w+d),b!==f||u!==0&&b.nodeType!==3||(C=w+u),b.nodeType===3&&(w+=b.nodeValue.length),(z=b.firstChild)!==null;)R=b,b=z;for(;;){if(b===e)break t;if(R===s&&++v===d&&(A=w),R===f&&++S===u&&(C=w),(z=b.nextSibling)!==null)break;b=R,R=b.parentNode}b=z}s=A===-1||C===-1?null:{start:A,end:C}}else s=null}s=s||{start:0,end:0}}else s=null;for(Pc={focusedElem:e,selectionRange:s},Pl=!1,ze=n;ze!==null;)if(n=ze,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ze=e;else for(;ze!==null;){n=ze;try{var V=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var W=V.memoizedProps,se=V.memoizedState,B=n.stateNode,k=B.getSnapshotBeforeUpdate(n.elementType===n.type?W:ri(n.type,W),se);B.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var T=n.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Te(163))}}catch(H){tn(n,n.return,H)}if(e=n.sibling,e!==null){e.return=n.return,ze=e;break}ze=n.return}return V=kf,kf=!1,V}function ca(e,n,s){var u=n.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&Qc(n,s,f)}d=d.next}while(d!==u)}}function gu(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var u=s.create;s.destroy=u()}s=s.next}while(s!==n)}}function $c(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function fp(e){var n=e.alternate;n!==null&&(e.alternate=null,fp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Ei],delete n[Sa],delete n[Bc],delete n[v2],delete n[w2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pp(e){return e.tag===5||e.tag===3||e.tag===4}function Mf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qc(e,n,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Bl));else if(u!==4&&(e=e.child,e!==null))for(qc(e,n,s),e=e.sibling;e!==null;)qc(e,n,s),e=e.sibling}function Jc(e,n,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(Jc(e,n,s),e=e.sibling;e!==null;)Jc(e,n,s),e=e.sibling}var kn=null,ii=!1;function $i(e,n,s){for(s=s.child;s!==null;)gp(e,n,s),s=s.sibling}function gp(e,n,s){if(Ai&&typeof Ai.onCommitFiberUnmount=="function")try{Ai.onCommitFiberUnmount(au,s)}catch{}switch(s.tag){case 5:Vn||oo(s,n);case 6:var u=kn,d=ii;kn=null,$i(e,n,s),kn=u,ii=d,kn!==null&&(ii?(e=kn,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):kn.removeChild(s.stateNode));break;case 18:kn!==null&&(ii?(e=kn,s=s.stateNode,e.nodeType===8?Qu(e.parentNode,s):e.nodeType===1&&Qu(e,s),_a(e)):Qu(kn,s.stateNode));break;case 4:u=kn,d=ii,kn=s.stateNode.containerInfo,ii=!0,$i(e,n,s),kn=u,ii=d;break;case 0:case 11:case 14:case 15:if(!Vn&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var f=d,w=f.destroy;f=f.tag,w!==void 0&&(f&2||f&4)&&Qc(s,n,w),d=d.next}while(d!==u)}$i(e,n,s);break;case 1:if(!Vn&&(oo(s,n),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(A){tn(s,n,A)}$i(e,n,s);break;case 21:$i(e,n,s);break;case 22:s.mode&1?(Vn=(u=Vn)||s.memoizedState!==null,$i(e,n,s),Vn=u):$i(e,n,s);break;default:$i(e,n,s)}}function Pf(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new P2),n.forEach(function(u){var d=W2.bind(null,e,u);s.has(u)||(s.add(u),u.then(d,d))})}}function ni(e,n){var s=n.deletions;if(s!==null)for(var u=0;u<s.length;u++){var d=s[u];try{var f=e,w=n,A=w;e:for(;A!==null;){switch(A.tag){case 5:kn=A.stateNode,ii=!1;break e;case 3:kn=A.stateNode.containerInfo,ii=!0;break e;case 4:kn=A.stateNode.containerInfo,ii=!0;break e}A=A.return}if(kn===null)throw Error(Te(160));gp(f,w,d),kn=null,ii=!1;var C=d.alternate;C!==null&&(C.return=null),d.return=null}catch(v){tn(d,n,v)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)mp(n,e),n=n.sibling}function mp(e,n){var s=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ni(n,e),yi(e),u&4){try{ca(3,e,e.return),gu(3,e)}catch(W){tn(e,e.return,W)}try{ca(5,e,e.return)}catch(W){tn(e,e.return,W)}}break;case 1:ni(n,e),yi(e),u&512&&s!==null&&oo(s,s.return);break;case 5:if(ni(n,e),yi(e),u&512&&s!==null&&oo(s,s.return),e.flags&32){var d=e.stateNode;try{ma(d,"")}catch(W){tn(e,e.return,W)}}if(u&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,w=s!==null?s.memoizedProps:f,A=e.type,C=e.updateQueue;if(e.updateQueue=null,C!==null)try{A==="input"&&f.type==="radio"&&f.name!=null&&F1(d,f),Ac(A,w);var v=Ac(A,f);for(w=0;w<C.length;w+=2){var S=C[w],b=C[w+1];S==="style"?V1(d,b):S==="dangerouslySetInnerHTML"?U1(d,b):S==="children"?ma(d,b):Ch(d,S,b,v)}switch(A){case"input":wc(d,f);break;case"textarea":j1(d,f);break;case"select":var R=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var z=f.value;z!=null?co(d,!!f.multiple,z,!1):R!==!!f.multiple&&(f.defaultValue!=null?co(d,!!f.multiple,f.defaultValue,!0):co(d,!!f.multiple,f.multiple?[]:"",!1))}d[Sa]=f}catch(W){tn(e,e.return,W)}}break;case 6:if(ni(n,e),yi(e),u&4){if(e.stateNode===null)throw Error(Te(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(W){tn(e,e.return,W)}}break;case 3:if(ni(n,e),yi(e),u&4&&s!==null&&s.memoizedState.isDehydrated)try{_a(n.containerInfo)}catch(W){tn(e,e.return,W)}break;case 4:ni(n,e),yi(e);break;case 13:ni(n,e),yi(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(ed=dn())),u&4&&Pf(e);break;case 22:if(S=s!==null&&s.memoizedState!==null,e.mode&1?(Vn=(v=Vn)||S,ni(n,e),Vn=v):ni(n,e),yi(e),u&8192){if(v=e.memoizedState!==null,(e.stateNode.isHidden=v)&&!S&&e.mode&1)for(ze=e,S=e.child;S!==null;){for(b=ze=S;ze!==null;){switch(R=ze,z=R.child,R.tag){case 0:case 11:case 14:case 15:ca(4,R,R.return);break;case 1:oo(R,R.return);var V=R.stateNode;if(typeof V.componentWillUnmount=="function"){u=R,s=R.return;try{n=u,V.props=n.memoizedProps,V.state=n.memoizedState,V.componentWillUnmount()}catch(W){tn(u,s,W)}}break;case 5:oo(R,R.return);break;case 22:if(R.memoizedState!==null){Df(b);continue}}z!==null?(z.return=R,ze=z):Df(b)}S=S.sibling}e:for(S=null,b=e;;){if(b.tag===5){if(S===null){S=b;try{d=b.stateNode,v?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(A=b.stateNode,C=b.memoizedProps.style,w=C!=null&&C.hasOwnProperty("display")?C.display:null,A.style.display=H1("display",w))}catch(W){tn(e,e.return,W)}}}else if(b.tag===6){if(S===null)try{b.stateNode.nodeValue=v?"":b.memoizedProps}catch(W){tn(e,e.return,W)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;S===b&&(S=null),b=b.return}S===b&&(S=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:ni(n,e),yi(e),u&4&&Pf(e);break;case 21:break;default:ni(n,e),yi(e)}}function yi(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(pp(s)){var u=s;break e}s=s.return}throw Error(Te(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(ma(d,""),u.flags&=-33);var f=Mf(e);Jc(e,f,d);break;case 3:case 4:var w=u.stateNode.containerInfo,A=Mf(e);qc(e,A,w);break;default:throw Error(Te(161))}}catch(C){tn(e,e.return,C)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function D2(e,n,s){ze=e,vp(e)}function vp(e,n,s){for(var u=(e.mode&1)!==0;ze!==null;){var d=ze,f=d.child;if(d.tag===22&&u){var w=d.memoizedState!==null||cl;if(!w){var A=d.alternate,C=A!==null&&A.memoizedState!==null||Vn;A=cl;var v=Vn;if(cl=w,(Vn=C)&&!v)for(ze=d;ze!==null;)w=ze,C=w.child,w.tag===22&&w.memoizedState!==null?Bf(d):C!==null?(C.return=w,ze=C):Bf(d);for(;f!==null;)ze=f,vp(f),f=f.sibling;ze=d,cl=A,Vn=v}Lf(e)}else d.subtreeFlags&8772&&f!==null?(f.return=d,ze=f):Lf(e)}}function Lf(e){for(;ze!==null;){var n=ze;if(n.flags&8772){var s=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Vn||gu(5,n);break;case 1:var u=n.stateNode;if(n.flags&4&&!Vn)if(s===null)u.componentDidMount();else{var d=n.elementType===n.type?s.memoizedProps:ri(n.type,s.memoizedProps);u.componentDidUpdate(d,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var f=n.updateQueue;f!==null&&yf(n,f,u);break;case 3:var w=n.updateQueue;if(w!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}yf(n,w,s)}break;case 5:var A=n.stateNode;if(s===null&&n.flags&4){s=A;var C=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&s.focus();break;case"img":C.src&&(s.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var v=n.alternate;if(v!==null){var S=v.memoizedState;if(S!==null){var b=S.dehydrated;b!==null&&_a(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Te(163))}Vn||n.flags&512&&$c(n)}catch(R){tn(n,n.return,R)}}if(n===e){ze=null;break}if(s=n.sibling,s!==null){s.return=n.return,ze=s;break}ze=n.return}}function Df(e){for(;ze!==null;){var n=ze;if(n===e){ze=null;break}var s=n.sibling;if(s!==null){s.return=n.return,ze=s;break}ze=n.return}}function Bf(e){for(;ze!==null;){var n=ze;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{gu(4,n)}catch(C){tn(n,s,C)}break;case 1:var u=n.stateNode;if(typeof u.componentDidMount=="function"){var d=n.return;try{u.componentDidMount()}catch(C){tn(n,d,C)}}var f=n.return;try{$c(n)}catch(C){tn(n,f,C)}break;case 5:var w=n.return;try{$c(n)}catch(C){tn(n,w,C)}}}catch(C){tn(n,n.return,C)}if(n===e){ze=null;break}var A=n.sibling;if(A!==null){A.return=n.return,ze=A;break}ze=n.return}}var B2=Math.ceil,Yl=Hi.ReactCurrentDispatcher,qh=Hi.ReactCurrentOwner,Wr=Hi.ReactCurrentBatchConfig,mt=0,Nn=null,wn=null,Mn=0,Sr=0,ao=ms(0),An=0,Ra=null,Ds=0,mu=0,Jh=0,ha=null,ur=null,ed=0,xo=1/0,Mi=null,Kl=!1,eh=null,cs=null,hl=!1,is=null,Ql=0,da=0,th=null,xl=-1,Sl=0;function nr(){return mt&6?dn():xl!==-1?xl:xl=dn()}function hs(e){return e.mode&1?mt&2&&Mn!==0?Mn&-Mn:_2.transition!==null?(Sl===0&&(Sl=t0()),Sl):(e=It,e!==0||(e=window.event,e=e===void 0?16:l0(e.type)),e):1}function ai(e,n,s,u){if(50<da)throw da=0,th=null,Error(Te(185));La(e,s,u),(!(mt&2)||e!==Nn)&&(e===Nn&&(!(mt&2)&&(mu|=s),An===4&&ns(e,Mn)),fr(e,u),s===1&&mt===0&&!(n.mode&1)&&(xo=dn()+500,du&&vs()))}function fr(e,n){var s=e.callbackNode;_m(e,n);var u=Ml(e,e===Nn?Mn:0);if(u===0)s!==null&&Zd(s),e.callbackNode=null,e.callbackPriority=0;else if(n=u&-u,e.callbackPriority!==n){if(s!=null&&Zd(s),n===1)e.tag===0?y2(Ff.bind(null,e)):b0(Ff.bind(null,e)),g2(function(){!(mt&6)&&vs()}),s=null;else{switch(n0(u)){case 1:s=Ih;break;case 4:s=J1;break;case 16:s=kl;break;case 536870912:s=e0;break;default:s=kl}s=Sp(s,wp.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function wp(e,n){if(xl=-1,Sl=0,mt&6)throw Error(Te(327));var s=e.callbackNode;if(mo()&&e.callbackNode!==s)return null;var u=Ml(e,e===Nn?Mn:0);if(u===0)return null;if(u&30||u&e.expiredLanes||n)n=$l(e,u);else{n=u;var d=mt;mt|=2;var f=_p();(Nn!==e||Mn!==n)&&(Mi=null,xo=dn()+500,Rs(e,n));do try{z2();break}catch(A){yp(e,A)}while(!0);jh(),Yl.current=f,mt=d,wn!==null?n=0:(Nn=null,Mn=0,n=An)}if(n!==0){if(n===2&&(d=Tc(e),d!==0&&(u=d,n=nh(e,d))),n===1)throw s=Ra,Rs(e,0),ns(e,u),fr(e,dn()),s;if(n===6)ns(e,u);else{if(d=e.current.alternate,!(u&30)&&!F2(d)&&(n=$l(e,u),n===2&&(f=Tc(e),f!==0&&(u=f,n=nh(e,f))),n===1))throw s=Ra,Rs(e,0),ns(e,u),fr(e,dn()),s;switch(e.finishedWork=d,e.finishedLanes=u,n){case 0:case 1:throw Error(Te(345));case 2:Is(e,ur,Mi);break;case 3:if(ns(e,u),(u&130023424)===u&&(n=ed+500-dn(),10<n)){if(Ml(e,0)!==0)break;if(d=e.suspendedLanes,(d&u)!==u){nr(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=Dc(Is.bind(null,e,ur,Mi),n);break}Is(e,ur,Mi);break;case 4:if(ns(e,u),(u&4194240)===u)break;for(n=e.eventTimes,d=-1;0<u;){var w=31-oi(u);f=1<<w,w=n[w],w>d&&(d=w),u&=~f}if(u=d,u=dn()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*B2(u/1960))-u,10<u){e.timeoutHandle=Dc(Is.bind(null,e,ur,Mi),u);break}Is(e,ur,Mi);break;case 5:Is(e,ur,Mi);break;default:throw Error(Te(329))}}}return fr(e,dn()),e.callbackNode===s?wp.bind(null,e):null}function nh(e,n){var s=ha;return e.current.memoizedState.isDehydrated&&(Rs(e,n).flags|=256),e=$l(e,n),e!==2&&(n=ur,ur=s,n!==null&&rh(n)),e}function rh(e){ur===null?ur=e:ur.push.apply(ur,e)}function F2(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var d=s[u],f=d.getSnapshot;d=d.value;try{if(!li(f(),d))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ns(e,n){for(n&=~Jh,n&=~mu,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-oi(n),u=1<<s;e[s]=-1,n&=~u}}function Ff(e){if(mt&6)throw Error(Te(327));mo();var n=Ml(e,0);if(!(n&1))return fr(e,dn()),null;var s=$l(e,n);if(e.tag!==0&&s===2){var u=Tc(e);u!==0&&(n=u,s=nh(e,u))}if(s===1)throw s=Ra,Rs(e,0),ns(e,n),fr(e,dn()),s;if(s===6)throw Error(Te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Is(e,ur,Mi),fr(e,dn()),null}function td(e,n){var s=mt;mt|=1;try{return e(n)}finally{mt=s,mt===0&&(xo=dn()+500,du&&vs())}}function Bs(e){is!==null&&is.tag===0&&!(mt&6)&&mo();var n=mt;mt|=1;var s=Wr.transition,u=It;try{if(Wr.transition=null,It=1,e)return e()}finally{It=u,Wr.transition=s,mt=n,!(mt&6)&&vs()}}function nd(){Sr=ao.current,Ht(ao)}function Rs(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,p2(s)),wn!==null)for(s=wn.return;s!==null;){var u=s;switch(Dh(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Fl();break;case 3:Eo(),Ht(hr),Ht(Wn),Zh();break;case 5:Wh(u);break;case 4:Eo();break;case 13:Ht(Kt);break;case 19:Ht(Kt);break;case 10:zh(u.type._context);break;case 22:case 23:nd()}s=s.return}if(Nn=e,wn=e=ds(e.current,null),Mn=Sr=n,An=0,Ra=null,Jh=mu=Ds=0,ur=ha=null,Ts!==null){for(n=0;n<Ts.length;n++)if(s=Ts[n],u=s.interleaved,u!==null){s.interleaved=null;var d=u.next,f=s.pending;if(f!==null){var w=f.next;f.next=d,u.next=w}s.pending=u}Ts=null}return e}function yp(e,n){do{var s=wn;try{if(jh(),Cl.current=Xl,Gl){for(var u=Qt.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Gl=!1}if(Ls=0,Tn=En=Qt=null,ua=!1,Ta=0,qh.current=null,s===null||s.return===null){An=1,Ra=n,wn=null;break}e:{var f=e,w=s.return,A=s,C=n;if(n=Mn,A.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var v=C,S=A,b=S.tag;if(!(S.mode&1)&&(b===0||b===11||b===15)){var R=S.alternate;R?(S.updateQueue=R.updateQueue,S.memoizedState=R.memoizedState,S.lanes=R.lanes):(S.updateQueue=null,S.memoizedState=null)}var z=Sf(w);if(z!==null){z.flags&=-257,If(z,w,A,f,n),z.mode&1&&xf(f,v,n),n=z,C=v;var V=n.updateQueue;if(V===null){var W=new Set;W.add(C),n.updateQueue=W}else V.add(C);break e}else{if(!(n&1)){xf(f,v,n),rd();break e}C=Error(Te(426))}}else if(Wt&&A.mode&1){var se=Sf(w);if(se!==null){!(se.flags&65536)&&(se.flags|=256),If(se,w,A,f,n),Bh(Ao(C,A));break e}}f=C=Ao(C,A),An!==4&&(An=2),ha===null?ha=[f]:ha.push(f),f=w;do{switch(f.tag){case 3:f.flags|=65536,n&=-n,f.lanes|=n;var B=np(f,C,n);wf(f,B);break e;case 1:A=C;var k=f.type,T=f.stateNode;if(!(f.flags&128)&&(typeof k.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(cs===null||!cs.has(T)))){f.flags|=65536,n&=-n,f.lanes|=n;var H=rp(f,A,n);wf(f,H);break e}}f=f.return}while(f!==null)}Ep(s)}catch(q){n=q,wn===s&&s!==null&&(wn=s=s.return);continue}break}while(!0)}function _p(){var e=Yl.current;return Yl.current=Xl,e===null?Xl:e}function rd(){(An===0||An===3||An===2)&&(An=4),Nn===null||!(Ds&268435455)&&!(mu&268435455)||ns(Nn,Mn)}function $l(e,n){var s=mt;mt|=2;var u=_p();(Nn!==e||Mn!==n)&&(Mi=null,Rs(e,n));do try{j2();break}catch(d){yp(e,d)}while(!0);if(jh(),mt=s,Yl.current=u,wn!==null)throw Error(Te(261));return Nn=null,Mn=0,An}function j2(){for(;wn!==null;)Cp(wn)}function z2(){for(;wn!==null&&!hm();)Cp(wn)}function Cp(e){var n=xp(e.alternate,e,Sr);e.memoizedProps=e.pendingProps,n===null?Ep(e):wn=n,qh.current=null}function Ep(e){var n=e;do{var s=n.alternate;if(e=n.return,n.flags&32768){if(s=M2(s,n),s!==null){s.flags&=32767,wn=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{An=6,wn=null;return}}else if(s=k2(s,n,Sr),s!==null){wn=s;return}if(n=n.sibling,n!==null){wn=n;return}wn=n=e}while(n!==null);An===0&&(An=5)}function Is(e,n,s){var u=It,d=Wr.transition;try{Wr.transition=null,It=1,U2(e,n,s,u)}finally{Wr.transition=d,It=u}return null}function U2(e,n,s,u){do mo();while(is!==null);if(mt&6)throw Error(Te(327));s=e.finishedWork;var d=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(Te(177));e.callbackNode=null,e.callbackPriority=0;var f=s.lanes|s.childLanes;if(Cm(e,f),e===Nn&&(wn=Nn=null,Mn=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||hl||(hl=!0,Sp(kl,function(){return mo(),null})),f=(s.flags&15990)!==0,s.subtreeFlags&15990||f){f=Wr.transition,Wr.transition=null;var w=It;It=1;var A=mt;mt|=4,qh.current=null,L2(e,s),mp(s,e),a2(Pc),Pl=!!Mc,Pc=Mc=null,e.current=s,D2(s),dm(),mt=A,It=w,Wr.transition=f}else e.current=s;if(hl&&(hl=!1,is=e,Ql=d),f=e.pendingLanes,f===0&&(cs=null),gm(s.stateNode),fr(e,dn()),n!==null)for(u=e.onRecoverableError,s=0;s<n.length;s++)d=n[s],u(d.value,{componentStack:d.stack,digest:d.digest});if(Kl)throw Kl=!1,e=eh,eh=null,e;return Ql&1&&e.tag!==0&&mo(),f=e.pendingLanes,f&1?e===th?da++:(da=0,th=e):da=0,vs(),null}function mo(){if(is!==null){var e=n0(Ql),n=Wr.transition,s=It;try{if(Wr.transition=null,It=16>e?16:e,is===null)var u=!1;else{if(e=is,is=null,Ql=0,mt&6)throw Error(Te(331));var d=mt;for(mt|=4,ze=e.current;ze!==null;){var f=ze,w=f.child;if(ze.flags&16){var A=f.deletions;if(A!==null){for(var C=0;C<A.length;C++){var v=A[C];for(ze=v;ze!==null;){var S=ze;switch(S.tag){case 0:case 11:case 15:ca(8,S,f)}var b=S.child;if(b!==null)b.return=S,ze=b;else for(;ze!==null;){S=ze;var R=S.sibling,z=S.return;if(fp(S),S===v){ze=null;break}if(R!==null){R.return=z,ze=R;break}ze=z}}}var V=f.alternate;if(V!==null){var W=V.child;if(W!==null){V.child=null;do{var se=W.sibling;W.sibling=null,W=se}while(W!==null)}}ze=f}}if(f.subtreeFlags&2064&&w!==null)w.return=f,ze=w;else e:for(;ze!==null;){if(f=ze,f.flags&2048)switch(f.tag){case 0:case 11:case 15:ca(9,f,f.return)}var B=f.sibling;if(B!==null){B.return=f.return,ze=B;break e}ze=f.return}}var k=e.current;for(ze=k;ze!==null;){w=ze;var T=w.child;if(w.subtreeFlags&2064&&T!==null)T.return=w,ze=T;else e:for(w=k;ze!==null;){if(A=ze,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:gu(9,A)}}catch(q){tn(A,A.return,q)}if(A===w){ze=null;break e}var H=A.sibling;if(H!==null){H.return=A.return,ze=H;break e}ze=A.return}}if(mt=d,vs(),Ai&&typeof Ai.onPostCommitFiberRoot=="function")try{Ai.onPostCommitFiberRoot(au,e)}catch{}u=!0}return u}finally{It=s,Wr.transition=n}}return!1}function jf(e,n,s){n=Ao(s,n),n=np(e,n,1),e=us(e,n,1),n=nr(),e!==null&&(La(e,1,n),fr(e,n))}function tn(e,n,s){if(e.tag===3)jf(e,e,s);else for(;n!==null;){if(n.tag===3){jf(n,e,s);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(cs===null||!cs.has(u))){e=Ao(s,e),e=rp(n,e,1),n=us(n,e,1),e=nr(),n!==null&&(La(n,1,e),fr(n,e));break}}n=n.return}}function H2(e,n,s){var u=e.pingCache;u!==null&&u.delete(n),n=nr(),e.pingedLanes|=e.suspendedLanes&s,Nn===e&&(Mn&s)===s&&(An===4||An===3&&(Mn&130023424)===Mn&&500>dn()-ed?Rs(e,0):Jh|=s),fr(e,n)}function Ap(e,n){n===0&&(e.mode&1?(n=tl,tl<<=1,!(tl&130023424)&&(tl=4194304)):n=1);var s=nr();e=zi(e,n),e!==null&&(La(e,n,s),fr(e,s))}function V2(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Ap(e,s)}function W2(e,n){var s=0;switch(e.tag){case 13:var u=e.stateNode,d=e.memoizedState;d!==null&&(s=d.retryLane);break;case 19:u=e.stateNode;break;default:throw Error(Te(314))}u!==null&&u.delete(n),Ap(e,s)}var xp;xp=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||hr.current)cr=!0;else{if(!(e.lanes&s)&&!(n.flags&128))return cr=!1,R2(e,n,s);cr=!!(e.flags&131072)}else cr=!1,Wt&&n.flags&1048576&&T0(n,Ul,n.index);switch(n.lanes=0,n.tag){case 2:var u=n.type;Al(e,n),e=n.pendingProps;var d=yo(n,Wn.current);go(n,s),d=Xh(null,n,u,e,d,s);var f=Yh();return n.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,dr(u)?(f=!0,jl(n)):f=!1,n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Hh(n),d.updater=pu,n.stateNode=d,d._reactInternals=n,Vc(n,u,e,s),n=Gc(null,n,u,!0,f,s)):(n.tag=0,Wt&&f&&Lh(n),tr(null,n,d,s),n=n.child),n;case 16:u=n.elementType;e:{switch(Al(e,n),e=n.pendingProps,d=u._init,u=d(u._payload),n.type=u,d=n.tag=G2(u),e=ri(u,e),d){case 0:n=Zc(null,n,u,e,s);break e;case 1:n=Nf(null,n,u,e,s);break e;case 11:n=bf(null,n,u,e,s);break e;case 14:n=Tf(null,n,u,ri(u.type,e),s);break e}throw Error(Te(306,u,""))}return n;case 0:return u=n.type,d=n.pendingProps,d=n.elementType===u?d:ri(u,d),Zc(e,n,u,d,s);case 1:return u=n.type,d=n.pendingProps,d=n.elementType===u?d:ri(u,d),Nf(e,n,u,d,s);case 3:e:{if(ap(n),e===null)throw Error(Te(387));u=n.pendingProps,f=n.memoizedState,d=f.element,P0(e,n),Wl(n,u,null,s);var w=n.memoizedState;if(u=w.element,f.isDehydrated)if(f={element:u,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){d=Ao(Error(Te(423)),n),n=Of(e,n,u,s,d);break e}else if(u!==d){d=Ao(Error(Te(424)),n),n=Of(e,n,u,s,d);break e}else for(Ir=ls(n.stateNode.containerInfo.firstChild),br=n,Wt=!0,si=null,s=k0(n,null,u,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(_o(),u===d){n=Ui(e,n,s);break e}tr(e,n,u,s)}n=n.child}return n;case 5:return L0(n),e===null&&zc(n),u=n.type,d=n.pendingProps,f=e!==null?e.memoizedProps:null,w=d.children,Lc(u,d)?w=null:f!==null&&Lc(u,f)&&(n.flags|=32),op(e,n),tr(e,n,w,s),n.child;case 6:return e===null&&zc(n),null;case 13:return lp(e,n,s);case 4:return Vh(n,n.stateNode.containerInfo),u=n.pendingProps,e===null?n.child=Co(n,null,u,s):tr(e,n,u,s),n.child;case 11:return u=n.type,d=n.pendingProps,d=n.elementType===u?d:ri(u,d),bf(e,n,u,d,s);case 7:return tr(e,n,n.pendingProps,s),n.child;case 8:return tr(e,n,n.pendingProps.children,s),n.child;case 12:return tr(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(u=n.type._context,d=n.pendingProps,f=n.memoizedProps,w=d.value,Dt(Hl,u._currentValue),u._currentValue=w,f!==null)if(li(f.value,w)){if(f.children===d.children&&!hr.current){n=Ui(e,n,s);break e}}else for(f=n.child,f!==null&&(f.return=n);f!==null;){var A=f.dependencies;if(A!==null){w=f.child;for(var C=A.firstContext;C!==null;){if(C.context===u){if(f.tag===1){C=Bi(-1,s&-s),C.tag=2;var v=f.updateQueue;if(v!==null){v=v.shared;var S=v.pending;S===null?C.next=C:(C.next=S.next,S.next=C),v.pending=C}}f.lanes|=s,C=f.alternate,C!==null&&(C.lanes|=s),Uc(f.return,s,n),A.lanes|=s;break}C=C.next}}else if(f.tag===10)w=f.type===n.type?null:f.child;else if(f.tag===18){if(w=f.return,w===null)throw Error(Te(341));w.lanes|=s,A=w.alternate,A!==null&&(A.lanes|=s),Uc(w,s,n),w=f.sibling}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===n){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}tr(e,n,d.children,s),n=n.child}return n;case 9:return d=n.type,u=n.pendingProps.children,go(n,s),d=Zr(d),u=u(d),n.flags|=1,tr(e,n,u,s),n.child;case 14:return u=n.type,d=ri(u,n.pendingProps),d=ri(u.type,d),Tf(e,n,u,d,s);case 15:return ip(e,n,n.type,n.pendingProps,s);case 17:return u=n.type,d=n.pendingProps,d=n.elementType===u?d:ri(u,d),Al(e,n),n.tag=1,dr(u)?(e=!0,jl(n)):e=!1,go(n,s),tp(n,u,d),Vc(n,u,d,s),Gc(null,n,u,!0,e,s);case 19:return up(e,n,s);case 22:return sp(e,n,s)}throw Error(Te(156,n.tag))};function Sp(e,n){return q1(e,n)}function Z2(e,n,s,u){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(e,n,s,u){return new Z2(e,n,s,u)}function id(e){return e=e.prototype,!(!e||!e.isReactComponent)}function G2(e){if(typeof e=="function")return id(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ah)return 11;if(e===xh)return 14}return 2}function ds(e,n){var s=e.alternate;return s===null?(s=Vr(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Il(e,n,s,u,d,f){var w=2;if(u=e,typeof e=="function")id(e)&&(w=1);else if(typeof e=="string")w=5;else e:switch(e){case $s:return ks(s.children,d,f,n);case Eh:w=8,d|=8;break;case fc:return e=Vr(12,s,n,d|2),e.elementType=fc,e.lanes=f,e;case pc:return e=Vr(13,s,n,d),e.elementType=pc,e.lanes=f,e;case gc:return e=Vr(19,s,n,d),e.elementType=gc,e.lanes=f,e;case L1:return vu(s,d,f,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M1:w=10;break e;case P1:w=9;break e;case Ah:w=11;break e;case xh:w=14;break e;case Ji:w=16,u=null;break e}throw Error(Te(130,e==null?e:typeof e,""))}return n=Vr(w,s,n,d),n.elementType=e,n.type=u,n.lanes=f,n}function ks(e,n,s,u){return e=Vr(7,e,u,n),e.lanes=s,e}function vu(e,n,s,u){return e=Vr(22,e,u,n),e.elementType=L1,e.lanes=s,e.stateNode={isHidden:!1},e}function ic(e,n,s){return e=Vr(6,e,null,n),e.lanes=s,e}function sc(e,n,s){return n=Vr(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function X2(e,n,s,u,d){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ju(0),this.expirationTimes=ju(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ju(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function sd(e,n,s,u,d,f,w,A,C){return e=new X2(e,n,s,A,C),n===1?(n=1,f===!0&&(n|=8)):n=0,f=Vr(3,null,null,n),e.current=f,f.stateNode=e,f.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hh(f),e}function Y2(e,n,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qs,key:u==null?null:""+u,children:e,containerInfo:n,implementation:s}}function Ip(e){if(!e)return ps;e=e._reactInternals;e:{if(zs(e)!==e||e.tag!==1)throw Error(Te(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(dr(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(Te(171))}if(e.tag===1){var s=e.type;if(dr(s))return I0(e,s,n)}return n}function bp(e,n,s,u,d,f,w,A,C){return e=sd(s,u,!0,e,d,f,w,A,C),e.context=Ip(null),s=e.current,u=nr(),d=hs(s),f=Bi(u,d),f.callback=n??null,us(s,f,d),e.current.lanes=d,La(e,d,u),fr(e,u),e}function wu(e,n,s,u){var d=n.current,f=nr(),w=hs(d);return s=Ip(s),n.context===null?n.context=s:n.pendingContext=s,n=Bi(f,w),n.payload={element:e},u=u===void 0?null:u,u!==null&&(n.callback=u),e=us(d,n,w),e!==null&&(ai(e,d,w,f),_l(e,d,w)),w}function ql(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zf(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function od(e,n){zf(e,n),(e=e.alternate)&&zf(e,n)}function K2(){return null}var Tp=typeof reportError=="function"?reportError:function(e){console.error(e)};function ad(e){this._internalRoot=e}yu.prototype.render=ad.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(Te(409));wu(e,n,null,null)};yu.prototype.unmount=ad.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Bs(function(){wu(null,e,null,null)}),n[ji]=null}};function yu(e){this._internalRoot=e}yu.prototype.unstable_scheduleHydration=function(e){if(e){var n=s0();e={blockedOn:null,target:e,priority:n};for(var s=0;s<ts.length&&n!==0&&n<ts[s].priority;s++);ts.splice(s,0,e),s===0&&a0(e)}};function ld(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Uf(){}function Q2(e,n,s,u,d){if(d){if(typeof u=="function"){var f=u;u=function(){var v=ql(w);f.call(v)}}var w=bp(n,u,e,0,null,!1,!1,"",Uf);return e._reactRootContainer=w,e[ji]=w.current,Aa(e.nodeType===8?e.parentNode:e),Bs(),w}for(;d=e.lastChild;)e.removeChild(d);if(typeof u=="function"){var A=u;u=function(){var v=ql(C);A.call(v)}}var C=sd(e,0,!1,null,null,!1,!1,"",Uf);return e._reactRootContainer=C,e[ji]=C.current,Aa(e.nodeType===8?e.parentNode:e),Bs(function(){wu(n,C,s,u)}),C}function Cu(e,n,s,u,d){var f=s._reactRootContainer;if(f){var w=f;if(typeof d=="function"){var A=d;d=function(){var C=ql(w);A.call(C)}}wu(n,w,e,d)}else w=Q2(s,n,e,d,u);return ql(w)}r0=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=na(n.pendingLanes);s!==0&&(bh(n,s|1),fr(n,dn()),!(mt&6)&&(xo=dn()+500,vs()))}break;case 13:Bs(function(){var u=zi(e,1);if(u!==null){var d=nr();ai(u,e,1,d)}}),od(e,1)}};Th=function(e){if(e.tag===13){var n=zi(e,134217728);if(n!==null){var s=nr();ai(n,e,134217728,s)}od(e,134217728)}};i0=function(e){if(e.tag===13){var n=hs(e),s=zi(e,n);if(s!==null){var u=nr();ai(s,e,n,u)}od(e,n)}};s0=function(){return It};o0=function(e,n){var s=It;try{return It=e,n()}finally{It=s}};Sc=function(e,n,s){switch(n){case"input":if(wc(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var u=s[n];if(u!==e&&u.form===e.form){var d=hu(u);if(!d)throw Error(Te(90));B1(u),wc(u,d)}}}break;case"textarea":j1(e,s);break;case"select":n=s.value,n!=null&&co(e,!!s.multiple,n,!1)}};G1=td;X1=Bs;var $2={usingClientEntryPoint:!1,Events:[Ba,to,hu,W1,Z1,td]},Qo={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q2={bundleType:Qo.bundleType,version:Qo.version,rendererPackageName:Qo.rendererPackageName,rendererConfig:Qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Q1(e),e===null?null:e.stateNode},findFiberByHostInstance:Qo.findFiberByHostInstance||K2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{au=dl.inject(q2),Ai=dl}catch{}}Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$2;Nr.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ld(n))throw Error(Te(200));return Y2(e,n,null,s)};Nr.createRoot=function(e,n){if(!ld(e))throw Error(Te(299));var s=!1,u="",d=Tp;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),n=sd(e,1,!1,null,null,s,!1,u,d),e[ji]=n.current,Aa(e.nodeType===8?e.parentNode:e),new ad(n)};Nr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(Te(188)):(e=Object.keys(e).join(","),Error(Te(268,e)));return e=Q1(n),e=e===null?null:e.stateNode,e};Nr.flushSync=function(e){return Bs(e)};Nr.hydrate=function(e,n,s){if(!_u(n))throw Error(Te(200));return Cu(null,e,n,!0,s)};Nr.hydrateRoot=function(e,n,s){if(!ld(e))throw Error(Te(405));var u=s!=null&&s.hydratedSources||null,d=!1,f="",w=Tp;if(s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(w=s.onRecoverableError)),n=bp(n,null,e,1,s??null,d,!1,f,w),e[ji]=n.current,Aa(e),u)for(e=0;e<u.length;e++)s=u[e],d=s._getVersion,d=d(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,d]:n.mutableSourceEagerHydrationData.push(s,d);return new yu(n)};Nr.render=function(e,n,s){if(!_u(n))throw Error(Te(200));return Cu(null,e,n,!1,s)};Nr.unmountComponentAtNode=function(e){if(!_u(e))throw Error(Te(40));return e._reactRootContainer?(Bs(function(){Cu(null,null,e,!1,function(){e._reactRootContainer=null,e[ji]=null})}),!0):!1};Nr.unstable_batchedUpdates=td;Nr.unstable_renderSubtreeIntoContainer=function(e,n,s,u){if(!_u(s))throw Error(Te(200));if(e==null||e._reactInternals===void 0)throw Error(Te(38));return Cu(e,n,s,!1,u)};Nr.version="18.3.1-next-f1338f8080-20240426";function Np(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Np)}catch(e){console.error(e)}}Np(),N1.exports=Nr;var Op=N1.exports,Hf=Op;hc.createRoot=Hf.createRoot,hc.hydrateRoot=Hf.hydrateRoot;var ih={exports:{}};/*! mobile-drag-drop 3.0.0-rc.0 | Copyright (c) 2022 Tim Ruffles | MIT License */(function(e,n){(function(s,u){u(n)})(iu,function(s){var u="dnd-poly-",d=["none","copy","copyLink","copyMove","link","linkMove","move","all"],f=["none","copy","move","link"];function w(){var ee=!1;try{var le=Object.defineProperty({},"passive",{get:function(){ee=!0}});window.addEventListener("test",null,le)}catch{}return ee}var A=w();function C(ee){return ee&&ee.tagName}function v(ee,le,Q){document.addEventListener(ee,le,!!A&&{passive:Q})}function S(ee,le){document.removeEventListener(ee,le)}function b(ee,le,Q,_e){_e===void 0&&(_e=!1);var fe=A?{passive:!0,capture:_e}:_e;return ee.addEventListener(le,Q,fe),{off:function(){ee.removeEventListener(le,Q,fe)}}}function R(ee){return ee.length===0?0:ee.reduce(function(le,Q){return Q+le},0)/ee.length}function z(ee,le){for(var Q=0;Q<ee.changedTouches.length;Q++)if(ee.changedTouches[Q].identifier===le)return!0;return!1}function V(ee,le,Q){for(var _e=[],fe=[],te=0;te<le.touches.length;te++){var pe=le.touches[te];_e.push(pe[ee+"X"]),fe.push(pe[ee+"Y"])}Q.x=R(_e),Q.y=R(fe)}var W=["","-webkit-"];function se(ee,pe,Q,_e,fe){var te=pe.x,pe=pe.y;_e&&(te+=_e.x,pe+=_e.y),(fe=fe===void 0||fe)&&(te-=parseInt(ee.offsetWidth,10)/2,pe-=parseInt(ee.offsetHeight,10)/2);for(var ae="translate3d("+te+"px,"+pe+"px, 0)",Ae=0;Ae<W.length;Ae++){var Ne=W[Ae]+"transform";ee.style[Ne]=ae+" "+Q[Ae]}}var B=(Object.defineProperty(k.prototype,"dropEffect",{get:function(){return this.t},set:function(ee){this.i.mode!==0&&-1<d.indexOf(ee)&&(this.t=ee)},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"types",{get:function(){if(this.i.mode!==0)return Object.freeze(this.i.types)},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"effectAllowed",{get:function(){return this.i.effectAllowed},set:function(ee){this.i.mode===2&&-1<d.indexOf(ee)&&(this.i.effectAllowed=ee)},enumerable:!1,configurable:!0}),k.prototype.setData=function(ee,le){if(this.i.mode===2){if(-1<ee.indexOf(" "))throw new Error("illegal arg: type contains space");this.i.data[ee]=le,this.i.types.indexOf(ee)===-1&&this.i.types.push(ee)}},k.prototype.getData=function(ee){if(this.i.mode===1||this.i.mode===2)return this.i.data[ee]||""},k.prototype.clearData=function(ee){this.i.mode===2&&(ee&&this.i.data[ee]?(delete this.i.data[ee],-1<(ee=this.i.types.indexOf(ee))&&this.i.types.splice(ee,1)):(this.i.data={},this.i.types=[]))},k.prototype.setDragImage=function(ee,le,Q){this.i.mode===2&&this.h(ee,le,Q)},k);function k(ee,le){this.i=ee,this.h=le,this.t=f[0]}function T(ee,le){return ee?ee===d[0]?f[0]:ee.indexOf(d[1])===0||ee===d[7]?f[1]:ee.indexOf(d[4])===0?f[3]:ee===d[6]?f[2]:f[1]:le.nodeType===3&&le.tagName==="A"?f[3]:f[1]}function H(ee,le,Q,_e,fe,te,pe){return pe===void 0&&(pe=null),fe=function(ae,Ae,Ne,He,ye,Re,ge){pe===void 0&&(ge=null);var dt=Q.changedTouches[0],He=new Event(ee,{bubbles:!0,cancelable:He});return He.dataTransfer=Re,He.relatedTarget=ge,He.screenX=dt.screenX,He.screenY=dt.screenY,He.clientX=dt.clientX,He.clientY=dt.clientY,He.pageX=dt.pageX,He.pageY=dt.pageY,ae=ae.getBoundingClientRect(),He.offsetX=He.clientX-ae.left,He.offsetY=He.clientY-ae.top,He}(le,0,0,te=te===void 0||te,document.defaultView,fe,pe),fe=!le.dispatchEvent(fe),_e.mode=0,fe}function q(ee,le){if(!ee||ee===d[7])return le;if(le===f[1]){if(ee.indexOf(f[1])===0)return f[1]}else if(le===f[3]){if(ee.indexOf(f[3])===0||-1<ee.indexOf("Link"))return f[3]}else if(le===f[2]&&(ee.indexOf(f[2])===0||-1<ee.indexOf("Move")))return f[2];return f[0]}var X=(U.prototype.o=function(){var ee=this;this.u=1,this.l=f[0],this.v={data:{},effectAllowed:void 0,mode:3,types:[]},this.p={x:null,y:null},this.g={x:null,y:null};var le=this.m;if(this.I=new B(this.v,function(te,pe,ae){le=te,typeof pe!="number"&&typeof ae!="number"||(ee.j={x:pe||0,y:ae||0})}),this.v.mode=2,this.I.dropEffect=f[0],H("dragstart",this.m,this.k,this.v,this.I))return this.u=3,this.C(),!1;V("page",this.k,this.g);var Q,_e,fe=this.S.dragImageSetup(le);return this.A=(Q=fe,W.map(function(te){return te=Q.style[te+"transform"],te&&te!=="none"?te.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,""):""})),fe.style.position="absolute",fe.style.left="0px",fe.style.top="0px",fe.style.zIndex="999999",fe.classList.add("dnd-poly-drag-image"),fe.classList.add("dnd-poly-icon"),this.O=fe,this.j||(this.S.dragImageOffset?this.j={x:this.S.dragImageOffset.x,y:this.S.dragImageOffset.y}:this.S.dragImageCenterOnTouch?(_e=getComputedStyle(le),this.j={x:0-parseInt(_e.marginLeft,10),y:0-parseInt(_e.marginTop,10)}):(fe=le.getBoundingClientRect(),_e=getComputedStyle(le),this.j={x:fe.left-this.M.clientX-parseInt(_e.marginLeft,10)+fe.width/2,y:fe.top-this.M.clientY-parseInt(_e.marginTop,10)+fe.height/2})),se(this.O,this.g,this.A,this.j,this.S.dragImageCenterOnTouch),document.body.appendChild(this.O),this.D=window.setInterval(function(){ee.F||(ee.F=!0,ee.N(),ee.F=!1)},this.S.iterationInterval),!0},U.prototype.C=function(){this.D&&(clearInterval(this.D),this.D=null),S("touchmove",this.P),S("touchend",this.T),S("touchcancel",this.T),this.O&&(this.O.parentNode.removeChild(this.O),this.O=null),this.L(this.S,this.k,this.u)},U.prototype._=function(ee){var le=this;if(z(ee,this.M.identifier)!==!1){if(this.k=ee,this.u===0){var Q=void 0;if(this.S.dragStartConditionOverride)try{Q=this.S.dragStartConditionOverride(ee)}catch{Q=!1}else Q=ee.touches.length===1;return Q?void(this.o()===!0&&(this.H.preventDefault(),ee.preventDefault())):void this.C()}if(ee.preventDefault(),V("client",ee,this.p),V("page",ee,this.g),this.S.dragImageTranslateOverride)try{var _e=!1;if(this.S.dragImageTranslateOverride(ee,{x:this.p.x,y:this.p.y},this.V,function(fe,te){le.O&&(_e=!0,le.p.x+=fe,le.p.y+=te,le.g.x+=fe,le.g.y+=te,se(le.O,le.g,le.A,le.j,le.S.dragImageCenterOnTouch))}),_e)return}catch{}se(this.O,this.g,this.A,this.j,this.S.dragImageCenterOnTouch)}},U.prototype.X=function(ee){if(z(ee,this.M.identifier)!==!1){if(this.S.dragImageTranslateOverride)try{this.S.dragImageTranslateOverride(void 0,void 0,void 0,function(){})}catch{}this.u!==0?(ee.preventDefault(),this.u=ee.type==="touchcancel"?3:2):this.C()}},U.prototype.N=function(){var ee=this,le=this.l;this.v.mode=3,this.I.dropEffect=f[0];var Q,_e,fe,te,pe,ae=H("drag",this.m,this.k,this.v,this.I);if(ae&&(this.l=f[0]),ae||this.u===2||this.u===3)return this.Y(this.u)?(te=this.m,Q=this.O,_e=this.A,Ne=function(){ee.q()},void((pe=getComputedStyle(te)).visibility!=="hidden"&&pe.display!=="none"?(Q.classList.add("dnd-poly-snapback"),fe=getComputedStyle(Q),ae=parseFloat(fe.transitionDuration),isNaN(ae)||ae===0?Ne():((te={x:(Ae=te.getBoundingClientRect()).left,y:Ae.top}).x+=document.body.scrollLeft||document.documentElement.scrollLeft,te.y+=document.body.scrollTop||document.documentElement.scrollTop,te.x-=parseInt(pe.marginLeft,10),te.y-=parseInt(pe.marginTop,10),Ae=parseFloat(fe.transitionDelay),Ae=Math.round(1e3*(ae+Ae)),se(Q,te,_e,void 0,!1),setTimeout(Ne,Ae))):Ne())):void this.q();var Ae=this.S.elementFromPoint(this.p.x,this.p.y),Ne=this.B;Ae!==this.V&&Ae!==this.B&&(this.V=Ae,this.B!==null&&(this.v.mode=3,this.I.dropEffect=f[0],H("dragexit",this.B,this.k,this.v,this.I,!1)),this.V===null?this.B=this.V:(this.v.mode=3,this.I.dropEffect=T(this.v.effectAllowed,this.m),H("dragenter",this.V,this.k,this.v,this.I)?(this.B=this.V,this.l=q(this.I.effectAllowed,this.I.dropEffect)):this.V!==document.body&&(this.B=document.body))),Ne!==this.B&&C(Ne)&&(this.v.mode=3,this.I.dropEffect=f[0],H("dragleave",Ne,this.k,this.v,this.I,!1,this.B)),C(this.B)&&(this.v.mode=3,this.I.dropEffect=T(this.v.effectAllowed,this.m),H("dragover",this.B,this.k,this.v,this.I)===!1?this.l=f[0]:this.l=q(this.I.effectAllowed,this.I.dropEffect)),le!==this.l&&this.O.classList.remove(u+le),le=u+this.l,this.O.classList.add(le)},U.prototype.Y=function(ee){return ee=this.l===f[0]||this.B===null||ee===3,ee?C(this.B)&&(this.v.mode=3,this.I.dropEffect=f[0],H("dragleave",this.B,this.k,this.v,this.I,!1)):C(this.B)&&(this.v.mode=1,this.I.dropEffect=this.l,H("drop",this.B,this.k,this.v,this.I)===!0?this.l=this.I.dropEffect:this.l=f[0]),ee},U.prototype.q=function(){this.v.mode=3,this.I.dropEffect=this.l,H("dragend",this.m,this.k,this.v,this.I,!1),this.u=2,this.C()},U);function U(ee,le,Q,_e){this.H=ee,this.S=le,this.m=Q,this.L=_e,this.u=0,this.V=null,this.B=null,this.k=ee,this.M=ee.changedTouches[0],this.P=this._.bind(this),this.T=this.X.bind(this),v("touchmove",this.P,!1),v("touchend",this.T,!1),v("touchcancel",this.T,!1)}var Z,G={iterationInterval:150,tryFindDraggableTarget:function(ee){for(var le=0,Q=ee.composedPath();le<Q.length;le++){var _e=Q[le];do if(_e.draggable!==!1&&(_e.draggable===!0||_e.getAttribute&&_e.getAttribute("draggable")==="true"))return _e;while((_e=_e.parentNode)&&_e!==document.body)}},dragImageSetup:function(ee){var le=ee.cloneNode(!0);return function Q(_e,fe){if(_e.nodeType===1){for(var te,pe,ae=getComputedStyle(_e),Ae=0;Ae<ae.length;Ae++){var Ne=ae[Ae];fe.style.setProperty(Ne,ae.getPropertyValue(Ne),ae.getPropertyPriority(Ne))}fe.style.pointerEvents="none",fe.removeAttribute("id"),fe.removeAttribute("class"),fe.removeAttribute("draggable"),fe.nodeName==="CANVAS"&&(te=fe,pe=(pe=_e).getContext("2d").getImageData(0,0,pe.width,pe.height),te.getContext("2d").putImageData(pe,0,0))}if(_e.hasChildNodes())for(Ae=0;Ae<_e.childNodes.length;Ae++)Q(_e.childNodes[Ae],fe.childNodes[Ae]);(function Ce(ye){if(ye instanceof HTMLElement&&(ye.style.pointerEvents="none"),ye.children&&ye.children.length)for(var Re=0;Re<ye.children.length;Re++)Ce(ye.children[Re]);if(ye.shadowRoot&&ye.shadowRoot.children.length)for(Re=0;Re<ye.shadowRoot.children.length;Re++)Ce(ye.shadowRoot.children[Re])})(fe)}(ee,le),le},elementFromPoint:function(ee,le){var Q=document.elementFromPoint(ee,le);if(Q){for(;Q.shadowRoot;){var _e=Q.shadowRoot.elementFromPoint(ee,le);if(_e===null||_e===Q)break;Q=_e}return Q}}};function oe(ee){if(!Z){var le=G.tryFindDraggableTarget(ee);if(le)try{Z=new X(ee,G,le,de)}catch(Q){throw de(G,ee,3),Q}}}function re(ee){function le(Ae){fe.off(),te.off(),pe.off(),ae.off(),Q&&Q.dispatchEvent(new CustomEvent("dnd-poly-dragstart-cancel",{bubbles:!0,cancelable:!0})),clearTimeout(_e)}var Q=ee.target;Q&&Q.dispatchEvent(new CustomEvent("dnd-poly-dragstart-pending",{bubbles:!0,cancelable:!0}));var _e=window.setTimeout(function(){fe.off(),te.off(),pe.off(),ae.off(),oe(ee)},G.holdToDrag),fe=b(Q,"touchend",le),te=b(Q,"touchcancel",le),pe=b(Q,"touchmove",le),ae=b(window,"scroll",le,!0)}function de(ee,le,Q){if(Q===0&&ee.defaultActionOverride)try{ee.defaultActionOverride(le),le.defaultPrevented}catch{}Z=null}s.polyfill=function(ee){if(ee&&Object.keys(ee).forEach(function(Q){G[Q]=ee[Q]}),!G.forceApply&&(le=(le=!!window.chrome||/chrome/i.test(navigator.userAgent),{dragEvents:"ondragstart"in document.documentElement,draggable:"draggable"in document.documentElement,userAgentSupportingNativeDnD:!(/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||le&&"ontouchstart"in document.documentElement)}),le.userAgentSupportingNativeDnD&&le.draggable&&le.dragEvents))return!1;var le;return G.holdToDrag?v("touchstart",re,!1):v("touchstart",oe,!1),!0},s.supportsPassiveEventListener=w,Object.defineProperty(s,"G",{value:!0})})})(ih,ih.exports);var J2=ih.exports,sh={exports:{}};(function(e,n){(function(s,u){u(n)})(iu,function(s){function u(G){return G===document.body||G===document.documentElement}function d(G,oe){var re;if(u(G))re=oe===0?G.clientLeft:G.clientTop;else{var de=G.getBoundingClientRect();re=oe===0?de.left:de.top}return re}function f(G,oe){var re;return u(G)?re=oe===0?window.innerWidth:window.innerHeight:re=oe===0?G.clientWidth:G.clientHeight,re}function w(G,oe,re){var de=oe===0?"scrollLeft":"scrollTop",ee=u(G);if(arguments.length===2)return ee?document.body[de]||document.documentElement[de]:G[de];ee?(document.documentElement[de]+=re,document.body[de]+=re):G[de]+=re}function A(G){var oe=getComputedStyle(G);return G.scrollHeight>G.clientHeight&&(oe.overflowY==="scroll"||oe.overflowY==="auto")||G.scrollWidth>G.clientWidth&&(oe.overflowX==="scroll"||oe.overflowX==="auto")}function C(G){do{if(!G)return;if(A(G))return G;if(G===document.documentElement)return null}while(G=G.parentNode);return null}function v(G,oe,re){return G<re?-1:oe-G<re?1:0}function S(G,oe,re,de){return G===-1?Math.abs(oe-de):G===1?Math.abs(re-oe-de):0}function b(G,oe,re){var de=G===0?re.scrollX:re.scrollY;if(oe===1){var ee=G===0?re.scrollWidth-re.width:re.scrollHeight-re.height;return de>=ee}else if(oe===-1)return de<=0;return!0}var R={threshold:75,velocityFn:function(G,oe){var re=G/oe,de=re*re*re;return de*oe}},z={horizontal:0,vertical:0},V={x:0,y:0},W,se,B,k,T;function H(G,oe,re,de){se=oe,T=de,B!==re&&(B=re,k=C(B));var ee=U(se,k,R.threshold,z,V);ee?q():W&&(window.cancelAnimationFrame(W),W=null)}function q(){W||(W=window.requestAnimationFrame(X))}function X(){var G=0,oe=0,re=u(k);z.horizontal!==0&&(G=Math.round(R.velocityFn(V.x,R.threshold)*z.horizontal),w(k,0,G)),z.vertical!==0&&(oe=Math.round(R.velocityFn(V.y,R.threshold)*z.vertical),w(k,1,oe)),re?T(G,oe):T(0,0),W=null,U(se,k,R.threshold,z,V)&&q()}function U(G,oe,re,de,ee){if(!G||!oe)return!1;var le={x:d(oe,0),y:d(oe,1),width:f(oe,0),height:f(oe,1),scrollX:w(oe,0),scrollY:w(oe,1),scrollWidth:oe.scrollWidth,scrollHeight:oe.scrollHeight},Q={x:G.x-le.x,y:G.y-le.y};return de.horizontal=v(Q.x,le.width,re),de.vertical=v(Q.y,le.height,re),de.horizontal&&b(0,de.horizontal,le)?de.horizontal=0:de.horizontal&&(ee.x=S(de.horizontal,Q.x,le.width,re)),de.vertical&&b(1,de.vertical,le)?de.vertical=0:de.vertical&&(ee.y=S(de.vertical,Q.y,le.height,re)),!!(de.horizontal||de.vertical)}var Z=H;s.scrollBehaviourDragImageTranslateOverride=Z,Object.defineProperty(s,"__esModule",{value:!0})})})(sh,sh.exports);var ev=sh.exports;const tv=""+new URL("compass-DjuYXV7z.png",import.meta.url).href,nv=""+new URL("layer-tgRGCNyO.png",import.meta.url).href,rv=""+new URL("menu-CTekbRYg.png",import.meta.url).href,iv=""+new URL("route-oCgy4FtE.png",import.meta.url).href,sv=""+new URL("settings-DL-iSASc.png",import.meta.url).href,ov=""+new URL("zoom-BsLudKLj.png",import.meta.url).href;function av(e,n){const s=K.useRef(n);K.useEffect(function(){n!==s.current&&e.attributionControl!=null&&(s.current!=null&&e.attributionControl.removeAttribution(s.current),n!=null&&e.attributionControl.addAttribution(n)),s.current=n},[e,n])}const lv=1;function uv(e){return Object.freeze({__version:lv,map:e})}function Rp(e,n){return Object.freeze({...e,...n})}const kp=K.createContext(null),Mp=kp.Provider;function Eu(){const e=K.useContext(kp);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Pp(e){function n(s,u){const{instance:d,context:f}=e(s).current;return K.useImperativeHandle(u,()=>d),s.children==null?null:Vt.createElement(Mp,{value:f},s.children)}return K.forwardRef(n)}function Lp(e){function n(s,u){const{instance:d}=e(s).current;return K.useImperativeHandle(u,()=>d),null}return K.forwardRef(n)}function cv(e){return function(s){const u=Eu(),d=e(s,u),{instance:f}=d.current,w=K.useRef(s.position),{position:A}=s;return K.useEffect(function(){return f.addTo(u.map),function(){f.remove()}},[u.map,f]),K.useEffect(function(){A!=null&&A!==w.current&&(f.setPosition(A),w.current=A)},[f,A]),d}}function Dp(e,n){const s=K.useRef();K.useEffect(function(){return n!=null&&e.instance.on(n),s.current=n,function(){s.current!=null&&e.instance.off(s.current),s.current=null}},[e,n])}function ud(e,n){const s=e.pane??n.pane;return s?{...e,pane:s}:e}var oh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(s,u){u(n)})(iu,function(s){var u="1.9.4";function d(i){var c,g,_,x;for(g=1,_=arguments.length;g<_;g++){x=arguments[g];for(c in x)i[c]=x[c]}return i}var f=Object.create||function(){function i(){}return function(c){return i.prototype=c,new i}}();function w(i,c){var g=Array.prototype.slice;if(i.bind)return i.bind.apply(i,g.call(arguments,1));var _=g.call(arguments,2);return function(){return i.apply(c,_.length?_.concat(g.call(arguments)):arguments)}}var A=0;function C(i){return"_leaflet_id"in i||(i._leaflet_id=++A),i._leaflet_id}function v(i,c,g){var _,x,D,Y;return Y=function(){_=!1,x&&(D.apply(g,x),x=!1)},D=function(){_?x=arguments:(i.apply(g,arguments),setTimeout(Y,c),_=!0)},D}function S(i,c,g){var _=c[1],x=c[0],D=_-x;return i===_&&g?i:((i-x)%D+D)%D+x}function b(){return!1}function R(i,c){if(c===!1)return i;var g=Math.pow(10,c===void 0?6:c);return Math.round(i*g)/g}function z(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function V(i){return z(i).split(/\s+/)}function W(i,c){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?f(i.options):{});for(var g in c)i.options[g]=c[g];return i.options}function se(i,c,g){var _=[];for(var x in i)_.push(encodeURIComponent(g?x.toUpperCase():x)+"="+encodeURIComponent(i[x]));return(!c||c.indexOf("?")===-1?"?":"&")+_.join("&")}var B=/\{ *([\w_ -]+) *\}/g;function k(i,c){return i.replace(B,function(g,_){var x=c[_];if(x===void 0)throw new Error("No value provided for variable "+g);return typeof x=="function"&&(x=x(c)),x})}var T=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function H(i,c){for(var g=0;g<i.length;g++)if(i[g]===c)return g;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var U=0;function Z(i){var c=+new Date,g=Math.max(0,16-(c-U));return U=c+g,window.setTimeout(i,g)}var G=window.requestAnimationFrame||X("RequestAnimationFrame")||Z,oe=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function re(i,c,g){if(g&&G===Z)i.call(c);else return G.call(window,w(i,c))}function de(i){i&&oe.call(window,i)}var ee={__proto__:null,extend:d,create:f,bind:w,get lastId(){return A},stamp:C,throttle:v,wrapNum:S,falseFn:b,formatNum:R,trim:z,splitWords:V,setOptions:W,getParamString:se,template:k,isArray:T,indexOf:H,emptyImageUrl:q,requestFn:G,cancelFn:oe,requestAnimFrame:re,cancelAnimFrame:de};function le(){}le.extend=function(i){var c=function(){W(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=c.__super__=this.prototype,_=f(g);_.constructor=c,c.prototype=_;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(c[x]=this[x]);return i.statics&&d(c,i.statics),i.includes&&(Q(i.includes),d.apply(null,[_].concat(i.includes))),d(_,i),delete _.statics,delete _.includes,_.options&&(_.options=g.options?f(g.options):{},d(_.options,i.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var D=0,Y=_._initHooks.length;D<Y;D++)_._initHooks[D].call(this)}},c},le.include=function(i){var c=this.prototype.options;return d(this.prototype,i),i.options&&(this.prototype.options=c,this.mergeOptions(i.options)),this},le.mergeOptions=function(i){return d(this.prototype.options,i),this},le.addInitHook=function(i){var c=Array.prototype.slice.call(arguments,1),g=typeof i=="function"?i:function(){this[i].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function Q(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=T(i)?i:[i];for(var c=0;c<i.length;c++)i[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var _e={on:function(i,c,g){if(typeof i=="object")for(var _ in i)this._on(_,i[_],c);else{i=V(i);for(var x=0,D=i.length;x<D;x++)this._on(i[x],c,g)}return this},off:function(i,c,g){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var _ in i)this._off(_,i[_],c);else{i=V(i);for(var x=arguments.length===1,D=0,Y=i.length;D<Y;D++)x?this._off(i[D]):this._off(i[D],c,g)}return this},_on:function(i,c,g,_){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(i,c,g)===!1){g===this&&(g=void 0);var x={fn:c,ctx:g};_&&(x.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(x)}},_off:function(i,c,g){var _,x,D;if(this._events&&(_=this._events[i],!!_)){if(arguments.length===1){if(this._firingCount)for(x=0,D=_.length;x<D;x++)_[x].fn=b;delete this._events[i];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var Y=this._listens(i,c,g);if(Y!==!1){var ie=_[Y];this._firingCount&&(ie.fn=b,this._events[i]=_=_.slice()),_.splice(Y,1)}}},fire:function(i,c,g){if(!this.listens(i,g))return this;var _=d({},c,{type:i,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var x=this._events[i];if(x){this._firingCount=this._firingCount+1||1;for(var D=0,Y=x.length;D<Y;D++){var ie=x[D],he=ie.fn;ie.once&&this.off(i,he,ie.ctx),he.call(ie.ctx||this,_)}this._firingCount--}}return g&&this._propagateEvent(_),this},listens:function(i,c,g,_){typeof i!="string"&&console.warn('"string" type argument expected');var x=c;typeof c!="function"&&(_=!!c,x=void 0,g=void 0);var D=this._events&&this._events[i];if(D&&D.length&&this._listens(i,x,g)!==!1)return!0;if(_){for(var Y in this._eventParents)if(this._eventParents[Y].listens(i,c,g,_))return!0}return!1},_listens:function(i,c,g){if(!this._events)return!1;var _=this._events[i]||[];if(!c)return!!_.length;g===this&&(g=void 0);for(var x=0,D=_.length;x<D;x++)if(_[x].fn===c&&_[x].ctx===g)return x;return!1},once:function(i,c,g){if(typeof i=="object")for(var _ in i)this._on(_,i[_],c,!0);else{i=V(i);for(var x=0,D=i.length;x<D;x++)this._on(i[x],c,g,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[C(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[C(i)],this},_propagateEvent:function(i){for(var c in this._eventParents)this._eventParents[c].fire(i.type,d({layer:i.target,propagatedFrom:i.target},i),!0)}};_e.addEventListener=_e.on,_e.removeEventListener=_e.clearAllEventListeners=_e.off,_e.addOneTimeEventListener=_e.once,_e.fireEvent=_e.fire,_e.hasEventListeners=_e.listens;var fe=le.extend(_e);function te(i,c,g){this.x=g?Math.round(i):i,this.y=g?Math.round(c):c}var pe=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};te.prototype={clone:function(){return new te(this.x,this.y)},add:function(i){return this.clone()._add(ae(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(ae(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new te(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new te(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pe(this.x),this.y=pe(this.y),this},distanceTo:function(i){i=ae(i);var c=i.x-this.x,g=i.y-this.y;return Math.sqrt(c*c+g*g)},equals:function(i){return i=ae(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=ae(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+R(this.x)+", "+R(this.y)+")"}};function ae(i,c,g){return i instanceof te?i:T(i)?new te(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new te(i.x,i.y):new te(i,c,g)}function Ae(i,c){if(i)for(var g=c?[i,c]:i,_=0,x=g.length;_<x;_++)this.extend(g[_])}Ae.prototype={extend:function(i){var c,g;if(!i)return this;if(i instanceof te||typeof i[0]=="number"||"x"in i)c=g=ae(i);else if(i=Ne(i),c=i.min,g=i.max,!c||!g)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=g.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(i){return ae((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return ae(this.min.x,this.max.y)},getTopRight:function(){return ae(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var c,g;return typeof i[0]=="number"||i instanceof te?i=ae(i):i=Ne(i),i instanceof Ae?(c=i.min,g=i.max):c=g=i,c.x>=this.min.x&&g.x<=this.max.x&&c.y>=this.min.y&&g.y<=this.max.y},intersects:function(i){i=Ne(i);var c=this.min,g=this.max,_=i.min,x=i.max,D=x.x>=c.x&&_.x<=g.x,Y=x.y>=c.y&&_.y<=g.y;return D&&Y},overlaps:function(i){i=Ne(i);var c=this.min,g=this.max,_=i.min,x=i.max,D=x.x>c.x&&_.x<g.x,Y=x.y>c.y&&_.y<g.y;return D&&Y},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var c=this.min,g=this.max,_=Math.abs(c.x-g.x)*i,x=Math.abs(c.y-g.y)*i;return Ne(ae(c.x-_,c.y-x),ae(g.x+_,g.y+x))},equals:function(i){return i?(i=Ne(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function Ne(i,c){return!i||i instanceof Ae?i:new Ae(i,c)}function Ce(i,c){if(i)for(var g=c?[i,c]:i,_=0,x=g.length;_<x;_++)this.extend(g[_])}Ce.prototype={extend:function(i){var c=this._southWest,g=this._northEast,_,x;if(i instanceof Re)_=i,x=i;else if(i instanceof Ce){if(_=i._southWest,x=i._northEast,!_||!x)return this}else return i?this.extend(ge(i)||ye(i)):this;return!c&&!g?(this._southWest=new Re(_.lat,_.lng),this._northEast=new Re(x.lat,x.lng)):(c.lat=Math.min(_.lat,c.lat),c.lng=Math.min(_.lng,c.lng),g.lat=Math.max(x.lat,g.lat),g.lng=Math.max(x.lng,g.lng)),this},pad:function(i){var c=this._southWest,g=this._northEast,_=Math.abs(c.lat-g.lat)*i,x=Math.abs(c.lng-g.lng)*i;return new Ce(new Re(c.lat-_,c.lng-x),new Re(g.lat+_,g.lng+x))},getCenter:function(){return new Re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Re(this.getNorth(),this.getWest())},getSouthEast:function(){return new Re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Re||"lat"in i?i=ge(i):i=ye(i);var c=this._southWest,g=this._northEast,_,x;return i instanceof Ce?(_=i.getSouthWest(),x=i.getNorthEast()):_=x=i,_.lat>=c.lat&&x.lat<=g.lat&&_.lng>=c.lng&&x.lng<=g.lng},intersects:function(i){i=ye(i);var c=this._southWest,g=this._northEast,_=i.getSouthWest(),x=i.getNorthEast(),D=x.lat>=c.lat&&_.lat<=g.lat,Y=x.lng>=c.lng&&_.lng<=g.lng;return D&&Y},overlaps:function(i){i=ye(i);var c=this._southWest,g=this._northEast,_=i.getSouthWest(),x=i.getNorthEast(),D=x.lat>c.lat&&_.lat<g.lat,Y=x.lng>c.lng&&_.lng<g.lng;return D&&Y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,c){return i?(i=ye(i),this._southWest.equals(i.getSouthWest(),c)&&this._northEast.equals(i.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ye(i,c){return i instanceof Ce?i:new Ce(i,c)}function Re(i,c,g){if(isNaN(i)||isNaN(c))throw new Error("Invalid LatLng object: ("+i+", "+c+")");this.lat=+i,this.lng=+c,g!==void 0&&(this.alt=+g)}Re.prototype={equals:function(i,c){if(!i)return!1;i=ge(i);var g=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return g<=(c===void 0?1e-9:c)},toString:function(i){return"LatLng("+R(this.lat,i)+", "+R(this.lng,i)+")"},distanceTo:function(i){return He.distance(this,ge(i))},wrap:function(){return He.wrapLatLng(this)},toBounds:function(i){var c=180*i/40075017,g=c/Math.cos(Math.PI/180*this.lat);return ye([this.lat-c,this.lng-g],[this.lat+c,this.lng+g])},clone:function(){return new Re(this.lat,this.lng,this.alt)}};function ge(i,c,g){return i instanceof Re?i:T(i)&&typeof i[0]!="object"?i.length===3?new Re(i[0],i[1],i[2]):i.length===2?new Re(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Re(i.lat,"lng"in i?i.lng:i.lon,i.alt):c===void 0?null:new Re(i,c,g)}var dt={latLngToPoint:function(i,c){var g=this.projection.project(i),_=this.scale(c);return this.transformation._transform(g,_)},pointToLatLng:function(i,c){var g=this.scale(c),_=this.transformation.untransform(i,g);return this.projection.unproject(_)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var c=this.projection.bounds,g=this.scale(i),_=this.transformation.transform(c.min,g),x=this.transformation.transform(c.max,g);return new Ae(_,x)},infinite:!1,wrapLatLng:function(i){var c=this.wrapLng?S(i.lng,this.wrapLng,!0):i.lng,g=this.wrapLat?S(i.lat,this.wrapLat,!0):i.lat,_=i.alt;return new Re(g,c,_)},wrapLatLngBounds:function(i){var c=i.getCenter(),g=this.wrapLatLng(c),_=c.lat-g.lat,x=c.lng-g.lng;if(_===0&&x===0)return i;var D=i.getSouthWest(),Y=i.getNorthEast(),ie=new Re(D.lat-_,D.lng-x),he=new Re(Y.lat-_,Y.lng-x);return new Ce(ie,he)}},He=d({},dt,{wrapLng:[-180,180],R:6371e3,distance:function(i,c){var g=Math.PI/180,_=i.lat*g,x=c.lat*g,D=Math.sin((c.lat-i.lat)*g/2),Y=Math.sin((c.lng-i.lng)*g/2),ie=D*D+Math.cos(_)*Math.cos(x)*Y*Y,he=2*Math.atan2(Math.sqrt(ie),Math.sqrt(1-ie));return this.R*he}}),Zn=6378137,Ln={R:Zn,MAX_LATITUDE:85.0511287798,project:function(i){var c=Math.PI/180,g=this.MAX_LATITUDE,_=Math.max(Math.min(g,i.lat),-g),x=Math.sin(_*c);return new te(this.R*i.lng*c,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(i){var c=180/Math.PI;return new Re((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*c,i.x*c/this.R)},bounds:function(){var i=Zn*Math.PI;return new Ae([-i,-i],[i,i])}()};function Mt(i,c,g,_){if(T(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=c,this._c=g,this._d=_}Mt.prototype={transform:function(i,c){return this._transform(i.clone(),c)},_transform:function(i,c){return c=c||1,i.x=c*(this._a*i.x+this._b),i.y=c*(this._c*i.y+this._d),i},untransform:function(i,c){return c=c||1,new te((i.x/c-this._b)/this._a,(i.y/c-this._d)/this._c)}};function vt(i,c,g,_){return new Mt(i,c,g,_)}var Xe=d({},He,{code:"EPSG:3857",projection:Ln,transformation:function(){var i=.5/(Math.PI*Ln.R);return vt(i,.5,-i,.5)}()}),xn=d({},Xe,{code:"EPSG:900913"});function Zt(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Dn(i,c){var g="",_,x,D,Y,ie,he;for(_=0,D=i.length;_<D;_++){for(ie=i[_],x=0,Y=ie.length;x<Y;x++)he=ie[x],g+=(x?"L":"M")+he.x+" "+he.y;g+=c?Fe.svg?"z":"x":""}return g||"M0 0"}var Be=document.documentElement.style,Ve="ActiveXObject"in window,Ge=Ve&&!document.addEventListener,Gt="msLaunchUri"in navigator&&!("documentMode"in document),Oe=Tt("webkit"),kt=Tt("android"),ui=Tt("android 2")||Tt("android 3"),nn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Rr=kt&&Tt("Google")&&nn<537&&!("AudioNode"in window),bt=!!window.opera,pr=!Gt&&Tt("chrome"),Gn=Tt("gecko")&&!Oe&&!bt&&!Ve,rn=!pr&&Tt("safari"),Xr=Tt("phantom"),qt="OTransition"in Be,gr=navigator.platform.indexOf("Win")===0,Ct=Ve&&"transition"in Be,Se="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ui,wt="MozPerspective"in Be,Qe=!window.L_DISABLE_3D&&(Ct||Se||wt)&&!qt&&!Xr,Ye=typeof orientation<"u"||Tt("mobile"),sn=Ye&&Oe,Sn=Ye&&Se,me=!window.PointerEvent&&window.MSPointerEvent,Me=!!(window.PointerEvent||me),Pt="ontouchstart"in window||!!window.TouchEvent,Xn=!window.L_NO_TOUCH&&(Pt||Me),At=Ye&&bt,fn=Ye&&Gn,ws=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Xt=function(){var i=!1;try{var c=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",b,c),window.removeEventListener("testPassiveEventSupport",b,c)}catch{}return i}(),ci=function(){return!!document.createElement("canvas").getContext}(),mr=!!(document.createElementNS&&Zt("svg").createSVGRect),Bt=!!mr&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Si=!mr&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var c=i.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),kr=navigator.platform.indexOf("Mac")===0,hi=navigator.platform.indexOf("Linux")===0;function Tt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Fe={ie:Ve,ielt9:Ge,edge:Gt,webkit:Oe,android:kt,android23:ui,androidStock:Rr,opera:bt,chrome:pr,gecko:Gn,safari:rn,phantom:Xr,opera12:qt,win:gr,ie3d:Ct,webkit3d:Se,gecko3d:wt,any3d:Qe,mobile:Ye,mobileWebkit:sn,mobileWebkit3d:Sn,msPointer:me,pointer:Me,touch:Xn,touchNative:Pt,mobileOpera:At,mobileGecko:fn,retina:ws,passiveEvents:Xt,canvas:ci,svg:mr,vml:Si,inlineSvg:Bt,mac:kr,linux:hi},pn=Fe.msPointer?"MSPointerDown":"pointerdown",Pe=Fe.msPointer?"MSPointerMove":"pointermove",Yr=Fe.msPointer?"MSPointerUp":"pointerup",di=Fe.msPointer?"MSPointerCancel":"pointercancel",gn={touchstart:pn,touchmove:Pe,touchend:Yr,touchcancel:di},Kr={touchstart:Mr,touchmove:Ii,touchend:Ii,touchcancel:Ii},On={},Qr=!1;function Yn(i,c,g){return c==="touchstart"&&Nt(),Kr[c]?(g=Kr[c].bind(this,g),i.addEventListener(gn[c],g,!1),g):(console.warn("wrong event specified:",c),b)}function on(i,c,g){if(!gn[c]){console.warn("wrong event specified:",c);return}i.removeEventListener(gn[c],g,!1)}function Ro(i){On[i.pointerId]=i}function Kn(i){On[i.pointerId]&&(On[i.pointerId]=i)}function an(i){delete On[i.pointerId]}function Nt(){Qr||(document.addEventListener(pn,Ro,!0),document.addEventListener(Pe,Kn,!0),document.addEventListener(Yr,an,!0),document.addEventListener(di,an,!0),Qr=!0)}function Ii(i,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var g in On)c.touches.push(On[g]);c.changedTouches=[c],i(c)}}function Mr(i,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&yn(c),Ii(i,c)}function ys(i){var c={},g,_;for(_ in i)g=i[_],c[_]=g&&g.bind?g.bind(i):g;return i=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var we=200;function ko(i,c){i.addEventListener("dblclick",c);var g=0,_;function x(D){if(D.detail!==1){_=D.detail;return}if(!(D.pointerType==="mouse"||D.sourceCapabilities&&!D.sourceCapabilities.firesTouchEvents)){var Y=Vi(D);if(!(Y.some(function(he){return he instanceof HTMLLabelElement&&he.attributes.for})&&!Y.some(function(he){return he instanceof HTMLInputElement||he instanceof HTMLSelectElement}))){var ie=Date.now();ie-g<=we?(_++,_===2&&c(ys(D))):_=1,g=ie}}}return i.addEventListener("click",x),{dblclick:c,simDblclick:x}}function Lt(i,c){i.removeEventListener("dblclick",c.dblclick),i.removeEventListener("click",c.simDblclick)}var Pr=F(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),fi=F(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ft=fi==="webkitTransition"||fi==="OTransition"?fi+"End":"transitionend";function ot(i){return typeof i=="string"?document.getElementById(i):i}function qe(i,c){var g=i.style[c]||i.currentStyle&&i.currentStyle[c];if((!g||g==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(i,null);g=_?_[c]:null}return g==="auto"?null:g}function it(i,c,g){var _=document.createElement(i);return _.className=c||"",g&&g.appendChild(_),_}function xt(i){var c=i.parentNode;c&&c.removeChild(i)}function pi(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Ot(i){var c=i.parentNode;c&&c.lastChild!==i&&c.appendChild(i)}function Rn(i){var c=i.parentNode;c&&c.firstChild!==i&&c.insertBefore(i,c.firstChild)}function _s(i,c){if(i.classList!==void 0)return i.classList.contains(c);var g=Qn(i);return g.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(g)}function Ue(i,c){if(i.classList!==void 0)for(var g=V(c),_=0,x=g.length;_<x;_++)i.classList.add(g[_]);else if(!_s(i,c)){var D=Qn(i);Cs(i,(D?D+" ":"")+c)}}function yt(i,c){i.classList!==void 0?i.classList.remove(c):Cs(i,z((" "+Qn(i)+" ").replace(" "+c+" "," ")))}function Cs(i,c){i.className.baseVal===void 0?i.className=c:i.className.baseVal=c}function Qn(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function nt(i,c){"opacity"in i.style?i.style.opacity=c:"filter"in i.style&&ln(i,c)}function ln(i,c){var g=!1,_="DXImageTransform.Microsoft.Alpha";try{g=i.filters.item(_)}catch{if(c===1)return}c=Math.round(c*100),g?(g.Enabled=c!==100,g.Opacity=c):i.style.filter+=" progid:"+_+"(opacity="+c+")"}function F(i){for(var c=document.documentElement.style,g=0;g<i.length;g++)if(i[g]in c)return i[g];return!1}function M(i,c,g){var _=c||new te(0,0);i.style[Pr]=(Fe.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(g?" scale("+g+")":"")}function ve(i,c){i._leaflet_pos=c,Fe.any3d?M(i,c):(i.style.left=c.x+"px",i.style.top=c.y+"px")}function $e(i){return i._leaflet_pos||new te(0,0)}var gt,vr,sr;if("onselectstart"in document)gt=function(){Ze(window,"selectstart",yn)},vr=function(){ke(window,"selectstart",yn)};else{var un=F(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);gt=function(){if(un){var i=document.documentElement.style;sr=i[un],i[un]="none"}},vr=function(){un&&(document.documentElement.style[un]=sr,sr=void 0)}}function Le(){Ze(window,"dragstart",yn)}function ct(){ke(window,"dragstart",yn)}var In,wr;function yr(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(_r(),In=i,wr=i.style.outlineStyle,i.style.outlineStyle="none",Ze(window,"keydown",_r))}function _r(){In&&(In.style.outlineStyle=wr,In=void 0,wr=void 0,ke(window,"keydown",_r))}function or(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function $r(i){var c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}var ht={__proto__:null,TRANSFORM:Pr,TRANSITION:fi,TRANSITION_END:ft,get:ot,getStyle:qe,create:it,remove:xt,empty:pi,toFront:Ot,toBack:Rn,hasClass:_s,addClass:Ue,removeClass:yt,setClass:Cs,getClass:Qn,setOpacity:nt,testProp:F,setTransform:M,setPosition:ve,getPosition:$e,get disableTextSelection(){return gt},get enableTextSelection(){return vr},disableImageDrag:Le,enableImageDrag:ct,preventOutline:yr,restoreOutline:_r,getSizedParentNode:or,getScale:$r};function Ze(i,c,g,_){if(c&&typeof c=="object")for(var x in c)hn(i,x,c[x],g);else{c=V(c);for(var D=0,Y=c.length;D<Y;D++)hn(i,c[D],g,_)}return this}var cn="_leaflet_events";function ke(i,c,g,_){if(arguments.length===1)za(i),delete i[cn];else if(c&&typeof c=="object")for(var x in c)Mo(i,x,c[x],g);else if(c=V(c),arguments.length===2)za(i,function(ie){return H(c,ie)!==-1});else for(var D=0,Y=c.length;D<Y;D++)Mo(i,c[D],g,_);return this}function za(i,c){for(var g in i[cn]){var _=g.split(/\d/)[0];(!c||c(_))&&Mo(i,_,null,null,g)}}var Je={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function hn(i,c,g,_){var x=c+C(g)+(_?"_"+C(_):"");if(i[cn]&&i[cn][x])return this;var D=function(ie){return g.call(_||i,ie||window.event)},Y=D;!Fe.touchNative&&Fe.pointer&&c.indexOf("touch")===0?D=Yn(i,c,D):Fe.touch&&c==="dblclick"?D=ko(i,D):"addEventListener"in i?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?i.addEventListener(Je[c]||c,D,Fe.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(D=function(ie){ie=ie||window.event,bi(i,ie)&&Y(ie)},i.addEventListener(Je[c],D,!1)):i.addEventListener(c,Y,!1):i.attachEvent("on"+c,D),i[cn]=i[cn]||{},i[cn][x]=D}function Mo(i,c,g,_,x){x=x||c+C(g)+(_?"_"+C(_):"");var D=i[cn]&&i[cn][x];if(!D)return this;!Fe.touchNative&&Fe.pointer&&c.indexOf("touch")===0?on(i,c,D):Fe.touch&&c==="dblclick"?Lt(i,D):"removeEventListener"in i?i.removeEventListener(Je[c]||c,D,!1):i.detachEvent("on"+c,D),i[cn][x]=null}function qr(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Us(i){return hn(i,"wheel",qr),this}function Cr(i){return Ze(i,"mousedown touchstart dblclick contextmenu",qr),i._leaflet_disable_click=!0,this}function yn(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Er(i){return yn(i),qr(i),this}function Vi(i){if(i.composedPath)return i.composedPath();for(var c=[],g=i.target;g;)c.push(g),g=g.parentNode;return c}function Wi(i,c){if(!c)return new te(i.clientX,i.clientY);var g=$r(c),_=g.boundingClientRect;return new te((i.clientX-_.left)/g.x-c.clientLeft,(i.clientY-_.top)/g.y-c.clientTop)}var Ua=Fe.linux&&Fe.chrome?window.devicePixelRatio:Fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Zi(i){return Fe.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Ua:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function bi(i,c){var g=c.relatedTarget;if(!g)return!0;try{for(;g&&g!==i;)g=g.parentNode}catch{return!1}return g!==i}var Bn={__proto__:null,on:Ze,off:ke,stopPropagation:qr,disableScrollPropagation:Us,disableClickPropagation:Cr,preventDefault:yn,stop:Er,getPropagationPath:Vi,getMousePosition:Wi,getWheelDelta:Zi,isExternalTarget:bi,addListener:Ze,removeListener:ke},Po=fe.extend({run:function(i,c,g,_){this.stop(),this._el=i,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=$e(i),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=re(this._animate,this),this._step()},_step:function(i){var c=+new Date-this._startTime,g=this._duration*1e3;c<g?this._runFrame(this._easeOut(c/g),i):(this._runFrame(1),this._complete())},_runFrame:function(i,c){var g=this._startPos.add(this._offset.multiplyBy(i));c&&g._round(),ve(this._el,g),this.fire("step")},_complete:function(){de(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),at=fe.extend({options:{crs:Xe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,c){c=W(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=w(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ge(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=fi&&Fe.any3d&&!Fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ze(this._proxy,ft,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,c,g){if(c=c===void 0?this._zoom:this._limitZoom(c),i=this._limitCenter(ge(i),c,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=d({animate:g.animate},g.zoom),g.pan=d({animate:g.animate,duration:g.duration},g.pan));var _=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,c,g.zoom):this._tryAnimatedPan(i,g.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(i,c,g.pan&&g.pan.noMoveStart),this},setZoom:function(i,c){return this._loaded?this.setView(this.getCenter(),i,{zoom:c}):(this._zoom=i,this)},zoomIn:function(i,c){return i=i||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,c)},zoomOut:function(i,c){return i=i||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,c)},setZoomAround:function(i,c,g){var _=this.getZoomScale(c),x=this.getSize().divideBy(2),D=i instanceof te?i:this.latLngToContainerPoint(i),Y=D.subtract(x).multiplyBy(1-1/_),ie=this.containerPointToLatLng(x.add(Y));return this.setView(ie,c,{zoom:g})},_getBoundsCenterZoom:function(i,c){c=c||{},i=i.getBounds?i.getBounds():ye(i);var g=ae(c.paddingTopLeft||c.padding||[0,0]),_=ae(c.paddingBottomRight||c.padding||[0,0]),x=this.getBoundsZoom(i,!1,g.add(_));if(x=typeof c.maxZoom=="number"?Math.min(c.maxZoom,x):x,x===1/0)return{center:i.getCenter(),zoom:x};var D=_.subtract(g).divideBy(2),Y=this.project(i.getSouthWest(),x),ie=this.project(i.getNorthEast(),x),he=this.unproject(Y.add(ie).divideBy(2).add(D),x);return{center:he,zoom:x}},fitBounds:function(i,c){if(i=ye(i),!i.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(i,c);return this.setView(g.center,g.zoom,c)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,c){return this.setView(i,this._zoom,{pan:c})},panBy:function(i,c){if(i=ae(i).round(),c=c||{},!i.x&&!i.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Po,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Ue(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,g,c.duration||.25,c.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,c,g){if(g=g||{},g.animate===!1||!Fe.any3d)return this.setView(i,c,g);this._stop();var _=this.project(this.getCenter()),x=this.project(i),D=this.getSize(),Y=this._zoom;i=ge(i),c=c===void 0?Y:c;var ie=Math.max(D.x,D.y),he=ie*this.getZoomScale(Y,c),Ee=x.distanceTo(_)||1,De=1.42,Ke=De*De;function st(vn){var Ka=vn?-1:1,Ag=vn?he:ie,xg=he*he-ie*ie+Ka*Ke*Ke*Ee*Ee,Sg=2*Ag*Ke*Ee,Mu=xg/Sg,kd=Math.sqrt(Mu*Mu+1)-Mu,Ig=kd<1e-9?-18:Math.log(kd);return Ig}function er(vn){return(Math.exp(vn)-Math.exp(-vn))/2}function bn(vn){return(Math.exp(vn)+Math.exp(-vn))/2}function zr(vn){return er(vn)/bn(vn)}var lr=st(0);function Gs(vn){return ie*(bn(lr)/bn(lr+De*vn))}function yg(vn){return ie*(bn(lr)*zr(lr+De*vn)-er(lr))/Ke}function _g(vn){return 1-Math.pow(1-vn,1.5)}var Cg=Date.now(),Od=(st(1)-lr)/De,Eg=g.duration?1e3*g.duration:1e3*Od*.8;function Rd(){var vn=(Date.now()-Cg)/Eg,Ka=_g(vn)*Od;vn<=1?(this._flyToFrame=re(Rd,this),this._move(this.unproject(_.add(x.subtract(_).multiplyBy(yg(Ka)/Ee)),Y),this.getScaleZoom(ie/Gs(Ka),Y),{flyTo:!0})):this._move(i,c)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),Rd.call(this),this},flyToBounds:function(i,c){var g=this._getBoundsCenterZoom(i,c);return this.flyTo(g.center,g.zoom,c)},setMaxBounds:function(i){return i=ye(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var c=this.options.minZoom;return this.options.minZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var c=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,c){this._enforcingBounds=!0;var g=this.getCenter(),_=this._limitCenter(g,this._zoom,ye(i));return g.equals(_)||this.panTo(_,c),this._enforcingBounds=!1,this},panInside:function(i,c){c=c||{};var g=ae(c.paddingTopLeft||c.padding||[0,0]),_=ae(c.paddingBottomRight||c.padding||[0,0]),x=this.project(this.getCenter()),D=this.project(i),Y=this.getPixelBounds(),ie=Ne([Y.min.add(g),Y.max.subtract(_)]),he=ie.getSize();if(!ie.contains(D)){this._enforcingBounds=!0;var Ee=D.subtract(ie.getCenter()),De=ie.extend(D).getSize().subtract(he);x.x+=Ee.x<0?-De.x:De.x,x.y+=Ee.y<0?-De.y:De.y,this.panTo(this.unproject(x),c),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=d({animate:!1,pan:!0},i===!0?{animate:!0}:i);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),_=c.divideBy(2).round(),x=g.divideBy(2).round(),D=_.subtract(x);return!D.x&&!D.y?this:(i.animate&&i.pan?this.panBy(D):(i.pan&&this._rawPanBy(D),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(w(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=d({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=w(this._handleGeolocationResponse,this),g=w(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,g,i):navigator.geolocation.getCurrentPosition(c,g,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var c=i.code,g=i.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var c=i.coords.latitude,g=i.coords.longitude,_=new Re(c,g),x=_.toBounds(i.coords.accuracy*2),D=this._locateOptions;if(D.setView){var Y=this.getBoundsZoom(x);this.setView(_,D.maxZoom?Math.min(Y,D.maxZoom):Y)}var ie={latlng:_,bounds:x,timestamp:i.timestamp};for(var he in i.coords)typeof i.coords[he]=="number"&&(ie[he]=i.coords[he]);this.fire("locationfound",ie)}},addHandler:function(i,c){if(!c)return this;var g=this[i]=new c(this);return this._handlers.push(g),this.options[i]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),xt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(de(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)xt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,c){var g="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),_=it("div",g,c||this._mapPane);return i&&(this._panes[i]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),c=this.unproject(i.getBottomLeft()),g=this.unproject(i.getTopRight());return new Ce(c,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,c,g){i=ye(i),g=ae(g||[0,0]);var _=this.getZoom()||0,x=this.getMinZoom(),D=this.getMaxZoom(),Y=i.getNorthWest(),ie=i.getSouthEast(),he=this.getSize().subtract(g),Ee=Ne(this.project(ie,_),this.project(Y,_)).getSize(),De=Fe.any3d?this.options.zoomSnap:1,Ke=he.x/Ee.x,st=he.y/Ee.y,er=c?Math.max(Ke,st):Math.min(Ke,st);return _=this.getScaleZoom(er,_),De&&(_=Math.round(_/(De/100))*(De/100),_=c?Math.ceil(_/De)*De:Math.floor(_/De)*De),Math.max(x,Math.min(D,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,c){var g=this._getTopLeftPoint(i,c);return new Ae(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,c){var g=this.options.crs;return c=c===void 0?this._zoom:c,g.scale(i)/g.scale(c)},getScaleZoom:function(i,c){var g=this.options.crs;c=c===void 0?this._zoom:c;var _=g.zoom(i*g.scale(c));return isNaN(_)?1/0:_},project:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ge(i),c)},unproject:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(ae(i),c)},layerPointToLatLng:function(i){var c=ae(i).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(i){var c=this.project(ge(i))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ge(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ye(i))},distance:function(i,c){return this.options.crs.distance(ge(i),ge(c))},containerPointToLayerPoint:function(i){return ae(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return ae(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var c=this.containerPointToLayerPoint(ae(i));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(i)))},mouseEventToContainerPoint:function(i){return Wi(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var c=this._container=ot(i);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ze(c,"scroll",this._onScroll,this),this._containerId=C(c)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Fe.any3d,Ue(i,"leaflet-container"+(Fe.touch?" leaflet-touch":"")+(Fe.retina?" leaflet-retina":"")+(Fe.ielt9?" leaflet-oldie":"")+(Fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=qe(i,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ve(this._mapPane,new te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ue(i.markerPane,"leaflet-zoom-hide"),Ue(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,c,g){ve(this._mapPane,new te(0,0));var _=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var x=this._zoom!==c;this._moveStart(x,g)._move(i,c)._moveEnd(x),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(i,c){return i&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(i,c,g,_){c===void 0&&(c=this._zoom);var x=this._zoom!==c;return this._zoom=c,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),_?g&&g.pinch&&this.fire("zoom",g):((x||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return de(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){ve(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[C(this._container)]=this;var c=i?ke:Ze;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Fe.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){de(this._resizeRequest),this._resizeRequest=re(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,c){for(var g=[],_,x=c==="mouseout"||c==="mouseover",D=i.target||i.srcElement,Y=!1;D;){if(_=this._targets[C(D)],_&&(c==="click"||c==="preclick")&&this._draggableMoved(_)){Y=!0;break}if(_&&_.listens(c,!0)&&(x&&!bi(D,i)||(g.push(_),x))||D===this._container)break;D=D.parentNode}return!g.length&&!Y&&!x&&this.listens(c,!0)&&(g=[this]),g},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var c=i.target||i.srcElement;if(!(!this._loaded||c._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(c))){var g=i.type;g==="mousedown"&&yr(c),this._fireDOMEvent(i,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,c,g){if(i.type==="click"){var _=d({},i);_.type="preclick",this._fireDOMEvent(_,_.type,g)}var x=this._findEventTargets(i,c);if(g){for(var D=[],Y=0;Y<g.length;Y++)g[Y].listens(c,!0)&&D.push(g[Y]);x=D.concat(x)}if(x.length){c==="contextmenu"&&yn(i);var ie=x[0],he={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Ee=ie.getLatLng&&(!ie._radius||ie._radius<=10);he.containerPoint=Ee?this.latLngToContainerPoint(ie.getLatLng()):this.mouseEventToContainerPoint(i),he.layerPoint=this.containerPointToLayerPoint(he.containerPoint),he.latlng=Ee?ie.getLatLng():this.layerPointToLatLng(he.layerPoint)}for(Y=0;Y<x.length;Y++)if(x[Y].fire(c,he,!0),he.originalEvent._stopped||x[Y].options.bubblingMouseEvents===!1&&H(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,c=this._handlers.length;i<c;i++)this._handlers[i].disable()},whenReady:function(i,c){return this._loaded?i.call(c||this,{target:this}):this.on("load",i,c),this},_getMapPanePos:function(){return $e(this._mapPane)||new te(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,c){var g=i&&c!==void 0?this._getNewPixelOrigin(i,c):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,c){var g=this.getSize()._divideBy(2);return this.project(i,c)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,c,g){var _=this._getNewPixelOrigin(g,c);return this.project(i,c)._subtract(_)},_latLngBoundsToNewLayerBounds:function(i,c,g){var _=this._getNewPixelOrigin(g,c);return Ne([this.project(i.getSouthWest(),c)._subtract(_),this.project(i.getNorthWest(),c)._subtract(_),this.project(i.getSouthEast(),c)._subtract(_),this.project(i.getNorthEast(),c)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,c,g){if(!g)return i;var _=this.project(i,c),x=this.getSize().divideBy(2),D=new Ae(_.subtract(x),_.add(x)),Y=this._getBoundsOffset(D,g,c);return Math.abs(Y.x)<=1&&Math.abs(Y.y)<=1?i:this.unproject(_.add(Y),c)},_limitOffset:function(i,c){if(!c)return i;var g=this.getPixelBounds(),_=new Ae(g.min.add(i),g.max.add(i));return i.add(this._getBoundsOffset(_,c))},_getBoundsOffset:function(i,c,g){var _=Ne(this.project(c.getNorthEast(),g),this.project(c.getSouthWest(),g)),x=_.min.subtract(i.min),D=_.max.subtract(i.max),Y=this._rebound(x.x,-D.x),ie=this._rebound(x.y,-D.y);return new te(Y,ie)},_rebound:function(i,c){return i+c>0?Math.round(i-c)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(c))},_limitZoom:function(i){var c=this.getMinZoom(),g=this.getMaxZoom(),_=Fe.any3d?this.options.zoomSnap:1;return _&&(i=Math.round(i/_)*_),Math.max(c,Math.min(g,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){yt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,c){var g=this._getCenterOffset(i)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,c),!0)},_createAnimProxy:function(){var i=this._proxy=it("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(c){var g=Pr,_=this._proxy.style[g];M(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),_===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){xt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),c=this.getZoom();M(this._proxy,this.project(i,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,c,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(c),x=this._getCenterOffset(i)._divideBy(1-1/_);return g.animate!==!0&&!this.getSize().contains(x)?!1:(re(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(i,c,!0)},this),!0)},_animateZoom:function(i,c,g,_){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=c,Ue(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:c,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(w(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&yt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ha(i,c){return new at(i,c)}var Ar=le.extend({options:{position:"topright"},initialize:function(i){W(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var c=this._map;return c&&c.removeControl(this),this.options.position=i,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var c=this._container=this.onAdd(i),g=this.getPosition(),_=i._controlCorners[g];return Ue(c,"leaflet-control"),g.indexOf("bottom")!==-1?_.insertBefore(c,_.firstChild):_.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(xt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Es=function(i){return new Ar(i)};at.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},c="leaflet-",g=this._controlContainer=it("div",c+"control-container",this._container);function _(x,D){var Y=c+x+" "+c+D;i[x+D]=it("div",Y,g)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)xt(this._controlCorners[i]);xt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Va=Ar.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,c,g,_){return g<_?-1:_<g?1:0}},initialize:function(i,c,g){W(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in i)this._addLayer(i[_],_);for(_ in c)this._addLayer(c[_],_,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Ar.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,c){return this._addLayer(i,c),this._map?this._update():this},addOverlay:function(i,c){return this._addLayer(i,c,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var c=this._getLayer(C(i));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Ue(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Ue(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):yt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return yt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",c=this._container=it("div",i),g=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Cr(c),Us(c);var _=this._section=it("section",i+"-list");g&&(this._map.on("click",this.collapse,this),Ze(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=it("a",i+"-toggle",c);x.href="#",x.title="Layers",x.setAttribute("role","button"),Ze(x,{keydown:function(D){D.keyCode===13&&this._expandSafely()},click:function(D){yn(D),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=it("div",i+"-base",_),this._separator=it("div",i+"-separator",_),this._overlaysList=it("div",i+"-overlays",_),c.appendChild(_)},_getLayer:function(i){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&C(this._layers[c].layer)===i)return this._layers[c]},_addLayer:function(i,c,g){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:c,overlay:g}),this.options.sortLayers&&this._layers.sort(w(function(_,x){return this.options.sortFunction(_.layer,x.layer,_.name,x.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;pi(this._baseLayersList),pi(this._overlaysList),this._layerControlInputs=[];var i,c,g,_,x=0;for(g=0;g<this._layers.length;g++)_=this._layers[g],this._addItem(_),c=c||_.overlay,i=i||!_.overlay,x+=_.overlay?0:1;return this.options.hideSingleBase&&(i=i&&x>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=c&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var c=this._getLayer(C(i.target)),g=c.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;g&&this._map.fire(g,c)},_createRadioElement:function(i,c){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(c?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=g,_.firstChild},_addItem:function(i){var c=document.createElement("label"),g=this._map.hasLayer(i.layer),_;i.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=g):_=this._createRadioElement("leaflet-base-layers_"+C(this),g),this._layerControlInputs.push(_),_.layerId=C(i.layer),Ze(_,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+i.name;var D=document.createElement("span");c.appendChild(D),D.appendChild(_),D.appendChild(x);var Y=i.overlay?this._overlaysList:this._baseLayersList;return Y.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,c,g,_=[],x=[];this._handlingClick=!0;for(var D=i.length-1;D>=0;D--)c=i[D],g=this._getLayer(c.layerId).layer,c.checked?_.push(g):c.checked||x.push(g);for(D=0;D<x.length;D++)this._map.hasLayer(x[D])&&this._map.removeLayer(x[D]);for(D=0;D<_.length;D++)this._map.hasLayer(_[D])||this._map.addLayer(_[D]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,c,g,_=this._map.getZoom(),x=i.length-1;x>=0;x--)c=i[x],g=this._getLayer(c.layerId).layer,c.disabled=g.options.minZoom!==void 0&&_<g.options.minZoom||g.options.maxZoom!==void 0&&_>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Ze(i,"click",yn),this.expand();var c=this;setTimeout(function(){ke(i,"click",yn),c._preventClick=!1})}}),Et=function(i,c,g){return new Va(i,c,g)},Hs=Ar.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var c="leaflet-control-zoom",g=it("div",c+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,c+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,c+"-out",g,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,c,g,_,x){var D=it("a",g,_);return D.innerHTML=i,D.href="#",D.title=c,D.setAttribute("role","button"),D.setAttribute("aria-label",c),Cr(D),Ze(D,"click",Er),Ze(D,"click",x,this),Ze(D,"click",this._refocusOnMap,this),D},_updateDisabled:function(){var i=this._map,c="leaflet-disabled";yt(this._zoomInButton,c),yt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Ue(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Ue(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});at.mergeOptions({zoomControl:!0}),at.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Hs,this.addControl(this.zoomControl))});var Vs=function(i){return new Hs(i)},Jr=Ar.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var c="leaflet-control-scale",g=it("div",c),_=this.options;return this._addScales(_,c+"-line",g),i.on(_.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),g},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,c,g){i.metric&&(this._mScale=it("div",c,g)),i.imperial&&(this._iScale=it("div",c,g))},_update:function(){var i=this._map,c=i.getSize().y/2,g=i.distance(i.containerPointToLatLng([0,c]),i.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(g)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var c=this._getRoundNum(i),g=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,g,c/i)},_updateImperial:function(i){var c=i*3.2808399,g,_,x;c>5280?(g=c/5280,_=this._getRoundNum(g),this._updateScale(this._iScale,_+" mi",_/g)):(x=this._getRoundNum(c),this._updateScale(this._iScale,x+" ft",x/c))},_updateScale:function(i,c,g){i.style.width=Math.round(this.options.maxWidth*g)+"px",i.innerHTML=c},_getRoundNum:function(i){var c=Math.pow(10,(Math.floor(i)+"").length-1),g=i/c;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,c*g}}),bu=function(i){return new Jr(i)},ce='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',tt=Ar.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Fe.inlineSvg?ce+" ":"")+"Leaflet</a>"},initialize:function(i){W(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=it("div","leaflet-control-attribution"),Cr(this._container);for(var c in i._layers)i._layers[c].getAttribution&&this.addAttribution(i._layers[c].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var c in this._attributions)this._attributions[c]&&i.push(c);var g=[];this.options.prefix&&g.push(this.options.prefix),i.length&&g.push(i.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});at.mergeOptions({attributionControl:!0}),at.addInitHook(function(){this.options.attributionControl&&new tt().addTo(this)});var _n=function(i){return new tt(i)};Ar.Layers=Va,Ar.Zoom=Hs,Ar.Scale=Jr,Ar.Attribution=tt,Es.layers=Et,Es.zoom=Vs,Es.scale=bu,Es.attribution=_n;var $n=le.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});$n.addTo=function(i,c){return i.addHandler(c,this),this};var Wa={Events:_e},Za=Fe.touch?"touchstart mousedown":"mousedown",gi=fe.extend({options:{clickTolerance:3},initialize:function(i,c,g,_){W(this,_),this._element=i,this._dragStartTarget=c||i,this._preventOutline=g},enable:function(){this._enabled||(Ze(this._dragStartTarget,Za,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(gi._dragging===this&&this.finishDrag(!0),ke(this._dragStartTarget,Za,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!_s(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){gi._dragging===this&&this.finishDrag();return}if(!(gi._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(gi._dragging=this,this._preventOutline&&yr(this._element),Le(),gt(),!this._moving)){this.fire("down");var c=i.touches?i.touches[0]:i,g=or(this._element);this._startPoint=new te(c.clientX,c.clientY),this._startPos=$e(this._element),this._parentScale=$r(g);var _=i.type==="mousedown";Ze(document,_?"mousemove":"touchmove",this._onMove,this),Ze(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var c=i.touches&&i.touches.length===1?i.touches[0]:i,g=new te(c.clientX,c.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,yn(i),this._moved||(this.fire("dragstart"),this._moved=!0,Ue(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ue(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),ve(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){yt(document.body,"leaflet-dragging"),this._lastTarget&&(yt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ke(document,"mousemove touchmove",this._onMove,this),ke(document,"mouseup touchend touchcancel",this._onUp,this),ct(),vr();var c=this._moved&&this._moving;this._moving=!1,gi._dragging=!1,c&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Ga(i,c,g){var _,x=[1,4,2,8],D,Y,ie,he,Ee,De,Ke,st;for(D=0,De=i.length;D<De;D++)i[D]._code=Ni(i[D],c);for(ie=0;ie<4;ie++){for(Ke=x[ie],_=[],D=0,De=i.length,Y=De-1;D<De;Y=D++)he=i[D],Ee=i[Y],he._code&Ke?Ee._code&Ke||(st=ei(Ee,he,Ke,c,g),st._code=Ni(st,c),_.push(st)):(Ee._code&Ke&&(st=ei(Ee,he,Ke,c,g),st._code=Ni(st,c),_.push(st)),_.push(he));i=_}return i}function Ws(i,c){var g,_,x,D,Y,ie,he,Ee,De;if(!i||i.length===0)throw new Error("latlngs not passed");qn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Ke=ge([0,0]),st=ye(i),er=st.getNorthWest().distanceTo(st.getSouthWest())*st.getNorthEast().distanceTo(st.getNorthWest());er<1700&&(Ke=Yt(i));var bn=i.length,zr=[];for(g=0;g<bn;g++){var lr=ge(i[g]);zr.push(c.project(ge([lr.lat-Ke.lat,lr.lng-Ke.lng])))}for(ie=he=Ee=0,g=0,_=bn-1;g<bn;_=g++)x=zr[g],D=zr[_],Y=x.y*D.x-D.y*x.x,he+=(x.x+D.x)*Y,Ee+=(x.y+D.y)*Y,ie+=Y*3;ie===0?De=zr[0]:De=[he/ie,Ee/ie];var Gs=c.unproject(ae(De));return ge([Gs.lat+Ke.lat,Gs.lng+Ke.lng])}function Yt(i){for(var c=0,g=0,_=0,x=0;x<i.length;x++){var D=ge(i[x]);c+=D.lat,g+=D.lng,_++}return ge([c/_,g/_])}var Lo={__proto__:null,clipPolygon:Ga,polygonCenter:Ws,centroid:Yt};function Ft(i,c){if(!c||!i.length)return i.slice();var g=c*c;return i=Tu(i,g),i=St(i,g),i}function As(i,c,g){return Math.sqrt(Oi(i,c,g,!0))}function Ti(i,c,g){return Oi(i,c,g)}function St(i,c){var g=i.length,_=typeof Uint8Array<"u"?Uint8Array:Array,x=new _(g);x[0]=x[g-1]=1,We(i,x,c,0,g-1);var D,Y=[];for(D=0;D<g;D++)x[D]&&Y.push(i[D]);return Y}function We(i,c,g,_,x){var D=0,Y,ie,he;for(ie=_+1;ie<=x-1;ie++)he=Oi(i[ie],i[_],i[x],!0),he>D&&(Y=ie,D=he);D>g&&(c[Y]=1,We(i,c,g,_,Y),We(i,c,g,Y,x))}function Tu(i,c){for(var g=[i[0]],_=1,x=0,D=i.length;_<D;_++)Lr(i[_],i[x])>c&&(g.push(i[_]),x=_);return x<D-1&&g.push(i[D-1]),g}var Rt;function mi(i,c,g,_,x){var D=_?Rt:Ni(i,g),Y=Ni(c,g),ie,he,Ee;for(Rt=Y;;){if(!(D|Y))return[i,c];if(D&Y)return!1;ie=D||Y,he=ei(i,c,ie,g,x),Ee=Ni(he,g),ie===D?(i=he,D=Ee):(c=he,Y=Ee)}}function ei(i,c,g,_,x){var D=c.x-i.x,Y=c.y-i.y,ie=_.min,he=_.max,Ee,De;return g&8?(Ee=i.x+D*(he.y-i.y)/Y,De=he.y):g&4?(Ee=i.x+D*(ie.y-i.y)/Y,De=ie.y):g&2?(Ee=he.x,De=i.y+Y*(he.x-i.x)/D):g&1&&(Ee=ie.x,De=i.y+Y*(ie.x-i.x)/D),new te(Ee,De,x)}function Ni(i,c){var g=0;return i.x<c.min.x?g|=1:i.x>c.max.x&&(g|=2),i.y<c.min.y?g|=4:i.y>c.max.y&&(g|=8),g}function Lr(i,c){var g=c.x-i.x,_=c.y-i.y;return g*g+_*_}function Oi(i,c,g,_){var x=c.x,D=c.y,Y=g.x-x,ie=g.y-D,he=Y*Y+ie*ie,Ee;return he>0&&(Ee=((i.x-x)*Y+(i.y-D)*ie)/he,Ee>1?(x=g.x,D=g.y):Ee>0&&(x+=Y*Ee,D+=ie*Ee)),Y=i.x-x,ie=i.y-D,_?Y*Y+ie*ie:new te(x,D)}function qn(i){return!T(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Zs(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),qn(i)}function Do(i,c){var g,_,x,D,Y,ie,he,Ee;if(!i||i.length===0)throw new Error("latlngs not passed");qn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var De=ge([0,0]),Ke=ye(i),st=Ke.getNorthWest().distanceTo(Ke.getSouthWest())*Ke.getNorthEast().distanceTo(Ke.getNorthWest());st<1700&&(De=Yt(i));var er=i.length,bn=[];for(g=0;g<er;g++){var zr=ge(i[g]);bn.push(c.project(ge([zr.lat-De.lat,zr.lng-De.lng])))}for(g=0,_=0;g<er-1;g++)_+=bn[g].distanceTo(bn[g+1])/2;if(_===0)Ee=bn[0];else for(g=0,D=0;g<er-1;g++)if(Y=bn[g],ie=bn[g+1],x=Y.distanceTo(ie),D+=x,D>_){he=(D-_)/x,Ee=[ie.x-he*(ie.x-Y.x),ie.y-he*(ie.y-Y.y)];break}var lr=c.unproject(ae(Ee));return ge([lr.lat+De.lat,lr.lng+De.lng])}var Xa={__proto__:null,simplify:Ft,pointToSegmentDistance:As,closestPointOnSegment:Ti,clipSegment:mi,_getEdgeIntersection:ei,_getBitCode:Ni,_sqClosestPointOnSegment:Oi,isFlat:qn,_flat:Zs,polylineCenter:Do},Bo={project:function(i){return new te(i.lng,i.lat)},unproject:function(i){return new Re(i.y,i.x)},bounds:new Ae([-180,-90],[180,90])},vi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ae([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var c=Math.PI/180,g=this.R,_=i.lat*c,x=this.R_MINOR/g,D=Math.sqrt(1-x*x),Y=D*Math.sin(_),ie=Math.tan(Math.PI/4-_/2)/Math.pow((1-Y)/(1+Y),D/2);return _=-g*Math.log(Math.max(ie,1e-10)),new te(i.lng*c*g,_)},unproject:function(i){for(var c=180/Math.PI,g=this.R,_=this.R_MINOR/g,x=Math.sqrt(1-_*_),D=Math.exp(-i.y/g),Y=Math.PI/2-2*Math.atan(D),ie=0,he=.1,Ee;ie<15&&Math.abs(he)>1e-7;ie++)Ee=x*Math.sin(Y),Ee=Math.pow((1-Ee)/(1+Ee),x/2),he=Math.PI/2-2*Math.atan(D*Ee)-Y,Y+=he;return new Re(Y*c,i.x*c/g)}},Fo={__proto__:null,LonLat:Bo,Mercator:vi,SphericalMercator:Ln},Nu=d({},He,{code:"EPSG:3395",projection:vi,transformation:function(){var i=.5/(Math.PI*vi.R);return vt(i,.5,-i,.5)}()}),Gi=d({},He,{code:"EPSG:4326",projection:Bo,transformation:vt(1/180,1,-1/180,.5)}),Ou=d({},dt,{projection:Bo,transformation:vt(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,c){var g=c.lng-i.lng,_=c.lat-i.lat;return Math.sqrt(g*g+_*_)},infinite:!0});dt.Earth=He,dt.EPSG3395=Nu,dt.EPSG3857=Xe,dt.EPSG900913=xn,dt.EPSG4326=Gi,dt.Simple=Ou;var mn=fe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[C(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[C(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var c=i.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var g=this.getEvents();c.on(g,this),this.once("remove",function(){c.off(g,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});at.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var c=C(i);return this._layers[c]?this:(this._layers[c]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var c=C(i);return this._layers[c]?(this._loaded&&i.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return C(i)in this._layers},eachLayer:function(i,c){for(var g in this._layers)i.call(c,this._layers[g]);return this},_addLayers:function(i){i=i?T(i)?i:[i]:[];for(var c=0,g=i.length;c<g;c++)this.addLayer(i[c])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[C(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var c=C(i);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,c=-1/0,g=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var x=this._zoomBoundLayers[_].options;i=x.minZoom===void 0?i:Math.min(i,x.minZoom),c=x.maxZoom===void 0?c:Math.max(c,x.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=i===1/0?void 0:i,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ti=mn.extend({initialize:function(i,c){W(this,c),this._layers={};var g,_;if(i)for(g=0,_=i.length;g<_;g++)this.addLayer(i[g])},addLayer:function(i){var c=this.getLayerId(i);return this._layers[c]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var c=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(i){var c=typeof i=="number"?i:this.getLayerId(i);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var c=Array.prototype.slice.call(arguments,1),g,_;for(g in this._layers)_=this._layers[g],_[i]&&_[i].apply(_,c);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,c){for(var g in this._layers)i.call(c,this._layers[g]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return C(i)}}),ar=function(i,c){return new ti(i,c)},Dr=ti.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),ti.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),ti.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Ce;for(var c in this._layers){var g=this._layers[c];i.extend(g.getBounds?g.getBounds():g.getLatLng())}return i}}),Br=function(i,c){return new Dr(i,c)},Xi=le.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){W(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,c){var g=this._getIconUrl(i);if(!g){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(g,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(_,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(i,c){var g=this.options,_=g[c+"Size"];typeof _=="number"&&(_=[_,_]);var x=ae(_),D=ae(c==="shadow"&&g.shadowAnchor||g.iconAnchor||x&&x.divideBy(2,!0));i.className="leaflet-marker-"+c+" "+(g.className||""),D&&(i.style.marginLeft=-D.x+"px",i.style.marginTop=-D.y+"px"),x&&(i.style.width=x.x+"px",i.style.height=x.y+"px")},_createImg:function(i,c){return c=c||document.createElement("img"),c.src=i,c},_getIconUrl:function(i){return Fe.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function jo(i){return new Xi(i)}var xs=Xi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof xs.imagePath!="string"&&(xs.imagePath=this._detectIconPath()),(this.options.imagePath||xs.imagePath)+Xi.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var c=function(g,_,x){var D=_.exec(g);return D&&D[x]};return i=c(i,/^url\((['"])?(.+)\1\)$/,2),i&&c(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=it("div","leaflet-default-icon-path",document.body),c=qe(i,"background-image")||qe(i,"backgroundImage");if(document.body.removeChild(i),c=this._stripUrl(c),c)return c;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),zo=$n.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new gi(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ue(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&yt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var c=this._marker,g=c._map,_=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,D=$e(c._icon),Y=g.getPixelBounds(),ie=g.getPixelOrigin(),he=Ne(Y.min._subtract(ie).add(x),Y.max._subtract(ie).subtract(x));if(!he.contains(D)){var Ee=ae((Math.max(he.max.x,D.x)-he.max.x)/(Y.max.x-he.max.x)-(Math.min(he.min.x,D.x)-he.min.x)/(Y.min.x-he.min.x),(Math.max(he.max.y,D.y)-he.max.y)/(Y.max.y-he.max.y)-(Math.min(he.min.y,D.y)-he.min.y)/(Y.min.y-he.min.y)).multiplyBy(_);g.panBy(Ee,{animate:!1}),this._draggable._newPos._add(Ee),this._draggable._startPos._add(Ee),ve(c._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=re(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(de(this._panRequest),this._panRequest=re(this._adjustPan.bind(this,i)))},_onDrag:function(i){var c=this._marker,g=c._shadow,_=$e(c._icon),x=c._map.layerPointToLatLng(_);g&&ve(g,_),c._latlng=x,i.latlng=x,i.oldLatLng=this._oldLatLng,c.fire("move",i).fire("drag",i)},_onDragEnd:function(i){de(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Jn=mn.extend({options:{icon:new xs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,c){W(this,c),this._latlng=ge(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var c=this._latlng;return this._latlng=ge(i),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=i.icon.createIcon(this._icon),_=!1;g!==this._icon&&(this._icon&&this._removeIcon(),_=!0,i.title&&(g.title=i.title),g.tagName==="IMG"&&(g.alt=i.alt||"")),Ue(g,c),i.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ze(g,"focus",this._panOnFocus,this);var x=i.icon.createShadow(this._shadow),D=!1;x!==this._shadow&&(this._removeShadow(),D=!0),x&&(Ue(x,c),x.alt=""),this._shadow=x,i.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&D&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ke(this._icon,"focus",this._panOnFocus,this),xt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&xt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&ve(this._icon,i),this._shadow&&ve(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Ue(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),zo)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new zo(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&nt(this._icon,i),this._shadow&&nt(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var c=this.options.icon.options,g=c.iconSize?ae(c.iconSize):ae(0,0),_=c.iconAnchor?ae(c.iconAnchor):ae(0,0);i.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:g.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ru(i,c){return new Jn(i,c)}var Fr=mn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return W(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wi=Fr.extend({options:{fill:!0,radius:10},initialize:function(i,c){W(this,c),this._latlng=ge(i),this._radius=this.options.radius},setLatLng:function(i){var c=this._latlng;return this._latlng=ge(i),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var c=i&&i.radius||this._radius;return Fr.prototype.setStyle.call(this,i),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,c=this._radiusY||i,g=this._clickTolerance(),_=[i+g,c+g];this._pxBounds=new Ae(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function pt(i,c){return new wi(i,c)}var Yi=wi.extend({initialize:function(i,c,g){if(typeof c=="number"&&(c=d({},g,{radius:c})),W(this,c),this._latlng=ge(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Ce(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Fr.prototype.setStyle,_project:function(){var i=this._latlng.lng,c=this._latlng.lat,g=this._map,_=g.options.crs;if(_.distance===He.distance){var x=Math.PI/180,D=this._mRadius/He.R/x,Y=g.project([c+D,i]),ie=g.project([c-D,i]),he=Y.add(ie).divideBy(2),Ee=g.unproject(he).lat,De=Math.acos((Math.cos(D*x)-Math.sin(c*x)*Math.sin(Ee*x))/(Math.cos(c*x)*Math.cos(Ee*x)))/x;(isNaN(De)||De===0)&&(De=D/Math.cos(Math.PI/180*c)),this._point=he.subtract(g.getPixelOrigin()),this._radius=isNaN(De)?0:he.x-g.project([Ee,i-De]).x,this._radiusY=he.y-Y.y}else{var Ke=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(Ke).x}this._updateBounds()}});function N(i,c,g){return new Yi(i,c,g)}var t=Fr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,c){W(this,c),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var c=1/0,g=null,_=Oi,x,D,Y=0,ie=this._parts.length;Y<ie;Y++)for(var he=this._parts[Y],Ee=1,De=he.length;Ee<De;Ee++){x=he[Ee-1],D=he[Ee];var Ke=_(i,x,D,!0);Ke<c&&(c=Ke,g=_(i,x,D))}return g&&(g.distance=Math.sqrt(c)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Do(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,c){return c=c||this._defaultShape(),i=ge(i),c.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Ce,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return qn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var c=[],g=qn(i),_=0,x=i.length;_<x;_++)g?(c[_]=ge(i[_]),this._bounds.extend(c[_])):c[_]=this._convertLatLngs(i[_]);return c},_project:function(){var i=new Ae;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),c=new te(i,i);this._rawPxBounds&&(this._pxBounds=new Ae([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(i,c,g){var _=i[0]instanceof Re,x=i.length,D,Y;if(_){for(Y=[],D=0;D<x;D++)Y[D]=this._map.latLngToLayerPoint(i[D]),g.extend(Y[D]);c.push(Y)}else for(D=0;D<x;D++)this._projectLatlngs(i[D],c,g)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,g,_,x,D,Y,ie,he;for(g=0,x=0,D=this._rings.length;g<D;g++)for(he=this._rings[g],_=0,Y=he.length;_<Y-1;_++)ie=mi(he[_],he[_+1],i,_,!0),ie&&(c[x]=c[x]||[],c[x].push(ie[0]),(ie[1]!==he[_+1]||_===Y-2)&&(c[x].push(ie[1]),x++))}},_simplifyPoints:function(){for(var i=this._parts,c=this.options.smoothFactor,g=0,_=i.length;g<_;g++)i[g]=Ft(i[g],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,c){var g,_,x,D,Y,ie,he=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(g=0,D=this._parts.length;g<D;g++)for(ie=this._parts[g],_=0,Y=ie.length,x=Y-1;_<Y;x=_++)if(!(!c&&_===0)&&As(i,ie[x],ie[_])<=he)return!0;return!1}});function r(i,c){return new t(i,c)}t._flat=Zs;var o=t.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ws(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var c=t.prototype._convertLatLngs.call(this,i),g=c.length;return g>=2&&c[0]instanceof Re&&c[0].equals(c[g-1])&&c.pop(),c},_setLatLngs:function(i){t.prototype._setLatLngs.call(this,i),qn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return qn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,c=this.options.weight,g=new te(c,c);if(i=new Ae(i.min.subtract(g),i.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,x=this._rings.length,D;_<x;_++)D=Ga(this._rings[_],i,!0),D.length&&this._parts.push(D)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var c=!1,g,_,x,D,Y,ie,he,Ee;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(D=0,he=this._parts.length;D<he;D++)for(g=this._parts[D],Y=0,Ee=g.length,ie=Ee-1;Y<Ee;ie=Y++)_=g[Y],x=g[ie],_.y>i.y!=x.y>i.y&&i.x<(x.x-_.x)*(i.y-_.y)/(x.y-_.y)+_.x&&(c=!c);return c||t.prototype._containsPoint.call(this,i,!0)}});function a(i,c){return new o(i,c)}var l=Dr.extend({initialize:function(i,c){W(this,c),this._layers={},i&&this.addData(i)},addData:function(i){var c=T(i)?i:i.features,g,_,x;if(c){for(g=0,_=c.length;g<_;g++)x=c[g],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var D=this.options;if(D.filter&&!D.filter(i))return this;var Y=h(i,D);return Y?(Y.feature=j(i),Y.defaultOptions=Y.options,this.resetStyle(Y),D.onEachFeature&&D.onEachFeature(i,Y),this.addLayer(Y)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=d({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(c){this._setLayerStyle(c,i)},this)},_setLayerStyle:function(i,c){i.setStyle&&(typeof c=="function"&&(c=c(i.feature)),i.setStyle(c))}});function h(i,c){var g=i.type==="Feature"?i.geometry:i,_=g?g.coordinates:null,x=[],D=c&&c.pointToLayer,Y=c&&c.coordsToLatLng||m,ie,he,Ee,De;if(!_&&!g)return null;switch(g.type){case"Point":return ie=Y(_),p(D,i,ie,c);case"MultiPoint":for(Ee=0,De=_.length;Ee<De;Ee++)ie=Y(_[Ee]),x.push(p(D,i,ie,c));return new Dr(x);case"LineString":case"MultiLineString":return he=y(_,g.type==="LineString"?0:1,Y),new t(he,c);case"Polygon":case"MultiPolygon":return he=y(_,g.type==="Polygon"?1:2,Y),new o(he,c);case"GeometryCollection":for(Ee=0,De=g.geometries.length;Ee<De;Ee++){var Ke=h({geometry:g.geometries[Ee],type:"Feature",properties:i.properties},c);Ke&&x.push(Ke)}return new Dr(x);case"FeatureCollection":for(Ee=0,De=g.features.length;Ee<De;Ee++){var st=h(g.features[Ee],c);st&&x.push(st)}return new Dr(x);default:throw new Error("Invalid GeoJSON object.")}}function p(i,c,g,_){return i?i(c,g):new Jn(g,_&&_.markersInheritOptions&&_)}function m(i){return new Re(i[1],i[0],i[2])}function y(i,c,g){for(var _=[],x=0,D=i.length,Y;x<D;x++)Y=c?y(i[x],c-1,g):(g||m)(i[x]),_.push(Y);return _}function E(i,c){return i=ge(i),i.alt!==void 0?[R(i.lng,c),R(i.lat,c),R(i.alt,c)]:[R(i.lng,c),R(i.lat,c)]}function O(i,c,g,_){for(var x=[],D=0,Y=i.length;D<Y;D++)x.push(c?O(i[D],qn(i[D])?0:c-1,g,_):E(i[D],_));return!c&&g&&x.length>0&&x.push(x[0].slice()),x}function P(i,c){return i.feature?d({},i.feature,{geometry:c}):j(c)}function j(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var $={toGeoJSON:function(i){return P(this,{type:"Point",coordinates:E(this.getLatLng(),i)})}};Jn.include($),Yi.include($),wi.include($),t.include({toGeoJSON:function(i){var c=!qn(this._latlngs),g=O(this._latlngs,c?1:0,!1,i);return P(this,{type:(c?"Multi":"")+"LineString",coordinates:g})}}),o.include({toGeoJSON:function(i){var c=!qn(this._latlngs),g=c&&!qn(this._latlngs[0]),_=O(this._latlngs,g?2:c?1:0,!0,i);return c||(_=[_]),P(this,{type:(g?"Multi":"")+"Polygon",coordinates:_})}}),ti.include({toMultiPoint:function(i){var c=[];return this.eachLayer(function(g){c.push(g.toGeoJSON(i).geometry.coordinates)}),P(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(i){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(i);var g=c==="GeometryCollection",_=[];return this.eachLayer(function(x){if(x.toGeoJSON){var D=x.toGeoJSON(i);if(g)_.push(D.geometry);else{var Y=j(D);Y.type==="FeatureCollection"?_.push.apply(_,Y.features):_.push(Y)}}}),g?P(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function J(i,c){return new l(i,c)}var ne=J,ue=mn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,c,g){this._url=i,this._bounds=ye(c),W(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ue(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){xt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Ot(this._image),this},bringToBack:function(){return this._map&&Rn(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ye(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",c=this._image=i?this._url:it("img");if(Ue(c,"leaflet-image-layer"),this._zoomAnimated&&Ue(c,"leaflet-zoom-animated"),this.options.className&&Ue(c,this.options.className),c.onselectstart=b,c.onmousemove=b,c.onload=w(this.fire,this,"load"),c.onerror=w(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(i){var c=this._map.getZoomScale(i.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;M(this._image,g,c)},_reset:function(){var i=this._image,c=new Ae(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=c.getSize();ve(i,c.min),i.style.width=g.x+"px",i.style.height=g.y+"px"},_updateOpacity:function(){nt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),Ie=function(i,c,g){return new ue(i,c,g)},be=ue.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",c=this._image=i?this._url:it("video");if(Ue(c,"leaflet-image-layer"),this._zoomAnimated&&Ue(c,"leaflet-zoom-animated"),this.options.className&&Ue(c,this.options.className),c.onselectstart=b,c.onmousemove=b,c.onloadeddata=w(this.fire,this,"load"),i){for(var g=c.getElementsByTagName("source"),_=[],x=0;x<g.length;x++)_.push(g[x].src);this._url=g.length>0?_:[c.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var D=0;D<this._url.length;D++){var Y=it("source");Y.src=this._url[D],c.appendChild(Y)}}});function xe(i,c,g){return new be(i,c,g)}var rt=ue.extend({_initImage:function(){var i=this._image=this._url;Ue(i,"leaflet-image-layer"),this._zoomAnimated&&Ue(i,"leaflet-zoom-animated"),this.options.className&&Ue(i,this.options.className),i.onselectstart=b,i.onmousemove=b}});function et(i,c,g){return new rt(i,c,g)}var jt=mn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,c){i&&(i instanceof Re||T(i))?(this._latlng=ge(i),W(this,c)):(W(this,i),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&nt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&nt(this._container,1),this.bringToFront(),this.options.interactive&&(Ue(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(nt(this._container,0),this._removeTimeout=setTimeout(w(xt,void 0,this._container),200)):xt(this._container),this.options.interactive&&(yt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ge(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ot(this._container),this},bringToBack:function(){return this._map&&Rn(this._container),this},_prepareOpen:function(i){var c=this._source;if(!c._map)return!1;if(c instanceof Dr){c=null;var g=this._source._layers;for(var _ in g)if(g[_]._map){c=g[_];break}if(!c)return!1;this._source=c}if(!i)if(c.getCenter)i=c.getCenter();else if(c.getLatLng)i=c.getLatLng();else if(c.getBounds)i=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")i.innerHTML=c;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),c=ae(this.options.offset),g=this._getAnchor();this._zoomAnimated?ve(this._container,i.add(g)):c=c.add(i).add(g);var _=this._containerBottom=-c.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=_+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});at.include({_initOverlay:function(i,c,g,_){var x=c;return x instanceof i||(x=new i(_).setContent(c)),g&&x.setLatLng(g),x}}),mn.include({_initOverlay:function(i,c,g,_){var x=g;return x instanceof i?(W(x,_),x._source=this):(x=c&&!_?c:new i(_,this),x.setContent(g)),x}});var Fn=jt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,jt.prototype.openOn.call(this,i)},onAdd:function(i){jt.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Fr||this._source.on("preclick",qr))},onRemove:function(i){jt.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Fr||this._source.off("preclick",qr))},getEvents:function(){var i=jt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",c=this._container=it("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=it("div",i+"-content-wrapper",c);if(this._contentNode=it("div",i+"-content",g),Cr(c),Us(this._contentNode),Ze(c,"contextmenu",qr),this._tipContainer=it("div",i+"-tip-container",c),this._tip=it("div",i+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=it("a",i+"-close-button",c);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',Ze(_,"click",function(x){yn(x),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,c=i.style;c.width="",c.whiteSpace="nowrap";var g=i.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),c.width=g+1+"px",c.whiteSpace="",c.height="";var _=i.offsetHeight,x=this.options.maxHeight,D="leaflet-popup-scrolled";x&&_>x?(c.height=x+"px",Ue(i,D)):yt(i,D),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),g=this._getAnchor();ve(this._container,c.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,c=parseInt(qe(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+c,_=this._containerWidth,x=new te(this._containerLeft,-g-this._containerBottom);x._add($e(this._container));var D=i.layerPointToContainerPoint(x),Y=ae(this.options.autoPanPadding),ie=ae(this.options.autoPanPaddingTopLeft||Y),he=ae(this.options.autoPanPaddingBottomRight||Y),Ee=i.getSize(),De=0,Ke=0;D.x+_+he.x>Ee.x&&(De=D.x+_-Ee.x+he.x),D.x-De-ie.x<0&&(De=D.x-ie.x),D.y+g+he.y>Ee.y&&(Ke=D.y+g-Ee.y+he.y),D.y-Ke-ie.y<0&&(Ke=D.y-ie.y),(De||Ke)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([De,Ke]))}},_getAnchor:function(){return ae(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),jn=function(i,c){return new Fn(i,c)};at.mergeOptions({closePopupOnClick:!0}),at.include({openPopup:function(i,c,g){return this._initOverlay(Fn,i,c,g).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),mn.include({bindPopup:function(i,c){return this._popup=this._initOverlay(Fn,this._popup,i,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof Dr||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Er(i);var c=i.layer||i.target;if(this._popup._source===c&&!(c instanceof Fr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=c,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var _t=jt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){jt.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){jt.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=jt.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",c=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=it("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+C(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var c,g,_=this._map,x=this._container,D=_.latLngToContainerPoint(_.getCenter()),Y=_.layerPointToContainerPoint(i),ie=this.options.direction,he=x.offsetWidth,Ee=x.offsetHeight,De=ae(this.options.offset),Ke=this._getAnchor();ie==="top"?(c=he/2,g=Ee):ie==="bottom"?(c=he/2,g=0):ie==="center"?(c=he/2,g=Ee/2):ie==="right"?(c=0,g=Ee/2):ie==="left"?(c=he,g=Ee/2):Y.x<D.x?(ie="right",c=0,g=Ee/2):(ie="left",c=he+(De.x+Ke.x)*2,g=Ee/2),i=i.subtract(ae(c,g,!0)).add(De).add(Ke),yt(x,"leaflet-tooltip-right"),yt(x,"leaflet-tooltip-left"),yt(x,"leaflet-tooltip-top"),yt(x,"leaflet-tooltip-bottom"),Ue(x,"leaflet-tooltip-"+ie),ve(x,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&nt(this._container,i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(c)},_getAnchor:function(){return ae(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Cn=function(i,c){return new _t(i,c)};at.include({openTooltip:function(i,c,g){return this._initOverlay(_t,i,c,g).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),mn.include({bindTooltip:function(i,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(_t,this._tooltip,i,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var c=i?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[c](g),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof Dr||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&(Ze(c,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Ze(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var c=i.latlng,g,_;this._tooltip.options.sticky&&i.originalEvent&&(g=this._map.mouseEventToContainerPoint(i.originalEvent),_=this._map.containerPointToLayerPoint(g),c=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(c)}});var zn=Xi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var c=i&&i.tagName==="DIV"?i:document.createElement("div"),g=this.options;if(g.html instanceof Element?(pi(c),c.appendChild(g.html)):c.innerHTML=g.html!==!1?g.html:"",g.bgPos){var _=ae(g.bgPos);c.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function Ki(i){return new zn(i)}Xi.Default=xs;var jr=mn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){W(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),xt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ot(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Rn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof te?i:new te(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var c=this.getPane().children,g=-i(-1/0,1/0),_=0,x=c.length,D;_<x;_++)D=c[_].style.zIndex,c[_]!==this._container&&D&&(g=i(g,+D));isFinite(g)&&(this.options.zIndex=g+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Fe.ielt9){nt(this._container,this.options.opacity);var i=+new Date,c=!1,g=!1;for(var _ in this._tiles){var x=this._tiles[_];if(!(!x.current||!x.loaded)){var D=Math.min(1,(i-x.loaded)/200);nt(x.el,D),D<1?c=!0:(x.active?g=!0:this._onOpaqueTile(x),x.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),c&&(de(this._fadeFrame),this._fadeFrame=re(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=it("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,c=this.options.maxZoom;if(i!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===i?(this._levels[g].el.style.zIndex=c-Math.abs(i-g),this._onUpdateLevel(g)):(xt(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var _=this._levels[i],x=this._map;return _||(_=this._levels[i]={},_.el=it("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=c,_.origin=x.project(x.unproject(x.getPixelOrigin()),i).round(),_.zoom=i,this._setZoomTransform(_,x.getCenter(),x.getZoom()),b(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var i,c,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)c=this._tiles[i],c.retain=c.current;for(i in this._tiles)if(c=this._tiles[i],c.current&&!c.active){var _=c.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var c in this._tiles)this._tiles[c].coords.z===i&&this._removeTile(c)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)xt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,c,g,_){var x=Math.floor(i/2),D=Math.floor(c/2),Y=g-1,ie=new te(+x,+D);ie.z=+Y;var he=this._tileCoordsToKey(ie),Ee=this._tiles[he];return Ee&&Ee.active?(Ee.retain=!0,!0):(Ee&&Ee.loaded&&(Ee.retain=!0),Y>_?this._retainParent(x,D,Y,_):!1)},_retainChildren:function(i,c,g,_){for(var x=2*i;x<2*i+2;x++)for(var D=2*c;D<2*c+2;D++){var Y=new te(x,D);Y.z=g+1;var ie=this._tileCoordsToKey(Y),he=this._tiles[ie];if(he&&he.active){he.retain=!0;continue}else he&&he.loaded&&(he.retain=!0);g+1<_&&this._retainChildren(x,D,g+1,_)}},_resetView:function(i){var c=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var c=this.options;return c.minNativeZoom!==void 0&&i<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<i?c.maxNativeZoom:i},_setView:function(i,c,g,_){var x=Math.round(c);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var D=this.options.updateWhenZooming&&x!==this._tileZoom;(!_||D)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(i),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(i,c)},_setZoomTransforms:function(i,c){for(var g in this._levels)this._setZoomTransform(this._levels[g],i,c)},_setZoomTransform:function(i,c,g){var _=this._map.getZoomScale(g,i.zoom),x=i.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(c,g)).round();Fe.any3d?M(i.el,x,_):ve(i.el,x)},_resetGrid:function(){var i=this._map,c=i.options.crs,g=this._tileSize=this.getTileSize(),_=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,c.wrapLng[0]],_).x/g.x),Math.ceil(i.project([0,c.wrapLng[1]],_).x/g.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([c.wrapLat[0],0],_).y/g.x),Math.ceil(i.project([c.wrapLat[1],0],_).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var c=this._map,g=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),_=c.getZoomScale(g,this._tileZoom),x=c.project(i,this._tileZoom).floor(),D=c.getSize().divideBy(_*2);return new Ae(x.subtract(D),x.add(D))},_update:function(i){var c=this._map;if(c){var g=this._clampZoom(c.getZoom());if(i===void 0&&(i=c.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(i),x=this._pxBoundsToTileRange(_),D=x.getCenter(),Y=[],ie=this.options.keepBuffer,he=new Ae(x.getBottomLeft().subtract([ie,-ie]),x.getTopRight().add([ie,-ie]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ee in this._tiles){var De=this._tiles[Ee].coords;(De.z!==this._tileZoom||!he.contains(new te(De.x,De.y)))&&(this._tiles[Ee].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(i,g);return}for(var Ke=x.min.y;Ke<=x.max.y;Ke++)for(var st=x.min.x;st<=x.max.x;st++){var er=new te(st,Ke);if(er.z=this._tileZoom,!!this._isValidTile(er)){var bn=this._tiles[this._tileCoordsToKey(er)];bn?bn.current=!0:Y.push(er)}}if(Y.sort(function(lr,Gs){return lr.distanceTo(D)-Gs.distanceTo(D)}),Y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var zr=document.createDocumentFragment();for(st=0;st<Y.length;st++)this._addTile(Y[st],zr);this._level.el.appendChild(zr)}}}},_isValidTile:function(i){var c=this._map.options.crs;if(!c.infinite){var g=this._globalTileRange;if(!c.wrapLng&&(i.x<g.min.x||i.x>g.max.x)||!c.wrapLat&&(i.y<g.min.y||i.y>g.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(i);return ye(this.options.bounds).overlaps(_)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var c=this._map,g=this.getTileSize(),_=i.scaleBy(g),x=_.add(g),D=c.unproject(_,i.z),Y=c.unproject(x,i.z);return[D,Y]},_tileCoordsToBounds:function(i){var c=this._tileCoordsToNwSe(i),g=new Ce(c[0],c[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var c=i.split(":"),g=new te(+c[0],+c[1]);return g.z=+c[2],g},_removeTile:function(i){var c=this._tiles[i];c&&(xt(c.el),delete this._tiles[i],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Ue(i,"leaflet-tile");var c=this.getTileSize();i.style.width=c.x+"px",i.style.height=c.y+"px",i.onselectstart=b,i.onmousemove=b,Fe.ielt9&&this.options.opacity<1&&nt(i,this.options.opacity)},_addTile:function(i,c){var g=this._getTilePos(i),_=this._tileCoordsToKey(i),x=this.createTile(this._wrapCoords(i),w(this._tileReady,this,i));this._initTile(x),this.createTile.length<2&&re(w(this._tileReady,this,i,null,x)),ve(x,g),this._tiles[_]={el:x,coords:i,current:!0},c.appendChild(x),this.fire("tileloadstart",{tile:x,coords:i})},_tileReady:function(i,c,g){c&&this.fire("tileerror",{error:c,tile:g,coords:i});var _=this._tileCoordsToKey(i);g=this._tiles[_],g&&(g.loaded=+new Date,this._map._fadeAnimated?(nt(g.el,0),de(this._fadeFrame),this._fadeFrame=re(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),c||(Ue(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Fe.ielt9||!this._map._fadeAnimated?re(this._pruneTiles,this):setTimeout(w(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var c=new te(this._wrapX?S(i.x,this._wrapX):i.x,this._wrapY?S(i.y,this._wrapY):i.y);return c.z=i.z,c},_pxBoundsToTileRange:function(i){var c=this.getTileSize();return new Ae(i.min.unscaleBy(c).floor(),i.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function ku(i){return new jr(i)}var Qi=jr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,c){this._url=i,c=W(this,c),c.detectRetina&&Fe.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,c){return this._url===i&&c===void 0&&(c=!0),this._url=i,c||this.redraw(),this},createTile:function(i,c){var g=document.createElement("img");return Ze(g,"load",w(this._tileOnLoad,this,c,g)),Ze(g,"error",w(this._tileOnError,this,c,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(i),g},getTileUrl:function(i){var c={r:Fe.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-i.y;this.options.tms&&(c.y=g),c["-y"]=g}return k(this._url,d(c,this.options))},_tileOnLoad:function(i,c){Fe.ielt9?setTimeout(w(i,this,null,c),0):i(null,c)},_tileOnError:function(i,c,g){var _=this.options.errorTileUrl;_&&c.getAttribute("src")!==_&&(c.src=_),i(g,c)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,c=this.options.maxZoom,g=this.options.zoomReverse,_=this.options.zoomOffset;return g&&(i=c-i),i+_},_getSubdomain:function(i){var c=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var i,c;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(c=this._tiles[i].el,c.onload=b,c.onerror=b,!c.complete)){c.src=q;var g=this._tiles[i].coords;xt(c),delete this._tiles[i],this.fire("tileabort",{tile:c,coords:g})}},_removeTile:function(i){var c=this._tiles[i];if(c)return c.el.setAttribute("src",q),jr.prototype._removeTile.call(this,i)},_tileReady:function(i,c,g){if(!(!this._map||g&&g.getAttribute("src")===q))return jr.prototype._tileReady.call(this,i,c,g)}});function vd(i,c){return new Qi(i,c)}var wd=Qi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,c){this._url=i;var g=d({},this.defaultWmsParams);for(var _ in c)_ in this.options||(g[_]=c[_]);c=W(this,c);var x=c.detectRetina&&Fe.retina?2:1,D=this.getTileSize();g.width=D.x*x,g.height=D.y*x,this.wmsParams=g},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Qi.prototype.onAdd.call(this,i)},getTileUrl:function(i){var c=this._tileCoordsToNwSe(i),g=this._crs,_=Ne(g.project(c[0]),g.project(c[1])),x=_.min,D=_.max,Y=(this._wmsVersion>=1.3&&this._crs===Gi?[x.y,x.x,D.y,D.x]:[x.x,x.y,D.x,D.y]).join(","),ie=Qi.prototype.getTileUrl.call(this,i);return ie+se(this.wmsParams,ie,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Y},setParams:function(i,c){return d(this.wmsParams,i),c||this.redraw(),this}});function pg(i,c){return new wd(i,c)}Qi.WMS=wd,vd.wms=pg;var Ri=mn.extend({options:{padding:.1},initialize:function(i){W(this,i),C(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ue(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,c){var g=this._map.getZoomScale(c,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,c),D=_.multiplyBy(-g).add(x).subtract(this._map._getNewPixelOrigin(i,c));Fe.any3d?M(this._container,D,g):ve(this._container,D)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,c=this._map.getSize(),g=this._map.containerPointToLayerPoint(c.multiplyBy(-i)).round();this._bounds=new Ae(g,g.add(c.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),yd=Ri.extend({options:{tolerance:0},getEvents:function(){var i=Ri.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ri.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Ze(i,"mousemove",this._onMouseMove,this),Ze(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ze(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){de(this._redrawRequest),delete this._ctx,xt(this._container),ke(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var c in this._layers)i=this._layers[c],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ri.prototype._update.call(this);var i=this._bounds,c=this._container,g=i.getSize(),_=Fe.retina?2:1;ve(c,i.min),c.width=_*g.x,c.height=_*g.y,c.style.width=g.x+"px",c.style.height=g.y+"px",Fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Ri.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[C(i)]=i;var c=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var c=i._order,g=c.next,_=c.prev;g?g.prev=_:this._drawLast=_,_?_.next=g:this._drawFirst=g,delete i._order,delete this._layers[C(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var c=i.options.dashArray.split(/[, ]+/),g=[],_,x;for(x=0;x<c.length;x++){if(_=Number(c[x]),isNaN(_))return;g.push(_)}i.options._dashArray=g}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||re(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var c=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ae,this._redrawBounds.extend(i._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(i._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var c=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,c=this._redrawBounds;if(this._ctx.save(),c){var g=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)i=_.layer,(!c||i._pxBounds&&i._pxBounds.intersects(c))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,c){if(this._drawing){var g,_,x,D,Y=i._parts,ie=Y.length,he=this._ctx;if(ie){for(he.beginPath(),g=0;g<ie;g++){for(_=0,x=Y[g].length;_<x;_++)D=Y[g][_],he[_?"lineTo":"moveTo"](D.x,D.y);c&&he.closePath()}this._fillStroke(he,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var c=i._point,g=this._ctx,_=Math.max(Math.round(i._radius),1),x=(Math.max(Math.round(i._radiusY),1)||_)/_;x!==1&&(g.save(),g.scale(1,x)),g.beginPath(),g.arc(c.x,c.y/x,_,0,Math.PI*2,!1),x!==1&&g.restore(),this._fillStroke(g,i)}},_fillStroke:function(i,c){var g=c.options;g.fill&&(i.globalAlpha=g.fillOpacity,i.fillStyle=g.fillColor||g.color,i.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(i.setLineDash&&i.setLineDash(c.options&&c.options._dashArray||[]),i.globalAlpha=g.opacity,i.lineWidth=g.weight,i.strokeStyle=g.color,i.lineCap=g.lineCap,i.lineJoin=g.lineJoin,i.stroke())},_onClick:function(i){for(var c=this._map.mouseEventToLayerPoint(i),g,_,x=this._drawFirst;x;x=x.next)g=x.layer,g.options.interactive&&g._containsPoint(c)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(g))&&(_=g);this._fireEvent(_?[_]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,c)}},_handleMouseOut:function(i){var c=this._hoveredLayer;c&&(yt(this._container,"leaflet-interactive"),this._fireEvent([c],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,c){if(!this._mouseHoverThrottled){for(var g,_,x=this._drawFirst;x;x=x.next)g=x.layer,g.options.interactive&&g._containsPoint(c)&&(_=g);_!==this._hoveredLayer&&(this._handleMouseOut(i),_&&(Ue(this._container,"leaflet-interactive"),this._fireEvent([_],i,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(w(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,c,g){this._map._fireDOMEvent(c,g||c.type,i)},_bringToFront:function(i){var c=i._order;if(c){var g=c.next,_=c.prev;if(g)g.prev=_;else return;_?_.next=g:g&&(this._drawFirst=g),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(i)}},_bringToBack:function(i){var c=i._order;if(c){var g=c.next,_=c.prev;if(_)_.next=g;else return;g?g.prev=_:_&&(this._drawLast=_),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(i)}}});function _d(i){return Fe.canvas?new yd(i):null}var Uo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),gg={_initContainer:function(){this._container=it("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ri.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var c=i._container=Uo("shape");Ue(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",i._path=Uo("path"),c.appendChild(i._path),this._updateStyle(i),this._layers[C(i)]=i},_addPath:function(i){var c=i._container;this._container.appendChild(c),i.options.interactive&&i.addInteractiveTarget(c)},_removePath:function(i){var c=i._container;xt(c),i.removeInteractiveTarget(c),delete this._layers[C(i)]},_updateStyle:function(i){var c=i._stroke,g=i._fill,_=i.options,x=i._container;x.stroked=!!_.stroke,x.filled=!!_.fill,_.stroke?(c||(c=i._stroke=Uo("stroke")),x.appendChild(c),c.weight=_.weight+"px",c.color=_.color,c.opacity=_.opacity,_.dashArray?c.dashStyle=T(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=_.lineCap.replace("butt","flat"),c.joinstyle=_.lineJoin):c&&(x.removeChild(c),i._stroke=null),_.fill?(g||(g=i._fill=Uo("fill")),x.appendChild(g),g.color=_.fillColor||_.color,g.opacity=_.fillOpacity):g&&(x.removeChild(g),i._fill=null)},_updateCircle:function(i){var c=i._point.round(),g=Math.round(i._radius),_=Math.round(i._radiusY||g);this._setPath(i,i._empty()?"M0 0":"AL "+c.x+","+c.y+" "+g+","+_+" 0,"+65535*360)},_setPath:function(i,c){i._path.v=c},_bringToFront:function(i){Ot(i._container)},_bringToBack:function(i){Rn(i._container)}},Ya=Fe.vml?Uo:Zt,Ho=Ri.extend({_initContainer:function(){this._container=Ya("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ya("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){xt(this._container),ke(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ri.prototype._update.call(this);var i=this._bounds,c=i.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,g.setAttribute("width",c.x),g.setAttribute("height",c.y)),ve(g,i.min),g.setAttribute("viewBox",[i.min.x,i.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(i){var c=i._path=Ya("path");i.options.className&&Ue(c,i.options.className),i.options.interactive&&Ue(c,"leaflet-interactive"),this._updateStyle(i),this._layers[C(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){xt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[C(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var c=i._path,g=i.options;c&&(g.stroke?(c.setAttribute("stroke",g.color),c.setAttribute("stroke-opacity",g.opacity),c.setAttribute("stroke-width",g.weight),c.setAttribute("stroke-linecap",g.lineCap),c.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?c.setAttribute("stroke-dasharray",g.dashArray):c.removeAttribute("stroke-dasharray"),g.dashOffset?c.setAttribute("stroke-dashoffset",g.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),g.fill?(c.setAttribute("fill",g.fillColor||g.color),c.setAttribute("fill-opacity",g.fillOpacity),c.setAttribute("fill-rule",g.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(i,c){this._setPath(i,Dn(i._parts,c))},_updateCircle:function(i){var c=i._point,g=Math.max(Math.round(i._radius),1),_=Math.max(Math.round(i._radiusY),1)||g,x="a"+g+","+_+" 0 1,0 ",D=i._empty()?"M0 0":"M"+(c.x-g)+","+c.y+x+g*2+",0 "+x+-g*2+",0 ";this._setPath(i,D)},_setPath:function(i,c){i._path.setAttribute("d",c)},_bringToFront:function(i){Ot(i._path)},_bringToBack:function(i){Rn(i._path)}});Fe.vml&&Ho.include(gg);function Cd(i){return Fe.svg||Fe.vml?new Ho(i):null}at.include({getRenderer:function(i){var c=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var c=this._paneRenderers[i];return c===void 0&&(c=this._createRenderer({pane:i}),this._paneRenderers[i]=c),c},_createRenderer:function(i){return this.options.preferCanvas&&_d(i)||Cd(i)}});var Ed=o.extend({initialize:function(i,c){o.prototype.initialize.call(this,this._boundsToLatLngs(i),c)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ye(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function mg(i,c){return new Ed(i,c)}Ho.create=Ya,Ho.pointsToPath=Dn,l.geometryToLayer=h,l.coordsToLatLng=m,l.coordsToLatLngs=y,l.latLngToCoords=E,l.latLngsToCoords=O,l.getFeature=P,l.asFeature=j,at.mergeOptions({boxZoom:!0});var Ad=$n.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ke(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){xt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),gt(),Le(),this._startPoint=this._map.mouseEventToContainerPoint(i),Ze(document,{contextmenu:Er,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=it("div","leaflet-zoom-box",this._container),Ue(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var c=new Ae(this._point,this._startPoint),g=c.getSize();ve(this._box,c.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(xt(this._box),yt(this._container,"leaflet-crosshair")),vr(),ct(),ke(document,{contextmenu:Er,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(w(this._resetState,this),0);var c=new Ce(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});at.addInitHook("addHandler","boxZoom",Ad),at.mergeOptions({doubleClickZoom:!0});var xd=$n.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var c=this._map,g=c.getZoom(),_=c.options.zoomDelta,x=i.originalEvent.shiftKey?g-_:g+_;c.options.doubleClickZoom==="center"?c.setZoom(x):c.setZoomAround(i.containerPoint,x)}});at.addInitHook("addHandler","doubleClickZoom",xd),at.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Sd=$n.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new gi(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Ue(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){yt(this._map._container,"leaflet-grab"),yt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=ye(this._map.options.maxBounds);this._offsetLimit=Ne(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var c=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(c),this._prunePositions(c)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,c){return i-(i-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;i.x<c.min.x&&(i.x=this._viscousLimit(i.x,c.min.x)),i.y<c.min.y&&(i.y=this._viscousLimit(i.y,c.min.y)),i.x>c.max.x&&(i.x=this._viscousLimit(i.x,c.max.x)),i.y>c.max.y&&(i.y=this._viscousLimit(i.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,c=Math.round(i/2),g=this._initialWorldOffset,_=this._draggable._newPos.x,x=(_-c+g)%i+c-g,D=(_+c+g)%i-c-g,Y=Math.abs(x+g)<Math.abs(D+g)?x:D;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Y},_onDragEnd:function(i){var c=this._map,g=c.options,_=!g.inertia||i.noInertia||this._times.length<2;if(c.fire("dragend",i),_)c.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),D=(this._lastTime-this._times[0])/1e3,Y=g.easeLinearity,ie=x.multiplyBy(Y/D),he=ie.distanceTo([0,0]),Ee=Math.min(g.inertiaMaxSpeed,he),De=ie.multiplyBy(Ee/he),Ke=Ee/(g.inertiaDeceleration*Y),st=De.multiplyBy(-Ke/2).round();!st.x&&!st.y?c.fire("moveend"):(st=c._limitOffset(st,c.options.maxBounds),re(function(){c.panBy(st,{duration:Ke,easeLinearity:Y,noMoveStart:!0,animate:!0})}))}}});at.addInitHook("addHandler","dragging",Sd),at.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Id=$n.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Ze(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ke(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,c=document.documentElement,g=i.scrollTop||c.scrollTop,_=i.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(_,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var c=this._panKeys={},g=this.keyCodes,_,x;for(_=0,x=g.left.length;_<x;_++)c[g.left[_]]=[-1*i,0];for(_=0,x=g.right.length;_<x;_++)c[g.right[_]]=[i,0];for(_=0,x=g.down.length;_<x;_++)c[g.down[_]]=[0,i];for(_=0,x=g.up.length;_<x;_++)c[g.up[_]]=[0,-1*i]},_setZoomDelta:function(i){var c=this._zoomKeys={},g=this.keyCodes,_,x;for(_=0,x=g.zoomIn.length;_<x;_++)c[g.zoomIn[_]]=i;for(_=0,x=g.zoomOut.length;_<x;_++)c[g.zoomOut[_]]=-i},_addHooks:function(){Ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ke(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var c=i.keyCode,g=this._map,_;if(c in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(_=this._panKeys[c],i.shiftKey&&(_=ae(_).multiplyBy(3)),g.options.maxBounds&&(_=g._limitOffset(ae(_),g.options.maxBounds)),g.options.worldCopyJump){var x=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(_)));g.panTo(x)}else g.panBy(_)}else if(c in this._zoomKeys)g.setZoom(g.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;Er(i)}}});at.addInitHook("addHandler","keyboard",Id),at.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bd=$n.extend({addHooks:function(){Ze(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ke(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var c=Zi(i),g=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var _=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(w(this._performZoom,this),_),Er(i)},_performZoom:function(){var i=this._map,c=i.getZoom(),g=this._map.options.zoomSnap||0;i._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,D=g?Math.ceil(x/g)*g:x,Y=i._limitZoom(c+(this._delta>0?D:-D))-c;this._delta=0,this._startTime=null,Y&&(i.options.scrollWheelZoom==="center"?i.setZoom(c+Y):i.setZoomAround(this._lastMousePos,c+Y))}});at.addInitHook("addHandler","scrollWheelZoom",bd);var vg=600;at.mergeOptions({tapHold:Fe.touchNative&&Fe.safari&&Fe.mobile,tapTolerance:15});var Td=$n.extend({addHooks:function(){Ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ke(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var c=i.touches[0];this._startPos=this._newPos=new te(c.clientX,c.clientY),this._holdTimeout=setTimeout(w(function(){this._cancel(),this._isTapValid()&&(Ze(document,"touchend",yn),Ze(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),vg),Ze(document,"touchend touchcancel contextmenu",this._cancel,this),Ze(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){ke(document,"touchend",yn),ke(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),ke(document,"touchend touchcancel contextmenu",this._cancel,this),ke(document,"touchmove",this._onMove,this)},_onMove:function(i){var c=i.touches[0];this._newPos=new te(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,c){var g=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});g._simulated=!0,c.target.dispatchEvent(g)}});at.addInitHook("addHandler","tapHold",Td),at.mergeOptions({touchZoom:Fe.touch,bounceAtZoomLimits:!0});var Nd=$n.extend({addHooks:function(){Ue(this._map._container,"leaflet-touch-zoom"),Ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){yt(this._map._container,"leaflet-touch-zoom"),ke(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var c=this._map;if(!(!i.touches||i.touches.length!==2||c._animatingZoom||this._zooming)){var g=c.mouseEventToContainerPoint(i.touches[0]),_=c.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(g.add(_)._divideBy(2))),this._startDist=g.distanceTo(_),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Ze(document,"touchmove",this._onTouchMove,this),Ze(document,"touchend touchcancel",this._onTouchEnd,this),yn(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var c=this._map,g=c.mouseEventToContainerPoint(i.touches[0]),_=c.mouseEventToContainerPoint(i.touches[1]),x=g.distanceTo(_)/this._startDist;if(this._zoom=c.getScaleZoom(x,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&x<1||this._zoom>c.getMaxZoom()&&x>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var D=g._add(_)._divideBy(2)._subtract(this._centerPoint);if(x===1&&D.x===0&&D.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(D),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),de(this._animRequest);var Y=w(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=re(Y,this,!0),yn(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,de(this._animRequest),ke(document,"touchmove",this._onTouchMove,this),ke(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});at.addInitHook("addHandler","touchZoom",Nd),at.BoxZoom=Ad,at.DoubleClickZoom=xd,at.Drag=Sd,at.Keyboard=Id,at.ScrollWheelZoom=bd,at.TapHold=Td,at.TouchZoom=Nd,s.Bounds=Ae,s.Browser=Fe,s.CRS=dt,s.Canvas=yd,s.Circle=Yi,s.CircleMarker=wi,s.Class=le,s.Control=Ar,s.DivIcon=zn,s.DivOverlay=jt,s.DomEvent=Bn,s.DomUtil=ht,s.Draggable=gi,s.Evented=fe,s.FeatureGroup=Dr,s.GeoJSON=l,s.GridLayer=jr,s.Handler=$n,s.Icon=Xi,s.ImageOverlay=ue,s.LatLng=Re,s.LatLngBounds=Ce,s.Layer=mn,s.LayerGroup=ti,s.LineUtil=Xa,s.Map=at,s.Marker=Jn,s.Mixin=Wa,s.Path=Fr,s.Point=te,s.PolyUtil=Lo,s.Polygon=o,s.Polyline=t,s.Popup=Fn,s.PosAnimation=Po,s.Projection=Fo,s.Rectangle=Ed,s.Renderer=Ri,s.SVG=Ho,s.SVGOverlay=rt,s.TileLayer=Qi,s.Tooltip=_t,s.Transformation=Mt,s.Util=ee,s.VideoOverlay=be,s.bind=w,s.bounds=Ne,s.canvas=_d,s.circle=N,s.circleMarker=pt,s.control=Es,s.divIcon=Ki,s.extend=d,s.featureGroup=Br,s.geoJSON=J,s.geoJson=ne,s.gridLayer=ku,s.icon=jo,s.imageOverlay=Ie,s.latLng=ge,s.latLngBounds=ye,s.layerGroup=ar,s.map=Ha,s.marker=Ru,s.point=ae,s.polygon=a,s.polyline=r,s.popup=jn,s.rectangle=mg,s.setOptions=W,s.stamp=C,s.svg=Cd,s.svgOverlay=et,s.tileLayer=vd,s.tooltip=Cn,s.transformation=vt,s.version=u,s.videoOverlay=xe;var wg=window.L;s.noConflict=function(){return window.L=wg,this},window.L=s})})(oh,oh.exports);var No=oh.exports;const Au=su(No);function xu(e,n,s){return Object.freeze({instance:e,context:n,container:s})}function Su(e,n){return n==null?function(u,d){const f=K.useRef();return f.current||(f.current=e(u,d)),f}:function(u,d){const f=K.useRef();f.current||(f.current=e(u,d));const w=K.useRef(u),{instance:A}=f.current;return K.useEffect(function(){w.current!==u&&(n(A,u,w.current),w.current=u)},[A,u,d]),f}}function Bp(e,n){K.useEffect(function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){var f;(f=n.layerContainer)==null||f.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}function Fp(e){return function(s){const u=Eu(),d=e(ud(s,u),u);return av(u.map,s.attribution),Dp(d.current,s.eventHandlers),Bp(d.current,u),d}}function hv(e,n){const s=K.useRef();K.useEffect(function(){if(n.pathOptions!==s.current){const d=n.pathOptions??{};e.instance.setStyle(d),s.current=d}},[e,n])}function dv(e){return function(s){const u=Eu(),d=e(ud(s,u),u);return Dp(d.current,s.eventHandlers),Bp(d.current,u),hv(d.current,s),d}}function fv(e){function n(d,f){return xu(e(d),f)}const s=Su(n),u=cv(s);return Lp(u)}function pv(e,n){const s=Su(e,n),u=Fp(s);return Pp(u)}function gv(e,n){const s=Su(e,n),u=dv(s);return Pp(u)}function mv(e,n){const s=Su(e,n),u=Fp(s);return Lp(u)}function vv(e,n,s){const{opacity:u,zIndex:d}=n;u!=null&&u!==s.opacity&&e.setOpacity(u),d!=null&&d!==s.zIndex&&e.setZIndex(d)}function jp(){return Eu().map}function wv(e){const n=jp();return K.useEffect(function(){return n.on(e),function(){n.off(e)}},[n,e]),n}const yv=fv(function(n){return new No.Control.Attribution(n)});function ah(){return ah=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},ah.apply(this,arguments)}function _v({bounds:e,boundsOptions:n,center:s,children:u,className:d,id:f,placeholder:w,style:A,whenReady:C,zoom:v,...S},b){const[R]=K.useState({className:d,id:f,style:A}),[z,V]=K.useState(null);K.useImperativeHandle(b,()=>(z==null?void 0:z.map)??null,[z]);const W=K.useCallback(B=>{if(B!==null&&z===null){const k=new No.Map(B,S);s!=null&&v!=null?k.setView(s,v):e!=null&&k.fitBounds(e,n),C!=null&&k.whenReady(C),V(uv(k))}},[]);K.useEffect(()=>()=>{z==null||z.map.remove()},[z]);const se=z?Vt.createElement(Mp,{value:z},u):w??null;return Vt.createElement("div",ah({},R,{ref:W}),se)}const Cv=K.forwardRef(_v),bl=pv(function({position:n,...s},u){const d=new No.Marker(n,s);return xu(d,Rp(u,{overlayContainer:d}))},function(n,s,u){s.position!==u.position&&n.setLatLng(s.position),s.icon!=null&&s.icon!==u.icon&&n.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==u.zIndexOffset&&n.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==u.opacity&&n.setOpacity(s.opacity),n.dragging!=null&&s.draggable!==u.draggable&&(s.draggable===!0?n.dragging.enable():n.dragging.disable())}),$o=gv(function({positions:n,...s},u){const d=new No.Polyline(n,s);return xu(d,Rp(u,{overlayContainer:d}))},function(n,s,u){s.positions!==u.positions&&n.setLatLngs(s.positions)}),Ev=mv(function({url:n,...s},u){const d=new No.TileLayer(n,ud(s,u));return xu(d,u)},function(n,s,u){vv(n,s,u);const{url:d}=s;d!=null&&d!==u.url&&n.setUrl(d)}),Av={},Vf=e=>{let n;const s=new Set,u=(S,b)=>{const R=typeof S=="function"?S(n):S;if(!Object.is(R,n)){const z=n;n=b??(typeof R!="object"||R===null)?R:Object.assign({},n,R),s.forEach(V=>V(n,z))}},d=()=>n,C={setState:u,getState:d,getInitialState:()=>v,subscribe:S=>(s.add(S),()=>s.delete(S)),destroy:()=>{(Av?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},v=n=e(u,d,C);return C},xv=e=>e?Vf(e):Vf;var zp={exports:{}},Up={},Hp={exports:{}},Vp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var So=K;function Sv(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Iv=typeof Object.is=="function"?Object.is:Sv,bv=So.useState,Tv=So.useEffect,Nv=So.useLayoutEffect,Ov=So.useDebugValue;function Rv(e,n){var s=n(),u=bv({inst:{value:s,getSnapshot:n}}),d=u[0].inst,f=u[1];return Nv(function(){d.value=s,d.getSnapshot=n,oc(d)&&f({inst:d})},[e,s,n]),Tv(function(){return oc(d)&&f({inst:d}),e(function(){oc(d)&&f({inst:d})})},[e]),Ov(s),s}function oc(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Iv(e,s)}catch{return!0}}function kv(e,n){return n()}var Mv=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kv:Rv;Vp.useSyncExternalStore=So.useSyncExternalStore!==void 0?So.useSyncExternalStore:Mv;Hp.exports=Vp;var Pv=Hp.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iu=K,Lv=Pv;function Dv(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Bv=typeof Object.is=="function"?Object.is:Dv,Fv=Lv.useSyncExternalStore,jv=Iu.useRef,zv=Iu.useEffect,Uv=Iu.useMemo,Hv=Iu.useDebugValue;Up.useSyncExternalStoreWithSelector=function(e,n,s,u,d){var f=jv(null);if(f.current===null){var w={hasValue:!1,value:null};f.current=w}else w=f.current;f=Uv(function(){function C(z){if(!v){if(v=!0,S=z,z=u(z),d!==void 0&&w.hasValue){var V=w.value;if(d(V,z))return b=V}return b=z}if(V=b,Bv(S,z))return V;var W=u(z);return d!==void 0&&d(V,W)?(S=z,V):(S=z,b=W)}var v=!1,S,b,R=s===void 0?null:s;return[function(){return C(n())},R===null?void 0:function(){return C(R())}]},[n,s,u,d]);var A=Fv(e,f[0],f[1]);return zv(function(){w.hasValue=!0,w.value=A},[A]),Hv(A),A};zp.exports=Up;var Vv=zp.exports;const Wv=su(Vv),Wp={},{useDebugValue:Zv}=Vt,{useSyncExternalStoreWithSelector:Gv}=Wv;let Wf=!1;const Xv=e=>e;function Yv(e,n=Xv,s){(Wp?"production":void 0)!=="production"&&s&&!Wf&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Wf=!0);const u=Gv(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,s);return Zv(u),u}const Zf=e=>{(Wp?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof e=="function"?xv(e):e,s=(u,d)=>Yv(n,u,d);return Object.assign(s,n),s},cd=e=>e?Zf(e):Zf,Zp=e=>{if(typeof globalThis<"u"&&typeof globalThis.atob=="function")return globalThis.atob(e);if(typeof Buffer<"u")return Buffer.from(e,"base64").toString("utf-8");throw new Error("Base64 decoding is not supported in this environment.")},Kv=e=>{const n=new Uint8Array(e.length);for(let s=0;s<e.length;s+=1)n[s]=e.charCodeAt(s);return n},Qv=e=>{const n=e.replace(/-/g,"+").replace(/_/g,"/"),s=n.length%4===0?"":"=".repeat(4-n.length%4),u=Zp(`${n}${s}`);return Kv(u)},Gf=e=>Math.round(e*1e6)/1e6,Xf=e=>typeof e=="number"&&Number.isFinite(e),Ks=e=>{if(!e||typeof e!="object")return null;const n=Number(e.lat),s=Number(e.lng);return!Xf(n)||!Xf(s)||n<-90||n>90||s<-180||s>180?null:{lat:Gf(n),lng:Gf(s)}},ka=4,Ys=1e5,Jl="#38bdf8",lh={r:"#ef4444",o:"#f97316",a:"#f59e0b",y:"#eab308",l:"#84cc16",g:"#22c55e",e:"#10b981",t:"#14b8a6",c:"#06b6d4",s:"#0ea5e9",b:"#3b82f6",i:"#6366f1",v:"#8b5cf6",p:"#a855f7",f:"#d946ef",k:"#ec4899",z:"#f43f5e",x:"#64748b",d:"#6b7280",m:"#71717a",n:"#737373",w:"#78716c",0:"#000000",1:"#ffffff"},Yf=Object.entries(lh).reduce((e,[n,s])=>(e[s]=n,e),{}),fa=e=>{if(!e||typeof e!="object")return null;const n=typeof e.version=="number"?e.version:ka;if(n<3){let f=[],w="direct";if(n===1){w=e.connectVia==="route"?"route":"direct";const A=Ks(e.start),C=Ks(e.end),v=Array.isArray(e.checkpoints)?e.checkpoints.map(Ks).filter(Boolean):[];A&&f.push(A),f.push(...v),C&&f.push(C)}else w=e.connectVia==="route"?"route":"direct",f=Array.isArray(e.checkpoints)?e.checkpoints.map(Ks).filter(Boolean):[];return{version:3,connectVia:w,checkpoints:f,routes:[{name:"Route 1",color:"#38bdf8",indices:f.map((A,C)=>C),isVisible:!0}]}}if(n>ka)return null;const s=e.connectVia==="route"?"route":"direct",u=Array.isArray(e.checkpoints)?e.checkpoints.map(Ks).filter(Boolean):[],d=Array.isArray(e.routes)?e.routes.map(f=>({name:typeof f.name=="string"?f.name.slice(0,20):"Route",color:f.color===null?null:typeof f.color=="string"?f.color:Jl,indices:Array.isArray(f.indices)?f.indices.filter(w=>typeof w=="number"&&w>=0&&w<u.length):[],isVisible:typeof f.isVisible=="boolean"?f.isVisible:!0})):[];return{version:n,connectVia:s,checkpoints:u,routes:d}},$v=({checkpointMap:e,routes:n,connectVia:s,includeNames:u=!1,includeColors:d=!1})=>{const f=new Set;n.forEach(v=>{Array.isArray(v.items)&&v.items.forEach(S=>f.add(S))});const w=[],A={};Array.from(f).forEach(v=>{const S=e[v];S&&S.position&&(A[v]=w.length,w.push(S.position))});const C=n.map(v=>({name:u?v.name:"",color:d?v.color:null,isVisible:v.isVisible,indices:(v.items||[]).map(S=>A[S]).filter(S=>typeof S=="number")}));return{version:ka,connectVia:s,checkpoints:w,routes:C}},qv=e=>{try{const n=Qv(e);if(n.length<4)return null;const s=new DataView(n.buffer,n.byteOffset,n.byteLength);let u=0;const d=s.getUint8(u);if(u+=1,d<1||d>ka)return null;if(d<3){let b="direct";const R=[];if(d===1){const z=s.getUint8(u);u+=1,b=s.getUint8(u)===1?"route":"direct",u+=1;const V=s.getUint16(u,!1);u+=2;const W=()=>{const se=s.getInt32(u,!1)/Ys;u+=4;const B=s.getInt32(u,!1)/Ys;return u+=4,{lat:se,lng:B}};z&1&&R.push(W());for(let se=0;se<V;se+=1)R.push(W());z&2&&R.push(W())}else{b=s.getUint8(u)===1?"route":"direct",u+=1;const z=s.getUint16(u,!1);u+=2;for(let V=0;V<z;V+=1){const W=s.getInt32(u,!1)/Ys;u+=4;const se=s.getInt32(u,!1)/Ys;u+=4,R.push({lat:W,lng:se})}}return{version:3,connectVia:b,checkpoints:R,routes:[{name:"Route 1",color:Jl,isVisible:!0,indices:R.map((z,V)=>V)}]}}const f=s.getUint8(u)===1?"route":"direct";u+=1;const w=s.getUint16(u,!1);u+=2;const A=s.getUint8(u);u+=1;const C=[];for(let b=0;b<w;b+=1){const R=s.getInt32(u,!1)/Ys;u+=4;const z=s.getInt32(u,!1)/Ys;u+=4,C.push({lat:R,lng:z})}const v=new TextDecoder,S=[];for(let b=0;b<A;b+=1)if(d===3){const R=s.getUint8(u);u+=1;const z=new Uint8Array(n.buffer,n.byteOffset+u,R),V=v.decode(z);u+=R;const W=s.getUint8(u);u+=1;const se=new Uint8Array(n.buffer,n.byteOffset+u,W),B=v.decode(se);u+=W;const k=s.getUint8(u)===1;u+=1;const T=s.getUint16(u,!1);u+=2;const H=[];for(let q=0;q<T;q+=1)H.push(s.getUint16(u,!1)),u+=2;S.push({name:B,color:V,isVisible:k,indices:H})}else{const R=s.getUint8(u);u+=1;const z=new Uint8Array(n.buffer,n.byteOffset+u,R);let V=v.decode(z);u+=R,V||(V=`Route ${b+1}`);const W=s.getUint16(u,!1);u+=2;const se=[];for(let B=0;B<W;B+=1)se.push(s.getUint16(u,!1)),u+=2;S.push({name:V,color:Jl,isVisible:!0,indices:se})}return{version:d,connectVia:f,checkpoints:C,routes:S}}catch(n){return console.error(n),null}},Jv=e=>{const n=e.checkpoints,s=e.routes;let u="";return s.map(d=>{const f=d.indices.map(v=>{const S=n[v];if(!S)return null;const b=hd(S,9);let R=0;if(u){const V=Math.min(u.length,b.length);for(;R<V&&u[R]===b[R];)R+=1}const z=b.slice(R);return u=b,z}).filter(v=>v!==null);if(f.length===0)return null;const w=f.join("_"),A=d.name&&d.name.trim().length>0,C=d.color&&d.color.trim().length>0;if(A||C){const v=A?encodeURIComponent(d.name).replace(/%20/g,"+"):"";let S="";if(C){const b=d.color.toLowerCase();Yf[b]?S=Yf[b]:b.startsWith("#")?(S=b.slice(1),S.length===6&&S[0]===S[1]&&S[2]===S[3]&&S[4]===S[5]&&(S=S[0]+S[2]+S[4])):S=encodeURIComponent(d.color)}return C?`(${v},${S})${w}`:`(${v})${w}`}return w}).filter(d=>d&&d.length>0).join(" ")},ew=e=>{if(!/^[a-z0-9_ \(\)\%\-\.\~\!\*\'\(\)\,\+]+$/i.test(e))return null;const n=e.split(/\s+/).filter(Boolean);if(n.length===0)return null;const s=[],u=[];let d="";return n.forEach((f,w)=>{let A=`Route ${w+1}`,C=Jl,v=f;const S=f.match(/^\((.*?)\)(.*)/);if(S){const z=S[1];v=S[2];const V=z.split(",");if(V.length>0&&V[0])try{A=decodeURIComponent(V[0].replace(/\+/g,"%20"))}catch{A=V[0]}if(V.length>1&&V[1]){const W=V[1];if(lh[W])C=lh[W];else if(/^[0-9a-f]{3,6}$/i.test(W))C=`#${W}`;else try{C=decodeURIComponent(W)}catch{C=W}}}const b=v.length===0?[""]:v.split("_"),R=[];b.forEach(z=>{let V=z;const se=9-z.length;se>0&&d.length>=se&&(V=d.slice(0,se)+z);const B=uh(V);B&&(d=V,R.push(s.length),s.push(B))}),R.length>0&&u.push({name:A,color:C,isVisible:!0,indices:R})}),u.length===0?null:{version:ka,connectVia:"direct",checkpoints:s,routes:u}},tw=e=>{const n=fa(e);return n?Jv(n):""},nw=e=>{if(typeof e!="string")return null;const n=e.trim();if(!n)return null;const s=qv(n);if(s)return fa(s);const u=ew(n);if(u)return fa(u);try{const d=JSON.parse(Zp(n));return fa(d)}catch{return null}},Gp="0123456789bcdefghjkmnpqrstuvwxyz",pa=[16,8,4,2,1],hd=(e,n=9)=>{if(typeof n!="number"||n<1||n>12)throw new Error("encodeLocationCode precision must be between 1 and 12.");const s=Ks(e);if(!s)return null;let u=-90,d=90,f=-180,w=180,A=!0,C=0,v=0,S="";for(;S.length<n;){if(A){const b=(f+w)/2;s.lng>=b?(v|=pa[C],f=b):w=b}else{const b=(u+d)/2;s.lat>=b?(v|=pa[C],u=b):d=b}A=!A,C<pa.length-1?C+=1:(S+=Gp[v],C=0,v=0)}return S},uh=e=>{if(typeof e!="string"||e.length===0)return null;let n=-90,s=90,u=-180,d=180,f=!0;for(let w=0;w<e.length;w+=1){const A=e[w].toLowerCase(),C=Gp.indexOf(A);if(C===-1)return null;for(let v=0;v<pa.length;v+=1){const S=pa[v];if(f){const b=(u+d)/2;C&S?u=b:d=b}else{const b=(n+s)/2;C&S?n=b:s=b}f=!f}}return{lat:(n+s)/2,lng:(u+d)/2}},qo=e=>`${e}-${Math.random().toString(36).slice(2,9)}`,ch="#38bdf8",vo={checkpointMap:{},routes:[{id:"route-1",name:"Route 1",color:ch,items:[],isVisible:!0,nextLabelIndex:1}],activeRouteId:"route-1",selectedId:null,connectVia:"direct",placementMode:null},Kf=e=>e==null?null:typeof e=="string"?{type:e}:typeof e=="object"&&typeof e.type=="string"?e:null,rw=cd((e,n)=>({...vo,addRoute:(s="New Route",u=ch)=>e(d=>{const f={id:qo("route"),name:s,color:u,items:[],isVisible:!0,nextLabelIndex:1};return{routes:[...d.routes,f],activeRouteId:f.id}}),removeRoute:s=>e(u=>{if(u.routes.length<=1)return u;const d=u.routes.filter(C=>C.id!==s),f=u.activeRouteId===s?d[0].id:u.activeRouteId,w=new Set(d.flatMap(C=>C.items)),A={};return Object.values(u.checkpointMap).forEach(C=>{w.has(C.id)&&(A[C.id]=C)}),{routes:d,activeRouteId:f,checkpointMap:A,selectedId:u.selectedId}}),setActiveRoute:s=>e(u=>({activeRouteId:u.routes.find(d=>d.id===s)?s:u.activeRouteId})),updateRoute:(s,u)=>e(d=>({routes:d.routes.map(f=>f.id===s?{...f,...u}:f)})),setPlacementMode:s=>e(u=>{const d=Kf(s);if(!d)return{placementMode:null};const f=Kf(u.placementMode);return(f==null?void 0:f.type)===d.type&&((f==null?void 0:f.insertIndex)??null)===((d==null?void 0:d.insertIndex)??null)?{placementMode:null}:{placementMode:d}}),toggleConnectMode:()=>e(s=>({connectVia:s.connectVia==="direct"?"route":"direct"})),addCheckpoint:(s,u)=>e(d=>{var R;const f=d.routes.find(z=>z.id===d.activeRouteId);if(!f)return d;const w=typeof f.nextLabelIndex=="number"?f.nextLabelIndex:(((R=f.items)==null?void 0:R.length)??0)+1,A={id:qo("checkpoint"),position:s,name:`Point ${w}`},C={...d.checkpointMap,[A.id]:A},v=[...f.items];typeof u=="number"&&u>=0&&u<=v.length?v.splice(u,0,A.id):v.push(A.id);const S={...f,items:v,nextLabelIndex:w+1},b=d.routes.map(z=>z.id===d.activeRouteId?S:z);return{checkpointMap:C,routes:b,placementMode:null,selectedId:A.id}}),selectCheckpoint:s=>e({selectedId:s}),updateCheckpoint:(s,u)=>e(d=>({checkpointMap:{...d.checkpointMap,[s]:{...d.checkpointMap[s],position:u}}})),moveCheckpoint:(s,u)=>e(d=>{const f=d.routes.find(C=>C.id===d.activeRouteId);if(!f)return d;const w=f.items.indexOf(s);if(w===-1||typeof u!="number")return d;const A=[...f.items];return u<0||u>=A.length||u===w?d:(A.splice(w,1),A.splice(u,0,s),{routes:d.routes.map(C=>C.id===d.activeRouteId?{...C,items:A}:C)})}),removeCheckpoint:s=>e(u=>{const d=u.routes.find(v=>v.id===u.activeRouteId);if(!d)return u;const f=d.items.includes(s);let w=u.routes;f?w=u.routes.map(v=>v.id===u.activeRouteId?{...v,items:v.items.filter(S=>S!==s)}:v):w=u.routes.map(v=>({...v,items:v.items.filter(S=>S!==s)}));const A=new Set(w.flatMap(v=>v.items)),C={};return Object.values(u.checkpointMap).forEach(v=>{A.has(v.id)&&(C[v.id]=v)}),{routes:w,checkpointMap:C,selectedId:u.selectedId===s?null:u.selectedId,placementMode:null}}),loadRouteSnapshot:s=>e(u=>{const d=fa(s);if(!d)return u;const f={},A=(d.checkpoints||[]).map((v,S)=>{const b=qo("checkpoint");return f[b]={id:b,position:v,name:`Point ${S+1}`},b}),C=d.routes.map(v=>{const S=v.indices.map(b=>A[b]).filter(Boolean);return{id:qo("route"),name:v.name,color:v.color,isVisible:v.isVisible,items:S,nextLabelIndex:S.length+1}});if(C.length===0){const v=qo("route");C.push({id:v,name:"Route 1",color:ch,items:A,isVisible:!0,nextLabelIndex:A.length+1})}return{...vo,connectVia:d.connectVia,checkpointMap:f,routes:C,activeRouteId:C[0].id,selectedId:null,placementMode:null}}),clearAll:()=>e(vo),swapCheckpoints:(s,u)=>e(d=>{const f=d.routes.find(v=>v.id===d.activeRouteId);if(!f)return d;const w=f.items.indexOf(s),A=f.items.indexOf(u);if(w===-1||A===-1)return d;const C=[...f.items];return C[w]=u,C[A]=s,{routes:d.routes.map(v=>v.id===d.activeRouteId?{...v,items:C}:v)}})})),Oo=()=>rw(e=>{const n=Array.isArray(e.routes)?e.routes:vo.routes,s=e.checkpointMap||vo.checkpointMap,u=e.activeRouteId||vo.activeRouteId,d=n.find(w=>w.id===u)||n[0],f=d?d.items.map(w=>s[w]).filter(Boolean):[];return{...e,routes:n,checkpointMap:s,activeRouteId:u,checkpoints:f,activeRoute:d}}),iw=({onDropItem:e})=>{const n=jp();return K.useEffect(()=>{if(!e)return;const s=n.getContainer(),u=w=>{w.preventDefault(),w.dataTransfer.dropEffect="copy"},d=w=>{w.preventDefault(),w.dataTransfer.dropEffect="copy"},f=w=>{w.preventDefault(),w.stopPropagation();const{clientX:A,clientY:C}=w,v=s.getBoundingClientRect(),S=A-v.left,b=C-v.top,R=n.containerPointToLatLng([S,b]),z=w.dataTransfer.getData("application/x-cadet-map-item");z&&e(z,R)};return s.addEventListener("dragenter",u),s.addEventListener("dragover",d),s.addEventListener("drop",f),()=>{s.removeEventListener("dragenter",u),s.removeEventListener("dragover",d),s.removeEventListener("drop",f)}},[n,e]),null},sw=Object.assign({"../../assets/compass.png":tv,"../../assets/layer.png":nv,"../../assets/menu.png":rv,"../../assets/route.png":iv,"../../assets/settings.png":sv,"../../assets/zoom.png":ov}),ow=e=>sw[`../../assets/${e}.png`]??null,Jo=({iconName:e,label:n,onClick:s,title:u,isActive:d=!1,disabled:f=!1,themeStyles:w})=>{const A=ow(e),C=(w==null?void 0:w.button)??{},v=C.base??"flex h-12 w-12 items-center justify-center rounded-2xl border transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",S=C.active??"border-sky-500 bg-sky-200 text-slate-900 focus-visible:ring-sky-400",b=C.idle??"border-slate-300 bg-slate-100 text-slate-900 hover:border-slate-400 hover:bg-slate-200 focus-visible:ring-slate-500/50",R=f?C.disabled??"opacity-60 pointer-events-none":"",z=(w==null?void 0:w.iconStyle)??null,V=(w==null?void 0:w.iconClass)??"";return I.jsx("button",{type:"button",className:`${v} ${d?S:b} ${R}`,onClick:s,title:u??n,"aria-label":n,disabled:f,children:A?I.jsx("img",{src:A,alt:"",className:`h-5 w-5 object-contain select-none ${V}`,style:z??void 0,"aria-hidden":"true",draggable:"false"}):I.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide",children:n})})},aw=[51.505,10],ac={street:{id:"street",label:"OpenStreetMap Standard",description:"Balanced street map with global coverage sourced from the OpenStreetMap community.",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:["a","b","c"],maxZoom:19,minZoom:3,category:"Streets"},light:{id:"light",label:"Carto Light",description:"Soft grayscale basemap designed for daylight navigation with minimal visual noise.",url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://carto.com/attributions">CARTO</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:["a","b","c","d"],maxZoom:19,minZoom:3,category:"Streets"},dark:{id:"dark",label:"Carto Dark Matter",description:"Night-friendly basemap with high contrast roads and landmarks on a deep navy canvas.",url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://carto.com/attributions">CARTO</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:["a","b","c","d"],maxZoom:19,minZoom:3,category:"Streets"},voyager:{id:"voyager",label:"Carto Voyager",description:"Colorful, detail-rich cartography ideal for orientation and wayfinding at multiple zoom levels.",url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://carto.com/attributions">CARTO</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:["a","b","c","d"],maxZoom:19,minZoom:3,category:"Streets"},hot:{id:"hot",label:"OSM Humanitarian",description:"Humanitarian OpenStreetMap Team basemap with emphasis on populated areas and infrastructure.",url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="https://www.hotosm.org/">Humanitarian OpenStreetMap Team</a>',subdomains:["a","b","c"],maxZoom:19,minZoom:3,category:"Streets"},topo:{id:"topo",label:"OpenTopoMap",description:"Topographic map derived from OSM data with contour lines and terrain shading.",url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | SRTM | <a href="https://opentopomap.org">OpenTopoMap</a>',subdomains:["a","b","c"],maxZoom:17,minZoom:3,category:"Outdoor"},satellite:{id:"satellite",label:"Esri World Imagery",description:"High-resolution satellite and aerial imagery from Esri and the GIS user community.",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Imagery &copy; Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",subdomains:[],maxZoom:19,minZoom:3,category:"Imagery"}},lw=["street","light","dark","voyager","hot","topo","satellite"],Qf={light:{container:"pointer-events-auto flex flex-col gap-2 rounded-3xl border border-slate-200 bg-slate-100 p-2 text-slate-900 backdrop-blur-sm",badge:"rounded-full border border-slate-300 bg-slate-100 px-3 py-1 text-[10px] font-semibold text-slate-700",button:{base:"flex h-12 w-12 items-center justify-center rounded-2xl border transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-slate-400/40 focus-visible:ring-offset-slate-100/60",active:"border-sky-500 bg-sky-200 text-slate-900",idle:"border-slate-300 bg-slate-100 text-slate-900 hover:border-slate-400 hover:bg-slate-200",disabled:"opacity-60 pointer-events-none"},panel:"pointer-events-auto w-60 rounded-3xl border border-slate-200 bg-slate-100 p-4 text-slate-900 backdrop-blur-md",panelTitle:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",panelButton:"rounded-xl border border-slate-300 bg-white px-3 py-1.5 text-[12px] font-semibold text-slate-900 transition hover:border-sky-400 hover:bg-sky-100",panelToggle:"rounded-xl border border-slate-300 bg-slate-100 px-3 py-1.5 text-[12px] font-semibold text-slate-900 transition hover:border-sky-400 hover:bg-sky-100",layerScroll:"flex max-h-60 flex-col gap-2 overflow-y-auto pr-1",layerOption:"flex flex-col gap-1 rounded-2xl border border-slate-300 bg-white px-3 py-2 text-left transition hover:border-sky-400 hover:bg-sky-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/40",layerOptionActive:"border-sky-500 bg-sky-100 text-slate-900 shadow-inner shadow-sky-200/60",layerOptionDescription:"text-[11px] text-slate-500 leading-snug",layerOptionCategory:"text-[10px] font-semibold uppercase tracking-wide text-slate-400",iconStyle:null,iconClass:""},dark:{container:"pointer-events-auto flex flex-col gap-2 rounded-3xl border border-slate-700 bg-[#0b1224] p-2 text-slate-100 backdrop-blur-sm",badge:"rounded-full border border-slate-600 bg-[#0f1b38] px-3 py-1 text-[10px] font-semibold text-slate-200",button:{base:"flex h-12 w-12 items-center justify-center rounded-2xl border transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-slate-200/30 focus-visible:ring-offset-[#0b1224]/40",active:"border-sky-400 bg-[#1e335d] text-sky-100",idle:"border-slate-600 bg-[#0d172e] text-slate-100 hover:border-slate-400 hover:bg-[#15213f]",disabled:"opacity-50 pointer-events-none"},panel:"pointer-events-auto w-60 rounded-3xl border border-slate-700 bg-[#080f1e] p-4 text-slate-100 backdrop-blur-md",panelTitle:"text-[11px] font-semibold uppercase tracking-wide text-slate-400",panelButton:"rounded-xl border border-slate-600 bg-[#111b33] px-3 py-1.5 text-[12px] font-semibold text-slate-100 transition hover:border-sky-400 hover:bg-[#1d2b4e]",panelToggle:"rounded-xl border border-slate-500 bg-[#0f1b38] px-3 py-1.5 text-[12px] font-semibold text-slate-100 transition hover:border-sky-400 hover:bg-[#1a2a4d]",layerScroll:"flex max-h-60 flex-col gap-2 overflow-y-auto pr-1",layerOption:"flex flex-col gap-1 rounded-2xl border border-slate-600 bg-[#101d39] px-3 py-2 text-left transition hover:border-sky-400 hover:bg-[#16254a] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-200/30",layerOptionActive:"border-sky-400 bg-[#1e335d] text-sky-100 shadow-inner shadow-sky-900/40",layerOptionDescription:"text-[11px] text-slate-300 leading-snug",layerOptionCategory:"text-[10px] font-semibold uppercase tracking-wide text-slate-400/90",iconStyle:{filter:"invert(0.9)"},iconClass:""}},uw=6,cw=[{id:"getting-started",title:"Getting started",description:"Allow location access, pick an active route, then use placement or grid tools to build precise checkpoint lists.",points:['Use the Route tab to manage multiple routes. Click "Add New Route" to start fresh, rename it, and choose a colour for quick identification.','Tap "Add Checkpoint" inside a route to enter placement mode. Drop the route-coloured puck onto the map or a Grid Tool preview marker to add that position.','Share progress from the Route tools: copy codes for a single route or use "All Routes" to export the full plan.']},{id:"toolbar",title:"Toolbar buttons",description:"Each button in the floating toolbar opens a tool. The Menu button mirrors these shortcuts, so every tool is reachable even when the bar is hidden.",points:["Menu toggles quick actions for Compass, Route, Grid, and Share tools without leaving the map.","Compass opens the heading overlay. Select a target route to get bearings and switch between degrees or mils.","Route opens the checkpoint manager where you can reorder points, adjust colours, and generate share codes."]},{id:"maps",title:"Choosing maps",description:"Different base layers emphasise different features. Pick the layer that best supports the task at hand.",points:["OpenStreetMap Street is the fallback layer and works reliably online or with low mobile reception.","Carto Light or Dark provide high-contrast styling that is easier to read in bright sun or at night.","OpenTopoMap is ideal for land navigation where contours and terrain shading matter.","Esri Satellite is ideal when you need to see real details, but is heavy on mobile data."]}],hw=(e,n,s)=>{const u=e*Math.PI/180,d=2**s,f=Math.floor((n+180)/360*d),w=Math.floor((1-Math.log(Math.tan(u)+1/Math.cos(u))/Math.PI)/2*d),A=d-1;return{x:Math.min(Math.max(f,0),A),y:Math.min(Math.max(w,0),A),z:s}},dw=(e,n,{x:s,y:u,z:d})=>{const f=Array.isArray(n)&&n.length>0?n:[""],w=Math.abs((s+u)%f.length),A=f[w];return e.replace("{s}",A).replace("{x}",s).replace("{y}",u).replace("{z}",d)},ja=(e,n)=>Au.divIcon({className:"flex items-center justify-center rounded-full text-xs font-semibold text-white shadow-lg shadow-slate-900/50",html:`<div style="background:${e};width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:9999px;">${n}</div>`});ja("#22c55e","S");ja("#ef4444","F");ja("#3b82f6","");const fw=ja("#d946ef",""),pw=e=>Au.divIcon({className:"user-heading-icon",html:`
      <div style="position:relative;width:44px;height:44px;">
        <div style="position:absolute;inset:0;border-radius:50%;background:rgba(14,165,233,0.12);border:2px solid rgba(56,189,248,0.9);box-shadow:0 0 8px rgba(56,189,248,0.4);"></div>
        <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) rotate(${e}deg);transform-origin:center;">
          <div style="width:0;height:0;border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:18px solid #fbbf24;"></div>
        </div>
      </div>
    `,iconSize:[44,44],iconAnchor:[22,22]}),gw=(e="#22c55e")=>Au.divIcon({className:"peer-icon",html:`
      <div style="position:relative;width:32px;height:32px;">
        <div style="position:absolute;inset:0;border-radius:50%;background:${e}33;border:2px solid ${e}E6;box-shadow:0 0 8px ${e}66;"></div>
        <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:10px;height:10px;background:${e};border-radius:50%;"></div>
      </div>
    `,iconSize:[32,32],iconAnchor:[16,16]}),mw=()=>{const{placementMode:e,addCheckpoint:n,setPlacementMode:s}=Oo();return wv({click:u=>{if(!e)return;const d=typeof e=="string"?{type:e}:e;if(!(d!=null&&d.type))return;const{latlng:f}=u;if(d.type==="checkpoint"){const w=typeof d.insertIndex=="number"?d.insertIndex:void 0;n({lat:f.lat,lng:f.lng},w)}s(null)}}),null},Xp=K.memo(({id:e,position:n,icon:s,onSelect:u,onUpdate:d})=>{const f=K.useRef(null),w=K.useMemo(()=>({click:()=>u(e),dragend:()=>{const C=f.current;if(C){const{lat:v,lng:S}=C.getLatLng();d(e,{lat:v,lng:S})}}}),[e,u,d]),A=K.useMemo(()=>[n.lat,n.lng],[n]);return I.jsx(bl,{draggable:!0,eventHandlers:w,position:A,icon:s,ref:f})});Xp.displayName="DraggableMarker";const vw=({userLocation:e,peers:n={},userHeading:s,targets:u=[],onEnableLocation:d,locationEnabled:f,hasLocationFix:w,isRequestingLocation:A,locationRequestToken:C=0,baseLayer:v="street",onBaseLayerChange:S,onToggleMenu:b,onOpenCompass:R,onOpenRoute:z,toolbarTheme:V="light",onToolbarThemeToggle:W,isMenuOpen:se=!1,isSettingsOpen:B=!1,onToggleSettings:k,previewLocation:T,onDropItem:H,hideToolbar:q=!1})=>{const{checkpoints:X,checkpointMap:U,routes:Z,activeRouteId:G,connectVia:oe,selectedId:re,selectCheckpoint:de,updateCheckpoint:ee,setPlacementMode:le,toggleConnectMode:Q,loadRouteSnapshot:_e,placementMode:fe,addCheckpoint:te}=Oo(),pe=K.useRef(null),ae=K.useRef(!1),Ae=K.useRef(0),[Ne,Ce]=K.useState(null),[ye,Re]=K.useState(!1),[ge,dt]=K.useState(!1),[He,Zn]=K.useState(!1),[Ln,Mt]=K.useState(null),[vt,Xe]=K.useState("settings"),[xn,Zt]=K.useState(0),[Dn,Be]=K.useState(null),[Ve,Ge]=K.useState(""),[Gt,Oe]=K.useState(null),[kt,ui]=K.useState(!1),[nn,Rr]=K.useState(!1),[bt,pr]=K.useState(""),[Gn,rn]=K.useState("checkpoint"),[Xr,qt]=K.useState(null),gr=K.useRef(null),Ct=K.useRef(0),Se=K.useRef(null),wt=K.useRef(null),Qe=K.useRef(null),Ye=K.useRef(null),sn=K.useRef(null),Sn=ac[v]??ac.street,me=Qf[V]??Qf.light,Me=V==="dark"?"map-theme-dark":"map-theme-light",Pt=e?[e.lat,e.lng]:aw,Xn=e?"user-centered":"default-centered",At=K.useCallback(()=>{pe.current&&pe.current.invalidateSize({animate:!1})},[]),fn=K.useMemo(()=>lw.map(F=>ac[F]).filter(Boolean),[]),ws=K.useMemo(()=>({top:"calc(env(safe-area-inset-top, 0px) + 1rem)",right:"calc(env(safe-area-inset-right, 0px) + 1rem)"}),[]),[Xt,ci]=K.useState("all"),mr=K.useMemo(()=>Xt==="all"?Z:Z.filter(F=>F.id===Xt),[Z,Xt]),Bt=K.useMemo(()=>$v({checkpointMap:U,routes:mr,connectVia:oe,includeNames:kt,includeColors:nn}),[U,mr,oe,kt,nn]),Si=K.useMemo(()=>Bt?tw(Bt):"",[Bt]),kr=K.useMemo(()=>{if(!Bt)return null;const F=[];Bt.checkpoints.length>0&&F.push(`${Bt.checkpoints.length} checkpoint${Bt.checkpoints.length===1?"":"s"}`),Bt.routes&&Bt.routes.length>0&&F.push(`${Bt.routes.length} route${Bt.routes.length===1?"":"s"}`);const M=F.length?`Includes ${F.join(", ")}. `:"";return kt&&nn?`${M}Compact text format (connection mode excluded).`:kt?`${M}Compact text format (connection mode & colors excluded).`:nn?`${M}Compact text format (names & connection mode excluded).`:`${M}Compact text format (names, connection mode & colors excluded).`},[Bt,kt,nn]),hi=!!Si,Tt=K.useMemo(()=>mr.map(F=>{const M=F.items.map((ve,$e)=>{const gt=U[ve];return gt?{key:`${F.id}-${gt.id}`,label:gt.name||`Point ${$e+1}`,code:hd(gt.position),position:gt.position}:null}).filter(Boolean);return M.length===0?null:{route:F.name,color:F.color,codes:M}}).filter(Boolean),[mr,U]),Fe=K.useCallback(F=>F==="success"?"text-emerald-500":F==="error"?"text-rose-500":F==="warning"?"text-amber-500":"text-slate-500",[]),pn=K.useCallback((F,M,ve=2500)=>{Qe.current&&typeof window<"u"&&(window.clearTimeout(Qe.current),Qe.current=null),Be(M?{tone:F,message:M}:null),M&&ve!==null&&typeof window<"u"&&(Qe.current=window.setTimeout(()=>{Be(null),Qe.current=null},ve))},[Be,Qe]),Pe=K.useCallback((F,M,ve=4e3)=>{Ye.current&&typeof window<"u"&&(window.clearTimeout(Ye.current),Ye.current=null),Oe(M?{tone:F,message:M}:null),M&&ve!==null&&typeof window<"u"&&(Ye.current=window.setTimeout(()=>{Oe(null),qt(null),Ye.current=null},ve))},[Oe,Ye]),Yr=K.useCallback(async()=>{var F;if(!hi){pn("warning","Define a route to generate a share code.",3200);return}try{let M=!1;if(typeof navigator<"u"&&((F=navigator.clipboard)!=null&&F.writeText))await navigator.clipboard.writeText(Si),M=!0;else if(typeof document<"u"&&wt.current){const ve=wt.current;ve.focus(),ve.select(),typeof ve.setSelectionRange=="function"&&ve.setSelectionRange(0,Si.length),M=!!(typeof document.execCommand=="function"&&document.execCommand("copy"))}if(!M)throw new Error("Copy not supported");pn("success","Share code copied to clipboard.",2500)}catch(M){pn("error",M!=null&&M.message&&M.message!=="Copy not supported"?M.message:"Copy failed. Try selecting and copying the code manually.",4e3)}},[hi,Si,pn]),di=K.useCallback(()=>{const F=Ve.trim();if(!F){Pe("warning","Paste a share code to import.",3500);return}const M=nw(F);if(!M){Pe("error","That share code could not be read. Check the full code and try again.",4e3);return}_e(M),Ge(""),Pe("success","Route imported. Close this panel to review it on the map.",4e3)},[_e,Ve,Pe]),gn=K.useCallback(F=>{Ye.current&&typeof window<"u"&&(window.clearTimeout(Ye.current),Ye.current=null),Ge(F.target.value),Oe(null)},[Oe,Ge,Ye]),Kr=K.useCallback(F=>{(F.ctrlKey||F.metaKey)&&F.key==="Enter"&&(F.preventDefault(),di())},[di]);K.useEffect(()=>{vt!=="share"&&(Be(null),Oe(null),Qe.current&&typeof window<"u"&&(window.clearTimeout(Qe.current),Qe.current=null),Ye.current&&typeof window<"u"&&(window.clearTimeout(Ye.current),Ye.current=null))},[vt]);const On=K.useMemo(()=>V==="light"?"border border-slate-300 bg-white text-slate-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-400":"border border-slate-700 bg-slate-950 text-slate-100 focus:border-sky-400 focus:outline-none focus:ring-1 focus:ring-sky-500",[V]),Qr=K.useMemo(()=>{if(!fe)return null;const F=typeof fe=="string"?{type:fe}:fe;return F!=null&&F.type?F.type==="start"?"Start point":F.type==="end"?"End point":F.type==="checkpoint"?typeof F.insertIndex=="number"?`Checkpoint (position ${F.insertIndex+1})`:"Checkpoint":null:null},[fe]),Yn=K.useMemo(()=>Qr?[{key:"placement",text:`Currently placing: ${Qr}`,tone:"emerald"}]:[],[Qr]),on=K.useCallback((F,M="info",ve=4e3)=>{gr.current&&typeof window<"u"&&(window.clearTimeout(gr.current),gr.current=null),Ce(F?{message:F,tone:M}:null),F&&ve!==null&&typeof window<"u"&&(gr.current=window.setTimeout(()=>{Ce(null),gr.current=null},ve))},[]);K.useEffect(()=>{Au.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"})},[]),K.useEffect(()=>{Mt(null),on(null),Re(!1),Ct.current=0,Zt(F=>F+1)},[v,on]),K.useEffect(()=>{se&&Xe("settings")},[se,Xe]),K.useEffect(()=>{if(!ge||typeof window>"u")return;const F=()=>{window.requestAnimationFrame(At)};return window.requestAnimationFrame(At),window.addEventListener("resize",F,{passive:!0}),window.addEventListener("orientationchange",F,{passive:!0}),()=>{window.removeEventListener("resize",F),window.removeEventListener("orientationchange",F)}},[ge,At]),K.useEffect(()=>{var ve;if(!ge||typeof ResizeObserver>"u")return;const F=(ve=pe.current)==null?void 0:ve.getContainer();if(!F)return;const M=new ResizeObserver(()=>{typeof window<"u"?window.requestAnimationFrame(At):At()});return M.observe(F),()=>M.disconnect()},[ge,At]),K.useEffect(()=>{ge&&At()},[ge,At,V,B,se,v]),K.useEffect(()=>{!pe.current||!e||ae.current||(pe.current.setView([e.lat,e.lng],16),ae.current=!0)},[e]),K.useEffect(()=>{Se.current=e},[e]),K.useEffect(()=>{if(!pe.current)return;ae.current=!1,At();const F=Se.current;F&&(pe.current.flyTo([F.lat,F.lng],Math.max(pe.current.getZoom(),16),{animate:!1}),ae.current=!0)},[v,At]),K.useEffect(()=>{pe.current&&(C===void 0||C===Ae.current||(Ae.current=C,ae.current=!1,e&&(pe.current.flyTo([e.lat,e.lng],Math.max(pe.current.getZoom(),16),{animate:!0}),ae.current=!0)))},[C,e]);const Ro=K.useMemo(()=>pw(s??0),[s]),Kn=K.useCallback(()=>{if(!pe.current)return;const F=Se.current??e;if(!F)return;const M=pe.current;At();const ve=Math.max(M.getZoom(),16);M.flyTo([F.lat,F.lng],ve,{animate:!0}),ae.current=!0},[At,e]);K.useEffect(()=>()=>{pe.current&&(pe.current.getContainer().classList.remove("mapview-attribution-offset"),pe.current=null)},[]),K.useEffect(()=>()=>{gr.current&&typeof window<"u"&&window.clearTimeout(gr.current),Qe.current&&typeof window<"u"&&window.clearTimeout(Qe.current),Ye.current&&typeof window<"u"&&window.clearTimeout(Ye.current),sn.current&&typeof window<"u"&&window.clearTimeout(sn.current)},[]);const an=K.useCallback(()=>typeof d=="function"?d():!1,[d]),Nt=K.useCallback(()=>{typeof b=="function"&&b()},[b]),Ii=K.useCallback(()=>{typeof R=="function"&&R()},[R]),Mr=K.useCallback(()=>{typeof z=="function"&&z()},[z]),ys=K.useCallback(F=>{F!==v&&typeof S=="function"&&S(F)},[v,S]),we=K.useCallback((F,M,ve=3500)=>{sn.current&&typeof window<"u"&&(window.clearTimeout(sn.current),sn.current=null),qt(M?{tone:F,message:M}:null),M&&ve!==null&&typeof window<"u"&&(sn.current=window.setTimeout(()=>{qt(null),sn.current=null},ve))},[qt,sn]),ko=K.useCallback(async()=>{if(!ge||!pe.current){on("Map not ready yet.","warning");return}if(v!=="satellite"){on("Switch to satellite view to cache imagery.","warning");return}if(typeof window>"u"||!("caches"in window)){on("Tile caching not supported in this browser.","error");return}const F=pe.current,M=Math.round(F.getZoom()),ve=2**M,$e=[];if(e&&$e.push(e),X.forEach(Le=>{Le!=null&&Le.position&&$e.push(Le.position)}),$e.length===0){on("Add a checkpoint or enable location before caching.","warning");return}const vr=40075016686e-3/ve,sr=new Set;if($e.forEach(Le=>{const ct=hw(Le.lat,Le.lng,M),In=Le.lat*Math.PI/180,wr=Math.cos(In)||1e-4,yr=vr*wr,_r=vr,or=Math.max(1,Math.ceil(2e3/yr)),$r=Math.max(1,Math.ceil(2e3/_r));for(let ht=-or;ht<=or;ht+=1)for(let Ze=-$r;Ze<=$r;Ze+=1){const cn=Math.min(Math.max(ct.x+ht,0),ve-1),ke=Math.min(Math.max(ct.y+Ze,0),ve-1);sr.add(`${cn}:${ke}:${M}`)}}),sr.size===0){on("No tiles identified for caching.","warning");return}const un=Array.from(sr).map(Le=>{const[ct,In,wr]=Le.split(":").map(yr=>Number(yr));return{x:ct,y:In,z:wr}});try{Re(!0),on("Caching satellite tiles nearby","info",null);const Le=await caches.open("cadet-map-tile-cache");let ct=0;const In=[],wr=[...un],yr=Math.min(uw,wr.length),_r=async()=>{for(;wr.length>0;){const or=wr.shift();if(!or)continue;const $r=dw(Sn.url,Sn.subdomains,or);try{const ht=await fetch($r,{mode:"cors"});if(!ht.ok&&ht.type!=="opaque")throw new Error(`HTTP ${ht.status}`);await Le.put($r,ht.clone()),ct+=1}catch(ht){In.push((ht==null?void 0:ht.message)??"Unknown error")}await new Promise(ht=>{if(typeof window>"u"){ht();return}window.requestAnimationFrame(ht)})}};if(await Promise.all(Array.from({length:yr},_r)),In.length===un.length)on("Unable to cache tiles. Please try again later.","error");else{const or=In.length?` (skipped ${In.length} tile${In.length===1?"":"s"})`:"";on(`Cached ${ct} satellite tile${ct===1?"":"s"}${or}.`,In.length?"warning":"success")}}catch(Le){on(Le.message??"Tile caching failed.","error")}finally{Re(!1)}},[v,X,ge,on,Sn.subdomains,Sn.url,e]),Lt=K.useCallback(()=>{typeof k=="function"&&k(),Xe("settings")},[k]),Pr=K.useCallback(()=>{Xe("help"),!B&&typeof k=="function"&&k()},[B,k]),fi=K.useCallback(()=>{!B&&typeof k=="function"&&k(),Xe("share")},[B,k]),ft=K.useCallback(()=>{typeof W=="function"&&W()},[W]),ot=K.useCallback(()=>{if(e){Kn(),B&&typeof k=="function"&&k(),Xe("settings");return}an()?on("Requesting location fix","info",2500):on("Enable location permissions to center the map.","warning")},[an,Kn,B,k,on,e]),qe=v!=="satellite"||ye,it=ye?"Caching":v!=="satellite"?"Satellite required":"Cache tiles",xt=K.useMemo(()=>({loading:()=>{Ct.current=0},load:()=>{At()},tileerror:()=>{if(Ct.current+=1,Ct.current>=3){Ct.current=0;const F="Selected map unavailable";on(F,"warning",6e3),Mt(F),v!=="street"&&typeof S=="function"?S("street"):Zt(M=>M+1)}}}),[v,S,At,Zt,on]),pi=K.useCallback(F=>{const M=F.target.value.replace(/\s+/g,"").toLowerCase();pr(M),qt(null),sn.current&&typeof window<"u"&&(window.clearTimeout(sn.current),sn.current=null)},[]),Ot=K.useCallback(F=>{rn(F.target.value)},[]),Rn=K.useCallback(()=>{const F=bt.trim().toLowerCase();if(!F){we("warning","Enter a callout code to place it.");return}if(F.length<4||F.length>12){we("error","Callouts should be between 4 and 12 characters.");return}const M=uh(F);if(!M){we("error","That code could not be decoded. Double-check the letters.");return}te(M),we("success","Checkpoint added from callout.",3e3),pr("")},[te,uh,bt,we]),_s=K.useMemo(()=>`${me.panelToggle} ${vt==="settings"?"ring-1 ring-sky-400 text-sky-500 border-sky-400":"opacity-80 hover:opacity-100"}`,[vt,me.panelToggle]),Ue=K.useMemo(()=>`${me.panelToggle} ${vt==="share"?"ring-1 ring-sky-400 text-sky-500 border-sky-400":"opacity-80 hover:opacity-100"}`,[vt,me.panelToggle]),yt=K.useMemo(()=>`${me.panelToggle} ${vt==="help"?"ring-1 ring-sky-400 text-sky-500 border-sky-400":"opacity-80 hover:opacity-100"}`,[vt,me.panelToggle]),Cs=K.useMemo(()=>{const F={};return Z.filter(M=>M.isVisible).forEach(M=>{var ve;(ve=M.items)==null||ve.forEach($e=>{(!F[$e]||M.id===G)&&(F[$e]={checkpoint:U[$e],color:M.color,routeId:M.id})})}),Object.values(F).filter(M=>M.checkpoint)},[Z,U,G]),Qn=K.useRef(new Map),nt=K.useCallback(F=>(Qn.current.has(F)||Qn.current.set(F,ja(F,"")),Qn.current.get(F)),[]),ln=K.useMemo(()=>Z.filter(F=>F.isVisible).map(F=>{const M=(F.items||[]).map(ve=>{var $e;return($e=U[ve])==null?void 0:$e.position}).filter(Boolean).map(ve=>[ve.lat,ve.lng]);return{id:F.id,color:F.color,positions:M}}),[Z,U]);return I.jsxs("div",{className:"relative h-full w-full flex-1",children:[I.jsxs(Cv,{center:Pt,zoom:13,className:`h-full w-full ${Me}`,preferCanvas:!0,ref:pe,attributionControl:!1,whenCreated:F=>{F.getContainer().classList.add("mapview-attribution-offset")},children:[I.jsx(iw,{onDropItem:H}),I.jsx(yv,{position:"bottomleft",prefix:!1}),I.jsx(Ev,{url:Sn.url,attribution:Sn.attribution,subdomains:Sn.subdomains,minZoom:Sn.minZoom,maxZoom:Sn.maxZoom,maxNativeZoom:He?16:void 0,eventHandlers:xt},`${Sn.id}-${xn}-${He}`),I.jsx(mw,{}),e&&I.jsx(bl,{position:[e.lat,e.lng],icon:Ro,interactive:!1}),Object.values(n).map(F=>F.location&&I.jsx(bl,{position:[F.location.lat,F.location.lng],icon:gw(F.color),interactive:!1},`peer-loc-${F.id}`)),Cs.map(({checkpoint:F,color:M})=>I.jsx(Xp,{id:F.id,position:F.position,icon:nt(M),onSelect:de,onUpdate:ee},F.id)),(T==null?void 0:T.position)&&I.jsxs(I.Fragment,{children:[I.jsx(bl,{position:[T.position.lat,T.position.lng],icon:fw,opacity:.8}),T.source&&I.jsx($o,{positions:[[T.source.lat,T.source.lng],[T.position.lat,T.position.lng]],pathOptions:{color:"#d946ef",weight:3,dashArray:"5 5",opacity:.6}})]}),oe==="direct"&&ln.map(F=>F.positions.length>=2&&I.jsx($o,{positions:F.positions,pathOptions:{color:F.color,weight:4,opacity:.7}},`direct-${F.id}`)),oe==="route"&&ln.map(F=>F.positions.length>=2&&I.jsx($o,{positions:F.positions,pathOptions:{color:F.color,weight:4,dashArray:"10 6",opacity:.8}},`route-${F.id}`)),Object.values(n).map(F=>(F.routes??[]).map(M=>{if(!Array.isArray(M.items)||M.items.length<2)return null;const ve=M.items.map($e=>{const gt=($e==null?void 0:$e.position)??$e,vr=typeof(gt==null?void 0:gt.lat)=="number"?gt.lat:null,sr=typeof(gt==null?void 0:gt.lng)=="number"?gt.lng:null;return vr!=null&&sr!=null?[vr,sr]:null}).filter(Boolean);return ve.length<2?null:I.jsx($o,{positions:ve,pathOptions:{color:F.color||"#22c55e",weight:4,dashArray:"10 6",opacity:.6}},`peer-route-${F.id}-${M.id}`)})),e&&u.filter(F=>F.position).map(F=>I.jsx($o,{positions:[[e.lat,e.lng],[F.position.lat,F.position.lng]],pathOptions:{color:"#818cf8",weight:2,dashArray:"4 6",opacity:.4}},`user-target-${F.id}`))]},Xn),Ne&&I.jsx("div",{className:`pointer-events-none absolute left-1/2 top-4 z-[1000] -translate-x-1/2 rounded-full border px-4 py-1.5 text-[11px] font-semibold tracking-wide ${Ne.tone==="success"?"border-emerald-300 bg-emerald-200 text-emerald-900":Ne.tone==="warning"?"border-amber-300 bg-amber-200 text-amber-900":Ne.tone==="error"?"border-rose-300 bg-rose-200 text-rose-900":"border-sky-300 bg-sky-200 text-slate-900"}`,children:Ne.message}),I.jsxs("div",{className:`pointer-events-none absolute z-[990] flex flex-col items-end gap-3 transition-opacity duration-300 ${q?"opacity-0":"opacity-100"}`,style:ws,children:[I.jsxs("div",{className:me.container,children:[I.jsx(Jo,{iconName:"menu",label:"Menu",onClick:Nt,title:"Toggle navigation menu",isActive:se,themeStyles:me}),I.jsx(Jo,{iconName:"compass",label:"Compass",onClick:Ii,title:"Open compass overlay",themeStyles:me}),I.jsx(Jo,{iconName:"route",label:"Route",onClick:Mr,title:"Open route tools",themeStyles:me}),I.jsx(Jo,{iconName:"settings",label:"Settings",onClick:Lt,title:"Open settings",isActive:B,themeStyles:me})]}),(A||f&&!w)&&I.jsx("div",{className:`pointer-events-none ${me.badge}`,children:A?"Getting location":"GPS active, awaiting fix"})]}),I.jsx("div",{className:"pointer-events-none absolute z-[990] flex flex-col items-start gap-3",style:{bottom:"calc(env(safe-area-inset-bottom, 0px) + 1rem)",left:"calc(env(safe-area-inset-left, 0px) + 1rem)"},children:I.jsx("div",{className:"pointer-events-auto",children:I.jsx(Jo,{iconName:"zoom",label:"Zoom",onClick:ot,title:"Zoom to location",isActive:!1,themeStyles:me})})}),B&&I.jsxs("div",{className:"pointer-events-auto fixed inset-0 z-[1180] flex items-center justify-center p-4",children:[I.jsx("button",{type:"button",className:"absolute inset-0 rounded-none border-0 bg-slate-950 backdrop-blur-sm",style:{backgroundColor:"rgba(2, 6, 23, 0.45)"},"aria-label":"Close settings",onClick:()=>{typeof k=="function"&&k(),Xe("settings")}}),I.jsxs("div",{className:`${me.panel} w-full max-w-md max-h-[80vh] overflow-hidden shadow-2xl shadow-slate-950/50`,role:"dialog","aria-modal":"true","aria-label":vt==="help"?"Map help":vt==="share"?"Share current route":"Map settings",children:[I.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[I.jsx("span",{className:me.panelTitle,children:vt==="help"?"Help":vt==="share"?"Share route":"Settings"}),I.jsx("button",{type:"button",className:me.panelButton,onClick:()=>{typeof k=="function"&&k(),Xe("settings")},children:"Close"})]}),I.jsxs("div",{className:"mb-3 flex items-center gap-2 text-[11px]",children:[I.jsx("button",{type:"button",className:_s,onClick:()=>Xe("settings"),"aria-pressed":vt==="settings",children:"Settings"}),I.jsx("button",{type:"button",className:Ue,onClick:fi,"aria-pressed":vt==="share",children:"Share"}),I.jsx("button",{type:"button",className:yt,onClick:Pr,"aria-pressed":vt==="help",children:"Help"})]}),I.jsx("div",{className:"flex h-full max-h-[65vh] flex-col gap-3 overflow-y-auto pr-1 text-[12px]",children:vt==="help"?I.jsx("div",{className:"flex flex-col gap-2",children:cw.map(F=>I.jsxs("section",{className:`${me.layerOption} cursor-default`,"aria-labelledby":`${F.id}-title`,children:[I.jsx("h3",{id:`${F.id}-title`,className:"text-[12px] font-semibold leading-tight",children:F.title}),I.jsx("p",{className:me.layerOptionDescription,children:F.description}),I.jsx("ul",{className:"ml-3 list-disc space-y-1 text-[11px] leading-snug",children:F.points.map((M,ve)=>I.jsx("li",{children:M},ve))})]},F.id))}):vt==="share"?I.jsxs("div",{className:"flex flex-col gap-3",children:[I.jsxs("section",{className:`${me.layerOption} flex flex-col gap-2`,children:[I.jsxs("div",{className:"flex items-start justify-between gap-2",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Share code"}),I.jsx("p",{className:me.layerOptionDescription,children:"Copy and send this code to share the current route."})]}),I.jsx("button",{type:"button",className:`${me.panelButton} ${hi?"":"pointer-events-none opacity-50"}`,onClick:Yr,disabled:!hi,children:"Copy code"})]}),Z.length>1&&I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("label",{className:"text-[11px] font-semibold opacity-70",children:"Scope:"}),I.jsxs("select",{value:Xt,onChange:F=>ci(F.target.value),className:`${On} flex-1 rounded-lg px-2 py-1 text-[11px]`,children:[I.jsx("option",{value:"all",children:"All Routes"}),Z.map(F=>I.jsx("option",{value:F.id,children:F.name},F.id))]})]}),I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("input",{type:"checkbox",id:"share-include-names",checked:kt,onChange:F=>ui(F.target.checked),className:"h-3.5 w-3.5 rounded border-slate-300 text-sky-500 focus:ring-sky-500"}),I.jsx("label",{htmlFor:"share-include-names",className:"text-[11px] font-medium opacity-80",children:"Include names"})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("input",{type:"checkbox",id:"share-include-colors",checked:nn,onChange:F=>Rr(F.target.checked),className:"h-3.5 w-3.5 rounded border-slate-300 text-sky-500 focus:ring-sky-500"}),I.jsx("label",{htmlFor:"share-include-colors",className:"text-[11px] font-medium opacity-80",children:"Include colors"})]})]}),I.jsx("p",{className:me.layerOptionDescription,children:kr??"Add at least one waypoint to generate a share code."}),I.jsx("textarea",{ref:wt,className:`${On} min-h-[90px] w-full rounded-xl px-3 py-2 text-[11px] leading-snug`,value:Si,readOnly:!0,spellCheck:!1,"aria-label":"Current route share code",onFocus:F=>F.target.select()}),Dn&&I.jsx("span",{role:"status","aria-live":"polite",className:`text-[11px] font-semibold ${Fe(Dn.tone)}`,children:Dn.message})]}),I.jsxs("section",{className:`${me.layerOption} flex flex-col gap-2`,children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Import route"}),I.jsx("p",{className:me.layerOptionDescription,children:"Paste a code received from another teammate to replace your current route."})]}),I.jsx("textarea",{className:`${On} min-h-[110px] w-full rounded-xl px-3 py-2 text-[11px] leading-snug`,value:Ve,onChange:gn,onKeyDown:Kr,placeholder:"Paste a share code here",spellCheck:!1,"aria-label":"Paste a share code to import"}),I.jsxs("div",{className:"flex items-center justify-between gap-2",children:[I.jsx("button",{type:"button",className:`${me.panelButton} ${Ve.trim()?"":"pointer-events-none opacity-50"}`,onClick:di,disabled:!Ve.trim(),children:"Load route"}),Gt?I.jsx("span",{role:"status","aria-live":"polite",className:`text-[11px] font-semibold ${Fe(Gt.tone)}`,children:Gt.message}):I.jsx("span",{className:"text-[10px] opacity-60",children:"Press Ctrl/ + Enter to load"})]})]}),I.jsxs("section",{className:`${me.layerOption} flex flex-col gap-2`,children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Plot callout"}),I.jsx("p",{className:me.layerOptionDescription,children:"Drop a shared geohash onto the map as a start, checkpoint, or finish marker."})]}),I.jsx("input",{type:"text",className:`${On} w-full rounded-xl px-3 py-2 text-[11px] uppercase tracking-wide`,value:bt,onChange:pi,placeholder:"e.g. u4pruydqq",spellCheck:!1,"aria-label":"Enter a location callout code"}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("label",{htmlFor:"callout-target",className:"text-[11px] font-semibold opacity-70",children:"Place as"}),I.jsx("select",{id:"callout-target",className:`${On} w-full rounded-xl px-3 py-2 text-[11px]`,value:Gn,onChange:Ot,disabled:!0,children:I.jsx("option",{value:"checkpoint",children:"Checkpoint"})})]}),I.jsxs("div",{className:"flex items-center justify-between gap-2",children:[I.jsx("button",{type:"button",className:`${me.panelButton} ${bt.trim()?"":"pointer-events-none opacity-50"}`,onClick:Rn,disabled:!bt.trim(),children:"Place callout"}),Xr&&I.jsx("span",{role:"status","aria-live":"polite",className:`text-[11px] font-semibold ${Fe(Xr.tone)}`,children:Xr.message})]})]}),Tt.length>0&&I.jsxs("section",{className:`${me.layerOption} flex flex-col gap-2`,children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Location codes"}),I.jsx("p",{className:me.layerOptionDescription,children:"Geohash references 5m accuracy for quick callouts."})]}),I.jsx("div",{className:"flex flex-col gap-3",children:Tt.map(F=>I.jsxs("div",{className:"flex flex-col gap-1",children:[I.jsx("div",{className:"border-b border-slate-700/50 pb-1",children:I.jsx("span",{className:"text-[11px] font-semibold text-slate-300",children:F.route})}),I.jsx("ul",{className:"flex flex-col gap-1 text-[11px] font-mono",children:F.codes.map(M=>I.jsxs("li",{className:"flex items-center justify-between gap-3 pl-1",children:[I.jsx("span",{className:"font-semibold uppercase tracking-wide text-[10px] opacity-70",children:M.label}),I.jsx("span",{children:M.code})]},M.key))})]},F.route))})]})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"flex items-center justify-between gap-3",children:[I.jsx("span",{className:"font-medium",children:"Toolbar theme"}),I.jsx("button",{type:"button",className:me.panelToggle,onClick:ft,children:V==="light"?"Light":"Night"})]}),Ln&&I.jsxs("div",{className:"rounded-lg border border-amber-500/50 bg-amber-500/10 p-3 text-[11px] text-amber-500",children:[I.jsx("p",{className:"font-semibold",children:"Map Error"}),I.jsx("p",{children:Ln})]}),I.jsxs("div",{className:"flex items-center justify-between gap-3",children:[I.jsxs("div",{children:[I.jsx("span",{className:"font-medium",children:"Low data mode"}),I.jsx("p",{className:"text-[11px] opacity-70",children:"Reduce map detail to save data."})]}),I.jsx("button",{type:"button",role:"switch","aria-checked":He,onClick:()=>Zn(!He),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-offset-2 ${He?"bg-orange-500":"bg-slate-600"}`,children:I.jsx("span",{className:`${He?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),I.jsxs("div",{children:[I.jsx("span",{className:"font-medium",children:"Map layers"}),I.jsx("p",{className:"text-[11px] opacity-70",children:"Choose the basemap that suits your mission."}),I.jsx("div",{className:`${me.layerScroll} mt-2`,children:fn.map(F=>{const M=F.id===v;return I.jsxs("button",{type:"button",className:`${me.layerOption} ${M?me.layerOptionActive:""}`,onClick:()=>ys(F.id),children:[I.jsxs("div",{className:"flex items-start justify-between gap-2",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:F.label}),F.category&&I.jsx("p",{className:me.layerOptionCategory,children:F.category})]}),M&&I.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wide text-sky-500",children:"Current"})]}),I.jsx("p",{className:me.layerOptionDescription,children:F.description})]},F.id)})})]}),I.jsxs("div",{className:"flex items-start justify-between gap-3",children:[I.jsxs("div",{children:[I.jsx("span",{className:"font-medium",children:"Cache imagery"}),I.jsx("p",{className:"text-[11px] opacity-70",children:"Download tiles within 2km"})]}),I.jsx("button",{type:"button",className:`${me.panelButton} ${qe?"opacity-60 pointer-events-none":""}`,onClick:ko,disabled:qe,children:it})]}),I.jsxs("section",{className:`${me.layerOption} flex flex-col gap-2`,children:[I.jsxs("div",{className:"flex items-start justify-between gap-2",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Share this route"}),I.jsx("p",{className:me.layerOptionDescription,children:"switch to the share view to copy or import a route."})]}),I.jsx("button",{type:"button",className:me.panelButton,onClick:fi,children:"Open"})]}),I.jsx("p",{className:me.layerOptionDescription,children:kr??"Add at least one waypoint to enable route sharing."})]}),I.jsx("button",{type:"button",className:me.panelButton,onClick:ot,children:"Center map on my location"})]})})]})]}),Yn.length>0&&I.jsx("div",{className:"pointer-events-none absolute bottom-4 left-1/2 flex w-[min(90vw,18rem)] -translate-x-1/2 flex-col gap-2",children:Yn.map(F=>{const M=F.tone==="emerald"?"border-emerald-500 text-emerald-100":"border-sky-500 text-sky-200";return I.jsx("div",{className:`rounded-lg border bg-slate-950 p-3 text-center text-sm font-semibold shadow-lg shadow-slate-950 ${M}`,children:F.text},F.key)})})]})},Os=e=>e*Math.PI/180,ww=e=>e*180/Math.PI,Yp=(e,n)=>{if(!e||!n)return null;const s=Os(e.lat),u=Os(n.lat),d=Os(n.lng-e.lng),f=Math.sin(d)*Math.cos(u),w=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(d),A=Math.atan2(f,w);return(ww(A)+360)%360},Kp=(e,n)=>{if(!e||!n)return null;const s=6371e3,u=Os(e.lat),d=Os(n.lat),f=Os(n.lat-e.lat),w=Os(n.lng-e.lng),A=Math.sin(f/2)*Math.sin(f/2)+Math.cos(u)*Math.cos(d)*Math.sin(w/2)*Math.sin(w/2),C=2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A));return s*C},Qp=(e,n)=>e==null||n==null?null:(n-e+360)%360,yw=e=>{const[n,s]=K.useState(null),[u,d]=K.useState(null),[f,w]=K.useState(null),[A,C]=K.useState(!1),[v,S]=K.useState(!0),[b,R]=K.useState(!1),[z,V]=K.useState(!1),[W,se]=K.useState(!1),B=K.useRef(null),k=K.useRef(null),T=K.useRef(typeof navigator<"u"&&"geolocation"in navigator);K.useEffect(()=>{if(!(typeof window>"u")){if(typeof DeviceOrientationEvent>"u"){S(!1),w(G=>G??"Compass not supported on this device");return}typeof DeviceOrientationEvent.requestPermission=="function"&&C(!0)}},[]);const H=K.useCallback(G=>{if(typeof G.alpha=="number"){const oe=G.webkitCompassHeading??360-G.alpha;s((oe+360)%360)}},[]),q=K.useCallback(()=>{if(!T.current)return w("Geolocation not supported"),!1;B.current!==null&&(navigator.geolocation.clearWatch(B.current),B.current=null);const G=re=>{const{latitude:de,longitude:ee}=re.coords;d({lat:de,lng:ee}),R(!0),V(!0),se(!1),w(null)},oe=re=>{var de;(re==null?void 0:re.code)===1?(w("Location permission denied"),R(!1)):(re==null?void 0:re.code)===2?w("Location unavailable"):(re==null?void 0:re.code)===3?w("Location request timed out"):w((re==null?void 0:re.message)??"Unable to access location"),V(!1),R(!1),se(!1),B.current!==null&&((de=navigator.geolocation)!=null&&de.clearWatch)&&(navigator.geolocation.clearWatch(B.current),B.current=null)};try{return se(!0),navigator.geolocation.getCurrentPosition(G,oe,{enableHighAccuracy:!0,maximumAge:0,timeout:15e3}),B.current=navigator.geolocation.watchPosition(G,oe,{enableHighAccuracy:!0,maximumAge:0,timeout:15e3}),!0}catch(re){return w(re.message??"Unable to access location"),se(!1),R(!1),!1}},[]),X=K.useCallback(async()=>{if(typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function")try{await DeviceOrientationEvent.requestPermission()==="granted"?(window.removeEventListener("deviceorientation",H),window.addEventListener("deviceorientation",H),k.current="deviceorientation",q(),C(!1)):w("Compass permission denied")}catch(G){w(G.message??"Compass permission error")}},[H,q]);K.useEffect(()=>{if(!T.current)return()=>{};if(typeof window>"u"||!window.isSecureContext)return()=>{};let G=!1;return(async()=>{var re;if((re=navigator.permissions)!=null&&re.query)try{const de=await navigator.permissions.query({name:"geolocation"});if(G)return;de.state==="granted"?q():de.state==="denied"&&w(ee=>ee??"Location permission denied"),de.onchange=()=>{G||(de.state==="granted"?q():de.state==="denied"&&(w("Location permission denied"),R(!1),V(!1)))}}catch(de){w(ee=>ee??de.message??"Geolocation unavailable")}})(),()=>{var re;B.current!==null&&((re=navigator.geolocation)!=null&&re.clearWatch)&&navigator.geolocation.clearWatch(B.current),B.current=null,G=!0}},[q]),K.useEffect(()=>{if(typeof window>"u")return()=>{};if(!v)return()=>{};if(typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function")return()=>{window.removeEventListener("deviceorientation",H)};const G="ondeviceorientationabsolute"in window?"deviceorientationabsolute":"deviceorientation";return window.addEventListener(G,H),k.current=G,()=>{k.current&&window.removeEventListener(k.current,H)}},[H,v]);const U=Yp(u,e),Z=Kp(u,e);return{heading:n,bearing:U,distance:Z,geolocation:u,error:f,needsPermission:A,isSupported:v,locationEnabled:b,hasLocationFix:z,isRequestingLocation:W,requestPermission:X,startGeolocation:q}},$f=e=>e==null?"N/A":e<1e3?`${e.toFixed(0)} m`:`${(e/1e3).toFixed(2)} km`,_w=3200/Math.PI,Cw=({heading:e,bearing:n,distance:s,error:u,enableCompass:d,onEnableLocation:f,needsPermission:w,isSupported:A,locationEnabled:C,hasLocationFix:v,isRequestingLocation:S,targets:b=[],selectedTarget:R=null,onSelectTarget:z,bearingUnit:V="degrees",onToggleBearingUnit:W,routes:se=[],activeRouteId:B=null,onSelectRoute:k=null})=>{const T=K.useMemo(()=>Qp(e,n),[e,n]),H=()=>{typeof f=="function"&&f()},q=()=>{typeof d=="function"&&d()},X=v?"Location Active":S?"Locating":C?"Retry Location":"Enable Location",U=S||v,Z=typeof W!="function",G=!A&&!w,oe=typeof z=="function",re=ye=>{if(!ye)return null;const{lat:Re,lng:ge}=ye;return typeof Re!="number"||typeof ge!="number"?null:`${Re.toFixed(4)}, ${ge.toFixed(4)}`},de=ye=>{oe&&z(ye)},ee=R?"Other checkpoints":"Select a checkpoint",le=re(R==null?void 0:R.position),Q=ye=>{if(ye==null)return null;const Re=(ye%360+360)%360;return V==="mils"?(Re*Math.PI/180*_w+6400)%6400:Re},_e=ye=>{if(ye==null)return"N/A";const Re=Q(ye);return Re==null?"N/A":V==="mils"?`${Re.toFixed(1)} mil`:`${Re.toFixed(0)}`},fe=()=>{Z||W()},te=n!=null&&e!=null,pe=te?T??0:null,ae=e!=null?(360-e)%360:null,Ae=w||!A,Ne=Ae?"border border-rose-500 text-rose-200":"border border-slate-800 text-slate-100",Ce=Ae?"border-rose-500 bg-slate-800":"border-sky-500 bg-slate-950";return I.jsxs("div",{className:`flex flex-col items-center gap-4 rounded-2xl bg-slate-900 p-5 text-center shadow-lg shadow-slate-950 ${Ne}`,children:[se&&se.length>1&&k&&I.jsxs("div",{className:"w-full max-w-xs",children:[I.jsx("label",{className:"mb-1 block text-left text-xs font-medium text-slate-400",children:"Target Route"}),I.jsx("select",{value:B,onChange:ye=>k(ye.target.value),className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-2 text-sm text-slate-200 focus:border-sky-500 focus:outline-none",children:se.map(ye=>I.jsx("option",{value:ye.id,children:ye.name},ye.id))})]}),I.jsxs("div",{className:"flex w-full flex-wrap items-center justify-center gap-2",children:[I.jsx("h2",{className:"text-base font-semibold text-sky-200",children:"Compass"}),I.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[I.jsx("button",{type:"button",className:"rounded-full border border-emerald-500 px-3 py-1 text-[11px] font-semibold text-emerald-200 hover:bg-emerald-700 hover:text-emerald-100 disabled:cursor-not-allowed disabled:opacity-60",onClick:H,disabled:U,children:X}),I.jsx("button",{type:"button",className:"rounded-full border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-700 hover:text-sky-100 disabled:cursor-not-allowed disabled:opacity-60",onClick:q,disabled:G,children:"Enable Compass"}),I.jsx("button",{type:"button",className:"rounded-full border border-slate-700 px-3 py-1 text-[11px] font-semibold text-slate-200 hover:border-sky-500 hover:text-sky-200 disabled:cursor-not-allowed disabled:opacity-60",onClick:fe,disabled:Z,children:V==="degrees"?"Show mils":"Show degrees"})]})]}),I.jsxs("div",{className:`relative flex h-44 w-44 items-center justify-center rounded-full shadow-inner shadow-slate-950/40 ${Ce}`,children:[I.jsx("div",{className:"absolute inset-3 rounded-full border border-slate-800","aria-hidden":"true"}),I.jsx("div",{className:"absolute inset-0","aria-hidden":"true",children:I.jsx("div",{className:"absolute left-1/2 top-0 h-1/2 w-[3px] -translate-x-1/2 rounded-full bg-slate-200 opacity-40"})}),ae!=null&&I.jsxs("div",{className:"absolute inset-0",style:{transform:`rotate(${ae}deg)`},"aria-hidden":"true",children:[[0,30,60,90,120,150,180,210,240,270,300,330].map(ye=>{const Re=ye%90===0;return I.jsx("div",{className:"absolute inset-0",style:{transform:`rotate(${ye}deg)`},children:I.jsx("div",{className:`absolute left-1/2 top-3 -translate-x-1/2 rounded-full bg-slate-600 ${Re?"h-3 w-[2px]":"h-1.5 w-[1px]"}`})},ye)}),I.jsx("span",{className:"absolute left-1/2 top-2 -translate-x-1/2 rounded-full border border-slate-600 bg-slate-950 px-2 py-[2px] text-[10px] font-semibold uppercase tracking-[0.25em] text-sky-200 shadow-sm shadow-slate-950/40",children:"N"})]}),te&&pe!=null&&I.jsx("div",{className:"absolute inset-0",style:{transform:`rotate(${pe}deg)`},"aria-hidden":"true",children:I.jsx("div",{className:"absolute left-1/2 top-1 flex h-10 w-10 -translate-x-1/2 items-start justify-center drop-shadow-[0_0_8px_rgba(249,115,22,0.6)]",children:I.jsxs("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-orange-500",children:[I.jsx("path",{d:"M12 2L15 10H9L12 2Z",fill:"currentColor",stroke:"#c2410c",strokeWidth:"1.5",strokeLinejoin:"round"}),I.jsx("path",{d:"M12 22L9 14H15L12 22Z",fill:"currentColor",opacity:"0.5"})]})})}),Ae&&I.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center rounded-full bg-slate-950 text-center",style:{backgroundColor:"rgba(2, 6, 23, 0.85)"},children:[I.jsx("p",{className:"text-lg font-bold uppercase tracking-wide text-rose-200",children:"Compass not enabled"}),w&&I.jsx("p",{className:"mt-1 text-xs text-rose-200/80",children:"Tap Enable Compass to allow motion access."}),!w&&!A&&I.jsx("p",{className:"mt-1 text-xs text-rose-200/80",children:"This device does not expose compass sensors."})]}),I.jsx("span",{className:"absolute bottom-4 text-xs text-slate-300",children:e!=null?_e(e):""})]}),I.jsxs("div",{className:"space-y-1 text-xs text-slate-300",children:[I.jsxs("p",{children:["Target bearing: ",_e(n)]}),I.jsxs("p",{children:["Distance: ",$f(s)]}),(S||C&&!v)&&I.jsx("p",{className:"text-[11px] text-slate-400",children:"Awaiting GPS fix keep the device in the open."}),w&&A&&I.jsx("p",{className:"text-[11px] text-slate-400",children:"Tap Enable Compass to grant motion and orientation access."}),!A&&I.jsx("p",{className:"text-amber-400",children:"Compass not supported on this device."}),u&&I.jsxs("p",{className:"text-rose-400",children:["Error: ",u]})]}),I.jsxs("div",{className:"w-full rounded-xl border border-slate-800 bg-slate-950 p-3 text-left",children:[I.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-sky-300",children:"Active checkpoint"}),R?I.jsxs("div",{className:"mt-2",children:[I.jsx("p",{className:"text-sm font-semibold text-slate-100",children:R.label}),le&&I.jsx("p",{className:"text-[11px] text-slate-400",children:le})]}):I.jsx("p",{className:"mt-2 text-[11px] text-slate-400",children:b.length>0?"Pick a checkpoint below to set the compass target.":"Add checkpoints from the Route tools to set the compass target."})]}),b.length>0&&I.jsxs("div",{className:"w-full rounded-xl border border-slate-800 bg-slate-950 p-3 text-left",children:[I.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-sky-300",children:ee}),I.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:b.map(ye=>I.jsxs("div",{role:oe?"button":void 0,tabIndex:oe?0:void 0,className:`flex items-center justify-between gap-3 rounded-md border px-3 py-2 text-xs text-slate-200 transition ${oe?"cursor-pointer border-slate-700 bg-slate-900 hover:border-sky-500 hover:bg-sky-900 focus:outline-none focus:ring-2 focus:ring-sky-500/60":"border-slate-800 bg-slate-900"}`,onClick:oe?()=>de(ye.id):void 0,onKeyDown:oe?Re=>{(Re.key==="Enter"||Re.key===" ")&&(Re.preventDefault(),de(ye.id))}:void 0,children:[I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full border border-slate-700 bg-slate-950",children:I.jsx("svg",{viewBox:"0 0 24 24",className:"h-4 w-4 text-sky-300",style:{transform:`rotate(${ye.relativeBearing??0}deg)`,transformOrigin:"50% 50%"},children:I.jsx("path",{d:"M12 3l4.5 9H13l3 9-4-7-4 7 3-9H7.5z",fill:"currentColor"})})}),I.jsxs("div",{children:[I.jsx("p",{className:"font-semibold text-slate-100",children:ye.label}),I.jsx("p",{className:"text-[11px] text-slate-400",children:ye.bearing!=null?_e(ye.bearing):""})]})]}),I.jsx("span",{className:"text-[11px] text-slate-400",children:$f(ye.distance)})]},ye.id))})]})]})},qf="rounded border border-slate-700 px-2 py-1 text-[11px] font-medium text-slate-200 transition hover:border-sky-500 hover:bg-slate-800",Jf="border-sky-500 bg-sky-900 text-sky-100",Ew=({route:e,isActive:n,onActivate:s,checkpointMap:u,onUpdateRoute:d,onRemoveRoute:f,canRemove:w,selectedId:A,onSelectCheckpoint:C,onMoveCheckpoint:v,onRemoveCheckpoint:S,onAddCheckpoint:b,placementMode:R,onSetPlacementMode:z})=>{const[V,W]=K.useState(!1),se=K.useMemo(()=>e.items.map((Z,G)=>{const oe=u[Z];return oe?{type:"checkpoint",id:oe.id,label:oe.name||`Point ${G+1}`,position:oe.position,index:G,callout:hd(oe.position)}:null}).filter(Boolean),[e.items,u]),B=Z=>G=>{G.dataTransfer.setData("application/x-cadet-map-checkpoint-id",Z.id),G.dataTransfer.effectAllowed="move";const oe=G.target.closest("li");oe&&G.dataTransfer.setDragImage(oe,10,10)},k=Z=>{Z.preventDefault(),Z.dataTransfer.dropEffect="move"},T=Z=>{Z.preventDefault(),Z.dataTransfer.dropEffect="move"},H=Z=>G=>{G.preventDefault();const oe=G.dataTransfer.getData("application/x-cadet-map-checkpoint-id");!oe||oe===Z.id||v(oe,Z.index)},q=(R==null?void 0:R.type)??null,X=typeof(R==null?void 0:R.insertIndex)=="number"?R.insertIndex:null,U=Z=>{Z.index,Z.index,se.length-1;const G=n&&q==="checkpoint"&&X===Z.index,oe=n&&q==="checkpoint"&&X===Z.index+1;return I.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[I.jsx("button",{type:"button",className:`${qf} ${G?Jf:""}`,onClick:re=>{re.stopPropagation(),z({type:"checkpoint",insertIndex:Z.index})},children:"Insert Before"}),I.jsx("button",{type:"button",className:`${qf} ${oe?Jf:""}`,onClick:re=>{re.stopPropagation(),z({type:"checkpoint",insertIndex:Z.index+1})},children:"Insert After"}),I.jsx("button",{type:"button",className:"rounded border border-rose-500 px-2 py-1 text-[11px] font-medium text-rose-300 transition hover:bg-rose-900 hover:text-rose-100",onClick:re=>{re.stopPropagation(),S(Z.id)},children:"Remove"})]})};return I.jsxs("div",{className:`border-b border-slate-700/50 ${n?"bg-slate-800/30":""}`,children:[I.jsxs("div",{className:"flex cursor-pointer items-center gap-3 p-4 hover:bg-slate-800/50",onClick:s,children:[I.jsx("div",{className:`transition-transform duration-200 ${n?"rotate-90":""}`,children:I.jsx("svg",{className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),I.jsx("input",{type:"color",value:e.color,onClick:Z=>Z.stopPropagation(),onChange:Z=>d(e.id,{color:Z.target.value}),className:"h-5 w-5 cursor-pointer rounded border-0 bg-transparent p-0",title:"Route color"}),I.jsx("div",{className:"flex-1",children:I.jsx("input",{type:"text",value:e.name,onClick:Z=>Z.stopPropagation(),onChange:Z=>d(e.id,{name:Z.target.value}),className:"w-full bg-transparent text-sm font-medium text-slate-200 placeholder-slate-500 focus:outline-none",placeholder:"Route Name"})}),w&&I.jsx("button",{onClick:Z=>{Z.stopPropagation(),f(e.id)},className:"rounded p-1 text-slate-400 hover:bg-red-500/10 hover:text-red-400",title:"Delete route",children:I.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),n&&I.jsxs("div",{className:"px-4 pb-4",children:[I.jsxs("ul",{className:"space-y-2 text-sm text-slate-200",children:[se.length===0&&I.jsx("li",{className:"text-xs text-slate-500",children:"No markers yet. Add one below."}),se.map(Z=>I.jsxs("li",{onDragEnter:k,onDragOver:T,onDrop:H(Z),className:`flex items-start gap-2 rounded-md border px-3 py-2 transition ${A===Z.id?"border-sky-500 bg-sky-900 text-sky-100":"cursor-pointer border-slate-800 hover:border-slate-600 hover:bg-slate-800"}`,onClick:()=>C(Z.id),children:[I.jsx("div",{draggable:"true",onDragStart:B(Z),className:"drag-handle mt-1 flex h-8 w-8 shrink-0 cursor-grab items-center justify-center rounded border border-slate-700 bg-slate-800 text-slate-400 touch-none hover:bg-slate-700 hover:text-slate-200 active:cursor-grabbing",onClick:G=>G.stopPropagation(),children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-5 w-5",children:I.jsx("path",{fillRule:"evenodd",d:"M10 3a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM10 8.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM11.5 15.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",clipRule:"evenodd"})})}),I.jsxs("div",{className:"flex-1",children:[I.jsx("div",{className:"font-semibold",children:Z.label}),I.jsxs("div",{className:"text-xs text-slate-400",children:[Z.position.lat.toFixed(4),", ",Z.position.lng.toFixed(4)]}),Z.callout&&I.jsxs("div",{className:"text-[11px] font-mono uppercase text-amber-300",children:["Callout: ",Z.callout]}),U(Z)]})]},Z.id))]}),I.jsx("button",{onClick:b,style:q==="checkpoint"&&!X?{borderColor:e.color,color:e.color,backgroundColor:`${e.color}20`}:{},className:`mt-3 w-full rounded border border-dashed border-slate-600 py-2 text-xs font-medium text-slate-400 transition hover:bg-slate-800 ${q==="checkpoint"&&!X?"":"hover:border-sky-500 hover:text-sky-400"}`,children:"+ Add Checkpoint"})]})]})},Aw=({onEnterPlacingMode:e})=>{const{checkpointMap:n,routes:s,activeRouteId:u,setActiveRoute:d,addRoute:f,removeRoute:w,updateRoute:A,selectedId:C,selectCheckpoint:v,connectVia:S,toggleConnectMode:b,clearAll:R,setPlacementMode:z,moveCheckpoint:V,removeCheckpoint:W,placementMode:se}=Oo(),[B,k]=K.useState(u),T=H=>{B===H?k(null):(k(H),d(H))};return I.jsxs("div",{className:"flex h-full flex-col bg-slate-900/95 backdrop-blur-md",children:[I.jsxs("div",{className:"flex-1 overflow-y-auto",children:[s.map(H=>I.jsx(Ew,{route:H,isActive:H.id===B,onActivate:()=>T(H.id),checkpointMap:n,onUpdateRoute:A,onRemoveRoute:w,canRemove:s.length>1,selectedId:C,onSelectCheckpoint:v,onMoveCheckpoint:V,onRemoveCheckpoint:W,onAddCheckpoint:()=>{d(H.id),z({type:"checkpoint"}),e&&e()},placementMode:se,onSetPlacementMode:z},H.id)),I.jsx("div",{className:"p-4",children:I.jsxs("button",{onClick:()=>f(),className:"flex w-full items-center justify-center gap-2 rounded-lg border border-slate-600 bg-slate-800 py-2 text-sm text-slate-200 hover:border-sky-500 hover:bg-slate-700",children:[I.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Route"]})})]}),I.jsxs("div",{className:"border-t border-slate-700/50 p-4",children:[I.jsx("div",{className:"flex gap-2",children:I.jsx("button",{onClick:b,className:`flex-1 rounded border border-slate-600 py-2 text-xs font-medium transition ${S==="route"?"border-sky-500 bg-sky-900/20 text-sky-400":"text-slate-400 hover:border-sky-500 hover:bg-slate-800 hover:text-sky-400"}`,children:S==="route"?"Routing: Road":"Routing: Direct"})}),I.jsx("button",{onClick:R,className:"mt-2 w-full rounded border border-red-900/30 py-2 text-xs font-medium text-red-400 transition hover:bg-red-900/20 hover:text-red-300",children:"Clear All"})]})]})},e1=e=>e===4?4:3,t1={origin:null,originReference:null,precision:3},xw=cd(e=>({...t1,setPrecision:n=>e(s=>{const u=e1(n);return{precision:u,originReference:s.originReference?{...s.originReference,precision:u}:null}}),setOrigin:n=>e({origin:n}),setOriginReference:n=>e(s=>({originReference:n?{...n,precision:e1(n.precision??s.precision)}:null})),resetGrid:()=>e(t1)})),Sw=()=>xw(e=>({origin:e.origin,originReference:e.originReference,precision:e.precision,setOrigin:e.setOrigin,setOriginReference:e.setOriginReference,setPrecision:e.setPrecision,resetGrid:e.resetGrid})),Ma=6371e3,Tl=e=>e*Math.PI/180,n1=e=>e*180/Math.PI,Iw=e=>(e+540)%360-180,dd=e=>{if(e===3||e===4)return e;throw new Error("Unsupported grid precision. Use 3 or 4 figure references.")},fd=e=>dd(e)===3?100:10,fl=(e,n)=>{if(e==null)return null;const s=String(e).trim();if(!s)return null;if(!/^\d+$/.test(s))throw new Error("Grid references must contain digits only.");if(s.length!==n)throw new Error(`Expected ${n} digits for this precision setting.`);return parseInt(s,10)},bw=({lat:e,lng:n},s,u)=>{const d=Tl(e),f=e+u/Ma*(180/Math.PI),w=n+s/(Ma*Math.cos(d))*180/Math.PI;return{lat:f,lng:w}},Tw=({origin:e,bearingDegrees:n,distanceMeters:s})=>{if(!e)throw new Error("Provide a valid origin location first.");if(n==null||Number.isNaN(n))throw new Error("Bearing must be a number.");if(s==null||Number.isNaN(s)||s<0)throw new Error("Distance must be a non-negative number.");const u=s/Ma,d=Tl(n),f=Tl(e.lat),w=Tl(e.lng),A=Math.sin(f),C=Math.cos(f),v=Math.sin(u),S=Math.cos(u),b=Math.asin(A*S+C*v*Math.cos(d)),R=w+Math.atan2(Math.sin(d)*v*C,S-A*Math.sin(b));return{lat:n1(b),lng:Iw(n1(R))}},Nw=({origin:e,originReference:n,targetReference:s,precision:u})=>{if(!e)throw new Error("Set a grid origin location first.");if(!n)throw new Error("Set a grid origin reference first.");const d=dd(u??n.precision??(s==null?void 0:s.precision)??3),f=fl(n.easting,d),w=fl(n.northing,d),A=fl(s.easting,d),C=fl(s.northing,d),v=fd(d),S=(A-f)*v,b=(C-w)*v;return bw(e,S,b)},Ow=({origin:e,originReference:n,point:s,precision:u})=>{if(!e||!n)throw new Error("Grid origin must be configured.");const d=dd(u??n.precision??3),f=fd(d),w=e.lat*Math.PI/180,A=(s.lat-e.lat)*Math.PI*Ma/180,C=(s.lng-e.lng)*Math.PI*Ma*Math.cos(w)/180,v=Math.round(n.easting+C/f),S=Math.round(n.northing+A/f),b=R=>R.toString().padStart(d,"0");return{easting:b(v),northing:b(S),precision:d}},pl=e=>e!=null?e.toFixed(6):"",Rw=e=>e==null||Number.isNaN(e)?"":e>=1e3?`${(e/1e3).toFixed(2)} km`:e>=10?`${e.toFixed(0)} m`:`${e.toFixed(1)} m`,lc=({show:e,onToggle:n})=>I.jsx("button",{type:"button",onClick:n,className:`flex h-5 w-5 items-center justify-center rounded-full border text-[10px] font-bold transition ${e?"border-sky-500 bg-sky-500 text-slate-900":"border-slate-600 text-slate-400 hover:border-sky-500 hover:text-sky-200"}`,"aria-label":"Toggle help",children:"?"}),kw=({userLocation:e,selectedPosition:n,onPreviewLocationChange:s})=>{const{origin:u,originReference:d,precision:f,setOrigin:w,setOriginReference:A,setPrecision:C,resetGrid:v}=Sw(),{addCheckpoint:S}=Oo(),[b,R]=K.useState(""),[z,V]=K.useState(""),[W,se]=K.useState(""),[B,k]=K.useState(""),[T,H]=K.useState(null),[q,X]=K.useState(null),[U,Z]=K.useState(null),[G,oe]=K.useState("user"),[re,de]=K.useState(""),[ee,le]=K.useState("degrees"),[Q,_e]=K.useState(""),[fe,te]=K.useState(null),[pe,ae]=K.useState(null),[Ae,Ne]=K.useState("origin"),[Ce,ye]=K.useState(!1);K.useEffect(()=>{var Be,Ve;d&&(R(((Be=d.easting)==null?void 0:Be.toString().padStart(f,"0"))??""),V(((Ve=d.northing)==null?void 0:Ve.toString().padStart(f,"0"))??""))},[d,f]);const Re=K.useMemo(()=>{if(!u||!d)return null;try{const Be=Ow({origin:u,originReference:d,point:u,precision:f});return`${Be.easting} / ${Be.northing}`}catch(Be){return console.warn(Be),null}},[u,d,f]),ge=K.useMemo(()=>{if(!re)return null;const Be=Number(re);return Number.isNaN(Be)?null:ee==="mils"?Be*360/6400:Be},[re,ee]),dt=K.useMemo(()=>ge==null?null:ge*6400/360,[ge]),He=(pe==null?void 0:pe.bearingDegrees)??null,Zn=He!=null?He*6400/360:null,Ln=()=>{let Be=e;if(!Be)if(n)Be=n;else{Z("Waiting for GPS location (or select a point on the map).");return}const Ve=b.trim(),Ge=z.trim();if(!Ve||!Ge){Z("Enter grid reference digits.");return}if(Ve.length!==Ge.length){Z("Easting and Northing must have same number of digits.");return}let Gt=3;if(Ve.length===3)Gt=3;else if(Ve.length===4)Gt=4;else{Z("Grid ref must be 3 or 4 digits (e.g. 123 456).");return}try{const Oe=Number(Ve),kt=Number(Ge);if(Number.isNaN(Oe)||Number.isNaN(kt))throw new Error("Grid reference must be numbers.");w(Be),A({easting:Oe,northing:kt,precision:Gt}),C(Gt),Z(null),H(`Grid calibrated to ${Gt}-figure reference.`)}catch(Oe){Z(Oe.message)}},Mt=()=>{if(G==="user"){if(!e)throw new Error("No user location fix yet.");return e}if(G==="selected"){if(!n)throw new Error("Select a marker on the map to use as the origin.");return n}throw new Error("Select a valid start point.")},vt=()=>{try{if(!re)throw new Error("Enter a bearing value.");if(!Q)throw new Error("Enter a distance in meters.");const Be=Mt(),Ve=Number(re),Ge=Number(Q);if(Number.isNaN(Ve))throw new Error("Bearing must be a number.");if(Number.isNaN(Ge)||Ge<0)throw new Error("Distance must be zero or greater.");const Oe=((ee==="mils"?Ve*360/6400:Ve)%360+360)%360,kt=Tw({origin:Be,bearingDegrees:Oe,distanceMeters:Ge});te(kt),ae({bearingDegrees:Oe,bearingInput:Ve,bearingUnit:ee,distanceMeters:Ge,origin:Be}),H("Projected point from bearing and distance."),Z(null)}catch(Be){te(null),ae(null),Z(Be.message??"Unable to project bearing.")}},Xe=()=>{if(!W||!B){Z("Enter both easting and northing for the grid reference.");return}try{const Be=Nw({origin:u,originReference:d,targetReference:{easting:W,northing:B,precision:f},precision:f});X(Be),H("Grid reference resolved."),Z(null)}catch(Be){X(null),Z(Be.message)}},xn=(Be=q,Ve="grid reference")=>{if(!Be){Z(`Resolve a ${Ve} first.`);return}S(Be),H(`Checkpoint added from ${Ve}.`),Z(null)},Zt=()=>{v(),R(""),V(""),se(""),k(""),X(null),oe("user"),de(""),le("degrees"),_e(""),te(null),ae(null),H("Grid settings cleared."),Z(null)},Dn=fd(f);return K.useEffect(()=>{s&&s(Ae==="convert"&&q?{position:q,source:u}:Ae==="project"&&fe?{position:fe,source:(pe==null?void 0:pe.origin)??null}:null)},[Ae,q,fe,pe,u,s]),I.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl bg-slate-900 p-4 text-xs text-slate-200 shadow-lg shadow-slate-950",children:[I.jsxs("div",{className:"flex items-center justify-between gap-2",children:[I.jsx("h2",{className:"text-base font-semibold text-sky-200",children:"Grid Tools"}),I.jsx("div",{className:"flex gap-1",children:I.jsxs("span",{className:"rounded-full border border-slate-700 px-2 py-1 text-[10px] font-semibold text-slate-400",children:[f,"-fig mode"]})})]}),I.jsxs("div",{className:"flex gap-1 rounded-lg border border-slate-800 bg-slate-950 p-1",children:[I.jsx("button",{type:"button",onClick:()=>Ne("origin"),className:`flex-1 rounded-md py-1.5 text-[11px] font-semibold transition ${Ae==="origin"?"bg-slate-800 text-sky-200 shadow-sm":"text-slate-400 hover:bg-slate-900 hover:text-slate-200"}`,children:"Origin"}),I.jsx("button",{type:"button",onClick:()=>Ne("convert"),className:`flex-1 rounded-md py-1.5 text-[11px] font-semibold transition ${Ae==="convert"?"bg-slate-800 text-sky-200 shadow-sm":"text-slate-400 hover:bg-slate-900 hover:text-slate-200"}`,children:"Convert"}),I.jsx("button",{type:"button",onClick:()=>Ne("project"),className:`flex-1 rounded-md py-1.5 text-[11px] font-semibold transition ${Ae==="project"?"bg-slate-800 text-sky-200 shadow-sm":"text-slate-400 hover:bg-slate-900 hover:text-slate-200"}`,children:"Project"})]}),Ae==="origin"&&I.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950 p-3",children:[I.jsxs("div",{className:"mb-3 flex items-start justify-between gap-2",children:[I.jsxs("div",{children:[I.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide text-sky-300",children:"Calibrate Grid Origin"}),I.jsx("p",{className:"mt-1 text-[11px] text-slate-400",children:"Sync your current location to a grid reference."})]}),I.jsx(lc,{show:Ce,onToggle:()=>ye(!Ce)})]}),Ce&&I.jsxs("div",{className:"mb-4 rounded-lg bg-slate-900 p-2 text-[11px] text-slate-300",children:[I.jsx("p",{className:"mb-1 font-semibold text-sky-200",children:"How to calibrate:"}),I.jsx("p",{className:"text-slate-400",children:"Enter the Grid Reference for your current location (e.g. from a paper map) and tap 'Set Origin'. The app will link your GPS position to that grid reference."}),I.jsx("p",{className:"mt-2 text-slate-500 italic",children:"Note: If GPS is unavailable, select a point on the map first."})]}),I.jsxs("div",{className:"flex flex-col gap-3",children:[I.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[I.jsxs("label",{className:"flex flex-col gap-1",children:[I.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Easting"}),I.jsx("input",{value:b,onChange:Be=>R(Be.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. 123"})]}),I.jsxs("label",{className:"flex flex-col gap-1",children:[I.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Northing"}),I.jsx("input",{value:z,onChange:Be=>V(Be.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. 456"})]})]}),I.jsxs("div",{className:"flex gap-2",children:[I.jsx("button",{type:"button",className:"flex-1 rounded-md border border-sky-500 bg-sky-500/10 px-3 py-2 font-semibold text-sky-200 hover:bg-sky-500/20",onClick:Ln,children:"Set Origin"}),I.jsx("button",{type:"button",className:"rounded-md border border-slate-700 px-3 py-2 font-semibold text-slate-300 hover:border-rose-500 hover:text-rose-200",onClick:Zt,children:"Clear"})]}),I.jsx("div",{className:"mt-1 text-center text-[11px]",children:Re?I.jsxs("span",{className:"text-emerald-400",children:["Active: ",Re," (",f,"-fig)"]}):I.jsx("span",{className:"text-slate-500",children:"Origin not set"})})]})]}),Ae==="convert"&&I.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950 p-3",children:[I.jsxs("div",{className:"mb-3 flex items-start justify-between gap-2",children:[I.jsxs("div",{children:[I.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide text-sky-300",children:"Convert Grid Ref"}),I.jsx("p",{className:"mt-1 text-[11px] text-slate-400",children:"Enter a grid reference to find its location on the map relative to your origin."})]}),I.jsx(lc,{show:Ce,onToggle:()=>ye(!Ce)})]}),Ce&&I.jsxs("div",{className:"mb-4 rounded-lg bg-slate-900 p-2 text-[11px] text-slate-300",children:[I.jsx("p",{className:"mb-1 font-semibold text-sky-200",children:"How to convert:"}),I.jsx("p",{className:"text-slate-400",children:'Once you have calibrated the origin, you can enter any other grid reference here. The app will calculate the offset from the origin, show you where that point lands, and the "Add checkpoint" button will drop it into your active route.'})]}),I.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[I.jsxs("label",{className:"flex flex-col gap-1",children:[I.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Easting"}),I.jsx("input",{value:W,onChange:Be=>se(Be.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. ".concat("2".repeat(f))})]}),I.jsxs("label",{className:"flex flex-col gap-1",children:[I.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Northing"}),I.jsx("input",{value:B,onChange:Be=>k(Be.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. ".concat("3".repeat(f))})]})]}),I.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[I.jsx("button",{type:"button",className:"rounded-md border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-900",onClick:Xe,children:"Preview location"}),I.jsxs("span",{className:"text-[11px] text-slate-400",children:["1 digit = ",Dn," m offset"]})]}),q&&I.jsxs("div",{className:"mt-3 rounded-md border border-slate-800 bg-slate-900 p-3 text-[11px] text-slate-200",children:[I.jsx("p",{className:"font-semibold text-sky-200",children:"Resolved coordinates"}),I.jsxs("p",{className:"mt-1 text-slate-300",children:["Lat ",pl(q.lat)," | Lng ",pl(q.lng)]}),I.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:I.jsx("button",{type:"button",className:"rounded-md border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-900",onClick:()=>xn(q,"grid reference"),children:"Add checkpoint"})})]})]}),Ae==="project"&&I.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950 p-3",children:[I.jsxs("div",{className:"mb-3 flex items-start justify-between gap-2",children:[I.jsxs("div",{children:[I.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide text-sky-300",children:"Project by bearing"}),I.jsx("p",{className:"mt-1 text-[11px] text-slate-400",children:"Calculate a new point by moving a specific distance and bearing from a starting point."})]}),I.jsx(lc,{show:Ce,onToggle:()=>ye(!Ce)})]}),Ce&&I.jsxs("div",{className:"mb-4 rounded-lg bg-slate-900 p-2 text-[11px] text-slate-300",children:[I.jsx("p",{className:"mb-1 font-semibold text-sky-200",children:"How to project:"}),I.jsxs("ol",{className:"list-decimal space-y-1 pl-4 text-slate-400",children:[I.jsx("li",{children:"Choose a start point (your current GPS fix or a checkpoint you selected on the map)."}),I.jsx("li",{children:"Enter the bearing (direction) and distance to travel."}),I.jsx("li",{children:"Click 'Project location' to see the destination on the map, then use 'Add checkpoint' to store it in the active route."})]})]}),I.jsxs("div",{className:"mb-3",children:[I.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Start Point"}),I.jsxs("div",{className:"mt-1 flex gap-2",children:[I.jsx("button",{type:"button",onClick:()=>oe("user"),className:`flex-1 rounded-md border py-2 text-[11px] font-semibold transition ${G==="user"?"border-sky-500 bg-sky-500/10 text-sky-200":"border-slate-700 text-slate-400 hover:border-slate-500 hover:text-slate-200"}`,children:"My Location"}),I.jsx("button",{type:"button",onClick:()=>oe("selected"),className:`flex-1 rounded-md border py-2 text-[11px] font-semibold transition ${G==="selected"?"border-sky-500 bg-sky-500/10 text-sky-200":"border-slate-700 text-slate-400 hover:border-slate-500 hover:text-slate-200"}`,children:"Selected Marker"})]}),!e&&G==="user"&&I.jsx("p",{className:"mt-1 text-[10px] text-rose-400",children:"Waiting for GPS fix..."}),!n&&G==="selected"&&I.jsx("p",{className:"mt-1 text-[10px] text-rose-400",children:"No marker selected on map."})]}),I.jsxs("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:[I.jsxs("label",{className:"flex flex-col gap-1",children:[I.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Bearing"}),I.jsx("input",{value:re,onChange:Be=>de(Be.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:ee==="degrees"?"0  360":"0  6400 mil"})]}),I.jsxs("div",{className:"flex flex-col gap-1",children:[I.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Units"}),I.jsxs("div",{className:"flex gap-2",children:[I.jsx("button",{type:"button",className:`flex-1 rounded-md px-2 py-1 text-[11px] font-semibold ${ee==="degrees"?"border border-sky-500 text-sky-200":"border border-slate-700 text-slate-200 hover:border-sky-500 hover:text-sky-200"}`,onClick:()=>le("degrees"),children:"Degrees"}),I.jsx("button",{type:"button",className:`flex-1 rounded-md px-2 py-1 text-[11px] font-semibold ${ee==="mils"?"border border-sky-500 text-sky-200":"border border-slate-700 text-slate-200 hover:border-sky-500 hover:text-sky-200"}`,onClick:()=>le("mils"),children:"Mils"})]})]})]}),I.jsxs("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:[I.jsxs("label",{className:"flex flex-col gap-1",children:[I.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Distance (m)"}),I.jsx("input",{value:Q,onChange:Be=>_e(Be.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. 250"})]}),I.jsx("div",{className:"flex flex-col justify-end text-[11px] text-slate-400",children:I.jsx("span",{children:ge!=null?` ${ge.toFixed(1)} / ${(dt==null?void 0:dt.toFixed(0))??""} mil`:"Enter a bearing to preview conversions."})})]}),I.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[I.jsx("button",{type:"button",className:"rounded-md border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-900",onClick:vt,children:"Project location"}),I.jsx("span",{className:"text-[11px] text-slate-400",children:"Distance measured in straight line"})]}),fe&&I.jsxs("div",{className:"mt-3 rounded-md border border-slate-800 bg-slate-900 p-3 text-[11px] text-slate-200",children:[I.jsx("p",{className:"font-semibold text-sky-200",children:"Projected coordinates"}),I.jsxs("p",{className:"mt-1 text-slate-300",children:["Lat ",pl(fe.lat)," | Lng ",pl(fe.lng)]}),I.jsxs("p",{className:"text-slate-400",children:["Bearing used:"," ",He!=null?`${He.toFixed(1)}${Zn!=null?` (${Zn.toFixed(0)} mil)`:""}`:""]}),(pe==null?void 0:pe.distanceMeters)!=null&&I.jsxs("p",{className:"text-slate-400",children:["Distance: ",Rw(pe.distanceMeters)]}),I.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:I.jsx("button",{type:"button",className:"rounded-md border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-900",onClick:()=>xn(fe,"bearing projection"),children:"Add checkpoint"})})]})]}),(U||T)&&I.jsxs("div",{className:"rounded-md border border-slate-800 bg-slate-950 p-3 text-[11px]",children:[U&&I.jsx("p",{className:"text-rose-400",children:U}),T&&I.jsx("p",{className:"text-emerald-300",children:T})]}),I.jsx("button",{type:"button",className:"rounded-md border border-slate-700 px-3 py-1 text-[11px] font-semibold text-slate-300 hover:border-rose-500 hover:text-rose-200",onClick:Zt,children:"Clear grid settings"})]})},Mw=({type:e,color:n})=>{const s=K.useRef(null),u=w=>{w.dataTransfer.setData("application/x-cadet-map-item",e),w.dataTransfer.effectAllowed="copy",s.current&&w.dataTransfer.setDragImage(s.current,10,20)},d={borderColor:n,backgroundColor:`${n}33`},f={backgroundColor:n};return I.jsxs(I.Fragment,{children:[I.jsx("div",{draggable:!0,onDragStart:u,className:"flex h-16 w-16 cursor-grab items-center justify-center rounded-full border-2 shadow-lg backdrop-blur-sm transition hover:scale-110 active:cursor-grabbing active:scale-95 touch-none",style:d,children:I.jsx("div",{className:"h-4 w-4 rounded-full",style:f})}),I.jsx("div",{ref:s,className:"absolute -top-[1000px] left-0 h-5 w-5 rounded-full border-2",style:d})]})},Pw=()=>{const{routes:e,activeRouteId:n}=Oo(),s=e.find(d=>d.id===n)||e[0],u=(s==null?void 0:s.color)||"#38bdf8";return I.jsx("div",{className:"pointer-events-auto flex gap-6 p-4",children:I.jsx(Mw,{type:"checkpoint",color:u})})};var Lw=Object.defineProperty,eu=Object.getOwnPropertySymbols,$p=Object.prototype.hasOwnProperty,qp=Object.prototype.propertyIsEnumerable,r1=(e,n,s)=>n in e?Lw(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,hh=(e,n)=>{for(var s in n||(n={}))$p.call(n,s)&&r1(e,s,n[s]);if(eu)for(var s of eu(n))qp.call(n,s)&&r1(e,s,n[s]);return e},dh=(e,n)=>{var s={};for(var u in e)$p.call(e,u)&&n.indexOf(u)<0&&(s[u]=e[u]);if(e!=null&&eu)for(var u of eu(e))n.indexOf(u)<0&&qp.call(e,u)&&(s[u]=e[u]);return s};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Fs;(e=>{const n=class lt{constructor(C,v,S,b){if(this.version=C,this.errorCorrectionLevel=v,this.modules=[],this.isFunction=[],C<lt.MIN_VERSION||C>lt.MAX_VERSION)throw new RangeError("Version value out of range");if(b<-1||b>7)throw new RangeError("Mask value out of range");this.size=C*4+17;let R=[];for(let V=0;V<this.size;V++)R.push(!1);for(let V=0;V<this.size;V++)this.modules.push(R.slice()),this.isFunction.push(R.slice());this.drawFunctionPatterns();const z=this.addEccAndInterleave(S);if(this.drawCodewords(z),b==-1){let V=1e9;for(let W=0;W<8;W++){this.applyMask(W),this.drawFormatBits(W);const se=this.getPenaltyScore();se<V&&(b=W,V=se),this.applyMask(W)}}d(0<=b&&b<=7),this.mask=b,this.applyMask(b),this.drawFormatBits(b),this.isFunction=[]}static encodeText(C,v){const S=e.QrSegment.makeSegments(C);return lt.encodeSegments(S,v)}static encodeBinary(C,v){const S=e.QrSegment.makeBytes(C);return lt.encodeSegments([S],v)}static encodeSegments(C,v,S=1,b=40,R=-1,z=!0){if(!(lt.MIN_VERSION<=S&&S<=b&&b<=lt.MAX_VERSION)||R<-1||R>7)throw new RangeError("Invalid value");let V,W;for(V=S;;V++){const T=lt.getNumDataCodewords(V,v)*8,H=w.getTotalBits(C,V);if(H<=T){W=H;break}if(V>=b)throw new RangeError("Data too long")}for(const T of[lt.Ecc.MEDIUM,lt.Ecc.QUARTILE,lt.Ecc.HIGH])z&&W<=lt.getNumDataCodewords(V,T)*8&&(v=T);let se=[];for(const T of C){s(T.mode.modeBits,4,se),s(T.numChars,T.mode.numCharCountBits(V),se);for(const H of T.getData())se.push(H)}d(se.length==W);const B=lt.getNumDataCodewords(V,v)*8;d(se.length<=B),s(0,Math.min(4,B-se.length),se),s(0,(8-se.length%8)%8,se),d(se.length%8==0);for(let T=236;se.length<B;T^=253)s(T,8,se);let k=[];for(;k.length*8<se.length;)k.push(0);return se.forEach((T,H)=>k[H>>>3]|=T<<7-(H&7)),new lt(V,v,k,R)}getModule(C,v){return 0<=C&&C<this.size&&0<=v&&v<this.size&&this.modules[v][C]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const C=this.getAlignmentPatternPositions(),v=C.length;for(let S=0;S<v;S++)for(let b=0;b<v;b++)S==0&&b==0||S==0&&b==v-1||S==v-1&&b==0||this.drawAlignmentPattern(C[S],C[b]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(C){const v=this.errorCorrectionLevel.formatBits<<3|C;let S=v;for(let R=0;R<10;R++)S=S<<1^(S>>>9)*1335;const b=(v<<10|S)^21522;d(b>>>15==0);for(let R=0;R<=5;R++)this.setFunctionModule(8,R,u(b,R));this.setFunctionModule(8,7,u(b,6)),this.setFunctionModule(8,8,u(b,7)),this.setFunctionModule(7,8,u(b,8));for(let R=9;R<15;R++)this.setFunctionModule(14-R,8,u(b,R));for(let R=0;R<8;R++)this.setFunctionModule(this.size-1-R,8,u(b,R));for(let R=8;R<15;R++)this.setFunctionModule(8,this.size-15+R,u(b,R));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let C=this.version;for(let S=0;S<12;S++)C=C<<1^(C>>>11)*7973;const v=this.version<<12|C;d(v>>>18==0);for(let S=0;S<18;S++){const b=u(v,S),R=this.size-11+S%3,z=Math.floor(S/3);this.setFunctionModule(R,z,b),this.setFunctionModule(z,R,b)}}drawFinderPattern(C,v){for(let S=-4;S<=4;S++)for(let b=-4;b<=4;b++){const R=Math.max(Math.abs(b),Math.abs(S)),z=C+b,V=v+S;0<=z&&z<this.size&&0<=V&&V<this.size&&this.setFunctionModule(z,V,R!=2&&R!=4)}}drawAlignmentPattern(C,v){for(let S=-2;S<=2;S++)for(let b=-2;b<=2;b++)this.setFunctionModule(C+b,v+S,Math.max(Math.abs(b),Math.abs(S))!=1)}setFunctionModule(C,v,S){this.modules[v][C]=S,this.isFunction[v][C]=!0}addEccAndInterleave(C){const v=this.version,S=this.errorCorrectionLevel;if(C.length!=lt.getNumDataCodewords(v,S))throw new RangeError("Invalid argument");const b=lt.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][v],R=lt.ECC_CODEWORDS_PER_BLOCK[S.ordinal][v],z=Math.floor(lt.getNumRawDataModules(v)/8),V=b-z%b,W=Math.floor(z/b);let se=[];const B=lt.reedSolomonComputeDivisor(R);for(let T=0,H=0;T<b;T++){let q=C.slice(H,H+W-R+(T<V?0:1));H+=q.length;const X=lt.reedSolomonComputeRemainder(q,B);T<V&&q.push(0),se.push(q.concat(X))}let k=[];for(let T=0;T<se[0].length;T++)se.forEach((H,q)=>{(T!=W-R||q>=V)&&k.push(H[T])});return d(k.length==z),k}drawCodewords(C){if(C.length!=Math.floor(lt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let v=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let b=0;b<this.size;b++)for(let R=0;R<2;R++){const z=S-R,W=(S+1&2)==0?this.size-1-b:b;!this.isFunction[W][z]&&v<C.length*8&&(this.modules[W][z]=u(C[v>>>3],7-(v&7)),v++)}}d(v==C.length*8)}applyMask(C){if(C<0||C>7)throw new RangeError("Mask value out of range");for(let v=0;v<this.size;v++)for(let S=0;S<this.size;S++){let b;switch(C){case 0:b=(S+v)%2==0;break;case 1:b=v%2==0;break;case 2:b=S%3==0;break;case 3:b=(S+v)%3==0;break;case 4:b=(Math.floor(S/3)+Math.floor(v/2))%2==0;break;case 5:b=S*v%2+S*v%3==0;break;case 6:b=(S*v%2+S*v%3)%2==0;break;case 7:b=((S+v)%2+S*v%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[v][S]&&b&&(this.modules[v][S]=!this.modules[v][S])}}getPenaltyScore(){let C=0;for(let R=0;R<this.size;R++){let z=!1,V=0,W=[0,0,0,0,0,0,0];for(let se=0;se<this.size;se++)this.modules[R][se]==z?(V++,V==5?C+=lt.PENALTY_N1:V>5&&C++):(this.finderPenaltyAddHistory(V,W),z||(C+=this.finderPenaltyCountPatterns(W)*lt.PENALTY_N3),z=this.modules[R][se],V=1);C+=this.finderPenaltyTerminateAndCount(z,V,W)*lt.PENALTY_N3}for(let R=0;R<this.size;R++){let z=!1,V=0,W=[0,0,0,0,0,0,0];for(let se=0;se<this.size;se++)this.modules[se][R]==z?(V++,V==5?C+=lt.PENALTY_N1:V>5&&C++):(this.finderPenaltyAddHistory(V,W),z||(C+=this.finderPenaltyCountPatterns(W)*lt.PENALTY_N3),z=this.modules[se][R],V=1);C+=this.finderPenaltyTerminateAndCount(z,V,W)*lt.PENALTY_N3}for(let R=0;R<this.size-1;R++)for(let z=0;z<this.size-1;z++){const V=this.modules[R][z];V==this.modules[R][z+1]&&V==this.modules[R+1][z]&&V==this.modules[R+1][z+1]&&(C+=lt.PENALTY_N2)}let v=0;for(const R of this.modules)v=R.reduce((z,V)=>z+(V?1:0),v);const S=this.size*this.size,b=Math.ceil(Math.abs(v*20-S*10)/S)-1;return d(0<=b&&b<=9),C+=b*lt.PENALTY_N4,d(0<=C&&C<=2568888),C}getAlignmentPatternPositions(){if(this.version==1)return[];{const C=Math.floor(this.version/7)+2,v=this.version==32?26:Math.ceil((this.version*4+4)/(C*2-2))*2;let S=[6];for(let b=this.size-7;S.length<C;b-=v)S.splice(1,0,b);return S}}static getNumRawDataModules(C){if(C<lt.MIN_VERSION||C>lt.MAX_VERSION)throw new RangeError("Version number out of range");let v=(16*C+128)*C+64;if(C>=2){const S=Math.floor(C/7)+2;v-=(25*S-10)*S-55,C>=7&&(v-=36)}return d(208<=v&&v<=29648),v}static getNumDataCodewords(C,v){return Math.floor(lt.getNumRawDataModules(C)/8)-lt.ECC_CODEWORDS_PER_BLOCK[v.ordinal][C]*lt.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][C]}static reedSolomonComputeDivisor(C){if(C<1||C>255)throw new RangeError("Degree out of range");let v=[];for(let b=0;b<C-1;b++)v.push(0);v.push(1);let S=1;for(let b=0;b<C;b++){for(let R=0;R<v.length;R++)v[R]=lt.reedSolomonMultiply(v[R],S),R+1<v.length&&(v[R]^=v[R+1]);S=lt.reedSolomonMultiply(S,2)}return v}static reedSolomonComputeRemainder(C,v){let S=v.map(b=>0);for(const b of C){const R=b^S.shift();S.push(0),v.forEach((z,V)=>S[V]^=lt.reedSolomonMultiply(z,R))}return S}static reedSolomonMultiply(C,v){if(C>>>8||v>>>8)throw new RangeError("Byte out of range");let S=0;for(let b=7;b>=0;b--)S=S<<1^(S>>>7)*285,S^=(v>>>b&1)*C;return d(S>>>8==0),S}finderPenaltyCountPatterns(C){const v=C[1];d(v<=this.size*3);const S=v>0&&C[2]==v&&C[3]==v*3&&C[4]==v&&C[5]==v;return(S&&C[0]>=v*4&&C[6]>=v?1:0)+(S&&C[6]>=v*4&&C[0]>=v?1:0)}finderPenaltyTerminateAndCount(C,v,S){return C&&(this.finderPenaltyAddHistory(v,S),v=0),v+=this.size,this.finderPenaltyAddHistory(v,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(C,v){v[0]==0&&(C+=this.size),v.pop(),v.unshift(C)}};n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=n;function s(A,C,v){if(C<0||C>31||A>>>C)throw new RangeError("Value out of range");for(let S=C-1;S>=0;S--)v.push(A>>>S&1)}function u(A,C){return(A>>>C&1)!=0}function d(A){if(!A)throw new Error("Assertion error")}const f=class Jt{constructor(C,v,S){if(this.mode=C,this.numChars=v,this.bitData=S,v<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(C){let v=[];for(const S of C)s(S,8,v);return new Jt(Jt.Mode.BYTE,C.length,v)}static makeNumeric(C){if(!Jt.isNumeric(C))throw new RangeError("String contains non-numeric characters");let v=[];for(let S=0;S<C.length;){const b=Math.min(C.length-S,3);s(parseInt(C.substring(S,S+b),10),b*3+1,v),S+=b}return new Jt(Jt.Mode.NUMERIC,C.length,v)}static makeAlphanumeric(C){if(!Jt.isAlphanumeric(C))throw new RangeError("String contains unencodable characters in alphanumeric mode");let v=[],S;for(S=0;S+2<=C.length;S+=2){let b=Jt.ALPHANUMERIC_CHARSET.indexOf(C.charAt(S))*45;b+=Jt.ALPHANUMERIC_CHARSET.indexOf(C.charAt(S+1)),s(b,11,v)}return S<C.length&&s(Jt.ALPHANUMERIC_CHARSET.indexOf(C.charAt(S)),6,v),new Jt(Jt.Mode.ALPHANUMERIC,C.length,v)}static makeSegments(C){return C==""?[]:Jt.isNumeric(C)?[Jt.makeNumeric(C)]:Jt.isAlphanumeric(C)?[Jt.makeAlphanumeric(C)]:[Jt.makeBytes(Jt.toUtf8ByteArray(C))]}static makeEci(C){let v=[];if(C<0)throw new RangeError("ECI assignment value out of range");if(C<128)s(C,8,v);else if(C<16384)s(2,2,v),s(C,14,v);else if(C<1e6)s(6,3,v),s(C,21,v);else throw new RangeError("ECI assignment value out of range");return new Jt(Jt.Mode.ECI,0,v)}static isNumeric(C){return Jt.NUMERIC_REGEX.test(C)}static isAlphanumeric(C){return Jt.ALPHANUMERIC_REGEX.test(C)}getData(){return this.bitData.slice()}static getTotalBits(C,v){let S=0;for(const b of C){const R=b.mode.numCharCountBits(v);if(b.numChars>=1<<R)return 1/0;S+=4+R+b.bitData.length}return S}static toUtf8ByteArray(C){C=encodeURI(C);let v=[];for(let S=0;S<C.length;S++)C.charAt(S)!="%"?v.push(C.charCodeAt(S)):(v.push(parseInt(C.substring(S+1,S+3),16)),S+=2);return v}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let w=f;e.QrSegment=f})(Fs||(Fs={}));(e=>{(n=>{const s=class{constructor(d,f){this.ordinal=d,this.formatBits=f}};s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2),n.Ecc=s})(e.QrCode||(e.QrCode={}))})(Fs||(Fs={}));(e=>{(n=>{const s=class{constructor(d,f){this.modeBits=d,this.numBitsCharCount=f}numCharCountBits(d){return this.numBitsCharCount[Math.floor((d+7)/17)]}};s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),n.Mode=s})(e.QrSegment||(e.QrSegment={}))})(Fs||(Fs={}));var lo=Fs;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Dw={L:lo.QrCode.Ecc.LOW,M:lo.QrCode.Ecc.MEDIUM,Q:lo.QrCode.Ecc.QUARTILE,H:lo.QrCode.Ecc.HIGH},Jp=128,eg="L",tg="#FFFFFF",ng="#000000",rg=!1,ig=1,Bw=4,Fw=0,jw=.1;function sg(e,n=0){const s=[];return e.forEach(function(u,d){let f=null;u.forEach(function(w,A){if(!w&&f!==null){s.push(`M${f+n} ${d+n}h${A-f}v1H${f+n}z`),f=null;return}if(A===u.length-1){if(!w)return;f===null?s.push(`M${A+n},${d+n} h1v1H${A+n}z`):s.push(`M${f+n},${d+n} h${A+1-f}v1H${f+n}z`);return}w&&f===null&&(f=A)})}),s.join("")}function og(e,n){return e.slice().map((s,u)=>u<n.y||u>=n.y+n.h?s:s.map((d,f)=>f<n.x||f>=n.x+n.w?d:!1))}function zw(e,n,s,u){if(u==null)return null;const d=e.length+s*2,f=Math.floor(n*jw),w=d/n,A=(u.width||f)*w,C=(u.height||f)*w,v=u.x==null?e.length/2-A/2:u.x*w,S=u.y==null?e.length/2-C/2:u.y*w,b=u.opacity==null?1:u.opacity;let R=null;if(u.excavate){let V=Math.floor(v),W=Math.floor(S),se=Math.ceil(A+v-V),B=Math.ceil(C+S-W);R={x:V,y:W,w:se,h:B}}const z=u.crossOrigin;return{x:v,y:S,h:C,w:A,excavation:R,opacity:b,crossOrigin:z}}function Uw(e,n){return n!=null?Math.max(Math.floor(n),0):e?Bw:Fw}function ag({value:e,level:n,minVersion:s,includeMargin:u,marginSize:d,imageSettings:f,size:w,boostLevel:A}){let C=Vt.useMemo(()=>{const V=(Array.isArray(e)?e:[e]).reduce((W,se)=>(W.push(...lo.QrSegment.makeSegments(se)),W),[]);return lo.QrCode.encodeSegments(V,Dw[n],s,void 0,void 0,A)},[e,n,s,A]);const{cells:v,margin:S,numCells:b,calculatedImageSettings:R}=Vt.useMemo(()=>{let z=C.getModules();const V=Uw(u,d),W=z.length+V*2,se=zw(z,w,V,f);return{cells:z,margin:V,numCells:W,calculatedImageSettings:se}},[C,w,f,u,d]);return{qrcode:C,margin:S,cells:v,numCells:b,calculatedImageSettings:R}}var Hw=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Vw=Vt.forwardRef(function(n,s){const u=n,{value:d,size:f=Jp,level:w=eg,bgColor:A=tg,fgColor:C=ng,includeMargin:v=rg,minVersion:S=ig,boostLevel:b,marginSize:R,imageSettings:z}=u,W=dh(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:se}=W,B=dh(W,["style"]),k=z==null?void 0:z.src,T=Vt.useRef(null),H=Vt.useRef(null),q=Vt.useCallback(le=>{T.current=le,typeof s=="function"?s(le):s&&(s.current=le)},[s]),[X,U]=Vt.useState(!1),{margin:Z,cells:G,numCells:oe,calculatedImageSettings:re}=ag({value:d,level:w,minVersion:S,boostLevel:b,includeMargin:v,marginSize:R,imageSettings:z,size:f});Vt.useEffect(()=>{if(T.current!=null){const le=T.current,Q=le.getContext("2d");if(!Q)return;let _e=G;const fe=H.current,te=re!=null&&fe!==null&&fe.complete&&fe.naturalHeight!==0&&fe.naturalWidth!==0;te&&re.excavation!=null&&(_e=og(G,re.excavation));const pe=window.devicePixelRatio||1;le.height=le.width=f*pe;const ae=f/oe*pe;Q.scale(ae,ae),Q.fillStyle=A,Q.fillRect(0,0,oe,oe),Q.fillStyle=C,Hw?Q.fill(new Path2D(sg(_e,Z))):G.forEach(function(Ae,Ne){Ae.forEach(function(Ce,ye){Ce&&Q.fillRect(ye+Z,Ne+Z,1,1)})}),re&&(Q.globalAlpha=re.opacity),te&&Q.drawImage(fe,re.x+Z,re.y+Z,re.w,re.h)}}),Vt.useEffect(()=>{U(!1)},[k]);const de=hh({height:f,width:f},se);let ee=null;return k!=null&&(ee=Vt.createElement("img",{src:k,key:k,style:{display:"none"},onLoad:()=>{U(!0)},ref:H,crossOrigin:re==null?void 0:re.crossOrigin})),Vt.createElement(Vt.Fragment,null,Vt.createElement("canvas",hh({style:de,height:f,width:f,ref:q,role:"img"},B)),ee)});Vw.displayName="QRCodeCanvas";var lg=Vt.forwardRef(function(n,s){const u=n,{value:d,size:f=Jp,level:w=eg,bgColor:A=tg,fgColor:C=ng,includeMargin:v=rg,minVersion:S=ig,boostLevel:b,title:R,marginSize:z,imageSettings:V}=u,W=dh(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:se,cells:B,numCells:k,calculatedImageSettings:T}=ag({value:d,level:w,minVersion:S,boostLevel:b,includeMargin:v,marginSize:z,imageSettings:V,size:f});let H=B,q=null;V!=null&&T!=null&&(T.excavation!=null&&(H=og(B,T.excavation)),q=Vt.createElement("image",{href:V.src,height:T.h,width:T.w,x:T.x+se,y:T.y+se,preserveAspectRatio:"none",opacity:T.opacity,crossOrigin:T.crossOrigin}));const X=sg(H,se);return Vt.createElement("svg",hh({height:f,width:f,viewBox:`0 0 ${k} ${k}`,ref:s,role:"img"},W),!!R&&Vt.createElement("title",null,R),Vt.createElement("path",{fill:A,d:`M0,0 h${k}v${k}H0z`,shapeRendering:"crispEdges"}),Vt.createElement("path",{fill:C,d:X,shapeRendering:"crispEdges"}),q)});lg.displayName="QRCodeSVG";var je;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(je||(je={}));var i1=new Map([[je.QR_CODE,"QR_CODE"],[je.AZTEC,"AZTEC"],[je.CODABAR,"CODABAR"],[je.CODE_39,"CODE_39"],[je.CODE_93,"CODE_93"],[je.CODE_128,"CODE_128"],[je.DATA_MATRIX,"DATA_MATRIX"],[je.MAXICODE,"MAXICODE"],[je.ITF,"ITF"],[je.EAN_13,"EAN_13"],[je.EAN_8,"EAN_8"],[je.PDF_417,"PDF_417"],[je.RSS_14,"RSS_14"],[je.RSS_EXPANDED,"RSS_EXPANDED"],[je.UPC_A,"UPC_A"],[je.UPC_E,"UPC_E"],[je.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),s1;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(s1||(s1={}));function Ww(e){return Object.values(je).includes(e)}var tu;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(tu||(tu={}));var Zw=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[tu.SCAN_TYPE_CAMERA,tu.SCAN_TYPE_FILE],e}(),ug=function(){function e(n,s){this.format=n,this.formatName=s}return e.prototype.toString=function(){return this.formatName},e.create=function(n){if(!i1.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new e(n,i1.get(n))},e}(),o1=function(){function e(){}return e.createFromText=function(n){var s={text:n};return{decodedText:n,result:s}},e.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},e}(),fh;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(fh||(fh={}));var Gw=function(){function e(){}return e.createFrom=function(n){return{errorMessage:n,type:fh.UNKWOWN_ERROR}},e}(),Xw=function(){function e(n){this.verbose=n}return e.prototype.log=function(n){this.verbose&&console.log(n)},e.prototype.warn=function(n){this.verbose&&console.warn(n)},e.prototype.logError=function(n,s){(this.verbose||s===!0)&&console.error(n)},e.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},e}();function ki(e){return typeof e>"u"||e===null}var uo=function(){function e(){}return e.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},e.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),cg=function(){function e(){}return e.isMediaStreamConstraintsValid=function(n,s){if(typeof n!="object"){var u=typeof n;return s.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(u,"."),!0),!1}for(var d=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(d),w=Object.keys(n),A=0,C=w;A<C.length;A++){var v=C[A];if(f.has(v))return s.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},e}(),ph={exports:{}};(function(e,n){(function(s,u){u(n)})(iu,function(s){function u(N){return N==null}var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,t){N.__proto__=t}||function(N,t){for(var r in t)t.hasOwnProperty(r)&&(N[r]=t[r])};function f(N,t){d(N,t);function r(){this.constructor=N}N.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function w(N,t){var r=Object.setPrototypeOf;r?r(N,t):N.__proto__=t}function A(N,t){t===void 0&&(t=N.constructor);var r=Error.captureStackTrace;r&&r(N,t)}var C=function(N){f(t,N);function t(r){var o=this.constructor,a=N.call(this,r)||this;return Object.defineProperty(a,"name",{value:o.name,enumerable:!1}),w(a,o.prototype),A(a),a}return t}(Error);class v extends C{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}v.kind="Exception";class S extends v{}S.kind="ArgumentException";class b extends v{}b.kind="IllegalArgumentException";class R{constructor(t){if(this.binarizer=t,t===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,r){return this.binarizer.getBlackRow(t,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,r,o,a){const l=this.binarizer.getLuminanceSource().crop(t,r,o,a);return new R(this.binarizer.createBinarizer(l))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class z extends v{static getChecksumInstance(){return new z}}z.kind="ChecksumException";class V{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class W{static arraycopy(t,r,o,a,l){for(;l--;)o[a++]=t[r++]}static currentTimeMillis(){return Date.now()}}class se extends v{}se.kind="IndexOutOfBoundsException";class B extends se{constructor(t=void 0,r=void 0){super(r),this.index=t,this.message=r}}B.kind="ArrayIndexOutOfBoundsException";class k{static fill(t,r){for(let o=0,a=t.length;o<a;o++)t[o]=r}static fillWithin(t,r,o,a){k.rangeCheck(t.length,r,o);for(let l=r;l<o;l++)t[l]=a}static rangeCheck(t,r,o){if(r>o)throw new b("fromIndex("+r+") > toIndex("+o+")");if(r<0)throw new B(r);if(o>t)throw new B(o)}static asList(...t){return t}static create(t,r,o){return Array.from({length:t}).map(l=>Array.from({length:r}).fill(o))}static createInt32Array(t,r,o){return Array.from({length:t}).map(l=>Int32Array.from({length:r}).fill(o))}static equals(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(let o=0,a=t.length;o<a;o++)if(t[o]!==r[o])return!1;return!0}static hashCode(t){if(t===null)return 0;let r=1;for(const o of t)r=31*r+o;return r}static fillUint8Array(t,r){for(let o=0;o!==t.length;o++)t[o]=r}static copyOf(t,r){return t.slice(0,r)}static copyOfUint8Array(t,r){if(t.length<=r){const o=new Uint8Array(r);return o.set(t),o}return t.slice(0,r)}static copyOfRange(t,r,o){const a=o-r,l=new Int32Array(a);return W.arraycopy(t,r,l,0,a),l}static binarySearch(t,r,o){o===void 0&&(o=k.numberComparator);let a=0,l=t.length-1;for(;a<=l;){const h=l+a>>1,p=o(r,t[h]);if(p>0)a=h+1;else if(p<0)l=h-1;else return h}return-a-1}static numberComparator(t,r){return t-r}}class T{static numberOfTrailingZeros(t){let r;if(t===0)return 32;let o=31;return r=t<<16,r!==0&&(o-=16,t=r),r=t<<8,r!==0&&(o-=8,t=r),r=t<<4,r!==0&&(o-=4,t=r),r=t<<2,r!==0&&(o-=2,t=r),o-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,r){return Math.trunc(t/r)}static parseInt(t,r=void 0){return parseInt(t,r)}}T.MIN_VALUE_32_BITS=-2147483648,T.MAX_VALUE=Number.MAX_SAFE_INTEGER;class H{constructor(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=H.makeArray(t):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const r=H.makeArray(t);W.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const r=this.size;if(t>=r)return r;const o=this.bits;let a=Math.floor(t/32),l=o[a];l&=~((1<<(t&31))-1);const h=o.length;for(;l===0;){if(++a===h)return r;l=o[a]}const p=a*32+T.numberOfTrailingZeros(l);return p>r?r:p}getNextUnset(t){const r=this.size;if(t>=r)return r;const o=this.bits;let a=Math.floor(t/32),l=~o[a];l&=~((1<<(t&31))-1);const h=o.length;for(;l===0;){if(++a===h)return r;l=~o[a]}const p=a*32+T.numberOfTrailingZeros(l);return p>r?r:p}setBulk(t,r){this.bits[Math.floor(t/32)]=r}setRange(t,r){if(r<t||t<0||r>this.size)throw new b;if(r===t)return;r--;const o=Math.floor(t/32),a=Math.floor(r/32),l=this.bits;for(let h=o;h<=a;h++){const p=h>o?0:t&31,y=(2<<(h<a?31:r&31))-(1<<p);l[h]|=y}}clear(){const t=this.bits.length,r=this.bits;for(let o=0;o<t;o++)r[o]=0}isRange(t,r,o){if(r<t||t<0||r>this.size)throw new b;if(r===t)return!0;r--;const a=Math.floor(t/32),l=Math.floor(r/32),h=this.bits;for(let p=a;p<=l;p++){const m=p>a?0:t&31,E=(2<<(p<l?31:r&31))-(1<<m)&4294967295;if((h[p]&E)!==(o?E:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,r){if(r<0||r>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let o=r;o>0;o--)this.appendBit((t>>o-1&1)===1)}appendBitArray(t){const r=t.size;this.ensureCapacity(this.size+r);for(let o=0;o<r;o++)this.appendBit(t.get(o))}xor(t){if(this.size!==t.size)throw new b("Sizes don't match");const r=this.bits;for(let o=0,a=r.length;o<a;o++)r[o]^=t.bits[o]}toBytes(t,r,o,a){for(let l=0;l<a;l++){let h=0;for(let p=0;p<8;p++)this.get(t)&&(h|=1<<7-p),t++;r[o+l]=h}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),o=r+1,a=this.bits;for(let l=0;l<o;l++){let h=a[l];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,t[r-l]=h}if(this.size!==o*32){const l=o*32-this.size;let h=t[0]>>>l;for(let p=1;p<o;p++){const m=t[p];h|=m<<32-l,t[p-1]=h,h=m>>>l}t[o-1]=h}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof H))return!1;const r=t;return this.size===r.size&&k.equals(this.bits,r.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let t="";for(let r=0,o=this.size;r<o;r++)r&7||(t+=" "),t+=this.get(r)?"X":".";return t}clone(){return new H(this.size,this.bits.slice())}}var q;(function(N){N[N.OTHER=0]="OTHER",N[N.PURE_BARCODE=1]="PURE_BARCODE",N[N.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",N[N.TRY_HARDER=3]="TRY_HARDER",N[N.CHARACTER_SET=4]="CHARACTER_SET",N[N.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",N[N.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",N[N.ASSUME_GS1=7]="ASSUME_GS1",N[N.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",N[N.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",N[N.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(q||(q={}));var X=q;class U extends v{static getFormatInstance(){return new U}}U.kind="FormatException";var Z;(function(N){N[N.Cp437=0]="Cp437",N[N.ISO8859_1=1]="ISO8859_1",N[N.ISO8859_2=2]="ISO8859_2",N[N.ISO8859_3=3]="ISO8859_3",N[N.ISO8859_4=4]="ISO8859_4",N[N.ISO8859_5=5]="ISO8859_5",N[N.ISO8859_6=6]="ISO8859_6",N[N.ISO8859_7=7]="ISO8859_7",N[N.ISO8859_8=8]="ISO8859_8",N[N.ISO8859_9=9]="ISO8859_9",N[N.ISO8859_10=10]="ISO8859_10",N[N.ISO8859_11=11]="ISO8859_11",N[N.ISO8859_13=12]="ISO8859_13",N[N.ISO8859_14=13]="ISO8859_14",N[N.ISO8859_15=14]="ISO8859_15",N[N.ISO8859_16=15]="ISO8859_16",N[N.SJIS=16]="SJIS",N[N.Cp1250=17]="Cp1250",N[N.Cp1251=18]="Cp1251",N[N.Cp1252=19]="Cp1252",N[N.Cp1256=20]="Cp1256",N[N.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",N[N.UTF8=22]="UTF8",N[N.ASCII=23]="ASCII",N[N.Big5=24]="Big5",N[N.GB18030=25]="GB18030",N[N.EUC_KR=26]="EUC_KR"})(Z||(Z={}));class G{constructor(t,r,o,...a){this.valueIdentifier=t,this.name=o,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=a,G.VALUE_IDENTIFIER_TO_ECI.set(t,this),G.NAME_TO_ECI.set(o,this);const l=this.values;for(let h=0,p=l.length;h!==p;h++){const m=l[h];G.VALUES_TO_ECI.set(m,this)}for(const h of a)G.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new U("incorect value");const r=G.VALUES_TO_ECI.get(t);if(r===void 0)throw new U("incorect value");return r}static getCharacterSetECIByName(t){const r=G.NAME_TO_ECI.get(t);if(r===void 0)throw new U("incorect value");return r}equals(t){if(!(t instanceof G))return!1;const r=t;return this.getName()===r.getName()}}G.VALUE_IDENTIFIER_TO_ECI=new Map,G.VALUES_TO_ECI=new Map,G.NAME_TO_ECI=new Map,G.Cp437=new G(Z.Cp437,Int32Array.from([0,2]),"Cp437"),G.ISO8859_1=new G(Z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),G.ISO8859_2=new G(Z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),G.ISO8859_3=new G(Z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),G.ISO8859_4=new G(Z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),G.ISO8859_5=new G(Z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),G.ISO8859_6=new G(Z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),G.ISO8859_7=new G(Z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),G.ISO8859_8=new G(Z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),G.ISO8859_9=new G(Z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),G.ISO8859_10=new G(Z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),G.ISO8859_11=new G(Z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),G.ISO8859_13=new G(Z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),G.ISO8859_14=new G(Z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),G.ISO8859_15=new G(Z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),G.ISO8859_16=new G(Z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),G.SJIS=new G(Z.SJIS,20,"SJIS","Shift_JIS"),G.Cp1250=new G(Z.Cp1250,21,"Cp1250","windows-1250"),G.Cp1251=new G(Z.Cp1251,22,"Cp1251","windows-1251"),G.Cp1252=new G(Z.Cp1252,23,"Cp1252","windows-1252"),G.Cp1256=new G(Z.Cp1256,24,"Cp1256","windows-1256"),G.UnicodeBigUnmarked=new G(Z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),G.UTF8=new G(Z.UTF8,26,"UTF8","UTF-8"),G.ASCII=new G(Z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),G.Big5=new G(Z.Big5,28,"Big5"),G.GB18030=new G(Z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),G.EUC_KR=new G(Z.EUC_KR,30,"EUC_KR","EUC-KR");class oe extends v{}oe.kind="UnsupportedOperationException";class re{static decode(t,r){const o=this.encodingName(r);return this.customDecoder?this.customDecoder(t,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(t,o):new TextDecoder(o).decode(t)}static shouldDecodeOnFallback(t){return!re.isBrowser()&&t==="ISO-8859-1"}static encode(t,r){const o=this.encodingName(r);return this.customEncoder?this.customEncoder(t,o):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof G?t:G.getCharacterSetECIByName(t)}static decodeFallback(t,r){const o=this.encodingCharacterSet(r);if(re.isDecodeFallbackSupported(o)){let a="";for(let l=0,h=t.length;l<h;l++){let p=t[l].toString(16);p.length<2&&(p="0"+p),a+="%"+p}return decodeURIComponent(a)}if(o.equals(G.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new oe(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(G.UTF8)||t.equals(G.ISO8859_1)||t.equals(G.ASCII)}static encodeFallback(t){const o=btoa(unescape(encodeURIComponent(t))).split(""),a=[];for(let l=0;l<o.length;l++)a.push(o[l].charCodeAt(0));return new Uint8Array(a)}}class de{static castAsNonUtf8Char(t,r=null){const o=r?r.getName():this.ISO88591;return re.decode(new Uint8Array([t]),o)}static guessEncoding(t,r){if(r!=null&&r.get(X.CHARACTER_SET)!==void 0)return r.get(X.CHARACTER_SET).toString();const o=t.length;let a=!0,l=!0,h=!0,p=0,m=0,y=0,E=0,O=0,P=0,j=0,$=0,J=0,ne=0,ue=0;const Ie=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let be=0;be<o&&(a||l||h);be++){const xe=t[be]&255;h&&(p>0?xe&128?p--:h=!1:xe&128&&(xe&64?(p++,xe&32?(p++,xe&16?(p++,xe&8?h=!1:E++):y++):m++):h=!1)),a&&(xe>127&&xe<160?a=!1:xe>159&&(xe<192||xe===215||xe===247)&&ue++),l&&(O>0?xe<64||xe===127||xe>252?l=!1:O--:xe===128||xe===160||xe>239?l=!1:xe>160&&xe<224?(P++,$=0,j++,j>J&&(J=j)):xe>127?(O++,j=0,$++,$>ne&&(ne=$)):(j=0,$=0))}return h&&p>0&&(h=!1),l&&O>0&&(l=!1),h&&(Ie||m+y+E>0)?de.UTF8:l&&(de.ASSUME_SHIFT_JIS||J>=3||ne>=3)?de.SHIFT_JIS:a&&l?J===2&&P===2||ue*10>=o?de.SHIFT_JIS:de.ISO88591:a?de.ISO88591:l?de.SHIFT_JIS:h?de.UTF8:de.PLATFORM_DEFAULT_ENCODING}static format(t,...r){let o=-1;function a(h,p,m,y,E,O){if(h==="%%")return"%";if(r[++o]===void 0)return;h=y?parseInt(y.substr(1)):void 0;let P=E?parseInt(E.substr(1)):void 0,j;switch(O){case"s":j=r[o];break;case"c":j=r[o][0];break;case"f":j=parseFloat(r[o]).toFixed(h);break;case"p":j=parseFloat(r[o]).toPrecision(h);break;case"e":j=parseFloat(r[o]).toExponential(h);break;case"x":j=parseInt(r[o]).toString(P||16);break;case"d":j=parseFloat(parseInt(r[o],P||10).toPrecision(h)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(P);let $=parseInt(m),J=m&&m[0]+""=="0"?"0":" ";for(;j.length<$;)j=p!==void 0?j+J:J+j;return j}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(l,a)}static getBytes(t,r){return re.encode(t,r)}static getCharCode(t,r=0){return t.charCodeAt(r)}static getCharAt(t){return String.fromCharCode(t)}}de.SHIFT_JIS=G.SJIS.getName(),de.GB2312="GB2312",de.ISO88591=G.ISO8859_1.getName(),de.EUC_JP="EUC_JP",de.UTF8=G.UTF8.getName(),de.PLATFORM_DEFAULT_ENCODING=de.UTF8,de.ASSUME_SHIFT_JIS=!1;class ee{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=de.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,r,o){for(let a=r;r<r+o;a++)this.append(t[a]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)}substring(t,r){return this.value.substring(t,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+r.length)}}class le{constructor(t,r,o,a){if(this.width=t,this.height=r,this.rowSize=o,this.bits=a,r==null&&(r=t),this.height=r,t<1||r<1)throw new b("Both dimensions must be greater than 0");o==null&&(o=Math.floor((t+31)/32)),this.rowSize=o,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const r=t.length,o=t[0].length,a=new le(o,r);for(let l=0;l<r;l++){const h=t[l];for(let p=0;p<o;p++)h[p]&&a.set(p,l)}return a}static parseFromString(t,r,o){if(t===null)throw new b("stringRepresentation cannot be null");const a=new Array(t.length);let l=0,h=0,p=-1,m=0,y=0;for(;y<t.length;)if(t.charAt(y)===`
`||t.charAt(y)==="\r"){if(l>h){if(p===-1)p=l-h;else if(l-h!==p)throw new b("row lengths do not match");h=l,m++}y++}else if(t.substring(y,y+r.length)===r)y+=r.length,a[l]=!0,l++;else if(t.substring(y,y+o.length)===o)y+=o.length,a[l]=!1,l++;else throw new b("illegal character encountered: "+t.substring(y));if(l>h){if(p===-1)p=l-h;else if(l-h!==p)throw new b("row lengths do not match");m++}const E=new le(p,m);for(let O=0;O<l;O++)a[O]&&E.set(Math.floor(O%p),Math.floor(O/p));return E}get(t,r){const o=r*this.rowSize+Math.floor(t/32);return(this.bits[o]>>>(t&31)&1)!==0}set(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]|=1<<(t&31)&4294967295}unset(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]&=~(1<<(t&31)&4294967295)}flip(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new b("input matrix dimensions do not match");const r=new H(Math.floor(this.width/32)+1),o=this.rowSize,a=this.bits;for(let l=0,h=this.height;l<h;l++){const p=l*o,m=t.getRow(l,r).getBitArray();for(let y=0;y<o;y++)a[p+y]^=m[y]}}clear(){const t=this.bits,r=t.length;for(let o=0;o<r;o++)t[o]=0}setRegion(t,r,o,a){if(r<0||t<0)throw new b("Left and top must be nonnegative");if(a<1||o<1)throw new b("Height and width must be at least 1");const l=t+o,h=r+a;if(h>this.height||l>this.width)throw new b("The region must fit inside the matrix");const p=this.rowSize,m=this.bits;for(let y=r;y<h;y++){const E=y*p;for(let O=t;O<l;O++)m[E+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(t,r){r==null||r.getSize()<this.width?r=new H(this.width):r.clear();const o=this.rowSize,a=this.bits,l=t*o;for(let h=0;h<o;h++)r.setBulk(h*32,a[l+h]);return r}setRow(t,r){W.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),r=this.getHeight();let o=new H(t),a=new H(t);for(let l=0,h=Math.floor((r+1)/2);l<h;l++)o=this.getRow(l,o),a=this.getRow(r-1-l,a),o.reverse(),a.reverse(),this.setRow(l,a),this.setRow(r-1-l,o)}getEnclosingRectangle(){const t=this.width,r=this.height,o=this.rowSize,a=this.bits;let l=t,h=r,p=-1,m=-1;for(let y=0;y<r;y++)for(let E=0;E<o;E++){const O=a[y*o+E];if(O!==0){if(y<h&&(h=y),y>m&&(m=y),E*32<l){let P=0;for(;!(O<<31-P&4294967295);)P++;E*32+P<l&&(l=E*32+P)}if(E*32+31>p){let P=31;for(;!(O>>>P);)P--;E*32+P>p&&(p=E*32+P)}}}return p<l||m<h?null:Int32Array.from([l,h,p-l+1,m-h+1])}getTopLeftOnBit(){const t=this.rowSize,r=this.bits;let o=0;for(;o<r.length&&r[o]===0;)o++;if(o===r.length)return null;const a=o/t;let l=o%t*32;const h=r[o];let p=0;for(;!(h<<31-p&4294967295);)p++;return l+=p,Int32Array.from([l,a])}getBottomRightOnBit(){const t=this.rowSize,r=this.bits;let o=r.length-1;for(;o>=0&&r[o]===0;)o--;if(o<0)return null;const a=Math.floor(o/t);let l=Math.floor(o%t)*32;const h=r[o];let p=31;for(;!(h>>>p);)p--;return l+=p,Int32Array.from([l,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof le))return!1;const r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&k.equals(this.bits,r.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+k.hashCode(this.bits),t}toString(t="X ",r="  ",o=`
`){return this.buildToString(t,r,o)}buildToString(t,r,o){let a=new ee;for(let l=0,h=this.height;l<h;l++){for(let p=0,m=this.width;p<m;p++)a.append(this.get(p,l)?t:r);a.append(o)}return a.toString()}clone(){return new le(this.width,this.height,this.rowSize,this.bits.slice())}}class Q extends v{static getNotFoundInstance(){return new Q}}Q.kind="NotFoundException";class _e extends V{constructor(t){super(t),this.luminances=_e.EMPTY,this.buckets=new Int32Array(_e.LUMINANCE_BUCKETS)}getBlackRow(t,r){const o=this.getLuminanceSource(),a=o.getWidth();r==null||r.getSize()<a?r=new H(a):r.clear(),this.initArrays(a);const l=o.getRow(t,this.luminances),h=this.buckets;for(let m=0;m<a;m++)h[(l[m]&255)>>_e.LUMINANCE_SHIFT]++;const p=_e.estimateBlackPoint(h);if(a<3)for(let m=0;m<a;m++)(l[m]&255)<p&&r.set(m);else{let m=l[0]&255,y=l[1]&255;for(let E=1;E<a-1;E++){const O=l[E+1]&255;(y*4-m-O)/2<p&&r.set(E),m=y,y=O}}return r}getBlackMatrix(){const t=this.getLuminanceSource(),r=t.getWidth(),o=t.getHeight(),a=new le(r,o);this.initArrays(r);const l=this.buckets;for(let m=1;m<5;m++){const y=Math.floor(o*m/5),E=t.getRow(y,this.luminances),O=Math.floor(r*4/5);for(let P=Math.floor(r/5);P<O;P++){const j=E[P]&255;l[j>>_e.LUMINANCE_SHIFT]++}}const h=_e.estimateBlackPoint(l),p=t.getMatrix();for(let m=0;m<o;m++){const y=m*r;for(let E=0;E<r;E++)(p[y+E]&255)<h&&a.set(E,m)}return a}createBinarizer(t){return new _e(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const r=this.buckets;for(let o=0;o<_e.LUMINANCE_BUCKETS;o++)r[o]=0}static estimateBlackPoint(t){const r=t.length;let o=0,a=0,l=0;for(let E=0;E<r;E++)t[E]>l&&(a=E,l=t[E]),t[E]>o&&(o=t[E]);let h=0,p=0;for(let E=0;E<r;E++){const O=E-a,P=t[E]*O*O;P>p&&(h=E,p=P)}if(a>h){const E=a;a=h,h=E}if(h-a<=r/16)throw new Q;let m=h-1,y=-1;for(let E=h-1;E>a;E--){const O=E-a,P=O*O*(h-E)*(o-t[E]);P>y&&(m=E,y=P)}return m<<_e.LUMINANCE_SHIFT}}_e.LUMINANCE_BITS=5,_e.LUMINANCE_SHIFT=8-_e.LUMINANCE_BITS,_e.LUMINANCE_BUCKETS=1<<_e.LUMINANCE_BITS,_e.EMPTY=Uint8ClampedArray.from([0]);class fe extends _e{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),r=t.getWidth(),o=t.getHeight();if(r>=fe.MINIMUM_DIMENSION&&o>=fe.MINIMUM_DIMENSION){const a=t.getMatrix();let l=r>>fe.BLOCK_SIZE_POWER;r&fe.BLOCK_SIZE_MASK&&l++;let h=o>>fe.BLOCK_SIZE_POWER;o&fe.BLOCK_SIZE_MASK&&h++;const p=fe.calculateBlackPoints(a,l,h,r,o),m=new le(r,o);fe.calculateThresholdForBlock(a,l,h,r,o,p,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new fe(t)}static calculateThresholdForBlock(t,r,o,a,l,h,p){const m=l-fe.BLOCK_SIZE,y=a-fe.BLOCK_SIZE;for(let E=0;E<o;E++){let O=E<<fe.BLOCK_SIZE_POWER;O>m&&(O=m);const P=fe.cap(E,2,o-3);for(let j=0;j<r;j++){let $=j<<fe.BLOCK_SIZE_POWER;$>y&&($=y);const J=fe.cap(j,2,r-3);let ne=0;for(let Ie=-2;Ie<=2;Ie++){const be=h[P+Ie];ne+=be[J-2]+be[J-1]+be[J]+be[J+1]+be[J+2]}const ue=ne/25;fe.thresholdBlock(t,$,O,ue,a,p)}}}static cap(t,r,o){return t<r?r:t>o?o:t}static thresholdBlock(t,r,o,a,l,h){for(let p=0,m=o*l+r;p<fe.BLOCK_SIZE;p++,m+=l)for(let y=0;y<fe.BLOCK_SIZE;y++)(t[m+y]&255)<=a&&h.set(r+y,o+p)}static calculateBlackPoints(t,r,o,a,l){const h=l-fe.BLOCK_SIZE,p=a-fe.BLOCK_SIZE,m=new Array(o);for(let y=0;y<o;y++){m[y]=new Int32Array(r);let E=y<<fe.BLOCK_SIZE_POWER;E>h&&(E=h);for(let O=0;O<r;O++){let P=O<<fe.BLOCK_SIZE_POWER;P>p&&(P=p);let j=0,$=255,J=0;for(let ue=0,Ie=E*a+P;ue<fe.BLOCK_SIZE;ue++,Ie+=a){for(let be=0;be<fe.BLOCK_SIZE;be++){const xe=t[Ie+be]&255;j+=xe,xe<$&&($=xe),xe>J&&(J=xe)}if(J-$>fe.MIN_DYNAMIC_RANGE)for(ue++,Ie+=a;ue<fe.BLOCK_SIZE;ue++,Ie+=a)for(let be=0;be<fe.BLOCK_SIZE;be++)j+=t[Ie+be]&255}let ne=j>>fe.BLOCK_SIZE_POWER*2;if(J-$<=fe.MIN_DYNAMIC_RANGE&&(ne=$/2,y>0&&O>0)){const ue=(m[y-1][O]+2*m[y][O-1]+m[y-1][O-1])/4;$<ue&&(ne=ue)}m[y][O]=ne}}return m}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class te{constructor(t,r){this.width=t,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,r,o,a){throw new oe("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new oe("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new oe("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let r=new ee;for(let o=0;o<this.height;o++){const a=this.getRow(o,t);for(let l=0;l<this.width;l++){const h=a[l]&255;let p;h<64?p="#":h<128?p="+":h<192?p=".":p=" ",r.append(p)}r.append(`
`)}return r.toString()}}class pe extends te{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,r){const o=this.delegate.getRow(t,r),a=this.getWidth();for(let l=0;l<a;l++)o[l]=255-(o[l]&255);return o}getMatrix(){const t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(r);for(let a=0;a<r;a++)o[a]=255-(t[a]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(t,r,o,a){return new pe(this.delegate.crop(t,r,o,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new pe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new pe(this.delegate.rotateCounterClockwise45())}}class ae extends te{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=ae.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return ae.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,r,o){const a=new Uint8ClampedArray(r*o);for(let l=0,h=0,p=t.length;l<p;l+=4,h++){let m;if(t[l+3]===0)m=255;else{const E=t[l],O=t[l+1],P=t[l+2];m=306*E+601*O+117*P+512>>10}a[h]=m}return a}getRow(t,r){if(t<0||t>=this.getHeight())throw new b("Requested row is outside the image: "+t);const o=this.getWidth(),a=t*o;return r===null?r=this.buffer.slice(a,a+o):(r.length<o&&(r=new Uint8ClampedArray(o)),r.set(this.buffer.slice(a,a+o))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,r,o,a){return super.crop(t,r,o,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const r=this.getTempCanvasElement(),o=r.getContext("2d"),a=t*ae.DEGREE_TO_RADIANS,l=this.canvas.width,h=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(a))*l+Math.abs(Math.sin(a))*h),m=Math.ceil(Math.abs(Math.sin(a))*l+Math.abs(Math.cos(a))*h);return r.width=p,r.height=m,o.translate(p/2,m/2),o.rotate(a),o.drawImage(this.canvas,l/-2,h/-2),this.buffer=ae.makeBufferFromCanvasImageData(r),this}invert(){return new pe(this)}}ae.DEGREE_TO_RADIANS=Math.PI/180;class Ae{constructor(t,r,o){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ne=(globalThis||window||self||window||void 0)&&(globalThis||window||self||window||void 0).__awaiter||function(N,t,r,o){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function p(E){try{y(o.next(E))}catch(O){h(O)}}function m(E){try{y(o.throw(E))}catch(O){h(O)}}function y(E){E.done?l(E.value):a(E.value).then(p,m)}y((o=o.apply(N,t||[])).next())})};class Ce{constructor(t,r=500,o){this.reader=t,this.timeBetweenScansMillis=r,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return Ne(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const o of t){const a=o.kind==="video"?"videoinput":o.kind;if(a!=="videoinput")continue;const l=o.deviceId||o.id,h=o.label||`Video device ${r.length+1}`,p=o.groupId,m={deviceId:l,label:h,kind:a,groupId:p};r.push(m)}return r})}getVideoInputDevices(){return Ne(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new Ae(r.deviceId,r.label))})}findDeviceById(t){return Ne(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(o=>o.deviceId===t):null})}decodeFromInputVideoDevice(t,r){return Ne(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,r)})}decodeOnceFromVideoDevice(t,r){return Ne(this,void 0,void 0,function*(){this.reset();let o;t?o={deviceId:{exact:t}}:o={facingMode:"environment"};const a={video:o};return yield this.decodeOnceFromConstraints(a,r)})}decodeOnceFromConstraints(t,r){return Ne(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(o,r)})}decodeOnceFromStream(t,r){return Ne(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(t,r);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(t,r,o){return Ne(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,r,o)})}decodeFromVideoDevice(t,r,o){return Ne(this,void 0,void 0,function*(){let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const l={video:a};return yield this.decodeFromConstraints(l,r,o)})}decodeFromConstraints(t,r,o){return Ne(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(a,r,o)})}decodeFromStream(t,r,o){return Ne(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,r);return yield this.decodeContinuously(a,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,r){return Ne(this,void 0,void 0,function*(){const o=this.prepareVideoElement(r);return this.addVideoSource(o,t),this.videoElement=o,this.stream=t,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(t){return new Promise((r,o)=>this.playVideoOnLoad(t,()=>r()))}playVideoOnLoad(t,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return Ne(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,r){const o=document.getElementById(t);if(!o)throw new S(`element with id '${t}' not found`);if(o.nodeName.toLowerCase()!==r.toLowerCase())throw new S(`element with id '${t}' must be an ${r} element`);return o}decodeFromImage(t,r){if(!t&&!r)throw new S("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)}decodeFromVideo(t,r){if(!t&&!r)throw new S("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,r,o){if(t===void 0&&r===void 0)throw new S("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,o):this.decodeFromVideoElementContinuously(t,o)}decodeFromImageElement(t){if(!t)throw new S("An image element must be provided.");this.reset();const r=this.prepareImageElement(t);this.imageElement=r;let o;return this.isImageLoaded(r)?o=this.decodeOnce(r,!1,!0):o=this._decodeOnLoadImage(r),o}decodeFromVideoElement(t){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(t,r){const o=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(o,r)}_decodeFromVideoElementSetup(t){if(!t)throw new S("A video element must be provided.");this.reset();const r=this.prepareVideoElement(t);return this.videoElement=r,r}decodeFromImageUrl(t){if(!t)throw new S("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const o=this._decodeOnLoadImage(r);return r.src=t,o}decodeFromVideoUrl(t){if(!t)throw new S("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),o=this.decodeFromVideoElement(r);return r.src=t,o}decodeFromVideoUrlContinuously(t,r){if(!t)throw new S("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(o,r);return o.src=t,a}_decodeOnLoadImage(t){return new Promise((r,o)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(r,o),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return Ne(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,r){return Ne(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,r)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r}prepareVideoElement(t){let r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(t,r=!0,o=!0){this._stopAsyncDecode=!1;const a=(l,h)=>{if(this._stopAsyncDecode){h(new Q("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(t);l(p)}catch(p){const m=r&&p instanceof Q,E=(p instanceof z||p instanceof U)&&o;if(m||E)return setTimeout(a,this._timeBetweenDecodingAttempts,l,h);h(p)}};return new Promise((l,h)=>a(l,h))}decodeContinuously(t,r){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(t);r(a,null),setTimeout(o,this.timeBetweenScansMillis)}catch(a){r(null,a);const l=a instanceof z||a instanceof U,h=a instanceof Q;(l||h)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(t){const r=this.createBinaryBitmap(t);return this.decodeBitmap(r)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,r,o){r||(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(t,r,o=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const r=this.getCaptureCanvas(t),o=new ae(r),a=new fe(o);return new R(a)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let o,a;return typeof t<"u"&&(t instanceof HTMLVideoElement?(o=t.videoWidth,a=t.videoHeight):t instanceof HTMLImageElement&&(o=t.naturalWidth||t.width,a=t.naturalHeight||t.height)),r.style.width=o+"px",r.style.height=a+"px",r.width=o,r.height=a,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class ye{constructor(t,r,o=r==null?0:8*r.length,a,l,h=W.currentTimeMillis()){this.text=t,this.rawBytes=r,this.numBits=o,this.resultPoints=a,this.format=l,this.timestamp=h,this.text=t,this.rawBytes=r,o==null?this.numBits=r==null?0:8*r.length:this.numBits=o,this.resultPoints=a,this.format=l,this.resultMetadata=null,h==null?this.timestamp=W.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){const o=new Array(r.length+t.length);W.arraycopy(r,0,o,0,r.length),W.arraycopy(t,0,o,r.length,t.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Re;(function(N){N[N.AZTEC=0]="AZTEC",N[N.CODABAR=1]="CODABAR",N[N.CODE_39=2]="CODE_39",N[N.CODE_93=3]="CODE_93",N[N.CODE_128=4]="CODE_128",N[N.DATA_MATRIX=5]="DATA_MATRIX",N[N.EAN_8=6]="EAN_8",N[N.EAN_13=7]="EAN_13",N[N.ITF=8]="ITF",N[N.MAXICODE=9]="MAXICODE",N[N.PDF_417=10]="PDF_417",N[N.QR_CODE=11]="QR_CODE",N[N.RSS_14=12]="RSS_14",N[N.RSS_EXPANDED=13]="RSS_EXPANDED",N[N.UPC_A=14]="UPC_A",N[N.UPC_E=15]="UPC_E",N[N.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Re||(Re={}));var ge=Re,dt;(function(N){N[N.OTHER=0]="OTHER",N[N.ORIENTATION=1]="ORIENTATION",N[N.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",N[N.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",N[N.ISSUE_NUMBER=4]="ISSUE_NUMBER",N[N.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",N[N.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",N[N.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",N[N.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",N[N.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",N[N.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(dt||(dt={}));var He=dt;class Zn{constructor(t,r,o,a,l=-1,h=-1){this.rawBytes=t,this.text=r,this.byteSegments=o,this.ecLevel=a,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=h,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ln{exp(t){return this.expTable[t]}log(t){if(t===0)throw new b;return this.logTable[t]}static addOrSubtract(t,r){return t^r}}class Mt{constructor(t,r){if(r.length===0)throw new b;this.field=t;const o=r.length;if(o>1&&r[0]===0){let a=1;for(;a<o&&r[a]===0;)a++;a===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-a),W.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const r=this.coefficients;let o;if(t===1){o=0;for(let h=0,p=r.length;h!==p;h++){const m=r[h];o=Ln.addOrSubtract(o,m)}return o}o=r[0];const a=r.length,l=this.field;for(let h=1;h<a;h++)o=Ln.addOrSubtract(l.multiply(t,o),r[h]);return o}addOrSubtract(t){if(!this.field.equals(t.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,o=t.coefficients;if(r.length>o.length){const h=r;r=o,o=h}let a=new Int32Array(o.length);const l=o.length-r.length;W.arraycopy(o,0,a,0,l);for(let h=l;h<o.length;h++)a[h]=Ln.addOrSubtract(r[h-l],o[h]);return new Mt(this.field,a)}multiply(t){if(!this.field.equals(t.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const r=this.coefficients,o=r.length,a=t.coefficients,l=a.length,h=new Int32Array(o+l-1),p=this.field;for(let m=0;m<o;m++){const y=r[m];for(let E=0;E<l;E++)h[m+E]=Ln.addOrSubtract(h[m+E],p.multiply(y,a[E]))}return new Mt(p,h)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const r=this.coefficients.length,o=this.field,a=new Int32Array(r),l=this.coefficients;for(let h=0;h<r;h++)a[h]=o.multiply(l[h],t);return new Mt(o,a)}multiplyByMonomial(t,r){if(t<0)throw new b;if(r===0)return this.field.getZero();const o=this.coefficients,a=o.length,l=new Int32Array(a+t),h=this.field;for(let p=0;p<a;p++)l[p]=h.multiply(o[p],r);return new Mt(h,l)}divide(t){if(!this.field.equals(t.field))throw new b("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new b("Divide by 0");const r=this.field;let o=r.getZero(),a=this;const l=t.getCoefficient(t.getDegree()),h=r.inverse(l);for(;a.getDegree()>=t.getDegree()&&!a.isZero();){const p=a.getDegree()-t.getDegree(),m=r.multiply(a.getCoefficient(a.getDegree()),h),y=t.multiplyByMonomial(p,m),E=r.buildMonomial(p,m);o=o.addOrSubtract(E),a=a.addOrSubtract(y)}return[o,a]}toString(){let t="";for(let r=this.getDegree();r>=0;r--){let o=this.getCoefficient(r);if(o!==0){if(o<0?(t+=" - ",o=-o):t.length>0&&(t+=" + "),r===0||o!==1){const a=this.field.log(o);a===0?t+="1":a===1?t+="a":(t+="a^",t+=a)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t}}class vt extends v{}vt.kind="ArithmeticException";class Xe extends Ln{constructor(t,r,o){super(),this.primitive=t,this.size=r,this.generatorBase=o;const a=new Int32Array(r);let l=1;for(let p=0;p<r;p++)a[p]=l,l*=2,l>=r&&(l^=t,l&=r-1);this.expTable=a;const h=new Int32Array(r);for(let p=0;p<r-1;p++)h[a[p]]=p;this.logTable=h,this.zero=new Mt(this,Int32Array.from([0])),this.one=new Mt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new b;if(r===0)return this.zero;const o=new Int32Array(t+1);return o[0]=r,new Mt(this,o)}inverse(t){if(t===0)throw new vt;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+T.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}Xe.AZTEC_DATA_12=new Xe(4201,4096,1),Xe.AZTEC_DATA_10=new Xe(1033,1024,1),Xe.AZTEC_DATA_6=new Xe(67,64,1),Xe.AZTEC_PARAM=new Xe(19,16,1),Xe.QR_CODE_FIELD_256=new Xe(285,256,0),Xe.DATA_MATRIX_FIELD_256=new Xe(301,256,1),Xe.AZTEC_DATA_8=Xe.DATA_MATRIX_FIELD_256,Xe.MAXICODE_FIELD_64=Xe.AZTEC_DATA_6;class xn extends v{}xn.kind="ReedSolomonException";class Zt extends v{}Zt.kind="IllegalStateException";class Dn{constructor(t){this.field=t}decode(t,r){const o=this.field,a=new Mt(o,t),l=new Int32Array(r);let h=!0;for(let j=0;j<r;j++){const $=a.evaluateAt(o.exp(j+o.getGeneratorBase()));l[l.length-1-j]=$,$!==0&&(h=!1)}if(h)return;const p=new Mt(o,l),m=this.runEuclideanAlgorithm(o.buildMonomial(r,1),p,r),y=m[0],E=m[1],O=this.findErrorLocations(y),P=this.findErrorMagnitudes(E,O);for(let j=0;j<O.length;j++){const $=t.length-1-o.log(O[j]);if($<0)throw new xn("Bad error location");t[$]=Xe.addOrSubtract(t[$],P[j])}}runEuclideanAlgorithm(t,r,o){if(t.getDegree()<r.getDegree()){const j=t;t=r,r=j}const a=this.field;let l=t,h=r,p=a.getZero(),m=a.getOne();for(;h.getDegree()>=(o/2|0);){let j=l,$=p;if(l=h,p=m,l.isZero())throw new xn("r_{i-1} was zero");h=j;let J=a.getZero();const ne=l.getCoefficient(l.getDegree()),ue=a.inverse(ne);for(;h.getDegree()>=l.getDegree()&&!h.isZero();){const Ie=h.getDegree()-l.getDegree(),be=a.multiply(h.getCoefficient(h.getDegree()),ue);J=J.addOrSubtract(a.buildMonomial(Ie,be)),h=h.addOrSubtract(l.multiplyByMonomial(Ie,be))}if(m=J.multiply(p).addOrSubtract($),h.getDegree()>=l.getDegree())throw new Zt("Division algorithm failed to reduce polynomial?")}const y=m.getCoefficient(0);if(y===0)throw new xn("sigmaTilde(0) was zero");const E=a.inverse(y),O=m.multiplyScalar(E),P=h.multiplyScalar(E);return[O,P]}findErrorLocations(t){const r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);const o=new Int32Array(r);let a=0;const l=this.field;for(let h=1;h<l.getSize()&&a<r;h++)t.evaluateAt(h)===0&&(o[a]=l.inverse(h),a++);if(a!==r)throw new xn("Error locator degree does not match number of roots");return o}findErrorMagnitudes(t,r){const o=r.length,a=new Int32Array(o),l=this.field;for(let h=0;h<o;h++){const p=l.inverse(r[h]);let m=1;for(let y=0;y<o;y++)if(h!==y){const E=l.multiply(r[y],p),O=E&1?E&-2:E|1;m=l.multiply(m,O)}a[h]=l.multiply(t.evaluateAt(p),l.inverse(m)),l.getGeneratorBase()!==0&&(a[h]=l.multiply(a[h],p))}return a}}var Be;(function(N){N[N.UPPER=0]="UPPER",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.DIGIT=3]="DIGIT",N[N.PUNCT=4]="PUNCT",N[N.BINARY=5]="BINARY"})(Be||(Be={}));class Ve{decode(t){this.ddata=t;let r=t.getBits(),o=this.extractBits(r),a=this.correctBits(o),l=Ve.convertBoolArrayToByteArray(a),h=Ve.getEncodedData(a),p=new Zn(l,h,null,null);return p.setNumBits(a.length),p}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let r=t.length,o=Be.UPPER,a=Be.UPPER,l="",h=0;for(;h<r;)if(a===Be.BINARY){if(r-h<5)break;let p=Ve.readCode(t,h,5);if(h+=5,p===0){if(r-h<11)break;p=Ve.readCode(t,h,11)+31,h+=11}for(let m=0;m<p;m++){if(r-h<8){h=r;break}const y=Ve.readCode(t,h,8);l+=de.castAsNonUtf8Char(y),h+=8}a=o}else{let p=a===Be.DIGIT?4:5;if(r-h<p)break;let m=Ve.readCode(t,h,p);h+=p;let y=Ve.getCharacter(a,m);y.startsWith("CTRL_")?(o=a,a=Ve.getTable(y.charAt(5)),y.charAt(6)==="L"&&(o=a)):(l+=y,a=o)}return l}static getTable(t){switch(t){case"L":return Be.LOWER;case"P":return Be.PUNCT;case"M":return Be.MIXED;case"D":return Be.DIGIT;case"B":return Be.BINARY;case"U":default:return Be.UPPER}}static getCharacter(t,r){switch(t){case Be.UPPER:return Ve.UPPER_TABLE[r];case Be.LOWER:return Ve.LOWER_TABLE[r];case Be.MIXED:return Ve.MIXED_TABLE[r];case Be.PUNCT:return Ve.PUNCT_TABLE[r];case Be.DIGIT:return Ve.DIGIT_TABLE[r];default:throw new Zt("Bad table")}}correctBits(t){let r,o;this.ddata.getNbLayers()<=2?(o=6,r=Xe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,r=Xe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,r=Xe.AZTEC_DATA_10):(o=12,r=Xe.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),l=t.length/o;if(l<a)throw new U;let h=t.length%o,p=new Int32Array(l);for(let P=0;P<l;P++,h+=o)p[P]=Ve.readCode(t,h,o);try{new Dn(r).decode(p,l-a)}catch(P){throw new U(P)}let m=(1<<o)-1,y=0;for(let P=0;P<a;P++){let j=p[P];if(j===0||j===m)throw new U;(j===1||j===m-1)&&y++}let E=new Array(a*o-y),O=0;for(let P=0;P<a;P++){let j=p[P];if(j===1||j===m-1)E.fill(j>1,O,O+o-1),O+=o-1;else for(let $=o-1;$>=0;--$)E[O++]=(j&1<<$)!==0}return E}extractBits(t){let r=this.ddata.isCompact(),o=this.ddata.getNbLayers(),a=(r?11:14)+o*4,l=new Int32Array(a),h=new Array(this.totalBitsInLayer(o,r));if(r)for(let p=0;p<l.length;p++)l[p]=p;else{let p=a+1+2*T.truncDivision(T.truncDivision(a,2)-1,15),m=a/2,y=T.truncDivision(p,2);for(let E=0;E<m;E++){let O=E+T.truncDivision(E,15);l[m-E-1]=y-O-1,l[m+E]=y+O+1}}for(let p=0,m=0;p<o;p++){let y=(o-p)*4+(r?9:12),E=p*2,O=a-1-E;for(let P=0;P<y;P++){let j=P*2;for(let $=0;$<2;$++)h[m+j+$]=t.get(l[E+$],l[E+P]),h[m+2*y+j+$]=t.get(l[E+P],l[O-$]),h[m+4*y+j+$]=t.get(l[O-$],l[O-P]),h[m+6*y+j+$]=t.get(l[O-P],l[E+$])}m+=y*8}return h}static readCode(t,r,o){let a=0;for(let l=r;l<r+o;l++)a<<=1,t[l]&&(a|=1);return a}static readByte(t,r){let o=t.length-r;return o>=8?Ve.readCode(t,r,8):Ve.readCode(t,r,o)<<8-o}static convertBoolArrayToByteArray(t){let r=new Uint8Array((t.length+7)/8);for(let o=0;o<r.length;o++)r[o]=Ve.readByte(t,8*o);return r}totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}Ve.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ve.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ve.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ve.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ve.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ge{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,r,o,a){const l=t-o,h=r-a;return Math.sqrt(l*l+h*h)}static sum(t){let r=0;for(let o=0,a=t.length;o!==a;o++){const l=t[o];r+=l}return r}}class Gt{static floatToIntBits(t){return t}}Gt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Oe{constructor(t,r){this.x=t,this.y=r}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Oe){const r=t;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Gt.floatToIntBits(this.x)+Gt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const r=this.distance(t[0],t[1]),o=this.distance(t[1],t[2]),a=this.distance(t[0],t[2]);let l,h,p;if(o>=r&&o>=a?(h=t[0],l=t[1],p=t[2]):a>=o&&a>=r?(h=t[1],l=t[0],p=t[2]):(h=t[2],l=t[0],p=t[1]),this.crossProductZ(l,h,p)<0){const m=l;l=p,p=m}t[0]=l,t[1]=h,t[2]=p}static distance(t,r){return Ge.distance(t.x,t.y,r.x,r.y)}static crossProductZ(t,r,o){const a=r.x,l=r.y;return(o.x-a)*(t.y-l)-(o.y-l)*(t.x-a)}}class kt{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class ui extends kt{constructor(t,r,o,a,l){super(t,r),this.compact=o,this.nbDatablocks=a,this.nbLayers=l}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class nn{constructor(t,r,o,a){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=nn.INIT_SIZE),o==null&&(o=t.getWidth()/2|0),a==null&&(a=t.getHeight()/2|0);const l=r/2|0;if(this.leftInit=o-l,this.rightInit=o+l,this.upInit=a-l,this.downInit=a+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Q}detect(){let t=this.leftInit,r=this.rightInit,o=this.upInit,a=this.downInit,l=!1,h=!0,p=!1,m=!1,y=!1,E=!1,O=!1;const P=this.width,j=this.height;for(;h;){h=!1;let $=!0;for(;($||!m)&&r<P;)$=this.containsBlackPoint(o,a,r,!1),$?(r++,h=!0,m=!0):m||r++;if(r>=P){l=!0;break}let J=!0;for(;(J||!y)&&a<j;)J=this.containsBlackPoint(t,r,a,!0),J?(a++,h=!0,y=!0):y||a++;if(a>=j){l=!0;break}let ne=!0;for(;(ne||!E)&&t>=0;)ne=this.containsBlackPoint(o,a,t,!1),ne?(t--,h=!0,E=!0):E||t--;if(t<0){l=!0;break}let ue=!0;for(;(ue||!O)&&o>=0;)ue=this.containsBlackPoint(t,r,o,!0),ue?(o--,h=!0,O=!0):O||o--;if(o<0){l=!0;break}h&&(p=!0)}if(!l&&p){const $=r-t;let J=null;for(let be=1;J===null&&be<$;be++)J=this.getBlackPointOnSegment(t,a-be,t+be,a);if(J==null)throw new Q;let ne=null;for(let be=1;ne===null&&be<$;be++)ne=this.getBlackPointOnSegment(t,o+be,t+be,o);if(ne==null)throw new Q;let ue=null;for(let be=1;ue===null&&be<$;be++)ue=this.getBlackPointOnSegment(r,o+be,r-be,o);if(ue==null)throw new Q;let Ie=null;for(let be=1;Ie===null&&be<$;be++)Ie=this.getBlackPointOnSegment(r,a-be,r-be,a);if(Ie==null)throw new Q;return this.centerEdges(Ie,J,ue,ne)}else throw new Q}getBlackPointOnSegment(t,r,o,a){const l=Ge.round(Ge.distance(t,r,o,a)),h=(o-t)/l,p=(a-r)/l,m=this.image;for(let y=0;y<l;y++){const E=Ge.round(t+y*h),O=Ge.round(r+y*p);if(m.get(E,O))return new Oe(E,O)}return null}centerEdges(t,r,o,a){const l=t.getX(),h=t.getY(),p=r.getX(),m=r.getY(),y=o.getX(),E=o.getY(),O=a.getX(),P=a.getY(),j=nn.CORR;return l<this.width/2?[new Oe(O-j,P+j),new Oe(p+j,m+j),new Oe(y-j,E-j),new Oe(l+j,h-j)]:[new Oe(O+j,P+j),new Oe(p+j,m-j),new Oe(y-j,E+j),new Oe(l-j,h-j)]}containsBlackPoint(t,r,o,a){const l=this.image;if(a){for(let h=t;h<=r;h++)if(l.get(h,o))return!0}else for(let h=t;h<=r;h++)if(l.get(o,h))return!0;return!1}}nn.INIT_SIZE=10,nn.CORR=1;class Rr{static checkAndNudgePoints(t,r){const o=t.getWidth(),a=t.getHeight();let l=!0;for(let h=0;h<r.length&&l;h+=2){const p=Math.floor(r[h]),m=Math.floor(r[h+1]);if(p<-1||p>o||m<-1||m>a)throw new Q;l=!1,p===-1?(r[h]=0,l=!0):p===o&&(r[h]=o-1,l=!0),m===-1?(r[h+1]=0,l=!0):m===a&&(r[h+1]=a-1,l=!0)}l=!0;for(let h=r.length-2;h>=0&&l;h-=2){const p=Math.floor(r[h]),m=Math.floor(r[h+1]);if(p<-1||p>o||m<-1||m>a)throw new Q;l=!1,p===-1?(r[h]=0,l=!0):p===o&&(r[h]=o-1,l=!0),m===-1?(r[h+1]=0,l=!0):m===a&&(r[h+1]=a-1,l=!0)}}}class bt{constructor(t,r,o,a,l,h,p,m,y){this.a11=t,this.a21=r,this.a31=o,this.a12=a,this.a22=l,this.a32=h,this.a13=p,this.a23=m,this.a33=y}static quadrilateralToQuadrilateral(t,r,o,a,l,h,p,m,y,E,O,P,j,$,J,ne){const ue=bt.quadrilateralToSquare(t,r,o,a,l,h,p,m);return bt.squareToQuadrilateral(y,E,O,P,j,$,J,ne).times(ue)}transformPoints(t){const r=t.length,o=this.a11,a=this.a12,l=this.a13,h=this.a21,p=this.a22,m=this.a23,y=this.a31,E=this.a32,O=this.a33;for(let P=0;P<r;P+=2){const j=t[P],$=t[P+1],J=l*j+m*$+O;t[P]=(o*j+h*$+y)/J,t[P+1]=(a*j+p*$+E)/J}}transformPointsWithValues(t,r){const o=this.a11,a=this.a12,l=this.a13,h=this.a21,p=this.a22,m=this.a23,y=this.a31,E=this.a32,O=this.a33,P=t.length;for(let j=0;j<P;j++){const $=t[j],J=r[j],ne=l*$+m*J+O;t[j]=(o*$+h*J+y)/ne,r[j]=(a*$+p*J+E)/ne}}static squareToQuadrilateral(t,r,o,a,l,h,p,m){const y=t-o+l-p,E=r-a+h-m;if(y===0&&E===0)return new bt(o-t,l-o,t,a-r,h-a,r,0,0,1);{const O=o-l,P=p-l,j=a-h,$=m-h,J=O*$-P*j,ne=(y*$-P*E)/J,ue=(O*E-y*j)/J;return new bt(o-t+ne*o,p-t+ue*p,t,a-r+ne*a,m-r+ue*m,r,ne,ue,1)}}static quadrilateralToSquare(t,r,o,a,l,h,p,m){return bt.squareToQuadrilateral(t,r,o,a,l,h,p,m).buildAdjoint()}buildAdjoint(){return new bt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new bt(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class pr extends Rr{sampleGrid(t,r,o,a,l,h,p,m,y,E,O,P,j,$,J,ne,ue,Ie,be){const xe=bt.quadrilateralToQuadrilateral(a,l,h,p,m,y,E,O,P,j,$,J,ne,ue,Ie,be);return this.sampleGridWithTransform(t,r,o,xe)}sampleGridWithTransform(t,r,o,a){if(r<=0||o<=0)throw new Q;const l=new le(r,o),h=new Float32Array(2*r);for(let p=0;p<o;p++){const m=h.length,y=p+.5;for(let E=0;E<m;E+=2)h[E]=E/2+.5,h[E+1]=y;a.transformPoints(h),Rr.checkAndNudgePoints(t,h);try{for(let E=0;E<m;E+=2)t.get(Math.floor(h[E]),Math.floor(h[E+1]))&&l.set(E/2,p)}catch{throw new Q}}return l}}class Gn{static setGridSampler(t){Gn.gridSampler=t}static getInstance(){return Gn.gridSampler}}Gn.gridSampler=new pr;class rn{constructor(t,r){this.x=t,this.y=r}toResultPoint(){return new Oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Xr{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let r=this.getMatrixCenter(),o=this.getBullsEyeCorners(r);if(t){let h=o[0];o[0]=o[2],o[2]=h}this.extractParameters(o);let a=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),l=this.getMatrixCornerPoints(o);return new ui(a,l,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new Q;let r=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(o,r);let a=0;for(let h=0;h<4;h++){let p=o[(this.shift+h)%4];this.compact?(a<<=7,a+=p>>1&127):(a<<=10,a+=(p>>2&992)+(p>>1&31))}let l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)}getRotation(t,r){let o=0;t.forEach((a,l,h)=>{let p=(a>>r-2<<1)+(a&1);o=(o<<3)+p}),o=((o&1)<<11)+(o>>1);for(let a=0;a<4;a++)if(T.bitCount(o^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new Q}getCorrectedParameterData(t,r){let o,a;r?(o=7,a=2):(o=10,a=4);let l=o-a,h=new Int32Array(o);for(let m=o-1;m>=0;--m)h[m]=t&15,t>>=4;try{new Dn(Xe.AZTEC_PARAM).decode(h,l)}catch{throw new Q}let p=0;for(let m=0;m<a;m++)p=(p<<4)+h[m];return p}getBullsEyeCorners(t){let r=t,o=t,a=t,l=t,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(r,h,1,-1),P=this.getFirstDifferent(o,h,1,1),j=this.getFirstDifferent(a,h,-1,1),$=this.getFirstDifferent(l,h,-1,-1);if(this.nbCenterLayers>2){let J=this.distancePoint($,O)*this.nbCenterLayers/(this.distancePoint(l,r)*(this.nbCenterLayers+2));if(J<.75||J>1.25||!this.isWhiteOrBlackRectangle(O,P,j,$))break}r=O,o=P,a=j,l=$,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Q;this.compact=this.nbCenterLayers===5;let p=new Oe(r.getX()+.5,r.getY()-.5),m=new Oe(o.getX()+.5,o.getY()+.5),y=new Oe(a.getX()-.5,a.getY()+.5),E=new Oe(l.getX()-.5,l.getY()-.5);return this.expandSquare([p,m,y,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,r,o,a;try{let p=new nn(this.image).detect();t=p[0],r=p[1],o=p[2],a=p[3]}catch{let m=this.image.getWidth()/2,y=this.image.getHeight()/2;t=this.getFirstDifferent(new rn(m+7,y-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new rn(m+7,y+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new rn(m-7,y+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new rn(m-7,y-7),!1,-1,-1).toResultPoint()}let l=Ge.round((t.getX()+a.getX()+r.getX()+o.getX())/4),h=Ge.round((t.getY()+a.getY()+r.getY()+o.getY())/4);try{let p=new nn(this.image,15,l,h).detect();t=p[0],r=p[1],o=p[2],a=p[3]}catch{t=this.getFirstDifferent(new rn(l+7,h-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new rn(l+7,h+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new rn(l-7,h+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new rn(l-7,h-7),!1,-1,-1).toResultPoint()}return l=Ge.round((t.getX()+a.getX()+r.getX()+o.getX())/4),h=Ge.round((t.getY()+a.getY()+r.getY()+o.getY())/4),new rn(l,h)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,r,o,a,l){let h=Gn.getInstance(),p=this.getDimension(),m=p/2-this.nbCenterLayers,y=p/2+this.nbCenterLayers;return h.sampleGrid(t,p,p,m,m,y,m,y,y,m,y,r.getX(),r.getY(),o.getX(),o.getY(),a.getX(),a.getY(),l.getX(),l.getY())}sampleLine(t,r,o){let a=0,l=this.distanceResultPoint(t,r),h=l/o,p=t.getX(),m=t.getY(),y=h*(r.getX()-t.getX())/l,E=h*(r.getY()-t.getY())/l;for(let O=0;O<o;O++)this.image.get(Ge.round(p+O*y),Ge.round(m+O*E))&&(a|=1<<o-O-1);return a}isWhiteOrBlackRectangle(t,r,o,a){let l=3;t=new rn(t.getX()-l,t.getY()+l),r=new rn(r.getX()-l,r.getY()-l),o=new rn(o.getX()+l,o.getY()-l),a=new rn(a.getX()+l,a.getY()+l);let h=this.getColor(a,t);if(h===0)return!1;let p=this.getColor(t,r);return p!==h||(p=this.getColor(r,o),p!==h)?!1:(p=this.getColor(o,a),p===h)}getColor(t,r){let o=this.distancePoint(t,r),a=(r.getX()-t.getX())/o,l=(r.getY()-t.getY())/o,h=0,p=t.getX(),m=t.getY(),y=this.image.get(t.getX(),t.getY()),E=Math.ceil(o);for(let P=0;P<E;P++)p+=a,m+=l,this.image.get(Ge.round(p),Ge.round(m))!==y&&h++;let O=h/o;return O>.1&&O<.9?0:O<=.1===y?1:-1}getFirstDifferent(t,r,o,a){let l=t.getX()+o,h=t.getY()+a;for(;this.isValid(l,h)&&this.image.get(l,h)===r;)l+=o,h+=a;for(l-=o,h-=a;this.isValid(l,h)&&this.image.get(l,h)===r;)l+=o;for(l-=o;this.isValid(l,h)&&this.image.get(l,h)===r;)h+=a;return h-=a,new rn(l,h)}expandSquare(t,r,o){let a=o/(2*r),l=t[0].getX()-t[2].getX(),h=t[0].getY()-t[2].getY(),p=(t[0].getX()+t[2].getX())/2,m=(t[0].getY()+t[2].getY())/2,y=new Oe(p+a*l,m+a*h),E=new Oe(p-a*l,m-a*h);l=t[1].getX()-t[3].getX(),h=t[1].getY()-t[3].getY(),p=(t[1].getX()+t[3].getX())/2,m=(t[1].getY()+t[3].getY())/2;let O=new Oe(p+a*l,m+a*h),P=new Oe(p-a*l,m-a*h);return[y,O,E,P]}isValid(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(t){let r=Ge.round(t.getX()),o=Ge.round(t.getY());return this.isValid(r,o)}distancePoint(t,r){return Ge.distance(t.getX(),t.getY(),r.getX(),r.getY())}distanceResultPoint(t,r){return Ge.distance(t.getX(),t.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(T.truncDivision(this.nbLayers-4,8)+1)+15}}class qt{decode(t,r=null){let o=null,a=new Xr(t.getBlackMatrix()),l=null,h=null;try{let E=a.detectMirror(!1);l=E.getPoints(),this.reportFoundResultPoints(r,l),h=new Ve().decode(E)}catch(E){o=E}if(h==null)try{let E=a.detectMirror(!0);l=E.getPoints(),this.reportFoundResultPoints(r,l),h=new Ve().decode(E)}catch(E){throw o??E}let p=new ye(h.getText(),h.getRawBytes(),h.getNumBits(),l,ge.AZTEC,W.currentTimeMillis()),m=h.getByteSegments();m!=null&&p.putMetadata(He.BYTE_SEGMENTS,m);let y=h.getECLevel();return y!=null&&p.putMetadata(He.ERROR_CORRECTION_LEVEL,y),p}reportFoundResultPoints(t,r){if(t!=null){let o=t.get(X.NEED_RESULT_POINT_CALLBACK);o!=null&&r.forEach((a,l,h)=>{o.foundPossibleResultPoint(a)})}}reset(){}}class gr extends Ce{constructor(t=500){super(new qt,t)}}class Ct{decode(t,r){try{return this.doDecode(t,r)}catch{if(r&&r.get(X.TRY_HARDER)===!0&&t.isRotateSupported()){const l=t.rotateCounterClockwise(),h=this.doDecode(l,r),p=h.getResultMetadata();let m=270;p!==null&&p.get(He.ORIENTATION)===!0&&(m=m+p.get(He.ORIENTATION)%360),h.putMetadata(He.ORIENTATION,m);const y=h.getResultPoints();if(y!==null){const E=l.getHeight();for(let O=0;O<y.length;O++)y[O]=new Oe(E-y[O].getY()-1,y[O].getX())}return h}else throw new Q}}reset(){}doDecode(t,r){const o=t.getWidth(),a=t.getHeight();let l=new H(o);const h=r&&r.get(X.TRY_HARDER)===!0,p=Math.max(1,a>>(h?8:5));let m;h?m=a:m=15;const y=Math.trunc(a/2);for(let E=0;E<m;E++){const O=Math.trunc((E+1)/2),P=(E&1)===0,j=y+p*(P?O:-O);if(j<0||j>=a)break;try{l=t.getBlackRow(j,l)}catch{continue}for(let $=0;$<2;$++){if($===1&&(l.reverse(),r&&r.get(X.NEED_RESULT_POINT_CALLBACK)===!0)){const J=new Map;r.forEach((ne,ue)=>J.set(ue,ne)),J.delete(X.NEED_RESULT_POINT_CALLBACK),r=J}try{const J=this.decodeRow(j,l,r);if($===1){J.putMetadata(He.ORIENTATION,180);const ne=J.getResultPoints();ne!==null&&(ne[0]=new Oe(o-ne[0].getX()-1,ne[0].getY()),ne[1]=new Oe(o-ne[1].getX()-1,ne[1].getY()))}return J}catch{}}}throw new Q}static recordPattern(t,r,o){const a=o.length;for(let y=0;y<a;y++)o[y]=0;const l=t.getSize();if(r>=l)throw new Q;let h=!t.get(r),p=0,m=r;for(;m<l;){if(t.get(m)!==h)o[p]++;else{if(++p===a)break;o[p]=1,h=!h}m++}if(!(p===a||p===a-1&&m===l))throw new Q}static recordPatternInReverse(t,r,o){let a=o.length,l=t.get(r);for(;r>0&&a>=0;)t.get(--r)!==l&&(a--,l=!l);if(a>=0)throw new Q;Ct.recordPattern(t,r+1,o)}static patternMatchVariance(t,r,o){const a=t.length;let l=0,h=0;for(let y=0;y<a;y++)l+=t[y],h+=r[y];if(l<h)return Number.POSITIVE_INFINITY;const p=l/h;o*=p;let m=0;for(let y=0;y<a;y++){const E=t[y],O=r[y]*p,P=E>O?E-O:O-E;if(P>o)return Number.POSITIVE_INFINITY;m+=P}return m/l}}class Se extends Ct{static findStartPattern(t){const r=t.getSize(),o=t.getNextSet(0);let a=0,l=Int32Array.from([0,0,0,0,0,0]),h=o,p=!1;const m=6;for(let y=o;y<r;y++)if(t.get(y)!==p)l[a]++;else{if(a===m-1){let E=Se.MAX_AVG_VARIANCE,O=-1;for(let P=Se.CODE_START_A;P<=Se.CODE_START_C;P++){const j=Ct.patternMatchVariance(l,Se.CODE_PATTERNS[P],Se.MAX_INDIVIDUAL_VARIANCE);j<E&&(E=j,O=P)}if(O>=0&&t.isRange(Math.max(0,h-(y-h)/2),h,!1))return Int32Array.from([h,y,O]);h+=l[0]+l[1],l=l.slice(2,l.length-1),l[a-1]=0,l[a]=0,a--}else a++;l[a]=1,p=!p}throw new Q}static decodeCode(t,r,o){Ct.recordPattern(t,o,r);let a=Se.MAX_AVG_VARIANCE,l=-1;for(let h=0;h<Se.CODE_PATTERNS.length;h++){const p=Se.CODE_PATTERNS[h],m=this.patternMatchVariance(r,p,Se.MAX_INDIVIDUAL_VARIANCE);m<a&&(a=m,l=h)}if(l>=0)return l;throw new Q}decodeRow(t,r,o){const a=o&&o.get(X.ASSUME_GS1)===!0,l=Se.findStartPattern(r),h=l[2];let p=0;const m=new Uint8Array(20);m[p++]=h;let y;switch(h){case Se.CODE_START_A:y=Se.CODE_CODE_A;break;case Se.CODE_START_B:y=Se.CODE_CODE_B;break;case Se.CODE_START_C:y=Se.CODE_CODE_C;break;default:throw new U}let E=!1,O=!1,P="",j=l[0],$=l[1];const J=Int32Array.from([0,0,0,0,0,0]);let ne=0,ue=0,Ie=h,be=0,xe=!0,rt=!1,et=!1;for(;!E;){const jr=O;switch(O=!1,ne=ue,ue=Se.decodeCode(r,J,$),m[p++]=ue,ue!==Se.CODE_STOP&&(xe=!0),ue!==Se.CODE_STOP&&(be++,Ie+=be*ue),j=$,$+=J.reduce((ku,Qi)=>ku+Qi,0),ue){case Se.CODE_START_A:case Se.CODE_START_B:case Se.CODE_START_C:throw new U}switch(y){case Se.CODE_CODE_A:if(ue<64)et===rt?P+=String.fromCharCode(32+ue):P+=String.fromCharCode(32+ue+128),et=!1;else if(ue<96)et===rt?P+=String.fromCharCode(ue-64):P+=String.fromCharCode(ue+64),et=!1;else switch(ue!==Se.CODE_STOP&&(xe=!1),ue){case Se.CODE_FNC_1:a&&(P.length===0?P+="]C1":P+="");break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_A:!rt&&et?(rt=!0,et=!1):rt&&et?(rt=!1,et=!1):et=!0;break;case Se.CODE_SHIFT:O=!0,y=Se.CODE_CODE_B;break;case Se.CODE_CODE_B:y=Se.CODE_CODE_B;break;case Se.CODE_CODE_C:y=Se.CODE_CODE_C;break;case Se.CODE_STOP:E=!0;break}break;case Se.CODE_CODE_B:if(ue<96)et===rt?P+=String.fromCharCode(32+ue):P+=String.fromCharCode(32+ue+128),et=!1;else switch(ue!==Se.CODE_STOP&&(xe=!1),ue){case Se.CODE_FNC_1:a&&(P.length===0?P+="]C1":P+="");break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_B:!rt&&et?(rt=!0,et=!1):rt&&et?(rt=!1,et=!1):et=!0;break;case Se.CODE_SHIFT:O=!0,y=Se.CODE_CODE_A;break;case Se.CODE_CODE_A:y=Se.CODE_CODE_A;break;case Se.CODE_CODE_C:y=Se.CODE_CODE_C;break;case Se.CODE_STOP:E=!0;break}break;case Se.CODE_CODE_C:if(ue<100)ue<10&&(P+="0"),P+=ue;else switch(ue!==Se.CODE_STOP&&(xe=!1),ue){case Se.CODE_FNC_1:a&&(P.length===0?P+="]C1":P+="");break;case Se.CODE_CODE_A:y=Se.CODE_CODE_A;break;case Se.CODE_CODE_B:y=Se.CODE_CODE_B;break;case Se.CODE_STOP:E=!0;break}break}jr&&(y=y===Se.CODE_CODE_A?Se.CODE_CODE_B:Se.CODE_CODE_A)}const jt=$-j;if($=r.getNextUnset($),!r.isRange($,Math.min(r.getSize(),$+($-j)/2),!1))throw new Q;if(Ie-=be*ne,Ie%103!==ne)throw new z;const Fn=P.length;if(Fn===0)throw new Q;Fn>0&&xe&&(y===Se.CODE_CODE_C?P=P.substring(0,Fn-2):P=P.substring(0,Fn-1));const jn=(l[1]+l[0])/2,_t=j+jt/2,Cn=m.length,zn=new Uint8Array(Cn);for(let jr=0;jr<Cn;jr++)zn[jr]=m[jr];const Ki=[new Oe(jn,t),new Oe(_t,t)];return new ye(P,zn,0,Ki,ge.CODE_128,new Date().getTime())}}Se.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Se.MAX_AVG_VARIANCE=.25,Se.MAX_INDIVIDUAL_VARIANCE=.7,Se.CODE_SHIFT=98,Se.CODE_CODE_C=99,Se.CODE_CODE_B=100,Se.CODE_CODE_A=101,Se.CODE_FNC_1=102,Se.CODE_FNC_2=97,Se.CODE_FNC_3=96,Se.CODE_FNC_4_A=101,Se.CODE_FNC_4_B=100,Se.CODE_START_A=103,Se.CODE_START_B=104,Se.CODE_START_C=105,Se.CODE_STOP=106;class wt extends Ct{constructor(t=!1,r=!1){super(),this.usingCheckDigit=t,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,r,o){let a=this.counters;a.fill(0),this.decodeRowResult="";let l=wt.findAsteriskPattern(r,a),h=r.getNextSet(l[1]),p=r.getSize(),m,y;do{wt.recordPattern(r,h,a);let J=wt.toNarrowWidePattern(a);if(J<0)throw new Q;m=wt.patternToChar(J),this.decodeRowResult+=m,y=h;for(let ne of a)h+=ne;h=r.getNextSet(h)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let J of a)E+=J;let O=h-y-E;if(h!==p&&O*2<E)throw new Q;if(this.usingCheckDigit){let J=this.decodeRowResult.length-1,ne=0;for(let ue=0;ue<J;ue++)ne+=wt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ue));if(this.decodeRowResult.charAt(J)!==wt.ALPHABET_STRING.charAt(ne%43))throw new z;this.decodeRowResult=this.decodeRowResult.substring(0,J)}if(this.decodeRowResult.length===0)throw new Q;let P;this.extendedMode?P=wt.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;let j=(l[1]+l[0])/2,$=y+E/2;return new ye(P,null,0,[new Oe(j,t),new Oe($,t)],ge.CODE_39,new Date().getTime())}static findAsteriskPattern(t,r){let o=t.getSize(),a=t.getNextSet(0),l=0,h=a,p=!1,m=r.length;for(let y=a;y<o;y++)if(t.get(y)!==p)r[l]++;else{if(l===m-1){if(this.toNarrowWidePattern(r)===wt.ASTERISK_ENCODING&&t.isRange(Math.max(0,h-Math.floor((y-h)/2)),h,!1))return[h,y];h+=r[0]+r[1],r.copyWithin(0,2,2+l-1),r[l-1]=0,r[l]=0,l--}else l++;r[l]=1,p=!p}throw new Q}static toNarrowWidePattern(t){let r=t.length,o=0,a;do{let l=2147483647;for(let m of t)m<l&&m>o&&(l=m);o=l,a=0;let h=0,p=0;for(let m=0;m<r;m++){let y=t[m];y>o&&(p|=1<<r-1-m,a++,h+=y)}if(a===3){for(let m=0;m<r&&a>0;m++){let y=t[m];if(y>o&&(a--,y*2>=h))return-1}return p}}while(a>3);return-1}static patternToChar(t){for(let r=0;r<wt.CHARACTER_ENCODINGS.length;r++)if(wt.CHARACTER_ENCODINGS[r]===t)return wt.ALPHABET_STRING.charAt(r);if(t===wt.ASTERISK_ENCODING)return"*";throw new Q}static decodeExtended(t){let r=t.length,o="";for(let a=0;a<r;a++){let l=t.charAt(a);if(l==="+"||l==="$"||l==="%"||l==="/"){let h=t.charAt(a+1),p="\0";switch(l){case"+":if(h>="A"&&h<="Z")p=String.fromCharCode(h.charCodeAt(0)+32);else throw new U;break;case"$":if(h>="A"&&h<="Z")p=String.fromCharCode(h.charCodeAt(0)-64);else throw new U;break;case"%":if(h>="A"&&h<="E")p=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")p=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")p=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")p=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")p="\0";else if(h==="V")p="@";else if(h==="W")p="`";else if(h==="X"||h==="Y"||h==="Z")p="";else throw new U;break;case"/":if(h>="A"&&h<="O")p=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")p=":";else throw new U;break}o+=p,a++}else o+=l}return o}}wt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",wt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],wt.ASTERISK_ENCODING=148;class Qe extends Ct{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,r,o){let a=this.decodeStart(r),l=this.decodeEnd(r),h=new ee;Qe.decodeMiddle(r,a[1],l[0],h);let p=h.toString(),m=null;o!=null&&(m=o.get(X.ALLOWED_LENGTHS)),m==null&&(m=Qe.DEFAULT_ALLOWED_LENGTHS);let y=p.length,E=!1,O=0;for(let $ of m){if(y===$){E=!0;break}$>O&&(O=$)}if(!E&&y>O&&(E=!0),!E)throw new U;const P=[new Oe(a[1],t),new Oe(l[0],t)];return new ye(p,null,0,P,ge.ITF,new Date().getTime())}static decodeMiddle(t,r,o,a){let l=new Int32Array(10),h=new Int32Array(5),p=new Int32Array(5);for(l.fill(0),h.fill(0),p.fill(0);r<o;){Ct.recordPattern(t,r,l);for(let y=0;y<5;y++){let E=2*y;h[y]=l[E],p[y]=l[E+1]}let m=Qe.decodeDigit(h);a.append(m.toString()),m=this.decodeDigit(p),a.append(m.toString()),l.forEach(function(y){r+=y})}}decodeStart(t){let r=Qe.skipWhiteSpace(t),o=Qe.findGuardPattern(t,r,Qe.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(t,o[0]),o}validateQuietZone(t,r){let o=this.narrowLineWidth*10;o=o<r?o:r;for(let a=r-1;o>0&&a>=0&&!t.get(a);a--)o--;if(o!==0)throw new Q}static skipWhiteSpace(t){const r=t.getSize(),o=t.getNextSet(0);if(o===r)throw new Q;return o}decodeEnd(t){t.reverse();try{let r=Qe.skipWhiteSpace(t),o;try{o=Qe.findGuardPattern(t,r,Qe.END_PATTERN_REVERSED[0])}catch(l){l instanceof Q&&(o=Qe.findGuardPattern(t,r,Qe.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,o[0]);let a=o[0];return o[0]=t.getSize()-o[1],o[1]=t.getSize()-a,o}finally{t.reverse()}}static findGuardPattern(t,r,o){let a=o.length,l=new Int32Array(a),h=t.getSize(),p=!1,m=0,y=r;l.fill(0);for(let E=r;E<h;E++)if(t.get(E)!==p)l[m]++;else{if(m===a-1){if(Ct.patternMatchVariance(l,o,Qe.MAX_INDIVIDUAL_VARIANCE)<Qe.MAX_AVG_VARIANCE)return[y,E];y+=l[0]+l[1],W.arraycopy(l,2,l,0,m-1),l[m-1]=0,l[m]=0,m--}else m++;l[m]=1,p=!p}throw new Q}static decodeDigit(t){let r=Qe.MAX_AVG_VARIANCE,o=-1,a=Qe.PATTERNS.length;for(let l=0;l<a;l++){let h=Qe.PATTERNS[l],p=Ct.patternMatchVariance(t,h,Qe.MAX_INDIVIDUAL_VARIANCE);p<r?(r=p,o=l):p===r&&(o=-1)}if(o>=0)return o%10;throw new Q}}Qe.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Qe.MAX_AVG_VARIANCE=.38,Qe.MAX_INDIVIDUAL_VARIANCE=.5,Qe.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Qe.START_PATTERN=Int32Array.from([1,1,1,1]),Qe.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ye extends Ct{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r=!1,o,a=0,l=Int32Array.from([0,0,0]);for(;!r;){l=Int32Array.from([0,0,0]),o=Ye.findGuardPattern(t,a,!1,this.START_END_PATTERN,l);let h=o[0];a=o[1];let p=h-(a-h);p>=0&&(r=t.isRange(p,h,!1))}return o}static checkChecksum(t){return Ye.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let o=parseInt(t.charAt(r-1),10);return Ye.getStandardUPCEANChecksum(t.substring(0,r-1))===o}static getStandardUPCEANChecksum(t){let r=t.length,o=0;for(let a=r-1;a>=0;a-=2){let l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new U;o+=l}o*=3;for(let a=r-2;a>=0;a-=2){let l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new U;o+=l}return(1e3-o)%10}static decodeEnd(t,r){return Ye.findGuardPattern(t,r,!1,Ye.START_END_PATTERN,new Int32Array(Ye.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,o,a){return this.findGuardPattern(t,r,o,a,new Int32Array(a.length))}static findGuardPattern(t,r,o,a,l){let h=t.getSize();r=o?t.getNextUnset(r):t.getNextSet(r);let p=0,m=r,y=a.length,E=o;for(let O=r;O<h;O++)if(t.get(O)!==E)l[p]++;else{if(p===y-1){if(Ct.patternMatchVariance(l,a,Ye.MAX_INDIVIDUAL_VARIANCE)<Ye.MAX_AVG_VARIANCE)return Int32Array.from([m,O]);m+=l[0]+l[1];let P=l.slice(2,l.length-1);for(let j=0;j<p-1;j++)l[j]=P[j];l[p-1]=0,l[p]=0,p--}else p++;l[p]=1,E=!E}throw new Q}static decodeDigit(t,r,o,a){this.recordPattern(t,o,r);let l=this.MAX_AVG_VARIANCE,h=-1,p=a.length;for(let m=0;m<p;m++){let y=a[m],E=Ct.patternMatchVariance(r,y,Ye.MAX_INDIVIDUAL_VARIANCE);E<l&&(l=E,h=m)}if(h>=0)return h;throw new Q}}Ye.MAX_AVG_VARIANCE=.48,Ye.MAX_INDIVIDUAL_VARIANCE=.7,Ye.START_END_PATTERN=Int32Array.from([1,1,1]),Ye.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ye.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ye.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class sn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,o){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(r,o,a),h=a.toString(),p=sn.parseExtensionString(h),m=[new Oe((o[0]+o[1])/2,t),new Oe(l,t)],y=new ye(h,null,0,m,ge.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&y.putAllMetadata(p),y}decodeMiddle(t,r,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),h=r[1],p=0;for(let y=0;y<5&&h<l;y++){let E=Ye.decodeDigit(t,a,h,Ye.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let O of a)h+=O;E>=10&&(p|=1<<4-y),y!==4&&(h=t.getNextSet(h),h=t.getNextUnset(h))}if(o.length!==5)throw new Q;let m=this.determineCheckDigit(p);if(sn.extensionChecksum(o.toString())!==m)throw new Q;return h}static extensionChecksum(t){let r=t.length,o=0;for(let a=r-2;a>=0;a-=2)o+=t.charAt(a).charCodeAt(0)-48;o*=3;for(let a=r-1;a>=0;a-=2)o+=t.charAt(a).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(t){for(let r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new Q}static parseExtensionString(t){if(t.length!==5)return null;let r=sn.parseExtension5String(t);return r==null?null:new Map([[He.SUGGESTED_PRICE,r]])}static parseExtension5String(t){let r;switch(t.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let o=parseInt(t.substring(1)),a=(o/100).toString(),l=o%100,h=l<10?"0"+l:l.toString();return r+a+"."+h}}class Sn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,o){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(r,o,a),h=a.toString(),p=Sn.parseExtensionString(h),m=[new Oe((o[0]+o[1])/2,t),new Oe(l,t)],y=new ye(h,null,0,m,ge.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&y.putAllMetadata(p),y}decodeMiddle(t,r,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),h=r[1],p=0;for(let m=0;m<2&&h<l;m++){let y=Ye.decodeDigit(t,a,h,Ye.L_AND_G_PATTERNS);o+=String.fromCharCode(48+y%10);for(let E of a)h+=E;y>=10&&(p|=1<<1-m),m!==1&&(h=t.getNextSet(h),h=t.getNextUnset(h))}if(o.length!==2)throw new Q;if(parseInt(o.toString())%4!==p)throw new Q;return h}static parseExtensionString(t){return t.length!==2?null:new Map([[He.ISSUE_NUMBER,parseInt(t)]])}}class me{static decodeRow(t,r,o){let a=Ye.findGuardPattern(r,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new sn().decodeRow(t,r,a)}catch{return new Sn().decodeRow(t,r,a)}}}me.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Me extends Ye{constructor(){super(),this.decodeRowStringBuffer="",Me.L_AND_G_PATTERNS=Me.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let r=Me.L_PATTERNS[t-10],o=new Int32Array(r.length);for(let a=0;a<r.length;a++)o[a]=r[r.length-a-1];Me.L_AND_G_PATTERNS[t]=o}}decodeRow(t,r,o){let a=Me.findStartGuardPattern(r),l=o==null?null:o.get(X.NEED_RESULT_POINT_CALLBACK);if(l!=null){const xe=new Oe((a[0]+a[1])/2,t);l.foundPossibleResultPoint(xe)}let h=this.decodeMiddle(r,a,this.decodeRowStringBuffer),p=h.rowOffset,m=h.resultString;if(l!=null){const xe=new Oe(p,t);l.foundPossibleResultPoint(xe)}let y=this.decodeEnd(r,p);if(l!=null){const xe=new Oe((y[0]+y[1])/2,t);l.foundPossibleResultPoint(xe)}let E=y[1],O=E+(E-y[0]);if(O>=r.getSize()||!r.isRange(E,O,!1))throw new Q;let P=m.toString();if(P.length<8)throw new U;if(!Me.checkChecksum(P))throw new z;let j=(a[1]+a[0])/2,$=(y[1]+y[0])/2,J=this.getBarcodeFormat(),ne=[new Oe(j,t),new Oe($,t)],ue=new ye(P,null,0,ne,J,new Date().getTime()),Ie=0;try{let xe=me.decodeRow(t,r,y[1]);ue.putMetadata(He.UPC_EAN_EXTENSION,xe.getText()),ue.putAllMetadata(xe.getResultMetadata()),ue.addResultPoints(xe.getResultPoints()),Ie=xe.getText().length}catch{}let be=o==null?null:o.get(X.ALLOWED_EAN_EXTENSIONS);if(be!=null){let xe=!1;for(let rt in be)if(Ie.toString()===rt){xe=!0;break}if(!xe)throw new Q}return ue}decodeEnd(t,r){return Me.findGuardPattern(t,r,!1,Me.START_END_PATTERN,new Int32Array(Me.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return Me.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let o=parseInt(t.charAt(r-1),10);return Me.getStandardUPCEANChecksum(t.substring(0,r-1))===o}static getStandardUPCEANChecksum(t){let r=t.length,o=0;for(let a=r-1;a>=0;a-=2){let l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new U;o+=l}o*=3;for(let a=r-2;a>=0;a-=2){let l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new U;o+=l}return(1e3-o)%10}}class Pt extends Me{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),h=r[1],p=0;for(let y=0;y<6&&h<l;y++){let E=Me.decodeDigit(t,a,h,Me.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let O of a)h+=O;E>=10&&(p|=1<<5-y)}o=Pt.determineFirstDigit(o,p),h=Me.findGuardPattern(t,h,!0,Me.MIDDLE_PATTERN,new Int32Array(Me.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<6&&h<l;y++){let E=Me.decodeDigit(t,a,h,Me.L_PATTERNS);o+=String.fromCharCode(48+E);for(let O of a)h+=O}return{rowOffset:h,resultString:o}}getBarcodeFormat(){return ge.EAN_13}static determineFirstDigit(t,r){for(let o=0;o<10;o++)if(r===this.FIRST_DIGIT_ENCODINGS[o])return t=String.fromCharCode(48+o)+t,t;throw new Q}}Pt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Xn extends Me{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,o){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),h=r[1];for(let m=0;m<4&&h<l;m++){let y=Me.decodeDigit(t,a,h,Me.L_PATTERNS);o+=String.fromCharCode(48+y);for(let E of a)h+=E}h=Me.findGuardPattern(t,h,!0,Me.MIDDLE_PATTERN,new Int32Array(Me.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&h<l;m++){let y=Me.decodeDigit(t,a,h,Me.L_PATTERNS);o+=String.fromCharCode(48+y);for(let E of a)h+=E}return{rowOffset:h,resultString:o}}getBarcodeFormat(){return ge.EAN_8}}class At extends Me{constructor(){super(...arguments),this.ean13Reader=new Pt}getBarcodeFormat(){return ge.UPC_A}decode(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,r,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,o))}decodeMiddle(t,r,o){return this.ean13Reader.decodeMiddle(t,r,o)}maybeReturnResult(t){let r=t.getText();if(r.charAt(0)==="0"){let o=new ye(r.substring(1),null,null,t.getResultPoints(),ge.UPC_A);return t.getResultMetadata()!=null&&o.putAllMetadata(t.getResultMetadata()),o}else throw new Q}reset(){this.ean13Reader.reset()}}class fn extends Me{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,r,o){const a=this.decodeMiddleCounters.map(y=>y);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const l=t.getSize();let h=r[1],p=0;for(let y=0;y<6&&h<l;y++){const E=fn.decodeDigit(t,a,h,fn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let O of a)h+=O;E>=10&&(p|=1<<5-y)}let m=fn.determineNumSysAndCheckDigit(o,p);return{rowOffset:h,resultString:m}}decodeEnd(t,r){return fn.findGuardPatternWithoutCounters(t,r,!0,fn.MIDDLE_END_PATTERN)}checkChecksum(t){return Me.checkChecksum(fn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,r){for(let o=0;o<=1;o++)for(let a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][a]){let l=String.fromCharCode(48+o),h=String.fromCharCode(48+a);return l+t+h}throw Q.getNotFoundInstance()}getBarcodeFormat(){return ge.UPC_E}static convertUPCEtoUPCA(t){const r=t.slice(1,7).split("").map(l=>l.charCodeAt(0)),o=new ee;o.append(t.charAt(0));let a=r[5];switch(a){case 0:case 1:case 2:o.appendChars(r,0,2),o.append(a),o.append("0000"),o.appendChars(r,2,3);break;case 3:o.appendChars(r,0,3),o.append("00000"),o.appendChars(r,3,2);break;case 4:o.appendChars(r,0,4),o.append("00000"),o.append(r[4]);break;default:o.appendChars(r,0,5),o.append("0000"),o.append(a);break}return t.length>=8&&o.append(t.charAt(7)),o.toString()}}fn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),fn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ws extends Ct{constructor(t){super();let r=t==null?null:t.get(X.POSSIBLE_FORMATS),o=[];u(r)?(o.push(new Pt),o.push(new At),o.push(new Xn),o.push(new fn)):(r.indexOf(ge.EAN_13)>-1&&o.push(new Pt),r.indexOf(ge.UPC_A)>-1&&o.push(new At),r.indexOf(ge.EAN_8)>-1&&o.push(new Xn),r.indexOf(ge.UPC_E)>-1&&o.push(new fn)),this.readers=o}decodeRow(t,r,o){for(let a of this.readers)try{const l=a.decodeRow(t,r,o),h=l.getBarcodeFormat()===ge.EAN_13&&l.getText().charAt(0)==="0",p=o==null?null:o.get(X.POSSIBLE_FORMATS),m=p==null||p.includes(ge.UPC_A);if(h&&m){const y=l.getRawBytes(),E=new ye(l.getText().substring(1),y,y?y.length:null,l.getResultPoints(),ge.UPC_A);return E.putAllMetadata(l.getResultMetadata()),E}return l}catch{}throw new Q}reset(){for(let t of this.readers)t.reset()}}class Xt extends Ct{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,r){for(let o=0;o<r.length;o++)if(Ct.patternMatchVariance(t,r[o],Xt.MAX_INDIVIDUAL_VARIANCE)<Xt.MAX_AVG_VARIANCE)return o;throw new Q}static count(t){return Ge.sum(new Int32Array(t))}static increment(t,r){let o=0,a=r[0];for(let l=1;l<t.length;l++)r[l]>a&&(a=r[l],o=l);t[o]++}static decrement(t,r){let o=0,a=r[0];for(let l=1;l<t.length;l++)r[l]<a&&(a=r[l],o=l);t[o]--}static isFinderPattern(t){let r=t[0]+t[1],o=r+t[2]+t[3],a=r/o;if(a>=Xt.MIN_FINDER_PATTERN_RATIO&&a<=Xt.MAX_FINDER_PATTERN_RATIO){let l=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let p of t)p>h&&(h=p),p<l&&(l=p);return h<10*l}return!1}}Xt.MAX_AVG_VARIANCE=.2,Xt.MAX_INDIVIDUAL_VARIANCE=.45,Xt.MIN_FINDER_PATTERN_RATIO=9.5/12,Xt.MAX_FINDER_PATTERN_RATIO=12.5/14;class ci{constructor(t,r){this.value=t,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof ci))return!1;const r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class mr{constructor(t,r,o,a,l){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Oe(o,l)),this.resultPoints.push(new Oe(a,l))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof mr))return!1;const r=t;return this.value===r.value}hashCode(){return this.value}}class Bt{constructor(){}static getRSSvalue(t,r,o){let a=0;for(let m of t)a+=m;let l=0,h=0,p=t.length;for(let m=0;m<p-1;m++){let y;for(y=1,h|=1<<m;y<t[m];y++,h&=~(1<<m)){let E=Bt.combins(a-y-1,p-m-2);if(o&&h===0&&a-y-(p-m-1)>=p-m-1&&(E-=Bt.combins(a-y-(p-m),p-m-2)),p-m-1>1){let O=0;for(let P=a-y-(p-m-2);P>r;P--)O+=Bt.combins(a-y-P-1,p-m-3);E-=O*(p-1-m)}else a-y>r&&E--;l+=E}a-=y}return l}static combins(t,r){let o,a;t-r>r?(a=r,o=t-r):(a=t-r,o=r);let l=1,h=1;for(let p=t;p>o;p--)l*=p,h<=a&&(l/=h,h++);for(;h<=a;)l/=h,h++;return l}}class Si{static buildBitArray(t){let r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);let o=12*r,a=new H(o),l=0,p=t[0].getRightChar().getValue();for(let m=11;m>=0;--m)p&1<<m&&a.set(l),l++;for(let m=1;m<t.length;++m){let y=t[m],E=y.getLeftChar().getValue();for(let O=11;O>=0;--O)E&1<<O&&a.set(l),l++;if(y.getRightChar()!=null){let O=y.getRightChar().getValue();for(let P=11;P>=0;--P)O&1<<P&&a.set(l),l++}}return a}}class kr{constructor(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class hi{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Tt extends hi{constructor(t,r){super(t),this.value=r}getValue(){return this.value}isFNC1(){return this.value===Tt.FNC1}}Tt.FNC1="$";class Fe extends hi{constructor(t,r,o){super(t),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class pn extends hi{constructor(t,r,o){if(super(t),r<0||r>10||o<0||o>10)throw new U;this.firstDigit=r,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===pn.FNC1}isSecondDigitFNC1(){return this.secondDigit===pn.FNC1}isAnyFNC1(){return this.firstDigit===pn.FNC1||this.secondDigit===pn.FNC1}}pn.FNC1=10;class Pe{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new Q;let r=t.substring(0,2);for(let l of Pe.TWO_DIGIT_DATA_LENGTH)if(l[0]===r)return l[1]===Pe.VARIABLE_LENGTH?Pe.processVariableAI(2,l[2],t):Pe.processFixedAI(2,l[1],t);if(t.length<3)throw new Q;let o=t.substring(0,3);for(let l of Pe.THREE_DIGIT_DATA_LENGTH)if(l[0]===o)return l[1]===Pe.VARIABLE_LENGTH?Pe.processVariableAI(3,l[2],t):Pe.processFixedAI(3,l[1],t);for(let l of Pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(l[0]===o)return l[1]===Pe.VARIABLE_LENGTH?Pe.processVariableAI(4,l[2],t):Pe.processFixedAI(4,l[1],t);if(t.length<4)throw new Q;let a=t.substring(0,4);for(let l of Pe.FOUR_DIGIT_DATA_LENGTH)if(l[0]===a)return l[1]===Pe.VARIABLE_LENGTH?Pe.processVariableAI(4,l[2],t):Pe.processFixedAI(4,l[1],t);throw new Q}static processFixedAI(t,r,o){if(o.length<t)throw new Q;let a=o.substring(0,t);if(o.length<t+r)throw new Q;let l=o.substring(t,t+r),h=o.substring(t+r),p="("+a+")"+l,m=Pe.parseFieldsInGeneralPurpose(h);return m==null?p:p+m}static processVariableAI(t,r,o){let a=o.substring(0,t),l;o.length<t+r?l=o.length:l=t+r;let h=o.substring(t,l),p=o.substring(l),m="("+a+")"+h,y=Pe.parseFieldsInGeneralPurpose(p);return y==null?m:m+y}}Pe.VARIABLE_LENGTH=[],Pe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Pe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Pe.VARIABLE_LENGTH,20],["22",Pe.VARIABLE_LENGTH,29],["30",Pe.VARIABLE_LENGTH,8],["37",Pe.VARIABLE_LENGTH,8],["90",Pe.VARIABLE_LENGTH,30],["91",Pe.VARIABLE_LENGTH,30],["92",Pe.VARIABLE_LENGTH,30],["93",Pe.VARIABLE_LENGTH,30],["94",Pe.VARIABLE_LENGTH,30],["95",Pe.VARIABLE_LENGTH,30],["96",Pe.VARIABLE_LENGTH,30],["97",Pe.VARIABLE_LENGTH,3],["98",Pe.VARIABLE_LENGTH,30],["99",Pe.VARIABLE_LENGTH,30]],Pe.THREE_DIGIT_DATA_LENGTH=[["240",Pe.VARIABLE_LENGTH,30],["241",Pe.VARIABLE_LENGTH,30],["242",Pe.VARIABLE_LENGTH,6],["250",Pe.VARIABLE_LENGTH,30],["251",Pe.VARIABLE_LENGTH,30],["253",Pe.VARIABLE_LENGTH,17],["254",Pe.VARIABLE_LENGTH,20],["400",Pe.VARIABLE_LENGTH,30],["401",Pe.VARIABLE_LENGTH,30],["402",17],["403",Pe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Pe.VARIABLE_LENGTH,20],["421",Pe.VARIABLE_LENGTH,15],["422",3],["423",Pe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Pe.VARIABLE_LENGTH,15],["391",Pe.VARIABLE_LENGTH,18],["392",Pe.VARIABLE_LENGTH,15],["393",Pe.VARIABLE_LENGTH,18],["703",Pe.VARIABLE_LENGTH,30]],Pe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Pe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Pe.VARIABLE_LENGTH,20],["8003",Pe.VARIABLE_LENGTH,30],["8004",Pe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Pe.VARIABLE_LENGTH,30],["8008",Pe.VARIABLE_LENGTH,12],["8018",18],["8020",Pe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Pe.VARIABLE_LENGTH,70],["8200",Pe.VARIABLE_LENGTH,70]];class Yr{constructor(t){this.buffer=new ee,this.information=t}decodeAllCodes(t,r){let o=r,a=null;do{let l=this.decodeGeneralPurposeField(o,a),h=Pe.parseFieldsInGeneralPurpose(l.getNewString());if(h!=null&&t.append(h),l.isRemaining()?a=""+l.getRemainingValue():a=null,o===l.getNewPosition())break;o=l.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let l=this.extractNumericValueFromBitArray(t,4);return l===0?new pn(this.information.getSize(),pn.FNC1,pn.FNC1):new pn(this.information.getSize(),l-1,pn.FNC1)}let r=this.extractNumericValueFromBitArray(t,7),o=(r-8)/11,a=(r-8)%11;return new pn(t+7,o,a)}extractNumericValueFromBitArray(t,r){return Yr.extractNumericValueFromBitArray(this.information,t,r)}static extractNumericValueFromBitArray(t,r,o){let a=0;for(let l=0;l<o;++l)t.get(r+l)&&(a|=1<<o-l-1);return a}decodeGeneralPurposeField(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Fe(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Fe(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,r;do{let o=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished()),!(o!==this.current.getPosition())&&!t)break}while(!t);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let r;return t.isSecondDigitFNC1()?r=new Fe(this.current.getPosition(),this.buffer.toString()):r=new Fe(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new kr(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let r=new Fe(this.current.getPosition(),this.buffer.toString());return new kr(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new kr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Fe(this.current.getPosition(),this.buffer.toString());return new kr(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new kr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Fe(this.current.getPosition(),this.buffer.toString());return new kr(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new kr(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<116)return!0;if(t+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,8);return a>=232&&a<253}decodeIsoIec646(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Tt(t+5,Tt.FNC1);if(r>=5&&r<15)return new Tt(t+5,"0"+(r-5));let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<90)return new Tt(t+7,""+(o+1));if(o>=90&&o<116)return new Tt(t+7,""+(o+7));let a=this.extractNumericValueFromBitArray(t,8),l;switch(a){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new U}return new Tt(t+8,l)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,6);return o>=16&&o<63}decodeAlphanumeric(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Tt(t+5,Tt.FNC1);if(r>=5&&r<15)return new Tt(t+5,"0"+(r-5));let o=this.extractNumericValueFromBitArray(t,6);if(o>=32&&o<58)return new Tt(t+6,""+(o+33));let a;switch(o){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Zt("Decoding invalid alphanumeric value: "+o)}return new Tt(t+6,a)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0}}class di{constructor(t){this.information=t,this.generalDecoder=new Yr(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class gn extends di{constructor(t){super(t)}encodeCompressedGtin(t,r){t.append("(01)");let o=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,o)}encodeCompressedGtinWithoutAI(t,r,o){for(let a=0;a<4;++a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);l/100===0&&t.append("0"),l/10===0&&t.append("0"),t.append(l)}gn.appendCheckDigit(t,o)}static appendCheckDigit(t,r){let o=0;for(let a=0;a<13;a++){let l=t.charAt(a+r).charCodeAt(0)-48;o+=a&1?l:3*l}o=10-o%10,o===10&&(o=0),t.append(o)}}gn.GTIN_SIZE=40;class Kr extends gn{constructor(t){super(t)}parseInformation(){let t=new ee;t.append("(01)");let r=t.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(Kr.HEADER_SIZE,4);return t.append(o),this.encodeCompressedGtinWithoutAI(t,Kr.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,Kr.HEADER_SIZE+44)}}Kr.HEADER_SIZE=4;class On extends di{constructor(t){super(t)}parseInformation(){let t=new ee;return this.getGeneralDecoder().decodeAllCodes(t,On.HEADER_SIZE)}}On.HEADER_SIZE=5;class Qr extends gn{constructor(t){super(t)}encodeCompressedWeight(t,r,o){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,o);this.addWeightCode(t,a);let l=this.checkWeight(a),h=1e5;for(let p=0;p<5;++p)l/h===0&&t.append("0"),h/=10;t.append(l)}}class Yn extends Qr{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Yn.HEADER_SIZE+Qr.GTIN_SIZE+Yn.WEIGHT_SIZE)throw new Q;let t=new ee;return this.encodeCompressedGtin(t,Yn.HEADER_SIZE),this.encodeCompressedWeight(t,Yn.HEADER_SIZE+Qr.GTIN_SIZE,Yn.WEIGHT_SIZE),t.toString()}}Yn.HEADER_SIZE=5,Yn.WEIGHT_SIZE=15;class on extends Yn{constructor(t){super(t)}addWeightCode(t,r){t.append("(3103)")}checkWeight(t){return t}}class Ro extends Yn{constructor(t){super(t)}addWeightCode(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Kn extends gn{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Kn.HEADER_SIZE+gn.GTIN_SIZE)throw new Q;let t=new ee;this.encodeCompressedGtin(t,Kn.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Kn.HEADER_SIZE+gn.GTIN_SIZE,Kn.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(Kn.HEADER_SIZE+gn.GTIN_SIZE+Kn.LAST_DIGIT_SIZE,null);return t.append(o.getNewString()),t.toString()}}Kn.HEADER_SIZE=8,Kn.LAST_DIGIT_SIZE=2;class an extends gn{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<an.HEADER_SIZE+gn.GTIN_SIZE)throw new Q;let t=new ee;this.encodeCompressedGtin(t,an.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(an.HEADER_SIZE+gn.GTIN_SIZE,an.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(an.HEADER_SIZE+gn.GTIN_SIZE+an.LAST_DIGIT_SIZE,an.FIRST_THREE_DIGITS_SIZE);o/100==0&&t.append("0"),o/10==0&&t.append("0"),t.append(o);let a=this.getGeneralDecoder().decodeGeneralPurposeField(an.HEADER_SIZE+gn.GTIN_SIZE+an.LAST_DIGIT_SIZE+an.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()}}an.HEADER_SIZE=8,an.LAST_DIGIT_SIZE=2,an.FIRST_THREE_DIGITS_SIZE=10;class Nt extends Qr{constructor(t,r,o){super(t),this.dateCode=o,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=Nt.HEADER_SIZE+Nt.GTIN_SIZE+Nt.WEIGHT_SIZE+Nt.DATE_SIZE)throw new Q;let t=new ee;return this.encodeCompressedGtin(t,Nt.HEADER_SIZE),this.encodeCompressedWeight(t,Nt.HEADER_SIZE+Nt.GTIN_SIZE,Nt.WEIGHT_SIZE),this.encodeCompressedDate(t,Nt.HEADER_SIZE+Nt.GTIN_SIZE+Nt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,r){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,Nt.DATE_SIZE);if(o==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let a=o%32;o/=32;let l=o%12+1;o/=12;let h=o;h/10==0&&t.append("0"),t.append(h),l/10==0&&t.append("0"),t.append(l),a/10==0&&t.append("0"),t.append(a)}addWeightCode(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")}checkWeight(t){return t%1e5}}Nt.HEADER_SIZE=8,Nt.WEIGHT_SIZE=20,Nt.DATE_SIZE=16;function Ii(N){try{if(N.get(1))return new Kr(N);if(!N.get(2))return new On(N);switch(Yr.extractNumericValueFromBitArray(N,1,4)){case 4:return new on(N);case 5:return new Ro(N)}switch(Yr.extractNumericValueFromBitArray(N,1,5)){case 12:return new Kn(N);case 13:return new an(N)}switch(Yr.extractNumericValueFromBitArray(N,1,7)){case 56:return new Nt(N,"310","11");case 57:return new Nt(N,"320","11");case 58:return new Nt(N,"310","13");case 59:return new Nt(N,"320","13");case 60:return new Nt(N,"310","15");case 61:return new Nt(N,"320","15");case 62:return new Nt(N,"310","17");case 63:return new Nt(N,"320","17")}}catch(t){throw console.log(t),new Zt("unknown decoder: "+N)}}class Mr{constructor(t,r,o,a){this.leftchar=t,this.rightchar=r,this.finderpattern=o,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,r){return t instanceof Mr?Mr.equalsOrNull(t.leftchar,r.leftchar)&&Mr.equalsOrNull(t.rightchar,r.rightchar)&&Mr.equalsOrNull(t.finderpattern,r.finderpattern):!1}static equalsOrNull(t,r){return t===null?r===null:Mr.equals(t,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ys{constructor(t,r,o){this.pairs=t,this.rowNumber=r,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,r){return t instanceof ys?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1}checkEqualitity(t,r){if(!t||!r)return;let o;return t.forEach((a,l)=>{r.forEach(h=>{a.getLeftChar().getValue()===h.getLeftChar().getValue()&&a.getRightChar().getValue()===h.getRightChar().getValue()&&a.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(o=!0)})}),o}}class we extends Xt{constructor(t){super(...arguments),this.pairs=new Array(we.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,r,o){this.pairs.length=0,this.startFromEven=!1;try{return we.constructResult(this.decodeRow2pairs(t,r))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,we.constructResult(this.decodeRow2pairs(t,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,r){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(l){if(l instanceof Q){if(!this.pairs.length)throw new Q;o=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){let l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new Q}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return t&&(this.rows=this.rows.reverse()),r}checkRows(t,r){for(let o=r;o<this.rows.length;o++){let a=this.rows[o];this.pairs.length=0;for(let h of t)this.pairs.push(h.getPairs());if(this.pairs.push(a.getPairs()),!we.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let l=new Array(t);l.push(a);try{return this.checkRows(l,o+1)}catch(h){this.verbose&&console.log(h)}}throw new Q}static isValidSequence(t){for(let r of we.FINDER_PATTERN_SEQUENCES){if(t.length>r.length)continue;let o=!0;for(let a=0;a<t.length;a++)if(t[a].getFinderPattern().getValue()!=r[a]){o=!1;break}if(o)return!0}return!1}storeRow(t,r){let o=0,a=!1,l=!1;for(;o<this.rows.length;){let h=this.rows[o];if(h.getRowNumber()>t){l=h.isEquivalent(this.pairs);break}a=h.isEquivalent(this.pairs),o++}l||a||we.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new ys(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,r){for(let o of r)if(o.getPairs().length!==t.length){for(let a of o.getPairs())for(let l of t)if(Mr.equals(a,l))break}}static isPartialRow(t,r){for(let o of r){let a=!0;for(let l of t){let h=!1;for(let p of o.getPairs())if(l.equals(p)){h=!0;break}if(!h){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(t){let r=Si.buildBitArray(t),a=Ii(r).parseInformation(),l=t[0].getFinderPattern().getResultPoints(),h=t[t.length-1].getFinderPattern().getResultPoints(),p=[l[0],l[1],h[0],h[1]];return new ye(a,null,null,p,ge.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),r=t.getLeftChar(),o=t.getRightChar();if(o==null)return!1;let a=o.getChecksumPortion(),l=2;for(let p=1;p<this.pairs.size();++p){let m=this.pairs.get(p);a+=m.getLeftChar().getChecksumPortion(),l++;let y=m.getRightChar();y!=null&&(a+=y.getChecksumPortion(),l++)}return a%=211,211*(l-4)+a==r.getValue()}static getNextSecondBar(t,r){let o;return t.get(r)?(o=t.getNextUnset(r),o=t.getNextSet(o)):(o=t.getNextSet(r),o=t.getNextUnset(o)),o}retrieveNextPair(t,r,o){let a=r.length%2==0;this.startFromEven&&(a=!a);let l,h=!0,p=-1;do this.findNextPair(t,r,p),l=this.parseFoundFinderPattern(t,o,a),l==null?p=we.getNextSecondBar(t,this.startEnd[0]):h=!1;while(h);let m=this.decodeDataCharacter(t,l,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new Q;let y;try{y=this.decodeDataCharacter(t,l,a,!1)}catch(E){y=null,this.verbose&&console.log(E)}return new Mr(m,y,l,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,r,o){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),h;o>=0?h=o:this.isEmptyPair(r)?h=0:h=r[r.length-1].getFinderPattern().getStartEnd()[1];let p=r.length%2!=0;this.startFromEven&&(p=!p);let m=!1;for(;h<l&&(m=!t.get(h),!!m);)h++;let y=0,E=h;for(let O=h;O<l;O++)if(t.get(O)!=m)a[y]++;else{if(y==3){if(p&&we.reverseCounters(a),we.isFinderPattern(a)){this.startEnd[0]=E,this.startEnd[1]=O;return}p&&we.reverseCounters(a),E+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,y--}else y++;a[y]=1,m=!m}throw new Q}static reverseCounters(t){let r=t.length;for(let o=0;o<r/2;++o){let a=t[o];t[o]=t[r-o-1],t[r-o-1]=a}}parseFoundFinderPattern(t,r,o){let a,l,h;if(o){let y=this.startEnd[0]-1;for(;y>=0&&!t.get(y);)y--;y++,a=this.startEnd[0]-y,l=y,h=this.startEnd[1]}else l=this.startEnd[0],h=t.getNextUnset(this.startEnd[1]+1),a=h-this.startEnd[1];let p=this.getDecodeFinderCounters();W.arraycopy(p,0,p,1,p.length-1),p[0]=a;let m;try{m=this.parseFinderValue(p,we.FINDER_PATTERNS)}catch{return null}return new mr(m,[l,h],l,h,r)}decodeDataCharacter(t,r,o,a){let l=this.getDataCharacterCounters();for(let _t=0;_t<l.length;_t++)l[_t]=0;if(a)we.recordPatternInReverse(t,r.getStartEnd()[0],l);else{we.recordPattern(t,r.getStartEnd()[1],l);for(let _t=0,Cn=l.length-1;_t<Cn;_t++,Cn--){let zn=l[_t];l[_t]=l[Cn],l[Cn]=zn}}let h=17,p=Ge.sum(new Int32Array(l))/h,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(p-m)/m>.3)throw new Q;let y=this.getOddCounts(),E=this.getEvenCounts(),O=this.getOddRoundingErrors(),P=this.getEvenRoundingErrors();for(let _t=0;_t<l.length;_t++){let Cn=1*l[_t]/p,zn=Cn+.5;if(zn<1){if(Cn<.3)throw new Q;zn=1}else if(zn>8){if(Cn>8.7)throw new Q;zn=8}let Ki=_t/2;_t&1?(E[Ki]=zn,P[Ki]=Cn-zn):(y[Ki]=zn,O[Ki]=Cn-zn)}this.adjustOddEvenCounts(h);let j=4*r.getValue()+(o?0:2)+(a?0:1)-1,$=0,J=0;for(let _t=y.length-1;_t>=0;_t--){if(we.isNotA1left(r,o,a)){let Cn=we.WEIGHTS[j][2*_t];J+=y[_t]*Cn}$+=y[_t]}let ne=0;for(let _t=E.length-1;_t>=0;_t--)if(we.isNotA1left(r,o,a)){let Cn=we.WEIGHTS[j][2*_t+1];ne+=E[_t]*Cn}let ue=J+ne;if($&1||$>13||$<4)throw new Q;let Ie=(13-$)/2,be=we.SYMBOL_WIDEST[Ie],xe=9-be,rt=Bt.getRSSvalue(y,be,!0),et=Bt.getRSSvalue(E,xe,!1),jt=we.EVEN_TOTAL_SUBSET[Ie],Fn=we.GSUM[Ie],jn=rt*jt+et+Fn;return new ci(jn,ue)}static isNotA1left(t,r,o){return!(t.getValue()==0&&r&&o)}adjustOddEvenCounts(t){let r=Ge.sum(new Int32Array(this.getOddCounts())),o=Ge.sum(new Int32Array(this.getEvenCounts())),a=!1,l=!1;r>13?l=!0:r<4&&(a=!0);let h=!1,p=!1;o>13?p=!0:o<4&&(h=!0);let m=r+o-t,y=(r&1)==1,E=(o&1)==0;if(m==1)if(y){if(E)throw new Q;l=!0}else{if(!E)throw new Q;p=!0}else if(m==-1)if(y){if(E)throw new Q;a=!0}else{if(!E)throw new Q;h=!0}else if(m==0){if(y){if(!E)throw new Q;r<o?(a=!0,p=!0):(l=!0,h=!0)}else if(E)throw new Q}else throw new Q;if(a){if(l)throw new Q;we.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&we.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(p)throw new Q;we.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&we.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}we.SYMBOL_WIDEST=[7,5,4,3,1],we.EVEN_TOTAL_SUBSET=[4,20,52,104,204],we.GSUM=[0,348,1388,2948,3988],we.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],we.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],we.FINDER_PAT_A=0,we.FINDER_PAT_B=1,we.FINDER_PAT_C=2,we.FINDER_PAT_D=3,we.FINDER_PAT_E=4,we.FINDER_PAT_F=5,we.FINDER_PATTERN_SEQUENCES=[[we.FINDER_PAT_A,we.FINDER_PAT_A],[we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B],[we.FINDER_PAT_A,we.FINDER_PAT_C,we.FINDER_PAT_B,we.FINDER_PAT_D],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_C],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_D,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_D],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_E],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F]],we.MAX_PAIRS=11;class ko extends ci{constructor(t,r,o){super(t,r),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Lt extends Xt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,r,o){const a=this.decodePair(r,!1,t,o);Lt.addOrTally(this.possibleLeftPairs,a),r.reverse();let l=this.decodePair(r,!0,t,o);Lt.addOrTally(this.possibleRightPairs,l),r.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Lt.checkChecksum(h,p))return Lt.constructResult(h,p)}throw new Q}static addOrTally(t,r){if(r==null)return;let o=!1;for(let a of t)if(a.getValue()===r.getValue()){a.incrementCount(),o=!0;break}o||t.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,r){let o=4537077*t.getValue()+r.getValue(),a=new String(o).toString(),l=new ee;for(let y=13-a.length;y>0;y--)l.append("0");l.append(a);let h=0;for(let y=0;y<13;y++){let E=l.charAt(y).charCodeAt(0)-48;h+=y&1?E:3*E}h=10-h%10,h===10&&(h=0),l.append(h.toString());let p=t.getFinderPattern().getResultPoints(),m=r.getFinderPattern().getResultPoints();return new ye(l.toString(),null,0,[p[0],p[1],m[0],m[1]],ge.RSS_14,new Date().getTime())}static checkChecksum(t,r){let o=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,o===a}decodePair(t,r,o,a){try{let l=this.findFinderPattern(t,r),h=this.parseFoundFinderPattern(t,o,r,l),p=a==null?null:a.get(X.NEED_RESULT_POINT_CALLBACK);if(p!=null){let E=(l[0]+l[1])/2;r&&(E=t.getSize()-1-E),p.foundPossibleResultPoint(new Oe(E,o))}let m=this.decodeDataCharacter(t,h,!0),y=this.decodeDataCharacter(t,h,!1);return new ko(1597*m.getValue()+y.getValue(),m.getChecksumPortion()+4*y.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(t,r,o){let a=this.getDataCharacterCounters();for(let ne=0;ne<a.length;ne++)a[ne]=0;if(o)Ct.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Ct.recordPattern(t,r.getStartEnd()[1]+1,a);for(let ne=0,ue=a.length-1;ne<ue;ne++,ue--){let Ie=a[ne];a[ne]=a[ue],a[ue]=Ie}}let l=o?16:15,h=Ge.sum(new Int32Array(a))/l,p=this.getOddCounts(),m=this.getEvenCounts(),y=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let ne=0;ne<a.length;ne++){let ue=a[ne]/h,Ie=Math.floor(ue+.5);Ie<1?Ie=1:Ie>8&&(Ie=8);let be=Math.floor(ne/2);ne&1?(m[be]=Ie,E[be]=ue-Ie):(p[be]=Ie,y[be]=ue-Ie)}this.adjustOddEvenCounts(o,l);let O=0,P=0;for(let ne=p.length-1;ne>=0;ne--)P*=9,P+=p[ne],O+=p[ne];let j=0,$=0;for(let ne=m.length-1;ne>=0;ne--)j*=9,j+=m[ne],$+=m[ne];let J=P+3*j;if(o){if(O&1||O>12||O<4)throw new Q;let ne=(12-O)/2,ue=Lt.OUTSIDE_ODD_WIDEST[ne],Ie=9-ue,be=Bt.getRSSvalue(p,ue,!1),xe=Bt.getRSSvalue(m,Ie,!0),rt=Lt.OUTSIDE_EVEN_TOTAL_SUBSET[ne],et=Lt.OUTSIDE_GSUM[ne];return new ci(be*rt+xe+et,J)}else{if($&1||$>10||$<4)throw new Q;let ne=(10-$)/2,ue=Lt.INSIDE_ODD_WIDEST[ne],Ie=9-ue,be=Bt.getRSSvalue(p,ue,!0),xe=Bt.getRSSvalue(m,Ie,!1),rt=Lt.INSIDE_ODD_TOTAL_SUBSET[ne],et=Lt.INSIDE_GSUM[ne];return new ci(xe*rt+be+et,J)}}findFinderPattern(t,r){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),l=!1,h=0;for(;h<a&&(l=!t.get(h),r!==l);)h++;let p=0,m=h;for(let y=h;y<a;y++)if(t.get(y)!==l)o[p]++;else{if(p===3){if(Xt.isFinderPattern(o))return[m,y];m+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,p--}else p++;o[p]=1,l=!l}throw new Q}parseFoundFinderPattern(t,r,o,a){let l=t.get(a[0]),h=a[0]-1;for(;h>=0&&l!==t.get(h);)h--;h++;const p=a[0]-h,m=this.getDecodeFinderCounters(),y=new Int32Array(m.length);W.arraycopy(m,0,y,1,m.length-1),y[0]=p;const E=this.parseFinderValue(y,Lt.FINDER_PATTERNS);let O=h,P=a[1];return o&&(O=t.getSize()-1-O,P=t.getSize()-1-P),new mr(E,[h,a[1]],O,P,r)}adjustOddEvenCounts(t,r){let o=Ge.sum(new Int32Array(this.getOddCounts())),a=Ge.sum(new Int32Array(this.getEvenCounts())),l=!1,h=!1,p=!1,m=!1;t?(o>12?h=!0:o<4&&(l=!0),a>12?m=!0:a<4&&(p=!0)):(o>11?h=!0:o<5&&(l=!0),a>10?m=!0:a<4&&(p=!0));let y=o+a-r,E=(o&1)===(t?1:0),O=(a&1)===1;if(y===1)if(E){if(O)throw new Q;h=!0}else{if(!O)throw new Q;m=!0}else if(y===-1)if(E){if(O)throw new Q;l=!0}else{if(!O)throw new Q;p=!0}else if(y===0){if(E){if(!O)throw new Q;o<a?(l=!0,m=!0):(h=!0,p=!0)}else if(O)throw new Q}else throw new Q;if(l){if(h)throw new Q;Xt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&Xt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(m)throw new Q;Xt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&Xt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Lt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Lt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Lt.OUTSIDE_GSUM=[0,161,961,2015,2715],Lt.INSIDE_GSUM=[0,336,1036,1516],Lt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Lt.INSIDE_ODD_WIDEST=[2,4,6,8],Lt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Pr extends Ct{constructor(t,r){super(),this.readers=[],this.verbose=r===!0;const o=t?t.get(X.POSSIBLE_FORMATS):null,a=t&&t.get(X.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(ge.EAN_13)||o.includes(ge.UPC_A)||o.includes(ge.EAN_8)||o.includes(ge.UPC_E))&&this.readers.push(new ws(t)),o.includes(ge.CODE_39)&&this.readers.push(new wt(a)),o.includes(ge.CODE_128)&&this.readers.push(new Se),o.includes(ge.ITF)&&this.readers.push(new Qe),o.includes(ge.RSS_14)&&this.readers.push(new Lt),o.includes(ge.RSS_EXPANDED)&&this.readers.push(new we(this.verbose))):(this.readers.push(new ws(t)),this.readers.push(new wt),this.readers.push(new ws(t)),this.readers.push(new Se),this.readers.push(new Qe),this.readers.push(new Lt),this.readers.push(new we(this.verbose)))}decodeRow(t,r,o){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,o)}catch{}throw new Q}reset(){this.readers.forEach(t=>t.reset())}}class fi extends Ce{constructor(t=500,r){super(new Pr(r),t,r)}}class ft{constructor(t,r,o){this.ecCodewords=t,this.ecBlocks=[r],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ot{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class qe{constructor(t,r,o,a,l,h){this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=o,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=l,this.ecBlocks=h;let p=0;const m=h.getECCodewords(),y=h.getECBlocks();for(let E of y)p+=E.getCount()*(E.getDataCodewords()+m);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,r){if(t&1||r&1)throw new U;for(let o of qe.VERSIONS)if(o.symbolSizeRows===t&&o.symbolSizeColumns===r)return o;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new qe(1,10,10,8,8,new ft(5,new ot(1,3))),new qe(2,12,12,10,10,new ft(7,new ot(1,5))),new qe(3,14,14,12,12,new ft(10,new ot(1,8))),new qe(4,16,16,14,14,new ft(12,new ot(1,12))),new qe(5,18,18,16,16,new ft(14,new ot(1,18))),new qe(6,20,20,18,18,new ft(18,new ot(1,22))),new qe(7,22,22,20,20,new ft(20,new ot(1,30))),new qe(8,24,24,22,22,new ft(24,new ot(1,36))),new qe(9,26,26,24,24,new ft(28,new ot(1,44))),new qe(10,32,32,14,14,new ft(36,new ot(1,62))),new qe(11,36,36,16,16,new ft(42,new ot(1,86))),new qe(12,40,40,18,18,new ft(48,new ot(1,114))),new qe(13,44,44,20,20,new ft(56,new ot(1,144))),new qe(14,48,48,22,22,new ft(68,new ot(1,174))),new qe(15,52,52,24,24,new ft(42,new ot(2,102))),new qe(16,64,64,14,14,new ft(56,new ot(2,140))),new qe(17,72,72,16,16,new ft(36,new ot(4,92))),new qe(18,80,80,18,18,new ft(48,new ot(4,114))),new qe(19,88,88,20,20,new ft(56,new ot(4,144))),new qe(20,96,96,22,22,new ft(68,new ot(4,174))),new qe(21,104,104,24,24,new ft(56,new ot(6,136))),new qe(22,120,120,18,18,new ft(68,new ot(6,175))),new qe(23,132,132,20,20,new ft(62,new ot(8,163))),new qe(24,144,144,22,22,new ft(62,new ot(8,156),new ot(2,155))),new qe(25,8,18,6,16,new ft(7,new ot(1,5))),new qe(26,8,32,6,14,new ft(11,new ot(1,10))),new qe(27,12,26,10,24,new ft(14,new ot(1,16))),new qe(28,12,36,10,16,new ft(18,new ot(1,22))),new qe(29,16,36,14,16,new ft(24,new ot(1,32))),new qe(30,16,48,14,22,new ft(28,new ot(1,49)))]}}qe.VERSIONS=qe.buildVersions();class it{constructor(t){const r=t.getHeight();if(r<8||r>144||r&1)throw new U;this.version=it.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new le(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const r=t.getHeight(),o=t.getWidth();return qe.getVersionForDimensions(r,o)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let r=0,o=4,a=0;const l=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let p=!1,m=!1,y=!1,E=!1;do if(o===l&&a===0&&!p)t[r++]=this.readCorner1(l,h)&255,o-=2,a+=2,p=!0;else if(o===l-2&&a===0&&h&3&&!m)t[r++]=this.readCorner2(l,h)&255,o-=2,a+=2,m=!0;else if(o===l+4&&a===2&&!(h&7)&&!y)t[r++]=this.readCorner3(l,h)&255,o-=2,a+=2,y=!0;else if(o===l-2&&a===0&&(h&7)===4&&!E)t[r++]=this.readCorner4(l,h)&255,o-=2,a+=2,E=!0;else{do o<l&&a>=0&&!this.readMappingMatrix.get(a,o)&&(t[r++]=this.readUtah(o,a,l,h)&255),o-=2,a+=2;while(o>=0&&a<h);o+=1,a+=3;do o>=0&&a<h&&!this.readMappingMatrix.get(a,o)&&(t[r++]=this.readUtah(o,a,l,h)&255),o+=2,a-=2;while(o<l&&a>=0);o+=3,a+=1}while(o<l||a<h);if(r!==this.version.getTotalCodewords())throw new U;return t}readModule(t,r,o,a){return t<0&&(t+=o,r+=4-(o+4&7)),r<0&&(r+=a,t+=4-(a+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)}readUtah(t,r,o,a){let l=0;return this.readModule(t-2,r-2,o,a)&&(l|=1),l<<=1,this.readModule(t-2,r-1,o,a)&&(l|=1),l<<=1,this.readModule(t-1,r-2,o,a)&&(l|=1),l<<=1,this.readModule(t-1,r-1,o,a)&&(l|=1),l<<=1,this.readModule(t-1,r,o,a)&&(l|=1),l<<=1,this.readModule(t,r-2,o,a)&&(l|=1),l<<=1,this.readModule(t,r-1,o,a)&&(l|=1),l<<=1,this.readModule(t,r,o,a)&&(l|=1),l}readCorner1(t,r){let o=0;return this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,1,t,r)&&(o|=1),o<<=1,this.readModule(t-1,2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(2,r-1,t,r)&&(o|=1),o<<=1,this.readModule(3,r-1,t,r)&&(o|=1),o}readCorner2(t,r){let o=0;return this.readModule(t-3,0,t,r)&&(o|=1),o<<=1,this.readModule(t-2,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(0,r-4,t,r)&&(o|=1),o<<=1,this.readModule(0,r-3,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o}readCorner3(t,r){let o=0;return this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(0,r-3,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-3,t,r)&&(o|=1),o<<=1,this.readModule(1,r-2,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o}readCorner4(t,r){let o=0;return this.readModule(t-3,0,t,r)&&(o|=1),o<<=1,this.readModule(t-2,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(2,r-1,t,r)&&(o|=1),o<<=1,this.readModule(3,r-1,t,r)&&(o|=1),o}extractDataRegion(t){const r=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new b("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),h=r/a|0,p=o/l|0,m=h*a,y=p*l,E=new le(y,m);for(let O=0;O<h;++O){const P=O*a;for(let j=0;j<p;++j){const $=j*l;for(let J=0;J<a;++J){const ne=O*(a+2)+1+J,ue=P+J;for(let Ie=0;Ie<l;++Ie){const be=j*(l+2)+1+Ie;if(t.get(be,ne)){const xe=$+Ie;E.set(xe,ue)}}}}}return E}}class xt{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r){const o=r.getECBlocks();let a=0;const l=o.getECBlocks();for(let J of l)a+=J.getCount();const h=new Array(a);let p=0;for(let J of l)for(let ne=0;ne<J.getCount();ne++){const ue=J.getDataCodewords(),Ie=o.getECCodewords()+ue;h[p++]=new xt(ue,new Uint8Array(Ie))}const y=h[0].codewords.length-o.getECCodewords(),E=y-1;let O=0;for(let J=0;J<E;J++)for(let ne=0;ne<p;ne++)h[ne].codewords[J]=t[O++];const P=r.getVersionNumber()===24,j=P?8:p;for(let J=0;J<j;J++)h[J].codewords[y-1]=t[O++];const $=h[0].codewords.length;for(let J=y;J<$;J++)for(let ne=0;ne<p;ne++){const ue=P?(ne+8)%p:ne,Ie=P&&ue>7?J-1:J;h[ue].codewords[Ie]=t[O++]}if(O!==t.length)throw new b;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class pi{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new b(""+t);let r=0,o=this.bitOffset,a=this.byteOffset;const l=this.bytes;if(o>0){const h=8-o,p=t<h?t:h,m=h-p,y=255>>8-p<<m;r=(l[a]&y)>>m,t-=p,o+=p,o===8&&(o=0,a++)}if(t>0){for(;t>=8;)r=r<<8|l[a]&255,a++,t-=8;if(t>0){const h=8-t,p=255>>h<<h;r=r<<t|(l[a]&p)>>h,o+=t}}return this.bitOffset=o,this.byteOffset=a,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ot;(function(N){N[N.PAD_ENCODE=0]="PAD_ENCODE",N[N.ASCII_ENCODE=1]="ASCII_ENCODE",N[N.C40_ENCODE=2]="C40_ENCODE",N[N.TEXT_ENCODE=3]="TEXT_ENCODE",N[N.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",N[N.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",N[N.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ot||(Ot={}));class Rn{static decode(t){const r=new pi(t),o=new ee,a=new ee,l=new Array;let h=Ot.ASCII_ENCODE;do if(h===Ot.ASCII_ENCODE)h=this.decodeAsciiSegment(r,o,a);else{switch(h){case Ot.C40_ENCODE:this.decodeC40Segment(r,o);break;case Ot.TEXT_ENCODE:this.decodeTextSegment(r,o);break;case Ot.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,o);break;case Ot.EDIFACT_ENCODE:this.decodeEdifactSegment(r,o);break;case Ot.BASE256_ENCODE:this.decodeBase256Segment(r,o,l);break;default:throw new U}h=Ot.ASCII_ENCODE}while(h!==Ot.PAD_ENCODE&&r.available()>0);return a.length()>0&&o.append(a.toString()),new Zn(t,o.toString(),l.length===0?null:l,null)}static decodeAsciiSegment(t,r,o){let a=!1;do{let l=t.readBits(8);if(l===0)throw new U;if(l<=128)return a&&(l+=128),r.append(String.fromCharCode(l-1)),Ot.ASCII_ENCODE;if(l===129)return Ot.PAD_ENCODE;if(l<=229){const h=l-130;h<10&&r.append("0"),r.append(""+h)}else switch(l){case 230:return Ot.C40_ENCODE;case 231:return Ot.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),o.insert(0,"");break;case 237:r.append("[)>06"),o.insert(0,"");break;case 238:return Ot.ANSIX12_ENCODE;case 239:return Ot.TEXT_ENCODE;case 240:return Ot.EDIFACT_ENCODE;case 241:break;default:if(l!==254||t.available()!==0)throw new U;break}}while(t.available()>0);return Ot.ASCII_ENCODE}static decodeC40Segment(t,r){let o=!1;const a=[];let l=0;do{if(t.available()===8)return;const h=t.readBits(8);if(h===254)return;this.parseTwoBytes(h,t.readBits(8),a);for(let p=0;p<3;p++){const m=a[p];switch(l){case 0:if(m<3)l=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const y=this.C40_BASIC_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else throw new U;break;case 1:o?(r.append(String.fromCharCode(m+128)),o=!1):r.append(String.fromCharCode(m)),l=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const y=this.C40_SHIFT2_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else switch(m){case 27:r.append("");break;case 30:o=!0;break;default:throw new U}l=0;break;case 3:o?(r.append(String.fromCharCode(m+224)),o=!1):r.append(String.fromCharCode(m+96)),l=0;break;default:throw new U}}}while(t.available()>0)}static decodeTextSegment(t,r){let o=!1,a=[],l=0;do{if(t.available()===8)return;const h=t.readBits(8);if(h===254)return;this.parseTwoBytes(h,t.readBits(8),a);for(let p=0;p<3;p++){const m=a[p];switch(l){case 0:if(m<3)l=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const y=this.TEXT_BASIC_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else throw new U;break;case 1:o?(r.append(String.fromCharCode(m+128)),o=!1):r.append(String.fromCharCode(m)),l=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const y=this.TEXT_SHIFT2_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else switch(m){case 27:r.append("");break;case 30:o=!0;break;default:throw new U}l=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const y=this.TEXT_SHIFT3_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y),l=0}else throw new U;break;default:throw new U}}}while(t.available()>0)}static decodeAnsiX12Segment(t,r){const o=[];do{if(t.available()===8)return;const a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),o);for(let l=0;l<3;l++){const h=o[l];switch(h){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(h<14)r.append(String.fromCharCode(h+44));else if(h<40)r.append(String.fromCharCode(h+51));else throw new U;break}}}while(t.available()>0)}static parseTwoBytes(t,r,o){let a=(t<<8)+r-1,l=Math.floor(a/1600);o[0]=l,a-=l*1600,l=Math.floor(a/40),o[1]=l,o[2]=a-l*40}static decodeEdifactSegment(t,r){do{if(t.available()<=16)return;for(let o=0;o<4;o++){let a=t.readBits(6);if(a===31){const l=8-t.getBitOffset();l!==8&&t.readBits(l);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(t.available()>0)}static decodeBase256Segment(t,r,o){let a=1+t.getByteOffset();const l=this.unrandomize255State(t.readBits(8),a++);let h;if(l===0?h=t.available()/8|0:l<250?h=l:h=250*(l-249)+this.unrandomize255State(t.readBits(8),a++),h<0)throw new U;const p=new Uint8Array(h);for(let m=0;m<h;m++){if(t.available()<8)throw new U;p[m]=this.unrandomize255State(t.readBits(8),a++)}o.push(p);try{r.append(re.decode(p,de.ISO88591))}catch(m){throw new Zt("Platform does not support required encoding: "+m.message)}}static unrandomize255State(t,r){const o=149*r%255+1,a=t-o;return a>=0?a:a+256}}Rn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Rn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Rn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Rn.TEXT_SHIFT2_SET_CHARS=Rn.C40_SHIFT2_SET_CHARS,Rn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class _s{constructor(){this.rsDecoder=new Dn(Xe.DATA_MATRIX_FIELD_256)}decode(t){const r=new it(t),o=r.getVersion(),a=r.readCodewords(),l=xt.getDataBlocks(a,o);let h=0;for(let y of l)h+=y.getNumDataCodewords();const p=new Uint8Array(h),m=l.length;for(let y=0;y<m;y++){const E=l[y],O=E.getCodewords(),P=E.getNumDataCodewords();this.correctErrors(O,P);for(let j=0;j<P;j++)p[j*m+y]=O[j]}return Rn.decode(p)}correctErrors(t,r){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-r)}catch{throw new z}for(let a=0;a<r;a++)t[a]=o[a]}}class Ue{constructor(t){this.image=t,this.rectangleDetector=new nn(this.image)}detect(){const t=this.rectangleDetector.detect();let r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new Q;r=this.shiftToModuleCenter(r);const o=r[0],a=r[1],l=r[2],h=r[3];let p=this.transitionsBetween(o,h)+1,m=this.transitionsBetween(l,h)+1;(p&1)===1&&(p+=1),(m&1)===1&&(m+=1),4*p<7*m&&4*m<7*p&&(p=m=Math.max(p,m));let y=Ue.sampleGrid(this.image,o,a,l,h,p,m);return new kt(y,[o,a,l,h])}static shiftPoint(t,r,o){let a=(r.getX()-t.getX())/(o+1),l=(r.getY()-t.getY())/(o+1);return new Oe(t.getX()+a,t.getY()+l)}static moveAway(t,r,o){let a=t.getX(),l=t.getY();return a<r?a-=1:a+=1,l<o?l-=1:l+=1,new Oe(a,l)}detectSolid1(t){let r=t[0],o=t[1],a=t[3],l=t[2],h=this.transitionsBetween(r,o),p=this.transitionsBetween(o,a),m=this.transitionsBetween(a,l),y=this.transitionsBetween(l,r),E=h,O=[l,r,o,a];return E>p&&(E=p,O[0]=r,O[1]=o,O[2]=a,O[3]=l),E>m&&(E=m,O[0]=o,O[1]=a,O[2]=l,O[3]=r),E>y&&(O[0]=a,O[1]=l,O[2]=r,O[3]=o),O}detectSolid2(t){let r=t[0],o=t[1],a=t[2],l=t[3],h=this.transitionsBetween(r,l),p=Ue.shiftPoint(o,a,(h+1)*4),m=Ue.shiftPoint(a,o,(h+1)*4),y=this.transitionsBetween(p,r),E=this.transitionsBetween(m,l);return y<E?(t[0]=r,t[1]=o,t[2]=a,t[3]=l):(t[0]=o,t[1]=a,t[2]=l,t[3]=r),t}correctTopRight(t){let r=t[0],o=t[1],a=t[2],l=t[3],h=this.transitionsBetween(r,l),p=this.transitionsBetween(o,l),m=Ue.shiftPoint(r,o,(p+1)*4),y=Ue.shiftPoint(a,o,(h+1)*4);h=this.transitionsBetween(m,l),p=this.transitionsBetween(y,l);let E=new Oe(l.getX()+(a.getX()-o.getX())/(h+1),l.getY()+(a.getY()-o.getY())/(h+1)),O=new Oe(l.getX()+(r.getX()-o.getX())/(p+1),l.getY()+(r.getY()-o.getY())/(p+1));if(!this.isValid(E))return this.isValid(O)?O:null;if(!this.isValid(O))return E;let P=this.transitionsBetween(m,E)+this.transitionsBetween(y,E),j=this.transitionsBetween(m,O)+this.transitionsBetween(y,O);return P>j?E:O}shiftToModuleCenter(t){let r=t[0],o=t[1],a=t[2],l=t[3],h=this.transitionsBetween(r,l)+1,p=this.transitionsBetween(a,l)+1,m=Ue.shiftPoint(r,o,p*4),y=Ue.shiftPoint(a,o,h*4);h=this.transitionsBetween(m,l)+1,p=this.transitionsBetween(y,l)+1,(h&1)===1&&(h+=1),(p&1)===1&&(p+=1);let E=(r.getX()+o.getX()+a.getX()+l.getX())/4,O=(r.getY()+o.getY()+a.getY()+l.getY())/4;r=Ue.moveAway(r,E,O),o=Ue.moveAway(o,E,O),a=Ue.moveAway(a,E,O),l=Ue.moveAway(l,E,O);let P,j;return m=Ue.shiftPoint(r,o,p*4),m=Ue.shiftPoint(m,l,h*4),P=Ue.shiftPoint(o,r,p*4),P=Ue.shiftPoint(P,a,h*4),y=Ue.shiftPoint(a,l,p*4),y=Ue.shiftPoint(y,o,h*4),j=Ue.shiftPoint(l,a,p*4),j=Ue.shiftPoint(j,r,h*4),[m,P,y,j]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,r,o,a,l,h,p){return Gn.getInstance().sampleGrid(t,h,p,.5,.5,h-.5,.5,h-.5,p-.5,.5,p-.5,r.getX(),r.getY(),l.getX(),l.getY(),a.getX(),a.getY(),o.getX(),o.getY())}transitionsBetween(t,r){let o=Math.trunc(t.getX()),a=Math.trunc(t.getY()),l=Math.trunc(r.getX()),h=Math.trunc(r.getY()),p=Math.abs(h-a)>Math.abs(l-o);if(p){let J=o;o=a,a=J,J=l,l=h,h=J}let m=Math.abs(l-o),y=Math.abs(h-a),E=-m/2,O=a<h?1:-1,P=o<l?1:-1,j=0,$=this.image.get(p?a:o,p?o:a);for(let J=o,ne=a;J!==l;J+=P){let ue=this.image.get(p?ne:J,p?J:ne);if(ue!==$&&(j++,$=ue),E+=y,E>0){if(ne===h)break;ne+=O,E-=m}}return j}}class yt{constructor(){this.decoder=new _s}decode(t,r=null){let o,a;if(r!=null&&r.has(X.PURE_BARCODE)){const y=yt.extractPureBits(t.getBlackMatrix());o=this.decoder.decode(y),a=yt.NO_POINTS}else{const y=new Ue(t.getBlackMatrix()).detect();o=this.decoder.decode(y.getBits()),a=y.getPoints()}const l=o.getRawBytes(),h=new ye(o.getText(),l,8*l.length,a,ge.DATA_MATRIX,W.currentTimeMillis()),p=o.getByteSegments();p!=null&&h.putMetadata(He.BYTE_SEGMENTS,p);const m=o.getECLevel();return m!=null&&h.putMetadata(He.ERROR_CORRECTION_LEVEL,m),h}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(r==null||o==null)throw new Q;const a=this.moduleSize(r,t);let l=r[1];const h=o[1];let p=r[0];const y=(o[0]-p+1)/a,E=(h-l+1)/a;if(y<=0||E<=0)throw new Q;const O=a/2;l+=O,p+=O;const P=new le(y,E);for(let j=0;j<E;j++){const $=l+j*a;for(let J=0;J<y;J++)t.get(p+J*a,$)&&P.set(J,j)}return P}static moduleSize(t,r){const o=r.getWidth();let a=t[0];const l=t[1];for(;a<o&&r.get(a,l);)a++;if(a===o)throw new Q;const h=a-t[0];if(h===0)throw new Q;return h}}yt.NO_POINTS=[];class Cs extends Ce{constructor(t=500){super(new yt,t)}}var Qn;(function(N){N[N.L=0]="L",N[N.M=1]="M",N[N.Q=2]="Q",N[N.H=3]="H"})(Qn||(Qn={}));class nt{constructor(t,r,o){this.value=t,this.stringValue=r,this.bits=o,nt.FOR_BITS.set(o,this),nt.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return nt.L;case"M":return nt.M;case"Q":return nt.Q;case"H":return nt.H;default:throw new S(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof nt))return!1;const r=t;return this.value===r.value}static forBits(t){if(t<0||t>=nt.FOR_BITS.size)throw new b;return nt.FOR_BITS.get(t)}}nt.FOR_BITS=new Map,nt.FOR_VALUE=new Map,nt.L=new nt(Qn.L,"L",1),nt.M=new nt(Qn.M,"M",0),nt.Q=new nt(Qn.Q,"Q",3),nt.H=new nt(Qn.H,"H",2);class ln{constructor(t){this.errorCorrectionLevel=nt.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,r){return T.bitCount(t^r)}static decodeFormatInformation(t,r){const o=ln.doDecodeFormatInformation(t,r);return o!==null?o:ln.doDecodeFormatInformation(t^ln.FORMAT_INFO_MASK_QR,r^ln.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,r){let o=Number.MAX_SAFE_INTEGER,a=0;for(const l of ln.FORMAT_INFO_DECODE_LOOKUP){const h=l[0];if(h===t||h===r)return new ln(l[1]);let p=ln.numBitsDiffering(t,h);p<o&&(a=l[1],o=p),t!==r&&(p=ln.numBitsDiffering(r,h),p<o&&(a=l[1],o=p))}return o<=3?new ln(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof ln))return!1;const r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}ln.FORMAT_INFO_MASK_QR=21522,ln.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class F{constructor(t,...r){this.ecCodewordsPerBlock=t,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const r=this.ecBlocks;for(const o of r)t+=o.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class M{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ve{constructor(t,r,...o){this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=o;let a=0;const l=o[0].getECCodewordsPerBlock(),h=o[0].getECBlocks();for(const p of h)a+=p.getCount()*(p.getDataCodewords()+l);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new U;try{return this.getVersionForNumber((t-17)/4)}catch{throw new U}}static getVersionForNumber(t){if(t<1||t>40)throw new b;return ve.VERSIONS[t-1]}static decodeVersionInformation(t){let r=Number.MAX_SAFE_INTEGER,o=0;for(let a=0;a<ve.VERSION_DECODE_INFO.length;a++){const l=ve.VERSION_DECODE_INFO[a];if(l===t)return ve.getVersionForNumber(a+7);const h=ln.numBitsDiffering(t,l);h<r&&(o=a+7,r=h)}return r<=3?ve.getVersionForNumber(o):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),r=new le(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);const o=this.alignmentPatternCenters.length;for(let a=0;a<o;a++){const l=this.alignmentPatternCenters[a]-2;for(let h=0;h<o;h++)a===0&&(h===0||h===o-1)||a===o-1&&h===0||r.setRegion(this.alignmentPatternCenters[h]-2,l,5,5)}return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r}toString(){return""+this.versionNumber}}ve.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ve.VERSIONS=[new ve(1,new Int32Array(0),new F(7,new M(1,19)),new F(10,new M(1,16)),new F(13,new M(1,13)),new F(17,new M(1,9))),new ve(2,Int32Array.from([6,18]),new F(10,new M(1,34)),new F(16,new M(1,28)),new F(22,new M(1,22)),new F(28,new M(1,16))),new ve(3,Int32Array.from([6,22]),new F(15,new M(1,55)),new F(26,new M(1,44)),new F(18,new M(2,17)),new F(22,new M(2,13))),new ve(4,Int32Array.from([6,26]),new F(20,new M(1,80)),new F(18,new M(2,32)),new F(26,new M(2,24)),new F(16,new M(4,9))),new ve(5,Int32Array.from([6,30]),new F(26,new M(1,108)),new F(24,new M(2,43)),new F(18,new M(2,15),new M(2,16)),new F(22,new M(2,11),new M(2,12))),new ve(6,Int32Array.from([6,34]),new F(18,new M(2,68)),new F(16,new M(4,27)),new F(24,new M(4,19)),new F(28,new M(4,15))),new ve(7,Int32Array.from([6,22,38]),new F(20,new M(2,78)),new F(18,new M(4,31)),new F(18,new M(2,14),new M(4,15)),new F(26,new M(4,13),new M(1,14))),new ve(8,Int32Array.from([6,24,42]),new F(24,new M(2,97)),new F(22,new M(2,38),new M(2,39)),new F(22,new M(4,18),new M(2,19)),new F(26,new M(4,14),new M(2,15))),new ve(9,Int32Array.from([6,26,46]),new F(30,new M(2,116)),new F(22,new M(3,36),new M(2,37)),new F(20,new M(4,16),new M(4,17)),new F(24,new M(4,12),new M(4,13))),new ve(10,Int32Array.from([6,28,50]),new F(18,new M(2,68),new M(2,69)),new F(26,new M(4,43),new M(1,44)),new F(24,new M(6,19),new M(2,20)),new F(28,new M(6,15),new M(2,16))),new ve(11,Int32Array.from([6,30,54]),new F(20,new M(4,81)),new F(30,new M(1,50),new M(4,51)),new F(28,new M(4,22),new M(4,23)),new F(24,new M(3,12),new M(8,13))),new ve(12,Int32Array.from([6,32,58]),new F(24,new M(2,92),new M(2,93)),new F(22,new M(6,36),new M(2,37)),new F(26,new M(4,20),new M(6,21)),new F(28,new M(7,14),new M(4,15))),new ve(13,Int32Array.from([6,34,62]),new F(26,new M(4,107)),new F(22,new M(8,37),new M(1,38)),new F(24,new M(8,20),new M(4,21)),new F(22,new M(12,11),new M(4,12))),new ve(14,Int32Array.from([6,26,46,66]),new F(30,new M(3,115),new M(1,116)),new F(24,new M(4,40),new M(5,41)),new F(20,new M(11,16),new M(5,17)),new F(24,new M(11,12),new M(5,13))),new ve(15,Int32Array.from([6,26,48,70]),new F(22,new M(5,87),new M(1,88)),new F(24,new M(5,41),new M(5,42)),new F(30,new M(5,24),new M(7,25)),new F(24,new M(11,12),new M(7,13))),new ve(16,Int32Array.from([6,26,50,74]),new F(24,new M(5,98),new M(1,99)),new F(28,new M(7,45),new M(3,46)),new F(24,new M(15,19),new M(2,20)),new F(30,new M(3,15),new M(13,16))),new ve(17,Int32Array.from([6,30,54,78]),new F(28,new M(1,107),new M(5,108)),new F(28,new M(10,46),new M(1,47)),new F(28,new M(1,22),new M(15,23)),new F(28,new M(2,14),new M(17,15))),new ve(18,Int32Array.from([6,30,56,82]),new F(30,new M(5,120),new M(1,121)),new F(26,new M(9,43),new M(4,44)),new F(28,new M(17,22),new M(1,23)),new F(28,new M(2,14),new M(19,15))),new ve(19,Int32Array.from([6,30,58,86]),new F(28,new M(3,113),new M(4,114)),new F(26,new M(3,44),new M(11,45)),new F(26,new M(17,21),new M(4,22)),new F(26,new M(9,13),new M(16,14))),new ve(20,Int32Array.from([6,34,62,90]),new F(28,new M(3,107),new M(5,108)),new F(26,new M(3,41),new M(13,42)),new F(30,new M(15,24),new M(5,25)),new F(28,new M(15,15),new M(10,16))),new ve(21,Int32Array.from([6,28,50,72,94]),new F(28,new M(4,116),new M(4,117)),new F(26,new M(17,42)),new F(28,new M(17,22),new M(6,23)),new F(30,new M(19,16),new M(6,17))),new ve(22,Int32Array.from([6,26,50,74,98]),new F(28,new M(2,111),new M(7,112)),new F(28,new M(17,46)),new F(30,new M(7,24),new M(16,25)),new F(24,new M(34,13))),new ve(23,Int32Array.from([6,30,54,78,102]),new F(30,new M(4,121),new M(5,122)),new F(28,new M(4,47),new M(14,48)),new F(30,new M(11,24),new M(14,25)),new F(30,new M(16,15),new M(14,16))),new ve(24,Int32Array.from([6,28,54,80,106]),new F(30,new M(6,117),new M(4,118)),new F(28,new M(6,45),new M(14,46)),new F(30,new M(11,24),new M(16,25)),new F(30,new M(30,16),new M(2,17))),new ve(25,Int32Array.from([6,32,58,84,110]),new F(26,new M(8,106),new M(4,107)),new F(28,new M(8,47),new M(13,48)),new F(30,new M(7,24),new M(22,25)),new F(30,new M(22,15),new M(13,16))),new ve(26,Int32Array.from([6,30,58,86,114]),new F(28,new M(10,114),new M(2,115)),new F(28,new M(19,46),new M(4,47)),new F(28,new M(28,22),new M(6,23)),new F(30,new M(33,16),new M(4,17))),new ve(27,Int32Array.from([6,34,62,90,118]),new F(30,new M(8,122),new M(4,123)),new F(28,new M(22,45),new M(3,46)),new F(30,new M(8,23),new M(26,24)),new F(30,new M(12,15),new M(28,16))),new ve(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new M(3,117),new M(10,118)),new F(28,new M(3,45),new M(23,46)),new F(30,new M(4,24),new M(31,25)),new F(30,new M(11,15),new M(31,16))),new ve(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new M(7,116),new M(7,117)),new F(28,new M(21,45),new M(7,46)),new F(30,new M(1,23),new M(37,24)),new F(30,new M(19,15),new M(26,16))),new ve(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new M(5,115),new M(10,116)),new F(28,new M(19,47),new M(10,48)),new F(30,new M(15,24),new M(25,25)),new F(30,new M(23,15),new M(25,16))),new ve(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new M(13,115),new M(3,116)),new F(28,new M(2,46),new M(29,47)),new F(30,new M(42,24),new M(1,25)),new F(30,new M(23,15),new M(28,16))),new ve(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new M(17,115)),new F(28,new M(10,46),new M(23,47)),new F(30,new M(10,24),new M(35,25)),new F(30,new M(19,15),new M(35,16))),new ve(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new M(17,115),new M(1,116)),new F(28,new M(14,46),new M(21,47)),new F(30,new M(29,24),new M(19,25)),new F(30,new M(11,15),new M(46,16))),new ve(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new M(13,115),new M(6,116)),new F(28,new M(14,46),new M(23,47)),new F(30,new M(44,24),new M(7,25)),new F(30,new M(59,16),new M(1,17))),new ve(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new M(12,121),new M(7,122)),new F(28,new M(12,47),new M(26,48)),new F(30,new M(39,24),new M(14,25)),new F(30,new M(22,15),new M(41,16))),new ve(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new M(6,121),new M(14,122)),new F(28,new M(6,47),new M(34,48)),new F(30,new M(46,24),new M(10,25)),new F(30,new M(2,15),new M(64,16))),new ve(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new M(17,122),new M(4,123)),new F(28,new M(29,46),new M(14,47)),new F(30,new M(49,24),new M(10,25)),new F(30,new M(24,15),new M(46,16))),new ve(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new M(4,122),new M(18,123)),new F(28,new M(13,46),new M(32,47)),new F(30,new M(48,24),new M(14,25)),new F(30,new M(42,15),new M(32,16))),new ve(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new M(20,117),new M(4,118)),new F(28,new M(40,47),new M(7,48)),new F(30,new M(43,24),new M(22,25)),new F(30,new M(10,15),new M(67,16))),new ve(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new M(19,118),new M(6,119)),new F(28,new M(18,47),new M(31,48)),new F(30,new M(34,24),new M(34,25)),new F(30,new M(20,15),new M(61,16)))];var $e;(function(N){N[N.DATA_MASK_000=0]="DATA_MASK_000",N[N.DATA_MASK_001=1]="DATA_MASK_001",N[N.DATA_MASK_010=2]="DATA_MASK_010",N[N.DATA_MASK_011=3]="DATA_MASK_011",N[N.DATA_MASK_100=4]="DATA_MASK_100",N[N.DATA_MASK_101=5]="DATA_MASK_101",N[N.DATA_MASK_110=6]="DATA_MASK_110",N[N.DATA_MASK_111=7]="DATA_MASK_111"})($e||($e={}));class gt{constructor(t,r){this.value=t,this.isMasked=r}unmaskBitMatrix(t,r){for(let o=0;o<r;o++)for(let a=0;a<r;a++)this.isMasked(o,a)&&t.flip(a,o)}}gt.values=new Map([[$e.DATA_MASK_000,new gt($e.DATA_MASK_000,(N,t)=>(N+t&1)===0)],[$e.DATA_MASK_001,new gt($e.DATA_MASK_001,(N,t)=>(N&1)===0)],[$e.DATA_MASK_010,new gt($e.DATA_MASK_010,(N,t)=>t%3===0)],[$e.DATA_MASK_011,new gt($e.DATA_MASK_011,(N,t)=>(N+t)%3===0)],[$e.DATA_MASK_100,new gt($e.DATA_MASK_100,(N,t)=>(Math.floor(N/2)+Math.floor(t/3)&1)===0)],[$e.DATA_MASK_101,new gt($e.DATA_MASK_101,(N,t)=>N*t%6===0)],[$e.DATA_MASK_110,new gt($e.DATA_MASK_110,(N,t)=>N*t%6<3)],[$e.DATA_MASK_111,new gt($e.DATA_MASK_111,(N,t)=>(N+t+N*t%3&1)===0)]]);class vr{constructor(t){const r=t.getHeight();if(r<21||(r&3)!==1)throw new U;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let l=0;l<6;l++)t=this.copyBit(l,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let l=5;l>=0;l--)t=this.copyBit(8,l,t);const r=this.bitMatrix.getHeight();let o=0;const a=r-7;for(let l=r-1;l>=a;l--)o=this.copyBit(8,l,o);for(let l=r-8;l<r;l++)o=this.copyBit(l,8,o);if(this.parsedFormatInfo=ln.decodeFormatInformation(t,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return ve.getVersionForNumber(r);let o=0;const a=t-11;for(let h=5;h>=0;h--)for(let p=t-9;p>=a;p--)o=this.copyBit(p,h,o);let l=ve.decodeVersionInformation(o);if(l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;o=0;for(let h=5;h>=0;h--)for(let p=t-9;p>=a;p--)o=this.copyBit(h,p,o);if(l=ve.decodeVersionInformation(o),l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;throw new U}copyBit(t,r,o){return(this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r))?o<<1|1:o<<1}readCodewords(){const t=this.readFormatInformation(),r=this.readVersion(),o=gt.values.get(t.getDataMask()),a=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,a);const l=r.buildFunctionPattern();let h=!0;const p=new Uint8Array(r.getTotalCodewords());let m=0,y=0,E=0;for(let O=a-1;O>0;O-=2){O===6&&O--;for(let P=0;P<a;P++){const j=h?a-1-P:P;for(let $=0;$<2;$++)l.get(O-$,j)||(E++,y<<=1,this.bitMatrix.get(O-$,j)&&(y|=1),E===8&&(p[m++]=y,E=0,y=0))}h=!h}if(m!==r.getTotalCodewords())throw new U;return p}remask(){if(this.parsedFormatInfo===null)return;const t=gt.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let r=0,o=t.getWidth();r<o;r++)for(let a=r+1,l=t.getHeight();a<l;a++)t.get(r,a)!==t.get(a,r)&&(t.flip(a,r),t.flip(r,a))}}class sr{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r,o){if(t.length!==r.getTotalCodewords())throw new b;const a=r.getECBlocksForLevel(o);let l=0;const h=a.getECBlocks();for(const $ of h)l+=$.getCount();const p=new Array(l);let m=0;for(const $ of h)for(let J=0;J<$.getCount();J++){const ne=$.getDataCodewords(),ue=a.getECCodewordsPerBlock()+ne;p[m++]=new sr(ne,new Uint8Array(ue))}const y=p[0].codewords.length;let E=p.length-1;for(;E>=0&&p[E].codewords.length!==y;)E--;E++;const O=y-a.getECCodewordsPerBlock();let P=0;for(let $=0;$<O;$++)for(let J=0;J<m;J++)p[J].codewords[$]=t[P++];for(let $=E;$<m;$++)p[$].codewords[O]=t[P++];const j=p[0].codewords.length;for(let $=O;$<j;$++)for(let J=0;J<m;J++){const ne=J<E?$:$+1;p[J].codewords[ne]=t[P++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var un;(function(N){N[N.TERMINATOR=0]="TERMINATOR",N[N.NUMERIC=1]="NUMERIC",N[N.ALPHANUMERIC=2]="ALPHANUMERIC",N[N.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",N[N.BYTE=4]="BYTE",N[N.ECI=5]="ECI",N[N.KANJI=6]="KANJI",N[N.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",N[N.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",N[N.HANZI=9]="HANZI"})(un||(un={}));class Le{constructor(t,r,o,a){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=o,this.bits=a,Le.FOR_BITS.set(a,this),Le.FOR_VALUE.set(t,this)}static forBits(t){const r=Le.FOR_BITS.get(t);if(r===void 0)throw new b;return r}getCharacterCountBits(t){const r=t.getVersionNumber();let o;return r<=9?o=0:r<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Le))return!1;const r=t;return this.value===r.value}toString(){return this.stringValue}}Le.FOR_BITS=new Map,Le.FOR_VALUE=new Map,Le.TERMINATOR=new Le(un.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Le.NUMERIC=new Le(un.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Le.ALPHANUMERIC=new Le(un.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Le.STRUCTURED_APPEND=new Le(un.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Le.BYTE=new Le(un.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Le.ECI=new Le(un.ECI,"ECI",Int32Array.from([0,0,0]),7),Le.KANJI=new Le(un.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Le.FNC1_FIRST_POSITION=new Le(un.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Le.FNC1_SECOND_POSITION=new Le(un.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Le.HANZI=new Le(un.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class ct{static decode(t,r,o,a){const l=new pi(t);let h=new ee;const p=new Array;let m=-1,y=-1;try{let E=null,O=!1,P;do{if(l.available()<4)P=Le.TERMINATOR;else{const j=l.readBits(4);P=Le.forBits(j)}switch(P){case Le.TERMINATOR:break;case Le.FNC1_FIRST_POSITION:case Le.FNC1_SECOND_POSITION:O=!0;break;case Le.STRUCTURED_APPEND:if(l.available()<16)throw new U;m=l.readBits(8),y=l.readBits(8);break;case Le.ECI:const j=ct.parseECIValue(l);if(E=G.getCharacterSetECIByValue(j),E===null)throw new U;break;case Le.HANZI:const $=l.readBits(4),J=l.readBits(P.getCharacterCountBits(r));$===ct.GB2312_SUBSET&&ct.decodeHanziSegment(l,h,J);break;default:const ne=l.readBits(P.getCharacterCountBits(r));switch(P){case Le.NUMERIC:ct.decodeNumericSegment(l,h,ne);break;case Le.ALPHANUMERIC:ct.decodeAlphanumericSegment(l,h,ne,O);break;case Le.BYTE:ct.decodeByteSegment(l,h,ne,E,p,a);break;case Le.KANJI:ct.decodeKanjiSegment(l,h,ne);break;default:throw new U}break}}while(P!==Le.TERMINATOR)}catch{throw new U}return new Zn(t,h.toString(),p.length===0?null:p,o===null?null:o.toString(),m,y)}static decodeHanziSegment(t,r,o){if(o*13>t.available())throw new U;const a=new Uint8Array(2*o);let l=0;for(;o>0;){const h=t.readBits(13);let p=h/96<<8&4294967295|h%96;p<959?p+=41377:p+=42657,a[l]=p>>8&255,a[l+1]=p&255,l+=2,o--}try{r.append(re.decode(a,de.GB2312))}catch(h){throw new U(h)}}static decodeKanjiSegment(t,r,o){if(o*13>t.available())throw new U;const a=new Uint8Array(2*o);let l=0;for(;o>0;){const h=t.readBits(13);let p=h/192<<8&4294967295|h%192;p<7936?p+=33088:p+=49472,a[l]=p>>8,a[l+1]=p,l+=2,o--}try{r.append(re.decode(a,de.SHIFT_JIS))}catch(h){throw new U(h)}}static decodeByteSegment(t,r,o,a,l,h){if(8*o>t.available())throw new U;const p=new Uint8Array(o);for(let y=0;y<o;y++)p[y]=t.readBits(8);let m;a===null?m=de.guessEncoding(p,h):m=a.getName();try{r.append(re.decode(p,m))}catch(y){throw new U(y)}l.push(p)}static toAlphaNumericChar(t){if(t>=ct.ALPHANUMERIC_CHARS.length)throw new U;return ct.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,r,o,a){const l=r.length();for(;o>1;){if(t.available()<11)throw new U;const h=t.readBits(11);r.append(ct.toAlphaNumericChar(Math.floor(h/45))),r.append(ct.toAlphaNumericChar(h%45)),o-=2}if(o===1){if(t.available()<6)throw new U;r.append(ct.toAlphaNumericChar(t.readBits(6)))}if(a)for(let h=l;h<r.length();h++)r.charAt(h)==="%"&&(h<r.length()-1&&r.charAt(h+1)==="%"?r.deleteCharAt(h+1):r.setCharAt(h,""))}static decodeNumericSegment(t,r,o){for(;o>=3;){if(t.available()<10)throw new U;const a=t.readBits(10);if(a>=1e3)throw new U;r.append(ct.toAlphaNumericChar(Math.floor(a/100))),r.append(ct.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(ct.toAlphaNumericChar(a%10)),o-=3}if(o===2){if(t.available()<7)throw new U;const a=t.readBits(7);if(a>=100)throw new U;r.append(ct.toAlphaNumericChar(Math.floor(a/10))),r.append(ct.toAlphaNumericChar(a%10))}else if(o===1){if(t.available()<4)throw new U;const a=t.readBits(4);if(a>=10)throw new U;r.append(ct.toAlphaNumericChar(a))}}static parseECIValue(t){const r=t.readBits(8);if(!(r&128))return r&127;if((r&192)===128){const o=t.readBits(8);return(r&63)<<8&4294967295|o}if((r&224)===192){const o=t.readBits(16);return(r&31)<<16&4294967295|o}throw new U}}ct.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",ct.GB2312_SUBSET=1;class In{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const r=t[0];t[0]=t[2],t[2]=r}}class wr{constructor(){this.rsDecoder=new Dn(Xe.QR_CODE_FIELD_256)}decodeBooleanArray(t,r){return this.decodeBitMatrix(le.parseFromBooleanArray(t),r)}decodeBitMatrix(t,r){const o=new vr(t);let a=null;try{return this.decodeBitMatrixParser(o,r)}catch(l){a=l}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const l=this.decodeBitMatrixParser(o,r);return l.setOther(new In(!0)),l}catch(l){throw a!==null?a:l}}decodeBitMatrixParser(t,r){const o=t.readVersion(),a=t.readFormatInformation().getErrorCorrectionLevel(),l=t.readCodewords(),h=sr.getDataBlocks(l,o,a);let p=0;for(const E of h)p+=E.getNumDataCodewords();const m=new Uint8Array(p);let y=0;for(const E of h){const O=E.getCodewords(),P=E.getNumDataCodewords();this.correctErrors(O,P);for(let j=0;j<P;j++)m[y++]=O[j]}return ct.decode(m,o,a,r)}correctErrors(t,r){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-r)}catch{throw new z}for(let a=0;a<r;a++)t[a]=o[a]}}class yr extends Oe{constructor(t,r,o){super(t,r),this.estimatedModuleSize=o}aboutEquals(t,r,o){if(Math.abs(r-this.getY())<=t&&Math.abs(o-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,r,o){const a=(this.getX()+r)/2,l=(this.getY()+t)/2,h=(this.estimatedModuleSize+o)/2;return new yr(a,l,h)}}class _r{constructor(t,r,o,a,l,h,p){this.image=t,this.startX=r,this.startY=o,this.width=a,this.height=l,this.moduleSize=h,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,r=this.height,o=this.width,a=t+o,l=this.startY+r/2,h=new Int32Array(3),p=this.image;for(let m=0;m<r;m++){const y=l+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));h[0]=0,h[1]=0,h[2]=0;let E=t;for(;E<a&&!p.get(E,y);)E++;let O=0;for(;E<a;){if(p.get(E,y))if(O===1)h[1]++;else if(O===2){if(this.foundPatternCross(h)){const P=this.handlePossibleCenter(h,y,E);if(P!==null)return P}h[0]=h[2],h[1]=1,h[2]=0,O=1}else h[++O]++;else O===1&&O++,h[O]++;E++}if(this.foundPatternCross(h)){const P=this.handlePossibleCenter(h,y,a);if(P!==null)return P}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Q}static centerFromEnd(t,r){return r-t[2]-t[1]/2}foundPatternCross(t){const r=this.moduleSize,o=r/2;for(let a=0;a<3;a++)if(Math.abs(r-t[a])>=o)return!1;return!0}crossCheckVertical(t,r,o,a){const l=this.image,h=l.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let m=t;for(;m>=0&&l.get(r,m)&&p[1]<=o;)p[1]++,m--;if(m<0||p[1]>o)return NaN;for(;m>=0&&!l.get(r,m)&&p[0]<=o;)p[0]++,m--;if(p[0]>o)return NaN;for(m=t+1;m<h&&l.get(r,m)&&p[1]<=o;)p[1]++,m++;if(m===h||p[1]>o)return NaN;for(;m<h&&!l.get(r,m)&&p[2]<=o;)p[2]++,m++;if(p[2]>o)return NaN;const y=p[0]+p[1]+p[2];return 5*Math.abs(y-a)>=2*a?NaN:this.foundPatternCross(p)?_r.centerFromEnd(p,m):NaN}handlePossibleCenter(t,r,o){const a=t[0]+t[1]+t[2],l=_r.centerFromEnd(t,o),h=this.crossCheckVertical(r,l,2*t[1],a);if(!isNaN(h)){const p=(t[0]+t[1]+t[2])/3;for(const y of this.possibleCenters)if(y.aboutEquals(p,h,l))return y.combineEstimate(h,l,p);const m=new yr(l,h,p);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class or extends Oe{constructor(t,r,o,a){super(t,r),this.estimatedModuleSize=o,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,r,o){if(Math.abs(r-this.getY())<=t&&Math.abs(o-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,r,o){const a=this.count+1,l=(this.count*this.getX()+r)/a,h=(this.count*this.getY()+t)/a,p=(this.count*this.estimatedModuleSize+o)/a;return new or(l,h,p,a)}}class $r{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class ht{constructor(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const r=t!=null&&t.get(X.TRY_HARDER)!==void 0,o=t!=null&&t.get(X.PURE_BARCODE)!==void 0,a=this.image,l=a.getHeight(),h=a.getWidth();let p=Math.floor(3*l/(4*ht.MAX_MODULES));(p<ht.MIN_SKIP||r)&&(p=ht.MIN_SKIP);let m=!1;const y=new Int32Array(5);for(let O=p-1;O<l&&!m;O+=p){y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0;let P=0;for(let j=0;j<h;j++)if(a.get(j,O))(P&1)===1&&P++,y[P]++;else if(P&1)y[P]++;else if(P===4)if(ht.foundPatternCross(y)){if(this.handlePossibleCenter(y,O,j,o)===!0)if(p=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const J=this.findRowSkip();J>y[2]&&(O+=J-y[2]-p,j=h-1)}else{y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,P=3;continue}P=0,y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0}else y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,P=3;else y[++P]++;ht.foundPatternCross(y)&&this.handlePossibleCenter(y,O,h,o)===!0&&(p=y[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return Oe.orderBestPatterns(E),new $r(E)}static centerFromEnd(t,r){return r-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let r=0;for(let l=0;l<5;l++){const h=t[l];if(h===0)return!1;r+=h}if(r<7)return!1;const o=r/7,a=o/2;return Math.abs(o-t[0])<a&&Math.abs(o-t[1])<a&&Math.abs(3*o-t[2])<3*a&&Math.abs(o-t[3])<a&&Math.abs(o-t[4])<a}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,r,o,a){const l=this.getCrossCheckStateCount();let h=0;const p=this.image;for(;t>=h&&r>=h&&p.get(r-h,t-h);)l[2]++,h++;if(t<h||r<h)return!1;for(;t>=h&&r>=h&&!p.get(r-h,t-h)&&l[1]<=o;)l[1]++,h++;if(t<h||r<h||l[1]>o)return!1;for(;t>=h&&r>=h&&p.get(r-h,t-h)&&l[0]<=o;)l[0]++,h++;if(l[0]>o)return!1;const m=p.getHeight(),y=p.getWidth();for(h=1;t+h<m&&r+h<y&&p.get(r+h,t+h);)l[2]++,h++;if(t+h>=m||r+h>=y)return!1;for(;t+h<m&&r+h<y&&!p.get(r+h,t+h)&&l[3]<o;)l[3]++,h++;if(t+h>=m||r+h>=y||l[3]>=o)return!1;for(;t+h<m&&r+h<y&&p.get(r+h,t+h)&&l[4]<o;)l[4]++,h++;if(l[4]>=o)return!1;const E=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(E-a)<2*a&&ht.foundPatternCross(l)}crossCheckVertical(t,r,o,a){const l=this.image,h=l.getHeight(),p=this.getCrossCheckStateCount();let m=t;for(;m>=0&&l.get(r,m);)p[2]++,m--;if(m<0)return NaN;for(;m>=0&&!l.get(r,m)&&p[1]<=o;)p[1]++,m--;if(m<0||p[1]>o)return NaN;for(;m>=0&&l.get(r,m)&&p[0]<=o;)p[0]++,m--;if(p[0]>o)return NaN;for(m=t+1;m<h&&l.get(r,m);)p[2]++,m++;if(m===h)return NaN;for(;m<h&&!l.get(r,m)&&p[3]<o;)p[3]++,m++;if(m===h||p[3]>=o)return NaN;for(;m<h&&l.get(r,m)&&p[4]<o;)p[4]++,m++;if(p[4]>=o)return NaN;const y=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(y-a)>=2*a?NaN:ht.foundPatternCross(p)?ht.centerFromEnd(p,m):NaN}crossCheckHorizontal(t,r,o,a){const l=this.image,h=l.getWidth(),p=this.getCrossCheckStateCount();let m=t;for(;m>=0&&l.get(m,r);)p[2]++,m--;if(m<0)return NaN;for(;m>=0&&!l.get(m,r)&&p[1]<=o;)p[1]++,m--;if(m<0||p[1]>o)return NaN;for(;m>=0&&l.get(m,r)&&p[0]<=o;)p[0]++,m--;if(p[0]>o)return NaN;for(m=t+1;m<h&&l.get(m,r);)p[2]++,m++;if(m===h)return NaN;for(;m<h&&!l.get(m,r)&&p[3]<o;)p[3]++,m++;if(m===h||p[3]>=o)return NaN;for(;m<h&&l.get(m,r)&&p[4]<o;)p[4]++,m++;if(p[4]>=o)return NaN;const y=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(y-a)>=a?NaN:ht.foundPatternCross(p)?ht.centerFromEnd(p,m):NaN}handlePossibleCenter(t,r,o,a){const l=t[0]+t[1]+t[2]+t[3]+t[4];let h=ht.centerFromEnd(t,o),p=this.crossCheckVertical(r,Math.floor(h),t[2],l);if(!isNaN(p)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(p),t[2],l),!isNaN(h)&&(!a||this.crossCheckDiagonal(Math.floor(p),Math.floor(h),t[2],l)))){const m=l/7;let y=!1;const E=this.possibleCenters;for(let O=0,P=E.length;O<P;O++){const j=E[O];if(j.aboutEquals(m,p,h)){E[O]=j.combineEstimate(p,h,m),y=!0;break}}if(!y){const O=new or(h,p,m);E.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const o of this.possibleCenters)if(o.getCount()>=ht.CENTER_QUORUM)if(r==null)r=o;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-o.getX())-Math.abs(r.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,r=0;const o=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=ht.CENTER_QUORUM&&(t++,r+=h.getEstimatedModuleSize());if(t<3)return!1;const a=r/o;let l=0;for(const h of this.possibleCenters)l+=Math.abs(h.getEstimatedModuleSize()-a);return l<=.05*r}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new Q;const r=this.possibleCenters;let o;if(t>3){let a=0,l=0;for(const m of this.possibleCenters){const y=m.getEstimatedModuleSize();a+=y,l+=y*y}o=a/t;let h=Math.sqrt(l/t-o*o);r.sort((m,y)=>{const E=Math.abs(y.getEstimatedModuleSize()-o),O=Math.abs(m.getEstimatedModuleSize()-o);return E<O?-1:E>O?1:0});const p=Math.max(.2*o,h);for(let m=0;m<r.length&&r.length>3;m++){const y=r[m];Math.abs(y.getEstimatedModuleSize()-o)>p&&(r.splice(m,1),m--)}}if(r.length>3){let a=0;for(const l of r)a+=l.getEstimatedModuleSize();o=a/r.length,r.sort((l,h)=>{if(h.getCount()===l.getCount()){const p=Math.abs(h.getEstimatedModuleSize()-o),m=Math.abs(l.getEstimatedModuleSize()-o);return p<m?1:p>m?-1:0}else return h.getCount()-l.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}ht.CENTER_QUORUM=2,ht.MIN_SKIP=3,ht.MAX_MODULES=57;class Ze{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(X.NEED_RESULT_POINT_CALLBACK);const o=new ht(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(o)}processFinderPatternInfo(t){const r=t.getTopLeft(),o=t.getTopRight(),a=t.getBottomLeft(),l=this.calculateModuleSize(r,o,a);if(l<1)throw new Q("No pattern found in proccess finder.");const h=Ze.computeDimension(r,o,a,l),p=ve.getProvisionalVersionForDimension(h),m=p.getDimensionForVersion()-7;let y=null;if(p.getAlignmentPatternCenters().length>0){const j=o.getX()-r.getX()+a.getX(),$=o.getY()-r.getY()+a.getY(),J=1-3/m,ne=Math.floor(r.getX()+J*(j-r.getX())),ue=Math.floor(r.getY()+J*($-r.getY()));for(let Ie=4;Ie<=16;Ie<<=1)try{y=this.findAlignmentInRegion(l,ne,ue,Ie);break}catch(be){if(!(be instanceof Q))throw be}}const E=Ze.createTransform(r,o,a,y,h),O=Ze.sampleGrid(this.image,E,h);let P;return y===null?P=[a,r,o]:P=[a,r,o,y],new kt(O,P)}static createTransform(t,r,o,a,l){const h=l-3.5;let p,m,y,E;return a!==null?(p=a.getX(),m=a.getY(),y=h-3,E=y):(p=r.getX()-t.getX()+o.getX(),m=r.getY()-t.getY()+o.getY(),y=h,E=h),bt.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,y,E,3.5,h,t.getX(),t.getY(),r.getX(),r.getY(),p,m,o.getX(),o.getY())}static sampleGrid(t,r,o){return Gn.getInstance().sampleGridWithTransform(t,o,o,r)}static computeDimension(t,r,o,a){const l=Ge.round(Oe.distance(t,r)/a),h=Ge.round(Oe.distance(t,o)/a);let p=Math.floor((l+h)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new Q("Dimensions could be not found.")}return p}calculateModuleSize(t,r,o){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,o))/2}calculateModuleSizeOneWay(t,r){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(o)?a/7:isNaN(a)?o/7:(o+a)/14}sizeOfBlackWhiteBlackRunBothWays(t,r,o,a){let l=this.sizeOfBlackWhiteBlackRun(t,r,o,a),h=1,p=t-(o-t);p<0?(h=t/(t-p),p=0):p>=this.image.getWidth()&&(h=(this.image.getWidth()-1-t)/(p-t),p=this.image.getWidth()-1);let m=Math.floor(r-(a-r)*h);return h=1,m<0?(h=r/(r-m),m=0):m>=this.image.getHeight()&&(h=(this.image.getHeight()-1-r)/(m-r),m=this.image.getHeight()-1),p=Math.floor(t+(p-t)*h),l+=this.sizeOfBlackWhiteBlackRun(t,r,p,m),l-1}sizeOfBlackWhiteBlackRun(t,r,o,a){const l=Math.abs(a-r)>Math.abs(o-t);if(l){let j=t;t=r,r=j,j=o,o=a,a=j}const h=Math.abs(o-t),p=Math.abs(a-r);let m=-h/2;const y=t<o?1:-1,E=r<a?1:-1;let O=0;const P=o+y;for(let j=t,$=r;j!==P;j+=y){const J=l?$:j,ne=l?j:$;if(O===1===this.image.get(J,ne)){if(O===2)return Ge.distance(j,$,t,r);O++}if(m+=p,m>0){if($===a)break;$+=E,m-=h}}return O===2?Ge.distance(o+y,a,t,r):NaN}findAlignmentInRegion(t,r,o,a){const l=Math.floor(a*t),h=Math.max(0,r-l),p=Math.min(this.image.getWidth()-1,r+l);if(p-h<t*3)throw new Q("Alignment top exceeds estimated module size.");const m=Math.max(0,o-l),y=Math.min(this.image.getHeight()-1,o+l);if(y-m<t*3)throw new Q("Alignment bottom exceeds estimated module size.");return new _r(this.image,h,m,p-h,y-m,t,this.resultPointCallback).find()}}class cn{constructor(){this.decoder=new wr}getDecoder(){return this.decoder}decode(t,r){let o,a;if(r!=null&&r.get(X.PURE_BARCODE)!==void 0){const m=cn.extractPureBits(t.getBlackMatrix());o=this.decoder.decodeBitMatrix(m,r),a=cn.NO_POINTS}else{const m=new Ze(t.getBlackMatrix()).detect(r);o=this.decoder.decodeBitMatrix(m.getBits(),r),a=m.getPoints()}o.getOther()instanceof In&&o.getOther().applyMirroredCorrection(a);const l=new ye(o.getText(),o.getRawBytes(),void 0,a,ge.QR_CODE,void 0),h=o.getByteSegments();h!==null&&l.putMetadata(He.BYTE_SEGMENTS,h);const p=o.getECLevel();return p!==null&&l.putMetadata(He.ERROR_CORRECTION_LEVEL,p),o.hasStructuredAppend()&&(l.putMetadata(He.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),l.putMetadata(He.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),l}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(r===null||o===null)throw new Q;const a=this.moduleSize(r,t);let l=r[1],h=o[1],p=r[0],m=o[0];if(p>=m||l>=h)throw new Q;if(h-l!==m-p&&(m=p+(h-l),m>=t.getWidth()))throw new Q;const y=Math.round((m-p+1)/a),E=Math.round((h-l+1)/a);if(y<=0||E<=0)throw new Q;if(E!==y)throw new Q;const O=Math.floor(a/2);l+=O,p+=O;const P=p+Math.floor((y-1)*a)-m;if(P>0){if(P>O)throw new Q;p-=P}const j=l+Math.floor((E-1)*a)-h;if(j>0){if(j>O)throw new Q;l-=j}const $=new le(y,E);for(let J=0;J<E;J++){const ne=l+Math.floor(J*a);for(let ue=0;ue<y;ue++)t.get(p+Math.floor(ue*a),ne)&&$.set(ue,J)}return $}static moduleSize(t,r){const o=r.getHeight(),a=r.getWidth();let l=t[0],h=t[1],p=!0,m=0;for(;l<a&&h<o;){if(p!==r.get(l,h)){if(++m===5)break;p=!p}l++,h++}if(l===a||h===o)throw new Q;return(l-t[0])/7}}cn.NO_POINTS=new Array;class ke{PDF417Common(){}static getBitCountSum(t){return Ge.sum(t)}static toIntArray(t){if(t==null||!t.length)return ke.EMPTY_INT_ARRAY;const r=new Int32Array(t.length);let o=0;for(const a of t)r[o++]=a;return r}static getCodeword(t){const r=k.binarySearch(ke.SYMBOL_TABLE,t&262143);return r<0?-1:(ke.CODEWORD_TABLE[r]-1)%ke.NUMBER_OF_CODEWORDS}}ke.NUMBER_OF_CODEWORDS=929,ke.MAX_CODEWORDS_IN_BARCODE=ke.NUMBER_OF_CODEWORDS-1,ke.MIN_ROWS_IN_BARCODE=3,ke.MAX_ROWS_IN_BARCODE=90,ke.MODULES_IN_CODEWORD=17,ke.MODULES_IN_STOP_PATTERN=18,ke.BARS_IN_MODULE=8,ke.EMPTY_INT_ARRAY=new Int32Array([]),ke.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ke.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class za{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Je{static detectMultiple(t,r,o){let a=t.getBlackMatrix(),l=Je.detect(o,a);return l.length||(a=a.clone(),a.rotate180(),l=Je.detect(o,a)),new za(a,l)}static detect(t,r){const o=new Array;let a=0,l=0,h=!1;for(;a<r.getHeight();){const p=Je.findVertices(r,a,l);if(p[0]==null&&p[3]==null){if(!h)break;h=!1,l=0;for(const m of o)m[1]!=null&&(a=Math.trunc(Math.max(a,m[1].getY()))),m[3]!=null&&(a=Math.max(a,Math.trunc(m[3].getY())));a+=Je.ROW_STEP;continue}if(h=!0,o.push(p),!t)break;p[2]!=null?(l=Math.trunc(p[2].getX()),a=Math.trunc(p[2].getY())):(l=Math.trunc(p[4].getX()),a=Math.trunc(p[4].getY()))}return o}static findVertices(t,r,o){const a=t.getHeight(),l=t.getWidth(),h=new Array(8);return Je.copyToResult(h,Je.findRowsWithPattern(t,a,l,r,o,Je.START_PATTERN),Je.INDEXES_START_PATTERN),h[4]!=null&&(o=Math.trunc(h[4].getX()),r=Math.trunc(h[4].getY())),Je.copyToResult(h,Je.findRowsWithPattern(t,a,l,r,o,Je.STOP_PATTERN),Je.INDEXES_STOP_PATTERN),h}static copyToResult(t,r,o){for(let a=0;a<o.length;a++)t[o[a]]=r[a]}static findRowsWithPattern(t,r,o,a,l,h){const p=new Array(4);let m=!1;const y=new Int32Array(h.length);for(;a<r;a+=Je.ROW_STEP){let O=Je.findGuardPattern(t,l,a,o,!1,h,y);if(O!=null){for(;a>0;){const P=Je.findGuardPattern(t,l,--a,o,!1,h,y);if(P!=null)O=P;else{a++;break}}p[0]=new Oe(O[0],a),p[1]=new Oe(O[1],a),m=!0;break}}let E=a+1;if(m){let O=0,P=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;E<r;E++){const j=Je.findGuardPattern(t,P[0],E,o,!1,h,y);if(j!=null&&Math.abs(P[0]-j[0])<Je.MAX_PATTERN_DRIFT&&Math.abs(P[1]-j[1])<Je.MAX_PATTERN_DRIFT)P=j,O=0;else{if(O>Je.SKIPPED_ROW_COUNT_MAX)break;O++}}E-=O+1,p[2]=new Oe(P[0],E),p[3]=new Oe(P[1],E)}return E-a<Je.BARCODE_MIN_HEIGHT&&k.fill(p,null),p}static findGuardPattern(t,r,o,a,l,h,p){k.fillWithin(p,0,p.length,0);let m=r,y=0;for(;t.get(m,o)&&m>0&&y++<Je.MAX_PIXEL_DRIFT;)m--;let E=m,O=0,P=h.length;for(let j=l;E<a;E++)if(t.get(E,o)!==j)p[O]++;else{if(O===P-1){if(Je.patternMatchVariance(p,h,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE)return new Int32Array([m,E]);m+=p[0]+p[1],W.arraycopy(p,2,p,0,O-1),p[O-1]=0,p[O]=0,O--}else O++;p[O]=1,j=!j}return O===P-1&&Je.patternMatchVariance(p,h,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE?new Int32Array([m,E-1]):null}static patternMatchVariance(t,r,o){let a=t.length,l=0,h=0;for(let y=0;y<a;y++)l+=t[y],h+=r[y];if(l<h)return 1/0;let p=l/h;o*=p;let m=0;for(let y=0;y<a;y++){let E=t[y],O=r[y]*p,P=E>O?E-O:O-E;if(P>o)return 1/0;m+=P}return m/l}}Je.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Je.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Je.MAX_AVG_VARIANCE=.42,Je.MAX_INDIVIDUAL_VARIANCE=.8,Je.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Je.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Je.MAX_PIXEL_DRIFT=3,Je.MAX_PATTERN_DRIFT=5,Je.SKIPPED_ROW_COUNT_MAX=25,Je.ROW_STEP=5,Je.BARCODE_MIN_HEIGHT=10;class hn{constructor(t,r){if(r.length===0)throw new b;this.field=t;let o=r.length;if(o>1&&r[0]===0){let a=1;for(;a<o&&r[a]===0;)a++;a===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-a),W.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let a=0;for(let l of this.coefficients)a=this.field.add(a,l);return a}let r=this.coefficients[0],o=this.coefficients.length;for(let a=1;a<o;a++)r=this.field.add(this.field.multiply(t,r),this.coefficients[a]);return r}add(t){if(!this.field.equals(t.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,o=t.coefficients;if(r.length>o.length){let h=r;r=o,o=h}let a=new Int32Array(o.length),l=o.length-r.length;W.arraycopy(o,0,a,0,l);for(let h=l;h<o.length;h++)a[h]=this.field.add(r[h-l],o[h]);return new hn(this.field,a)}subtract(t){if(!this.field.equals(t.field))throw new b("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof hn?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new hn(this.field,new Int32Array([0]));let r=this.coefficients,o=r.length,a=t.coefficients,l=a.length,h=new Int32Array(o+l-1);for(let p=0;p<o;p++){let m=r[p];for(let y=0;y<l;y++)h[p+y]=this.field.add(h[p+y],this.field.multiply(m,a[y]))}return new hn(this.field,h)}negative(){let t=this.coefficients.length,r=new Int32Array(t);for(let o=0;o<t;o++)r[o]=this.field.subtract(0,this.coefficients[o]);return new hn(this.field,r)}multiplyScalar(t){if(t===0)return new hn(this.field,new Int32Array([0]));if(t===1)return this;let r=this.coefficients.length,o=new Int32Array(r);for(let a=0;a<r;a++)o[a]=this.field.multiply(this.coefficients[a],t);return new hn(this.field,o)}multiplyByMonomial(t,r){if(t<0)throw new b;if(r===0)return new hn(this.field,new Int32Array([0]));let o=this.coefficients.length,a=new Int32Array(o+t);for(let l=0;l<o;l++)a[l]=this.field.multiply(this.coefficients[l],r);return new hn(this.field,a)}toString(){let t=new ee;for(let r=this.getDegree();r>=0;r--){let o=this.getCoefficient(r);o!==0&&(o<0?(t.append(" - "),o=-o):t.length()>0&&t.append(" + "),(r===0||o!==1)&&t.append(o),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()}}class Mo{add(t,r){return(t+r)%this.modulus}subtract(t,r){return(this.modulus+t-r)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new b;return this.logTable[t]}inverse(t){if(t===0)throw new vt;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class qr extends Mo{constructor(t,r){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let o=1;for(let a=0;a<t;a++)this.expTable[a]=o,o=o*r%t;for(let a=0;a<t-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new hn(this,new Int32Array([0])),this.one=new hn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new b;if(r===0)return this.zero;let o=new Int32Array(t+1);return o[0]=r,new hn(this,o)}}qr.PDF417_GF=new qr(ke.NUMBER_OF_CODEWORDS,3);class Us{constructor(){this.field=qr.PDF417_GF}decode(t,r,o){let a=new hn(this.field,t),l=new Int32Array(r),h=!1;for(let $=r;$>0;$--){let J=a.evaluateAt(this.field.exp($));l[r-$]=J,J!==0&&(h=!0)}if(!h)return 0;let p=this.field.getOne();if(o!=null)for(const $ of o){let J=this.field.exp(t.length-1-$),ne=new hn(this.field,new Int32Array([this.field.subtract(0,J),1]));p=p.multiply(ne)}let m=new hn(this.field,l),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),m,r),E=y[0],O=y[1],P=this.findErrorLocations(E),j=this.findErrorMagnitudes(O,E,P);for(let $=0;$<P.length;$++){let J=t.length-1-this.field.log(P[$]);if(J<0)throw z.getChecksumInstance();t[J]=this.field.subtract(t[J],j[$])}return P.length}runEuclideanAlgorithm(t,r,o){if(t.getDegree()<r.getDegree()){let P=t;t=r,r=P}let a=t,l=r,h=this.field.getZero(),p=this.field.getOne();for(;l.getDegree()>=Math.round(o/2);){let P=a,j=h;if(a=l,h=p,a.isZero())throw z.getChecksumInstance();l=P;let $=this.field.getZero(),J=a.getCoefficient(a.getDegree()),ne=this.field.inverse(J);for(;l.getDegree()>=a.getDegree()&&!l.isZero();){let ue=l.getDegree()-a.getDegree(),Ie=this.field.multiply(l.getCoefficient(l.getDegree()),ne);$=$.add(this.field.buildMonomial(ue,Ie)),l=l.subtract(a.multiplyByMonomial(ue,Ie))}p=$.multiply(h).subtract(j).negative()}let m=p.getCoefficient(0);if(m===0)throw z.getChecksumInstance();let y=this.field.inverse(m),E=p.multiply(y),O=l.multiply(y);return[E,O]}findErrorLocations(t){let r=t.getDegree(),o=new Int32Array(r),a=0;for(let l=1;l<this.field.getSize()&&a<r;l++)t.evaluateAt(l)===0&&(o[a]=this.field.inverse(l),a++);if(a!==r)throw z.getChecksumInstance();return o}findErrorMagnitudes(t,r,o){let a=r.getDegree(),l=new Int32Array(a);for(let y=1;y<=a;y++)l[a-y]=this.field.multiply(y,r.getCoefficient(y));let h=new hn(this.field,l),p=o.length,m=new Int32Array(p);for(let y=0;y<p;y++){let E=this.field.inverse(o[y]),O=this.field.subtract(0,t.evaluateAt(E)),P=this.field.inverse(h.evaluateAt(E));m[y]=this.field.multiply(O,P)}return m}}class Cr{constructor(t,r,o,a,l){t instanceof Cr?this.constructor_2(t):this.constructor_1(t,r,o,a,l)}constructor_1(t,r,o,a,l){const h=r==null||o==null,p=a==null||l==null;if(h&&p)throw new Q;h?(r=new Oe(0,a.getY()),o=new Oe(0,l.getY())):p&&(a=new Oe(t.getWidth()-1,r.getY()),l=new Oe(t.getWidth()-1,o.getY())),this.image=t,this.topLeft=r,this.bottomLeft=o,this.topRight=a,this.bottomRight=l,this.minX=Math.trunc(Math.min(r.getX(),o.getX())),this.maxX=Math.trunc(Math.max(a.getX(),l.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(o.getY(),l.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,r){return t==null?r:r==null?t:new Cr(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(t,r,o){let a=this.topLeft,l=this.bottomLeft,h=this.topRight,p=this.bottomRight;if(t>0){let m=o?this.topLeft:this.topRight,y=Math.trunc(m.getY()-t);y<0&&(y=0);let E=new Oe(m.getX(),y);o?a=E:h=E}if(r>0){let m=o?this.bottomLeft:this.bottomRight,y=Math.trunc(m.getY()+r);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);let E=new Oe(m.getX(),y);o?l=E:p=E}return new Cr(this.image,a,l,h,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class yn{constructor(t,r,o,a){this.columnCount=t,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=o,this.rowCount=r+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Er{constructor(){this.buffer=""}static form(t,r){let o=-1;function a(h,p,m,y,E,O){if(h==="%%")return"%";if(r[++o]===void 0)return;h=y?parseInt(y.substr(1)):void 0;let P=E?parseInt(E.substr(1)):void 0,j;switch(O){case"s":j=r[o];break;case"c":j=r[o][0];break;case"f":j=parseFloat(r[o]).toFixed(h);break;case"p":j=parseFloat(r[o]).toPrecision(h);break;case"e":j=parseFloat(r[o]).toExponential(h);break;case"x":j=parseInt(r[o]).toString(P||16);break;case"d":j=parseFloat(parseInt(r[o],P||10).toPrecision(h)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(P);let $=parseInt(m),J=m&&m[0]+""=="0"?"0":" ";for(;j.length<$;)j=p!==void 0?j+J:J+j;return j}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(l,a)}format(t,...r){this.buffer+=Er.form(t,r)}toString(){return this.buffer}}class Vi{constructor(t){this.boundingBox=new Cr(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let r=this.getCodeword(t);if(r!=null)return r;for(let o=1;o<Vi.MAX_NEARBY_DISTANCE;o++){let a=this.imageRowToCodewordIndex(t)-o;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(t)+o,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Er;let r=0;for(const o of this.codewords){if(o==null){t.format("%3d:    |   %n",r++);continue}t.format("%3d: %3d|%3d%n",r++,o.getRowNumber(),o.getValue())}return t.toString()}}Vi.MAX_NEARBY_DISTANCE=5;class Wi{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)}getValue(){let t=-1,r=new Array;for(const[o,a]of this.values.entries()){const l={getKey:()=>o,getValue:()=>a};l.getValue()>t?(t=l.getValue(),r=[],r.push(l.getKey())):l.getValue()===t&&r.push(l.getKey())}return ke.toIntArray(r)}getConfidence(t){return this.values.get(t)}}class Ua extends Vi{constructor(t,r){super(t),this._isLeft=r}setRowNumbers(){for(let t of this.getCodewords())t!=null&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);let o=this.getBoundingBox(),a=this._isLeft?o.getTopLeft():o.getTopRight(),l=this._isLeft?o.getBottomLeft():o.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),p=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=-1,y=1,E=0;for(let O=h;O<p;O++){if(r[O]==null)continue;let P=r[O],j=P.getRowNumber()-m;if(j===0)E++;else if(j===1)y=Math.max(y,E),E=1,m=P.getRowNumber();else if(j<0||P.getRowNumber()>=t.getRowCount()||j>O)r[O]=null;else{let $;y>2?$=(y-2)*j:$=j;let J=$>=O;for(let ne=1;ne<=$&&!J;ne++)J=r[O-ne]!=null;J?r[O]=null:(m=P.getRowNumber(),E=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let r=new Int32Array(t.getRowCount());for(let o of this.getCodewords())if(o!=null){let a=o.getRowNumber();if(a>=r.length)continue;r[a]++}return r}adjustIncompleteIndicatorColumnRowNumbers(t){let r=this.getBoundingBox(),o=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),p=this.getCodewords(),m=-1;for(let y=l;y<h;y++){if(p[y]==null)continue;let E=p[y];E.setRowNumberAsRowIndicatorColumn();let O=E.getRowNumber()-m;O===0||(O===1?m=E.getRowNumber():E.getRowNumber()>=t.getRowCount()?p[y]=null:m=E.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),r=new Wi,o=new Wi,a=new Wi,l=new Wi;for(let p of t){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let m=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:o.setValue(m*3+1);break;case 1:l.setValue(m/3),a.setValue(m%3);break;case 2:r.setValue(m+1);break}}if(r.getValue().length===0||o.getValue().length===0||a.getValue().length===0||l.getValue().length===0||r.getValue()[0]<1||o.getValue()[0]+a.getValue()[0]<ke.MIN_ROWS_IN_BARCODE||o.getValue()[0]+a.getValue()[0]>ke.MAX_ROWS_IN_BARCODE)return null;let h=new yn(r.getValue()[0],o.getValue()[0],a.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(t,h),h}removeIncorrectCodewords(t,r){for(let o=0;o<t.length;o++){let a=t[o];if(t[o]==null)continue;let l=a.getValue()%30,h=a.getRowNumber();if(h>r.getRowCount()){t[o]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:l*3+1!==r.getRowCountUpperPart()&&(t[o]=null);break;case 1:(Math.trunc(l/3)!==r.getErrorCorrectionLevel()||l%3!==r.getRowCountLowerPart())&&(t[o]=null);break;case 2:l+1!==r.getColumnCount()&&(t[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Zi{constructor(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=ke.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let o=this.detectionResultColumns[r].getCodewords();for(let a=0;a<o.length;a++)o[a]!=null&&(o[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,o))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<t.length;o++)if(t[o]!=null&&r[o]!=null&&t[o].getRowNumber()===r[o].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let l=this.detectionResultColumns[a].getCodewords()[o];l!=null&&(l.setRowNumber(t[o].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++){if(r[o]==null)continue;let a=r[o].getRowNumber(),l=0;for(let h=this.barcodeColumnCount+1;h>0&&l<this.ADJUST_ROW_NUMBER_SKIP;h--){let p=this.detectionResultColumns[h].getCodewords()[o];p!=null&&(l=Zi.adjustRowNumberIfValid(a,l,p),p.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,r=this.detectionResultColumns[0].getCodewords();for(let o=0;o<r.length;o++){if(r[o]==null)continue;let a=r[o].getRowNumber(),l=0;for(let h=1;h<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;h++){let p=this.detectionResultColumns[h].getCodewords()[o];p!=null&&(l=Zi.adjustRowNumberIfValid(a,l,p),p.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,r,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(t)?(o.setRowNumber(t),r=0):++r),r}adjustRowNumbers(t,r,o){if(!this.detectionResultColumns[t-1])return;let a=o[r],l=this.detectionResultColumns[t-1].getCodewords(),h=l;this.detectionResultColumns[t+1]!=null&&(h=this.detectionResultColumns[t+1].getCodewords());let p=new Array(14);p[2]=l[r],p[3]=h[r],r>0&&(p[0]=o[r-1],p[4]=l[r-1],p[5]=h[r-1]),r>1&&(p[8]=o[r-2],p[10]=l[r-2],p[11]=h[r-2]),r<o.length-1&&(p[1]=o[r+1],p[6]=l[r+1],p[7]=h[r+1]),r<o.length-2&&(p[9]=o[r+2],p[12]=l[r+2],p[13]=h[r+2]);for(let m of p)if(Zi.adjustRowNumber(a,m))return}static adjustRowNumber(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,r){this.detectionResultColumns[t]=r}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new Er;for(let o=0;o<t.getCodewords().length;o++){r.format("CW %3d:",o);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}let l=this.detectionResultColumns[a].getCodewords()[o];if(l==null){r.format("    |   ");continue}r.format(" %3d|%3d",l.getRowNumber(),l.getValue())}r.format("%n")}return r.toString()}}class bi{constructor(t,r,o,a){this.rowNumber=bi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(o),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==bi.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}bi.BARCODE_ROW_UNKNOWN=-1;class Bn{static initialize(){for(let t=0;t<ke.SYMBOL_TABLE.length;t++){let r=ke.SYMBOL_TABLE[t],o=r&1;for(let a=0;a<ke.BARS_IN_MODULE;a++){let l=0;for(;(r&1)===o;)l+=1,r>>=1;o=r&1,Bn.RATIOS_TABLE[t]||(Bn.RATIOS_TABLE[t]=new Array(ke.BARS_IN_MODULE)),Bn.RATIOS_TABLE[t][ke.BARS_IN_MODULE-a-1]=Math.fround(l/ke.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let r=Bn.getDecodedCodewordValue(Bn.sampleBitCounts(t));return r!==-1?r:Bn.getClosestDecodedValue(t)}static sampleBitCounts(t){let r=Ge.sum(t),o=new Int32Array(ke.BARS_IN_MODULE),a=0,l=0;for(let h=0;h<ke.MODULES_IN_CODEWORD;h++){let p=r/(2*ke.MODULES_IN_CODEWORD)+h*r/ke.MODULES_IN_CODEWORD;l+t[a]<=p&&(l+=t[a],a++),o[a]++}return o}static getDecodedCodewordValue(t){let r=Bn.getBitValue(t);return ke.getCodeword(r)===-1?-1:r}static getBitValue(t){let r=0;for(let o=0;o<t.length;o++)for(let a=0;a<t[o];a++)r=r<<1|(o%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(t){let r=Ge.sum(t),o=new Array(ke.BARS_IN_MODULE);if(r>1)for(let h=0;h<o.length;h++)o[h]=Math.fround(t[h]/r);let a=Gt.MAX_VALUE,l=-1;this.bSymbolTableReady||Bn.initialize();for(let h=0;h<Bn.RATIOS_TABLE.length;h++){let p=0,m=Bn.RATIOS_TABLE[h];for(let y=0;y<ke.BARS_IN_MODULE;y++){let E=Math.fround(m[y]-o[y]);if(p+=Math.fround(E*E),p>=a)break}p<a&&(a=p,l=ke.SYMBOL_TABLE[h])}return l}}Bn.bSymbolTableReady=!1,Bn.RATIOS_TABLE=new Array(ke.SYMBOL_TABLE.length).map(N=>new Array(ke.BARS_IN_MODULE));class Po{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class at{static parseLong(t,r=void 0){return parseInt(t,r)}}class Ha extends v{}Ha.kind="NullPointerException";class Ar{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,r,o){if(t==null)throw new Ha;if(r<0||r>t.length||o<0||r+o>t.length||r+o<0)throw new se;if(o===0)return;for(let a=0;a<o;a++)this.write(t[r+a])}flush(){}close(){}}class Es extends v{}class Va extends Ar{constructor(t=32){if(super(),this.count=0,t<0)throw new b("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let o=this.buf.length<<1;if(o-t<0&&(o=t),o<0){if(t<0)throw new Es;o=T.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,o)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,r,o){if(r<0||r>t.length||o<0||r+o-t.length>0)throw new se;this.ensureCapacity(this.count+o),W.arraycopy(t,r,this.buf,this.count,o),this.count+=o}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var Et;(function(N){N[N.ALPHA=0]="ALPHA",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.PUNCT=3]="PUNCT",N[N.ALPHA_SHIFT=4]="ALPHA_SHIFT",N[N.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Et||(Et={}));function Hs(){if(typeof window<"u"||typeof window<"u")return window.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Vs;function Jr(N){if(typeof Vs>"u"&&(Vs=Hs()),Vs===null)throw new Error("BigInt is not supported!");return Vs(N)}function bu(){let N=[];N[0]=Jr(1);let t=Jr(900);N[1]=t;for(let r=2;r<16;r++)N[r]=N[r-1]*t;return N}class ce{static decode(t,r){let o=new ee(""),a=G.ISO8859_1;o.enableDecoding(a);let l=1,h=t[l++],p=new Po;for(;l<t[0];){switch(h){case ce.TEXT_COMPACTION_MODE_LATCH:l=ce.textCompaction(t,l,o);break;case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:l=ce.byteCompaction(h,t,a,l,o);break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(t[l++]);break;case ce.NUMERIC_COMPACTION_MODE_LATCH:l=ce.numericCompaction(t,l,o);break;case ce.ECI_CHARSET:G.getCharacterSetECIByValue(t[l++]);break;case ce.ECI_GENERAL_PURPOSE:l+=2;break;case ce.ECI_USER_DEFINED:l++;break;case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=ce.decodeMacroBlock(t,l,p);break;case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:throw new U;default:l--,l=ce.textCompaction(t,l,o);break}if(l<t.length)h=t[l++];else throw U.getFormatInstance()}if(o.length()===0)throw U.getFormatInstance();let m=new Zn(null,o.toString(),null,r);return m.setOther(p),m}static decodeMacroBlock(t,r,o){if(r+ce.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw U.getFormatInstance();let a=new Int32Array(ce.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<ce.NUMBER_OF_SEQUENCE_CODEWORDS;p++,r++)a[p]=t[r];o.setSegmentIndex(T.parseInt(ce.decodeBase900toBase10(a,ce.NUMBER_OF_SEQUENCE_CODEWORDS)));let l=new ee;r=ce.textCompaction(t,r,l),o.setFileId(l.toString());let h=-1;for(t[r]===ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=r+1);r<t[0];)switch(t[r]){case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new ee;r=ce.textCompaction(t,r+1,p),o.setFileName(p.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new ee;r=ce.textCompaction(t,r+1,m),o.setSender(m.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let y=new ee;r=ce.textCompaction(t,r+1,y),o.setAddressee(y.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new ee;r=ce.numericCompaction(t,r+1,E),o.setSegmentCount(T.parseInt(E.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new ee;r=ce.numericCompaction(t,r+1,O),o.setTimestamp(at.parseLong(O.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let P=new ee;r=ce.numericCompaction(t,r+1,P),o.setChecksum(T.parseInt(P.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let j=new ee;r=ce.numericCompaction(t,r+1,j),o.setFileSize(at.parseLong(j.toString()));break;default:throw U.getFormatInstance()}break;case ce.MACRO_PDF417_TERMINATOR:r++,o.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(h!==-1){let p=r-h;o.isLastSegment()&&p--,o.setOptionalData(k.copyOfRange(t,h,h+p))}return r}static textCompaction(t,r,o){let a=new Int32Array((t[0]-r)*2),l=new Int32Array((t[0]-r)*2),h=0,p=!1;for(;r<t[0]&&!p;){let m=t[r++];if(m<ce.TEXT_COMPACTION_MODE_LATCH)a[h]=m/30,a[h+1]=m%30,h+=2;else switch(m){case ce.TEXT_COMPACTION_MODE_LATCH:a[h++]=ce.TEXT_COMPACTION_MODE_LATCH;break;case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:r--,p=!0;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[h]=ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=t[r++],l[h]=m,h++;break}}return ce.decodeTextCompaction(a,l,h,o),r}static decodeTextCompaction(t,r,o,a){let l=Et.ALPHA,h=Et.ALPHA,p=0;for(;p<o;){let m=t[p],y="";switch(l){case Et.ALPHA:if(m<26)y=String.fromCharCode(65+m);else switch(m){case 26:y=" ";break;case ce.LL:l=Et.LOWER;break;case ce.ML:l=Et.MIXED;break;case ce.PS:h=l,l=Et.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:l=Et.ALPHA;break}break;case Et.LOWER:if(m<26)y=String.fromCharCode(97+m);else switch(m){case 26:y=" ";break;case ce.AS:h=l,l=Et.ALPHA_SHIFT;break;case ce.ML:l=Et.MIXED;break;case ce.PS:h=l,l=Et.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:l=Et.ALPHA;break}break;case Et.MIXED:if(m<ce.PL)y=ce.MIXED_CHARS[m];else switch(m){case ce.PL:l=Et.PUNCT;break;case 26:y=" ";break;case ce.LL:l=Et.LOWER;break;case ce.AL:l=Et.ALPHA;break;case ce.PS:h=l,l=Et.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:l=Et.ALPHA;break}break;case Et.PUNCT:if(m<ce.PAL)y=ce.PUNCT_CHARS[m];else switch(m){case ce.PAL:l=Et.ALPHA;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:l=Et.ALPHA;break}break;case Et.ALPHA_SHIFT:if(l=h,m<26)y=String.fromCharCode(65+m);else switch(m){case 26:y=" ";break;case ce.TEXT_COMPACTION_MODE_LATCH:l=Et.ALPHA;break}break;case Et.PUNCT_SHIFT:if(l=h,m<ce.PAL)y=ce.PUNCT_CHARS[m];else switch(m){case ce.PAL:l=Et.ALPHA;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:l=Et.ALPHA;break}break}y!==""&&a.append(y),p++}}static byteCompaction(t,r,o,a,l){let h=new Va,p=0,m=0,y=!1;switch(t){case ce.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),O=r[a++];for(;a<r[0]&&!y;)switch(E[p++]=O,m=900*m+O,O=r[a++],O){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:a--,y=!0;break;default:if(p%5===0&&p>0){for(let P=0;P<6;++P)h.write(Number(Jr(m)>>Jr(8*(5-P))));m=0,p=0}break}a===r[0]&&O<ce.TEXT_COMPACTION_MODE_LATCH&&(E[p++]=O);for(let P=0;P<p;P++)h.write(E[P]);break;case ce.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!y;){let P=r[a++];if(P<ce.TEXT_COMPACTION_MODE_LATCH)p++,m=900*m+P;else switch(P){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:a--,y=!0;break}if(p%5===0&&p>0){for(let j=0;j<6;++j)h.write(Number(Jr(m)>>Jr(8*(5-j))));m=0,p=0}}break}return l.append(re.decode(h.toByteArray(),o)),a}static numericCompaction(t,r,o){let a=0,l=!1,h=new Int32Array(ce.MAX_NUMERIC_CODEWORDS);for(;r<t[0]&&!l;){let p=t[r++];if(r===t[0]&&(l=!0),p<ce.TEXT_COMPACTION_MODE_LATCH)h[a]=p,a++;else switch(p){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:r--,l=!0;break}(a%ce.MAX_NUMERIC_CODEWORDS===0||p===ce.NUMERIC_COMPACTION_MODE_LATCH||l)&&a>0&&(o.append(ce.decodeBase900toBase10(h,a)),a=0)}return r}static decodeBase900toBase10(t,r){let o=Jr(0);for(let l=0;l<r;l++)o+=ce.EXP900[r-l-1]*Jr(t[l]);let a=o.toString();if(a.charAt(0)!=="1")throw new U;return a.substring(1)}}ce.TEXT_COMPACTION_MODE_LATCH=900,ce.BYTE_COMPACTION_MODE_LATCH=901,ce.NUMERIC_COMPACTION_MODE_LATCH=902,ce.BYTE_COMPACTION_MODE_LATCH_6=924,ce.ECI_USER_DEFINED=925,ce.ECI_GENERAL_PURPOSE=926,ce.ECI_CHARSET=927,ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ce.MACRO_PDF417_TERMINATOR=922,ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ce.MAX_NUMERIC_CODEWORDS=15,ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ce.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ce.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ce.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ce.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ce.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ce.PL=25,ce.LL=27,ce.AS=27,ce.ML=28,ce.AL=28,ce.PS=29,ce.PAL=29,ce.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ce.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ce.EXP900=Hs()?bu():[],ce.NUMBER_OF_SEQUENCE_CODEWORDS=2;class tt{constructor(){}static decode(t,r,o,a,l,h,p){let m=new Cr(t,r,o,a,l),y=null,E=null,O;for(let $=!0;;$=!1){if(r!=null&&(y=tt.getRowIndicatorColumn(t,m,r,!0,h,p)),a!=null&&(E=tt.getRowIndicatorColumn(t,m,a,!1,h,p)),O=tt.merge(y,E),O==null)throw Q.getNotFoundInstance();let J=O.getBoundingBox();if($&&J!=null&&(J.getMinY()<m.getMinY()||J.getMaxY()>m.getMaxY()))m=J;else break}O.setBoundingBox(m);let P=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,y),O.setDetectionResultColumn(P,E);let j=y!=null;for(let $=1;$<=P;$++){let J=j?$:P-$;if(O.getDetectionResultColumn(J)!==void 0)continue;let ne;J===0||J===P?ne=new Ua(m,J===0):ne=new Vi(m),O.setDetectionResultColumn(J,ne);let ue=-1,Ie=ue;for(let be=m.getMinY();be<=m.getMaxY();be++){if(ue=tt.getStartColumn(O,J,be,j),ue<0||ue>m.getMaxX()){if(Ie===-1)continue;ue=Ie}let xe=tt.detectCodeword(t,m.getMinX(),m.getMaxX(),j,ue,be,h,p);xe!=null&&(ne.setCodeword(be,xe),Ie=ue,h=Math.min(h,xe.getWidth()),p=Math.max(p,xe.getWidth()))}}return tt.createDecoderResult(O)}static merge(t,r){if(t==null&&r==null)return null;let o=tt.getBarcodeMetadata(t,r);if(o==null)return null;let a=Cr.merge(tt.adjustBoundingBox(t),tt.adjustBoundingBox(r));return new Zi(o,a)}static adjustBoundingBox(t){if(t==null)return null;let r=t.getRowHeights();if(r==null)return null;let o=tt.getMax(r),a=0;for(let p of r)if(a+=o-p,p>0)break;let l=t.getCodewords();for(let p=0;a>0&&l[p]==null;p++)a--;let h=0;for(let p=r.length-1;p>=0&&(h+=o-r[p],!(r[p]>0));p--);for(let p=l.length-1;h>0&&l[p]==null;p--)h--;return t.getBoundingBox().addMissingRows(a,h,t.isLeft())}static getMax(t){let r=-1;for(let o of t)r=Math.max(r,o);return r}static getBarcodeMetadata(t,r){let o;if(t==null||(o=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let a;return r==null||(a=r.getBarcodeMetadata())==null?o:o.getColumnCount()!==a.getColumnCount()&&o.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&o.getRowCount()!==a.getRowCount()?null:o}static getRowIndicatorColumn(t,r,o,a,l,h){let p=new Ua(r,a);for(let m=0;m<2;m++){let y=m===0?1:-1,E=Math.trunc(Math.trunc(o.getX()));for(let O=Math.trunc(Math.trunc(o.getY()));O<=r.getMaxY()&&O>=r.getMinY();O+=y){let P=tt.detectCodeword(t,0,t.getWidth(),a,E,O,l,h);P!=null&&(p.setCodeword(O,P),a?E=P.getStartX():E=P.getEndX())}}return p}static adjustCodewordCount(t,r){let o=r[0][1],a=o.getValue(),l=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-tt.getNumberOfECCodeWords(t.getBarcodeECLevel());if(a.length===0){if(l<1||l>ke.MAX_CODEWORDS_IN_BARCODE)throw Q.getNotFoundInstance();o.setValue(l)}else a[0]!==l&&o.setValue(l)}static createDecoderResult(t){let r=tt.createBarcodeMatrix(t);tt.adjustCodewordCount(t,r);let o=new Array,a=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),l=[],h=new Array;for(let m=0;m<t.getBarcodeRowCount();m++)for(let y=0;y<t.getBarcodeColumnCount();y++){let E=r[m][y+1].getValue(),O=m*t.getBarcodeColumnCount()+y;E.length===0?o.push(O):E.length===1?a[O]=E[0]:(h.push(O),l.push(E))}let p=new Array(l.length);for(let m=0;m<p.length;m++)p[m]=l[m];return tt.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),a,ke.toIntArray(o),ke.toIntArray(h),p)}static createDecoderResultFromAmbiguousValues(t,r,o,a,l){let h=new Int32Array(a.length),p=100;for(;p-- >0;){for(let m=0;m<h.length;m++)r[a[m]]=l[m][h[m]];try{return tt.decodeCodewords(r,t,o)}catch(m){if(!(m instanceof z))throw m}if(h.length===0)throw z.getChecksumInstance();for(let m=0;m<h.length;m++)if(h[m]<l[m].length-1){h[m]++;break}else if(h[m]=0,m===h.length-1)throw z.getChecksumInstance()}throw z.getChecksumInstance()}static createBarcodeMatrix(t){let r=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let a=0;a<r.length;a++)for(let l=0;l<r[a].length;l++)r[a][l]=new Wi;let o=0;for(let a of t.getDetectionResultColumns()){if(a!=null){for(let l of a.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=0){if(h>=r.length)continue;r[h][o].setValue(l.getValue())}}}o++}return r}static isValidBarcodeColumn(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1}static getStartColumn(t,r,o,a){let l=a?1:-1,h=null;if(tt.isValidBarcodeColumn(t,r-l)&&(h=t.getDetectionResultColumn(r-l).getCodeword(o)),h!=null)return a?h.getEndX():h.getStartX();if(h=t.getDetectionResultColumn(r).getCodewordNearby(o),h!=null)return a?h.getStartX():h.getEndX();if(tt.isValidBarcodeColumn(t,r-l)&&(h=t.getDetectionResultColumn(r-l).getCodewordNearby(o)),h!=null)return a?h.getEndX():h.getStartX();let p=0;for(;tt.isValidBarcodeColumn(t,r-l);){r-=l;for(let m of t.getDetectionResultColumn(r).getCodewords())if(m!=null)return(a?m.getEndX():m.getStartX())+l*p*(m.getEndX()-m.getStartX());p++}return a?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,r,o,a,l,h,p,m){l=tt.adjustCodewordStartColumn(t,r,o,a,l,h);let y=tt.getModuleBitCount(t,r,o,a,l,h);if(y==null)return null;let E,O=Ge.sum(y);if(a)E=l+O;else{for(let $=0;$<y.length/2;$++){let J=y[$];y[$]=y[y.length-1-$],y[y.length-1-$]=J}E=l,l=E-O}if(!tt.checkCodewordSkew(O,p,m))return null;let P=Bn.getDecodedValue(y),j=ke.getCodeword(P);return j===-1?null:new bi(l,E,tt.getCodewordBucketNumber(P),j)}static getModuleBitCount(t,r,o,a,l,h){let p=l,m=new Int32Array(8),y=0,E=a?1:-1,O=a;for(;(a?p<o:p>=r)&&y<m.length;)t.get(p,h)===O?(m[y]++,p+=E):(y++,O=!O);return y===m.length||p===(a?o:r)&&y===m.length-1?m:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,r,o,a,l,h){let p=l,m=a?-1:1;for(let y=0;y<2;y++){for(;(a?p>=r:p<o)&&a===t.get(p,h);){if(Math.abs(l-p)>tt.CODEWORD_SKEW_SIZE)return l;p+=m}m=-m,a=!a}return p}static checkCodewordSkew(t,r,o){return r-tt.CODEWORD_SKEW_SIZE<=t&&t<=o+tt.CODEWORD_SKEW_SIZE}static decodeCodewords(t,r,o){if(t.length===0)throw U.getFormatInstance();let a=1<<r+1,l=tt.correctErrors(t,o,a);tt.verifyCodewordCount(t,a);let h=ce.decode(t,""+r);return h.setErrorsCorrected(l),h.setErasures(o.length),h}static correctErrors(t,r,o){if(r!=null&&r.length>o/2+tt.MAX_ERRORS||o<0||o>tt.MAX_EC_CODEWORDS)throw z.getChecksumInstance();return tt.errorCorrection.decode(t,o,r)}static verifyCodewordCount(t,r){if(t.length<4)throw U.getFormatInstance();let o=t[0];if(o>t.length)throw U.getFormatInstance();if(o===0)if(r<t.length)t[0]=t.length-r;else throw U.getFormatInstance()}static getBitCountForCodeword(t){let r=new Int32Array(8),o=0,a=r.length-1;for(;!((t&1)!==o&&(o=t&1,a--,a<0));)r[a]++,t>>=1;return r}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return tt.getCodewordBucketNumber(tt.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let r=new Er;for(let o=0;o<t.length;o++){r.format("Row %2d: ",o);for(let a=0;a<t[o].length;a++){let l=t[o][a];l.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}r.format("%n")}return r.toString()}}tt.CODEWORD_SKEW_SIZE=2,tt.MAX_ERRORS=3,tt.MAX_EC_CODEWORDS=512,tt.errorCorrection=new Us;class _n{decode(t,r=null){let o=_n.decode(t,r,!1);if(o==null||o.length===0||o[0]==null)throw Q.getNotFoundInstance();return o[0]}decodeMultiple(t,r=null){try{return _n.decode(t,r,!0)}catch(o){throw o instanceof U||o instanceof z?Q.getNotFoundInstance():o}}static decode(t,r,o){const a=new Array,l=Je.detectMultiple(t,r,o);for(const h of l.getPoints()){const p=tt.decode(l.getBits(),h[4],h[5],h[6],h[7],_n.getMinCodewordWidth(h),_n.getMaxCodewordWidth(h)),m=new ye(p.getText(),p.getRawBytes(),void 0,h,ge.PDF_417);m.putMetadata(He.ERROR_CORRECTION_LEVEL,p.getECLevel());const y=p.getOther();y!=null&&m.putMetadata(He.PDF417_EXTRA_METADATA,y),a.push(m)}return a.map(h=>h)}static getMaxWidth(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMinWidth(t,r){return t==null||r==null?T.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(_n.getMaxWidth(t[0],t[4]),_n.getMaxWidth(t[6],t[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.max(_n.getMaxWidth(t[1],t[5]),_n.getMaxWidth(t[7],t[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(_n.getMinWidth(t[0],t[4]),_n.getMinWidth(t[6],t[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.min(_n.getMinWidth(t[1],t[5]),_n.getMinWidth(t[7],t[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))}reset(){}}class $n extends v{}$n.kind="ReaderException";class Wa{constructor(t,r){this.verbose=t===!0,r&&this.setHints(r)}decode(t,r){return r&&this.setHints(r),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!u(t)&&t.get(X.TRY_HARDER)===!0,o=u(t)?null:t.get(X.POSSIBLE_FORMATS),a=new Array;if(!u(o)){const l=o.some(h=>h===ge.UPC_A||h===ge.UPC_E||h===ge.EAN_13||h===ge.EAN_8||h===ge.CODABAR||h===ge.CODE_39||h===ge.CODE_93||h===ge.CODE_128||h===ge.ITF||h===ge.RSS_14||h===ge.RSS_EXPANDED);l&&!r&&a.push(new Pr(t,this.verbose)),o.includes(ge.QR_CODE)&&a.push(new cn),o.includes(ge.DATA_MATRIX)&&a.push(new yt),o.includes(ge.AZTEC)&&a.push(new qt),o.includes(ge.PDF_417)&&a.push(new _n),l&&r&&a.push(new Pr(t,this.verbose))}a.length===0&&(r||a.push(new Pr(t,this.verbose)),a.push(new cn),a.push(new yt),a.push(new qt),a.push(new _n),r&&a.push(new Pr(t,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new $n("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(o){if(o instanceof $n)continue}throw new Q("No MultiFormat Readers were able to detect the code.")}}class Za extends Ce{constructor(t=null,r=500){const o=new Wa;o.setHints(t),super(o,r)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class gi extends Ce{constructor(t=500){super(new _n,t)}}class Ga extends Ce{constructor(t=500){super(new cn,t)}}var Ws;(function(N){N[N.ERROR_CORRECTION=0]="ERROR_CORRECTION",N[N.CHARACTER_SET=1]="CHARACTER_SET",N[N.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",N[N.MIN_SIZE=3]="MIN_SIZE",N[N.MAX_SIZE=4]="MAX_SIZE",N[N.MARGIN=5]="MARGIN",N[N.PDF417_COMPACT=6]="PDF417_COMPACT",N[N.PDF417_COMPACTION=7]="PDF417_COMPACTION",N[N.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",N[N.AZTEC_LAYERS=9]="AZTEC_LAYERS",N[N.QR_VERSION=10]="QR_VERSION"})(Ws||(Ws={}));var Yt=Ws;class Lo{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Mt(t,Int32Array.from([1])))}buildGenerator(t){const r=this.cachedGenerators;if(t>=r.length){let o=r[r.length-1];const a=this.field;for(let l=r.length;l<=t;l++){const h=o.multiply(new Mt(a,Int32Array.from([1,a.exp(l-1+a.getGeneratorBase())])));r.push(h),o=h}}return r[t]}encode(t,r){if(r===0)throw new b("No error correction bytes");const o=t.length-r;if(o<=0)throw new b("No data bytes provided");const a=this.buildGenerator(r),l=new Int32Array(o);W.arraycopy(t,0,l,0,o);let h=new Mt(this.field,l);h=h.multiplyByMonomial(r,1);const m=h.divide(a)[1].getCoefficients(),y=r-m.length;for(let E=0;E<y;E++)t[o+E]=0;W.arraycopy(m,0,t,o+y,m.length)}}class Ft{constructor(){}static applyMaskPenaltyRule1(t){return Ft.applyMaskPenaltyRule1Internal(t,!0)+Ft.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let r=0;const o=t.getArray(),a=t.getWidth(),l=t.getHeight();for(let h=0;h<l-1;h++){const p=o[h];for(let m=0;m<a-1;m++){const y=p[m];y===p[m+1]&&y===o[h+1][m]&&y===o[h+1][m+1]&&r++}}return Ft.N2*r}static applyMaskPenaltyRule3(t){let r=0;const o=t.getArray(),a=t.getWidth(),l=t.getHeight();for(let h=0;h<l;h++)for(let p=0;p<a;p++){const m=o[h];p+6<a&&m[p]===1&&m[p+1]===0&&m[p+2]===1&&m[p+3]===1&&m[p+4]===1&&m[p+5]===0&&m[p+6]===1&&(Ft.isWhiteHorizontal(m,p-4,p)||Ft.isWhiteHorizontal(m,p+7,p+11))&&r++,h+6<l&&o[h][p]===1&&o[h+1][p]===0&&o[h+2][p]===1&&o[h+3][p]===1&&o[h+4][p]===1&&o[h+5][p]===0&&o[h+6][p]===1&&(Ft.isWhiteVertical(o,p,h-4,h)||Ft.isWhiteVertical(o,p,h+7,h+11))&&r++}return r*Ft.N3}static isWhiteHorizontal(t,r,o){r=Math.max(r,0),o=Math.min(o,t.length);for(let a=r;a<o;a++)if(t[a]===1)return!1;return!0}static isWhiteVertical(t,r,o,a){o=Math.max(o,0),a=Math.min(a,t.length);for(let l=o;l<a;l++)if(t[l][r]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let r=0;const o=t.getArray(),a=t.getWidth(),l=t.getHeight();for(let m=0;m<l;m++){const y=o[m];for(let E=0;E<a;E++)y[E]===1&&r++}const h=t.getHeight()*t.getWidth();return Math.floor(Math.abs(r*2-h)*10/h)*Ft.N4}static getDataMaskBit(t,r,o){let a,l;switch(t){case 0:a=o+r&1;break;case 1:a=o&1;break;case 2:a=r%3;break;case 3:a=(o+r)%3;break;case 4:a=Math.floor(o/2)+Math.floor(r/3)&1;break;case 5:l=o*r,a=(l&1)+l%3;break;case 6:l=o*r,a=(l&1)+l%3&1;break;case 7:l=o*r,a=l%3+(o+r&1)&1;break;default:throw new b("Invalid mask pattern: "+t)}return a===0}static applyMaskPenaltyRule1Internal(t,r){let o=0;const a=r?t.getHeight():t.getWidth(),l=r?t.getWidth():t.getHeight(),h=t.getArray();for(let p=0;p<a;p++){let m=0,y=-1;for(let E=0;E<l;E++){const O=r?h[p][E]:h[E][p];O===y?m++:(m>=5&&(o+=Ft.N1+(m-5)),m=1,y=O)}m>=5&&(o+=Ft.N1+(m-5))}return o}}Ft.N1=3,Ft.N2=3,Ft.N3=40,Ft.N4=10;class As{constructor(t,r){this.width=t,this.height=r;const o=new Array(r);for(let a=0;a!==r;a++)o[a]=new Uint8Array(t);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(t,r){return this.bytes[r][t]}getArray(){return this.bytes}setNumber(t,r,o){this.bytes[r][t]=o}setBoolean(t,r,o){this.bytes[r][t]=o?1:0}clear(t){for(const r of this.bytes)k.fill(r,t)}equals(t){if(!(t instanceof As))return!1;const r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(let o=0,a=this.height;o<a;++o){const l=this.bytes[o],h=r.bytes[o];for(let p=0,m=this.width;p<m;++p)if(l[p]!==h[p])return!1}return!0}toString(){const t=new ee;for(let r=0,o=this.height;r<o;++r){const a=this.bytes[r];for(let l=0,h=this.width;l<h;++l)switch(a[l]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class Ti{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new ee;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<Ti.NUM_MASK_PATTERNS}}Ti.NUM_MASK_PATTERNS=8;class St extends v{}St.kind="WriterException";class We{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,r,o,a,l){We.clearMatrix(l),We.embedBasicPatterns(o,l),We.embedTypeInfo(r,a,l),We.maybeEmbedVersionInfo(o,l),We.embedDataBits(t,a,l)}static embedBasicPatterns(t,r){We.embedPositionDetectionPatternsAndSeparators(r),We.embedDarkDotAtLeftBottomCorner(r),We.maybeEmbedPositionAdjustmentPatterns(t,r),We.embedTimingPatterns(r)}static embedTypeInfo(t,r,o){const a=new H;We.makeTypeInfoBits(t,r,a);for(let l=0,h=a.getSize();l<h;++l){const p=a.get(a.getSize()-1-l),m=We.TYPE_INFO_COORDINATES[l],y=m[0],E=m[1];if(o.setBoolean(y,E,p),l<8){const O=o.getWidth()-l-1;o.setBoolean(O,8,p)}else{const P=o.getHeight()-7+(l-8);o.setBoolean(8,P,p)}}}static maybeEmbedVersionInfo(t,r){if(t.getVersionNumber()<7)return;const o=new H;We.makeVersionInfoBits(t,o);let a=6*3-1;for(let l=0;l<6;++l)for(let h=0;h<3;++h){const p=o.get(a);a--,r.setBoolean(l,r.getHeight()-11+h,p),r.setBoolean(r.getHeight()-11+h,l,p)}}static embedDataBits(t,r,o){let a=0,l=-1,h=o.getWidth()-1,p=o.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);p>=0&&p<o.getHeight();){for(let m=0;m<2;++m){const y=h-m;if(!We.isEmpty(o.get(y,p)))continue;let E;a<t.getSize()?(E=t.get(a),++a):E=!1,r!==255&&Ft.getDataMaskBit(r,y,p)&&(E=!E),o.setBoolean(y,p,E)}p+=l}l=-l,p+=l,h-=2}if(a!==t.getSize())throw new St("Not all bits consumed: "+a+"/"+t.getSize())}static findMSBSet(t){return 32-T.numberOfLeadingZeros(t)}static calculateBCHCode(t,r){if(r===0)throw new b("0 polynomial");const o=We.findMSBSet(r);for(t<<=o-1;We.findMSBSet(t)>=o;)t^=r<<We.findMSBSet(t)-o;return t}static makeTypeInfoBits(t,r,o){if(!Ti.isValidMaskPattern(r))throw new St("Invalid mask pattern");const a=t.getBits()<<3|r;o.appendBits(a,5);const l=We.calculateBCHCode(a,We.TYPE_INFO_POLY);o.appendBits(l,10);const h=new H;if(h.appendBits(We.TYPE_INFO_MASK_PATTERN,15),o.xor(h),o.getSize()!==15)throw new St("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(t,r){r.appendBits(t.getVersionNumber(),6);const o=We.calculateBCHCode(t.getVersionNumber(),We.VERSION_INFO_POLY);if(r.appendBits(o,12),r.getSize()!==18)throw new St("should not happen but we got: "+r.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let r=8;r<t.getWidth()-8;++r){const o=(r+1)%2;We.isEmpty(t.get(r,6))&&t.setNumber(r,6,o),We.isEmpty(t.get(6,r))&&t.setNumber(6,r,o)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new St;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,r,o){for(let a=0;a<8;++a){if(!We.isEmpty(o.get(t+a,r)))throw new St;o.setNumber(t+a,r,0)}}static embedVerticalSeparationPattern(t,r,o){for(let a=0;a<7;++a){if(!We.isEmpty(o.get(t,r+a)))throw new St;o.setNumber(t,r+a,0)}}static embedPositionAdjustmentPattern(t,r,o){for(let a=0;a<5;++a){const l=We.POSITION_ADJUSTMENT_PATTERN[a];for(let h=0;h<5;++h)o.setNumber(t+h,r+a,l[h])}}static embedPositionDetectionPattern(t,r,o){for(let a=0;a<7;++a){const l=We.POSITION_DETECTION_PATTERN[a];for(let h=0;h<7;++h)o.setNumber(t+h,r+a,l[h])}}static embedPositionDetectionPatternsAndSeparators(t){const r=We.POSITION_DETECTION_PATTERN[0].length;We.embedPositionDetectionPattern(0,0,t),We.embedPositionDetectionPattern(t.getWidth()-r,0,t),We.embedPositionDetectionPattern(0,t.getWidth()-r,t);const o=8;We.embedHorizontalSeparationPattern(0,o-1,t),We.embedHorizontalSeparationPattern(t.getWidth()-o,o-1,t),We.embedHorizontalSeparationPattern(0,t.getWidth()-o,t);const a=7;We.embedVerticalSeparationPattern(a,0,t),We.embedVerticalSeparationPattern(t.getHeight()-a-1,0,t),We.embedVerticalSeparationPattern(a,t.getHeight()-a,t)}static maybeEmbedPositionAdjustmentPatterns(t,r){if(t.getVersionNumber()<2)return;const o=t.getVersionNumber()-1,a=We.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let l=0,h=a.length;l!==h;l++){const p=a[l];if(p>=0)for(let m=0;m!==h;m++){const y=a[m];y>=0&&We.isEmpty(r.get(y,p))&&We.embedPositionAdjustmentPattern(y-2,p-2,r)}}}}We.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),We.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),We.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),We.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),We.VERSION_INFO_POLY=7973,We.TYPE_INFO_POLY=1335,We.TYPE_INFO_MASK_PATTERN=21522;class Tu{constructor(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Rt{constructor(){}static calculateMaskPenalty(t){return Ft.applyMaskPenaltyRule1(t)+Ft.applyMaskPenaltyRule2(t)+Ft.applyMaskPenaltyRule3(t)+Ft.applyMaskPenaltyRule4(t)}static encode(t,r,o=null){let a=Rt.DEFAULT_BYTE_MODE_ENCODING;const l=o!==null&&o.get(Yt.CHARACTER_SET)!==void 0;l&&(a=o.get(Yt.CHARACTER_SET).toString());const h=this.chooseMode(t,a),p=new H;if(h===Le.BYTE&&(l||Rt.DEFAULT_BYTE_MODE_ENCODING!==a)){const be=G.getCharacterSetECIByName(a);be!==void 0&&this.appendECI(be,p)}this.appendModeInfo(h,p);const m=new H;this.appendBytes(t,h,m,a);let y;if(o!==null&&o.get(Yt.QR_VERSION)!==void 0){const be=Number.parseInt(o.get(Yt.QR_VERSION).toString(),10);y=ve.getVersionForNumber(be);const xe=this.calculateBitsNeeded(h,p,m,y);if(!this.willFit(xe,y,r))throw new St("Data too big for requested version")}else y=this.recommendVersion(r,h,p,m);const E=new H;E.appendBitArray(p);const O=h===Le.BYTE?m.getSizeInBytes():t.length;this.appendLengthInfo(O,y,h,E),E.appendBitArray(m);const P=y.getECBlocksForLevel(r),j=y.getTotalCodewords()-P.getTotalECCodewords();this.terminateBits(j,E);const $=this.interleaveWithECBytes(E,y.getTotalCodewords(),j,P.getNumBlocks()),J=new Ti;J.setECLevel(r),J.setMode(h),J.setVersion(y);const ne=y.getDimensionForVersion(),ue=new As(ne,ne),Ie=this.chooseMaskPattern($,r,y,ue);return J.setMaskPattern(Ie),We.buildMatrix($,r,y,Ie,ue),J.setMatrix(ue),J}static recommendVersion(t,r,o,a){const l=this.calculateBitsNeeded(r,o,a,ve.getVersionForNumber(1)),h=this.chooseVersion(l,t),p=this.calculateBitsNeeded(r,o,a,h);return this.chooseVersion(p,t)}static calculateBitsNeeded(t,r,o,a){return r.getSize()+t.getCharacterCountBits(a)+o.getSize()}static getAlphanumericCode(t){return t<Rt.ALPHANUMERIC_TABLE.length?Rt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,r=null){if(G.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return Le.KANJI;let o=!1,a=!1;for(let l=0,h=t.length;l<h;++l){const p=t.charAt(l);if(Rt.isDigit(p))o=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)a=!0;else return Le.BYTE}return a?Le.ALPHANUMERIC:o?Le.NUMERIC:Le.BYTE}static isOnlyDoubleByteKanji(t){let r;try{r=re.encode(t,G.SJIS)}catch{return!1}const o=r.length;if(o%2!==0)return!1;for(let a=0;a<o;a+=2){const l=r[a]&255;if((l<129||l>159)&&(l<224||l>235))return!1}return!0}static chooseMaskPattern(t,r,o,a){let l=Number.MAX_SAFE_INTEGER,h=-1;for(let p=0;p<Ti.NUM_MASK_PATTERNS;p++){We.buildMatrix(t,r,o,p,a);let m=this.calculateMaskPenalty(a);m<l&&(l=m,h=p)}return h}static chooseVersion(t,r){for(let o=1;o<=40;o++){const a=ve.getVersionForNumber(o);if(Rt.willFit(t,a,r))return a}throw new St("Data too big")}static willFit(t,r,o){const a=r.getTotalCodewords(),h=r.getECBlocksForLevel(o).getTotalECCodewords(),p=a-h,m=(t+7)/8;return p>=m}static terminateBits(t,r){const o=t*8;if(r.getSize()>o)throw new St("data bits cannot fit in the QR Code"+r.getSize()+" > "+o);for(let h=0;h<4&&r.getSize()<o;++h)r.appendBit(!1);const a=r.getSize()&7;if(a>0)for(let h=a;h<8;h++)r.appendBit(!1);const l=t-r.getSizeInBytes();for(let h=0;h<l;++h)r.appendBits(h&1?17:236,8);if(r.getSize()!==o)throw new St("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,r,o,a,l,h){if(a>=o)throw new St("Block ID too large");const p=t%o,m=o-p,y=Math.floor(t/o),E=y+1,O=Math.floor(r/o),P=O+1,j=y-O,$=E-P;if(j!==$)throw new St("EC bytes mismatch");if(o!==m+p)throw new St("RS blocks mismatch");if(t!==(O+j)*m+(P+$)*p)throw new St("Total bytes mismatch");a<m?(l[0]=O,h[0]=j):(l[0]=P,h[0]=$)}static interleaveWithECBytes(t,r,o,a){if(t.getSizeInBytes()!==o)throw new St("Number of bits and data bytes does not match");let l=0,h=0,p=0;const m=new Array;for(let E=0;E<a;++E){const O=new Int32Array(1),P=new Int32Array(1);Rt.getNumDataBytesAndNumECBytesForBlockID(r,o,a,E,O,P);const j=O[0],$=new Uint8Array(j);t.toBytes(8*l,$,0,j);const J=Rt.generateECBytes($,P[0]);m.push(new Tu($,J)),h=Math.max(h,j),p=Math.max(p,J.length),l+=O[0]}if(o!==l)throw new St("Data bytes does not match offset");const y=new H;for(let E=0;E<h;++E)for(const O of m){const P=O.getDataBytes();E<P.length&&y.appendBits(P[E],8)}for(let E=0;E<p;++E)for(const O of m){const P=O.getErrorCorrectionBytes();E<P.length&&y.appendBits(P[E],8)}if(r!==y.getSizeInBytes())throw new St("Interleaving error: "+r+" and "+y.getSizeInBytes()+" differ.");return y}static generateECBytes(t,r){const o=t.length,a=new Int32Array(o+r);for(let h=0;h<o;h++)a[h]=t[h]&255;new Lo(Xe.QR_CODE_FIELD_256).encode(a,r);const l=new Uint8Array(r);for(let h=0;h<r;h++)l[h]=a[o+h];return l}static appendModeInfo(t,r){r.appendBits(t.getBits(),4)}static appendLengthInfo(t,r,o,a){const l=o.getCharacterCountBits(r);if(t>=1<<l)throw new St(t+" is bigger than "+((1<<l)-1));a.appendBits(t,l)}static appendBytes(t,r,o,a){switch(r){case Le.NUMERIC:Rt.appendNumericBytes(t,o);break;case Le.ALPHANUMERIC:Rt.appendAlphanumericBytes(t,o);break;case Le.BYTE:Rt.append8BitBytes(t,o,a);break;case Le.KANJI:Rt.appendKanjiBytes(t,o);break;default:throw new St("Invalid mode: "+r)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const r=Rt.getDigit(t);return r>=0&&r<=9}static appendNumericBytes(t,r){const o=t.length;let a=0;for(;a<o;){const l=Rt.getDigit(t.charAt(a));if(a+2<o){const h=Rt.getDigit(t.charAt(a+1)),p=Rt.getDigit(t.charAt(a+2));r.appendBits(l*100+h*10+p,10),a+=3}else if(a+1<o){const h=Rt.getDigit(t.charAt(a+1));r.appendBits(l*10+h,7),a+=2}else r.appendBits(l,4),a++}}static appendAlphanumericBytes(t,r){const o=t.length;let a=0;for(;a<o;){const l=Rt.getAlphanumericCode(t.charCodeAt(a));if(l===-1)throw new St;if(a+1<o){const h=Rt.getAlphanumericCode(t.charCodeAt(a+1));if(h===-1)throw new St;r.appendBits(l*45+h,11),a+=2}else r.appendBits(l,6),a++}}static append8BitBytes(t,r,o){let a;try{a=re.encode(t,o)}catch(l){throw new St(l)}for(let l=0,h=a.length;l!==h;l++){const p=a[l];r.appendBits(p,8)}}static appendKanjiBytes(t,r){let o;try{o=re.encode(t,G.SJIS)}catch(l){throw new St(l)}const a=o.length;for(let l=0;l<a;l+=2){const h=o[l]&255,p=o[l+1]&255,m=h<<8&4294967295|p;let y=-1;if(m>=33088&&m<=40956?y=m-33088:m>=57408&&m<=60351&&(y=m-49472),y===-1)throw new St("Invalid byte sequence");const E=(y>>8)*192+(y&255);r.appendBits(E,13)}}static appendECI(t,r){r.appendBits(Le.ECI.getBits(),4),r.appendBits(t.getValue(),8)}}Rt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Rt.DEFAULT_BYTE_MODE_ENCODING=G.UTF8.getName();class mi{write(t,r,o,a=null){if(t.length===0)throw new b("Found empty contents");if(r<0||o<0)throw new b("Requested dimensions are too small: "+r+"x"+o);let l=nt.L,h=mi.QUIET_ZONE_SIZE;a!==null&&(a.get(Yt.ERROR_CORRECTION)!==void 0&&(l=nt.fromString(a.get(Yt.ERROR_CORRECTION).toString())),a.get(Yt.MARGIN)!==void 0&&(h=Number.parseInt(a.get(Yt.MARGIN).toString(),10)));const p=Rt.encode(t,l,a);return this.renderResult(p,r,o,h)}writeToDom(t,r,o,a,l=null){typeof t=="string"&&(t=document.querySelector(t));const h=this.write(r,o,a,l);t&&t.appendChild(h)}renderResult(t,r,o,a){const l=t.getMatrix();if(l===null)throw new Zt;const h=l.getWidth(),p=l.getHeight(),m=h+a*2,y=p+a*2,E=Math.max(r,m),O=Math.max(o,y),P=Math.min(Math.floor(E/m),Math.floor(O/y)),j=Math.floor((E-h*P)/2),$=Math.floor((O-p*P)/2),J=this.createSVGElement(E,O);for(let ne=0,ue=$;ne<p;ne++,ue+=P)for(let Ie=0,be=j;Ie<h;Ie++,be+=P)if(l.get(Ie,ne)===1){const xe=this.createSvgRectElement(be,ue,P,P);J.appendChild(xe)}return J}createSVGElement(t,r){const o=document.createElementNS(mi.SVG_NS,"svg");return o.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width",r.toString()),o}createSvgRectElement(t,r,o,a){const l=document.createElementNS(mi.SVG_NS,"rect");return l.setAttributeNS(null,"x",t.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"height",o.toString()),l.setAttributeNS(null,"width",a.toString()),l.setAttributeNS(null,"fill","#000000"),l}}mi.QUIET_ZONE_SIZE=4,mi.SVG_NS="http://www.w3.org/2000/svg";class ei{encode(t,r,o,a,l){if(t.length===0)throw new b("Found empty contents");if(r!==ge.QR_CODE)throw new b("Can only encode QR_CODE, but got "+r);if(o<0||a<0)throw new b(`Requested dimensions are too small: ${o}x${a}`);let h=nt.L,p=ei.QUIET_ZONE_SIZE;l!==null&&(l.get(Yt.ERROR_CORRECTION)!==void 0&&(h=nt.fromString(l.get(Yt.ERROR_CORRECTION).toString())),l.get(Yt.MARGIN)!==void 0&&(p=Number.parseInt(l.get(Yt.MARGIN).toString(),10)));const m=Rt.encode(t,h,l);return ei.renderResult(m,o,a,p)}static renderResult(t,r,o,a){const l=t.getMatrix();if(l===null)throw new Zt;const h=l.getWidth(),p=l.getHeight(),m=h+a*2,y=p+a*2,E=Math.max(r,m),O=Math.max(o,y),P=Math.min(Math.floor(E/m),Math.floor(O/y)),j=Math.floor((E-h*P)/2),$=Math.floor((O-p*P)/2),J=new le(E,O);for(let ne=0,ue=$;ne<p;ne++,ue+=P)for(let Ie=0,be=j;Ie<h;Ie++,be+=P)l.get(Ie,ne)===1&&J.setRegion(be,ue,P,P);return J}}ei.QUIET_ZONE_SIZE=4;class Ni{encode(t,r,o,a,l){let h;switch(r){case ge.QR_CODE:h=new ei;break;default:throw new b("No encoder available for format "+r)}return h.encode(t,r,o,a,l)}}class Lr extends te{constructor(t,r,o,a,l,h,p,m){if(super(h,p),this.yuvData=t,this.dataWidth=r,this.dataHeight=o,this.left=a,this.top=l,a+h>r||l+p>o)throw new b("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(h,p)}getRow(t,r){if(t<0||t>=this.getHeight())throw new b("Requested row is outside the image: "+t);const o=this.getWidth();(r==null||r.length<o)&&(r=new Uint8ClampedArray(o));const a=(t+this.top)*this.dataWidth+this.left;return W.arraycopy(this.yuvData,a,r,0,o),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;const o=t*r,a=new Uint8ClampedArray(o);let l=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return W.arraycopy(this.yuvData,l,a,0,o),a;for(let h=0;h<r;h++){const p=h*t;W.arraycopy(this.yuvData,l,a,p,t),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,r,o,a){return new Lr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,o,a,!1)}renderThumbnail(){const t=this.getWidth()/Lr.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Lr.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(t*r),a=this.yuvData;let l=this.top*this.dataWidth+this.left;for(let h=0;h<r;h++){const p=h*t;for(let m=0;m<t;m++){const y=a[l+m*Lr.THUMBNAIL_SCALE_FACTOR]&255;o[p+m]=4278190080|y*65793}l+=this.dataWidth*Lr.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/Lr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Lr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,r){const o=this.yuvData;for(let a=0,l=this.top*this.dataWidth+this.left;a<r;a++,l+=this.dataWidth){const h=l+t/2;for(let p=l,m=l+t-1;p<h;p++,m--){const y=o[p];o[p]=o[m],o[m]=y}}}invert(){return new pe(this)}}Lr.THUMBNAIL_SCALE_FACTOR=2;class Oi extends te{constructor(t,r,o,a,l,h,p){if(super(r,o),this.dataWidth=a,this.dataHeight=l,this.left=h,this.top=p,t.BYTES_PER_ELEMENT===4){const m=r*o,y=new Uint8ClampedArray(m);for(let E=0;E<m;E++){const O=t[E],P=O>>16&255,j=O>>7&510,$=O&255;y[E]=(P+j+$)/4&255}this.luminances=y}else this.luminances=t;if(a===void 0&&(this.dataWidth=r),l===void 0&&(this.dataHeight=o),h===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+o>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(t,r){if(t<0||t>=this.getHeight())throw new b("Requested row is outside the image: "+t);const o=this.getWidth();(r==null||r.length<o)&&(r=new Uint8ClampedArray(o));const a=(t+this.top)*this.dataWidth+this.left;return W.arraycopy(this.luminances,a,r,0,o),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;const o=t*r,a=new Uint8ClampedArray(o);let l=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return W.arraycopy(this.luminances,l,a,0,o),a;for(let h=0;h<r;h++){const p=h*t;W.arraycopy(this.luminances,l,a,p,t),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,r,o,a){return new Oi(this.luminances,o,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)}invert(){return new pe(this)}}class qn extends G{static forName(t){return this.getCharacterSetECIByName(t)}}class Zs{}Zs.ISO_8859_1=G.ISO8859_1;class Do{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Xa{static singletonList(t){return[t]}static min(t,r){return t.sort(r)[0]}}class Bo{constructor(t){this.previous=t}getPrevious(){return this.previous}}class vi extends Bo{constructor(t,r,o){super(t),this.value=r,this.bitCount=o}appendTo(t,r){t.appendBits(this.value,this.bitCount)}add(t,r){return new vi(this,t,r)}addBinaryShift(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new vi(this,t,r)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+T.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class Fo extends vi{constructor(t,r,o){super(t,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=o}appendTo(t,r){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):o===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+o],8)}addBinaryShift(t,r){return new Fo(this,t,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Nu(N,t,r){return new Fo(N,t,r)}function Gi(N,t,r){return new vi(N,t,r)}const Ou=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],mn=0,ti=1,ar=2,Dr=3,Br=4,Xi=new vi(null,0,0),jo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function xs(N){for(let t of N)k.fill(t,-1);return N[mn][Br]=0,N[ti][Br]=0,N[ti][mn]=28,N[Dr][Br]=0,N[ar][Br]=0,N[ar][mn]=15,N}const zo=xs(k.createInt32Array(6,6));class Jn{constructor(t,r,o,a){this.token=t,this.mode=r,this.binaryShiftByteCount=o,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,r){let o=this.bitCount,a=this.token;if(t!==this.mode){let h=jo[this.mode][t];a=Gi(a,h&65535,h>>16),o+=h>>16}let l=t===ar?4:5;return a=Gi(a,r,l),new Jn(a,t,0,o+l)}shiftAndAppend(t,r){let o=this.token,a=this.mode===ar?4:5;return o=Gi(o,zo[this.mode][t],a),o=Gi(o,r,5),new Jn(o,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(t){let r=this.token,o=this.mode,a=this.bitCount;if(this.mode===Br||this.mode===ar){let p=jo[o][mn];r=Gi(r,p&65535,p>>16),a+=p>>16,o=mn}let l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new Jn(r,o,this.binaryShiftByteCount+1,a+l);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(t+1)),h}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=Nu(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new Jn(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let r=this.bitCount+(jo[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=Jn.calculateBinaryShiftCost(t)-Jn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount}toBitArray(t){let r=[];for(let a=this.endBinaryShift(t.length).token;a!==null;a=a.getPrevious())r.unshift(a);let o=new H;for(const a of r)a.appendTo(o,t);return o}toString(){return de.format("%s bits=%d bytes=%d",Ou[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}Jn.INITIAL_STATE=new Jn(Xi,mn,0,0);function Ru(N){const t=de.getCharCode(" "),r=de.getCharCode("."),o=de.getCharCode(",");N[mn][t]=1;const a=de.getCharCode("Z"),l=de.getCharCode("A");for(let P=l;P<=a;P++)N[mn][P]=P-l+2;N[ti][t]=1;const h=de.getCharCode("z"),p=de.getCharCode("a");for(let P=p;P<=h;P++)N[ti][P]=P-p+2;N[ar][t]=1;const m=de.getCharCode("9"),y=de.getCharCode("0");for(let P=y;P<=m;P++)N[ar][P]=P-y+2;N[ar][o]=12,N[ar][r]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let P=0;P<E.length;P++)N[Dr][de.getCharCode(E[P])]=P;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let P=0;P<O.length;P++)de.getCharCode(O[P])>0&&(N[Br][de.getCharCode(O[P])]=P);return N}const Fr=Ru(k.createInt32Array(5,256));class wi{constructor(t){this.text=t}encode(){const t=de.getCharCode(" "),r=de.getCharCode(`
`);let o=Xa.singletonList(Jn.INITIAL_STATE);for(let l=0;l<this.text.length;l++){let h,p=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case de.getCharCode("\r"):h=p===r?2:0;break;case de.getCharCode("."):h=p===t?3:0;break;case de.getCharCode(","):h=p===t?4:0;break;case de.getCharCode(":"):h=p===t?5:0;break;default:h=0}h>0?(o=wi.updateStateListForPair(o,l,h),l++):o=this.updateStateListForChar(o,l)}return Xa.min(o,(l,h)=>l.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,r){const o=[];for(let a of t)this.updateStateForChar(a,r,o);return wi.simplifyStates(o)}updateStateForChar(t,r,o){let a=this.text[r]&255,l=Fr[t.getMode()][a]>0,h=null;for(let p=0;p<=Br;p++){let m=Fr[p][a];if(m>0){if(h==null&&(h=t.endBinaryShift(r)),!l||p===t.getMode()||p===ar){const y=h.latchAndAppend(p,m);o.push(y)}if(!l&&zo[t.getMode()][p]>=0){const y=h.shiftAndAppend(p,m);o.push(y)}}}if(t.getBinaryShiftByteCount()>0||Fr[t.getMode()][a]===0){let p=t.addBinaryShiftChar(r);o.push(p)}}static updateStateListForPair(t,r,o){const a=[];for(let l of t)this.updateStateForPair(l,r,o,a);return this.simplifyStates(a)}static updateStateForPair(t,r,o,a){let l=t.endBinaryShift(r);if(a.push(l.latchAndAppend(Br,o)),t.getMode()!==Br&&a.push(l.shiftAndAppend(Br,o)),o===3||o===4){let h=l.latchAndAppend(ar,16-o).latchAndAppend(ar,1);a.push(h)}if(t.getBinaryShiftByteCount()>0){let h=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(h)}}static simplifyStates(t){let r=[];for(const o of t){let a=!0;for(const l of r){if(l.isBetterThanOrEqualTo(o)){a=!1;break}o.isBetterThanOrEqualTo(l)&&(r=r.filter(h=>h!==l))}a&&r.push(o)}return r}}class pt{constructor(){}static encodeBytes(t){return pt.encode(t,pt.DEFAULT_EC_PERCENT,pt.DEFAULT_AZTEC_LAYERS)}static encode(t,r,o){let a=new wi(t).encode(),l=T.truncDivision(a.getSize()*r,100)+11,h=a.getSize()+l,p,m,y,E,O;if(o!==pt.DEFAULT_AZTEC_LAYERS){if(p=o<0,m=Math.abs(o),m>(p?pt.MAX_NB_BITS_COMPACT:pt.MAX_NB_BITS))throw new b(de.format("Illegal value %s for layers",o));y=pt.totalBitsInLayer(m,p),E=pt.WORD_SIZE[m];let xe=y-y%E;if(O=pt.stuffBits(a,E),O.getSize()+l>xe)throw new b("Data to large for user specified layer");if(p&&O.getSize()>E*64)throw new b("Data to large for user specified layer")}else{E=0,O=null;for(let xe=0;;xe++){if(xe>pt.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(p=xe<=3,m=p?xe+1:xe,y=pt.totalBitsInLayer(m,p),h>y)continue;(O==null||E!==pt.WORD_SIZE[m])&&(E=pt.WORD_SIZE[m],O=pt.stuffBits(a,E));let rt=y-y%E;if(!(p&&O.getSize()>E*64)&&O.getSize()+l<=rt)break}}let P=pt.generateCheckWords(O,y,E),j=O.getSize()/E,$=pt.generateModeMessage(p,m,j),J=(p?11:14)+m*4,ne=new Int32Array(J),ue;if(p){ue=J;for(let xe=0;xe<ne.length;xe++)ne[xe]=xe}else{ue=J+1+2*T.truncDivision(T.truncDivision(J,2)-1,15);let xe=T.truncDivision(J,2),rt=T.truncDivision(ue,2);for(let et=0;et<xe;et++){let jt=et+T.truncDivision(et,15);ne[xe-et-1]=rt-jt-1,ne[xe+et]=rt+jt+1}}let Ie=new le(ue);for(let xe=0,rt=0;xe<m;xe++){let et=(m-xe)*4+(p?9:12);for(let jt=0;jt<et;jt++){let Fn=jt*2;for(let jn=0;jn<2;jn++)P.get(rt+Fn+jn)&&Ie.set(ne[xe*2+jn],ne[xe*2+jt]),P.get(rt+et*2+Fn+jn)&&Ie.set(ne[xe*2+jt],ne[J-1-xe*2-jn]),P.get(rt+et*4+Fn+jn)&&Ie.set(ne[J-1-xe*2-jn],ne[J-1-xe*2-jt]),P.get(rt+et*6+Fn+jn)&&Ie.set(ne[J-1-xe*2-jt],ne[xe*2+jn])}rt+=et*8}if(pt.drawModeMessage(Ie,p,ue,$),p)pt.drawBullsEye(Ie,T.truncDivision(ue,2),5);else{pt.drawBullsEye(Ie,T.truncDivision(ue,2),7);for(let xe=0,rt=0;xe<T.truncDivision(J,2)-1;xe+=15,rt+=16)for(let et=T.truncDivision(ue,2)&1;et<ue;et+=2)Ie.set(T.truncDivision(ue,2)-rt,et),Ie.set(T.truncDivision(ue,2)+rt,et),Ie.set(et,T.truncDivision(ue,2)-rt),Ie.set(et,T.truncDivision(ue,2)+rt)}let be=new Do;return be.setCompact(p),be.setSize(ue),be.setLayers(m),be.setCodeWords(j),be.setMatrix(Ie),be}static drawBullsEye(t,r,o){for(let a=0;a<o;a+=2)for(let l=r-a;l<=r+a;l++)t.set(l,r-a),t.set(l,r+a),t.set(r-a,l),t.set(r+a,l);t.set(r-o,r-o),t.set(r-o+1,r-o),t.set(r-o,r-o+1),t.set(r+o,r-o),t.set(r+o,r-o+1),t.set(r+o,r+o-1)}static generateModeMessage(t,r,o){let a=new H;return t?(a.appendBits(r-1,2),a.appendBits(o-1,6),a=pt.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(o-1,11),a=pt.generateCheckWords(a,40,4)),a}static drawModeMessage(t,r,o,a){let l=T.truncDivision(o,2);if(r)for(let h=0;h<7;h++){let p=l-3+h;a.get(h)&&t.set(p,l-5),a.get(h+7)&&t.set(l+5,p),a.get(20-h)&&t.set(p,l+5),a.get(27-h)&&t.set(l-5,p)}else for(let h=0;h<10;h++){let p=l-5+h+T.truncDivision(h,5);a.get(h)&&t.set(p,l-7),a.get(h+10)&&t.set(l+7,p),a.get(29-h)&&t.set(p,l+7),a.get(39-h)&&t.set(l-7,p)}}static generateCheckWords(t,r,o){let a=t.getSize()/o,l=new Lo(pt.getGF(o)),h=T.truncDivision(r,o),p=pt.bitsToWords(t,o,h);l.encode(p,h-a);let m=r%o,y=new H;y.appendBits(0,m);for(const E of Array.from(p))y.appendBits(E,o);return y}static bitsToWords(t,r,o){let a=new Int32Array(o),l,h;for(l=0,h=t.getSize()/r;l<h;l++){let p=0;for(let m=0;m<r;m++)p|=t.get(l*r+m)?1<<r-m-1:0;a[l]=p}return a}static getGF(t){switch(t){case 4:return Xe.AZTEC_PARAM;case 6:return Xe.AZTEC_DATA_6;case 8:return Xe.AZTEC_DATA_8;case 10:return Xe.AZTEC_DATA_10;case 12:return Xe.AZTEC_DATA_12;default:throw new b("Unsupported word size "+t)}}static stuffBits(t,r){let o=new H,a=t.getSize(),l=(1<<r)-2;for(let h=0;h<a;h+=r){let p=0;for(let m=0;m<r;m++)(h+m>=a||t.get(h+m))&&(p|=1<<r-1-m);(p&l)===l?(o.appendBits(p&l,r),h--):p&l?o.appendBits(p,r):(o.appendBits(p|1,r),h--)}return o}static totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}pt.DEFAULT_EC_PERCENT=33,pt.DEFAULT_AZTEC_LAYERS=0,pt.MAX_NB_BITS=32,pt.MAX_NB_BITS_COMPACT=4,pt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Yi{encode(t,r,o,a){return this.encodeWithHints(t,r,o,a,null)}encodeWithHints(t,r,o,a,l){let h=Zs.ISO_8859_1,p=pt.DEFAULT_EC_PERCENT,m=pt.DEFAULT_AZTEC_LAYERS;return l!=null&&(l.has(Yt.CHARACTER_SET)&&(h=qn.forName(l.get(Yt.CHARACTER_SET).toString())),l.has(Yt.ERROR_CORRECTION)&&(p=T.parseInt(l.get(Yt.ERROR_CORRECTION).toString())),l.has(Yt.AZTEC_LAYERS)&&(m=T.parseInt(l.get(Yt.AZTEC_LAYERS).toString()))),Yi.encodeLayers(t,r,o,a,h,p,m)}static encodeLayers(t,r,o,a,l,h,p){if(r!==ge.AZTEC)throw new b("Can only encode AZTEC, but got "+r);let m=pt.encode(de.getBytes(t,l),h,p);return Yi.renderResult(m,o,a)}static renderResult(t,r,o){let a=t.getMatrix();if(a==null)throw new Zt;let l=a.getWidth(),h=a.getHeight(),p=Math.max(r,l),m=Math.max(o,h),y=Math.min(p/l,m/h),E=(p-l*y)/2,O=(m-h*y)/2,P=new le(p,m);for(let j=0,$=O;j<h;j++,$+=y)for(let J=0,ne=E;J<l;J++,ne+=y)a.get(J,j)&&P.setRegion(ne,$,y,y);return P}}s.AbstractExpandedDecoder=di,s.ArgumentException=S,s.ArithmeticException=vt,s.AztecCode=Do,s.AztecCodeReader=qt,s.AztecCodeWriter=Yi,s.AztecDecoder=Ve,s.AztecDetector=Xr,s.AztecDetectorResult=ui,s.AztecEncoder=pt,s.AztecHighLevelEncoder=wi,s.AztecPoint=rn,s.BarcodeFormat=ge,s.Binarizer=V,s.BinaryBitmap=R,s.BitArray=H,s.BitMatrix=le,s.BitSource=pi,s.BrowserAztecCodeReader=gr,s.BrowserBarcodeReader=fi,s.BrowserCodeReader=Ce,s.BrowserDatamatrixCodeReader=Cs,s.BrowserMultiFormatReader=Za,s.BrowserPDF417Reader=gi,s.BrowserQRCodeReader=Ga,s.BrowserQRCodeSvgWriter=mi,s.CharacterSetECI=G,s.ChecksumException=z,s.Code128Reader=Se,s.Code39Reader=wt,s.DataMatrixDecodedBitStreamParser=Rn,s.DataMatrixReader=yt,s.DecodeHintType=X,s.DecoderResult=Zn,s.DefaultGridSampler=pr,s.DetectorResult=kt,s.EAN13Reader=Pt,s.EncodeHintType=Yt,s.Exception=v,s.FormatException=U,s.GenericGF=Xe,s.GenericGFPoly=Mt,s.GlobalHistogramBinarizer=_e,s.GridSampler=Rr,s.GridSamplerInstance=Gn,s.HTMLCanvasElementLuminanceSource=ae,s.HybridBinarizer=fe,s.ITFReader=Qe,s.IllegalArgumentException=b,s.IllegalStateException=Zt,s.InvertedLuminanceSource=pe,s.LuminanceSource=te,s.MathUtils=Ge,s.MultiFormatOneDReader=Pr,s.MultiFormatReader=Wa,s.MultiFormatWriter=Ni,s.NotFoundException=Q,s.OneDReader=Ct,s.PDF417DecodedBitStreamParser=ce,s.PDF417DecoderErrorCorrection=Us,s.PDF417Reader=_n,s.PDF417ResultMetadata=Po,s.PerspectiveTransform=bt,s.PlanarYUVLuminanceSource=Lr,s.QRCodeByteMatrix=As,s.QRCodeDataMask=gt,s.QRCodeDecodedBitStreamParser=ct,s.QRCodeDecoderErrorCorrectionLevel=nt,s.QRCodeDecoderFormatInformation=ln,s.QRCodeEncoder=Rt,s.QRCodeEncoderQRCode=Ti,s.QRCodeMaskUtil=Ft,s.QRCodeMatrixUtil=We,s.QRCodeMode=Le,s.QRCodeReader=cn,s.QRCodeVersion=ve,s.QRCodeWriter=ei,s.RGBLuminanceSource=Oi,s.RSS14Reader=Lt,s.RSSExpandedReader=we,s.ReaderException=$n,s.ReedSolomonDecoder=Dn,s.ReedSolomonEncoder=Lo,s.ReedSolomonException=xn,s.Result=ye,s.ResultMetadataType=He,s.ResultPoint=Oe,s.StringUtils=de,s.UnsupportedOperationException=oe,s.VideoInputDevice=Ae,s.WhiteRectangleDetector=nn,s.WriterException=St,s.ZXingArrays=k,s.ZXingCharset=qn,s.ZXingInteger=T,s.ZXingStandardCharsets=Zs,s.ZXingStringBuilder=ee,s.ZXingStringEncoding=re,s.ZXingSystem=W,s.createAbstractExpandedDecoder=Ii,Object.defineProperty(s,"__esModule",{value:!0})})})(ph,ph.exports);var Ut=ph.exports;const Yw=su(Ut),Kw=bg({__proto__:null,default:Yw},[Ut]);var a1=function(){function e(n,s,u){if(this.formatMap=new Map([[je.QR_CODE,Ut.BarcodeFormat.QR_CODE],[je.AZTEC,Ut.BarcodeFormat.AZTEC],[je.CODABAR,Ut.BarcodeFormat.CODABAR],[je.CODE_39,Ut.BarcodeFormat.CODE_39],[je.CODE_93,Ut.BarcodeFormat.CODE_93],[je.CODE_128,Ut.BarcodeFormat.CODE_128],[je.DATA_MATRIX,Ut.BarcodeFormat.DATA_MATRIX],[je.MAXICODE,Ut.BarcodeFormat.MAXICODE],[je.ITF,Ut.BarcodeFormat.ITF],[je.EAN_13,Ut.BarcodeFormat.EAN_13],[je.EAN_8,Ut.BarcodeFormat.EAN_8],[je.PDF_417,Ut.BarcodeFormat.PDF_417],[je.RSS_14,Ut.BarcodeFormat.RSS_14],[je.RSS_EXPANDED,Ut.BarcodeFormat.RSS_EXPANDED],[je.UPC_A,Ut.BarcodeFormat.UPC_A],[je.UPC_E,Ut.BarcodeFormat.UPC_E],[je.UPC_EAN_EXTENSION,Ut.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Kw)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=s,this.logger=u;var d=this.createZXingFormats(n),f=new Map;f.set(Ut.DecodeHintType.POSSIBLE_FORMATS,d),f.set(Ut.DecodeHintType.TRY_HARDER,!1),this.hints=f}return e.prototype.decodeAsync=function(n){var s=this;return new Promise(function(u,d){try{u(s.decode(n))}catch(f){d(f)}})},e.prototype.decode=function(n){var s=new Ut.MultiFormatReader(this.verbose,this.hints),u=new Ut.HTMLCanvasElementLuminanceSource(n),d=new Ut.BinaryBitmap(new Ut.HybridBinarizer(u)),f=s.decode(d);return{text:f.text,format:ug.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,u,d){n.set(s,u)}),n},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createZXingFormats=function(n){for(var s=[],u=0,d=n;u<d.length;u++){var f=d[u];this.formatMap.has(f)?s.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return s},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),Qw=function(e,n,s,u){function d(f){return f instanceof s?f:new s(function(w){w(f)})}return new(s||(s=Promise))(function(f,w){function A(S){try{v(u.next(S))}catch(b){w(b)}}function C(S){try{v(u.throw(S))}catch(b){w(b)}}function v(S){S.done?f(S.value):d(S.value).then(A,C)}v((u=u.apply(e,n||[])).next())})},$w=function(e,n){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},u,d,f,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(v){return function(S){return C([v,S])}}function C(v){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(u=1,d&&(f=v[0]&2?d.return:v[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,v[1])).done)return f;switch(d=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,d=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){s.label=v[1];break}if(v[0]===6&&s.label<f[1]){s.label=f[1],f=v;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(v);break}f[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(S){v=[6,S],d=0}finally{u=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},l1=function(){function e(n,s,u){if(this.formatMap=new Map([[je.QR_CODE,"qr_code"],[je.AZTEC,"aztec"],[je.CODABAR,"codabar"],[je.CODE_39,"code_39"],[je.CODE_93,"code_93"],[je.CODE_128,"code_128"],[je.DATA_MATRIX,"data_matrix"],[je.ITF,"itf"],[je.EAN_13,"ean_13"],[je.EAN_8,"ean_8"],[je.PDF_417,"pdf417"],[je.UPC_A,"upc_a"],[je.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=s,this.logger=u;var d=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(d),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},e.prototype.decodeAsync=function(n){return Qw(this,void 0,void 0,function(){var s,u;return $w(this,function(d){switch(d.label){case 0:return[4,this.detector.detect(n)];case 1:if(s=d.sent(),!s||s.length===0)throw"No barcode or QR code detected.";return u=this.selectLargestBarcode(s),[2,{text:u.rawValue,format:ug.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(n){for(var s=null,u=0,d=0,f=n;d<f.length;d++){var w=f[d],A=w.boundingBox.width*w.boundingBox.height;A>u&&(u=A,s=w)}if(!s)throw"No largest barcode found";return s},e.prototype.createBarcodeDetectorFormats=function(n){for(var s=[],u=0,d=n;u<d.length;u++){var f=d[u];this.formatMap.has(f)?s.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:s}},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,u,d){n.set(s,u)}),n},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),u1=function(e,n,s,u){function d(f){return f instanceof s?f:new s(function(w){w(f)})}return new(s||(s=Promise))(function(f,w){function A(S){try{v(u.next(S))}catch(b){w(b)}}function C(S){try{v(u.throw(S))}catch(b){w(b)}}function v(S){S.done?f(S.value):d(S.value).then(A,C)}v((u=u.apply(e,n||[])).next())})},c1=function(e,n){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},u,d,f,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(v){return function(S){return C([v,S])}}function C(v){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(u=1,d&&(f=v[0]&2?d.return:v[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,v[1])).done)return f;switch(d=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,d=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){s.label=v[1];break}if(v[0]===6&&s.label<f[1]){s.label=f[1],f=v;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(v);break}f[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(S){v=[6,S],d=0}finally{u=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},qw=function(){function e(n,s,u,d){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=u,s&&l1.isSupported()?(this.primaryDecoder=new l1(n,u,d),this.secondaryDecoder=new a1(n,u,d)):this.primaryDecoder=new a1(n,u,d)}return e.prototype.decodeAsync=function(n){return u1(this,void 0,void 0,function(){var s;return c1(this,function(u){switch(u.label){case 0:s=performance.now(),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,u.sent()];case 3:return this.possiblyLogPerformance(s),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(n){return u1(this,void 0,void 0,function(){var s,u;return c1(this,function(d){switch(d.label){case 0:s=performance.now(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,d.sent()];case 3:if(u=d.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw u;case 4:return this.possiblyLogPerformance(s),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(n){if(this.verbose){var s=performance.now()-n;this.executionResults.push(s),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,s=0,u=this.executionResults;s<u.length;s++){var d=u[s];n+=d}var f=n/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),pd=function(){var e=function(n,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(u[f]=d[f])},e(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(n,s);function u(){this.constructor=n}n.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),nu=function(e,n,s,u){function d(f){return f instanceof s?f:new s(function(w){w(f)})}return new(s||(s=Promise))(function(f,w){function A(S){try{v(u.next(S))}catch(b){w(b)}}function C(S){try{v(u.throw(S))}catch(b){w(b)}}function v(S){S.done?f(S.value):d(S.value).then(A,C)}v((u=u.apply(e,n||[])).next())})},ru=function(e,n){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},u,d,f,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(v){return function(S){return C([v,S])}}function C(v){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(u=1,d&&(f=v[0]&2?d.return:v[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,v[1])).done)return f;switch(d=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,d=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){s.label=v[1];break}if(v[0]===6&&s.label<f[1]){s.label=f[1],f=v;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(v);break}f[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(S){v=[6,S],d=0}finally{u=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},hg=function(){function e(n,s){this.name=n,this.track=s}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(n){var s={};s[this.name]=n;var u={advanced:[s]};return this.track.applyConstraints(u)},e.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var s=n[this.name];return s}return null},e}(),Jw=function(e){pd(n,e);function n(s,u){return e.call(this,s,u)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(s){var u={};u[this.name]=s;var d={advanced:[u]};return this.track.applyConstraints(d)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var s=this.track.getCapabilities(),u=s[this.name];return{min:u.min,max:u.max,step:u.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n}(hg),ey=function(e){pd(n,e);function n(s){return e.call(this,"zoom",s)||this}return n}(Jw),ty=function(e){pd(n,e);function n(s){return e.call(this,"torch",s)||this}return n}(hg),ny=function(){function e(n){this.track=n}return e.prototype.zoomFeature=function(){return new ey(this.track)},e.prototype.torchFeature=function(){return new ty(this.track)},e}(),ry=function(){function e(n,s,u){this.isClosed=!1,this.parentElement=n,this.mediaStream=s,this.callbacks=u,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return e.prototype.createVideoElement=function(n){var s=document.createElement("video");return s.style.width="".concat(n,"px"),s.style.display="block",s.muted=!0,s.setAttribute("muted","true"),s.playsInline=!0,s},e.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var s=function(){var u=n.surface.clientWidth,d=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(u,d),n.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(n,s,u,d){return nu(this,void 0,void 0,function(){var f,w;return ru(this,function(A){switch(A.label){case 0:return f=new e(n,s,d),u.aspectRatio?(w={aspectRatio:u.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(w)]):[3,2];case 1:A.sent(),A.label=2;case 2:return f.setupSurface(),[2,f]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(n){this.failIfClosed();var s=this,u=function(){setTimeout(n,200),s.surface.removeEventListener("playing",u)};this.surface.addEventListener("playing",u),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(n){return nu(this,void 0,void 0,function(){return ru(this,function(s){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(s,u){var d=n.mediaStream.getVideoTracks(),f=d.length,w=0;n.mediaStream.getVideoTracks().forEach(function(A){n.mediaStream.removeTrack(A),A.stop(),++w,w>=f&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),s())})})},e.prototype.getCapabilities=function(){return new ny(this.getFirstTrackOrFail())},e}(),iy=function(){function e(n){this.mediaStream=n}return e.prototype.render=function(n,s,u){return nu(this,void 0,void 0,function(){return ru(this,function(d){return[2,ry.create(n,this.mediaStream,s,u)]})})},e.create=function(n){return nu(this,void 0,void 0,function(){var s,u;return ru(this,function(d){switch(d.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return s={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(s)];case 1:return u=d.sent(),[2,new e(u)]}})})},e}(),h1=function(e,n,s,u){function d(f){return f instanceof s?f:new s(function(w){w(f)})}return new(s||(s=Promise))(function(f,w){function A(S){try{v(u.next(S))}catch(b){w(b)}}function C(S){try{v(u.throw(S))}catch(b){w(b)}}function v(S){S.done?f(S.value):d(S.value).then(A,C)}v((u=u.apply(e,n||[])).next())})},d1=function(e,n){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},u,d,f,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(v){return function(S){return C([v,S])}}function C(v){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(u=1,d&&(f=v[0]&2?d.return:v[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,v[1])).done)return f;switch(d=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,d=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){s.label=v[1];break}if(v[0]===6&&s.label<f[1]){s.label=f[1],f=v;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(v);break}f[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(S){v=[6,S],d=0}finally{u=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},sy=function(){function e(){}return e.failIfNotSupported=function(){return h1(this,void 0,void 0,function(){return d1(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(n){return h1(this,void 0,void 0,function(){return d1(this,function(s){return[2,iy.create(n)]})})},e}(),oy=function(e,n,s,u){function d(f){return f instanceof s?f:new s(function(w){w(f)})}return new(s||(s=Promise))(function(f,w){function A(S){try{v(u.next(S))}catch(b){w(b)}}function C(S){try{v(u.throw(S))}catch(b){w(b)}}function v(S){S.done?f(S.value):d(S.value).then(A,C)}v((u=u.apply(e,n||[])).next())})},ay=function(e,n){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},u,d,f,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(v){return function(S){return C([v,S])}}function C(v){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(u=1,d&&(f=v[0]&2?d.return:v[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,v[1])).done)return f;switch(d=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,d=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){s.label=v[1];break}if(v[0]===6&&s.label<f[1]){s.label=f[1],f=v;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(v);break}f[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(S){v=[6,S],d=0}finally{u=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},ly=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var n=uo.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(n=uo.insecureContextCameraQueryError()),Promise.reject(n)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},e.getCamerasFromMediaDevices=function(){return oy(this,void 0,void 0,function(){var n,s,u,d,f,w,A;return ay(this,function(C){switch(C.label){case 0:return n=function(v){for(var S=v.getVideoTracks(),b=0,R=S;b<R.length;b++){var z=R[b];z.enabled=!1,z.stop(),v.removeTrack(z)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return s=C.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(u=C.sent(),d=[],f=0,w=u;f<w.length;f++)A=w[f],A.kind==="videoinput"&&d.push({id:A.deviceId,label:A.label});return n(s),[2,d]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,s){var u=function(f){for(var w=[],A=0,C=f;A<C.length;A++){var v=C[A];v.kind==="video"&&w.push({id:v.id,label:v.label})}n(w)},d=MediaStreamTrack;d.getSources(u)})},e}(),en;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(en||(en={}));var uy=function(){function e(){this.state=en.NOT_STARTED,this.onGoingTransactionNewState=en.UNKNOWN}return e.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},e.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===en.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=en.UNKNOWN,this.directTransition(n)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===en.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=en.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==en.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(n){switch(this.state){case en.UNKNOWN:throw"Transition from unknown is not allowed";case en.NOT_STARTED:this.failIfNewStateIs(n,[en.PAUSED]);break;case en.SCANNING:break;case en.PAUSED:break}},e.prototype.failIfNewStateIs=function(n,s){for(var u=0,d=s;u<d.length;u++){var f=d[u];if(n===f)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},e}(),cy=function(){function e(n){this.stateManager=n}return e.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},e.prototype.directTransition=function(n){this.stateManager.directTransition(n)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===en.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==en.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===en.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===en.PAUSED},e}(),hy=function(){function e(){}return e.create=function(){return new cy(new uy)},e}(),dy=function(){var e=function(n,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(u[f]=d[f])},e(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(n,s);function u(){this.constructor=n}n.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),xr=function(e){dy(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n}(Zw),fy=function(){function e(n,s){this.logger=s,this.fps=xr.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=xr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?cg.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!ki(this.qrbox)},e.create=function(n,s){return new e(n,s)},e}(),f1=function(){function e(n,s){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var u;typeof s=="boolean"?this.verbose=s===!0:s&&(u=s,this.verbose=u.verbose===!0,u.experimentalFeatures),this.logger=new Xw(this.verbose),this.qrcode=new qw(this.getSupportedFormats(s),this.getUseBarCodeDetectorIfSupported(u),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=hy.create()}return e.prototype.start=function(n,s,u,d){var f=this;if(!n)throw"cameraIdOrConfig is required";if(!u||typeof u!="function")throw"qrCodeSuccessCallback is required and should be a function.";var w;d?w=d:w=this.verbose?this.logger.log:function(){};var A=fy.create(s,this.logger);this.clearElement();var C=!1;A.videoConstraints&&(A.isMediaStreamConstraintsValid()?C=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=C,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:xr.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var b=this,R=this.stateManagerProxy.startTransition(en.SCANNING);return new Promise(function(z,V){var W=v?A.videoConstraints:b.createVideoConstraints(n);if(!W){R.cancel(),V("videoConstraints should be defined");return}var se={};(!v||A.aspectRatio)&&(se.aspectRatio=A.aspectRatio);var B={onRenderSurfaceReady:function(k,T){b.setupUi(k,T,A),b.isScanning=!0,b.foreverScan(A,u,w)}};sy.failIfNotSupported().then(function(k){k.create(W).then(function(T){return T.render(f.element,se,B).then(function(H){b.renderedCamera=H,R.execute(),z(null)}).catch(function(H){R.cancel(),V(H)})}).catch(function(T){R.cancel(),V(uo.errorGettingUserMedia(T))})}).catch(function(k){R.cancel(),V(uo.cameraStreamingNotSupported())})})},e.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(en.PAUSED),this.showPausedState(),(ki(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,s=function(){n.stateManagerProxy.directTransition(en.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){s();return}this.renderedCamera.resume(function(){s()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var s=this.stateManagerProxy.startTransition(en.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var u=function(){if(n.element){var f=document.getElementById(xr.SHADED_REGION_ELEMENT_ID);f&&n.element.removeChild(f)}},d=this;return this.renderedCamera.close().then(function(){return d.renderedCamera=null,d.element&&(d.element.removeChild(d.canvasElement),d.canvasElement=null),u(),d.qrRegion&&(d.qrRegion=null),d.context&&(d.context=null),s.execute(),d.hidePausedState(),d.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(n,s){return this.scanFileV2(n,s).then(function(u){return u.decodedText})},e.prototype.scanFileV2=function(n,s){var u=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ki(s)&&(s=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(d,f){u.possiblyCloseLastScanImageFile(),u.clearElement(),u.lastScanImageFile=URL.createObjectURL(n);var w=new Image;w.onload=function(){var A=w.width,C=w.height,v=document.getElementById(u.elementId),S=v.clientWidth?v.clientWidth:xr.DEFAULT_WIDTH,b=Math.max(v.clientHeight?v.clientHeight:C,xr.FILE_SCAN_MIN_HEIGHT),R=u.computeCanvasDrawConfig(A,C,S,b);if(s){var z=u.createCanvasElement(S,b,"qr-canvas-visible");z.style.display="inline-block",v.appendChild(z);var V=z.getContext("2d");if(!V)throw"Unable to get 2d context from canvas";V.canvas.width=S,V.canvas.height=b,V.drawImage(w,0,0,A,C,R.x,R.y,R.width,R.height)}var W=xr.FILE_SCAN_HIDDEN_CANVAS_PADDING,se=Math.max(w.width,R.width),B=Math.max(w.height,R.height),k=se+2*W,T=B+2*W,H=u.createCanvasElement(k,T);v.appendChild(H);var q=H.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=k,q.canvas.height=T,q.drawImage(w,0,0,A,C,W,W,se,B);try{u.qrcode.decodeRobustlyAsync(H).then(function(X){d(o1.createFromQrcodeResult(X))}).catch(f)}catch(X){f("QR code parse error, error = ".concat(X))}},w.onerror=f,w.onabort=f,w.onstalled=f,w.onsuspend=f,w.src=URL.createObjectURL(n)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return ly.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(n){if(n){if(!cg.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(n){var s=[je.QR_CODE,je.AZTEC,je.CODABAR,je.CODE_39,je.CODE_93,je.CODE_128,je.DATA_MATRIX,je.MAXICODE,je.ITF,je.EAN_13,je.EAN_8,je.PDF_417,je.RSS_14,je.RSS_EXPANDED,je.UPC_A,je.UPC_E,je.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return s;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var u=[],d=0,f=n.formatsToSupport;d<f.length;d++){var w=f[d];Ww(w)?u.push(w):this.logger.warn("Invalid format: ".concat(w," passed in config, ignoring."))}if(u.length===0)throw"None of formatsToSupport match supported values.";return u},e.prototype.getUseBarCodeDetectorIfSupported=function(n){if(ki(n))return!0;if(!ki(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(ki(n.experimentalFeatures))return!0;var s=n.experimentalFeatures;return ki(s.useBarCodeDetectorIfSupported)?!0:s.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(n,s,u){var d=this,f=u.qrbox;this.validateQrboxConfig(f);var w=this.toQrdimensions(n,s,f),A=function(v){if(v<xr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(xr.MIN_QR_BOX_SIZE,"px.")},C=function(v){return v>n&&(d.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=n),v};A(w.width),A(w.height),w.width=C(w.width)},e.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(n,s,u){if(typeof u=="number")return{width:u,height:u};if(typeof u=="function")try{return u(n,s)}catch(d){throw new Error("qrbox config was passed as a function but it failed with unknown error"+d)}return u},e.prototype.setupUi=function(n,s,u){u.isShadedBoxEnabled()&&this.validateQrboxSize(n,s,u);var d=ki(u.qrbox)?{width:n,height:s}:u.qrbox;this.validateQrboxConfig(d);var f=this.toQrdimensions(n,s,d);f.height>s&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var w=u.isShadedBoxEnabled()&&f.height<=s,A={x:0,y:0,width:n,height:s},C=w?this.getShadedRegionBounds(n,s,f):A,v=this.createCanvasElement(C.width,C.height),S={willReadFrequently:!0},b=v.getContext("2d",S);b.canvas.width=C.width,b.canvas.height=C.height,this.element.append(v),w&&this.possiblyInsertShadingElement(this.element,n,s,f),this.createScannerPausedUiElement(this.element),this.qrRegion=C,this.context=b,this.canvasElement=v},e.prototype.createScannerPausedUiElement=function(n){var s=document.createElement("div");s.innerText=uo.scannerPaused(),s.style.display="none",s.style.position="absolute",s.style.top="0px",s.style.zIndex="1",s.style.background="rgba(9, 9, 9, 0.46)",s.style.color="#FFECEC",s.style.textAlign="center",s.style.width="100%",n.appendChild(s),this.scannerPausedUiElement=s},e.prototype.scanContext=function(n,s){var u=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(d){return n(d.text,o1.createFromQrcodeResult(d)),u.possiblyUpdateShaders(!0),!0}).catch(function(d){u.possiblyUpdateShaders(!1);var f=uo.codeParseError(d);return s(f,Gw.createFrom(f)),!1})},e.prototype.foreverScan=function(n,s,u){var d=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),w=f.videoWidth/f.clientWidth,A=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var C=this.qrRegion.width*w,v=this.qrRegion.height*A,S=this.qrRegion.x*w,b=this.qrRegion.y*A;this.context.drawImage(f,S,b,C,v,0,0,this.qrRegion.width,this.qrRegion.height);var R=function(){d.foreverScanTimeout=setTimeout(function(){d.foreverScan(n,s,u)},d.getTimeoutFps(n.fps))};this.scanContext(s,u).then(function(z){!z&&n.disableFlip!==!0?(d.context.translate(d.context.canvas.width,0),d.context.scale(-1,1),d.scanContext(s,u).finally(function(){R()})):R()}).catch(function(z){d.logger.logError("Error happend while scanning context",z),R()})}},e.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var s="facingMode",u="deviceId",d={user:!0,environment:!0},f="exact",w=function(V){if(V in d)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(V,"'")},A=Object.keys(n);if(A.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(A.length," keys");var C=Object.keys(n)[0];if(C!==s&&C!==u)throw"Only '".concat(s,"' and '").concat(u,"' ")+" are supported for 'cameraIdOrConfig'";if(C===s){var v=n.facingMode;if(typeof v=="string"){if(w(v))return{facingMode:v}}else if(typeof v=="object")if(f in v){if(w(v["".concat(f)]))return{facingMode:{exact:v["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var S=typeof v;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var b=n.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(f in b)return{deviceId:{exact:b["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var R=typeof b;throw"Invalid type of 'deviceId' = ".concat(R)}}}var z=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(z)},e.prototype.computeCanvasDrawConfig=function(n,s,u,d){if(n<=u&&s<=d){var f=(u-n)/2,w=(d-s)/2;return{x:f,y:w,width:n,height:s}}else{var A=n,C=s;return n>u&&(s=u/n*s,n=u),s>d&&(n=d/s*n,s=d),this.logger.log("Image downsampled from "+"".concat(A,"X").concat(C)+" to ".concat(n,"X").concat(s,".")),this.computeCanvasDrawConfig(n,s,u,d)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},e.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(s){s.style.backgroundColor=n?xr.BORDER_SHADER_MATCH_COLOR:xr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(n,s,u){var d=n,f=s,w=document.createElement("canvas");return w.style.width="".concat(d,"px"),w.style.height="".concat(f,"px"),w.style.display="none",w.id=ki(u)?"qr-canvas":u,w},e.prototype.getShadedRegionBounds=function(n,s,u){if(u.width>n||u.height>s)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-u.width)/2,y:(s-u.height)/2,width:u.width,height:u.height}},e.prototype.possiblyInsertShadingElement=function(n,s,u,d){if(!(s-d.width<1||u-d.height<1)){var f=document.createElement("div");f.style.position="absolute";var w=(s-d.width)/2,A=(u-d.height)/2;if(f.style.borderLeft="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(xr.SHADED_REGION_ELEMENT_ID),s-d.width<11||u-d.height<11)this.hasBorderShaders=!1;else{var C=5,v=40;this.insertShaderBorders(f,v,C,-C,null,0,!0),this.insertShaderBorders(f,v,C,-C,null,0,!1),this.insertShaderBorders(f,v,C,null,-C,0,!0),this.insertShaderBorders(f,v,C,null,-C,0,!1),this.insertShaderBorders(f,C,v+C,-C,null,-C,!0),this.insertShaderBorders(f,C,v+C,null,-C,-C,!0),this.insertShaderBorders(f,C,v+C,-C,null,-C,!1),this.insertShaderBorders(f,C,v+C,null,-C,-C,!1),this.hasBorderShaders=!0}n.append(f)}},e.prototype.insertShaderBorders=function(n,s,u,d,f,w,A){var C=document.createElement("div");C.style.position="absolute",C.style.backgroundColor=xr.BORDER_SHADER_DEFAULT_COLOR,C.style.width="".concat(s,"px"),C.style.height="".concat(u,"px"),d!==null&&(C.style.top="".concat(d,"px")),f!==null&&(C.style.bottom="".concat(f,"px")),A?C.style.left="".concat(w,"px"):C.style.right="".concat(w,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(C),n.appendChild(C)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(n){return 1e3/n},e}(),p1;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(p1||(p1={}));var dg={exports:{}};(function(e){var n=function(){var s=String.fromCharCode,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",f={};function w(C,v){if(!f[C]){f[C]={};for(var S=0;S<C.length;S++)f[C][C.charAt(S)]=S}return f[C][v]}var A={compressToBase64:function(C){if(C==null)return"";var v=A._compress(C,6,function(S){return u.charAt(S)});switch(v.length%4){default:case 0:return v;case 1:return v+"===";case 2:return v+"==";case 3:return v+"="}},decompressFromBase64:function(C){return C==null?"":C==""?null:A._decompress(C.length,32,function(v){return w(u,C.charAt(v))})},compressToUTF16:function(C){return C==null?"":A._compress(C,15,function(v){return s(v+32)})+" "},decompressFromUTF16:function(C){return C==null?"":C==""?null:A._decompress(C.length,16384,function(v){return C.charCodeAt(v)-32})},compressToUint8Array:function(C){for(var v=A.compress(C),S=new Uint8Array(v.length*2),b=0,R=v.length;b<R;b++){var z=v.charCodeAt(b);S[b*2]=z>>>8,S[b*2+1]=z%256}return S},decompressFromUint8Array:function(C){if(C==null)return A.decompress(C);for(var v=new Array(C.length/2),S=0,b=v.length;S<b;S++)v[S]=C[S*2]*256+C[S*2+1];var R=[];return v.forEach(function(z){R.push(s(z))}),A.decompress(R.join(""))},compressToEncodedURIComponent:function(C){return C==null?"":A._compress(C,6,function(v){return d.charAt(v)})},decompressFromEncodedURIComponent:function(C){return C==null?"":C==""?null:(C=C.replace(/ /g,"+"),A._decompress(C.length,32,function(v){return w(d,C.charAt(v))}))},compress:function(C){return A._compress(C,16,function(v){return s(v)})},_compress:function(C,v,S){if(C==null)return"";var b,R,z={},V={},W="",se="",B="",k=2,T=3,H=2,q=[],X=0,U=0,Z;for(Z=0;Z<C.length;Z+=1)if(W=C.charAt(Z),Object.prototype.hasOwnProperty.call(z,W)||(z[W]=T++,V[W]=!0),se=B+W,Object.prototype.hasOwnProperty.call(z,se))B=se;else{if(Object.prototype.hasOwnProperty.call(V,B)){if(B.charCodeAt(0)<256){for(b=0;b<H;b++)X=X<<1,U==v-1?(U=0,q.push(S(X)),X=0):U++;for(R=B.charCodeAt(0),b=0;b<8;b++)X=X<<1|R&1,U==v-1?(U=0,q.push(S(X)),X=0):U++,R=R>>1}else{for(R=1,b=0;b<H;b++)X=X<<1|R,U==v-1?(U=0,q.push(S(X)),X=0):U++,R=0;for(R=B.charCodeAt(0),b=0;b<16;b++)X=X<<1|R&1,U==v-1?(U=0,q.push(S(X)),X=0):U++,R=R>>1}k--,k==0&&(k=Math.pow(2,H),H++),delete V[B]}else for(R=z[B],b=0;b<H;b++)X=X<<1|R&1,U==v-1?(U=0,q.push(S(X)),X=0):U++,R=R>>1;k--,k==0&&(k=Math.pow(2,H),H++),z[se]=T++,B=String(W)}if(B!==""){if(Object.prototype.hasOwnProperty.call(V,B)){if(B.charCodeAt(0)<256){for(b=0;b<H;b++)X=X<<1,U==v-1?(U=0,q.push(S(X)),X=0):U++;for(R=B.charCodeAt(0),b=0;b<8;b++)X=X<<1|R&1,U==v-1?(U=0,q.push(S(X)),X=0):U++,R=R>>1}else{for(R=1,b=0;b<H;b++)X=X<<1|R,U==v-1?(U=0,q.push(S(X)),X=0):U++,R=0;for(R=B.charCodeAt(0),b=0;b<16;b++)X=X<<1|R&1,U==v-1?(U=0,q.push(S(X)),X=0):U++,R=R>>1}k--,k==0&&(k=Math.pow(2,H),H++),delete V[B]}else for(R=z[B],b=0;b<H;b++)X=X<<1|R&1,U==v-1?(U=0,q.push(S(X)),X=0):U++,R=R>>1;k--,k==0&&(k=Math.pow(2,H),H++)}for(R=2,b=0;b<H;b++)X=X<<1|R&1,U==v-1?(U=0,q.push(S(X)),X=0):U++,R=R>>1;for(;;)if(X=X<<1,U==v-1){q.push(S(X));break}else U++;return q.join("")},decompress:function(C){return C==null?"":C==""?null:A._decompress(C.length,32768,function(v){return C.charCodeAt(v)})},_decompress:function(C,v,S){var b=[],R=4,z=4,V=3,W="",se=[],B,k,T,H,q,X,U,Z={val:S(0),position:v,index:1};for(B=0;B<3;B+=1)b[B]=B;for(T=0,q=Math.pow(2,2),X=1;X!=q;)H=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=v,Z.val=S(Z.index++)),T|=(H>0?1:0)*X,X<<=1;switch(T){case 0:for(T=0,q=Math.pow(2,8),X=1;X!=q;)H=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=v,Z.val=S(Z.index++)),T|=(H>0?1:0)*X,X<<=1;U=s(T);break;case 1:for(T=0,q=Math.pow(2,16),X=1;X!=q;)H=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=v,Z.val=S(Z.index++)),T|=(H>0?1:0)*X,X<<=1;U=s(T);break;case 2:return""}for(b[3]=U,k=U,se.push(U);;){if(Z.index>C)return"";for(T=0,q=Math.pow(2,V),X=1;X!=q;)H=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=v,Z.val=S(Z.index++)),T|=(H>0?1:0)*X,X<<=1;switch(U=T){case 0:for(T=0,q=Math.pow(2,8),X=1;X!=q;)H=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=v,Z.val=S(Z.index++)),T|=(H>0?1:0)*X,X<<=1;b[z++]=s(T),U=z-1,R--;break;case 1:for(T=0,q=Math.pow(2,16),X=1;X!=q;)H=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=v,Z.val=S(Z.index++)),T|=(H>0?1:0)*X,X<<=1;b[z++]=s(T),U=z-1,R--;break;case 2:return se.join("")}if(R==0&&(R=Math.pow(2,V),V++),b[U])W=b[U];else if(U===z)W=k+k.charAt(0);else return null;se.push(W),b[z++]=k+W.charAt(0),R--,k=W,R==0&&(R=Math.pow(2,V),V++)}}};return A}();e!=null?e.exports=n:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return n})})(dg);var g1=dg.exports;const uc=e=>{if(typeof e!="string")return null;const n=e.trim();if(!n)return null;const u=/^[a-z]+:\/\//i.test(n)?n:`https://${n}`;try{const d=new URL(u,typeof window<"u"?window.location.origin:void 0);return(d.protocol==="http:"||d.protocol==="https:")&&(d.protocol=d.protocol==="https:"?"wss:":"ws:"),d.protocol!=="ws:"&&d.protocol!=="wss:"?null:(d.pathname=d.pathname||"/",d.search="",d.hash="",d.toString())}catch{return null}},py=()=>typeof window<"u"?`${window.location.protocol==="https:"?"wss":"ws"}://${window.location.host}`:"ws://localhost:4000",gy=uc("https://navstore.alexwebserver.dpdns.org/")??uc(void 0)??uc("http://192.168.1.115:4000")??py(),my=3500,vy=12,wy=3e4,yy=800,_y=5,Cy=120,fg=1e4,Ey="HQ",Ay="#38bdf8",gd="p2p-host-session",Ci=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981","#06b6d4","#3b82f6","#8b5cf6","#d946ef","#f43f5e"],m1={connectionStatus:"disconnected",sessionId:"",participantId:"",role:null,peers:{},logs:[],socket:null,hostPeerId:null,shouldReconnect:!1,reconnectAttempts:0,pendingCode:"",lastStateVersion:0,locationIntervalMs:fg,selfLabel:"",resumeToken:"",hostOnline:!0},md=()=>typeof window<"u"&&!!window.localStorage,xy=()=>{if(!md())return null;try{const e=window.localStorage.getItem(gd);if(!e)return null;const n=JSON.parse(e);if(typeof(n==null?void 0:n.sessionId)=="string"&&typeof(n==null?void 0:n.resumeToken)=="string")return n}catch{}return null},Sy=(e,n)=>{if(md()&&!(!e||!n))try{window.localStorage.setItem(gd,JSON.stringify({sessionId:e,resumeToken:n,updatedAt:Date.now()}))}catch{}},cc=()=>{if(md())try{window.localStorage.removeItem(gd)}catch{}},v1=(e=[])=>{const n={};return e.forEach(s=>{if(!(s!=null&&s.id))return;const u=typeof s.updatedAt=="number"?s.updatedAt:null,d=typeof s.lastSeenAt=="number"?s.lastSeenAt:u;n[s.id]={id:s.id,color:s.color??Ci[Math.floor(Math.random()*Ci.length)],label:s.label??s.id,role:s.role??"client",location:s.location??null,routes:s.routes??null,updatedAt:u,lastSeenAt:d??null,isOnline:typeof s.isOnline=="boolean"?s.isOnline:!0}}),n},Iy=()=>new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date),by=(e=0)=>{const n=Math.min(my*Math.pow(1.5,e),wy),s=Math.random()*yy;return Math.round(n+s)},Ty=(e,n)=>{if(!e||typeof e!="object")return null;const s=e.position??e,u=Number(s==null?void 0:s.lat),d=Number(s==null?void 0:s.lng);return!Number.isFinite(u)||!Number.isFinite(d)?null:{id:typeof e.id=="string"?e.id:`PT-${n}`,name:typeof e.name=="string"?e.name:void 0,position:{lat:u,lng:d}}},Ny=(e=[])=>Array.isArray(e)?e.map((n,s)=>{if(!n||typeof n!="object")return null;const u=Array.isArray(n.items)?n.items.map((d,f)=>Ty(d,f)).filter(Boolean):[];return u.length<2?null:{id:typeof n.id=="string"?n.id:`R-${s}`,name:typeof n.name=="string"?n.name:void 0,color:typeof n.color=="string"?n.color:null,items:u}}).filter(Boolean):[],qi=cd((e,n)=>{let s=null,u=!1;const d=(B,k="info")=>{e(T=>({logs:[...T.logs,{time:Iy(),message:B,type:k}]}))},f=()=>{s&&(clearTimeout(s),s=null)},w=()=>{const B=n().socket;if(B){B.onopen=null,B.onmessage=null,B.onclose=null,B.onerror=null;try{B.close()}catch{}}e({socket:null})},A=()=>{f(),u=!1,e({...m1})},C=(B,k)=>{const T=n(),H=typeof B=="string"&&B.trim().length>0?B.trim():null,q=H?T.peers[H]:null,X=(q==null?void 0:q.label)??(typeof k=="string"&&k.trim().length>0?k.trim():null),U=H??X??"peer",Z=X&&X!==U?`${U} (${X})`:U;return H&&H===T.participantId?`${Z} (me)`:Z},v=(B=[])=>{var X;const k=n().peers,T=v1(B),H={peers:{...k,...T}},q=n().participantId;q&&((X=T[q])!=null&&X.label)&&(H.selfLabel=T[q].label),e(H)},S=B=>{e(k=>{if(!k.peers[B])return k;const T={...k.peers};return delete T[B],{peers:T}})},b=B=>{var U,Z;if(!(B!=null&&B.data)||n().role==="host")return;let k;try{if(k=g1.decompressFromEncodedURIComponent(B.data),!k)throw new Error("decode-failed")}catch{d("Failed to decode host snapshot","error");return}let T;try{T=JSON.parse(k)}catch{d("Malformed snapshot payload","error");return}const H=n().hostPeerId??T.hostPeerId??"HOST-LINK",q=((U=n().peers[H])==null?void 0:U.color)??"#38bdf8",X=((Z=n().peers[H])==null?void 0:Z.label)??"HQ";e(G=>{var oe;return{peers:{...G.peers,[H]:{id:H,color:q,label:X,role:"host",location:((oe=G.peers[H])==null?void 0:oe.location)??null,routes:T.routes??null,snapshot:T,updatedAt:Date.now(),lastSeenAt:Date.now(),isOnline:G.hostOnline}},hostPeerId:H,lastStateVersion:B.version??G.lastStateVersion}})},R=(B,k,T={})=>{if(B==="host")return T.resumeSessionId&&T.resumeToken?{type:"host:resume",payload:{sessionId:T.resumeSessionId,resumeToken:T.resumeToken}}:{type:"host:init"};const H={sessionId:k};return typeof T.participantId=="string"&&T.participantId.trim().length>0&&(H.participantId=T.participantId.trim()),typeof T.participantResumeToken=="string"&&T.participantResumeToken.trim().length>0&&(H.resumeToken=T.participantResumeToken.trim()),{type:"client:join",payload:H}},z=()=>{f();const B=n();if(!B.shouldReconnect){A();return}if(B.reconnectAttempts>=vy){d("Gave up trying to reconnect.","error"),e({connectionStatus:"disconnected",shouldReconnect:!1});return}if(B.role!=="host"&&!B.pendingCode){A();return}const k=by(B.reconnectAttempts);s=setTimeout(()=>{s=null;const T=n();if(!T.shouldReconnect){A();return}T.role==="host"?T.sessionId&&T.resumeToken?(u=!0,W({role:"host",isReconnect:!0,resumeSessionId:T.sessionId,resumeToken:T.resumeToken})):W({role:"host",isReconnect:!0}):T.pendingCode?W({role:"client",sessionCode:T.pendingCode,isReconnect:!0,participantId:T.participantId,participantResumeToken:T.resumeToken}):A()},k),e({connectionStatus:"reconnecting",reconnectAttempts:B.reconnectAttempts+1}),d(B.role==="host"?"Rebinding HQ relay":"Attempting to relink","info")},V=B=>{var H;const{type:k,payload:T}=B;switch(k){case"session:ready":{const q=(T==null?void 0:T.peers)??[],X=v1(q),U=q.find(Q=>Q.role==="host"),Z=Number(T==null?void 0:T.intervalMs),G=T.participantId,oe=T.role,re=X[G],de=(re==null?void 0:re.label)??(oe==="host"?Ey:G),ee={id:G,color:(re==null?void 0:re.color)??(oe==="host"?Ay:Ci[Math.floor(Math.random()*Ci.length)]),label:de,role:oe,location:(re==null?void 0:re.location)??null,routes:(re==null?void 0:re.routes)??null,updatedAt:(re==null?void 0:re.updatedAt)??null,lastSeenAt:(re==null?void 0:re.lastSeenAt)??Date.now(),isOnline:!0},le={...X,[G]:ee};f(),e({connectionStatus:"connected",sessionId:T.sessionId,participantId:T.participantId,role:T.role,peers:le,hostPeerId:oe==="host"?G:(U==null?void 0:U.id)??n().hostPeerId,reconnectAttempts:0,shouldReconnect:T.role==="client"||T.role==="host",logs:[],lastStateVersion:((H=T.state)==null?void 0:H.version)??0,locationIntervalMs:Number.isFinite(Z)?Z:fg,selfLabel:de,resumeToken:typeof T.resumeToken=="string"?T.resumeToken:n().resumeToken,hostOnline:!0}),d(T.role==="host"?`Session ${T.sessionId} online`:`Linked to ${T.sessionId}`,"success"),T.state&&b(T.state),T.role==="host"&&T.sessionId&&T.resumeToken&&Sy(T.sessionId,T.resumeToken),u=!1;break}case"session:peer-joined":{const q=T==null?void 0:T.participant;q!=null&&q.id&&(v([q]),d(`${C(q.id,q.label)} linked`,"info"));break}case"session:peer-left":{if(T!=null&&T.participantId){const q=C(T.participantId);S(T.participantId);const X=(T==null?void 0:T.reason)??"client-left",U=X==="client-left"?"left the room":`removed (${X})`;d(`${q} ${U}`,X==="client-left"?"info":"warn")}break}case"session:peer-status":{const{participantId:q,isOnline:X,updatedAt:U,lastSeenAt:Z}=T??{};if(!q)break;e(G=>{const oe=G.peers[q]??{id:q,color:Ci[Math.floor(Math.random()*Ci.length)],label:q,role:"client"};return{peers:{...G.peers,[q]:{...oe,isOnline:typeof X=="boolean"?X:oe.isOnline??!0,updatedAt:typeof U=="number"?U:oe.updatedAt??null,lastSeenAt:typeof Z=="number"?Z:oe.lastSeenAt??Date.now()}}}});break}case"session:location":{const{participantId:q,location:X}=T??{};if(!q||!X)return;const U=typeof(T==null?void 0:T.updatedAt)=="number"?T.updatedAt:Date.now();e(Z=>({peers:{...Z.peers,[q]:{...Z.peers[q]??{id:q,color:Ci[Math.floor(Math.random()*Ci.length)],label:q},location:X,updatedAt:U,lastSeenAt:U,isOnline:!0}}}));break}case"session:peer-routes":{const{participantId:q,routes:X}=T??{};if(!q)break;const U=Ny(X),Z=typeof(T==null?void 0:T.updatedAt)=="number"?T.updatedAt:Date.now();e(G=>({peers:{...G.peers,[q]:{...G.peers[q]??{id:q,color:Ci[Math.floor(Math.random()*Ci.length)],label:q},routes:U,updatedAt:Z,lastSeenAt:Z,isOnline:!0}}})),n().role==="host"&&d(`${C(q)} shared ${U.length} route(s)`,"info");break}case"session:interval":{const q=Number(T==null?void 0:T.intervalMs);Number.isFinite(q)&&(e({locationIntervalMs:q}),n().role==="client"&&d(`Host set updates to ${Math.round(q/1e3)}s`,"info"));break}case"session:host-status":{const q=!!(T!=null&&T.online);if(n().hostOnline===q)break;e(Z=>{const G=Z.hostPeerId;return G&&Z.peers[G]?{hostOnline:q,peers:{...Z.peers,[G]:{...Z.peers[G],isOnline:q}}}:{hostOnline:q}});const U=T!=null&&T.reason?` (${T.reason})`:"";n().role==="client"&&d(q?`HQ relay restored${U}`:`HQ relay unreachable${U}`,q?"success":"warn");break}case"session:message":{const{participantId:q,text:X}=T??{};X&&d(`${C(q??null)}: ${X}`,"message-received");break}case"session:state":b(T);break;case"session:ended":cc(),A(),d("Host ended the session.","error");break;case"session:error":d((T==null?void 0:T.message)??"Unknown server error","error"),u&&(u=!1,cc(),d("Previous room unavailable. Starting a new session","warn"),W({role:"host"}));break}},W=({role:B,sessionCode:k,isReconnect:T=!1,resumeSessionId:H,resumeToken:q,participantId:X,participantResumeToken:U})=>{if(w(),f(),B==="client"&&!k){d("Session code required.","error");return}B==="host"&&(H&&q?u=!0:u=!1);const Z=n(),G=typeof X=="string"&&X.trim().length>0?X.trim():B==="client"&&Z.participantId?Z.participantId:"",oe=typeof U=="string"&&U.trim().length>0?U.trim():B==="client"&&Z.resumeToken?Z.resumeToken:"",re=new WebSocket(gy);e(de=>({socket:re,connectionStatus:T?"reconnecting":"connecting",role:B,pendingCode:B==="client"?k:de.pendingCode,shouldReconnect:B==="client"||B==="host"})),re.onopen=()=>{const de=R(B,k,{resumeSessionId:H,resumeToken:q,participantId:G,participantResumeToken:oe});re.send(JSON.stringify(de))},re.onmessage=de=>{try{const ee=JSON.parse(de.data);V(ee)}catch{d("Malformed message from server","error")}},re.onerror=()=>{d("Socket error","error")},re.onclose=()=>{n().shouldReconnect?z():A()}},se=B=>{const k=n().socket;return!k||k.readyState!==WebSocket.OPEN?!1:(k.send(JSON.stringify(B)),!0)};return{...m1,logs:[],startHostSession:()=>{const B=n();if(B.connectionStatus==="connecting"||B.connectionStatus==="reconnecting")return;const k=xy();k!=null&&k.sessionId&&(k!=null&&k.resumeToken)?(u=!0,W({role:"host",resumeSessionId:k.sessionId,resumeToken:k.resumeToken})):W({role:"host"})},joinSession:B=>{const k=(B||"").trim().toUpperCase();if(!k){d("Enter a code to connect.","warn");return}W({role:"client",sessionCode:k})},disconnect:()=>{n().role==="host"?(se({type:"host:shutdown"}),cc()):n().role==="client"&&se({type:"participant:leave"}),e({shouldReconnect:!1}),w(),A(),d("Link closed locally.","info")},sendMessage:B=>{const k=(B||"").trim();k&&se({type:"participant:message",payload:{text:k}})},sendLocation:B=>{!B||n().role!=="client"||se({type:"participant:location",payload:{location:B}})},shareRoutes:B=>{if(!(n().role!=="host"||!B))try{const k={routes:B,generatedAt:Date.now(),hostPeerId:n().participantId||"HOST-LINK"},T=g1.compressToEncodedURIComponent(JSON.stringify(k));se({type:"host:state",payload:{data:T}})}catch{d("Failed to upload route snapshot","error")}},sendClientRoutes:B=>{if(n().role!=="client"||!B)return;se({type:"client:routes",payload:{routes:B}})&&d("Shared route snapshot with HQ","info")},clearLogs:()=>e({logs:[]}),updateLocationInterval:B=>{if(n().role!=="host")return;const k=Number(B);if(!Number.isFinite(k))return;const H=Math.min(Cy,Math.max(_y,Math.round(k)))*1e3;e({locationIntervalMs:H}),se({type:"host:interval",payload:{intervalMs:H}})}}}),Oy=({onScan:e,onClose:n})=>{const s=K.useRef(null),[u,d]=K.useState(""),f=K.useCallback(async()=>{if(s.current)try{await s.current.stop()}catch{}finally{try{await s.current.clear()}catch{}s.current=null}},[]);K.useEffect(()=>{let A=!0;return(async()=>{try{const v=await f1.getCameras();if(!A)return;const S=v.find(V=>/back|rear|environment/i.test(V.label||""))??v[0],b=S?{deviceId:{exact:S.id}}:{facingMode:"environment"},R=Math.min(window.innerWidth,320),z=new f1("qr-reader",{verbose:!1});s.current=z,await z.start(b,{fps:10,qrbox:{width:R,height:R}},async V=>{await f(),e(V)},()=>{})}catch(v){if(!A)return;d((v==null?void 0:v.message)??"Camera unavailable")}})(),()=>{A=!1,f()}},[e,f]);const w=typeof document<"u"?document.body:null;return w?Op.createPortal(I.jsxs("div",{className:"fixed inset-0 z-[2000] bg-black/90 flex flex-col items-center justify-center p-4",children:[I.jsxs("div",{className:"w-full max-w-sm rounded-2xl border border-slate-700 bg-slate-900/70 p-3 text-center text-sm text-slate-300",children:[I.jsx("div",{id:"qr-reader",className:"aspect-square w-full overflow-hidden rounded-xl bg-slate-950"}),u&&I.jsx("p",{className:"mt-3 text-xs text-rose-300",children:u})]}),I.jsx("button",{onClick:async()=>{await f(),n()},className:"mt-4 w-full max-w-sm rounded-full bg-slate-700 py-2 text-white hover:bg-slate-600",children:"Close Camera"})]}),w):null},Ry=()=>{const{connectionStatus:e,sessionId:n,startHostSession:s,joinSession:u,logs:d,sendMessage:f,disconnect:w,peers:A,clearLogs:C,role:v,locationIntervalMs:S,updateLocationInterval:b,hostOnline:R,participantId:z}=qi(),[V,W]=K.useState(""),[se,B]=K.useState(""),[k,T]=K.useState("receiver"),[H,q]=K.useState(!1),[X,U]=K.useState(()=>Math.round((S??1e4)/1e3)),[Z,G]=K.useState(Date.now()),oe=K.useRef(null);K.useEffect(()=>{var Ce;(Ce=oe.current)==null||Ce.scrollIntoView({behavior:"smooth"})},[d]),K.useEffect(()=>{v==="client"?T("sender"):v==="host"&&T("receiver")},[v]),K.useEffect(()=>{U(Math.round((S??1e4)/1e3))},[S]),K.useEffect(()=>{const Ce=setInterval(()=>G(Date.now()),1e3);return()=>clearInterval(Ce)},[]);const re=()=>{n&&(navigator.clipboard.writeText(n),alert("ID copied to clipboard!"))},de=()=>{s()},ee=()=>{V&&u(V)},le=K.useCallback(Ce=>{W(Ce),q(!1),u(Ce)},[u]),Q=Ce=>{Ce.preventDefault(),se&&(f(se),B(""))},_e=Object.values(A??{}),fe=_e.filter(Ce=>Ce.id!==z),te=[...fe].sort((Ce,ye)=>(ye.updatedAt??0)-(Ce.updatedAt??0)),pe=[..._e].sort((Ce,ye)=>(ye.updatedAt??0)-(Ce.updatedAt??0)),ae=fe.filter(Ce=>Ce.isOnline!==!1).length,Ae=Ce=>{if(!(Ce!=null&&Ce.updatedAt))return"No updates yet";const ye=Math.max(0,Math.floor((Z-Ce.updatedAt)/1e3));if(ye<60)return`Last updated ${ye}s ago`;const Re=Math.floor(ye/60),ge=ye%60;if(Re<60)return`Last updated ${Re}m${ge?` ${ge}s`:""} ago`;const dt=Math.floor(Re/60),He=Re%60;return`Last updated ${dt}h${He?` ${He}m`:""} ago`},Ne=e==="connected"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/50":e==="connecting"?"bg-amber-500/20 text-amber-400 border border-amber-500/50":e==="reconnecting"?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-slate-800 text-slate-400 border border-slate-700";return I.jsxs("div",{className:"p-4 bg-slate-900 text-slate-100 rounded-lg shadow-md max-w-md mx-auto mt-4 border border-slate-800",children:[I.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-100",children:"Server Connection Manager"}),I.jsxs("div",{className:"mb-4 flex flex-col gap-2",children:[I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsxs("span",{className:`px-2 py-1 rounded text-sm font-semibold ${Ne}`,children:["Status: ",e]}),e==="connected"&&I.jsxs("span",{className:"text-xs text-slate-400",children:["(",ae," active)"]})]}),I.jsx("div",{className:"flex items-center gap-2",children:e!=="disconnected"&&I.jsx("button",{onClick:w,className:"text-sm text-rose-400 hover:text-rose-300 underline",children:"Disconnect"})})]}),!R&&v==="client"&&e==="connected"&&I.jsx("div",{className:"rounded border border-amber-500/40 bg-amber-500/10 px-3 py-2 text-xs text-amber-100",children:"HQ link is offline. Your updates stay queued until the host reconnects."}),te.length>0&&(v==="host"?I.jsx("div",{className:"mt-2 space-y-2",children:te.map(Ce=>I.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-3",children:I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Ce.color||"#ccc"}}),I.jsxs("div",{children:[I.jsx("p",{className:"text-sm font-semibold text-slate-100",title:Ce.id,children:Ce.label??Ce.id}),I.jsx("p",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:Ce.isOnline===!1?"Offline":"Online"})]})]}),I.jsx("p",{className:"text-xs text-slate-400",children:Ae(Ce)})]})},Ce.id))}):I.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:pe.map(Ce=>I.jsxs("div",{className:`flex items-center gap-1 bg-slate-800 px-2 py-1 rounded border text-xs ${Ce.isOnline===!1?"border-slate-800 text-slate-500 opacity-60":"border-slate-700 text-slate-300"}`,title:Ae(Ce),children:[I.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Ce.color||"#ccc"}}),I.jsx("span",{className:"text-slate-300",title:Ce.id,children:Ce.label??Ce.id.substring(0,6)})]},Ce.id))}))]}),I.jsxs("div",{className:"flex space-x-4 mb-6 border-b border-slate-700 pb-2",children:[I.jsx("button",{className:`pb-2 transition-colors ${k==="receiver"?"border-b-2 border-sky-500 font-bold text-sky-400":"text-slate-400 hover:text-slate-200"}`,onClick:()=>T("receiver"),children:"Receiver (Host)"}),I.jsx("button",{className:`pb-2 transition-colors ${k==="sender"?"border-b-2 border-sky-500 font-bold text-sky-400":"text-slate-400 hover:text-slate-200"}`,onClick:()=>T("sender"),children:"Sender (Field)"})]}),k==="receiver"&&I.jsxs("div",{children:[I.jsx("button",{onClick:de,className:"w-full bg-sky-600 text-white py-2 rounded hover:bg-sky-500 transition font-semibold mb-4",disabled:e!=="disconnected",children:e==="disconnected"?"Create Room":"Room Active"}),e==="connecting"&&!n&&I.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-500"}),I.jsx("p",{className:"text-slate-400 text-sm",children:"Initializing Session..."})]}),n&&I.jsxs("div",{className:"mt-4 space-y-4 animate-in fade-in slide-in-from-top-4 duration-300",children:[I.jsxs("div",{className:"bg-amber-500/10 p-3 rounded border border-amber-500/30 text-sm text-amber-200",children:["Share this ",I.jsx("strong",{children:"Room Code"})," with field devices"]}),I.jsx("div",{className:"flex justify-center bg-white p-4 rounded-lg",children:I.jsx(lg,{value:n,size:192})}),I.jsxs("div",{className:"flex gap-2",children:[I.jsx("input",{readOnly:!0,value:n,className:"flex-1 p-2 text-center text-lg font-bold tracking-widest border border-slate-700 rounded bg-slate-950 text-sky-400 font-mono focus:outline-none"}),I.jsx("button",{onClick:re,className:"px-4 border border-slate-600 rounded hover:bg-slate-800 text-slate-300 transition",children:"Copy"})]}),I.jsxs("div",{className:"mt-4 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[I.jsxs("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-wide text-slate-400",children:[I.jsx("span",{children:"Field update cadence"}),I.jsxs("span",{className:"font-semibold text-slate-200",children:[X,"s"]})]}),I.jsx("input",{type:"range",min:"5",max:"120",step:"5",value:X,onChange:Ce=>{const ye=Number(Ce.target.value);U(ye),b(ye)},className:"mt-3 w-full accent-sky-500",disabled:v!=="host"}),I.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Senders only transmit location/routes upstream. HQ receives every ",X," seconds (5120s)."]})]})]})]}),k==="sender"&&I.jsxs("div",{children:[e==="disconnected"&&I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"bg-amber-500/10 p-3 rounded border border-amber-500/30 text-sm text-amber-200",children:["Enter the ",I.jsx("strong",{children:"Room Code"})," from HQ"]}),I.jsxs("div",{className:"flex gap-2",children:[I.jsx("input",{placeholder:"Enter Code",value:V,onChange:Ce=>W(Ce.target.value.toUpperCase()),className:"flex-1 p-2 text-lg font-mono border border-slate-700 rounded bg-slate-950 text-slate-100 focus:border-sky-500 focus:outline-none"}),I.jsx("button",{onClick:()=>q(!0),className:"px-3 bg-slate-700 text-white rounded hover:bg-slate-600 transition",title:"Scan QR Code",children:""})]}),I.jsx("button",{onClick:ee,className:"w-full bg-emerald-600 text-white py-2 rounded hover:bg-emerald-500 transition font-semibold disabled:opacity-50 disabled:cursor-not-allowed",disabled:!V,children:"Join Room"})]}),e==="connecting"&&I.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-500"}),I.jsx("p",{className:"text-slate-400 text-sm",children:"Connecting to host..."})]}),e==="reconnecting"&&I.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[I.jsx("div",{className:"animate-pulse rounded-full h-8 w-8 border-b-2 border-orange-400"}),I.jsx("p",{className:"text-slate-400 text-sm",children:"Trying to relink..."})]})]}),H&&I.jsx(Oy,{onScan:le,onClose:()=>q(!1)}),e==="connected"&&I.jsx("div",{className:"mt-4",children:I.jsxs("form",{onSubmit:Q,className:"flex gap-2",children:[I.jsx("input",{type:"text",value:se,onChange:Ce=>B(Ce.target.value),placeholder:"Type a message...",className:"flex-1 border border-slate-700 bg-slate-950 text-slate-100 rounded px-2 py-1 focus:border-sky-500 focus:outline-none"}),I.jsx("button",{type:"submit",className:"bg-sky-600 text-white px-4 py-1 rounded hover:bg-sky-500 transition",children:"Send"})]})}),I.jsxs("div",{className:"mt-6 border-t border-slate-700 pt-2",children:[I.jsxs("div",{className:"flex items-center justify-between mb-1",children:[I.jsx("h3",{className:"text-xs font-bold text-slate-500",children:"Connection Logs"}),I.jsx("button",{onClick:C,className:"text-[10px] text-slate-500 hover:text-slate-300 underline",children:"Clear"})]}),I.jsxs("div",{className:"h-32 overflow-y-auto bg-slate-950 p-2 text-xs font-mono rounded border border-slate-800",children:[d.length===0&&I.jsx("span",{className:"text-slate-600",children:"No logs yet..."}),d.map((Ce,ye)=>{const Re=Ce.type==="message-received"||Ce.type==="message-sent",ge=Ce.type==="message-received"?"text-sky-400":Ce.type==="message-sent"?"text-emerald-400":Ce.type==="error"?"text-rose-400":"text-slate-400";return I.jsxs("div",{className:`${ge} ${Re?"font-bold":""}`,children:[I.jsxs("span",{className:"opacity-50 mr-2",children:["[",Ce.time,"]"]}),Ce.message]},ye)}),I.jsx("div",{ref:oe})]})]})]})},ky=()=>{const{checkpoints:e,checkpointMap:n,routes:s,activeRouteId:u,selectedId:d,selectCheckpoint:f,addCheckpoint:w}=Oo(),[A,C]=K.useState(null);K.useEffect(()=>{!A&&u&&C(u)},[u,A]);const v=K.useMemo(()=>{const me=A||u,Me=s.find(Pt=>Pt.id===me);return Me?Me.items.map((Pt,Xn)=>{const At=n[Pt];return At?{id:At.id,label:At.name||`Point ${Xn+1}`,position:At.position}:null}).filter(Boolean):[]},[A,u,s,n]),S=K.useMemo(()=>v.find(me=>me.id===d)??null,[v,d]),b=(S==null?void 0:S.position)??null,{heading:R,bearing:z,distance:V,geolocation:W,error:se,needsPermission:B,isSupported:k,locationEnabled:T,hasLocationFix:H,isRequestingLocation:q,requestPermission:X,startGeolocation:U}=yw(b),Z=qi(me=>me.sendLocation),G=qi(me=>me.shareRoutes),oe=qi(me=>me.sendClientRoutes),re=qi(me=>me.connectionStatus),de=qi(me=>me.peers),ee=qi(me=>me.role),le=qi(me=>me.locationIntervalMs??1e4),Q=K.useRef(0),_e=K.useRef(""),fe=K.useRef(!1),te=K.useMemo(()=>s.map(me=>({...me,items:me.items.map(Me=>n[Me]).filter(Boolean)})),[s,n]);K.useEffect(()=>{if(re!=="connected"||!W||ee!=="client")return;const me=Date.now(),Me=Math.max(5e3,Number(le)||1e4);me-Q.current<Me||(Z(W),Q.current=me)},[W,re,Z,ee,le]),K.useEffect(()=>{if(re!=="connected"){_e.current="";return}const me=JSON.stringify(te);me!==_e.current&&(ee==="host"?G(te):ee==="client"&&oe(te),_e.current=me)},[re,te,ee,G,oe]);const pe=K.useMemo(()=>v.filter(me=>me.id!==d).map(me=>{if(!W)return{...me,bearing:null,distance:null,relativeBearing:null};const Me=Yp(W,me.position),Pt=Qp(R,Me);return{...me,bearing:Me,distance:Kp(W,me.position),relativeBearing:Pt??Me}}),[W,v,d,R]),[ae,Ae]=K.useState(null),[Ne,Ce]=K.useState(!1),[ye,Re]=K.useState(!1),[ge,dt]=K.useState(0),[He,Zn]=K.useState("degrees"),[Ln,Mt]=K.useState("topo"),[vt,Xe]=K.useState("light"),[xn,Zt]=K.useState(.58),[Dn,Be]=K.useState(null),[Ve,Ge]=K.useState(!1),Gt=K.useRef(null);K.useRef(!1);const Oe=K.useRef(null),[kt,ui]=K.useState(!1),nn=.32,Rr=.85,bt=K.useCallback(me=>Math.min(Math.max(me,nn),Rr),[Rr,nn]),pr=K.useCallback(()=>{const me=U();return me&&dt(Me=>Me+1),me},[U]),Gn=K.useCallback(()=>{Zn(me=>me==="degrees"?"mils":"degrees")},[]),rn=K.useCallback(()=>{Ce(me=>{const Me=!me;return Me&&(Ae(null),Re(!1)),Me})},[]),Xr=K.useCallback(()=>{Re(me=>{const Me=!me;return Me&&(Ae(null),Ce(!1)),Me})},[]),qt=K.useCallback(me=>{Ae(Me=>Me===me?null:me),Ce(!1),Re(!1),Zt(Me=>bt(Me))},[bt]),gr=K.useCallback(()=>{qt("compass")},[qt]),Ct=K.useCallback(()=>{qt("checkpoints")},[qt]),Se=K.useCallback(me=>{const Me=Gt.current;if(!Me)return;const{startY:Pt,startHeight:Xn}=Me;if(window.innerHeight===0)return;const At=(Pt-me.clientY)/window.innerHeight,fn=Math.abs(Pt-me.clientY);!Me.moved&&fn>6&&(Me.moved=!0),Zt(bt(Xn+At))},[bt]),wt=K.useCallback(()=>{var Me,Pt;const me=Gt.current;me!=null&&me.target&&me.pointerId!=null&&((Pt=(Me=me.target).releasePointerCapture)==null||Pt.call(Me,me.pointerId)),Gt.current=null,window.removeEventListener("pointermove",Se),window.removeEventListener("pointerup",wt),me&&!me.moved&&me.overlayId&&Ae(Xn=>Xn===me.overlayId?null:Xn)},[Se,Ae]),Qe=K.useCallback(me=>{var At,fn;if(window.innerHeight===0)return;me.preventDefault();const Me=me.pointerId,Pt=me.clientY,Xn=me.currentTarget.dataset.overlayId??null;Gt.current={startY:Pt,startHeight:xn,pointerId:Me,target:me.currentTarget,overlayId:Xn,moved:!1},(fn=(At=me.currentTarget).setPointerCapture)==null||fn.call(At,Me),window.addEventListener("pointermove",Se,{passive:!0}),window.addEventListener("pointerup",wt,{passive:!0})},[xn,Se,wt]);K.useEffect(()=>()=>{window.removeEventListener("pointermove",Se),window.removeEventListener("pointerup",wt)},[Se,wt]);const Ye=K.useMemo(()=>({"--overlay-height":`${(bt(xn)*100).toFixed(2)}vh`,"--overlay-max-height":`${(Rr*100).toFixed(2)}vh`}),[Rr,bt,xn]);K.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;window.matchMedia("(prefers-color-scheme: dark)").matches&&(Mt(Me=>Me==="street"?"dark":Me),Xe("dark"))},[]),K.useEffect(()=>{fe.current||(fe.current=!0,pr())},[pr]),K.useEffect(()=>{Oe.current=W},[W]);const sn=K.useCallback(()=>{Xe(me=>me==="light"?"dark":"light")},[]),Sn=K.useCallback((me,Me)=>{w(Me)},[w]);return K.useEffect(()=>{Be(null)},[e]),I.jsxs("div",{className:"relative viewport-safe bg-slate-950 text-slate-100",children:[I.jsx(vw,{userLocation:W,peers:de,userHeading:R,targets:pe,onEnableLocation:pr,locationEnabled:T,hasLocationFix:H,isRequestingLocation:q,locationRequestToken:ge,baseLayer:Ln,onBaseLayerChange:Mt,onToggleMenu:rn,onOpenCompass:gr,onOpenRoute:Ct,toolbarTheme:vt,onToolbarThemeToggle:sn,isMenuOpen:Ne,isSettingsOpen:ye,onToggleSettings:Xr,previewLocation:Dn,onDropItem:Sn,hideToolbar:kt}),!kt&&ae==="compass"&&I.jsxs("div",{className:"pointer-events-auto overlay-sheet fixed inset-x-0 bottom-0 z-[1300] mx-auto w-full max-w-md overflow-y-auto overscroll-contain rounded-t-3xl border border-slate-800 bg-slate-900 p-3 shadow-2xl shadow-slate-950/80 md:bottom-6 md:left-auto md:right-6 md:max-w-sm md:rounded-2xl",style:Ye,children:[I.jsx("div",{className:"mb-3 flex justify-center",children:I.jsx("button",{type:"button","data-overlay-id":"compass",className:"group flex h-12 w-full max-w-[220px] cursor-row-resize items-center justify-center rounded-full bg-slate-900 shadow-inner shadow-slate-950/40 ring-1 ring-slate-700/60 transition hover:ring-slate-500/80 active:bg-slate-800 touch-none","aria-label":"Drag to resize or tap to close panel",onPointerDown:Qe,children:I.jsx("span",{className:"block h-2 w-16 rounded-full bg-slate-500 transition group-active:bg-slate-300"})})}),I.jsxs("div",{className:"mb-2 text-left text-[11px]",children:[I.jsx("p",{className:"font-semibold uppercase tracking-wide text-slate-500",children:"Compass"}),I.jsx("p",{className:"text-xs text-slate-400",children:"Heading & bearings"})]}),I.jsx(Cw,{heading:R,bearing:z,distance:V,error:se,enableCompass:X,onEnableLocation:pr,needsPermission:B,isSupported:k,locationEnabled:T,hasLocationFix:H,isRequestingLocation:q,targets:pe,selectedTarget:S,onSelectTarget:f,bearingUnit:He,onToggleBearingUnit:Gn,routes:s,activeRouteId:A,onSelectRoute:C})]}),!kt&&ae==="checkpoints"&&I.jsxs("div",{className:"pointer-events-auto overlay-sheet fixed inset-x-0 bottom-0 z-[1300] mx-auto w-full max-w-md overflow-y-auto overscroll-contain rounded-t-3xl border border-slate-800 bg-slate-900 p-3 shadow-2xl shadow-slate-950/80 md:left-6 md:right-auto md:top-6 md:max-w-xs md:rounded-2xl md:rounded-bl-none md:rounded-br-xl",style:Ye,children:[I.jsx("div",{className:"mb-3 flex justify-center",children:I.jsx("button",{type:"button","data-overlay-id":"checkpoints",className:"group flex h-12 w-full max-w-[220px] cursor-row-resize items-center justify-center rounded-full bg-slate-900 shadow-inner shadow-slate-950/40 ring-1 ring-slate-700/60 transition hover:ring-slate-500/80 active:bg-slate-800 touch-none","aria-label":"Drag to resize or tap to close panel",onPointerDown:Qe,children:I.jsx("span",{className:"block h-2 w-16 rounded-full bg-slate-500 transition group-active:bg-slate-300"})})}),I.jsxs("div",{className:"mb-2 text-left text-[11px]",children:[I.jsx("p",{className:"font-semibold uppercase tracking-wide text-slate-500",children:"Route tools"}),I.jsx("p",{className:"text-xs text-slate-400",children:"Manage checkpoints"})]}),I.jsx(Aw,{onEnterPlacingMode:()=>ui(!0)})]}),!kt&&ae==="grid"&&I.jsxs("div",{className:"pointer-events-auto overlay-sheet fixed inset-x-0 bottom-0 z-[1300] mx-auto w-full max-w-md overflow-y-auto overscroll-contain rounded-t-3xl border border-slate-800 bg-slate-900 p-3 shadow-2xl shadow-slate-950/80 md:left-auto md:right-6 md:top-6 md:max-w-md md:rounded-2xl",style:Ye,children:[I.jsx("div",{className:"mb-3 flex justify-center",children:I.jsx("button",{type:"button","data-overlay-id":"grid",className:"group flex h-12 w-full max-w-[220px] cursor-row-resize items-center justify-center rounded-full bg-slate-900 shadow-inner shadow-slate-950/40 ring-1 ring-slate-700/60 transition hover:ring-slate-500/80 active:bg-slate-800 touch-none","aria-label":"Drag to resize or tap to close panel",onPointerDown:Qe,children:I.jsx("span",{className:"block h-2 w-16 rounded-full bg-slate-500 transition group-active:bg-slate-300"})})}),I.jsxs("div",{className:"mb-2 text-left text-[11px]",children:[I.jsx("p",{className:"font-semibold uppercase tracking-wide text-slate-500",children:"Grid tools"}),I.jsx("p",{className:"text-xs text-slate-400",children:"References & bearings"})]}),I.jsx(kw,{userLocation:W,selectedPosition:b,onPreviewLocationChange:Be})]}),!kt&&ae==="p2p"&&I.jsxs("div",{className:"pointer-events-auto overlay-sheet fixed inset-x-0 bottom-0 z-[1300] mx-auto w-full max-w-md overflow-y-auto overscroll-contain rounded-t-3xl border border-slate-800 bg-slate-900 p-3 shadow-2xl shadow-slate-950/80 md:left-auto md:right-6 md:top-6 md:max-w-md md:rounded-2xl",style:Ye,children:[I.jsx("div",{className:"mb-3 flex justify-center",children:I.jsx("button",{type:"button","data-overlay-id":"p2p",className:"group flex h-12 w-full max-w-[220px] cursor-row-resize items-center justify-center rounded-full bg-slate-900 shadow-inner shadow-slate-950/40 ring-1 ring-slate-700/60 transition hover:ring-slate-500/80 active:bg-slate-800 touch-none","aria-label":"Drag to resize or tap to close panel",onPointerDown:Qe,children:I.jsx("span",{className:"block h-2 w-16 rounded-full bg-slate-500 transition group-active:bg-slate-300"})})}),I.jsxs("div",{className:"mb-2 text-left text-[11px]",children:[I.jsx("p",{className:"font-semibold uppercase tracking-wide text-slate-500",children:"P2P Connection"}),I.jsx("p",{className:"text-xs text-slate-400",children:"Share location & routes"})]}),I.jsx(Ry,{})]}),!kt&&Ne&&I.jsx("div",{className:"pointer-events-auto absolute inset-x-0 bottom-28 z-[1300] flex justify-center px-4 md:bottom-32",children:I.jsxs("div",{className:"w-full max-w-xs rounded-2xl border border-slate-800 bg-slate-950 p-3 text-[12px] text-slate-100 shadow-xl shadow-slate-950/80",children:[I.jsx("p",{className:"mb-2 text-[11px] font-semibold uppercase tracking-wide text-slate-400",children:"Navigate"}),I.jsxs("div",{className:"flex flex-col gap-2",children:[I.jsxs("button",{type:"button",className:`flex items-center justify-between rounded-lg border px-3 py-2 font-semibold transition ${ae==="compass"?"border-sky-500 bg-sky-500 text-slate-950":"border-slate-700 bg-slate-900 hover:border-sky-500 hover:text-sky-100"}`,onClick:()=>qt("compass"),children:["Compass",I.jsx("span",{className:`text-[10px] ${ae==="compass"?"text-slate-800":"text-slate-400"}`,children:"Heading"})]}),I.jsxs("button",{type:"button",className:`flex items-center justify-between rounded-lg border px-3 py-2 font-semibold transition ${ae==="checkpoints"?"border-sky-500 bg-sky-500 text-slate-950":"border-slate-700 bg-slate-900 hover:border-sky-500 hover:text-sky-100"}`,onClick:()=>qt("checkpoints"),children:["Route",I.jsx("span",{className:`text-[10px] ${ae==="checkpoints"?"text-slate-800":"text-slate-400"}`,children:"Checkpoints"})]}),I.jsxs("button",{type:"button",className:`flex items-center justify-between rounded-lg border px-3 py-2 font-semibold transition ${ae==="grid"?"border-sky-500 bg-sky-500 text-slate-950":"border-slate-700 bg-slate-900 hover:border-sky-500 hover:text-sky-100"}`,onClick:()=>qt("grid"),children:["Grid",I.jsx("span",{className:`text-[10px] ${ae==="grid"?"text-slate-800":"text-slate-400"}`,children:"Conversions"})]}),I.jsxs("button",{type:"button",className:`flex items-center justify-between rounded-lg border px-3 py-2 font-semibold transition ${ae==="p2p"?"border-sky-500 bg-sky-500 text-slate-950":"border-slate-700 bg-slate-900 hover:border-sky-500 hover:text-sky-100"}`,onClick:()=>qt("p2p"),children:["P2P Share",I.jsx("span",{className:`text-[10px] ${ae==="p2p"?"text-slate-800":"text-slate-400"}`,children:"Connect"})]})]}),I.jsx("p",{className:"mt-3 text-[11px] text-slate-400",children:"Choose a tool to open its overlay. Tap Menu again to close this panel."})]})}),kt&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"absolute inset-x-0 bottom-8 z-[1400] flex justify-center pointer-events-none",children:I.jsx(Pw,{})}),I.jsxs("div",{className:"absolute top-4 right-4 z-[1400] flex gap-3",children:[I.jsx("button",{type:"button",className:"flex h-10 w-10 items-center justify-center rounded-full border border-slate-600 bg-slate-900 text-slate-200 shadow-lg transition hover:bg-slate-800",title:"Help",onClick:()=>Ge(!0),children:"?"}),I.jsx("button",{onClick:()=>ui(!1),className:"flex h-10 w-10 items-center justify-center rounded-full border border-red-500/50 bg-red-900/40 text-red-200 shadow-lg backdrop-blur-sm transition hover:bg-red-900/60",title:"Exit Placing Mode",children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"h-6 w-6",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),Ve&&I.jsx("div",{className:"fixed inset-0 z-[1500] flex items-center justify-center bg-slate-950/60 p-4 backdrop-blur-sm",children:I.jsxs("div",{className:"w-full max-w-sm rounded-2xl border border-slate-700 bg-slate-900 p-6 shadow-2xl",children:[I.jsx("h3",{className:"mb-2 text-lg font-bold text-slate-100",children:"How placement works"}),I.jsxs("ul",{className:"mb-6 list-disc space-y-2 pl-5 text-sm text-slate-300",children:[I.jsxs("li",{children:[I.jsx("strong",{children:"Drag & drop:"})," The single puck in the bottom toolbar matches your active route colour. Drag it onto the map to add a checkpoint to that route at the drop point."]}),I.jsxs("li",{children:[I.jsx("strong",{children:"Control the order:"})," In the Route panel, tap ",I.jsx("em",{children:"Insert Before"})," or ",I.jsx("em",{children:"Insert After"}),". The next checkpoint you drop will slot into that position; otherwise its appended to the end."]}),I.jsxs("li",{children:[I.jsx("strong",{children:"Grid & projections:"})," Use the Grid Tools to resolve or project a coordinate. Drop the puck onto the magenta preview marker to capture that exact location."]}),I.jsxs("li",{children:[I.jsx("strong",{children:"Edit or move:"})," Drag any existing checkpoint marker to fine-tune its location, or use the accordion controls to rename, recolour, or delete it."]}),I.jsxs("li",{children:[I.jsx("strong",{children:"Exit placement:"})," Tap the red X button in the top-right corner when youre done."]})]}),I.jsx("button",{onClick:()=>Ge(!1),className:"w-full rounded-lg bg-sky-600 py-2.5 text-sm font-semibold text-white transition hover:bg-sky-500",children:"Got it"})]})})]})},My=()=>I.jsx(ky,{});J2.polyfill({dragImageTranslateOverride:ev.scrollBehaviourDragImageTranslateOverride});window.addEventListener("touchmove",()=>{},{passive:!1});hc.createRoot(document.getElementById("root")).render(I.jsx(Vt.StrictMode,{children:I.jsx(My,{})}));
