function Eg(e,n){for(var s=0;s<n.length;s++){const l=n[s];if(typeof l!="string"&&!Array.isArray(l)){for(const f in l)if(f!=="default"&&!(f in e)){const d=Object.getOwnPropertyDescriptor(l,f);d&&Object.defineProperty(e,f,d.get?d:{enumerable:!0,get:()=>l[f]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))l(f);new MutationObserver(f=>{for(const d of f)if(d.type==="childList")for(const w of d.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&l(w)}).observe(document,{childList:!0,subtree:!0});function s(f){const d={};return f.integrity&&(d.integrity=f.integrity),f.referrerPolicy&&(d.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?d.credentials="include":f.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(f){if(f.ep)return;f.ep=!0;const d=s(f);fetch(f.href,d)}})();var ru=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function iu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var d1={exports:{}},su={},p1={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=Symbol.for("react.element"),Ag=Symbol.for("react.portal"),xg=Symbol.for("react.fragment"),Sg=Symbol.for("react.strict_mode"),Ig=Symbol.for("react.profiler"),bg=Symbol.for("react.provider"),Tg=Symbol.for("react.context"),Ng=Symbol.for("react.forward_ref"),Og=Symbol.for("react.suspense"),Rg=Symbol.for("react.memo"),kg=Symbol.for("react.lazy"),Nf=Symbol.iterator;function Mg(e){return e===null||typeof e!="object"?null:(e=Nf&&e[Nf]||e["@@iterator"],typeof e=="function"?e:null)}var g1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m1=Object.assign,v1={};function So(e,n,s){this.props=e,this.context=n,this.refs=v1,this.updater=s||g1}So.prototype.isReactComponent={};So.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};So.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function w1(){}w1.prototype=So.prototype;function fh(e,n,s){this.props=e,this.context=n,this.refs=v1,this.updater=s||g1}var dh=fh.prototype=new w1;dh.constructor=fh;m1(dh,So.prototype);dh.isPureReactComponent=!0;var Of=Array.isArray,y1=Object.prototype.hasOwnProperty,ph={current:null},_1={key:!0,ref:!0,__self:!0,__source:!0};function C1(e,n,s){var l,f={},d=null,w=null;if(n!=null)for(l in n.ref!==void 0&&(w=n.ref),n.key!==void 0&&(d=""+n.key),n)y1.call(n,l)&&!_1.hasOwnProperty(l)&&(f[l]=n[l]);var x=arguments.length-2;if(x===1)f.children=s;else if(1<x){for(var C=Array(x),v=0;v<x;v++)C[v]=arguments[v+2];f.children=C}if(e&&e.defaultProps)for(l in x=e.defaultProps,x)f[l]===void 0&&(f[l]=x[l]);return{$$typeof:Ma,type:e,key:d,ref:w,props:f,_owner:ph.current}}function Pg(e,n){return{$$typeof:Ma,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function gh(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ma}function Lg(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return n[s]})}var Rf=/\/+/g;function Mu(e,n){return typeof e=="object"&&e!==null&&e.key!=null?Lg(""+e.key):n.toString(36)}function pl(e,n,s,l,f){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var w=!1;if(e===null)w=!0;else switch(d){case"string":case"number":w=!0;break;case"object":switch(e.$$typeof){case Ma:case Ag:w=!0}}if(w)return w=e,f=f(w),e=l===""?"."+Mu(w,0):l,Of(f)?(s="",e!=null&&(s=e.replace(Rf,"$&/")+"/"),pl(f,n,s,"",function(v){return v})):f!=null&&(gh(f)&&(f=Pg(f,s+(!f.key||w&&w.key===f.key?"":(""+f.key).replace(Rf,"$&/")+"/")+e)),n.push(f)),1;if(w=0,l=l===""?".":l+":",Of(e))for(var x=0;x<e.length;x++){d=e[x];var C=l+Mu(d,x);w+=pl(d,n,s,C,f)}else if(C=Mg(e),typeof C=="function")for(e=C.call(e),x=0;!(d=e.next()).done;)d=d.value,C=l+Mu(d,x++),w+=pl(d,n,s,C,f);else if(d==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return w}function Ka(e,n,s){if(e==null)return e;var l=[],f=0;return pl(e,l,"","",function(d){return n.call(s,d,f++)}),l}function Dg(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var ir={current:null},gl={transition:null},Bg={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:gl,ReactCurrentOwner:ph};function E1(){throw Error("act(...) is not supported in production builds of React.")}ut.Children={map:Ka,forEach:function(e,n,s){Ka(e,function(){n.apply(this,arguments)},s)},count:function(e){var n=0;return Ka(e,function(){n++}),n},toArray:function(e){return Ka(e,function(n){return n})||[]},only:function(e){if(!gh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ut.Component=So;ut.Fragment=xg;ut.Profiler=Ig;ut.PureComponent=fh;ut.StrictMode=Sg;ut.Suspense=Og;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bg;ut.act=E1;ut.cloneElement=function(e,n,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=m1({},e.props),f=e.key,d=e.ref,w=e._owner;if(n!=null){if(n.ref!==void 0&&(d=n.ref,w=ph.current),n.key!==void 0&&(f=""+n.key),e.type&&e.type.defaultProps)var x=e.type.defaultProps;for(C in n)y1.call(n,C)&&!_1.hasOwnProperty(C)&&(l[C]=n[C]===void 0&&x!==void 0?x[C]:n[C])}var C=arguments.length-2;if(C===1)l.children=s;else if(1<C){x=Array(C);for(var v=0;v<C;v++)x[v]=arguments[v+2];l.children=x}return{$$typeof:Ma,type:e.type,key:f,ref:d,props:l,_owner:w}};ut.createContext=function(e){return e={$$typeof:Tg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bg,_context:e},e.Consumer=e};ut.createElement=C1;ut.createFactory=function(e){var n=C1.bind(null,e);return n.type=e,n};ut.createRef=function(){return{current:null}};ut.forwardRef=function(e){return{$$typeof:Ng,render:e}};ut.isValidElement=gh;ut.lazy=function(e){return{$$typeof:kg,_payload:{_status:-1,_result:e},_init:Dg}};ut.memo=function(e,n){return{$$typeof:Rg,type:e,compare:n===void 0?null:n}};ut.startTransition=function(e){var n=gl.transition;gl.transition={};try{e()}finally{gl.transition=n}};ut.unstable_act=E1;ut.useCallback=function(e,n){return ir.current.useCallback(e,n)};ut.useContext=function(e){return ir.current.useContext(e)};ut.useDebugValue=function(){};ut.useDeferredValue=function(e){return ir.current.useDeferredValue(e)};ut.useEffect=function(e,n){return ir.current.useEffect(e,n)};ut.useId=function(){return ir.current.useId()};ut.useImperativeHandle=function(e,n,s){return ir.current.useImperativeHandle(e,n,s)};ut.useInsertionEffect=function(e,n){return ir.current.useInsertionEffect(e,n)};ut.useLayoutEffect=function(e,n){return ir.current.useLayoutEffect(e,n)};ut.useMemo=function(e,n){return ir.current.useMemo(e,n)};ut.useReducer=function(e,n,s){return ir.current.useReducer(e,n,s)};ut.useRef=function(e){return ir.current.useRef(e)};ut.useState=function(e){return ir.current.useState(e)};ut.useSyncExternalStore=function(e,n,s){return ir.current.useSyncExternalStore(e,n,s)};ut.useTransition=function(){return ir.current.useTransition()};ut.version="18.3.1";p1.exports=ut;var K=p1.exports;const Ht=iu(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg=K,jg=Symbol.for("react.element"),zg=Symbol.for("react.fragment"),Ug=Object.prototype.hasOwnProperty,Hg=Fg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vg={key:!0,ref:!0,__self:!0,__source:!0};function A1(e,n,s){var l,f={},d=null,w=null;s!==void 0&&(d=""+s),n.key!==void 0&&(d=""+n.key),n.ref!==void 0&&(w=n.ref);for(l in n)Ug.call(n,l)&&!Vg.hasOwnProperty(l)&&(f[l]=n[l]);if(e&&e.defaultProps)for(l in n=e.defaultProps,n)f[l]===void 0&&(f[l]=n[l]);return{$$typeof:jg,type:e,key:d,ref:w,props:f,_owner:Hg.current}}su.Fragment=zg;su.jsx=A1;su.jsxs=A1;d1.exports=su;var b=d1.exports,lc={},x1={exports:{}},Or={},S1={exports:{}},I1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(te,pe){var ce=te.length;te.push(pe);e:for(;0<ce;){var Ee=ce-1>>>1,Ne=te[Ee];if(0<f(Ne,pe))te[Ee]=pe,te[ce]=Ne,ce=Ee;else break e}}function s(te){return te.length===0?null:te[0]}function l(te){if(te.length===0)return null;var pe=te[0],ce=te.pop();if(ce!==pe){te[0]=ce;e:for(var Ee=0,Ne=te.length,Ze=Ne>>>1;Ee<Ze;){var Ae=2*(Ee+1)-1,Me=te[Ae],ge=Ae+1,vt=te[ge];if(0>f(Me,ce))ge<Ne&&0>f(vt,Me)?(te[Ee]=vt,te[ge]=ce,Ee=ge):(te[Ee]=Me,te[Ae]=ce,Ee=Ae);else if(ge<Ne&&0>f(vt,ce))te[Ee]=vt,te[ge]=ce,Ee=ge;else break e}}return pe}function f(te,pe){var ce=te.sortIndex-pe.sortIndex;return ce!==0?ce:te.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var w=Date,x=w.now();e.unstable_now=function(){return w.now()-x}}var C=[],v=[],S=1,I=null,O=3,z=!1,H=!1,j=!1,ee=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(te){for(var pe=s(v);pe!==null;){if(pe.callback===null)l(v);else if(pe.startTime<=te)l(v),pe.sortIndex=pe.expirationTime,n(C,pe);else break;pe=s(v)}}function V(te){if(j=!1,P(te),!H)if(s(C)!==null)H=!0,ye(re);else{var pe=s(v);pe!==null&&de(V,pe.startTime-te)}}function re(te,pe){H=!1,j&&(j=!1,F(Z),Z=-1),z=!0;var ce=O;try{for(P(pe),I=s(C);I!==null&&(!(I.expirationTime>pe)||te&&!ue());){var Ee=I.callback;if(typeof Ee=="function"){I.callback=null,O=I.priorityLevel;var Ne=Ee(I.expirationTime<=pe);pe=e.unstable_now(),typeof Ne=="function"?I.callback=Ne:I===s(C)&&l(C),P(pe)}else l(C);I=s(C)}if(I!==null)var Ze=!0;else{var Ae=s(v);Ae!==null&&de(V,Ae.startTime-pe),Ze=!1}return Ze}finally{I=null,O=ce,z=!1}}var $=!1,W=null,Z=-1,X=5,he=-1;function ue(){return!(e.unstable_now()-he<X)}function fe(){if(W!==null){var te=e.unstable_now();he=te;var pe=!0;try{pe=W(!0,te)}finally{pe?J():($=!1,W=null)}}else $=!1}var J;if(typeof D=="function")J=function(){D(fe)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,Y=ne.port2;ne.port1.onmessage=fe,J=function(){Y.postMessage(null)}}else J=function(){ee(fe,0)};function ye(te){W=te,$||($=!0,J())}function de(te,pe){Z=ee(function(){te(e.unstable_now())},pe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){H||z||(H=!0,ye(re))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return s(C)},e.unstable_next=function(te){switch(O){case 1:case 2:case 3:var pe=3;break;default:pe=O}var ce=O;O=pe;try{return te()}finally{O=ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,pe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ce=O;O=te;try{return pe()}finally{O=ce}},e.unstable_scheduleCallback=function(te,pe,ce){var Ee=e.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Ee+ce:Ee):ce=Ee,te){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=ce+Ne,te={id:S++,callback:pe,priorityLevel:te,startTime:ce,expirationTime:Ne,sortIndex:-1},ce>Ee?(te.sortIndex=ce,n(v,te),s(C)===null&&te===s(v)&&(j?(F(Z),Z=-1):j=!0,de(V,ce-Ee))):(te.sortIndex=Ne,n(C,te),H||z||(H=!0,ye(re))),te},e.unstable_shouldYield=ue,e.unstable_wrapCallback=function(te){var pe=O;return function(){var ce=O;O=pe;try{return te.apply(this,arguments)}finally{O=ce}}}})(I1);S1.exports=I1;var Wg=S1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg=K,Nr=Wg;function be(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b1=new Set,pa={};function Bs(e,n){vo(e,n),vo(e+"Capture",n)}function vo(e,n){for(pa[e]=n,e=0;e<n.length;e++)b1.add(n[e])}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uc=Object.prototype.hasOwnProperty,Gg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kf={},Mf={};function Xg(e){return uc.call(Mf,e)?!0:uc.call(kf,e)?!1:Gg.test(e)?Mf[e]=!0:(kf[e]=!0,!1)}function Yg(e,n,s,l){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kg(e,n,s,l){if(n===null||typeof n>"u"||Yg(e,n,s,l))return!0;if(l)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function sr(e,n,s,l,f,d,w){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=f,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=d,this.removeEmptyString=w}var Mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mn[e]=new sr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Mn[n]=new sr(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mn[e]=new sr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mn[e]=new sr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mn[e]=new sr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mn[e]=new sr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mn[e]=new sr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mn[e]=new sr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mn[e]=new sr(e,5,!1,e.toLowerCase(),null,!1,!1)});var mh=/[\-:]([a-z])/g;function vh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(mh,vh);Mn[n]=new sr(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(mh,vh);Mn[n]=new sr(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(mh,vh);Mn[n]=new sr(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mn[e]=new sr(e,1,!1,e.toLowerCase(),null,!1,!1)});Mn.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mn[e]=new sr(e,1,!1,e.toLowerCase(),null,!0,!0)});function wh(e,n,s,l){var f=Mn.hasOwnProperty(n)?Mn[n]:null;(f!==null?f.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(Kg(n,s,f,l)&&(s=null),l||f===null?Xg(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):f.mustUseProperty?e[f.propertyName]=s===null?f.type===3?!1:"":s:(n=f.attributeName,l=f.attributeNamespace,s===null?e.removeAttribute(n):(f=f.type,s=f===3||f===4&&s===!0?"":""+s,l?e.setAttributeNS(l,n,s):e.setAttribute(n,s))))}var Ui=Zg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qa=Symbol.for("react.element"),Ys=Symbol.for("react.portal"),Ks=Symbol.for("react.fragment"),yh=Symbol.for("react.strict_mode"),cc=Symbol.for("react.profiler"),T1=Symbol.for("react.provider"),N1=Symbol.for("react.context"),_h=Symbol.for("react.forward_ref"),hc=Symbol.for("react.suspense"),fc=Symbol.for("react.suspense_list"),Ch=Symbol.for("react.memo"),qi=Symbol.for("react.lazy"),O1=Symbol.for("react.offscreen"),Pf=Symbol.iterator;function Ho(e){return e===null||typeof e!="object"?null:(e=Pf&&e[Pf]||e["@@iterator"],typeof e=="function"?e:null)}var Qt=Object.assign,Pu;function Jo(e){if(Pu===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Pu=n&&n[1]||""}return`
`+Pu+e}var Lu=!1;function Du(e,n){if(!e||Lu)return"";Lu=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(v){var l=v}Reflect.construct(e,[],n)}else{try{n.call()}catch(v){l=v}e.call(n.prototype)}else{try{throw Error()}catch(v){l=v}e()}}catch(v){if(v&&l&&typeof v.stack=="string"){for(var f=v.stack.split(`
`),d=l.stack.split(`
`),w=f.length-1,x=d.length-1;1<=w&&0<=x&&f[w]!==d[x];)x--;for(;1<=w&&0<=x;w--,x--)if(f[w]!==d[x]){if(w!==1||x!==1)do if(w--,x--,0>x||f[w]!==d[x]){var C=`
`+f[w].replace(" at new "," at ");return e.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",e.displayName)),C}while(1<=w&&0<=x);break}}}finally{Lu=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Jo(e):""}function Qg(e){switch(e.tag){case 5:return Jo(e.type);case 16:return Jo("Lazy");case 13:return Jo("Suspense");case 19:return Jo("SuspenseList");case 0:case 2:case 15:return e=Du(e.type,!1),e;case 11:return e=Du(e.type.render,!1),e;case 1:return e=Du(e.type,!0),e;default:return""}}function dc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ks:return"Fragment";case Ys:return"Portal";case cc:return"Profiler";case yh:return"StrictMode";case hc:return"Suspense";case fc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case N1:return(e.displayName||"Context")+".Consumer";case T1:return(e._context.displayName||"Context")+".Provider";case _h:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ch:return n=e.displayName||null,n!==null?n:dc(e.type)||"Memo";case qi:n=e._payload,e=e._init;try{return dc(e(n))}catch{}}return null}function qg(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dc(n);case 8:return n===yh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function hs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function R1(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function $g(e){var n=R1(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,d=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(w){l=""+w,d.call(this,w)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function qa(e){e._valueTracker||(e._valueTracker=$g(e))}function k1(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return e&&(l=R1(e)?e.checked?"true":"false":e.value),e=l,e!==s?(n.setValue(e),!0):!1}function Tl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function pc(e,n){var s=n.checked;return Qt({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Lf(e,n){var s=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;s=hs(n.value!=null?n.value:s),e._wrapperState={initialChecked:l,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function M1(e,n){n=n.checked,n!=null&&wh(e,"checked",n,!1)}function gc(e,n){M1(e,n);var s=hs(n.value),l=n.type;if(s!=null)l==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?mc(e,n.type,s):n.hasOwnProperty("defaultValue")&&mc(e,n.type,hs(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Df(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function mc(e,n,s){(n!=="number"||Tl(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var ea=Array.isArray;function uo(e,n,s,l){if(e=e.options,n){n={};for(var f=0;f<s.length;f++)n["$"+s[f]]=!0;for(s=0;s<e.length;s++)f=n.hasOwnProperty("$"+e[s].value),e[s].selected!==f&&(e[s].selected=f),f&&l&&(e[s].defaultSelected=!0)}else{for(s=""+hs(s),n=null,f=0;f<e.length;f++){if(e[f].value===s){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function vc(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(be(91));return Qt({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bf(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(be(92));if(ea(s)){if(1<s.length)throw Error(be(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:hs(s)}}function P1(e,n){var s=hs(n.value),l=hs(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),l!=null&&(e.defaultValue=""+l)}function Ff(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function L1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wc(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?L1(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $a,D1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,l,f){MSApp.execUnsafeLocalFunction(function(){return e(n,s,l,f)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for($a=$a||document.createElement("div"),$a.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=$a.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function ga(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jg=["Webkit","ms","Moz","O"];Object.keys(ra).forEach(function(e){Jg.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),ra[n]=ra[e]})});function B1(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||ra.hasOwnProperty(e)&&ra[e]?(""+n).trim():n+"px"}function F1(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var l=s.indexOf("--")===0,f=B1(s,n[s],l);s==="float"&&(s="cssFloat"),l?e.setProperty(s,f):e[s]=f}}var em=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yc(e,n){if(n){if(em[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(be(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(be(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(be(61))}if(n.style!=null&&typeof n.style!="object")throw Error(be(62))}}function _c(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cc=null;function Eh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ec=null,co=null,ho=null;function jf(e){if(e=Da(e)){if(typeof Ec!="function")throw Error(be(280));var n=e.stateNode;n&&(n=cu(n),Ec(e.stateNode,e.type,n))}}function j1(e){co?ho?ho.push(e):ho=[e]:co=e}function z1(){if(co){var e=co,n=ho;if(ho=co=null,jf(e),n)for(e=0;e<n.length;e++)jf(n[e])}}function U1(e,n){return e(n)}function H1(){}var Bu=!1;function V1(e,n,s){if(Bu)return e(n,s);Bu=!0;try{return U1(e,n,s)}finally{Bu=!1,(co!==null||ho!==null)&&(H1(),z1())}}function ma(e,n){var s=e.stateNode;if(s===null)return null;var l=cu(s);if(l===null)return null;s=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(be(231,n,typeof s));return s}var Ac=!1;if(Bi)try{var Vo={};Object.defineProperty(Vo,"passive",{get:function(){Ac=!0}}),window.addEventListener("test",Vo,Vo),window.removeEventListener("test",Vo,Vo)}catch{Ac=!1}function tm(e,n,s,l,f,d,w,x,C){var v=Array.prototype.slice.call(arguments,3);try{n.apply(s,v)}catch(S){this.onError(S)}}var ia=!1,Nl=null,Ol=!1,xc=null,nm={onError:function(e){ia=!0,Nl=e}};function rm(e,n,s,l,f,d,w,x,C){ia=!1,Nl=null,tm.apply(nm,arguments)}function im(e,n,s,l,f,d,w,x,C){if(rm.apply(this,arguments),ia){if(ia){var v=Nl;ia=!1,Nl=null}else throw Error(be(198));Ol||(Ol=!0,xc=v)}}function Fs(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function W1(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function zf(e){if(Fs(e)!==e)throw Error(be(188))}function sm(e){var n=e.alternate;if(!n){if(n=Fs(e),n===null)throw Error(be(188));return n!==e?null:e}for(var s=e,l=n;;){var f=s.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){s=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===s)return zf(f),e;if(d===l)return zf(f),n;d=d.sibling}throw Error(be(188))}if(s.return!==l.return)s=f,l=d;else{for(var w=!1,x=f.child;x;){if(x===s){w=!0,s=f,l=d;break}if(x===l){w=!0,l=f,s=d;break}x=x.sibling}if(!w){for(x=d.child;x;){if(x===s){w=!0,s=d,l=f;break}if(x===l){w=!0,l=d,s=f;break}x=x.sibling}if(!w)throw Error(be(189))}}if(s.alternate!==l)throw Error(be(190))}if(s.tag!==3)throw Error(be(188));return s.stateNode.current===s?e:n}function Z1(e){return e=sm(e),e!==null?G1(e):null}function G1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=G1(e);if(n!==null)return n;e=e.sibling}return null}var X1=Nr.unstable_scheduleCallback,Uf=Nr.unstable_cancelCallback,om=Nr.unstable_shouldYield,am=Nr.unstable_requestPaint,hn=Nr.unstable_now,lm=Nr.unstable_getCurrentPriorityLevel,Ah=Nr.unstable_ImmediatePriority,Y1=Nr.unstable_UserBlockingPriority,Rl=Nr.unstable_NormalPriority,um=Nr.unstable_LowPriority,K1=Nr.unstable_IdlePriority,ou=null,Ei=null;function cm(e){if(Ei&&typeof Ei.onCommitFiberRoot=="function")try{Ei.onCommitFiberRoot(ou,e,void 0,(e.current.flags&128)===128)}catch{}}var si=Math.clz32?Math.clz32:dm,hm=Math.log,fm=Math.LN2;function dm(e){return e>>>=0,e===0?32:31-(hm(e)/fm|0)|0}var Ja=64,el=4194304;function ta(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function kl(e,n){var s=e.pendingLanes;if(s===0)return 0;var l=0,f=e.suspendedLanes,d=e.pingedLanes,w=s&268435455;if(w!==0){var x=w&~f;x!==0?l=ta(x):(d&=w,d!==0&&(l=ta(d)))}else w=s&~f,w!==0?l=ta(w):d!==0&&(l=ta(d));if(l===0)return 0;if(n!==0&&n!==l&&!(n&f)&&(f=l&-l,d=n&-n,f>=d||f===16&&(d&4194240)!==0))return n;if(l&4&&(l|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=l;0<n;)s=31-si(n),f=1<<s,l|=e[s],n&=~f;return l}function pm(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gm(e,n){for(var s=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes;0<d;){var w=31-si(d),x=1<<w,C=f[w];C===-1?(!(x&s)||x&l)&&(f[w]=pm(x,n)):C<=n&&(e.expiredLanes|=x),d&=~x}}function Sc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Q1(){var e=Ja;return Ja<<=1,!(Ja&4194240)&&(Ja=64),e}function Fu(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Pa(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-si(n),e[n]=s}function mm(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<s;){var f=31-si(s),d=1<<f;n[f]=0,l[f]=-1,e[f]=-1,s&=~d}}function xh(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var l=31-si(s),f=1<<l;f&n|e[l]&n&&(e[l]|=n),s&=~f}}var It=0;function q1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $1,Sh,J1,e0,t0,Ic=!1,tl=[],rs=null,is=null,ss=null,va=new Map,wa=new Map,Ji=[],vm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hf(e,n){switch(e){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":va.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":wa.delete(n.pointerId)}}function Wo(e,n,s,l,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},n!==null&&(n=Da(n),n!==null&&Sh(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function wm(e,n,s,l,f){switch(n){case"focusin":return rs=Wo(rs,e,n,s,l,f),!0;case"dragenter":return is=Wo(is,e,n,s,l,f),!0;case"mouseover":return ss=Wo(ss,e,n,s,l,f),!0;case"pointerover":var d=f.pointerId;return va.set(d,Wo(va.get(d)||null,e,n,s,l,f)),!0;case"gotpointercapture":return d=f.pointerId,wa.set(d,Wo(wa.get(d)||null,e,n,s,l,f)),!0}return!1}function n0(e){var n=Ss(e.target);if(n!==null){var s=Fs(n);if(s!==null){if(n=s.tag,n===13){if(n=W1(s),n!==null){e.blockedOn=n,t0(e.priority,function(){J1(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ml(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=bc(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Cc=l,s.target.dispatchEvent(l),Cc=null}else return n=Da(s),n!==null&&Sh(n),e.blockedOn=s,!1;n.shift()}return!0}function Vf(e,n,s){ml(e)&&s.delete(n)}function ym(){Ic=!1,rs!==null&&ml(rs)&&(rs=null),is!==null&&ml(is)&&(is=null),ss!==null&&ml(ss)&&(ss=null),va.forEach(Vf),wa.forEach(Vf)}function Zo(e,n){e.blockedOn===n&&(e.blockedOn=null,Ic||(Ic=!0,Nr.unstable_scheduleCallback(Nr.unstable_NormalPriority,ym)))}function ya(e){function n(f){return Zo(f,e)}if(0<tl.length){Zo(tl[0],e);for(var s=1;s<tl.length;s++){var l=tl[s];l.blockedOn===e&&(l.blockedOn=null)}}for(rs!==null&&Zo(rs,e),is!==null&&Zo(is,e),ss!==null&&Zo(ss,e),va.forEach(n),wa.forEach(n),s=0;s<Ji.length;s++)l=Ji[s],l.blockedOn===e&&(l.blockedOn=null);for(;0<Ji.length&&(s=Ji[0],s.blockedOn===null);)n0(s),s.blockedOn===null&&Ji.shift()}var fo=Ui.ReactCurrentBatchConfig,Ml=!0;function _m(e,n,s,l){var f=It,d=fo.transition;fo.transition=null;try{It=1,Ih(e,n,s,l)}finally{It=f,fo.transition=d}}function Cm(e,n,s,l){var f=It,d=fo.transition;fo.transition=null;try{It=4,Ih(e,n,s,l)}finally{It=f,fo.transition=d}}function Ih(e,n,s,l){if(Ml){var f=bc(e,n,s,l);if(f===null)Yu(e,n,l,Pl,s),Hf(e,l);else if(wm(f,e,n,s,l))l.stopPropagation();else if(Hf(e,l),n&4&&-1<vm.indexOf(e)){for(;f!==null;){var d=Da(f);if(d!==null&&$1(d),d=bc(e,n,s,l),d===null&&Yu(e,n,l,Pl,s),d===f)break;f=d}f!==null&&l.stopPropagation()}else Yu(e,n,l,null,s)}}var Pl=null;function bc(e,n,s,l){if(Pl=null,e=Eh(l),e=Ss(e),e!==null)if(n=Fs(e),n===null)e=null;else if(s=n.tag,s===13){if(e=W1(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Pl=e,null}function r0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lm()){case Ah:return 1;case Y1:return 4;case Rl:case um:return 16;case K1:return 536870912;default:return 16}default:return 16}}var ts=null,bh=null,vl=null;function i0(){if(vl)return vl;var e,n=bh,s=n.length,l,f="value"in ts?ts.value:ts.textContent,d=f.length;for(e=0;e<s&&n[e]===f[e];e++);var w=s-e;for(l=1;l<=w&&n[s-l]===f[d-l];l++);return vl=f.slice(e,1<l?1-l:void 0)}function wl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function nl(){return!0}function Wf(){return!1}function Rr(e){function n(s,l,f,d,w){this._reactName=s,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=w,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(s=e[x],this[x]=s?s(d):d[x]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?nl:Wf,this.isPropagationStopped=Wf,this}return Qt(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=nl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=nl)},persist:function(){},isPersistent:nl}),n}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Th=Rr(Io),La=Qt({},Io,{view:0,detail:0}),Em=Rr(La),ju,zu,Go,au=Qt({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Go&&(Go&&e.type==="mousemove"?(ju=e.screenX-Go.screenX,zu=e.screenY-Go.screenY):zu=ju=0,Go=e),ju)},movementY:function(e){return"movementY"in e?e.movementY:zu}}),Zf=Rr(au),Am=Qt({},au,{dataTransfer:0}),xm=Rr(Am),Sm=Qt({},La,{relatedTarget:0}),Uu=Rr(Sm),Im=Qt({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),bm=Rr(Im),Tm=Qt({},Io,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nm=Rr(Tm),Om=Qt({},Io,{data:0}),Gf=Rr(Om),Rm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},km={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pm(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Mm[e])?!!n[e]:!1}function Nh(){return Pm}var Lm=Qt({},La,{key:function(e){if(e.key){var n=Rm[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?km[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nh,charCode:function(e){return e.type==="keypress"?wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dm=Rr(Lm),Bm=Qt({},au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xf=Rr(Bm),Fm=Qt({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nh}),jm=Rr(Fm),zm=Qt({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),Um=Rr(zm),Hm=Qt({},au,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vm=Rr(Hm),Wm=[9,13,27,32],Oh=Bi&&"CompositionEvent"in window,sa=null;Bi&&"documentMode"in document&&(sa=document.documentMode);var Zm=Bi&&"TextEvent"in window&&!sa,s0=Bi&&(!Oh||sa&&8<sa&&11>=sa),Yf=" ",Kf=!1;function o0(e,n){switch(e){case"keyup":return Wm.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qs=!1;function Gm(e,n){switch(e){case"compositionend":return a0(n);case"keypress":return n.which!==32?null:(Kf=!0,Yf);case"textInput":return e=n.data,e===Yf&&Kf?null:e;default:return null}}function Xm(e,n){if(Qs)return e==="compositionend"||!Oh&&o0(e,n)?(e=i0(),vl=bh=ts=null,Qs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return s0&&n.locale!=="ko"?null:n.data;default:return null}}var Ym={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Ym[e.type]:n==="textarea"}function l0(e,n,s,l){j1(l),n=Ll(n,"onChange"),0<n.length&&(s=new Th("onChange","change",null,s,l),e.push({event:s,listeners:n}))}var oa=null,_a=null;function Km(e){y0(e,0)}function lu(e){var n=Js(e);if(k1(n))return e}function Qm(e,n){if(e==="change")return n}var u0=!1;if(Bi){var Hu;if(Bi){var Vu="oninput"in document;if(!Vu){var qf=document.createElement("div");qf.setAttribute("oninput","return;"),Vu=typeof qf.oninput=="function"}Hu=Vu}else Hu=!1;u0=Hu&&(!document.documentMode||9<document.documentMode)}function $f(){oa&&(oa.detachEvent("onpropertychange",c0),_a=oa=null)}function c0(e){if(e.propertyName==="value"&&lu(_a)){var n=[];l0(n,_a,e,Eh(e)),V1(Km,n)}}function qm(e,n,s){e==="focusin"?($f(),oa=n,_a=s,oa.attachEvent("onpropertychange",c0)):e==="focusout"&&$f()}function $m(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lu(_a)}function Jm(e,n){if(e==="click")return lu(n)}function e2(e,n){if(e==="input"||e==="change")return lu(n)}function t2(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var ai=typeof Object.is=="function"?Object.is:t2;function Ca(e,n){if(ai(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var f=s[l];if(!uc.call(n,f)||!ai(e[f],n[f]))return!1}return!0}function Jf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ed(e,n){var s=Jf(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=n&&l>=n)return{node:s,offset:n-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Jf(s)}}function h0(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?h0(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function f0(){for(var e=window,n=Tl();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=Tl(e.document)}return n}function Rh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function n2(e){var n=f0(),s=e.focusedElem,l=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&h0(s.ownerDocument.documentElement,s)){if(l!==null&&Rh(s)){if(n=l.start,e=l.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var f=s.textContent.length,d=Math.min(l.start,f);l=l.end===void 0?d:Math.min(l.end,f),!e.extend&&d>l&&(f=l,l=d,d=f),f=ed(s,d);var w=ed(s,l);f&&w&&(e.rangeCount!==1||e.anchorNode!==f.node||e.anchorOffset!==f.offset||e.focusNode!==w.node||e.focusOffset!==w.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),e.removeAllRanges(),d>l?(e.addRange(n),e.extend(w.node,w.offset)):(n.setEnd(w.node,w.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var r2=Bi&&"documentMode"in document&&11>=document.documentMode,qs=null,Tc=null,aa=null,Nc=!1;function td(e,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Nc||qs==null||qs!==Tl(l)||(l=qs,"selectionStart"in l&&Rh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),aa&&Ca(aa,l)||(aa=l,l=Ll(Tc,"onSelect"),0<l.length&&(n=new Th("onSelect","select",null,n,s),e.push({event:n,listeners:l}),n.target=qs)))}function rl(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var $s={animationend:rl("Animation","AnimationEnd"),animationiteration:rl("Animation","AnimationIteration"),animationstart:rl("Animation","AnimationStart"),transitionend:rl("Transition","TransitionEnd")},Wu={},d0={};Bi&&(d0=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function uu(e){if(Wu[e])return Wu[e];if(!$s[e])return e;var n=$s[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in d0)return Wu[e]=n[s];return e}var p0=uu("animationend"),g0=uu("animationiteration"),m0=uu("animationstart"),v0=uu("transitionend"),w0=new Map,nd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ds(e,n){w0.set(e,n),Bs(n,[e])}for(var Zu=0;Zu<nd.length;Zu++){var Gu=nd[Zu],i2=Gu.toLowerCase(),s2=Gu[0].toUpperCase()+Gu.slice(1);ds(i2,"on"+s2)}ds(p0,"onAnimationEnd");ds(g0,"onAnimationIteration");ds(m0,"onAnimationStart");ds("dblclick","onDoubleClick");ds("focusin","onFocus");ds("focusout","onBlur");ds(v0,"onTransitionEnd");vo("onMouseEnter",["mouseout","mouseover"]);vo("onMouseLeave",["mouseout","mouseover"]);vo("onPointerEnter",["pointerout","pointerover"]);vo("onPointerLeave",["pointerout","pointerover"]);Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o2=new Set("cancel close invalid load scroll toggle".split(" ").concat(na));function rd(e,n,s){var l=e.type||"unknown-event";e.currentTarget=s,im(l,n,void 0,e),e.currentTarget=null}function y0(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],f=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var w=l.length-1;0<=w;w--){var x=l[w],C=x.instance,v=x.currentTarget;if(x=x.listener,C!==d&&f.isPropagationStopped())break e;rd(f,x,v),d=C}else for(w=0;w<l.length;w++){if(x=l[w],C=x.instance,v=x.currentTarget,x=x.listener,C!==d&&f.isPropagationStopped())break e;rd(f,x,v),d=C}}}if(Ol)throw e=xc,Ol=!1,xc=null,e}function jt(e,n){var s=n[Pc];s===void 0&&(s=n[Pc]=new Set);var l=e+"__bubble";s.has(l)||(_0(n,e,2,!1),s.add(l))}function Xu(e,n,s){var l=0;n&&(l|=4),_0(s,e,l,n)}var il="_reactListening"+Math.random().toString(36).slice(2);function Ea(e){if(!e[il]){e[il]=!0,b1.forEach(function(s){s!=="selectionchange"&&(o2.has(s)||Xu(s,!1,e),Xu(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[il]||(n[il]=!0,Xu("selectionchange",!1,n))}}function _0(e,n,s,l){switch(r0(n)){case 1:var f=_m;break;case 4:f=Cm;break;default:f=Ih}s=f.bind(null,n,s,e),f=void 0,!Ac||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(n,s,{capture:!0,passive:f}):e.addEventListener(n,s,!0):f!==void 0?e.addEventListener(n,s,{passive:f}):e.addEventListener(n,s,!1)}function Yu(e,n,s,l,f){var d=l;if(!(n&1)&&!(n&2)&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var x=l.stateNode.containerInfo;if(x===f||x.nodeType===8&&x.parentNode===f)break;if(w===4)for(w=l.return;w!==null;){var C=w.tag;if((C===3||C===4)&&(C=w.stateNode.containerInfo,C===f||C.nodeType===8&&C.parentNode===f))return;w=w.return}for(;x!==null;){if(w=Ss(x),w===null)return;if(C=w.tag,C===5||C===6){l=d=w;continue e}x=x.parentNode}}l=l.return}V1(function(){var v=d,S=Eh(s),I=[];e:{var O=w0.get(e);if(O!==void 0){var z=Th,H=e;switch(e){case"keypress":if(wl(s)===0)break e;case"keydown":case"keyup":z=Dm;break;case"focusin":H="focus",z=Uu;break;case"focusout":H="blur",z=Uu;break;case"beforeblur":case"afterblur":z=Uu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Zf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=xm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=jm;break;case p0:case g0:case m0:z=bm;break;case v0:z=Um;break;case"scroll":z=Em;break;case"wheel":z=Vm;break;case"copy":case"cut":case"paste":z=Nm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=Xf}var j=(n&4)!==0,ee=!j&&e==="scroll",F=j?O!==null?O+"Capture":null:O;j=[];for(var D=v,P;D!==null;){P=D;var V=P.stateNode;if(P.tag===5&&V!==null&&(P=V,F!==null&&(V=ma(D,F),V!=null&&j.push(Aa(D,V,P)))),ee)break;D=D.return}0<j.length&&(O=new z(O,H,null,s,S),I.push({event:O,listeners:j}))}}if(!(n&7)){e:{if(O=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",O&&s!==Cc&&(H=s.relatedTarget||s.fromElement)&&(Ss(H)||H[Fi]))break e;if((z||O)&&(O=S.window===S?S:(O=S.ownerDocument)?O.defaultView||O.parentWindow:window,z?(H=s.relatedTarget||s.toElement,z=v,H=H?Ss(H):null,H!==null&&(ee=Fs(H),H!==ee||H.tag!==5&&H.tag!==6)&&(H=null)):(z=null,H=v),z!==H)){if(j=Zf,V="onMouseLeave",F="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(j=Xf,V="onPointerLeave",F="onPointerEnter",D="pointer"),ee=z==null?O:Js(z),P=H==null?O:Js(H),O=new j(V,D+"leave",z,s,S),O.target=ee,O.relatedTarget=P,V=null,Ss(S)===v&&(j=new j(F,D+"enter",H,s,S),j.target=P,j.relatedTarget=ee,V=j),ee=V,z&&H)t:{for(j=z,F=H,D=0,P=j;P;P=Zs(P))D++;for(P=0,V=F;V;V=Zs(V))P++;for(;0<D-P;)j=Zs(j),D--;for(;0<P-D;)F=Zs(F),P--;for(;D--;){if(j===F||F!==null&&j===F.alternate)break t;j=Zs(j),F=Zs(F)}j=null}else j=null;z!==null&&id(I,O,z,j,!1),H!==null&&ee!==null&&id(I,ee,H,j,!0)}}e:{if(O=v?Js(v):window,z=O.nodeName&&O.nodeName.toLowerCase(),z==="select"||z==="input"&&O.type==="file")var re=Qm;else if(Qf(O))if(u0)re=e2;else{re=$m;var $=qm}else(z=O.nodeName)&&z.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(re=Jm);if(re&&(re=re(e,v))){l0(I,re,s,S);break e}$&&$(e,O,v),e==="focusout"&&($=O._wrapperState)&&$.controlled&&O.type==="number"&&mc(O,"number",O.value)}switch($=v?Js(v):window,e){case"focusin":(Qf($)||$.contentEditable==="true")&&(qs=$,Tc=v,aa=null);break;case"focusout":aa=Tc=qs=null;break;case"mousedown":Nc=!0;break;case"contextmenu":case"mouseup":case"dragend":Nc=!1,td(I,s,S);break;case"selectionchange":if(r2)break;case"keydown":case"keyup":td(I,s,S)}var W;if(Oh)e:{switch(e){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else Qs?o0(e,s)&&(Z="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Z="onCompositionStart");Z&&(s0&&s.locale!=="ko"&&(Qs||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&Qs&&(W=i0()):(ts=S,bh="value"in ts?ts.value:ts.textContent,Qs=!0)),$=Ll(v,Z),0<$.length&&(Z=new Gf(Z,e,null,s,S),I.push({event:Z,listeners:$}),W?Z.data=W:(W=a0(s),W!==null&&(Z.data=W)))),(W=Zm?Gm(e,s):Xm(e,s))&&(v=Ll(v,"onBeforeInput"),0<v.length&&(S=new Gf("onBeforeInput","beforeinput",null,s,S),I.push({event:S,listeners:v}),S.data=W))}y0(I,n)})}function Aa(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Ll(e,n){for(var s=n+"Capture",l=[];e!==null;){var f=e,d=f.stateNode;f.tag===5&&d!==null&&(f=d,d=ma(e,s),d!=null&&l.unshift(Aa(e,d,f)),d=ma(e,n),d!=null&&l.push(Aa(e,d,f))),e=e.return}return l}function Zs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function id(e,n,s,l,f){for(var d=n._reactName,w=[];s!==null&&s!==l;){var x=s,C=x.alternate,v=x.stateNode;if(C!==null&&C===l)break;x.tag===5&&v!==null&&(x=v,f?(C=ma(s,d),C!=null&&w.unshift(Aa(s,C,x))):f||(C=ma(s,d),C!=null&&w.push(Aa(s,C,x)))),s=s.return}w.length!==0&&e.push({event:n,listeners:w})}var a2=/\r\n?/g,l2=/\u0000|\uFFFD/g;function sd(e){return(typeof e=="string"?e:""+e).replace(a2,`
`).replace(l2,"")}function sl(e,n,s){if(n=sd(n),sd(e)!==n&&s)throw Error(be(425))}function Dl(){}var Oc=null,Rc=null;function kc(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Mc=typeof setTimeout=="function"?setTimeout:void 0,u2=typeof clearTimeout=="function"?clearTimeout:void 0,od=typeof Promise=="function"?Promise:void 0,c2=typeof queueMicrotask=="function"?queueMicrotask:typeof od<"u"?function(e){return od.resolve(null).then(e).catch(h2)}:Mc;function h2(e){setTimeout(function(){throw e})}function Ku(e,n){var s=n,l=0;do{var f=s.nextSibling;if(e.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(l===0){e.removeChild(f),ya(n);return}l--}else s!=="$"&&s!=="$?"&&s!=="$!"||l++;s=f}while(s);ya(n)}function os(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function ad(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var bo=Math.random().toString(36).slice(2),Ci="__reactFiber$"+bo,xa="__reactProps$"+bo,Fi="__reactContainer$"+bo,Pc="__reactEvents$"+bo,f2="__reactListeners$"+bo,d2="__reactHandles$"+bo;function Ss(e){var n=e[Ci];if(n)return n;for(var s=e.parentNode;s;){if(n=s[Fi]||s[Ci]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=ad(e);e!==null;){if(s=e[Ci])return s;e=ad(e)}return n}e=s,s=e.parentNode}return null}function Da(e){return e=e[Ci]||e[Fi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Js(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(be(33))}function cu(e){return e[xa]||null}var Lc=[],eo=-1;function ps(e){return{current:e}}function Ut(e){0>eo||(e.current=Lc[eo],Lc[eo]=null,eo--)}function Lt(e,n){eo++,Lc[eo]=e.current,e.current=n}var fs={},Wn=ps(fs),dr=ps(!1),Rs=fs;function wo(e,n){var s=e.type.contextTypes;if(!s)return fs;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var f={},d;for(d in s)f[d]=n[d];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=f),f}function pr(e){return e=e.childContextTypes,e!=null}function Bl(){Ut(dr),Ut(Wn)}function ld(e,n,s){if(Wn.current!==fs)throw Error(be(168));Lt(Wn,n),Lt(dr,s)}function C0(e,n,s){var l=e.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return s;l=l.getChildContext();for(var f in l)if(!(f in n))throw Error(be(108,qg(e)||"Unknown",f));return Qt({},s,l)}function Fl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fs,Rs=Wn.current,Lt(Wn,e),Lt(dr,dr.current),!0}function ud(e,n,s){var l=e.stateNode;if(!l)throw Error(be(169));s?(e=C0(e,n,Rs),l.__reactInternalMemoizedMergedChildContext=e,Ut(dr),Ut(Wn),Lt(Wn,e)):Ut(dr),Lt(dr,s)}var Mi=null,hu=!1,Qu=!1;function E0(e){Mi===null?Mi=[e]:Mi.push(e)}function p2(e){hu=!0,E0(e)}function gs(){if(!Qu&&Mi!==null){Qu=!0;var e=0,n=It;try{var s=Mi;for(It=1;e<s.length;e++){var l=s[e];do l=l(!0);while(l!==null)}Mi=null,hu=!1}catch(f){throw Mi!==null&&(Mi=Mi.slice(e+1)),X1(Ah,gs),f}finally{It=n,Qu=!1}}return null}var to=[],no=0,jl=null,zl=0,Ur=[],Hr=0,ks=null,Pi=1,Li="";function As(e,n){to[no++]=zl,to[no++]=jl,jl=e,zl=n}function A0(e,n,s){Ur[Hr++]=Pi,Ur[Hr++]=Li,Ur[Hr++]=ks,ks=e;var l=Pi;e=Li;var f=32-si(l)-1;l&=~(1<<f),s+=1;var d=32-si(n)+f;if(30<d){var w=f-f%5;d=(l&(1<<w)-1).toString(32),l>>=w,f-=w,Pi=1<<32-si(n)+f|s<<f|l,Li=d+e}else Pi=1<<d|s<<f|l,Li=e}function kh(e){e.return!==null&&(As(e,1),A0(e,1,0))}function Mh(e){for(;e===jl;)jl=to[--no],to[no]=null,zl=to[--no],to[no]=null;for(;e===ks;)ks=Ur[--Hr],Ur[Hr]=null,Li=Ur[--Hr],Ur[Hr]=null,Pi=Ur[--Hr],Ur[Hr]=null}var Tr=null,br=null,Vt=!1,ii=null;function x0(e,n){var s=Vr(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function cd(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Tr=e,br=os(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Tr=e,br=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=ks!==null?{id:Pi,overflow:Li}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Vr(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,Tr=e,br=null,!0):!1;default:return!1}}function Dc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Bc(e){if(Vt){var n=br;if(n){var s=n;if(!cd(e,n)){if(Dc(e))throw Error(be(418));n=os(s.nextSibling);var l=Tr;n&&cd(e,n)?x0(l,s):(e.flags=e.flags&-4097|2,Vt=!1,Tr=e)}}else{if(Dc(e))throw Error(be(418));e.flags=e.flags&-4097|2,Vt=!1,Tr=e}}}function hd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tr=e}function ol(e){if(e!==Tr)return!1;if(!Vt)return hd(e),Vt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!kc(e.type,e.memoizedProps)),n&&(n=br)){if(Dc(e))throw S0(),Error(be(418));for(;n;)x0(e,n),n=os(n.nextSibling)}if(hd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(be(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){br=os(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}br=null}}else br=Tr?os(e.stateNode.nextSibling):null;return!0}function S0(){for(var e=br;e;)e=os(e.nextSibling)}function yo(){br=Tr=null,Vt=!1}function Ph(e){ii===null?ii=[e]:ii.push(e)}var g2=Ui.ReactCurrentBatchConfig;function Xo(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(be(309));var l=s.stateNode}if(!l)throw Error(be(147,e));var f=l,d=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===d?n.ref:(n=function(w){var x=f.refs;w===null?delete x[d]:x[d]=w},n._stringRef=d,n)}if(typeof e!="string")throw Error(be(284));if(!s._owner)throw Error(be(290,e))}return e}function al(e,n){throw e=Object.prototype.toString.call(n),Error(be(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function fd(e){var n=e._init;return n(e._payload)}function I0(e){function n(F,D){if(e){var P=F.deletions;P===null?(F.deletions=[D],F.flags|=16):P.push(D)}}function s(F,D){if(!e)return null;for(;D!==null;)n(F,D),D=D.sibling;return null}function l(F,D){for(F=new Map;D!==null;)D.key!==null?F.set(D.key,D):F.set(D.index,D),D=D.sibling;return F}function f(F,D){return F=cs(F,D),F.index=0,F.sibling=null,F}function d(F,D,P){return F.index=P,e?(P=F.alternate,P!==null?(P=P.index,P<D?(F.flags|=2,D):P):(F.flags|=2,D)):(F.flags|=1048576,D)}function w(F){return e&&F.alternate===null&&(F.flags|=2),F}function x(F,D,P,V){return D===null||D.tag!==6?(D=rc(P,F.mode,V),D.return=F,D):(D=f(D,P),D.return=F,D)}function C(F,D,P,V){var re=P.type;return re===Ks?S(F,D,P.props.children,V,P.key):D!==null&&(D.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===qi&&fd(re)===D.type)?(V=f(D,P.props),V.ref=Xo(F,D,P),V.return=F,V):(V=Sl(P.type,P.key,P.props,null,F.mode,V),V.ref=Xo(F,D,P),V.return=F,V)}function v(F,D,P,V){return D===null||D.tag!==4||D.stateNode.containerInfo!==P.containerInfo||D.stateNode.implementation!==P.implementation?(D=ic(P,F.mode,V),D.return=F,D):(D=f(D,P.children||[]),D.return=F,D)}function S(F,D,P,V,re){return D===null||D.tag!==7?(D=Os(P,F.mode,V,re),D.return=F,D):(D=f(D,P),D.return=F,D)}function I(F,D,P){if(typeof D=="string"&&D!==""||typeof D=="number")return D=rc(""+D,F.mode,P),D.return=F,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Qa:return P=Sl(D.type,D.key,D.props,null,F.mode,P),P.ref=Xo(F,null,D),P.return=F,P;case Ys:return D=ic(D,F.mode,P),D.return=F,D;case qi:var V=D._init;return I(F,V(D._payload),P)}if(ea(D)||Ho(D))return D=Os(D,F.mode,P,null),D.return=F,D;al(F,D)}return null}function O(F,D,P,V){var re=D!==null?D.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return re!==null?null:x(F,D,""+P,V);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Qa:return P.key===re?C(F,D,P,V):null;case Ys:return P.key===re?v(F,D,P,V):null;case qi:return re=P._init,O(F,D,re(P._payload),V)}if(ea(P)||Ho(P))return re!==null?null:S(F,D,P,V,null);al(F,P)}return null}function z(F,D,P,V,re){if(typeof V=="string"&&V!==""||typeof V=="number")return F=F.get(P)||null,x(D,F,""+V,re);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Qa:return F=F.get(V.key===null?P:V.key)||null,C(D,F,V,re);case Ys:return F=F.get(V.key===null?P:V.key)||null,v(D,F,V,re);case qi:var $=V._init;return z(F,D,P,$(V._payload),re)}if(ea(V)||Ho(V))return F=F.get(P)||null,S(D,F,V,re,null);al(D,V)}return null}function H(F,D,P,V){for(var re=null,$=null,W=D,Z=D=0,X=null;W!==null&&Z<P.length;Z++){W.index>Z?(X=W,W=null):X=W.sibling;var he=O(F,W,P[Z],V);if(he===null){W===null&&(W=X);break}e&&W&&he.alternate===null&&n(F,W),D=d(he,D,Z),$===null?re=he:$.sibling=he,$=he,W=X}if(Z===P.length)return s(F,W),Vt&&As(F,Z),re;if(W===null){for(;Z<P.length;Z++)W=I(F,P[Z],V),W!==null&&(D=d(W,D,Z),$===null?re=W:$.sibling=W,$=W);return Vt&&As(F,Z),re}for(W=l(F,W);Z<P.length;Z++)X=z(W,F,Z,P[Z],V),X!==null&&(e&&X.alternate!==null&&W.delete(X.key===null?Z:X.key),D=d(X,D,Z),$===null?re=X:$.sibling=X,$=X);return e&&W.forEach(function(ue){return n(F,ue)}),Vt&&As(F,Z),re}function j(F,D,P,V){var re=Ho(P);if(typeof re!="function")throw Error(be(150));if(P=re.call(P),P==null)throw Error(be(151));for(var $=re=null,W=D,Z=D=0,X=null,he=P.next();W!==null&&!he.done;Z++,he=P.next()){W.index>Z?(X=W,W=null):X=W.sibling;var ue=O(F,W,he.value,V);if(ue===null){W===null&&(W=X);break}e&&W&&ue.alternate===null&&n(F,W),D=d(ue,D,Z),$===null?re=ue:$.sibling=ue,$=ue,W=X}if(he.done)return s(F,W),Vt&&As(F,Z),re;if(W===null){for(;!he.done;Z++,he=P.next())he=I(F,he.value,V),he!==null&&(D=d(he,D,Z),$===null?re=he:$.sibling=he,$=he);return Vt&&As(F,Z),re}for(W=l(F,W);!he.done;Z++,he=P.next())he=z(W,F,Z,he.value,V),he!==null&&(e&&he.alternate!==null&&W.delete(he.key===null?Z:he.key),D=d(he,D,Z),$===null?re=he:$.sibling=he,$=he);return e&&W.forEach(function(fe){return n(F,fe)}),Vt&&As(F,Z),re}function ee(F,D,P,V){if(typeof P=="object"&&P!==null&&P.type===Ks&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case Qa:e:{for(var re=P.key,$=D;$!==null;){if($.key===re){if(re=P.type,re===Ks){if($.tag===7){s(F,$.sibling),D=f($,P.props.children),D.return=F,F=D;break e}}else if($.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===qi&&fd(re)===$.type){s(F,$.sibling),D=f($,P.props),D.ref=Xo(F,$,P),D.return=F,F=D;break e}s(F,$);break}else n(F,$);$=$.sibling}P.type===Ks?(D=Os(P.props.children,F.mode,V,P.key),D.return=F,F=D):(V=Sl(P.type,P.key,P.props,null,F.mode,V),V.ref=Xo(F,D,P),V.return=F,F=V)}return w(F);case Ys:e:{for($=P.key;D!==null;){if(D.key===$)if(D.tag===4&&D.stateNode.containerInfo===P.containerInfo&&D.stateNode.implementation===P.implementation){s(F,D.sibling),D=f(D,P.children||[]),D.return=F,F=D;break e}else{s(F,D);break}else n(F,D);D=D.sibling}D=ic(P,F.mode,V),D.return=F,F=D}return w(F);case qi:return $=P._init,ee(F,D,$(P._payload),V)}if(ea(P))return H(F,D,P,V);if(Ho(P))return j(F,D,P,V);al(F,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,D!==null&&D.tag===6?(s(F,D.sibling),D=f(D,P),D.return=F,F=D):(s(F,D),D=rc(P,F.mode,V),D.return=F,F=D),w(F)):s(F,D)}return ee}var _o=I0(!0),b0=I0(!1),Ul=ps(null),Hl=null,ro=null,Lh=null;function Dh(){Lh=ro=Hl=null}function Bh(e){var n=Ul.current;Ut(Ul),e._currentValue=n}function Fc(e,n,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===s)break;e=e.return}}function po(e,n){Hl=e,Lh=ro=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(fr=!0),e.firstContext=null)}function Zr(e){var n=e._currentValue;if(Lh!==e)if(e={context:e,memoizedValue:n,next:null},ro===null){if(Hl===null)throw Error(be(308));ro=e,Hl.dependencies={lanes:0,firstContext:e}}else ro=ro.next=e;return n}var Is=null;function Fh(e){Is===null?Is=[e]:Is.push(e)}function T0(e,n,s,l){var f=n.interleaved;return f===null?(s.next=s,Fh(n)):(s.next=f.next,f.next=s),n.interleaved=s,ji(e,l)}function ji(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var $i=!1;function jh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function N0(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Di(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function as(e,n,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,wt&2){var f=l.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),l.pending=n,ji(e,s)}return f=l.interleaved,f===null?(n.next=n,Fh(l)):(n.next=f.next,f.next=n),l.interleaved=n,ji(e,s)}function yl(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,xh(e,s)}}function dd(e,n){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var f=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var w={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};d===null?f=d=w:d=d.next=w,s=s.next}while(s!==null);d===null?f=d=n:d=d.next=n}else f=d=n;s={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,effects:l.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Vl(e,n,s,l){var f=e.updateQueue;$i=!1;var d=f.firstBaseUpdate,w=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var C=x,v=C.next;C.next=null,w===null?d=v:w.next=v,w=C;var S=e.alternate;S!==null&&(S=S.updateQueue,x=S.lastBaseUpdate,x!==w&&(x===null?S.firstBaseUpdate=v:x.next=v,S.lastBaseUpdate=C))}if(d!==null){var I=f.baseState;w=0,S=v=C=null,x=d;do{var O=x.lane,z=x.eventTime;if((l&O)===O){S!==null&&(S=S.next={eventTime:z,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var H=e,j=x;switch(O=n,z=s,j.tag){case 1:if(H=j.payload,typeof H=="function"){I=H.call(z,I,O);break e}I=H;break e;case 3:H.flags=H.flags&-65537|128;case 0:if(H=j.payload,O=typeof H=="function"?H.call(z,I,O):H,O==null)break e;I=Qt({},I,O);break e;case 2:$i=!0}}x.callback!==null&&x.lane!==0&&(e.flags|=64,O=f.effects,O===null?f.effects=[x]:O.push(x))}else z={eventTime:z,lane:O,tag:x.tag,payload:x.payload,callback:x.callback,next:null},S===null?(v=S=z,C=I):S=S.next=z,w|=O;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;O=x,x=O.next,O.next=null,f.lastBaseUpdate=O,f.shared.pending=null}}while(!0);if(S===null&&(C=I),f.baseState=C,f.firstBaseUpdate=v,f.lastBaseUpdate=S,n=f.shared.interleaved,n!==null){f=n;do w|=f.lane,f=f.next;while(f!==n)}else d===null&&(f.shared.lanes=0);Ps|=w,e.lanes=w,e.memoizedState=I}}function pd(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var l=e[n],f=l.callback;if(f!==null){if(l.callback=null,l=s,typeof f!="function")throw Error(be(191,f));f.call(l)}}}var Ba={},Ai=ps(Ba),Sa=ps(Ba),Ia=ps(Ba);function bs(e){if(e===Ba)throw Error(be(174));return e}function zh(e,n){switch(Lt(Ia,n),Lt(Sa,e),Lt(Ai,Ba),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:wc(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=wc(n,e)}Ut(Ai),Lt(Ai,n)}function Co(){Ut(Ai),Ut(Sa),Ut(Ia)}function O0(e){bs(Ia.current);var n=bs(Ai.current),s=wc(n,e.type);n!==s&&(Lt(Sa,e),Lt(Ai,s))}function Uh(e){Sa.current===e&&(Ut(Ai),Ut(Sa))}var Yt=ps(0);function Wl(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var qu=[];function Hh(){for(var e=0;e<qu.length;e++)qu[e]._workInProgressVersionPrimary=null;qu.length=0}var _l=Ui.ReactCurrentDispatcher,$u=Ui.ReactCurrentBatchConfig,Ms=0,Kt=null,Cn=null,bn=null,Zl=!1,la=!1,ba=0,m2=0;function Un(){throw Error(be(321))}function Vh(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!ai(e[s],n[s]))return!1;return!0}function Wh(e,n,s,l,f,d){if(Ms=d,Kt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,_l.current=e===null||e.memoizedState===null?_2:C2,e=s(l,f),la){d=0;do{if(la=!1,ba=0,25<=d)throw Error(be(301));d+=1,bn=Cn=null,n.updateQueue=null,_l.current=E2,e=s(l,f)}while(la)}if(_l.current=Gl,n=Cn!==null&&Cn.next!==null,Ms=0,bn=Cn=Kt=null,Zl=!1,n)throw Error(be(300));return e}function Zh(){var e=ba!==0;return ba=0,e}function _i(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?Kt.memoizedState=bn=e:bn=bn.next=e,bn}function Gr(){if(Cn===null){var e=Kt.alternate;e=e!==null?e.memoizedState:null}else e=Cn.next;var n=bn===null?Kt.memoizedState:bn.next;if(n!==null)bn=n,Cn=e;else{if(e===null)throw Error(be(310));Cn=e,e={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},bn===null?Kt.memoizedState=bn=e:bn=bn.next=e}return bn}function Ta(e,n){return typeof n=="function"?n(e):n}function Ju(e){var n=Gr(),s=n.queue;if(s===null)throw Error(be(311));s.lastRenderedReducer=e;var l=Cn,f=l.baseQueue,d=s.pending;if(d!==null){if(f!==null){var w=f.next;f.next=d.next,d.next=w}l.baseQueue=f=d,s.pending=null}if(f!==null){d=f.next,l=l.baseState;var x=w=null,C=null,v=d;do{var S=v.lane;if((Ms&S)===S)C!==null&&(C=C.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),l=v.hasEagerState?v.eagerState:e(l,v.action);else{var I={lane:S,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};C===null?(x=C=I,w=l):C=C.next=I,Kt.lanes|=S,Ps|=S}v=v.next}while(v!==null&&v!==d);C===null?w=l:C.next=x,ai(l,n.memoizedState)||(fr=!0),n.memoizedState=l,n.baseState=w,n.baseQueue=C,s.lastRenderedState=l}if(e=s.interleaved,e!==null){f=e;do d=f.lane,Kt.lanes|=d,Ps|=d,f=f.next;while(f!==e)}else f===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function ec(e){var n=Gr(),s=n.queue;if(s===null)throw Error(be(311));s.lastRenderedReducer=e;var l=s.dispatch,f=s.pending,d=n.memoizedState;if(f!==null){s.pending=null;var w=f=f.next;do d=e(d,w.action),w=w.next;while(w!==f);ai(d,n.memoizedState)||(fr=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),s.lastRenderedState=d}return[d,l]}function R0(){}function k0(e,n){var s=Kt,l=Gr(),f=n(),d=!ai(l.memoizedState,f);if(d&&(l.memoizedState=f,fr=!0),l=l.queue,Gh(L0.bind(null,s,l,e),[e]),l.getSnapshot!==n||d||bn!==null&&bn.memoizedState.tag&1){if(s.flags|=2048,Na(9,P0.bind(null,s,l,f,n),void 0,null),Tn===null)throw Error(be(349));Ms&30||M0(s,n,f)}return f}function M0(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Kt.updateQueue,n===null?(n={lastEffect:null,stores:null},Kt.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function P0(e,n,s,l){n.value=s,n.getSnapshot=l,D0(n)&&B0(e)}function L0(e,n,s){return s(function(){D0(n)&&B0(e)})}function D0(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!ai(e,s)}catch{return!0}}function B0(e){var n=ji(e,1);n!==null&&oi(n,e,1,-1)}function gd(e){var n=_i();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:e},n.queue=e,e=e.dispatch=y2.bind(null,Kt,e),[n.memoizedState,e]}function Na(e,n,s,l){return e={tag:e,create:n,destroy:s,deps:l,next:null},n=Kt.updateQueue,n===null?(n={lastEffect:null,stores:null},Kt.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,n.lastEffect=e)),e}function F0(){return Gr().memoizedState}function Cl(e,n,s,l){var f=_i();Kt.flags|=e,f.memoizedState=Na(1|n,s,void 0,l===void 0?null:l)}function fu(e,n,s,l){var f=Gr();l=l===void 0?null:l;var d=void 0;if(Cn!==null){var w=Cn.memoizedState;if(d=w.destroy,l!==null&&Vh(l,w.deps)){f.memoizedState=Na(n,s,d,l);return}}Kt.flags|=e,f.memoizedState=Na(1|n,s,d,l)}function md(e,n){return Cl(8390656,8,e,n)}function Gh(e,n){return fu(2048,8,e,n)}function j0(e,n){return fu(4,2,e,n)}function z0(e,n){return fu(4,4,e,n)}function U0(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function H0(e,n,s){return s=s!=null?s.concat([e]):null,fu(4,4,U0.bind(null,n,e),s)}function Xh(){}function V0(e,n){var s=Gr();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&Vh(n,l[1])?l[0]:(s.memoizedState=[e,n],e)}function W0(e,n){var s=Gr();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&Vh(n,l[1])?l[0]:(e=e(),s.memoizedState=[e,n],e)}function Z0(e,n,s){return Ms&21?(ai(s,n)||(s=Q1(),Kt.lanes|=s,Ps|=s,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,fr=!0),e.memoizedState=s)}function v2(e,n){var s=It;It=s!==0&&4>s?s:4,e(!0);var l=$u.transition;$u.transition={};try{e(!1),n()}finally{It=s,$u.transition=l}}function G0(){return Gr().memoizedState}function w2(e,n,s){var l=us(e);if(s={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null},X0(e))Y0(n,s);else if(s=T0(e,n,s,l),s!==null){var f=rr();oi(s,e,l,f),K0(s,n,l)}}function y2(e,n,s){var l=us(e),f={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null};if(X0(e))Y0(n,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var w=n.lastRenderedState,x=d(w,s);if(f.hasEagerState=!0,f.eagerState=x,ai(x,w)){var C=n.interleaved;C===null?(f.next=f,Fh(n)):(f.next=C.next,C.next=f),n.interleaved=f;return}}catch{}finally{}s=T0(e,n,f,l),s!==null&&(f=rr(),oi(s,e,l,f),K0(s,n,l))}}function X0(e){var n=e.alternate;return e===Kt||n!==null&&n===Kt}function Y0(e,n){la=Zl=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function K0(e,n,s){if(s&4194240){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,xh(e,s)}}var Gl={readContext:Zr,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},_2={readContext:Zr,useCallback:function(e,n){return _i().memoizedState=[e,n===void 0?null:n],e},useContext:Zr,useEffect:md,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,Cl(4194308,4,U0.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Cl(4194308,4,e,n)},useInsertionEffect:function(e,n){return Cl(4,2,e,n)},useMemo:function(e,n){var s=_i();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var l=_i();return n=s!==void 0?s(n):n,l.memoizedState=l.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=w2.bind(null,Kt,e),[l.memoizedState,e]},useRef:function(e){var n=_i();return e={current:e},n.memoizedState=e},useState:gd,useDebugValue:Xh,useDeferredValue:function(e){return _i().memoizedState=e},useTransition:function(){var e=gd(!1),n=e[0];return e=v2.bind(null,e[1]),_i().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var l=Kt,f=_i();if(Vt){if(s===void 0)throw Error(be(407));s=s()}else{if(s=n(),Tn===null)throw Error(be(349));Ms&30||M0(l,n,s)}f.memoizedState=s;var d={value:s,getSnapshot:n};return f.queue=d,md(L0.bind(null,l,d,e),[e]),l.flags|=2048,Na(9,P0.bind(null,l,d,s,n),void 0,null),s},useId:function(){var e=_i(),n=Tn.identifierPrefix;if(Vt){var s=Li,l=Pi;s=(l&~(1<<32-si(l)-1)).toString(32)+s,n=":"+n+"R"+s,s=ba++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=m2++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},C2={readContext:Zr,useCallback:V0,useContext:Zr,useEffect:Gh,useImperativeHandle:H0,useInsertionEffect:j0,useLayoutEffect:z0,useMemo:W0,useReducer:Ju,useRef:F0,useState:function(){return Ju(Ta)},useDebugValue:Xh,useDeferredValue:function(e){var n=Gr();return Z0(n,Cn.memoizedState,e)},useTransition:function(){var e=Ju(Ta)[0],n=Gr().memoizedState;return[e,n]},useMutableSource:R0,useSyncExternalStore:k0,useId:G0,unstable_isNewReconciler:!1},E2={readContext:Zr,useCallback:V0,useContext:Zr,useEffect:Gh,useImperativeHandle:H0,useInsertionEffect:j0,useLayoutEffect:z0,useMemo:W0,useReducer:ec,useRef:F0,useState:function(){return ec(Ta)},useDebugValue:Xh,useDeferredValue:function(e){var n=Gr();return Cn===null?n.memoizedState=e:Z0(n,Cn.memoizedState,e)},useTransition:function(){var e=ec(Ta)[0],n=Gr().memoizedState;return[e,n]},useMutableSource:R0,useSyncExternalStore:k0,useId:G0,unstable_isNewReconciler:!1};function ni(e,n){if(e&&e.defaultProps){n=Qt({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function jc(e,n,s,l){n=e.memoizedState,s=s(l,n),s=s==null?n:Qt({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var du={isMounted:function(e){return(e=e._reactInternals)?Fs(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var l=rr(),f=us(e),d=Di(l,f);d.payload=n,s!=null&&(d.callback=s),n=as(e,d,f),n!==null&&(oi(n,e,f,l),yl(n,e,f))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var l=rr(),f=us(e),d=Di(l,f);d.tag=1,d.payload=n,s!=null&&(d.callback=s),n=as(e,d,f),n!==null&&(oi(n,e,f,l),yl(n,e,f))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=rr(),l=us(e),f=Di(s,l);f.tag=2,n!=null&&(f.callback=n),n=as(e,f,l),n!==null&&(oi(n,e,l,s),yl(n,e,l))}};function vd(e,n,s,l,f,d,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,w):n.prototype&&n.prototype.isPureReactComponent?!Ca(s,l)||!Ca(f,d):!0}function Q0(e,n,s){var l=!1,f=fs,d=n.contextType;return typeof d=="object"&&d!==null?d=Zr(d):(f=pr(n)?Rs:Wn.current,l=n.contextTypes,d=(l=l!=null)?wo(e,f):fs),n=new n(s,d),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=du,e.stateNode=n,n._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=f,e.__reactInternalMemoizedMaskedChildContext=d),n}function wd(e,n,s,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==e&&du.enqueueReplaceState(n,n.state,null)}function zc(e,n,s,l){var f=e.stateNode;f.props=s,f.state=e.memoizedState,f.refs={},jh(e);var d=n.contextType;typeof d=="object"&&d!==null?f.context=Zr(d):(d=pr(n)?Rs:Wn.current,f.context=wo(e,d)),f.state=e.memoizedState,d=n.getDerivedStateFromProps,typeof d=="function"&&(jc(e,n,d,s),f.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(n=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),n!==f.state&&du.enqueueReplaceState(f,f.state,null),Vl(e,s,f,l),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308)}function Eo(e,n){try{var s="",l=n;do s+=Qg(l),l=l.return;while(l);var f=s}catch(d){f=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:n,stack:f,digest:null}}function tc(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function Uc(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var A2=typeof WeakMap=="function"?WeakMap:Map;function q0(e,n,s){s=Di(-1,s),s.tag=3,s.payload={element:null};var l=n.value;return s.callback=function(){Yl||(Yl=!0,qc=l),Uc(e,n)},s}function $0(e,n,s){s=Di(-1,s),s.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var f=n.value;s.payload=function(){return l(f)},s.callback=function(){Uc(e,n)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(s.callback=function(){Uc(e,n),typeof l!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var w=n.stack;this.componentDidCatch(n.value,{componentStack:w!==null?w:""})}),s}function yd(e,n,s){var l=e.pingCache;if(l===null){l=e.pingCache=new A2;var f=new Set;l.set(n,f)}else f=l.get(n),f===void 0&&(f=new Set,l.set(n,f));f.has(s)||(f.add(s),e=B2.bind(null,e,n,s),n.then(e,e))}function _d(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Cd(e,n,s,l,f){return e.mode&1?(e.flags|=65536,e.lanes=f,e):(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=Di(-1,1),n.tag=2,as(s,n,1))),s.lanes|=1),e)}var x2=Ui.ReactCurrentOwner,fr=!1;function nr(e,n,s,l){n.child=e===null?b0(n,null,s,l):_o(n,e.child,s,l)}function Ed(e,n,s,l,f){s=s.render;var d=n.ref;return po(n,f),l=Wh(e,n,s,l,d,f),s=Zh(),e!==null&&!fr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~f,zi(e,n,f)):(Vt&&s&&kh(n),n.flags|=1,nr(e,n,l,f),n.child)}function Ad(e,n,s,l,f){if(e===null){var d=s.type;return typeof d=="function"&&!tf(d)&&d.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=d,J0(e,n,d,l,f)):(e=Sl(s.type,null,l,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!(e.lanes&f)){var w=d.memoizedProps;if(s=s.compare,s=s!==null?s:Ca,s(w,l)&&e.ref===n.ref)return zi(e,n,f)}return n.flags|=1,e=cs(d,l),e.ref=n.ref,e.return=n,n.child=e}function J0(e,n,s,l,f){if(e!==null){var d=e.memoizedProps;if(Ca(d,l)&&e.ref===n.ref)if(fr=!1,n.pendingProps=l=d,(e.lanes&f)!==0)e.flags&131072&&(fr=!0);else return n.lanes=e.lanes,zi(e,n,f)}return Hc(e,n,s,l,f)}function ep(e,n,s){var l=n.pendingProps,f=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(so,Ir),Ir|=s;else{if(!(s&1073741824))return e=d!==null?d.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Lt(so,Ir),Ir|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=d!==null?d.baseLanes:s,Lt(so,Ir),Ir|=l}else d!==null?(l=d.baseLanes|s,n.memoizedState=null):l=s,Lt(so,Ir),Ir|=l;return nr(e,n,f,s),n.child}function tp(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function Hc(e,n,s,l,f){var d=pr(s)?Rs:Wn.current;return d=wo(n,d),po(n,f),s=Wh(e,n,s,l,d,f),l=Zh(),e!==null&&!fr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~f,zi(e,n,f)):(Vt&&l&&kh(n),n.flags|=1,nr(e,n,s,f),n.child)}function xd(e,n,s,l,f){if(pr(s)){var d=!0;Fl(n)}else d=!1;if(po(n,f),n.stateNode===null)El(e,n),Q0(n,s,l),zc(n,s,l,f),l=!0;else if(e===null){var w=n.stateNode,x=n.memoizedProps;w.props=x;var C=w.context,v=s.contextType;typeof v=="object"&&v!==null?v=Zr(v):(v=pr(s)?Rs:Wn.current,v=wo(n,v));var S=s.getDerivedStateFromProps,I=typeof S=="function"||typeof w.getSnapshotBeforeUpdate=="function";I||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==l||C!==v)&&wd(n,w,l,v),$i=!1;var O=n.memoizedState;w.state=O,Vl(n,l,w,f),C=n.memoizedState,x!==l||O!==C||dr.current||$i?(typeof S=="function"&&(jc(n,s,S,l),C=n.memoizedState),(x=$i||vd(n,s,x,l,O,C,v))?(I||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(n.flags|=4194308)):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=C),w.props=l,w.state=C,w.context=v,l=x):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{w=n.stateNode,N0(e,n),x=n.memoizedProps,v=n.type===n.elementType?x:ni(n.type,x),w.props=v,I=n.pendingProps,O=w.context,C=s.contextType,typeof C=="object"&&C!==null?C=Zr(C):(C=pr(s)?Rs:Wn.current,C=wo(n,C));var z=s.getDerivedStateFromProps;(S=typeof z=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==I||O!==C)&&wd(n,w,l,C),$i=!1,O=n.memoizedState,w.state=O,Vl(n,l,w,f);var H=n.memoizedState;x!==I||O!==H||dr.current||$i?(typeof z=="function"&&(jc(n,s,z,l),H=n.memoizedState),(v=$i||vd(n,s,v,l,O,H,C)||!1)?(S||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(l,H,C),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(l,H,C)),typeof w.componentDidUpdate=="function"&&(n.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof w.componentDidUpdate!="function"||x===e.memoizedProps&&O===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&O===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=H),w.props=l,w.state=H,w.context=C,l=v):(typeof w.componentDidUpdate!="function"||x===e.memoizedProps&&O===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&O===e.memoizedState||(n.flags|=1024),l=!1)}return Vc(e,n,s,l,d,f)}function Vc(e,n,s,l,f,d){tp(e,n);var w=(n.flags&128)!==0;if(!l&&!w)return f&&ud(n,s,!1),zi(e,n,d);l=n.stateNode,x2.current=n;var x=w&&typeof s.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,e!==null&&w?(n.child=_o(n,e.child,null,d),n.child=_o(n,null,x,d)):nr(e,n,x,d),n.memoizedState=l.state,f&&ud(n,s,!0),n.child}function np(e){var n=e.stateNode;n.pendingContext?ld(e,n.pendingContext,n.pendingContext!==n.context):n.context&&ld(e,n.context,!1),zh(e,n.containerInfo)}function Sd(e,n,s,l,f){return yo(),Ph(f),n.flags|=256,nr(e,n,s,l),n.child}var Wc={dehydrated:null,treeContext:null,retryLane:0};function Zc(e){return{baseLanes:e,cachePool:null,transitions:null}}function rp(e,n,s){var l=n.pendingProps,f=Yt.current,d=!1,w=(n.flags&128)!==0,x;if((x=w)||(x=e!==null&&e.memoizedState===null?!1:(f&2)!==0),x?(d=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(f|=1),Lt(Yt,f&1),e===null)return Bc(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(w=l.children,e=l.fallback,d?(l=n.mode,d=n.child,w={mode:"hidden",children:w},!(l&1)&&d!==null?(d.childLanes=0,d.pendingProps=w):d=mu(w,l,0,null),e=Os(e,l,s,null),d.return=n,e.return=n,d.sibling=e,n.child=d,n.child.memoizedState=Zc(s),n.memoizedState=Wc,e):Yh(n,w));if(f=e.memoizedState,f!==null&&(x=f.dehydrated,x!==null))return S2(e,n,w,l,x,f,s);if(d){d=l.fallback,w=n.mode,f=e.child,x=f.sibling;var C={mode:"hidden",children:l.children};return!(w&1)&&n.child!==f?(l=n.child,l.childLanes=0,l.pendingProps=C,n.deletions=null):(l=cs(f,C),l.subtreeFlags=f.subtreeFlags&14680064),x!==null?d=cs(x,d):(d=Os(d,w,s,null),d.flags|=2),d.return=n,l.return=n,l.sibling=d,n.child=l,l=d,d=n.child,w=e.child.memoizedState,w=w===null?Zc(s):{baseLanes:w.baseLanes|s,cachePool:null,transitions:w.transitions},d.memoizedState=w,d.childLanes=e.childLanes&~s,n.memoizedState=Wc,l}return d=e.child,e=d.sibling,l=cs(d,{mode:"visible",children:l.children}),!(n.mode&1)&&(l.lanes=s),l.return=n,l.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=l,n.memoizedState=null,l}function Yh(e,n){return n=mu({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function ll(e,n,s,l){return l!==null&&Ph(l),_o(n,e.child,null,s),e=Yh(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function S2(e,n,s,l,f,d,w){if(s)return n.flags&256?(n.flags&=-257,l=tc(Error(be(422))),ll(e,n,w,l)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(d=l.fallback,f=n.mode,l=mu({mode:"visible",children:l.children},f,0,null),d=Os(d,f,w,null),d.flags|=2,l.return=n,d.return=n,l.sibling=d,n.child=l,n.mode&1&&_o(n,e.child,null,w),n.child.memoizedState=Zc(w),n.memoizedState=Wc,d);if(!(n.mode&1))return ll(e,n,w,null);if(f.data==="$!"){if(l=f.nextSibling&&f.nextSibling.dataset,l)var x=l.dgst;return l=x,d=Error(be(419)),l=tc(d,l,void 0),ll(e,n,w,l)}if(x=(w&e.childLanes)!==0,fr||x){if(l=Tn,l!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(l.suspendedLanes|w)?0:f,f!==0&&f!==d.retryLane&&(d.retryLane=f,ji(e,f),oi(l,e,f,-1))}return ef(),l=tc(Error(be(421))),ll(e,n,w,l)}return f.data==="$?"?(n.flags|=128,n.child=e.child,n=F2.bind(null,e),f._reactRetry=n,null):(e=d.treeContext,br=os(f.nextSibling),Tr=n,Vt=!0,ii=null,e!==null&&(Ur[Hr++]=Pi,Ur[Hr++]=Li,Ur[Hr++]=ks,Pi=e.id,Li=e.overflow,ks=n),n=Yh(n,l.children),n.flags|=4096,n)}function Id(e,n,s){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),Fc(e.return,n,s)}function nc(e,n,s,l,f){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:f}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=s,d.tailMode=f)}function ip(e,n,s){var l=n.pendingProps,f=l.revealOrder,d=l.tail;if(nr(e,n,l.children,s),l=Yt.current,l&2)l=l&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Id(e,s,n);else if(e.tag===19)Id(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Lt(Yt,l),!(n.mode&1))n.memoizedState=null;else switch(f){case"forwards":for(s=n.child,f=null;s!==null;)e=s.alternate,e!==null&&Wl(e)===null&&(f=s),s=s.sibling;s=f,s===null?(f=n.child,n.child=null):(f=s.sibling,s.sibling=null),nc(n,!1,f,s,d);break;case"backwards":for(s=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&Wl(e)===null){n.child=f;break}e=f.sibling,f.sibling=s,s=f,f=e}nc(n,!0,s,null,d);break;case"together":nc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function El(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function zi(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Ps|=n.lanes,!(s&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(be(153));if(n.child!==null){for(e=n.child,s=cs(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=cs(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function I2(e,n,s){switch(n.tag){case 3:np(n),yo();break;case 5:O0(n);break;case 1:pr(n.type)&&Fl(n);break;case 4:zh(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,f=n.memoizedProps.value;Lt(Ul,l._currentValue),l._currentValue=f;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(Lt(Yt,Yt.current&1),n.flags|=128,null):s&n.child.childLanes?rp(e,n,s):(Lt(Yt,Yt.current&1),e=zi(e,n,s),e!==null?e.sibling:null);Lt(Yt,Yt.current&1);break;case 19:if(l=(s&n.childLanes)!==0,e.flags&128){if(l)return ip(e,n,s);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Lt(Yt,Yt.current),l)break;return null;case 22:case 23:return n.lanes=0,ep(e,n,s)}return zi(e,n,s)}var sp,Gc,op,ap;sp=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Gc=function(){};op=function(e,n,s,l){var f=e.memoizedProps;if(f!==l){e=n.stateNode,bs(Ai.current);var d=null;switch(s){case"input":f=pc(e,f),l=pc(e,l),d=[];break;case"select":f=Qt({},f,{value:void 0}),l=Qt({},l,{value:void 0}),d=[];break;case"textarea":f=vc(e,f),l=vc(e,l),d=[];break;default:typeof f.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Dl)}yc(s,l);var w;s=null;for(v in f)if(!l.hasOwnProperty(v)&&f.hasOwnProperty(v)&&f[v]!=null)if(v==="style"){var x=f[v];for(w in x)x.hasOwnProperty(w)&&(s||(s={}),s[w]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(pa.hasOwnProperty(v)?d||(d=[]):(d=d||[]).push(v,null));for(v in l){var C=l[v];if(x=f!=null?f[v]:void 0,l.hasOwnProperty(v)&&C!==x&&(C!=null||x!=null))if(v==="style")if(x){for(w in x)!x.hasOwnProperty(w)||C&&C.hasOwnProperty(w)||(s||(s={}),s[w]="");for(w in C)C.hasOwnProperty(w)&&x[w]!==C[w]&&(s||(s={}),s[w]=C[w])}else s||(d||(d=[]),d.push(v,s)),s=C;else v==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,x=x?x.__html:void 0,C!=null&&x!==C&&(d=d||[]).push(v,C)):v==="children"?typeof C!="string"&&typeof C!="number"||(d=d||[]).push(v,""+C):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(pa.hasOwnProperty(v)?(C!=null&&v==="onScroll"&&jt("scroll",e),d||x===C||(d=[])):(d=d||[]).push(v,C))}s&&(d=d||[]).push("style",s);var v=d;(n.updateQueue=v)&&(n.flags|=4)}};ap=function(e,n,s,l){s!==l&&(n.flags|=4)};function Yo(e,n){if(!Vt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Hn(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(n)for(var f=e.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags&14680064,l|=f.flags&14680064,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=s,n}function b2(e,n,s){var l=n.pendingProps;switch(Mh(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(n),null;case 1:return pr(n.type)&&Bl(),Hn(n),null;case 3:return l=n.stateNode,Co(),Ut(dr),Ut(Wn),Hh(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(ol(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,ii!==null&&(eh(ii),ii=null))),Gc(e,n),Hn(n),null;case 5:Uh(n);var f=bs(Ia.current);if(s=n.type,e!==null&&n.stateNode!=null)op(e,n,s,l,f),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(be(166));return Hn(n),null}if(e=bs(Ai.current),ol(n)){l=n.stateNode,s=n.type;var d=n.memoizedProps;switch(l[Ci]=n,l[xa]=d,e=(n.mode&1)!==0,s){case"dialog":jt("cancel",l),jt("close",l);break;case"iframe":case"object":case"embed":jt("load",l);break;case"video":case"audio":for(f=0;f<na.length;f++)jt(na[f],l);break;case"source":jt("error",l);break;case"img":case"image":case"link":jt("error",l),jt("load",l);break;case"details":jt("toggle",l);break;case"input":Lf(l,d),jt("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!d.multiple},jt("invalid",l);break;case"textarea":Bf(l,d),jt("invalid",l)}yc(s,d),f=null;for(var w in d)if(d.hasOwnProperty(w)){var x=d[w];w==="children"?typeof x=="string"?l.textContent!==x&&(d.suppressHydrationWarning!==!0&&sl(l.textContent,x,e),f=["children",x]):typeof x=="number"&&l.textContent!==""+x&&(d.suppressHydrationWarning!==!0&&sl(l.textContent,x,e),f=["children",""+x]):pa.hasOwnProperty(w)&&x!=null&&w==="onScroll"&&jt("scroll",l)}switch(s){case"input":qa(l),Df(l,d,!0);break;case"textarea":qa(l),Ff(l);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(l.onclick=Dl)}l=f,n.updateQueue=l,l!==null&&(n.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=L1(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=w.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=w.createElement(s,{is:l.is}):(e=w.createElement(s),s==="select"&&(w=e,l.multiple?w.multiple=!0:l.size&&(w.size=l.size))):e=w.createElementNS(e,s),e[Ci]=n,e[xa]=l,sp(e,n,!1,!1),n.stateNode=e;e:{switch(w=_c(s,l),s){case"dialog":jt("cancel",e),jt("close",e),f=l;break;case"iframe":case"object":case"embed":jt("load",e),f=l;break;case"video":case"audio":for(f=0;f<na.length;f++)jt(na[f],e);f=l;break;case"source":jt("error",e),f=l;break;case"img":case"image":case"link":jt("error",e),jt("load",e),f=l;break;case"details":jt("toggle",e),f=l;break;case"input":Lf(e,l),f=pc(e,l),jt("invalid",e);break;case"option":f=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},f=Qt({},l,{value:void 0}),jt("invalid",e);break;case"textarea":Bf(e,l),f=vc(e,l),jt("invalid",e);break;default:f=l}yc(s,f),x=f;for(d in x)if(x.hasOwnProperty(d)){var C=x[d];d==="style"?F1(e,C):d==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&D1(e,C)):d==="children"?typeof C=="string"?(s!=="textarea"||C!=="")&&ga(e,C):typeof C=="number"&&ga(e,""+C):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(pa.hasOwnProperty(d)?C!=null&&d==="onScroll"&&jt("scroll",e):C!=null&&wh(e,d,C,w))}switch(s){case"input":qa(e),Df(e,l,!1);break;case"textarea":qa(e),Ff(e);break;case"option":l.value!=null&&e.setAttribute("value",""+hs(l.value));break;case"select":e.multiple=!!l.multiple,d=l.value,d!=null?uo(e,!!l.multiple,d,!1):l.defaultValue!=null&&uo(e,!!l.multiple,l.defaultValue,!0);break;default:typeof f.onClick=="function"&&(e.onclick=Dl)}switch(s){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Hn(n),null;case 6:if(e&&n.stateNode!=null)ap(e,n,e.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(be(166));if(s=bs(Ia.current),bs(Ai.current),ol(n)){if(l=n.stateNode,s=n.memoizedProps,l[Ci]=n,(d=l.nodeValue!==s)&&(e=Tr,e!==null))switch(e.tag){case 3:sl(l.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sl(l.nodeValue,s,(e.mode&1)!==0)}d&&(n.flags|=4)}else l=(s.nodeType===9?s:s.ownerDocument).createTextNode(l),l[Ci]=n,n.stateNode=l}return Hn(n),null;case 13:if(Ut(Yt),l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vt&&br!==null&&n.mode&1&&!(n.flags&128))S0(),yo(),n.flags|=98560,d=!1;else if(d=ol(n),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(be(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(be(317));d[Ci]=n}else yo(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Hn(n),d=!1}else ii!==null&&(eh(ii),ii=null),d=!0;if(!d)return n.flags&65536?n:null}return n.flags&128?(n.lanes=s,n):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(n.child.flags|=8192,n.mode&1&&(e===null||Yt.current&1?En===0&&(En=3):ef())),n.updateQueue!==null&&(n.flags|=4),Hn(n),null);case 4:return Co(),Gc(e,n),e===null&&Ea(n.stateNode.containerInfo),Hn(n),null;case 10:return Bh(n.type._context),Hn(n),null;case 17:return pr(n.type)&&Bl(),Hn(n),null;case 19:if(Ut(Yt),d=n.memoizedState,d===null)return Hn(n),null;if(l=(n.flags&128)!==0,w=d.rendering,w===null)if(l)Yo(d,!1);else{if(En!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(w=Wl(e),w!==null){for(n.flags|=128,Yo(d,!1),l=w.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=s,s=n.child;s!==null;)d=s,e=l,d.flags&=14680066,w=d.alternate,w===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=w.childLanes,d.lanes=w.lanes,d.child=w.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=w.memoizedProps,d.memoizedState=w.memoizedState,d.updateQueue=w.updateQueue,d.type=w.type,e=w.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Lt(Yt,Yt.current&1|2),n.child}e=e.sibling}d.tail!==null&&hn()>Ao&&(n.flags|=128,l=!0,Yo(d,!1),n.lanes=4194304)}else{if(!l)if(e=Wl(w),e!==null){if(n.flags|=128,l=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),Yo(d,!0),d.tail===null&&d.tailMode==="hidden"&&!w.alternate&&!Vt)return Hn(n),null}else 2*hn()-d.renderingStartTime>Ao&&s!==1073741824&&(n.flags|=128,l=!0,Yo(d,!1),n.lanes=4194304);d.isBackwards?(w.sibling=n.child,n.child=w):(s=d.last,s!==null?s.sibling=w:n.child=w,d.last=w)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=hn(),n.sibling=null,s=Yt.current,Lt(Yt,l?s&1|2:s&1),n):(Hn(n),null);case 22:case 23:return Jh(),l=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(n.flags|=8192),l&&n.mode&1?Ir&1073741824&&(Hn(n),n.subtreeFlags&6&&(n.flags|=8192)):Hn(n),null;case 24:return null;case 25:return null}throw Error(be(156,n.tag))}function T2(e,n){switch(Mh(n),n.tag){case 1:return pr(n.type)&&Bl(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Co(),Ut(dr),Ut(Wn),Hh(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return Uh(n),null;case 13:if(Ut(Yt),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(be(340));yo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ut(Yt),null;case 4:return Co(),null;case 10:return Bh(n.type._context),null;case 22:case 23:return Jh(),null;case 24:return null;default:return null}}var ul=!1,Vn=!1,N2=typeof WeakSet=="function"?WeakSet:Set,je=null;function io(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(l){en(e,n,l)}else s.current=null}function Xc(e,n,s){try{s()}catch(l){en(e,n,l)}}var bd=!1;function O2(e,n){if(Oc=Ml,e=f0(),Rh(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var w=0,x=-1,C=-1,v=0,S=0,I=e,O=null;t:for(;;){for(var z;I!==s||f!==0&&I.nodeType!==3||(x=w+f),I!==d||l!==0&&I.nodeType!==3||(C=w+l),I.nodeType===3&&(w+=I.nodeValue.length),(z=I.firstChild)!==null;)O=I,I=z;for(;;){if(I===e)break t;if(O===s&&++v===f&&(x=w),O===d&&++S===l&&(C=w),(z=I.nextSibling)!==null)break;I=O,O=I.parentNode}I=z}s=x===-1||C===-1?null:{start:x,end:C}}else s=null}s=s||{start:0,end:0}}else s=null;for(Rc={focusedElem:e,selectionRange:s},Ml=!1,je=n;je!==null;)if(n=je,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,je=e;else for(;je!==null;){n=je;try{var H=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(H!==null){var j=H.memoizedProps,ee=H.memoizedState,F=n.stateNode,D=F.getSnapshotBeforeUpdate(n.elementType===n.type?j:ni(n.type,j),ee);F.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var P=n.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(be(163))}}catch(V){en(n,n.return,V)}if(e=n.sibling,e!==null){e.return=n.return,je=e;break}je=n.return}return H=bd,bd=!1,H}function ua(e,n,s){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&e)===e){var d=f.destroy;f.destroy=void 0,d!==void 0&&Xc(n,s,d)}f=f.next}while(f!==l)}}function pu(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var l=s.create;s.destroy=l()}s=s.next}while(s!==n)}}function Yc(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function lp(e){var n=e.alternate;n!==null&&(e.alternate=null,lp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Ci],delete n[xa],delete n[Pc],delete n[f2],delete n[d2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function up(e){return e.tag===5||e.tag===3||e.tag===4}function Td(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||up(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kc(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Dl));else if(l!==4&&(e=e.child,e!==null))for(Kc(e,n,s),e=e.sibling;e!==null;)Kc(e,n,s),e=e.sibling}function Qc(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Qc(e,n,s),e=e.sibling;e!==null;)Qc(e,n,s),e=e.sibling}var Rn=null,ri=!1;function Qi(e,n,s){for(s=s.child;s!==null;)cp(e,n,s),s=s.sibling}function cp(e,n,s){if(Ei&&typeof Ei.onCommitFiberUnmount=="function")try{Ei.onCommitFiberUnmount(ou,s)}catch{}switch(s.tag){case 5:Vn||io(s,n);case 6:var l=Rn,f=ri;Rn=null,Qi(e,n,s),Rn=l,ri=f,Rn!==null&&(ri?(e=Rn,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Rn.removeChild(s.stateNode));break;case 18:Rn!==null&&(ri?(e=Rn,s=s.stateNode,e.nodeType===8?Ku(e.parentNode,s):e.nodeType===1&&Ku(e,s),ya(e)):Ku(Rn,s.stateNode));break;case 4:l=Rn,f=ri,Rn=s.stateNode.containerInfo,ri=!0,Qi(e,n,s),Rn=l,ri=f;break;case 0:case 11:case 14:case 15:if(!Vn&&(l=s.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){f=l=l.next;do{var d=f,w=d.destroy;d=d.tag,w!==void 0&&(d&2||d&4)&&Xc(s,n,w),f=f.next}while(f!==l)}Qi(e,n,s);break;case 1:if(!Vn&&(io(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=s.memoizedProps,l.state=s.memoizedState,l.componentWillUnmount()}catch(x){en(s,n,x)}Qi(e,n,s);break;case 21:Qi(e,n,s);break;case 22:s.mode&1?(Vn=(l=Vn)||s.memoizedState!==null,Qi(e,n,s),Vn=l):Qi(e,n,s);break;default:Qi(e,n,s)}}function Nd(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new N2),n.forEach(function(l){var f=j2.bind(null,e,l);s.has(l)||(s.add(l),l.then(f,f))})}}function ti(e,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var f=s[l];try{var d=e,w=n,x=w;e:for(;x!==null;){switch(x.tag){case 5:Rn=x.stateNode,ri=!1;break e;case 3:Rn=x.stateNode.containerInfo,ri=!0;break e;case 4:Rn=x.stateNode.containerInfo,ri=!0;break e}x=x.return}if(Rn===null)throw Error(be(160));cp(d,w,f),Rn=null,ri=!1;var C=f.alternate;C!==null&&(C.return=null),f.return=null}catch(v){en(f,n,v)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)hp(n,e),n=n.sibling}function hp(e,n){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ti(n,e),yi(e),l&4){try{ua(3,e,e.return),pu(3,e)}catch(j){en(e,e.return,j)}try{ua(5,e,e.return)}catch(j){en(e,e.return,j)}}break;case 1:ti(n,e),yi(e),l&512&&s!==null&&io(s,s.return);break;case 5:if(ti(n,e),yi(e),l&512&&s!==null&&io(s,s.return),e.flags&32){var f=e.stateNode;try{ga(f,"")}catch(j){en(e,e.return,j)}}if(l&4&&(f=e.stateNode,f!=null)){var d=e.memoizedProps,w=s!==null?s.memoizedProps:d,x=e.type,C=e.updateQueue;if(e.updateQueue=null,C!==null)try{x==="input"&&d.type==="radio"&&d.name!=null&&M1(f,d),_c(x,w);var v=_c(x,d);for(w=0;w<C.length;w+=2){var S=C[w],I=C[w+1];S==="style"?F1(f,I):S==="dangerouslySetInnerHTML"?D1(f,I):S==="children"?ga(f,I):wh(f,S,I,v)}switch(x){case"input":gc(f,d);break;case"textarea":P1(f,d);break;case"select":var O=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!d.multiple;var z=d.value;z!=null?uo(f,!!d.multiple,z,!1):O!==!!d.multiple&&(d.defaultValue!=null?uo(f,!!d.multiple,d.defaultValue,!0):uo(f,!!d.multiple,d.multiple?[]:"",!1))}f[xa]=d}catch(j){en(e,e.return,j)}}break;case 6:if(ti(n,e),yi(e),l&4){if(e.stateNode===null)throw Error(be(162));f=e.stateNode,d=e.memoizedProps;try{f.nodeValue=d}catch(j){en(e,e.return,j)}}break;case 3:if(ti(n,e),yi(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{ya(n.containerInfo)}catch(j){en(e,e.return,j)}break;case 4:ti(n,e),yi(e);break;case 13:ti(n,e),yi(e),f=e.child,f.flags&8192&&(d=f.memoizedState!==null,f.stateNode.isHidden=d,!d||f.alternate!==null&&f.alternate.memoizedState!==null||(qh=hn())),l&4&&Nd(e);break;case 22:if(S=s!==null&&s.memoizedState!==null,e.mode&1?(Vn=(v=Vn)||S,ti(n,e),Vn=v):ti(n,e),yi(e),l&8192){if(v=e.memoizedState!==null,(e.stateNode.isHidden=v)&&!S&&e.mode&1)for(je=e,S=e.child;S!==null;){for(I=je=S;je!==null;){switch(O=je,z=O.child,O.tag){case 0:case 11:case 14:case 15:ua(4,O,O.return);break;case 1:io(O,O.return);var H=O.stateNode;if(typeof H.componentWillUnmount=="function"){l=O,s=O.return;try{n=l,H.props=n.memoizedProps,H.state=n.memoizedState,H.componentWillUnmount()}catch(j){en(l,s,j)}}break;case 5:io(O,O.return);break;case 22:if(O.memoizedState!==null){Rd(I);continue}}z!==null?(z.return=O,je=z):Rd(I)}S=S.sibling}e:for(S=null,I=e;;){if(I.tag===5){if(S===null){S=I;try{f=I.stateNode,v?(d=f.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(x=I.stateNode,C=I.memoizedProps.style,w=C!=null&&C.hasOwnProperty("display")?C.display:null,x.style.display=B1("display",w))}catch(j){en(e,e.return,j)}}}else if(I.tag===6){if(S===null)try{I.stateNode.nodeValue=v?"":I.memoizedProps}catch(j){en(e,e.return,j)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===e)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===e)break e;for(;I.sibling===null;){if(I.return===null||I.return===e)break e;S===I&&(S=null),I=I.return}S===I&&(S=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:ti(n,e),yi(e),l&4&&Nd(e);break;case 21:break;default:ti(n,e),yi(e)}}function yi(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(up(s)){var l=s;break e}s=s.return}throw Error(be(160))}switch(l.tag){case 5:var f=l.stateNode;l.flags&32&&(ga(f,""),l.flags&=-33);var d=Td(e);Qc(e,d,f);break;case 3:case 4:var w=l.stateNode.containerInfo,x=Td(e);Kc(e,x,w);break;default:throw Error(be(161))}}catch(C){en(e,e.return,C)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function R2(e,n,s){je=e,fp(e)}function fp(e,n,s){for(var l=(e.mode&1)!==0;je!==null;){var f=je,d=f.child;if(f.tag===22&&l){var w=f.memoizedState!==null||ul;if(!w){var x=f.alternate,C=x!==null&&x.memoizedState!==null||Vn;x=ul;var v=Vn;if(ul=w,(Vn=C)&&!v)for(je=f;je!==null;)w=je,C=w.child,w.tag===22&&w.memoizedState!==null?kd(f):C!==null?(C.return=w,je=C):kd(f);for(;d!==null;)je=d,fp(d),d=d.sibling;je=f,ul=x,Vn=v}Od(e)}else f.subtreeFlags&8772&&d!==null?(d.return=f,je=d):Od(e)}}function Od(e){for(;je!==null;){var n=je;if(n.flags&8772){var s=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Vn||pu(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!Vn)if(s===null)l.componentDidMount();else{var f=n.elementType===n.type?s.memoizedProps:ni(n.type,s.memoizedProps);l.componentDidUpdate(f,s.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var d=n.updateQueue;d!==null&&pd(n,d,l);break;case 3:var w=n.updateQueue;if(w!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}pd(n,w,s)}break;case 5:var x=n.stateNode;if(s===null&&n.flags&4){s=x;var C=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&s.focus();break;case"img":C.src&&(s.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var v=n.alternate;if(v!==null){var S=v.memoizedState;if(S!==null){var I=S.dehydrated;I!==null&&ya(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(be(163))}Vn||n.flags&512&&Yc(n)}catch(O){en(n,n.return,O)}}if(n===e){je=null;break}if(s=n.sibling,s!==null){s.return=n.return,je=s;break}je=n.return}}function Rd(e){for(;je!==null;){var n=je;if(n===e){je=null;break}var s=n.sibling;if(s!==null){s.return=n.return,je=s;break}je=n.return}}function kd(e){for(;je!==null;){var n=je;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{pu(4,n)}catch(C){en(n,s,C)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var f=n.return;try{l.componentDidMount()}catch(C){en(n,f,C)}}var d=n.return;try{Yc(n)}catch(C){en(n,d,C)}break;case 5:var w=n.return;try{Yc(n)}catch(C){en(n,w,C)}}}catch(C){en(n,n.return,C)}if(n===e){je=null;break}var x=n.sibling;if(x!==null){x.return=n.return,je=x;break}je=n.return}}var k2=Math.ceil,Xl=Ui.ReactCurrentDispatcher,Kh=Ui.ReactCurrentOwner,Wr=Ui.ReactCurrentBatchConfig,wt=0,Tn=null,vn=null,kn=0,Ir=0,so=ps(0),En=0,Oa=null,Ps=0,gu=0,Qh=0,ca=null,hr=null,qh=0,Ao=1/0,ki=null,Yl=!1,qc=null,ls=null,cl=!1,ns=null,Kl=0,ha=0,$c=null,Al=-1,xl=0;function rr(){return wt&6?hn():Al!==-1?Al:Al=hn()}function us(e){return e.mode&1?wt&2&&kn!==0?kn&-kn:g2.transition!==null?(xl===0&&(xl=Q1()),xl):(e=It,e!==0||(e=window.event,e=e===void 0?16:r0(e.type)),e):1}function oi(e,n,s,l){if(50<ha)throw ha=0,$c=null,Error(be(185));Pa(e,s,l),(!(wt&2)||e!==Tn)&&(e===Tn&&(!(wt&2)&&(gu|=s),En===4&&es(e,kn)),gr(e,l),s===1&&wt===0&&!(n.mode&1)&&(Ao=hn()+500,hu&&gs()))}function gr(e,n){var s=e.callbackNode;gm(e,n);var l=kl(e,e===Tn?kn:0);if(l===0)s!==null&&Uf(s),e.callbackNode=null,e.callbackPriority=0;else if(n=l&-l,e.callbackPriority!==n){if(s!=null&&Uf(s),n===1)e.tag===0?p2(Md.bind(null,e)):E0(Md.bind(null,e)),c2(function(){!(wt&6)&&gs()}),s=null;else{switch(q1(l)){case 1:s=Ah;break;case 4:s=Y1;break;case 16:s=Rl;break;case 536870912:s=K1;break;default:s=Rl}s=_p(s,dp.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function dp(e,n){if(Al=-1,xl=0,wt&6)throw Error(be(327));var s=e.callbackNode;if(go()&&e.callbackNode!==s)return null;var l=kl(e,e===Tn?kn:0);if(l===0)return null;if(l&30||l&e.expiredLanes||n)n=Ql(e,l);else{n=l;var f=wt;wt|=2;var d=gp();(Tn!==e||kn!==n)&&(ki=null,Ao=hn()+500,Ns(e,n));do try{L2();break}catch(x){pp(e,x)}while(!0);Dh(),Xl.current=d,wt=f,vn!==null?n=0:(Tn=null,kn=0,n=En)}if(n!==0){if(n===2&&(f=Sc(e),f!==0&&(l=f,n=Jc(e,f))),n===1)throw s=Oa,Ns(e,0),es(e,l),gr(e,hn()),s;if(n===6)es(e,l);else{if(f=e.current.alternate,!(l&30)&&!M2(f)&&(n=Ql(e,l),n===2&&(d=Sc(e),d!==0&&(l=d,n=Jc(e,d))),n===1))throw s=Oa,Ns(e,0),es(e,l),gr(e,hn()),s;switch(e.finishedWork=f,e.finishedLanes=l,n){case 0:case 1:throw Error(be(345));case 2:xs(e,hr,ki);break;case 3:if(es(e,l),(l&130023424)===l&&(n=qh+500-hn(),10<n)){if(kl(e,0)!==0)break;if(f=e.suspendedLanes,(f&l)!==l){rr(),e.pingedLanes|=e.suspendedLanes&f;break}e.timeoutHandle=Mc(xs.bind(null,e,hr,ki),n);break}xs(e,hr,ki);break;case 4:if(es(e,l),(l&4194240)===l)break;for(n=e.eventTimes,f=-1;0<l;){var w=31-si(l);d=1<<w,w=n[w],w>f&&(f=w),l&=~d}if(l=f,l=hn()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*k2(l/1960))-l,10<l){e.timeoutHandle=Mc(xs.bind(null,e,hr,ki),l);break}xs(e,hr,ki);break;case 5:xs(e,hr,ki);break;default:throw Error(be(329))}}}return gr(e,hn()),e.callbackNode===s?dp.bind(null,e):null}function Jc(e,n){var s=ca;return e.current.memoizedState.isDehydrated&&(Ns(e,n).flags|=256),e=Ql(e,n),e!==2&&(n=hr,hr=s,n!==null&&eh(n)),e}function eh(e){hr===null?hr=e:hr.push.apply(hr,e)}function M2(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var l=0;l<s.length;l++){var f=s[l],d=f.getSnapshot;f=f.value;try{if(!ai(d(),f))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function es(e,n){for(n&=~Qh,n&=~gu,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-si(n),l=1<<s;e[s]=-1,n&=~l}}function Md(e){if(wt&6)throw Error(be(327));go();var n=kl(e,0);if(!(n&1))return gr(e,hn()),null;var s=Ql(e,n);if(e.tag!==0&&s===2){var l=Sc(e);l!==0&&(n=l,s=Jc(e,l))}if(s===1)throw s=Oa,Ns(e,0),es(e,n),gr(e,hn()),s;if(s===6)throw Error(be(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,xs(e,hr,ki),gr(e,hn()),null}function $h(e,n){var s=wt;wt|=1;try{return e(n)}finally{wt=s,wt===0&&(Ao=hn()+500,hu&&gs())}}function Ls(e){ns!==null&&ns.tag===0&&!(wt&6)&&go();var n=wt;wt|=1;var s=Wr.transition,l=It;try{if(Wr.transition=null,It=1,e)return e()}finally{It=l,Wr.transition=s,wt=n,!(wt&6)&&gs()}}function Jh(){Ir=so.current,Ut(so)}function Ns(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,u2(s)),vn!==null)for(s=vn.return;s!==null;){var l=s;switch(Mh(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Bl();break;case 3:Co(),Ut(dr),Ut(Wn),Hh();break;case 5:Uh(l);break;case 4:Co();break;case 13:Ut(Yt);break;case 19:Ut(Yt);break;case 10:Bh(l.type._context);break;case 22:case 23:Jh()}s=s.return}if(Tn=e,vn=e=cs(e.current,null),kn=Ir=n,En=0,Oa=null,Qh=gu=Ps=0,hr=ca=null,Is!==null){for(n=0;n<Is.length;n++)if(s=Is[n],l=s.interleaved,l!==null){s.interleaved=null;var f=l.next,d=s.pending;if(d!==null){var w=d.next;d.next=f,l.next=w}s.pending=l}Is=null}return e}function pp(e,n){do{var s=vn;try{if(Dh(),_l.current=Gl,Zl){for(var l=Kt.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}Zl=!1}if(Ms=0,bn=Cn=Kt=null,la=!1,ba=0,Kh.current=null,s===null||s.return===null){En=1,Oa=n,vn=null;break}e:{var d=e,w=s.return,x=s,C=n;if(n=kn,x.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var v=C,S=x,I=S.tag;if(!(S.mode&1)&&(I===0||I===11||I===15)){var O=S.alternate;O?(S.updateQueue=O.updateQueue,S.memoizedState=O.memoizedState,S.lanes=O.lanes):(S.updateQueue=null,S.memoizedState=null)}var z=_d(w);if(z!==null){z.flags&=-257,Cd(z,w,x,d,n),z.mode&1&&yd(d,v,n),n=z,C=v;var H=n.updateQueue;if(H===null){var j=new Set;j.add(C),n.updateQueue=j}else H.add(C);break e}else{if(!(n&1)){yd(d,v,n),ef();break e}C=Error(be(426))}}else if(Vt&&x.mode&1){var ee=_d(w);if(ee!==null){!(ee.flags&65536)&&(ee.flags|=256),Cd(ee,w,x,d,n),Ph(Eo(C,x));break e}}d=C=Eo(C,x),En!==4&&(En=2),ca===null?ca=[d]:ca.push(d),d=w;do{switch(d.tag){case 3:d.flags|=65536,n&=-n,d.lanes|=n;var F=q0(d,C,n);dd(d,F);break e;case 1:x=C;var D=d.type,P=d.stateNode;if(!(d.flags&128)&&(typeof D.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(ls===null||!ls.has(P)))){d.flags|=65536,n&=-n,d.lanes|=n;var V=$0(d,x,n);dd(d,V);break e}}d=d.return}while(d!==null)}vp(s)}catch(re){n=re,vn===s&&s!==null&&(vn=s=s.return);continue}break}while(!0)}function gp(){var e=Xl.current;return Xl.current=Gl,e===null?Gl:e}function ef(){(En===0||En===3||En===2)&&(En=4),Tn===null||!(Ps&268435455)&&!(gu&268435455)||es(Tn,kn)}function Ql(e,n){var s=wt;wt|=2;var l=gp();(Tn!==e||kn!==n)&&(ki=null,Ns(e,n));do try{P2();break}catch(f){pp(e,f)}while(!0);if(Dh(),wt=s,Xl.current=l,vn!==null)throw Error(be(261));return Tn=null,kn=0,En}function P2(){for(;vn!==null;)mp(vn)}function L2(){for(;vn!==null&&!om();)mp(vn)}function mp(e){var n=yp(e.alternate,e,Ir);e.memoizedProps=e.pendingProps,n===null?vp(e):vn=n,Kh.current=null}function vp(e){var n=e;do{var s=n.alternate;if(e=n.return,n.flags&32768){if(s=T2(s,n),s!==null){s.flags&=32767,vn=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{En=6,vn=null;return}}else if(s=b2(s,n,Ir),s!==null){vn=s;return}if(n=n.sibling,n!==null){vn=n;return}vn=n=e}while(n!==null);En===0&&(En=5)}function xs(e,n,s){var l=It,f=Wr.transition;try{Wr.transition=null,It=1,D2(e,n,s,l)}finally{Wr.transition=f,It=l}return null}function D2(e,n,s,l){do go();while(ns!==null);if(wt&6)throw Error(be(327));s=e.finishedWork;var f=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(be(177));e.callbackNode=null,e.callbackPriority=0;var d=s.lanes|s.childLanes;if(mm(e,d),e===Tn&&(vn=Tn=null,kn=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||cl||(cl=!0,_p(Rl,function(){return go(),null})),d=(s.flags&15990)!==0,s.subtreeFlags&15990||d){d=Wr.transition,Wr.transition=null;var w=It;It=1;var x=wt;wt|=4,Kh.current=null,O2(e,s),hp(s,e),n2(Rc),Ml=!!Oc,Rc=Oc=null,e.current=s,R2(s),am(),wt=x,It=w,Wr.transition=d}else e.current=s;if(cl&&(cl=!1,ns=e,Kl=f),d=e.pendingLanes,d===0&&(ls=null),cm(s.stateNode),gr(e,hn()),n!==null)for(l=e.onRecoverableError,s=0;s<n.length;s++)f=n[s],l(f.value,{componentStack:f.stack,digest:f.digest});if(Yl)throw Yl=!1,e=qc,qc=null,e;return Kl&1&&e.tag!==0&&go(),d=e.pendingLanes,d&1?e===$c?ha++:(ha=0,$c=e):ha=0,gs(),null}function go(){if(ns!==null){var e=q1(Kl),n=Wr.transition,s=It;try{if(Wr.transition=null,It=16>e?16:e,ns===null)var l=!1;else{if(e=ns,ns=null,Kl=0,wt&6)throw Error(be(331));var f=wt;for(wt|=4,je=e.current;je!==null;){var d=je,w=d.child;if(je.flags&16){var x=d.deletions;if(x!==null){for(var C=0;C<x.length;C++){var v=x[C];for(je=v;je!==null;){var S=je;switch(S.tag){case 0:case 11:case 15:ua(8,S,d)}var I=S.child;if(I!==null)I.return=S,je=I;else for(;je!==null;){S=je;var O=S.sibling,z=S.return;if(lp(S),S===v){je=null;break}if(O!==null){O.return=z,je=O;break}je=z}}}var H=d.alternate;if(H!==null){var j=H.child;if(j!==null){H.child=null;do{var ee=j.sibling;j.sibling=null,j=ee}while(j!==null)}}je=d}}if(d.subtreeFlags&2064&&w!==null)w.return=d,je=w;else e:for(;je!==null;){if(d=je,d.flags&2048)switch(d.tag){case 0:case 11:case 15:ua(9,d,d.return)}var F=d.sibling;if(F!==null){F.return=d.return,je=F;break e}je=d.return}}var D=e.current;for(je=D;je!==null;){w=je;var P=w.child;if(w.subtreeFlags&2064&&P!==null)P.return=w,je=P;else e:for(w=D;je!==null;){if(x=je,x.flags&2048)try{switch(x.tag){case 0:case 11:case 15:pu(9,x)}}catch(re){en(x,x.return,re)}if(x===w){je=null;break e}var V=x.sibling;if(V!==null){V.return=x.return,je=V;break e}je=x.return}}if(wt=f,gs(),Ei&&typeof Ei.onPostCommitFiberRoot=="function")try{Ei.onPostCommitFiberRoot(ou,e)}catch{}l=!0}return l}finally{It=s,Wr.transition=n}}return!1}function Pd(e,n,s){n=Eo(s,n),n=q0(e,n,1),e=as(e,n,1),n=rr(),e!==null&&(Pa(e,1,n),gr(e,n))}function en(e,n,s){if(e.tag===3)Pd(e,e,s);else for(;n!==null;){if(n.tag===3){Pd(n,e,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ls===null||!ls.has(l))){e=Eo(s,e),e=$0(n,e,1),n=as(n,e,1),e=rr(),n!==null&&(Pa(n,1,e),gr(n,e));break}}n=n.return}}function B2(e,n,s){var l=e.pingCache;l!==null&&l.delete(n),n=rr(),e.pingedLanes|=e.suspendedLanes&s,Tn===e&&(kn&s)===s&&(En===4||En===3&&(kn&130023424)===kn&&500>hn()-qh?Ns(e,0):Qh|=s),gr(e,n)}function wp(e,n){n===0&&(e.mode&1?(n=el,el<<=1,!(el&130023424)&&(el=4194304)):n=1);var s=rr();e=ji(e,n),e!==null&&(Pa(e,n,s),gr(e,s))}function F2(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),wp(e,s)}function j2(e,n){var s=0;switch(e.tag){case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(s=f.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(be(314))}l!==null&&l.delete(n),wp(e,s)}var yp;yp=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||dr.current)fr=!0;else{if(!(e.lanes&s)&&!(n.flags&128))return fr=!1,I2(e,n,s);fr=!!(e.flags&131072)}else fr=!1,Vt&&n.flags&1048576&&A0(n,zl,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;El(e,n),e=n.pendingProps;var f=wo(n,Wn.current);po(n,s),f=Wh(null,n,l,e,f,s);var d=Zh();return n.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,pr(l)?(d=!0,Fl(n)):d=!1,n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,jh(n),f.updater=du,n.stateNode=f,f._reactInternals=n,zc(n,l,e,s),n=Vc(null,n,l,!0,d,s)):(n.tag=0,Vt&&d&&kh(n),nr(null,n,f,s),n=n.child),n;case 16:l=n.elementType;e:{switch(El(e,n),e=n.pendingProps,f=l._init,l=f(l._payload),n.type=l,f=n.tag=U2(l),e=ni(l,e),f){case 0:n=Hc(null,n,l,e,s);break e;case 1:n=xd(null,n,l,e,s);break e;case 11:n=Ed(null,n,l,e,s);break e;case 14:n=Ad(null,n,l,ni(l.type,e),s);break e}throw Error(be(306,l,""))}return n;case 0:return l=n.type,f=n.pendingProps,f=n.elementType===l?f:ni(l,f),Hc(e,n,l,f,s);case 1:return l=n.type,f=n.pendingProps,f=n.elementType===l?f:ni(l,f),xd(e,n,l,f,s);case 3:e:{if(np(n),e===null)throw Error(be(387));l=n.pendingProps,d=n.memoizedState,f=d.element,N0(e,n),Vl(n,l,null,s);var w=n.memoizedState;if(l=w.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){f=Eo(Error(be(423)),n),n=Sd(e,n,l,s,f);break e}else if(l!==f){f=Eo(Error(be(424)),n),n=Sd(e,n,l,s,f);break e}else for(br=os(n.stateNode.containerInfo.firstChild),Tr=n,Vt=!0,ii=null,s=b0(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(yo(),l===f){n=zi(e,n,s);break e}nr(e,n,l,s)}n=n.child}return n;case 5:return O0(n),e===null&&Bc(n),l=n.type,f=n.pendingProps,d=e!==null?e.memoizedProps:null,w=f.children,kc(l,f)?w=null:d!==null&&kc(l,d)&&(n.flags|=32),tp(e,n),nr(e,n,w,s),n.child;case 6:return e===null&&Bc(n),null;case 13:return rp(e,n,s);case 4:return zh(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=_o(n,null,l,s):nr(e,n,l,s),n.child;case 11:return l=n.type,f=n.pendingProps,f=n.elementType===l?f:ni(l,f),Ed(e,n,l,f,s);case 7:return nr(e,n,n.pendingProps,s),n.child;case 8:return nr(e,n,n.pendingProps.children,s),n.child;case 12:return nr(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(l=n.type._context,f=n.pendingProps,d=n.memoizedProps,w=f.value,Lt(Ul,l._currentValue),l._currentValue=w,d!==null)if(ai(d.value,w)){if(d.children===f.children&&!dr.current){n=zi(e,n,s);break e}}else for(d=n.child,d!==null&&(d.return=n);d!==null;){var x=d.dependencies;if(x!==null){w=d.child;for(var C=x.firstContext;C!==null;){if(C.context===l){if(d.tag===1){C=Di(-1,s&-s),C.tag=2;var v=d.updateQueue;if(v!==null){v=v.shared;var S=v.pending;S===null?C.next=C:(C.next=S.next,S.next=C),v.pending=C}}d.lanes|=s,C=d.alternate,C!==null&&(C.lanes|=s),Fc(d.return,s,n),x.lanes|=s;break}C=C.next}}else if(d.tag===10)w=d.type===n.type?null:d.child;else if(d.tag===18){if(w=d.return,w===null)throw Error(be(341));w.lanes|=s,x=w.alternate,x!==null&&(x.lanes|=s),Fc(w,s,n),w=d.sibling}else w=d.child;if(w!==null)w.return=d;else for(w=d;w!==null;){if(w===n){w=null;break}if(d=w.sibling,d!==null){d.return=w.return,w=d;break}w=w.return}d=w}nr(e,n,f.children,s),n=n.child}return n;case 9:return f=n.type,l=n.pendingProps.children,po(n,s),f=Zr(f),l=l(f),n.flags|=1,nr(e,n,l,s),n.child;case 14:return l=n.type,f=ni(l,n.pendingProps),f=ni(l.type,f),Ad(e,n,l,f,s);case 15:return J0(e,n,n.type,n.pendingProps,s);case 17:return l=n.type,f=n.pendingProps,f=n.elementType===l?f:ni(l,f),El(e,n),n.tag=1,pr(l)?(e=!0,Fl(n)):e=!1,po(n,s),Q0(n,l,f),zc(n,l,f,s),Vc(null,n,l,!0,e,s);case 19:return ip(e,n,s);case 22:return ep(e,n,s)}throw Error(be(156,n.tag))};function _p(e,n){return X1(e,n)}function z2(e,n,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(e,n,s,l){return new z2(e,n,s,l)}function tf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function U2(e){if(typeof e=="function")return tf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_h)return 11;if(e===Ch)return 14}return 2}function cs(e,n){var s=e.alternate;return s===null?(s=Vr(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Sl(e,n,s,l,f,d){var w=2;if(l=e,typeof e=="function")tf(e)&&(w=1);else if(typeof e=="string")w=5;else e:switch(e){case Ks:return Os(s.children,f,d,n);case yh:w=8,f|=8;break;case cc:return e=Vr(12,s,n,f|2),e.elementType=cc,e.lanes=d,e;case hc:return e=Vr(13,s,n,f),e.elementType=hc,e.lanes=d,e;case fc:return e=Vr(19,s,n,f),e.elementType=fc,e.lanes=d,e;case O1:return mu(s,f,d,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T1:w=10;break e;case N1:w=9;break e;case _h:w=11;break e;case Ch:w=14;break e;case qi:w=16,l=null;break e}throw Error(be(130,e==null?e:typeof e,""))}return n=Vr(w,s,n,f),n.elementType=e,n.type=l,n.lanes=d,n}function Os(e,n,s,l){return e=Vr(7,e,l,n),e.lanes=s,e}function mu(e,n,s,l){return e=Vr(22,e,l,n),e.elementType=O1,e.lanes=s,e.stateNode={isHidden:!1},e}function rc(e,n,s){return e=Vr(6,e,null,n),e.lanes=s,e}function ic(e,n,s){return n=Vr(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function H2(e,n,s,l,f){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fu(0),this.expirationTimes=Fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fu(0),this.identifierPrefix=l,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function nf(e,n,s,l,f,d,w,x,C){return e=new H2(e,n,s,x,C),n===1?(n=1,d===!0&&(n|=8)):n=0,d=Vr(3,null,null,n),e.current=d,d.stateNode=e,d.memoizedState={element:l,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},jh(d),e}function V2(e,n,s){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ys,key:l==null?null:""+l,children:e,containerInfo:n,implementation:s}}function Cp(e){if(!e)return fs;e=e._reactInternals;e:{if(Fs(e)!==e||e.tag!==1)throw Error(be(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(pr(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(be(171))}if(e.tag===1){var s=e.type;if(pr(s))return C0(e,s,n)}return n}function Ep(e,n,s,l,f,d,w,x,C){return e=nf(s,l,!0,e,f,d,w,x,C),e.context=Cp(null),s=e.current,l=rr(),f=us(s),d=Di(l,f),d.callback=n??null,as(s,d,f),e.current.lanes=f,Pa(e,f,l),gr(e,l),e}function vu(e,n,s,l){var f=n.current,d=rr(),w=us(f);return s=Cp(s),n.context===null?n.context=s:n.pendingContext=s,n=Di(d,w),n.payload={element:e},l=l===void 0?null:l,l!==null&&(n.callback=l),e=as(f,n,w),e!==null&&(oi(e,f,w,d),yl(e,f,w)),w}function ql(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ld(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function rf(e,n){Ld(e,n),(e=e.alternate)&&Ld(e,n)}function W2(){return null}var Ap=typeof reportError=="function"?reportError:function(e){console.error(e)};function sf(e){this._internalRoot=e}wu.prototype.render=sf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(be(409));vu(e,n,null,null)};wu.prototype.unmount=sf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ls(function(){vu(null,e,null,null)}),n[Fi]=null}};function wu(e){this._internalRoot=e}wu.prototype.unstable_scheduleHydration=function(e){if(e){var n=e0();e={blockedOn:null,target:e,priority:n};for(var s=0;s<Ji.length&&n!==0&&n<Ji[s].priority;s++);Ji.splice(s,0,e),s===0&&n0(e)}};function of(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Dd(){}function Z2(e,n,s,l,f){if(f){if(typeof l=="function"){var d=l;l=function(){var v=ql(w);d.call(v)}}var w=Ep(n,l,e,0,null,!1,!1,"",Dd);return e._reactRootContainer=w,e[Fi]=w.current,Ea(e.nodeType===8?e.parentNode:e),Ls(),w}for(;f=e.lastChild;)e.removeChild(f);if(typeof l=="function"){var x=l;l=function(){var v=ql(C);x.call(v)}}var C=nf(e,0,!1,null,null,!1,!1,"",Dd);return e._reactRootContainer=C,e[Fi]=C.current,Ea(e.nodeType===8?e.parentNode:e),Ls(function(){vu(n,C,s,l)}),C}function _u(e,n,s,l,f){var d=s._reactRootContainer;if(d){var w=d;if(typeof f=="function"){var x=f;f=function(){var C=ql(w);x.call(C)}}vu(n,w,e,f)}else w=Z2(s,n,e,f,l);return ql(w)}$1=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=ta(n.pendingLanes);s!==0&&(xh(n,s|1),gr(n,hn()),!(wt&6)&&(Ao=hn()+500,gs()))}break;case 13:Ls(function(){var l=ji(e,1);if(l!==null){var f=rr();oi(l,e,1,f)}}),rf(e,1)}};Sh=function(e){if(e.tag===13){var n=ji(e,134217728);if(n!==null){var s=rr();oi(n,e,134217728,s)}rf(e,134217728)}};J1=function(e){if(e.tag===13){var n=us(e),s=ji(e,n);if(s!==null){var l=rr();oi(s,e,n,l)}rf(e,n)}};e0=function(){return It};t0=function(e,n){var s=It;try{return It=e,n()}finally{It=s}};Ec=function(e,n,s){switch(n){case"input":if(gc(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==e&&l.form===e.form){var f=cu(l);if(!f)throw Error(be(90));k1(l),gc(l,f)}}}break;case"textarea":P1(e,s);break;case"select":n=s.value,n!=null&&uo(e,!!s.multiple,n,!1)}};U1=$h;H1=Ls;var G2={usingClientEntryPoint:!1,Events:[Da,Js,cu,j1,z1,$h]},Ko={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X2={bundleType:Ko.bundleType,version:Ko.version,rendererPackageName:Ko.rendererPackageName,rendererConfig:Ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Z1(e),e===null?null:e.stateNode},findFiberByHostInstance:Ko.findFiberByHostInstance||W2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hl.isDisabled&&hl.supportsFiber)try{ou=hl.inject(X2),Ei=hl}catch{}}Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G2;Or.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!of(n))throw Error(be(200));return V2(e,n,null,s)};Or.createRoot=function(e,n){if(!of(e))throw Error(be(299));var s=!1,l="",f=Ap;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),n=nf(e,1,!1,null,null,s,!1,l,f),e[Fi]=n.current,Ea(e.nodeType===8?e.parentNode:e),new sf(n)};Or.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(be(188)):(e=Object.keys(e).join(","),Error(be(268,e)));return e=Z1(n),e=e===null?null:e.stateNode,e};Or.flushSync=function(e){return Ls(e)};Or.hydrate=function(e,n,s){if(!yu(n))throw Error(be(200));return _u(null,e,n,!0,s)};Or.hydrateRoot=function(e,n,s){if(!of(e))throw Error(be(405));var l=s!=null&&s.hydratedSources||null,f=!1,d="",w=Ap;if(s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(w=s.onRecoverableError)),n=Ep(n,null,e,1,s??null,f,!1,d,w),e[Fi]=n.current,Ea(e),l)for(e=0;e<l.length;e++)s=l[e],f=s._getVersion,f=f(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,f]:n.mutableSourceEagerHydrationData.push(s,f);return new wu(n)};Or.render=function(e,n,s){if(!yu(n))throw Error(be(200));return _u(null,e,n,!1,s)};Or.unmountComponentAtNode=function(e){if(!yu(e))throw Error(be(40));return e._reactRootContainer?(Ls(function(){_u(null,null,e,!1,function(){e._reactRootContainer=null,e[Fi]=null})}),!0):!1};Or.unstable_batchedUpdates=$h;Or.unstable_renderSubtreeIntoContainer=function(e,n,s,l){if(!yu(s))throw Error(be(200));if(e==null||e._reactInternals===void 0)throw Error(be(38));return _u(e,n,s,!1,l)};Or.version="18.3.1-next-f1338f8080-20240426";function xp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xp)}catch(e){console.error(e)}}xp(),x1.exports=Or;var Y2=x1.exports,Bd=Y2;lc.createRoot=Bd.createRoot,lc.hydrateRoot=Bd.hydrateRoot;var th={exports:{}};/*! mobile-drag-drop 3.0.0-rc.0 | Copyright (c) 2022 Tim Ruffles | MIT License */(function(e,n){(function(s,l){l(n)})(ru,function(s){var l="dnd-poly-",f=["none","copy","copyLink","copyMove","link","linkMove","move","all"],d=["none","copy","move","link"];function w(){var J=!1;try{var ne=Object.defineProperty({},"passive",{get:function(){J=!0}});window.addEventListener("test",null,ne)}catch{}return J}var x=w();function C(J){return J&&J.tagName}function v(J,ne,Y){document.addEventListener(J,ne,!!x&&{passive:Y})}function S(J,ne){document.removeEventListener(J,ne)}function I(J,ne,Y,ye){ye===void 0&&(ye=!1);var de=x?{passive:!0,capture:ye}:ye;return J.addEventListener(ne,Y,de),{off:function(){J.removeEventListener(ne,Y,de)}}}function O(J){return J.length===0?0:J.reduce(function(ne,Y){return Y+ne},0)/J.length}function z(J,ne){for(var Y=0;Y<J.changedTouches.length;Y++)if(J.changedTouches[Y].identifier===ne)return!0;return!1}function H(J,ne,Y){for(var ye=[],de=[],te=0;te<ne.touches.length;te++){var pe=ne.touches[te];ye.push(pe[J+"X"]),de.push(pe[J+"Y"])}Y.x=O(ye),Y.y=O(de)}var j=["","-webkit-"];function ee(J,pe,Y,ye,de){var te=pe.x,pe=pe.y;ye&&(te+=ye.x,pe+=ye.y),(de=de===void 0||de)&&(te-=parseInt(J.offsetWidth,10)/2,pe-=parseInt(J.offsetHeight,10)/2);for(var ce="translate3d("+te+"px,"+pe+"px, 0)",Ee=0;Ee<j.length;Ee++){var Ne=j[Ee]+"transform";J.style[Ne]=ce+" "+Y[Ee]}}var F=(Object.defineProperty(D.prototype,"dropEffect",{get:function(){return this.t},set:function(J){this.i.mode!==0&&-1<f.indexOf(J)&&(this.t=J)},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"types",{get:function(){if(this.i.mode!==0)return Object.freeze(this.i.types)},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"effectAllowed",{get:function(){return this.i.effectAllowed},set:function(J){this.i.mode===2&&-1<f.indexOf(J)&&(this.i.effectAllowed=J)},enumerable:!1,configurable:!0}),D.prototype.setData=function(J,ne){if(this.i.mode===2){if(-1<J.indexOf(" "))throw new Error("illegal arg: type contains space");this.i.data[J]=ne,this.i.types.indexOf(J)===-1&&this.i.types.push(J)}},D.prototype.getData=function(J){if(this.i.mode===1||this.i.mode===2)return this.i.data[J]||""},D.prototype.clearData=function(J){this.i.mode===2&&(J&&this.i.data[J]?(delete this.i.data[J],-1<(J=this.i.types.indexOf(J))&&this.i.types.splice(J,1)):(this.i.data={},this.i.types=[]))},D.prototype.setDragImage=function(J,ne,Y){this.i.mode===2&&this.h(J,ne,Y)},D);function D(J,ne){this.i=J,this.h=ne,this.t=d[0]}function P(J,ne){return J?J===f[0]?d[0]:J.indexOf(f[1])===0||J===f[7]?d[1]:J.indexOf(f[4])===0?d[3]:J===f[6]?d[2]:d[1]:ne.nodeType===3&&ne.tagName==="A"?d[3]:d[1]}function V(J,ne,Y,ye,de,te,pe){return pe===void 0&&(pe=null),de=function(ce,Ee,Ne,He,Ae,Me,ge){pe===void 0&&(ge=null);var vt=Y.changedTouches[0],He=new Event(J,{bubbles:!0,cancelable:He});return He.dataTransfer=Me,He.relatedTarget=ge,He.screenX=vt.screenX,He.screenY=vt.screenY,He.clientX=vt.clientX,He.clientY=vt.clientY,He.pageX=vt.pageX,He.pageY=vt.pageY,ce=ce.getBoundingClientRect(),He.offsetX=He.clientX-ce.left,He.offsetY=He.clientY-ce.top,He}(ne,0,0,te=te===void 0||te,document.defaultView,de,pe),de=!ne.dispatchEvent(de),ye.mode=0,de}function re(J,ne){if(!J||J===f[7])return ne;if(ne===d[1]){if(J.indexOf(d[1])===0)return d[1]}else if(ne===d[3]){if(J.indexOf(d[3])===0||-1<J.indexOf("Link"))return d[3]}else if(ne===d[2]&&(J.indexOf(d[2])===0||-1<J.indexOf("Move")))return d[2];return d[0]}var $=(W.prototype.o=function(){var J=this;this.u=1,this.l=d[0],this.v={data:{},effectAllowed:void 0,mode:3,types:[]},this.p={x:null,y:null},this.g={x:null,y:null};var ne=this.m;if(this.I=new F(this.v,function(te,pe,ce){ne=te,typeof pe!="number"&&typeof ce!="number"||(J.j={x:pe||0,y:ce||0})}),this.v.mode=2,this.I.dropEffect=d[0],V("dragstart",this.m,this.k,this.v,this.I))return this.u=3,this.C(),!1;H("page",this.k,this.g);var Y,ye,de=this.S.dragImageSetup(ne);return this.A=(Y=de,j.map(function(te){return te=Y.style[te+"transform"],te&&te!=="none"?te.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,""):""})),de.style.position="absolute",de.style.left="0px",de.style.top="0px",de.style.zIndex="999999",de.classList.add("dnd-poly-drag-image"),de.classList.add("dnd-poly-icon"),this.O=de,this.j||(this.S.dragImageOffset?this.j={x:this.S.dragImageOffset.x,y:this.S.dragImageOffset.y}:this.S.dragImageCenterOnTouch?(ye=getComputedStyle(ne),this.j={x:0-parseInt(ye.marginLeft,10),y:0-parseInt(ye.marginTop,10)}):(de=ne.getBoundingClientRect(),ye=getComputedStyle(ne),this.j={x:de.left-this.M.clientX-parseInt(ye.marginLeft,10)+de.width/2,y:de.top-this.M.clientY-parseInt(ye.marginTop,10)+de.height/2})),ee(this.O,this.g,this.A,this.j,this.S.dragImageCenterOnTouch),document.body.appendChild(this.O),this.D=window.setInterval(function(){J.F||(J.F=!0,J.N(),J.F=!1)},this.S.iterationInterval),!0},W.prototype.C=function(){this.D&&(clearInterval(this.D),this.D=null),S("touchmove",this.P),S("touchend",this.T),S("touchcancel",this.T),this.O&&(this.O.parentNode.removeChild(this.O),this.O=null),this.L(this.S,this.k,this.u)},W.prototype._=function(J){var ne=this;if(z(J,this.M.identifier)!==!1){if(this.k=J,this.u===0){var Y=void 0;if(this.S.dragStartConditionOverride)try{Y=this.S.dragStartConditionOverride(J)}catch{Y=!1}else Y=J.touches.length===1;return Y?void(this.o()===!0&&(this.H.preventDefault(),J.preventDefault())):void this.C()}if(J.preventDefault(),H("client",J,this.p),H("page",J,this.g),this.S.dragImageTranslateOverride)try{var ye=!1;if(this.S.dragImageTranslateOverride(J,{x:this.p.x,y:this.p.y},this.V,function(de,te){ne.O&&(ye=!0,ne.p.x+=de,ne.p.y+=te,ne.g.x+=de,ne.g.y+=te,ee(ne.O,ne.g,ne.A,ne.j,ne.S.dragImageCenterOnTouch))}),ye)return}catch{}ee(this.O,this.g,this.A,this.j,this.S.dragImageCenterOnTouch)}},W.prototype.X=function(J){if(z(J,this.M.identifier)!==!1){if(this.S.dragImageTranslateOverride)try{this.S.dragImageTranslateOverride(void 0,void 0,void 0,function(){})}catch{}this.u!==0?(J.preventDefault(),this.u=J.type==="touchcancel"?3:2):this.C()}},W.prototype.N=function(){var J=this,ne=this.l;this.v.mode=3,this.I.dropEffect=d[0];var Y,ye,de,te,pe,ce=V("drag",this.m,this.k,this.v,this.I);if(ce&&(this.l=d[0]),ce||this.u===2||this.u===3)return this.Y(this.u)?(te=this.m,Y=this.O,ye=this.A,Ne=function(){J.q()},void((pe=getComputedStyle(te)).visibility!=="hidden"&&pe.display!=="none"?(Y.classList.add("dnd-poly-snapback"),de=getComputedStyle(Y),ce=parseFloat(de.transitionDuration),isNaN(ce)||ce===0?Ne():((te={x:(Ee=te.getBoundingClientRect()).left,y:Ee.top}).x+=document.body.scrollLeft||document.documentElement.scrollLeft,te.y+=document.body.scrollTop||document.documentElement.scrollTop,te.x-=parseInt(pe.marginLeft,10),te.y-=parseInt(pe.marginTop,10),Ee=parseFloat(de.transitionDelay),Ee=Math.round(1e3*(ce+Ee)),ee(Y,te,ye,void 0,!1),setTimeout(Ne,Ee))):Ne())):void this.q();var Ee=this.S.elementFromPoint(this.p.x,this.p.y),Ne=this.B;Ee!==this.V&&Ee!==this.B&&(this.V=Ee,this.B!==null&&(this.v.mode=3,this.I.dropEffect=d[0],V("dragexit",this.B,this.k,this.v,this.I,!1)),this.V===null?this.B=this.V:(this.v.mode=3,this.I.dropEffect=P(this.v.effectAllowed,this.m),V("dragenter",this.V,this.k,this.v,this.I)?(this.B=this.V,this.l=re(this.I.effectAllowed,this.I.dropEffect)):this.V!==document.body&&(this.B=document.body))),Ne!==this.B&&C(Ne)&&(this.v.mode=3,this.I.dropEffect=d[0],V("dragleave",Ne,this.k,this.v,this.I,!1,this.B)),C(this.B)&&(this.v.mode=3,this.I.dropEffect=P(this.v.effectAllowed,this.m),V("dragover",this.B,this.k,this.v,this.I)===!1?this.l=d[0]:this.l=re(this.I.effectAllowed,this.I.dropEffect)),ne!==this.l&&this.O.classList.remove(l+ne),ne=l+this.l,this.O.classList.add(ne)},W.prototype.Y=function(J){return J=this.l===d[0]||this.B===null||J===3,J?C(this.B)&&(this.v.mode=3,this.I.dropEffect=d[0],V("dragleave",this.B,this.k,this.v,this.I,!1)):C(this.B)&&(this.v.mode=1,this.I.dropEffect=this.l,V("drop",this.B,this.k,this.v,this.I)===!0?this.l=this.I.dropEffect:this.l=d[0]),J},W.prototype.q=function(){this.v.mode=3,this.I.dropEffect=this.l,V("dragend",this.m,this.k,this.v,this.I,!1),this.u=2,this.C()},W);function W(J,ne,Y,ye){this.H=J,this.S=ne,this.m=Y,this.L=ye,this.u=0,this.V=null,this.B=null,this.k=J,this.M=J.changedTouches[0],this.P=this._.bind(this),this.T=this.X.bind(this),v("touchmove",this.P,!1),v("touchend",this.T,!1),v("touchcancel",this.T,!1)}var Z,X={iterationInterval:150,tryFindDraggableTarget:function(J){for(var ne=0,Y=J.composedPath();ne<Y.length;ne++){var ye=Y[ne];do if(ye.draggable!==!1&&(ye.draggable===!0||ye.getAttribute&&ye.getAttribute("draggable")==="true"))return ye;while((ye=ye.parentNode)&&ye!==document.body)}},dragImageSetup:function(J){var ne=J.cloneNode(!0);return function Y(ye,de){if(ye.nodeType===1){for(var te,pe,ce=getComputedStyle(ye),Ee=0;Ee<ce.length;Ee++){var Ne=ce[Ee];de.style.setProperty(Ne,ce.getPropertyValue(Ne),ce.getPropertyPriority(Ne))}de.style.pointerEvents="none",de.removeAttribute("id"),de.removeAttribute("class"),de.removeAttribute("draggable"),de.nodeName==="CANVAS"&&(te=de,pe=(pe=ye).getContext("2d").getImageData(0,0,pe.width,pe.height),te.getContext("2d").putImageData(pe,0,0))}if(ye.hasChildNodes())for(Ee=0;Ee<ye.childNodes.length;Ee++)Y(ye.childNodes[Ee],de.childNodes[Ee]);(function Ze(Ae){if(Ae instanceof HTMLElement&&(Ae.style.pointerEvents="none"),Ae.children&&Ae.children.length)for(var Me=0;Me<Ae.children.length;Me++)Ze(Ae.children[Me]);if(Ae.shadowRoot&&Ae.shadowRoot.children.length)for(Me=0;Me<Ae.shadowRoot.children.length;Me++)Ze(Ae.shadowRoot.children[Me])})(de)}(J,ne),ne},elementFromPoint:function(J,ne){var Y=document.elementFromPoint(J,ne);if(Y){for(;Y.shadowRoot;){var ye=Y.shadowRoot.elementFromPoint(J,ne);if(ye===null||ye===Y)break;Y=ye}return Y}}};function he(J){if(!Z){var ne=X.tryFindDraggableTarget(J);if(ne)try{Z=new $(J,X,ne,fe)}catch(Y){throw fe(X,J,3),Y}}}function ue(J){function ne(Ee){de.off(),te.off(),pe.off(),ce.off(),Y&&Y.dispatchEvent(new CustomEvent("dnd-poly-dragstart-cancel",{bubbles:!0,cancelable:!0})),clearTimeout(ye)}var Y=J.target;Y&&Y.dispatchEvent(new CustomEvent("dnd-poly-dragstart-pending",{bubbles:!0,cancelable:!0}));var ye=window.setTimeout(function(){de.off(),te.off(),pe.off(),ce.off(),he(J)},X.holdToDrag),de=I(Y,"touchend",ne),te=I(Y,"touchcancel",ne),pe=I(Y,"touchmove",ne),ce=I(window,"scroll",ne,!0)}function fe(J,ne,Y){if(Y===0&&J.defaultActionOverride)try{J.defaultActionOverride(ne),ne.defaultPrevented}catch{}Z=null}s.polyfill=function(J){if(J&&Object.keys(J).forEach(function(Y){X[Y]=J[Y]}),!X.forceApply&&(ne=(ne=!!window.chrome||/chrome/i.test(navigator.userAgent),{dragEvents:"ondragstart"in document.documentElement,draggable:"draggable"in document.documentElement,userAgentSupportingNativeDnD:!(/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||ne&&"ontouchstart"in document.documentElement)}),ne.userAgentSupportingNativeDnD&&ne.draggable&&ne.dragEvents))return!1;var ne;return X.holdToDrag?v("touchstart",ue,!1):v("touchstart",he,!1),!0},s.supportsPassiveEventListener=w,Object.defineProperty(s,"G",{value:!0})})})(th,th.exports);var K2=th.exports,nh={exports:{}};(function(e,n){(function(s,l){l(n)})(ru,function(s){function l(X){return X===document.body||X===document.documentElement}function f(X,he){var ue;if(l(X))ue=he===0?X.clientLeft:X.clientTop;else{var fe=X.getBoundingClientRect();ue=he===0?fe.left:fe.top}return ue}function d(X,he){var ue;return l(X)?ue=he===0?window.innerWidth:window.innerHeight:ue=he===0?X.clientWidth:X.clientHeight,ue}function w(X,he,ue){var fe=he===0?"scrollLeft":"scrollTop",J=l(X);if(arguments.length===2)return J?document.body[fe]||document.documentElement[fe]:X[fe];J?(document.documentElement[fe]+=ue,document.body[fe]+=ue):X[fe]+=ue}function x(X){var he=getComputedStyle(X);return X.scrollHeight>X.clientHeight&&(he.overflowY==="scroll"||he.overflowY==="auto")||X.scrollWidth>X.clientWidth&&(he.overflowX==="scroll"||he.overflowX==="auto")}function C(X){do{if(!X)return;if(x(X))return X;if(X===document.documentElement)return null}while(X=X.parentNode);return null}function v(X,he,ue){return X<ue?-1:he-X<ue?1:0}function S(X,he,ue,fe){return X===-1?Math.abs(he-fe):X===1?Math.abs(ue-he-fe):0}function I(X,he,ue){var fe=X===0?ue.scrollX:ue.scrollY;if(he===1){var J=X===0?ue.scrollWidth-ue.width:ue.scrollHeight-ue.height;return fe>=J}else if(he===-1)return fe<=0;return!0}var O={threshold:75,velocityFn:function(X,he){var ue=X/he,fe=ue*ue*ue;return fe*he}},z={horizontal:0,vertical:0},H={x:0,y:0},j,ee,F,D,P;function V(X,he,ue,fe){ee=he,P=fe,F!==ue&&(F=ue,D=C(F));var J=W(ee,D,O.threshold,z,H);J?re():j&&(window.cancelAnimationFrame(j),j=null)}function re(){j||(j=window.requestAnimationFrame($))}function $(){var X=0,he=0,ue=l(D);z.horizontal!==0&&(X=Math.round(O.velocityFn(H.x,O.threshold)*z.horizontal),w(D,0,X)),z.vertical!==0&&(he=Math.round(O.velocityFn(H.y,O.threshold)*z.vertical),w(D,1,he)),ue?P(X,he):P(0,0),j=null,W(ee,D,O.threshold,z,H)&&re()}function W(X,he,ue,fe,J){if(!X||!he)return!1;var ne={x:f(he,0),y:f(he,1),width:d(he,0),height:d(he,1),scrollX:w(he,0),scrollY:w(he,1),scrollWidth:he.scrollWidth,scrollHeight:he.scrollHeight},Y={x:X.x-ne.x,y:X.y-ne.y};return fe.horizontal=v(Y.x,ne.width,ue),fe.vertical=v(Y.y,ne.height,ue),fe.horizontal&&I(0,fe.horizontal,ne)?fe.horizontal=0:fe.horizontal&&(J.x=S(fe.horizontal,Y.x,ne.width,ue)),fe.vertical&&I(1,fe.vertical,ne)?fe.vertical=0:fe.vertical&&(J.y=S(fe.vertical,Y.y,ne.height,ue)),!!(fe.horizontal||fe.vertical)}var Z=V;s.scrollBehaviourDragImageTranslateOverride=Z,Object.defineProperty(s,"__esModule",{value:!0})})})(nh,nh.exports);var Q2=nh.exports;const q2=""+new URL("compass-DjuYXV7z.png",import.meta.url).href,$2=""+new URL("layer-tgRGCNyO.png",import.meta.url).href,J2=""+new URL("menu-CTekbRYg.png",import.meta.url).href,ev=""+new URL("route-oCgy4FtE.png",import.meta.url).href,tv=""+new URL("settings-DL-iSASc.png",import.meta.url).href,nv=""+new URL("zoom-BsLudKLj.png",import.meta.url).href;function rv(e,n){const s=K.useRef(n);K.useEffect(function(){n!==s.current&&e.attributionControl!=null&&(s.current!=null&&e.attributionControl.removeAttribution(s.current),n!=null&&e.attributionControl.addAttribution(n)),s.current=n},[e,n])}const iv=1;function sv(e){return Object.freeze({__version:iv,map:e})}function Sp(e,n){return Object.freeze({...e,...n})}const Ip=K.createContext(null),bp=Ip.Provider;function Cu(){const e=K.useContext(Ip);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Tp(e){function n(s,l){const{instance:f,context:d}=e(s).current;return K.useImperativeHandle(l,()=>f),s.children==null?null:Ht.createElement(bp,{value:d},s.children)}return K.forwardRef(n)}function Np(e){function n(s,l){const{instance:f}=e(s).current;return K.useImperativeHandle(l,()=>f),null}return K.forwardRef(n)}function ov(e){return function(s){const l=Cu(),f=e(s,l),{instance:d}=f.current,w=K.useRef(s.position),{position:x}=s;return K.useEffect(function(){return d.addTo(l.map),function(){d.remove()}},[l.map,d]),K.useEffect(function(){x!=null&&x!==w.current&&(d.setPosition(x),w.current=x)},[d,x]),f}}function Op(e,n){const s=K.useRef();K.useEffect(function(){return n!=null&&e.instance.on(n),s.current=n,function(){s.current!=null&&e.instance.off(s.current),s.current=null}},[e,n])}function af(e,n){const s=e.pane??n.pane;return s?{...e,pane:s}:e}var rh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(s,l){l(n)})(ru,function(s){var l="1.9.4";function f(i){var c,g,_,A;for(g=1,_=arguments.length;g<_;g++){A=arguments[g];for(c in A)i[c]=A[c]}return i}var d=Object.create||function(){function i(){}return function(c){return i.prototype=c,new i}}();function w(i,c){var g=Array.prototype.slice;if(i.bind)return i.bind.apply(i,g.call(arguments,1));var _=g.call(arguments,2);return function(){return i.apply(c,_.length?_.concat(g.call(arguments)):arguments)}}var x=0;function C(i){return"_leaflet_id"in i||(i._leaflet_id=++x),i._leaflet_id}function v(i,c,g){var _,A,M,G;return G=function(){_=!1,A&&(M.apply(g,A),A=!1)},M=function(){_?A=arguments:(i.apply(g,arguments),setTimeout(G,c),_=!0)},M}function S(i,c,g){var _=c[1],A=c[0],M=_-A;return i===_&&g?i:((i-A)%M+M)%M+A}function I(){return!1}function O(i,c){if(c===!1)return i;var g=Math.pow(10,c===void 0?6:c);return Math.round(i*g)/g}function z(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function H(i){return z(i).split(/\s+/)}function j(i,c){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?d(i.options):{});for(var g in c)i.options[g]=c[g];return i.options}function ee(i,c,g){var _=[];for(var A in i)_.push(encodeURIComponent(g?A.toUpperCase():A)+"="+encodeURIComponent(i[A]));return(!c||c.indexOf("?")===-1?"?":"&")+_.join("&")}var F=/\{ *([\w_ -]+) *\}/g;function D(i,c){return i.replace(F,function(g,_){var A=c[_];if(A===void 0)throw new Error("No value provided for variable "+g);return typeof A=="function"&&(A=A(c)),A})}var P=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function V(i,c){for(var g=0;g<i.length;g++)if(i[g]===c)return g;return-1}var re="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var W=0;function Z(i){var c=+new Date,g=Math.max(0,16-(c-W));return W=c+g,window.setTimeout(i,g)}var X=window.requestAnimationFrame||$("RequestAnimationFrame")||Z,he=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function ue(i,c,g){if(g&&X===Z)i.call(c);else return X.call(window,w(i,c))}function fe(i){i&&he.call(window,i)}var J={__proto__:null,extend:f,create:d,bind:w,get lastId(){return x},stamp:C,throttle:v,wrapNum:S,falseFn:I,formatNum:O,trim:z,splitWords:H,setOptions:j,getParamString:ee,template:D,isArray:P,indexOf:V,emptyImageUrl:re,requestFn:X,cancelFn:he,requestAnimFrame:ue,cancelAnimFrame:fe};function ne(){}ne.extend=function(i){var c=function(){j(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=c.__super__=this.prototype,_=d(g);_.constructor=c,c.prototype=_;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(c[A]=this[A]);return i.statics&&f(c,i.statics),i.includes&&(Y(i.includes),f.apply(null,[_].concat(i.includes))),f(_,i),delete _.statics,delete _.includes,_.options&&(_.options=g.options?d(g.options):{},f(_.options,i.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var M=0,G=_._initHooks.length;M<G;M++)_._initHooks[M].call(this)}},c},ne.include=function(i){var c=this.prototype.options;return f(this.prototype,i),i.options&&(this.prototype.options=c,this.mergeOptions(i.options)),this},ne.mergeOptions=function(i){return f(this.prototype.options,i),this},ne.addInitHook=function(i){var c=Array.prototype.slice.call(arguments,1),g=typeof i=="function"?i:function(){this[i].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function Y(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=P(i)?i:[i];for(var c=0;c<i.length;c++)i[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ye={on:function(i,c,g){if(typeof i=="object")for(var _ in i)this._on(_,i[_],c);else{i=H(i);for(var A=0,M=i.length;A<M;A++)this._on(i[A],c,g)}return this},off:function(i,c,g){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var _ in i)this._off(_,i[_],c);else{i=H(i);for(var A=arguments.length===1,M=0,G=i.length;M<G;M++)A?this._off(i[M]):this._off(i[M],c,g)}return this},_on:function(i,c,g,_){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(i,c,g)===!1){g===this&&(g=void 0);var A={fn:c,ctx:g};_&&(A.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(A)}},_off:function(i,c,g){var _,A,M;if(this._events&&(_=this._events[i],!!_)){if(arguments.length===1){if(this._firingCount)for(A=0,M=_.length;A<M;A++)_[A].fn=I;delete this._events[i];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var G=this._listens(i,c,g);if(G!==!1){var se=_[G];this._firingCount&&(se.fn=I,this._events[i]=_=_.slice()),_.splice(G,1)}}},fire:function(i,c,g){if(!this.listens(i,g))return this;var _=f({},c,{type:i,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var A=this._events[i];if(A){this._firingCount=this._firingCount+1||1;for(var M=0,G=A.length;M<G;M++){var se=A[M],le=se.fn;se.once&&this.off(i,le,se.ctx),le.call(se.ctx||this,_)}this._firingCount--}}return g&&this._propagateEvent(_),this},listens:function(i,c,g,_){typeof i!="string"&&console.warn('"string" type argument expected');var A=c;typeof c!="function"&&(_=!!c,A=void 0,g=void 0);var M=this._events&&this._events[i];if(M&&M.length&&this._listens(i,A,g)!==!1)return!0;if(_){for(var G in this._eventParents)if(this._eventParents[G].listens(i,c,g,_))return!0}return!1},_listens:function(i,c,g){if(!this._events)return!1;var _=this._events[i]||[];if(!c)return!!_.length;g===this&&(g=void 0);for(var A=0,M=_.length;A<M;A++)if(_[A].fn===c&&_[A].ctx===g)return A;return!1},once:function(i,c,g){if(typeof i=="object")for(var _ in i)this._on(_,i[_],c,!0);else{i=H(i);for(var A=0,M=i.length;A<M;A++)this._on(i[A],c,g,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[C(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[C(i)],this},_propagateEvent:function(i){for(var c in this._eventParents)this._eventParents[c].fire(i.type,f({layer:i.target,propagatedFrom:i.target},i),!0)}};ye.addEventListener=ye.on,ye.removeEventListener=ye.clearAllEventListeners=ye.off,ye.addOneTimeEventListener=ye.once,ye.fireEvent=ye.fire,ye.hasEventListeners=ye.listens;var de=ne.extend(ye);function te(i,c,g){this.x=g?Math.round(i):i,this.y=g?Math.round(c):c}var pe=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};te.prototype={clone:function(){return new te(this.x,this.y)},add:function(i){return this.clone()._add(ce(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(ce(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new te(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new te(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pe(this.x),this.y=pe(this.y),this},distanceTo:function(i){i=ce(i);var c=i.x-this.x,g=i.y-this.y;return Math.sqrt(c*c+g*g)},equals:function(i){return i=ce(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=ce(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+O(this.x)+", "+O(this.y)+")"}};function ce(i,c,g){return i instanceof te?i:P(i)?new te(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new te(i.x,i.y):new te(i,c,g)}function Ee(i,c){if(i)for(var g=c?[i,c]:i,_=0,A=g.length;_<A;_++)this.extend(g[_])}Ee.prototype={extend:function(i){var c,g;if(!i)return this;if(i instanceof te||typeof i[0]=="number"||"x"in i)c=g=ce(i);else if(i=Ne(i),c=i.min,g=i.max,!c||!g)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=g.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(i){return ce((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return ce(this.min.x,this.max.y)},getTopRight:function(){return ce(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var c,g;return typeof i[0]=="number"||i instanceof te?i=ce(i):i=Ne(i),i instanceof Ee?(c=i.min,g=i.max):c=g=i,c.x>=this.min.x&&g.x<=this.max.x&&c.y>=this.min.y&&g.y<=this.max.y},intersects:function(i){i=Ne(i);var c=this.min,g=this.max,_=i.min,A=i.max,M=A.x>=c.x&&_.x<=g.x,G=A.y>=c.y&&_.y<=g.y;return M&&G},overlaps:function(i){i=Ne(i);var c=this.min,g=this.max,_=i.min,A=i.max,M=A.x>c.x&&_.x<g.x,G=A.y>c.y&&_.y<g.y;return M&&G},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var c=this.min,g=this.max,_=Math.abs(c.x-g.x)*i,A=Math.abs(c.y-g.y)*i;return Ne(ce(c.x-_,c.y-A),ce(g.x+_,g.y+A))},equals:function(i){return i?(i=Ne(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function Ne(i,c){return!i||i instanceof Ee?i:new Ee(i,c)}function Ze(i,c){if(i)for(var g=c?[i,c]:i,_=0,A=g.length;_<A;_++)this.extend(g[_])}Ze.prototype={extend:function(i){var c=this._southWest,g=this._northEast,_,A;if(i instanceof Me)_=i,A=i;else if(i instanceof Ze){if(_=i._southWest,A=i._northEast,!_||!A)return this}else return i?this.extend(ge(i)||Ae(i)):this;return!c&&!g?(this._southWest=new Me(_.lat,_.lng),this._northEast=new Me(A.lat,A.lng)):(c.lat=Math.min(_.lat,c.lat),c.lng=Math.min(_.lng,c.lng),g.lat=Math.max(A.lat,g.lat),g.lng=Math.max(A.lng,g.lng)),this},pad:function(i){var c=this._southWest,g=this._northEast,_=Math.abs(c.lat-g.lat)*i,A=Math.abs(c.lng-g.lng)*i;return new Ze(new Me(c.lat-_,c.lng-A),new Me(g.lat+_,g.lng+A))},getCenter:function(){return new Me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Me(this.getNorth(),this.getWest())},getSouthEast:function(){return new Me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Me||"lat"in i?i=ge(i):i=Ae(i);var c=this._southWest,g=this._northEast,_,A;return i instanceof Ze?(_=i.getSouthWest(),A=i.getNorthEast()):_=A=i,_.lat>=c.lat&&A.lat<=g.lat&&_.lng>=c.lng&&A.lng<=g.lng},intersects:function(i){i=Ae(i);var c=this._southWest,g=this._northEast,_=i.getSouthWest(),A=i.getNorthEast(),M=A.lat>=c.lat&&_.lat<=g.lat,G=A.lng>=c.lng&&_.lng<=g.lng;return M&&G},overlaps:function(i){i=Ae(i);var c=this._southWest,g=this._northEast,_=i.getSouthWest(),A=i.getNorthEast(),M=A.lat>c.lat&&_.lat<g.lat,G=A.lng>c.lng&&_.lng<g.lng;return M&&G},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,c){return i?(i=Ae(i),this._southWest.equals(i.getSouthWest(),c)&&this._northEast.equals(i.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ae(i,c){return i instanceof Ze?i:new Ze(i,c)}function Me(i,c,g){if(isNaN(i)||isNaN(c))throw new Error("Invalid LatLng object: ("+i+", "+c+")");this.lat=+i,this.lng=+c,g!==void 0&&(this.alt=+g)}Me.prototype={equals:function(i,c){if(!i)return!1;i=ge(i);var g=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return g<=(c===void 0?1e-9:c)},toString:function(i){return"LatLng("+O(this.lat,i)+", "+O(this.lng,i)+")"},distanceTo:function(i){return He.distance(this,ge(i))},wrap:function(){return He.wrapLatLng(this)},toBounds:function(i){var c=180*i/40075017,g=c/Math.cos(Math.PI/180*this.lat);return Ae([this.lat-c,this.lng-g],[this.lat+c,this.lng+g])},clone:function(){return new Me(this.lat,this.lng,this.alt)}};function ge(i,c,g){return i instanceof Me?i:P(i)&&typeof i[0]!="object"?i.length===3?new Me(i[0],i[1],i[2]):i.length===2?new Me(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Me(i.lat,"lng"in i?i.lng:i.lon,i.alt):c===void 0?null:new Me(i,c,g)}var vt={latLngToPoint:function(i,c){var g=this.projection.project(i),_=this.scale(c);return this.transformation._transform(g,_)},pointToLatLng:function(i,c){var g=this.scale(c),_=this.transformation.untransform(i,g);return this.projection.unproject(_)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var c=this.projection.bounds,g=this.scale(i),_=this.transformation.transform(c.min,g),A=this.transformation.transform(c.max,g);return new Ee(_,A)},infinite:!1,wrapLatLng:function(i){var c=this.wrapLng?S(i.lng,this.wrapLng,!0):i.lng,g=this.wrapLat?S(i.lat,this.wrapLat,!0):i.lat,_=i.alt;return new Me(g,c,_)},wrapLatLngBounds:function(i){var c=i.getCenter(),g=this.wrapLatLng(c),_=c.lat-g.lat,A=c.lng-g.lng;if(_===0&&A===0)return i;var M=i.getSouthWest(),G=i.getNorthEast(),se=new Me(M.lat-_,M.lng-A),le=new Me(G.lat-_,G.lng-A);return new Ze(se,le)}},He=f({},vt,{wrapLng:[-180,180],R:6371e3,distance:function(i,c){var g=Math.PI/180,_=i.lat*g,A=c.lat*g,M=Math.sin((c.lat-i.lat)*g/2),G=Math.sin((c.lng-i.lng)*g/2),se=M*M+Math.cos(_)*Math.cos(A)*G*G,le=2*Math.atan2(Math.sqrt(se),Math.sqrt(1-se));return this.R*le}}),Pn=6378137,Ln={R:Pn,MAX_LATITUDE:85.0511287798,project:function(i){var c=Math.PI/180,g=this.MAX_LATITUDE,_=Math.max(Math.min(g,i.lat),-g),A=Math.sin(_*c);return new te(this.R*i.lng*c,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(i){var c=180/Math.PI;return new Me((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*c,i.x*c/this.R)},bounds:function(){var i=Pn*Math.PI;return new Ee([-i,-i],[i,i])}()};function kt(i,c,g,_){if(P(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=c,this._c=g,this._d=_}kt.prototype={transform:function(i,c){return this._transform(i.clone(),c)},_transform:function(i,c){return c=c||1,i.x=c*(this._a*i.x+this._b),i.y=c*(this._c*i.y+this._d),i},untransform:function(i,c){return c=c||1,new te((i.x/c-this._b)/this._a,(i.y/c-this._d)/this._c)}};function dt(i,c,g,_){return new kt(i,c,g,_)}var Xe=f({},He,{code:"EPSG:3857",projection:Ln,transformation:function(){var i=.5/(Math.PI*Ln.R);return dt(i,.5,-i,.5)}()}),Zn=f({},Xe,{code:"EPSG:900913"});function Wt(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Dn(i,c){var g="",_,A,M,G,se,le;for(_=0,M=i.length;_<M;_++){for(se=i[_],A=0,G=se.length;A<G;A++)le=se[A],g+=(A?"L":"M")+le.x+" "+le.y;g+=c?Be.svg?"z":"x":""}return g||"M0 0"}var De=document.documentElement.style,Ue="ActiveXObject"in window,Ge=Ue&&!document.addEventListener,tn="msLaunchUri"in navigator&&!("documentMode"in document),Te=Tt("webkit"),qt=Tt("android"),li=Tt("android 2")||Tt("android 3"),Zt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),or=qt&&Tt("Google")&&Zt<537&&!("AudioNode"in window),bt=!!window.opera,ui=!tn&&Tt("chrome"),Gn=Tt("gecko")&&!Te&&!bt&&!Ue,nn=!ui&&Tt("safari"),An=Tt("phantom"),Xn="OTransition"in De,mr=navigator.platform.indexOf("Win")===0,ct=Ue&&"transition"in De,xe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!li,Ct="MozPerspective"in De,Ke=!window.L_DISABLE_3D&&(ct||xe||Ct)&&!Xn&&!An,Qe=typeof orientation<"u"||Tt("mobile"),rn=Qe&&Te,xn=Qe&&xe,we=!window.PointerEvent&&window.MSPointerEvent,Re=!!(window.PointerEvent||we),Mt="ontouchstart"in window||!!window.TouchEvent,Yn=!window.L_NO_TOUCH&&(Mt||Re),At=Qe&&bt,fn=Qe&&Gn,ms=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Gt=function(){var i=!1;try{var c=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",I,c),window.removeEventListener("testPassiveEventSupport",I,c)}catch{}return i}(),ci=function(){return!!document.createElement("canvas").getContext}(),vr=!!(document.createElementNS&&Wt("svg").createSVGRect),Dt=!!vr&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),xi=!vr&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var c=i.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),kr=navigator.platform.indexOf("Mac")===0,hi=navigator.platform.indexOf("Linux")===0;function Tt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Be={ie:Ue,ielt9:Ge,edge:tn,webkit:Te,android:qt,android23:li,androidStock:or,opera:bt,chrome:ui,gecko:Gn,safari:nn,phantom:An,opera12:Xn,win:mr,ie3d:ct,webkit3d:xe,gecko3d:Ct,any3d:Ke,mobile:Qe,mobileWebkit:rn,mobileWebkit3d:xn,msPointer:we,pointer:Re,touch:Yn,touchNative:Mt,mobileOpera:At,mobileGecko:fn,retina:ms,passiveEvents:Gt,canvas:ci,svg:vr,vml:xi,inlineSvg:Dt,mac:kr,linux:hi},dn=Be.msPointer?"MSPointerDown":"pointerdown",ke=Be.msPointer?"MSPointerMove":"pointermove",Xr=Be.msPointer?"MSPointerUp":"pointerup",fi=Be.msPointer?"MSPointerCancel":"pointercancel",pn={touchstart:dn,touchmove:ke,touchend:Xr,touchcancel:fi},Yr={touchstart:Mr,touchmove:Si,touchend:Si,touchcancel:Si},Nn={},Kr=!1;function Kn(i,c,g){return c==="touchstart"&&Nt(),Yr[c]?(g=Yr[c].bind(this,g),i.addEventListener(pn[c],g,!1),g):(console.warn("wrong event specified:",c),I)}function sn(i,c,g){if(!pn[c]){console.warn("wrong event specified:",c);return}i.removeEventListener(pn[c],g,!1)}function Oo(i){Nn[i.pointerId]=i}function Qn(i){Nn[i.pointerId]&&(Nn[i.pointerId]=i)}function on(i){delete Nn[i.pointerId]}function Nt(){Kr||(document.addEventListener(dn,Oo,!0),document.addEventListener(ke,Qn,!0),document.addEventListener(Xr,on,!0),document.addEventListener(fi,on,!0),Kr=!0)}function Si(i,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var g in Nn)c.touches.push(Nn[g]);c.changedTouches=[c],i(c)}}function Mr(i,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&wn(c),Si(i,c)}function vs(i){var c={},g,_;for(_ in i)g=i[_],c[_]=g&&g.bind?g.bind(i):g;return i=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var ve=200;function Ro(i,c){i.addEventListener("dblclick",c);var g=0,_;function A(M){if(M.detail!==1){_=M.detail;return}if(!(M.pointerType==="mouse"||M.sourceCapabilities&&!M.sourceCapabilities.firesTouchEvents)){var G=Hi(M);if(!(G.some(function(le){return le instanceof HTMLLabelElement&&le.attributes.for})&&!G.some(function(le){return le instanceof HTMLInputElement||le instanceof HTMLSelectElement}))){var se=Date.now();se-g<=ve?(_++,_===2&&c(vs(M))):_=1,g=se}}}return i.addEventListener("click",A),{dblclick:c,simDblclick:A}}function Pt(i,c){i.removeEventListener("dblclick",c.dblclick),i.removeEventListener("click",c.simDblclick)}var Pr=B(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),di=B(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pt=di==="webkitTransition"||di==="OTransition"?di+"End":"transitionend";function ot(i){return typeof i=="string"?document.getElementById(i):i}function $e(i,c){var g=i.style[c]||i.currentStyle&&i.currentStyle[c];if((!g||g==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(i,null);g=_?_[c]:null}return g==="auto"?null:g}function it(i,c,g){var _=document.createElement(i);return _.className=c||"",g&&g.appendChild(_),_}function xt(i){var c=i.parentNode;c&&c.removeChild(i)}function pi(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Ot(i){var c=i.parentNode;c&&c.lastChild!==i&&c.appendChild(i)}function On(i){var c=i.parentNode;c&&c.firstChild!==i&&c.insertBefore(i,c.firstChild)}function ws(i,c){if(i.classList!==void 0)return i.classList.contains(c);var g=qn(i);return g.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(g)}function ze(i,c){if(i.classList!==void 0)for(var g=H(c),_=0,A=g.length;_<A;_++)i.classList.add(g[_]);else if(!ws(i,c)){var M=qn(i);ys(i,(M?M+" ":"")+c)}}function yt(i,c){i.classList!==void 0?i.classList.remove(c):ys(i,z((" "+qn(i)+" ").replace(" "+c+" "," ")))}function ys(i,c){i.className.baseVal===void 0?i.className=c:i.className.baseVal=c}function qn(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function nt(i,c){"opacity"in i.style?i.style.opacity=c:"filter"in i.style&&an(i,c)}function an(i,c){var g=!1,_="DXImageTransform.Microsoft.Alpha";try{g=i.filters.item(_)}catch{if(c===1)return}c=Math.round(c*100),g?(g.Enabled=c!==100,g.Opacity=c):i.style.filter+=" progid:"+_+"(opacity="+c+")"}function B(i){for(var c=document.documentElement.style,g=0;g<i.length;g++)if(i[g]in c)return i[g];return!1}function R(i,c,g){var _=c||new te(0,0);i.style[Pr]=(Be.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(g?" scale("+g+")":"")}function me(i,c){i._leaflet_pos=c,Be.any3d?R(i,c):(i.style.left=c.x+"px",i.style.top=c.y+"px")}function qe(i){return i._leaflet_pos||new te(0,0)}var mt,wr,ar;if("onselectstart"in document)mt=function(){We(window,"selectstart",wn)},wr=function(){Oe(window,"selectstart",wn)};else{var ln=B(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);mt=function(){if(ln){var i=document.documentElement.style;ar=i[ln],i[ln]="none"}},wr=function(){ln&&(document.documentElement.style[ln]=ar,ar=void 0)}}function Pe(){We(window,"dragstart",wn)}function ht(){Oe(window,"dragstart",wn)}var Sn,yr;function _r(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Cr(),Sn=i,yr=i.style.outlineStyle,i.style.outlineStyle="none",We(window,"keydown",Cr))}function Cr(){Sn&&(Sn.style.outlineStyle=yr,Sn=void 0,yr=void 0,Oe(window,"keydown",Cr))}function lr(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Qr(i){var c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}var ft={__proto__:null,TRANSFORM:Pr,TRANSITION:di,TRANSITION_END:pt,get:ot,getStyle:$e,create:it,remove:xt,empty:pi,toFront:Ot,toBack:On,hasClass:ws,addClass:ze,removeClass:yt,setClass:ys,getClass:qn,setOpacity:nt,testProp:B,setTransform:R,setPosition:me,getPosition:qe,get disableTextSelection(){return mt},get enableTextSelection(){return wr},disableImageDrag:Pe,enableImageDrag:ht,preventOutline:_r,restoreOutline:Cr,getSizedParentNode:lr,getScale:Qr};function We(i,c,g,_){if(c&&typeof c=="object")for(var A in c)cn(i,A,c[A],g);else{c=H(c);for(var M=0,G=c.length;M<G;M++)cn(i,c[M],g,_)}return this}var un="_leaflet_events";function Oe(i,c,g,_){if(arguments.length===1)ja(i),delete i[un];else if(c&&typeof c=="object")for(var A in c)ko(i,A,c[A],g);else if(c=H(c),arguments.length===2)ja(i,function(se){return V(c,se)!==-1});else for(var M=0,G=c.length;M<G;M++)ko(i,c[M],g,_);return this}function ja(i,c){for(var g in i[un]){var _=g.split(/\d/)[0];(!c||c(_))&&ko(i,_,null,null,g)}}var Je={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function cn(i,c,g,_){var A=c+C(g)+(_?"_"+C(_):"");if(i[un]&&i[un][A])return this;var M=function(se){return g.call(_||i,se||window.event)},G=M;!Be.touchNative&&Be.pointer&&c.indexOf("touch")===0?M=Kn(i,c,M):Be.touch&&c==="dblclick"?M=Ro(i,M):"addEventListener"in i?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?i.addEventListener(Je[c]||c,M,Be.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(M=function(se){se=se||window.event,Ii(i,se)&&G(se)},i.addEventListener(Je[c],M,!1)):i.addEventListener(c,G,!1):i.attachEvent("on"+c,M),i[un]=i[un]||{},i[un][A]=M}function ko(i,c,g,_,A){A=A||c+C(g)+(_?"_"+C(_):"");var M=i[un]&&i[un][A];if(!M)return this;!Be.touchNative&&Be.pointer&&c.indexOf("touch")===0?sn(i,c,M):Be.touch&&c==="dblclick"?Pt(i,M):"removeEventListener"in i?i.removeEventListener(Je[c]||c,M,!1):i.detachEvent("on"+c,M),i[un][A]=null}function qr(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function js(i){return cn(i,"wheel",qr),this}function Er(i){return We(i,"mousedown touchstart dblclick contextmenu",qr),i._leaflet_disable_click=!0,this}function wn(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Ar(i){return wn(i),qr(i),this}function Hi(i){if(i.composedPath)return i.composedPath();for(var c=[],g=i.target;g;)c.push(g),g=g.parentNode;return c}function Vi(i,c){if(!c)return new te(i.clientX,i.clientY);var g=Qr(c),_=g.boundingClientRect;return new te((i.clientX-_.left)/g.x-c.clientLeft,(i.clientY-_.top)/g.y-c.clientTop)}var za=Be.linux&&Be.chrome?window.devicePixelRatio:Be.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Wi(i){return Be.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/za:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Ii(i,c){var g=c.relatedTarget;if(!g)return!0;try{for(;g&&g!==i;)g=g.parentNode}catch{return!1}return g!==i}var Bn={__proto__:null,on:We,off:Oe,stopPropagation:qr,disableScrollPropagation:js,disableClickPropagation:Er,preventDefault:wn,stop:Ar,getPropagationPath:Hi,getMousePosition:Vi,getWheelDelta:Wi,isExternalTarget:Ii,addListener:We,removeListener:Oe},Mo=de.extend({run:function(i,c,g,_){this.stop(),this._el=i,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=qe(i),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ue(this._animate,this),this._step()},_step:function(i){var c=+new Date-this._startTime,g=this._duration*1e3;c<g?this._runFrame(this._easeOut(c/g),i):(this._runFrame(1),this._complete())},_runFrame:function(i,c){var g=this._startPos.add(this._offset.multiplyBy(i));c&&g._round(),me(this._el,g),this.fire("step")},_complete:function(){fe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),at=de.extend({options:{crs:Xe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,c){c=j(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=w(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ge(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=di&&Be.any3d&&!Be.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),We(this._proxy,pt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,c,g){if(c=c===void 0?this._zoom:this._limitZoom(c),i=this._limitCenter(ge(i),c,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=f({animate:g.animate},g.zoom),g.pan=f({animate:g.animate,duration:g.duration},g.pan));var _=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,c,g.zoom):this._tryAnimatedPan(i,g.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(i,c,g.pan&&g.pan.noMoveStart),this},setZoom:function(i,c){return this._loaded?this.setView(this.getCenter(),i,{zoom:c}):(this._zoom=i,this)},zoomIn:function(i,c){return i=i||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,c)},zoomOut:function(i,c){return i=i||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,c)},setZoomAround:function(i,c,g){var _=this.getZoomScale(c),A=this.getSize().divideBy(2),M=i instanceof te?i:this.latLngToContainerPoint(i),G=M.subtract(A).multiplyBy(1-1/_),se=this.containerPointToLatLng(A.add(G));return this.setView(se,c,{zoom:g})},_getBoundsCenterZoom:function(i,c){c=c||{},i=i.getBounds?i.getBounds():Ae(i);var g=ce(c.paddingTopLeft||c.padding||[0,0]),_=ce(c.paddingBottomRight||c.padding||[0,0]),A=this.getBoundsZoom(i,!1,g.add(_));if(A=typeof c.maxZoom=="number"?Math.min(c.maxZoom,A):A,A===1/0)return{center:i.getCenter(),zoom:A};var M=_.subtract(g).divideBy(2),G=this.project(i.getSouthWest(),A),se=this.project(i.getNorthEast(),A),le=this.unproject(G.add(se).divideBy(2).add(M),A);return{center:le,zoom:A}},fitBounds:function(i,c){if(i=Ae(i),!i.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(i,c);return this.setView(g.center,g.zoom,c)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,c){return this.setView(i,this._zoom,{pan:c})},panBy:function(i,c){if(i=ce(i).round(),c=c||{},!i.x&&!i.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Mo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){ze(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,g,c.duration||.25,c.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,c,g){if(g=g||{},g.animate===!1||!Be.any3d)return this.setView(i,c,g);this._stop();var _=this.project(this.getCenter()),A=this.project(i),M=this.getSize(),G=this._zoom;i=ge(i),c=c===void 0?G:c;var se=Math.max(M.x,M.y),le=se*this.getZoomScale(G,c),_e=A.distanceTo(_)||1,Le=1.42,Ye=Le*Le;function st(mn){var Ya=mn?-1:1,wg=mn?le:se,yg=le*le-se*se+Ya*Ye*Ye*_e*_e,_g=2*wg*Ye*_e,ku=yg/_g,Tf=Math.sqrt(ku*ku+1)-ku,Cg=Tf<1e-9?-18:Math.log(Tf);return Cg}function tr(mn){return(Math.exp(mn)-Math.exp(-mn))/2}function In(mn){return(Math.exp(mn)+Math.exp(-mn))/2}function zr(mn){return tr(mn)/In(mn)}var cr=st(0);function Ws(mn){return se*(In(cr)/In(cr+Le*mn))}function pg(mn){return se*(In(cr)*zr(cr+Le*mn)-tr(cr))/Ye}function gg(mn){return 1-Math.pow(1-mn,1.5)}var mg=Date.now(),If=(st(1)-cr)/Le,vg=g.duration?1e3*g.duration:1e3*If*.8;function bf(){var mn=(Date.now()-mg)/vg,Ya=gg(mn)*If;mn<=1?(this._flyToFrame=ue(bf,this),this._move(this.unproject(_.add(A.subtract(_).multiplyBy(pg(Ya)/_e)),G),this.getScaleZoom(se/Ws(Ya),G),{flyTo:!0})):this._move(i,c)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),bf.call(this),this},flyToBounds:function(i,c){var g=this._getBoundsCenterZoom(i,c);return this.flyTo(g.center,g.zoom,c)},setMaxBounds:function(i){return i=Ae(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var c=this.options.minZoom;return this.options.minZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var c=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,c){this._enforcingBounds=!0;var g=this.getCenter(),_=this._limitCenter(g,this._zoom,Ae(i));return g.equals(_)||this.panTo(_,c),this._enforcingBounds=!1,this},panInside:function(i,c){c=c||{};var g=ce(c.paddingTopLeft||c.padding||[0,0]),_=ce(c.paddingBottomRight||c.padding||[0,0]),A=this.project(this.getCenter()),M=this.project(i),G=this.getPixelBounds(),se=Ne([G.min.add(g),G.max.subtract(_)]),le=se.getSize();if(!se.contains(M)){this._enforcingBounds=!0;var _e=M.subtract(se.getCenter()),Le=se.extend(M).getSize().subtract(le);A.x+=_e.x<0?-Le.x:Le.x,A.y+=_e.y<0?-Le.y:Le.y,this.panTo(this.unproject(A),c),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=f({animate:!1,pan:!0},i===!0?{animate:!0}:i);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),_=c.divideBy(2).round(),A=g.divideBy(2).round(),M=_.subtract(A);return!M.x&&!M.y?this:(i.animate&&i.pan?this.panBy(M):(i.pan&&this._rawPanBy(M),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(w(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=f({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=w(this._handleGeolocationResponse,this),g=w(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,g,i):navigator.geolocation.getCurrentPosition(c,g,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var c=i.code,g=i.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var c=i.coords.latitude,g=i.coords.longitude,_=new Me(c,g),A=_.toBounds(i.coords.accuracy*2),M=this._locateOptions;if(M.setView){var G=this.getBoundsZoom(A);this.setView(_,M.maxZoom?Math.min(G,M.maxZoom):G)}var se={latlng:_,bounds:A,timestamp:i.timestamp};for(var le in i.coords)typeof i.coords[le]=="number"&&(se[le]=i.coords[le]);this.fire("locationfound",se)}},addHandler:function(i,c){if(!c)return this;var g=this[i]=new c(this);return this._handlers.push(g),this.options[i]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),xt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(fe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)xt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,c){var g="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),_=it("div",g,c||this._mapPane);return i&&(this._panes[i]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),c=this.unproject(i.getBottomLeft()),g=this.unproject(i.getTopRight());return new Ze(c,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,c,g){i=Ae(i),g=ce(g||[0,0]);var _=this.getZoom()||0,A=this.getMinZoom(),M=this.getMaxZoom(),G=i.getNorthWest(),se=i.getSouthEast(),le=this.getSize().subtract(g),_e=Ne(this.project(se,_),this.project(G,_)).getSize(),Le=Be.any3d?this.options.zoomSnap:1,Ye=le.x/_e.x,st=le.y/_e.y,tr=c?Math.max(Ye,st):Math.min(Ye,st);return _=this.getScaleZoom(tr,_),Le&&(_=Math.round(_/(Le/100))*(Le/100),_=c?Math.ceil(_/Le)*Le:Math.floor(_/Le)*Le),Math.max(A,Math.min(M,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,c){var g=this._getTopLeftPoint(i,c);return new Ee(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,c){var g=this.options.crs;return c=c===void 0?this._zoom:c,g.scale(i)/g.scale(c)},getScaleZoom:function(i,c){var g=this.options.crs;c=c===void 0?this._zoom:c;var _=g.zoom(i*g.scale(c));return isNaN(_)?1/0:_},project:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ge(i),c)},unproject:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(ce(i),c)},layerPointToLatLng:function(i){var c=ce(i).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(i){var c=this.project(ge(i))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ge(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Ae(i))},distance:function(i,c){return this.options.crs.distance(ge(i),ge(c))},containerPointToLayerPoint:function(i){return ce(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return ce(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var c=this.containerPointToLayerPoint(ce(i));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(i)))},mouseEventToContainerPoint:function(i){return Vi(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var c=this._container=ot(i);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");We(c,"scroll",this._onScroll,this),this._containerId=C(c)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Be.any3d,ze(i,"leaflet-container"+(Be.touch?" leaflet-touch":"")+(Be.retina?" leaflet-retina":"")+(Be.ielt9?" leaflet-oldie":"")+(Be.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=$e(i,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),me(this._mapPane,new te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ze(i.markerPane,"leaflet-zoom-hide"),ze(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,c,g){me(this._mapPane,new te(0,0));var _=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var A=this._zoom!==c;this._moveStart(A,g)._move(i,c)._moveEnd(A),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(i,c){return i&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(i,c,g,_){c===void 0&&(c=this._zoom);var A=this._zoom!==c;return this._zoom=c,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),_?g&&g.pinch&&this.fire("zoom",g):((A||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return fe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){me(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[C(this._container)]=this;var c=i?Oe:We;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Be.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){fe(this._resizeRequest),this._resizeRequest=ue(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,c){for(var g=[],_,A=c==="mouseout"||c==="mouseover",M=i.target||i.srcElement,G=!1;M;){if(_=this._targets[C(M)],_&&(c==="click"||c==="preclick")&&this._draggableMoved(_)){G=!0;break}if(_&&_.listens(c,!0)&&(A&&!Ii(M,i)||(g.push(_),A))||M===this._container)break;M=M.parentNode}return!g.length&&!G&&!A&&this.listens(c,!0)&&(g=[this]),g},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var c=i.target||i.srcElement;if(!(!this._loaded||c._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(c))){var g=i.type;g==="mousedown"&&_r(c),this._fireDOMEvent(i,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,c,g){if(i.type==="click"){var _=f({},i);_.type="preclick",this._fireDOMEvent(_,_.type,g)}var A=this._findEventTargets(i,c);if(g){for(var M=[],G=0;G<g.length;G++)g[G].listens(c,!0)&&M.push(g[G]);A=M.concat(A)}if(A.length){c==="contextmenu"&&wn(i);var se=A[0],le={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var _e=se.getLatLng&&(!se._radius||se._radius<=10);le.containerPoint=_e?this.latLngToContainerPoint(se.getLatLng()):this.mouseEventToContainerPoint(i),le.layerPoint=this.containerPointToLayerPoint(le.containerPoint),le.latlng=_e?se.getLatLng():this.layerPointToLatLng(le.layerPoint)}for(G=0;G<A.length;G++)if(A[G].fire(c,le,!0),le.originalEvent._stopped||A[G].options.bubblingMouseEvents===!1&&V(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,c=this._handlers.length;i<c;i++)this._handlers[i].disable()},whenReady:function(i,c){return this._loaded?i.call(c||this,{target:this}):this.on("load",i,c),this},_getMapPanePos:function(){return qe(this._mapPane)||new te(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,c){var g=i&&c!==void 0?this._getNewPixelOrigin(i,c):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,c){var g=this.getSize()._divideBy(2);return this.project(i,c)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,c,g){var _=this._getNewPixelOrigin(g,c);return this.project(i,c)._subtract(_)},_latLngBoundsToNewLayerBounds:function(i,c,g){var _=this._getNewPixelOrigin(g,c);return Ne([this.project(i.getSouthWest(),c)._subtract(_),this.project(i.getNorthWest(),c)._subtract(_),this.project(i.getSouthEast(),c)._subtract(_),this.project(i.getNorthEast(),c)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,c,g){if(!g)return i;var _=this.project(i,c),A=this.getSize().divideBy(2),M=new Ee(_.subtract(A),_.add(A)),G=this._getBoundsOffset(M,g,c);return Math.abs(G.x)<=1&&Math.abs(G.y)<=1?i:this.unproject(_.add(G),c)},_limitOffset:function(i,c){if(!c)return i;var g=this.getPixelBounds(),_=new Ee(g.min.add(i),g.max.add(i));return i.add(this._getBoundsOffset(_,c))},_getBoundsOffset:function(i,c,g){var _=Ne(this.project(c.getNorthEast(),g),this.project(c.getSouthWest(),g)),A=_.min.subtract(i.min),M=_.max.subtract(i.max),G=this._rebound(A.x,-M.x),se=this._rebound(A.y,-M.y);return new te(G,se)},_rebound:function(i,c){return i+c>0?Math.round(i-c)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(c))},_limitZoom:function(i){var c=this.getMinZoom(),g=this.getMaxZoom(),_=Be.any3d?this.options.zoomSnap:1;return _&&(i=Math.round(i/_)*_),Math.max(c,Math.min(g,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){yt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,c){var g=this._getCenterOffset(i)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,c),!0)},_createAnimProxy:function(){var i=this._proxy=it("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(c){var g=Pr,_=this._proxy.style[g];R(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),_===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){xt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),c=this.getZoom();R(this._proxy,this.project(i,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,c,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(c),A=this._getCenterOffset(i)._divideBy(1-1/_);return g.animate!==!0&&!this.getSize().contains(A)?!1:(ue(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(i,c,!0)},this),!0)},_animateZoom:function(i,c,g,_){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=c,ze(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:c,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(w(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&yt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ua(i,c){return new at(i,c)}var xr=ne.extend({options:{position:"topright"},initialize:function(i){j(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var c=this._map;return c&&c.removeControl(this),this.options.position=i,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var c=this._container=this.onAdd(i),g=this.getPosition(),_=i._controlCorners[g];return ze(c,"leaflet-control"),g.indexOf("bottom")!==-1?_.insertBefore(c,_.firstChild):_.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(xt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),_s=function(i){return new xr(i)};at.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},c="leaflet-",g=this._controlContainer=it("div",c+"control-container",this._container);function _(A,M){var G=c+A+" "+c+M;i[A+M]=it("div",G,g)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)xt(this._controlCorners[i]);xt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ha=xr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,c,g,_){return g<_?-1:_<g?1:0}},initialize:function(i,c,g){j(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in i)this._addLayer(i[_],_);for(_ in c)this._addLayer(c[_],_,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return xr.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,c){return this._addLayer(i,c),this._map?this._update():this},addOverlay:function(i,c){return this._addLayer(i,c,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var c=this._getLayer(C(i));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){ze(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(ze(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):yt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return yt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",c=this._container=it("div",i),g=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Er(c),js(c);var _=this._section=it("section",i+"-list");g&&(this._map.on("click",this.collapse,this),We(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=it("a",i+"-toggle",c);A.href="#",A.title="Layers",A.setAttribute("role","button"),We(A,{keydown:function(M){M.keyCode===13&&this._expandSafely()},click:function(M){wn(M),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=it("div",i+"-base",_),this._separator=it("div",i+"-separator",_),this._overlaysList=it("div",i+"-overlays",_),c.appendChild(_)},_getLayer:function(i){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&C(this._layers[c].layer)===i)return this._layers[c]},_addLayer:function(i,c,g){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:c,overlay:g}),this.options.sortLayers&&this._layers.sort(w(function(_,A){return this.options.sortFunction(_.layer,A.layer,_.name,A.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;pi(this._baseLayersList),pi(this._overlaysList),this._layerControlInputs=[];var i,c,g,_,A=0;for(g=0;g<this._layers.length;g++)_=this._layers[g],this._addItem(_),c=c||_.overlay,i=i||!_.overlay,A+=_.overlay?0:1;return this.options.hideSingleBase&&(i=i&&A>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=c&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var c=this._getLayer(C(i.target)),g=c.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;g&&this._map.fire(g,c)},_createRadioElement:function(i,c){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(c?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=g,_.firstChild},_addItem:function(i){var c=document.createElement("label"),g=this._map.hasLayer(i.layer),_;i.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=g):_=this._createRadioElement("leaflet-base-layers_"+C(this),g),this._layerControlInputs.push(_),_.layerId=C(i.layer),We(_,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+i.name;var M=document.createElement("span");c.appendChild(M),M.appendChild(_),M.appendChild(A);var G=i.overlay?this._overlaysList:this._baseLayersList;return G.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,c,g,_=[],A=[];this._handlingClick=!0;for(var M=i.length-1;M>=0;M--)c=i[M],g=this._getLayer(c.layerId).layer,c.checked?_.push(g):c.checked||A.push(g);for(M=0;M<A.length;M++)this._map.hasLayer(A[M])&&this._map.removeLayer(A[M]);for(M=0;M<_.length;M++)this._map.hasLayer(_[M])||this._map.addLayer(_[M]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,c,g,_=this._map.getZoom(),A=i.length-1;A>=0;A--)c=i[A],g=this._getLayer(c.layerId).layer,c.disabled=g.options.minZoom!==void 0&&_<g.options.minZoom||g.options.maxZoom!==void 0&&_>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,We(i,"click",wn),this.expand();var c=this;setTimeout(function(){Oe(i,"click",wn),c._preventClick=!1})}}),Et=function(i,c,g){return new Ha(i,c,g)},zs=xr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var c="leaflet-control-zoom",g=it("div",c+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,c+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,c+"-out",g,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,c,g,_,A){var M=it("a",g,_);return M.innerHTML=i,M.href="#",M.title=c,M.setAttribute("role","button"),M.setAttribute("aria-label",c),Er(M),We(M,"click",Ar),We(M,"click",A,this),We(M,"click",this._refocusOnMap,this),M},_updateDisabled:function(){var i=this._map,c="leaflet-disabled";yt(this._zoomInButton,c),yt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(ze(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(ze(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});at.mergeOptions({zoomControl:!0}),at.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new zs,this.addControl(this.zoomControl))});var Us=function(i){return new zs(i)},$r=xr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var c="leaflet-control-scale",g=it("div",c),_=this.options;return this._addScales(_,c+"-line",g),i.on(_.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),g},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,c,g){i.metric&&(this._mScale=it("div",c,g)),i.imperial&&(this._iScale=it("div",c,g))},_update:function(){var i=this._map,c=i.getSize().y/2,g=i.distance(i.containerPointToLatLng([0,c]),i.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(g)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var c=this._getRoundNum(i),g=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,g,c/i)},_updateImperial:function(i){var c=i*3.2808399,g,_,A;c>5280?(g=c/5280,_=this._getRoundNum(g),this._updateScale(this._iScale,_+" mi",_/g)):(A=this._getRoundNum(c),this._updateScale(this._iScale,A+" ft",A/c))},_updateScale:function(i,c,g){i.style.width=Math.round(this.options.maxWidth*g)+"px",i.innerHTML=c},_getRoundNum:function(i){var c=Math.pow(10,(Math.floor(i)+"").length-1),g=i/c;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,c*g}}),Iu=function(i){return new $r(i)},ae='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',tt=xr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Be.inlineSvg?ae+" ":"")+"Leaflet</a>"},initialize:function(i){j(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=it("div","leaflet-control-attribution"),Er(this._container);for(var c in i._layers)i._layers[c].getAttribution&&this.addAttribution(i._layers[c].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var c in this._attributions)this._attributions[c]&&i.push(c);var g=[];this.options.prefix&&g.push(this.options.prefix),i.length&&g.push(i.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});at.mergeOptions({attributionControl:!0}),at.addInitHook(function(){this.options.attributionControl&&new tt().addTo(this)});var yn=function(i){return new tt(i)};xr.Layers=Ha,xr.Zoom=zs,xr.Scale=$r,xr.Attribution=tt,_s.layers=Et,_s.zoom=Us,_s.scale=Iu,_s.attribution=yn;var $n=ne.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});$n.addTo=function(i,c){return i.addHandler(c,this),this};var Va={Events:ye},Wa=Be.touch?"touchstart mousedown":"mousedown",gi=de.extend({options:{clickTolerance:3},initialize:function(i,c,g,_){j(this,_),this._element=i,this._dragStartTarget=c||i,this._preventOutline=g},enable:function(){this._enabled||(We(this._dragStartTarget,Wa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(gi._dragging===this&&this.finishDrag(!0),Oe(this._dragStartTarget,Wa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!ws(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){gi._dragging===this&&this.finishDrag();return}if(!(gi._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(gi._dragging=this,this._preventOutline&&_r(this._element),Pe(),mt(),!this._moving)){this.fire("down");var c=i.touches?i.touches[0]:i,g=lr(this._element);this._startPoint=new te(c.clientX,c.clientY),this._startPos=qe(this._element),this._parentScale=Qr(g);var _=i.type==="mousedown";We(document,_?"mousemove":"touchmove",this._onMove,this),We(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var c=i.touches&&i.touches.length===1?i.touches[0]:i,g=new te(c.clientX,c.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,wn(i),this._moved||(this.fire("dragstart"),this._moved=!0,ze(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ze(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),me(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){yt(document.body,"leaflet-dragging"),this._lastTarget&&(yt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Oe(document,"mousemove touchmove",this._onMove,this),Oe(document,"mouseup touchend touchcancel",this._onUp,this),ht(),wr();var c=this._moved&&this._moving;this._moving=!1,gi._dragging=!1,c&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Za(i,c,g){var _,A=[1,4,2,8],M,G,se,le,_e,Le,Ye,st;for(M=0,Le=i.length;M<Le;M++)i[M]._code=Ti(i[M],c);for(se=0;se<4;se++){for(Ye=A[se],_=[],M=0,Le=i.length,G=Le-1;M<Le;G=M++)le=i[M],_e=i[G],le._code&Ye?_e._code&Ye||(st=Jr(_e,le,Ye,c,g),st._code=Ti(st,c),_.push(st)):(_e._code&Ye&&(st=Jr(_e,le,Ye,c,g),st._code=Ti(st,c),_.push(st)),_.push(le));i=_}return i}function Hs(i,c){var g,_,A,M,G,se,le,_e,Le;if(!i||i.length===0)throw new Error("latlngs not passed");Jn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Ye=ge([0,0]),st=Ae(i),tr=st.getNorthWest().distanceTo(st.getSouthWest())*st.getNorthEast().distanceTo(st.getNorthWest());tr<1700&&(Ye=Xt(i));var In=i.length,zr=[];for(g=0;g<In;g++){var cr=ge(i[g]);zr.push(c.project(ge([cr.lat-Ye.lat,cr.lng-Ye.lng])))}for(se=le=_e=0,g=0,_=In-1;g<In;_=g++)A=zr[g],M=zr[_],G=A.y*M.x-M.y*A.x,le+=(A.x+M.x)*G,_e+=(A.y+M.y)*G,se+=G*3;se===0?Le=zr[0]:Le=[le/se,_e/se];var Ws=c.unproject(ce(Le));return ge([Ws.lat+Ye.lat,Ws.lng+Ye.lng])}function Xt(i){for(var c=0,g=0,_=0,A=0;A<i.length;A++){var M=ge(i[A]);c+=M.lat,g+=M.lng,_++}return ge([c/_,g/_])}var Po={__proto__:null,clipPolygon:Za,polygonCenter:Hs,centroid:Xt};function Bt(i,c){if(!c||!i.length)return i.slice();var g=c*c;return i=bu(i,g),i=St(i,g),i}function Cs(i,c,g){return Math.sqrt(Ni(i,c,g,!0))}function bi(i,c,g){return Ni(i,c,g)}function St(i,c){var g=i.length,_=typeof Uint8Array<"u"?Uint8Array:Array,A=new _(g);A[0]=A[g-1]=1,Ve(i,A,c,0,g-1);var M,G=[];for(M=0;M<g;M++)A[M]&&G.push(i[M]);return G}function Ve(i,c,g,_,A){var M=0,G,se,le;for(se=_+1;se<=A-1;se++)le=Ni(i[se],i[_],i[A],!0),le>M&&(G=se,M=le);M>g&&(c[G]=1,Ve(i,c,g,_,G),Ve(i,c,g,G,A))}function bu(i,c){for(var g=[i[0]],_=1,A=0,M=i.length;_<M;_++)Lr(i[_],i[A])>c&&(g.push(i[_]),A=_);return A<M-1&&g.push(i[M-1]),g}var Rt;function mi(i,c,g,_,A){var M=_?Rt:Ti(i,g),G=Ti(c,g),se,le,_e;for(Rt=G;;){if(!(M|G))return[i,c];if(M&G)return!1;se=M||G,le=Jr(i,c,se,g,A),_e=Ti(le,g),se===M?(i=le,M=_e):(c=le,G=_e)}}function Jr(i,c,g,_,A){var M=c.x-i.x,G=c.y-i.y,se=_.min,le=_.max,_e,Le;return g&8?(_e=i.x+M*(le.y-i.y)/G,Le=le.y):g&4?(_e=i.x+M*(se.y-i.y)/G,Le=se.y):g&2?(_e=le.x,Le=i.y+G*(le.x-i.x)/M):g&1&&(_e=se.x,Le=i.y+G*(se.x-i.x)/M),new te(_e,Le,A)}function Ti(i,c){var g=0;return i.x<c.min.x?g|=1:i.x>c.max.x&&(g|=2),i.y<c.min.y?g|=4:i.y>c.max.y&&(g|=8),g}function Lr(i,c){var g=c.x-i.x,_=c.y-i.y;return g*g+_*_}function Ni(i,c,g,_){var A=c.x,M=c.y,G=g.x-A,se=g.y-M,le=G*G+se*se,_e;return le>0&&(_e=((i.x-A)*G+(i.y-M)*se)/le,_e>1?(A=g.x,M=g.y):_e>0&&(A+=G*_e,M+=se*_e)),G=i.x-A,se=i.y-M,_?G*G+se*se:new te(A,M)}function Jn(i){return!P(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Vs(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Jn(i)}function Lo(i,c){var g,_,A,M,G,se,le,_e;if(!i||i.length===0)throw new Error("latlngs not passed");Jn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Le=ge([0,0]),Ye=Ae(i),st=Ye.getNorthWest().distanceTo(Ye.getSouthWest())*Ye.getNorthEast().distanceTo(Ye.getNorthWest());st<1700&&(Le=Xt(i));var tr=i.length,In=[];for(g=0;g<tr;g++){var zr=ge(i[g]);In.push(c.project(ge([zr.lat-Le.lat,zr.lng-Le.lng])))}for(g=0,_=0;g<tr-1;g++)_+=In[g].distanceTo(In[g+1])/2;if(_===0)_e=In[0];else for(g=0,M=0;g<tr-1;g++)if(G=In[g],se=In[g+1],A=G.distanceTo(se),M+=A,M>_){le=(M-_)/A,_e=[se.x-le*(se.x-G.x),se.y-le*(se.y-G.y)];break}var cr=c.unproject(ce(_e));return ge([cr.lat+Le.lat,cr.lng+Le.lng])}var Ga={__proto__:null,simplify:Bt,pointToSegmentDistance:Cs,closestPointOnSegment:bi,clipSegment:mi,_getEdgeIntersection:Jr,_getBitCode:Ti,_sqClosestPointOnSegment:Ni,isFlat:Jn,_flat:Vs,polylineCenter:Lo},Do={project:function(i){return new te(i.lng,i.lat)},unproject:function(i){return new Me(i.y,i.x)},bounds:new Ee([-180,-90],[180,90])},vi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ee([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var c=Math.PI/180,g=this.R,_=i.lat*c,A=this.R_MINOR/g,M=Math.sqrt(1-A*A),G=M*Math.sin(_),se=Math.tan(Math.PI/4-_/2)/Math.pow((1-G)/(1+G),M/2);return _=-g*Math.log(Math.max(se,1e-10)),new te(i.lng*c*g,_)},unproject:function(i){for(var c=180/Math.PI,g=this.R,_=this.R_MINOR/g,A=Math.sqrt(1-_*_),M=Math.exp(-i.y/g),G=Math.PI/2-2*Math.atan(M),se=0,le=.1,_e;se<15&&Math.abs(le)>1e-7;se++)_e=A*Math.sin(G),_e=Math.pow((1-_e)/(1+_e),A/2),le=Math.PI/2-2*Math.atan(M*_e)-G,G+=le;return new Me(G*c,i.x*c/g)}},Bo={__proto__:null,LonLat:Do,Mercator:vi,SphericalMercator:Ln},Tu=f({},He,{code:"EPSG:3395",projection:vi,transformation:function(){var i=.5/(Math.PI*vi.R);return dt(i,.5,-i,.5)}()}),Zi=f({},He,{code:"EPSG:4326",projection:Do,transformation:dt(1/180,1,-1/180,.5)}),Nu=f({},vt,{projection:Do,transformation:dt(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,c){var g=c.lng-i.lng,_=c.lat-i.lat;return Math.sqrt(g*g+_*_)},infinite:!0});vt.Earth=He,vt.EPSG3395=Tu,vt.EPSG3857=Xe,vt.EPSG900913=Zn,vt.EPSG4326=Zi,vt.Simple=Nu;var gn=de.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[C(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[C(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var c=i.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var g=this.getEvents();c.on(g,this),this.once("remove",function(){c.off(g,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});at.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var c=C(i);return this._layers[c]?this:(this._layers[c]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var c=C(i);return this._layers[c]?(this._loaded&&i.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return C(i)in this._layers},eachLayer:function(i,c){for(var g in this._layers)i.call(c,this._layers[g]);return this},_addLayers:function(i){i=i?P(i)?i:[i]:[];for(var c=0,g=i.length;c<g;c++)this.addLayer(i[c])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[C(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var c=C(i);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,c=-1/0,g=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var A=this._zoomBoundLayers[_].options;i=A.minZoom===void 0?i:Math.min(i,A.minZoom),c=A.maxZoom===void 0?c:Math.max(c,A.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=i===1/0?void 0:i,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ei=gn.extend({initialize:function(i,c){j(this,c),this._layers={};var g,_;if(i)for(g=0,_=i.length;g<_;g++)this.addLayer(i[g])},addLayer:function(i){var c=this.getLayerId(i);return this._layers[c]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var c=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(i){var c=typeof i=="number"?i:this.getLayerId(i);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var c=Array.prototype.slice.call(arguments,1),g,_;for(g in this._layers)_=this._layers[g],_[i]&&_[i].apply(_,c);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,c){for(var g in this._layers)i.call(c,this._layers[g]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return C(i)}}),ur=function(i,c){return new ei(i,c)},Dr=ei.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),ei.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),ei.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Ze;for(var c in this._layers){var g=this._layers[c];i.extend(g.getBounds?g.getBounds():g.getLatLng())}return i}}),Br=function(i,c){return new Dr(i,c)},Gi=ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){j(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,c){var g=this._getIconUrl(i);if(!g){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(g,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(_,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(i,c){var g=this.options,_=g[c+"Size"];typeof _=="number"&&(_=[_,_]);var A=ce(_),M=ce(c==="shadow"&&g.shadowAnchor||g.iconAnchor||A&&A.divideBy(2,!0));i.className="leaflet-marker-"+c+" "+(g.className||""),M&&(i.style.marginLeft=-M.x+"px",i.style.marginTop=-M.y+"px"),A&&(i.style.width=A.x+"px",i.style.height=A.y+"px")},_createImg:function(i,c){return c=c||document.createElement("img"),c.src=i,c},_getIconUrl:function(i){return Be.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Fo(i){return new Gi(i)}var Es=Gi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Es.imagePath!="string"&&(Es.imagePath=this._detectIconPath()),(this.options.imagePath||Es.imagePath)+Gi.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var c=function(g,_,A){var M=_.exec(g);return M&&M[A]};return i=c(i,/^url\((['"])?(.+)\1\)$/,2),i&&c(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=it("div","leaflet-default-icon-path",document.body),c=$e(i,"background-image")||$e(i,"backgroundImage");if(document.body.removeChild(i),c=this._stripUrl(c),c)return c;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),jo=$n.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new gi(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ze(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&yt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var c=this._marker,g=c._map,_=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,M=qe(c._icon),G=g.getPixelBounds(),se=g.getPixelOrigin(),le=Ne(G.min._subtract(se).add(A),G.max._subtract(se).subtract(A));if(!le.contains(M)){var _e=ce((Math.max(le.max.x,M.x)-le.max.x)/(G.max.x-le.max.x)-(Math.min(le.min.x,M.x)-le.min.x)/(G.min.x-le.min.x),(Math.max(le.max.y,M.y)-le.max.y)/(G.max.y-le.max.y)-(Math.min(le.min.y,M.y)-le.min.y)/(G.min.y-le.min.y)).multiplyBy(_);g.panBy(_e,{animate:!1}),this._draggable._newPos._add(_e),this._draggable._startPos._add(_e),me(c._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=ue(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(fe(this._panRequest),this._panRequest=ue(this._adjustPan.bind(this,i)))},_onDrag:function(i){var c=this._marker,g=c._shadow,_=qe(c._icon),A=c._map.layerPointToLatLng(_);g&&me(g,_),c._latlng=A,i.latlng=A,i.oldLatLng=this._oldLatLng,c.fire("move",i).fire("drag",i)},_onDragEnd:function(i){fe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),er=gn.extend({options:{icon:new Es,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,c){j(this,c),this._latlng=ge(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var c=this._latlng;return this._latlng=ge(i),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=i.icon.createIcon(this._icon),_=!1;g!==this._icon&&(this._icon&&this._removeIcon(),_=!0,i.title&&(g.title=i.title),g.tagName==="IMG"&&(g.alt=i.alt||"")),ze(g,c),i.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&We(g,"focus",this._panOnFocus,this);var A=i.icon.createShadow(this._shadow),M=!1;A!==this._shadow&&(this._removeShadow(),M=!0),A&&(ze(A,c),A.alt=""),this._shadow=A,i.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&M&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Oe(this._icon,"focus",this._panOnFocus,this),xt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&xt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&me(this._icon,i),this._shadow&&me(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(ze(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),jo)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new jo(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&nt(this._icon,i),this._shadow&&nt(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var c=this.options.icon.options,g=c.iconSize?ce(c.iconSize):ce(0,0),_=c.iconAnchor?ce(c.iconAnchor):ce(0,0);i.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:g.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ou(i,c){return new er(i,c)}var Fr=gn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return j(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wi=Fr.extend({options:{fill:!0,radius:10},initialize:function(i,c){j(this,c),this._latlng=ge(i),this._radius=this.options.radius},setLatLng:function(i){var c=this._latlng;return this._latlng=ge(i),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var c=i&&i.radius||this._radius;return Fr.prototype.setStyle.call(this,i),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,c=this._radiusY||i,g=this._clickTolerance(),_=[i+g,c+g];this._pxBounds=new Ee(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function gt(i,c){return new wi(i,c)}var Xi=wi.extend({initialize:function(i,c,g){if(typeof c=="number"&&(c=f({},g,{radius:c})),j(this,c),this._latlng=ge(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Ze(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Fr.prototype.setStyle,_project:function(){var i=this._latlng.lng,c=this._latlng.lat,g=this._map,_=g.options.crs;if(_.distance===He.distance){var A=Math.PI/180,M=this._mRadius/He.R/A,G=g.project([c+M,i]),se=g.project([c-M,i]),le=G.add(se).divideBy(2),_e=g.unproject(le).lat,Le=Math.acos((Math.cos(M*A)-Math.sin(c*A)*Math.sin(_e*A))/(Math.cos(c*A)*Math.cos(_e*A)))/A;(isNaN(Le)||Le===0)&&(Le=M/Math.cos(Math.PI/180*c)),this._point=le.subtract(g.getPixelOrigin()),this._radius=isNaN(Le)?0:le.x-g.project([_e,i-Le]).x,this._radiusY=le.y-G.y}else{var Ye=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(Ye).x}this._updateBounds()}});function T(i,c,g){return new Xi(i,c,g)}var t=Fr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,c){j(this,c),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var c=1/0,g=null,_=Ni,A,M,G=0,se=this._parts.length;G<se;G++)for(var le=this._parts[G],_e=1,Le=le.length;_e<Le;_e++){A=le[_e-1],M=le[_e];var Ye=_(i,A,M,!0);Ye<c&&(c=Ye,g=_(i,A,M))}return g&&(g.distance=Math.sqrt(c)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Lo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,c){return c=c||this._defaultShape(),i=ge(i),c.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Ze,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Jn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var c=[],g=Jn(i),_=0,A=i.length;_<A;_++)g?(c[_]=ge(i[_]),this._bounds.extend(c[_])):c[_]=this._convertLatLngs(i[_]);return c},_project:function(){var i=new Ee;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),c=new te(i,i);this._rawPxBounds&&(this._pxBounds=new Ee([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(i,c,g){var _=i[0]instanceof Me,A=i.length,M,G;if(_){for(G=[],M=0;M<A;M++)G[M]=this._map.latLngToLayerPoint(i[M]),g.extend(G[M]);c.push(G)}else for(M=0;M<A;M++)this._projectLatlngs(i[M],c,g)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,g,_,A,M,G,se,le;for(g=0,A=0,M=this._rings.length;g<M;g++)for(le=this._rings[g],_=0,G=le.length;_<G-1;_++)se=mi(le[_],le[_+1],i,_,!0),se&&(c[A]=c[A]||[],c[A].push(se[0]),(se[1]!==le[_+1]||_===G-2)&&(c[A].push(se[1]),A++))}},_simplifyPoints:function(){for(var i=this._parts,c=this.options.smoothFactor,g=0,_=i.length;g<_;g++)i[g]=Bt(i[g],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,c){var g,_,A,M,G,se,le=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(g=0,M=this._parts.length;g<M;g++)for(se=this._parts[g],_=0,G=se.length,A=G-1;_<G;A=_++)if(!(!c&&_===0)&&Cs(i,se[A],se[_])<=le)return!0;return!1}});function r(i,c){return new t(i,c)}t._flat=Vs;var o=t.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Hs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var c=t.prototype._convertLatLngs.call(this,i),g=c.length;return g>=2&&c[0]instanceof Me&&c[0].equals(c[g-1])&&c.pop(),c},_setLatLngs:function(i){t.prototype._setLatLngs.call(this,i),Jn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Jn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,c=this.options.weight,g=new te(c,c);if(i=new Ee(i.min.subtract(g),i.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,A=this._rings.length,M;_<A;_++)M=Za(this._rings[_],i,!0),M.length&&this._parts.push(M)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var c=!1,g,_,A,M,G,se,le,_e;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(M=0,le=this._parts.length;M<le;M++)for(g=this._parts[M],G=0,_e=g.length,se=_e-1;G<_e;se=G++)_=g[G],A=g[se],_.y>i.y!=A.y>i.y&&i.x<(A.x-_.x)*(i.y-_.y)/(A.y-_.y)+_.x&&(c=!c);return c||t.prototype._containsPoint.call(this,i,!0)}});function a(i,c){return new o(i,c)}var u=Dr.extend({initialize:function(i,c){j(this,c),this._layers={},i&&this.addData(i)},addData:function(i){var c=P(i)?i:i.features,g,_,A;if(c){for(g=0,_=c.length;g<_;g++)A=c[g],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var M=this.options;if(M.filter&&!M.filter(i))return this;var G=h(i,M);return G?(G.feature=U(i),G.defaultOptions=G.options,this.resetStyle(G),M.onEachFeature&&M.onEachFeature(i,G),this.addLayer(G)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=f({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(c){this._setLayerStyle(c,i)},this)},_setLayerStyle:function(i,c){i.setStyle&&(typeof c=="function"&&(c=c(i.feature)),i.setStyle(c))}});function h(i,c){var g=i.type==="Feature"?i.geometry:i,_=g?g.coordinates:null,A=[],M=c&&c.pointToLayer,G=c&&c.coordsToLatLng||m,se,le,_e,Le;if(!_&&!g)return null;switch(g.type){case"Point":return se=G(_),p(M,i,se,c);case"MultiPoint":for(_e=0,Le=_.length;_e<Le;_e++)se=G(_[_e]),A.push(p(M,i,se,c));return new Dr(A);case"LineString":case"MultiLineString":return le=y(_,g.type==="LineString"?0:1,G),new t(le,c);case"Polygon":case"MultiPolygon":return le=y(_,g.type==="Polygon"?1:2,G),new o(le,c);case"GeometryCollection":for(_e=0,Le=g.geometries.length;_e<Le;_e++){var Ye=h({geometry:g.geometries[_e],type:"Feature",properties:i.properties},c);Ye&&A.push(Ye)}return new Dr(A);case"FeatureCollection":for(_e=0,Le=g.features.length;_e<Le;_e++){var st=h(g.features[_e],c);st&&A.push(st)}return new Dr(A);default:throw new Error("Invalid GeoJSON object.")}}function p(i,c,g,_){return i?i(c,g):new er(g,_&&_.markersInheritOptions&&_)}function m(i){return new Me(i[1],i[0],i[2])}function y(i,c,g){for(var _=[],A=0,M=i.length,G;A<M;A++)G=c?y(i[A],c-1,g):(g||m)(i[A]),_.push(G);return _}function E(i,c){return i=ge(i),i.alt!==void 0?[O(i.lng,c),O(i.lat,c),O(i.alt,c)]:[O(i.lng,c),O(i.lat,c)]}function N(i,c,g,_){for(var A=[],M=0,G=i.length;M<G;M++)A.push(c?N(i[M],Jn(i[M])?0:c-1,g,_):E(i[M],_));return!c&&g&&A.length>0&&A.push(A[0].slice()),A}function k(i,c){return i.feature?f({},i.feature,{geometry:c}):U(c)}function U(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Q={toGeoJSON:function(i){return k(this,{type:"Point",coordinates:E(this.getLatLng(),i)})}};er.include(Q),Xi.include(Q),wi.include(Q),t.include({toGeoJSON:function(i){var c=!Jn(this._latlngs),g=N(this._latlngs,c?1:0,!1,i);return k(this,{type:(c?"Multi":"")+"LineString",coordinates:g})}}),o.include({toGeoJSON:function(i){var c=!Jn(this._latlngs),g=c&&!Jn(this._latlngs[0]),_=N(this._latlngs,g?2:c?1:0,!0,i);return c||(_=[_]),k(this,{type:(g?"Multi":"")+"Polygon",coordinates:_})}}),ei.include({toMultiPoint:function(i){var c=[];return this.eachLayer(function(g){c.push(g.toGeoJSON(i).geometry.coordinates)}),k(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(i){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(i);var g=c==="GeometryCollection",_=[];return this.eachLayer(function(A){if(A.toGeoJSON){var M=A.toGeoJSON(i);if(g)_.push(M.geometry);else{var G=U(M);G.type==="FeatureCollection"?_.push.apply(_,G.features):_.push(G)}}}),g?k(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function q(i,c){return new u(i,c)}var ie=q,oe=gn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,c,g){this._url=i,this._bounds=Ae(c),j(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ze(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){xt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Ot(this._image),this},bringToBack:function(){return this._map&&On(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Ae(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",c=this._image=i?this._url:it("img");if(ze(c,"leaflet-image-layer"),this._zoomAnimated&&ze(c,"leaflet-zoom-animated"),this.options.className&&ze(c,this.options.className),c.onselectstart=I,c.onmousemove=I,c.onload=w(this.fire,this,"load"),c.onerror=w(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(i){var c=this._map.getZoomScale(i.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;R(this._image,g,c)},_reset:function(){var i=this._image,c=new Ee(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=c.getSize();me(i,c.min),i.style.width=g.x+"px",i.style.height=g.y+"px"},_updateOpacity:function(){nt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),Se=function(i,c,g){return new oe(i,c,g)},Ie=oe.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",c=this._image=i?this._url:it("video");if(ze(c,"leaflet-image-layer"),this._zoomAnimated&&ze(c,"leaflet-zoom-animated"),this.options.className&&ze(c,this.options.className),c.onselectstart=I,c.onmousemove=I,c.onloadeddata=w(this.fire,this,"load"),i){for(var g=c.getElementsByTagName("source"),_=[],A=0;A<g.length;A++)_.push(g[A].src);this._url=g.length>0?_:[c.src];return}P(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var M=0;M<this._url.length;M++){var G=it("source");G.src=this._url[M],c.appendChild(G)}}});function Ce(i,c,g){return new Ie(i,c,g)}var rt=oe.extend({_initImage:function(){var i=this._image=this._url;ze(i,"leaflet-image-layer"),this._zoomAnimated&&ze(i,"leaflet-zoom-animated"),this.options.className&&ze(i,this.options.className),i.onselectstart=I,i.onmousemove=I}});function et(i,c,g){return new rt(i,c,g)}var Ft=gn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,c){i&&(i instanceof Me||P(i))?(this._latlng=ge(i),j(this,c)):(j(this,i),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&nt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&nt(this._container,1),this.bringToFront(),this.options.interactive&&(ze(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(nt(this._container,0),this._removeTimeout=setTimeout(w(xt,void 0,this._container),200)):xt(this._container),this.options.interactive&&(yt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ge(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ot(this._container),this},bringToBack:function(){return this._map&&On(this._container),this},_prepareOpen:function(i){var c=this._source;if(!c._map)return!1;if(c instanceof Dr){c=null;var g=this._source._layers;for(var _ in g)if(g[_]._map){c=g[_];break}if(!c)return!1;this._source=c}if(!i)if(c.getCenter)i=c.getCenter();else if(c.getLatLng)i=c.getLatLng();else if(c.getBounds)i=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")i.innerHTML=c;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),c=ce(this.options.offset),g=this._getAnchor();this._zoomAnimated?me(this._container,i.add(g)):c=c.add(i).add(g);var _=this._containerBottom=-c.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=_+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});at.include({_initOverlay:function(i,c,g,_){var A=c;return A instanceof i||(A=new i(_).setContent(c)),g&&A.setLatLng(g),A}}),gn.include({_initOverlay:function(i,c,g,_){var A=g;return A instanceof i?(j(A,_),A._source=this):(A=c&&!_?c:new i(_,this),A.setContent(g)),A}});var Fn=Ft.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Ft.prototype.openOn.call(this,i)},onAdd:function(i){Ft.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Fr||this._source.on("preclick",qr))},onRemove:function(i){Ft.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Fr||this._source.off("preclick",qr))},getEvents:function(){var i=Ft.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",c=this._container=it("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=it("div",i+"-content-wrapper",c);if(this._contentNode=it("div",i+"-content",g),Er(c),js(this._contentNode),We(c,"contextmenu",qr),this._tipContainer=it("div",i+"-tip-container",c),this._tip=it("div",i+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=it("a",i+"-close-button",c);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',We(_,"click",function(A){wn(A),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,c=i.style;c.width="",c.whiteSpace="nowrap";var g=i.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),c.width=g+1+"px",c.whiteSpace="",c.height="";var _=i.offsetHeight,A=this.options.maxHeight,M="leaflet-popup-scrolled";A&&_>A?(c.height=A+"px",ze(i,M)):yt(i,M),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),g=this._getAnchor();me(this._container,c.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,c=parseInt($e(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+c,_=this._containerWidth,A=new te(this._containerLeft,-g-this._containerBottom);A._add(qe(this._container));var M=i.layerPointToContainerPoint(A),G=ce(this.options.autoPanPadding),se=ce(this.options.autoPanPaddingTopLeft||G),le=ce(this.options.autoPanPaddingBottomRight||G),_e=i.getSize(),Le=0,Ye=0;M.x+_+le.x>_e.x&&(Le=M.x+_-_e.x+le.x),M.x-Le-se.x<0&&(Le=M.x-se.x),M.y+g+le.y>_e.y&&(Ye=M.y+g-_e.y+le.y),M.y-Ye-se.y<0&&(Ye=M.y-se.y),(Le||Ye)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([Le,Ye]))}},_getAnchor:function(){return ce(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),jn=function(i,c){return new Fn(i,c)};at.mergeOptions({closePopupOnClick:!0}),at.include({openPopup:function(i,c,g){return this._initOverlay(Fn,i,c,g).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),gn.include({bindPopup:function(i,c){return this._popup=this._initOverlay(Fn,this._popup,i,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof Dr||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Ar(i);var c=i.layer||i.target;if(this._popup._source===c&&!(c instanceof Fr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=c,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var _t=Ft.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Ft.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Ft.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Ft.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",c=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=it("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+C(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var c,g,_=this._map,A=this._container,M=_.latLngToContainerPoint(_.getCenter()),G=_.layerPointToContainerPoint(i),se=this.options.direction,le=A.offsetWidth,_e=A.offsetHeight,Le=ce(this.options.offset),Ye=this._getAnchor();se==="top"?(c=le/2,g=_e):se==="bottom"?(c=le/2,g=0):se==="center"?(c=le/2,g=_e/2):se==="right"?(c=0,g=_e/2):se==="left"?(c=le,g=_e/2):G.x<M.x?(se="right",c=0,g=_e/2):(se="left",c=le+(Le.x+Ye.x)*2,g=_e/2),i=i.subtract(ce(c,g,!0)).add(Le).add(Ye),yt(A,"leaflet-tooltip-right"),yt(A,"leaflet-tooltip-left"),yt(A,"leaflet-tooltip-top"),yt(A,"leaflet-tooltip-bottom"),ze(A,"leaflet-tooltip-"+se),me(A,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&nt(this._container,i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(c)},_getAnchor:function(){return ce(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),_n=function(i,c){return new _t(i,c)};at.include({openTooltip:function(i,c,g){return this._initOverlay(_t,i,c,g).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),gn.include({bindTooltip:function(i,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(_t,this._tooltip,i,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var c=i?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[c](g),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof Dr||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&(We(c,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),We(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var c=i.latlng,g,_;this._tooltip.options.sticky&&i.originalEvent&&(g=this._map.mouseEventToContainerPoint(i.originalEvent),_=this._map.containerPointToLayerPoint(g),c=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(c)}});var zn=Gi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var c=i&&i.tagName==="DIV"?i:document.createElement("div"),g=this.options;if(g.html instanceof Element?(pi(c),c.appendChild(g.html)):c.innerHTML=g.html!==!1?g.html:"",g.bgPos){var _=ce(g.bgPos);c.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function Yi(i){return new zn(i)}Gi.Default=Es;var jr=gn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Be.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){j(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),xt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ot(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(On(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof te?i:new te(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var c=this.getPane().children,g=-i(-1/0,1/0),_=0,A=c.length,M;_<A;_++)M=c[_].style.zIndex,c[_]!==this._container&&M&&(g=i(g,+M));isFinite(g)&&(this.options.zIndex=g+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Be.ielt9){nt(this._container,this.options.opacity);var i=+new Date,c=!1,g=!1;for(var _ in this._tiles){var A=this._tiles[_];if(!(!A.current||!A.loaded)){var M=Math.min(1,(i-A.loaded)/200);nt(A.el,M),M<1?c=!0:(A.active?g=!0:this._onOpaqueTile(A),A.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),c&&(fe(this._fadeFrame),this._fadeFrame=ue(this._updateOpacity,this))}},_onOpaqueTile:I,_initContainer:function(){this._container||(this._container=it("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,c=this.options.maxZoom;if(i!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===i?(this._levels[g].el.style.zIndex=c-Math.abs(i-g),this._onUpdateLevel(g)):(xt(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var _=this._levels[i],A=this._map;return _||(_=this._levels[i]={},_.el=it("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=c,_.origin=A.project(A.unproject(A.getPixelOrigin()),i).round(),_.zoom=i,this._setZoomTransform(_,A.getCenter(),A.getZoom()),I(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:I,_onRemoveLevel:I,_onCreateLevel:I,_pruneTiles:function(){if(this._map){var i,c,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)c=this._tiles[i],c.retain=c.current;for(i in this._tiles)if(c=this._tiles[i],c.current&&!c.active){var _=c.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var c in this._tiles)this._tiles[c].coords.z===i&&this._removeTile(c)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)xt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,c,g,_){var A=Math.floor(i/2),M=Math.floor(c/2),G=g-1,se=new te(+A,+M);se.z=+G;var le=this._tileCoordsToKey(se),_e=this._tiles[le];return _e&&_e.active?(_e.retain=!0,!0):(_e&&_e.loaded&&(_e.retain=!0),G>_?this._retainParent(A,M,G,_):!1)},_retainChildren:function(i,c,g,_){for(var A=2*i;A<2*i+2;A++)for(var M=2*c;M<2*c+2;M++){var G=new te(A,M);G.z=g+1;var se=this._tileCoordsToKey(G),le=this._tiles[se];if(le&&le.active){le.retain=!0;continue}else le&&le.loaded&&(le.retain=!0);g+1<_&&this._retainChildren(A,M,g+1,_)}},_resetView:function(i){var c=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var c=this.options;return c.minNativeZoom!==void 0&&i<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<i?c.maxNativeZoom:i},_setView:function(i,c,g,_){var A=Math.round(c);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var M=this.options.updateWhenZooming&&A!==this._tileZoom;(!_||M)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(i),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(i,c)},_setZoomTransforms:function(i,c){for(var g in this._levels)this._setZoomTransform(this._levels[g],i,c)},_setZoomTransform:function(i,c,g){var _=this._map.getZoomScale(g,i.zoom),A=i.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(c,g)).round();Be.any3d?R(i.el,A,_):me(i.el,A)},_resetGrid:function(){var i=this._map,c=i.options.crs,g=this._tileSize=this.getTileSize(),_=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,c.wrapLng[0]],_).x/g.x),Math.ceil(i.project([0,c.wrapLng[1]],_).x/g.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([c.wrapLat[0],0],_).y/g.x),Math.ceil(i.project([c.wrapLat[1],0],_).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var c=this._map,g=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),_=c.getZoomScale(g,this._tileZoom),A=c.project(i,this._tileZoom).floor(),M=c.getSize().divideBy(_*2);return new Ee(A.subtract(M),A.add(M))},_update:function(i){var c=this._map;if(c){var g=this._clampZoom(c.getZoom());if(i===void 0&&(i=c.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(i),A=this._pxBoundsToTileRange(_),M=A.getCenter(),G=[],se=this.options.keepBuffer,le=new Ee(A.getBottomLeft().subtract([se,-se]),A.getTopRight().add([se,-se]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var _e in this._tiles){var Le=this._tiles[_e].coords;(Le.z!==this._tileZoom||!le.contains(new te(Le.x,Le.y)))&&(this._tiles[_e].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(i,g);return}for(var Ye=A.min.y;Ye<=A.max.y;Ye++)for(var st=A.min.x;st<=A.max.x;st++){var tr=new te(st,Ye);if(tr.z=this._tileZoom,!!this._isValidTile(tr)){var In=this._tiles[this._tileCoordsToKey(tr)];In?In.current=!0:G.push(tr)}}if(G.sort(function(cr,Ws){return cr.distanceTo(M)-Ws.distanceTo(M)}),G.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var zr=document.createDocumentFragment();for(st=0;st<G.length;st++)this._addTile(G[st],zr);this._level.el.appendChild(zr)}}}},_isValidTile:function(i){var c=this._map.options.crs;if(!c.infinite){var g=this._globalTileRange;if(!c.wrapLng&&(i.x<g.min.x||i.x>g.max.x)||!c.wrapLat&&(i.y<g.min.y||i.y>g.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(i);return Ae(this.options.bounds).overlaps(_)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var c=this._map,g=this.getTileSize(),_=i.scaleBy(g),A=_.add(g),M=c.unproject(_,i.z),G=c.unproject(A,i.z);return[M,G]},_tileCoordsToBounds:function(i){var c=this._tileCoordsToNwSe(i),g=new Ze(c[0],c[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var c=i.split(":"),g=new te(+c[0],+c[1]);return g.z=+c[2],g},_removeTile:function(i){var c=this._tiles[i];c&&(xt(c.el),delete this._tiles[i],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){ze(i,"leaflet-tile");var c=this.getTileSize();i.style.width=c.x+"px",i.style.height=c.y+"px",i.onselectstart=I,i.onmousemove=I,Be.ielt9&&this.options.opacity<1&&nt(i,this.options.opacity)},_addTile:function(i,c){var g=this._getTilePos(i),_=this._tileCoordsToKey(i),A=this.createTile(this._wrapCoords(i),w(this._tileReady,this,i));this._initTile(A),this.createTile.length<2&&ue(w(this._tileReady,this,i,null,A)),me(A,g),this._tiles[_]={el:A,coords:i,current:!0},c.appendChild(A),this.fire("tileloadstart",{tile:A,coords:i})},_tileReady:function(i,c,g){c&&this.fire("tileerror",{error:c,tile:g,coords:i});var _=this._tileCoordsToKey(i);g=this._tiles[_],g&&(g.loaded=+new Date,this._map._fadeAnimated?(nt(g.el,0),fe(this._fadeFrame),this._fadeFrame=ue(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),c||(ze(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Be.ielt9||!this._map._fadeAnimated?ue(this._pruneTiles,this):setTimeout(w(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var c=new te(this._wrapX?S(i.x,this._wrapX):i.x,this._wrapY?S(i.y,this._wrapY):i.y);return c.z=i.z,c},_pxBoundsToTileRange:function(i){var c=this.getTileSize();return new Ee(i.min.unscaleBy(c).floor(),i.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Ru(i){return new jr(i)}var Ki=jr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,c){this._url=i,c=j(this,c),c.detectRetina&&Be.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,c){return this._url===i&&c===void 0&&(c=!0),this._url=i,c||this.redraw(),this},createTile:function(i,c){var g=document.createElement("img");return We(g,"load",w(this._tileOnLoad,this,c,g)),We(g,"error",w(this._tileOnError,this,c,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(i),g},getTileUrl:function(i){var c={r:Be.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-i.y;this.options.tms&&(c.y=g),c["-y"]=g}return D(this._url,f(c,this.options))},_tileOnLoad:function(i,c){Be.ielt9?setTimeout(w(i,this,null,c),0):i(null,c)},_tileOnError:function(i,c,g){var _=this.options.errorTileUrl;_&&c.getAttribute("src")!==_&&(c.src=_),i(g,c)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,c=this.options.maxZoom,g=this.options.zoomReverse,_=this.options.zoomOffset;return g&&(i=c-i),i+_},_getSubdomain:function(i){var c=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var i,c;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(c=this._tiles[i].el,c.onload=I,c.onerror=I,!c.complete)){c.src=re;var g=this._tiles[i].coords;xt(c),delete this._tiles[i],this.fire("tileabort",{tile:c,coords:g})}},_removeTile:function(i){var c=this._tiles[i];if(c)return c.el.setAttribute("src",re),jr.prototype._removeTile.call(this,i)},_tileReady:function(i,c,g){if(!(!this._map||g&&g.getAttribute("src")===re))return jr.prototype._tileReady.call(this,i,c,g)}});function df(i,c){return new Ki(i,c)}var pf=Ki.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,c){this._url=i;var g=f({},this.defaultWmsParams);for(var _ in c)_ in this.options||(g[_]=c[_]);c=j(this,c);var A=c.detectRetina&&Be.retina?2:1,M=this.getTileSize();g.width=M.x*A,g.height=M.y*A,this.wmsParams=g},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Ki.prototype.onAdd.call(this,i)},getTileUrl:function(i){var c=this._tileCoordsToNwSe(i),g=this._crs,_=Ne(g.project(c[0]),g.project(c[1])),A=_.min,M=_.max,G=(this._wmsVersion>=1.3&&this._crs===Zi?[A.y,A.x,M.y,M.x]:[A.x,A.y,M.x,M.y]).join(","),se=Ki.prototype.getTileUrl.call(this,i);return se+ee(this.wmsParams,se,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+G},setParams:function(i,c){return f(this.wmsParams,i),c||this.redraw(),this}});function ug(i,c){return new pf(i,c)}Ki.WMS=pf,df.wms=ug;var Oi=gn.extend({options:{padding:.1},initialize:function(i){j(this,i),C(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ze(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,c){var g=this._map.getZoomScale(c,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,c),M=_.multiplyBy(-g).add(A).subtract(this._map._getNewPixelOrigin(i,c));Be.any3d?R(this._container,M,g):me(this._container,M)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,c=this._map.getSize(),g=this._map.containerPointToLayerPoint(c.multiplyBy(-i)).round();this._bounds=new Ee(g,g.add(c.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),gf=Oi.extend({options:{tolerance:0},getEvents:function(){var i=Oi.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Oi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");We(i,"mousemove",this._onMouseMove,this),We(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),We(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){fe(this._redrawRequest),delete this._ctx,xt(this._container),Oe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var c in this._layers)i=this._layers[c],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var i=this._bounds,c=this._container,g=i.getSize(),_=Be.retina?2:1;me(c,i.min),c.width=_*g.x,c.height=_*g.y,c.style.width=g.x+"px",c.style.height=g.y+"px",Be.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Oi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[C(i)]=i;var c=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var c=i._order,g=c.next,_=c.prev;g?g.prev=_:this._drawLast=_,_?_.next=g:this._drawFirst=g,delete i._order,delete this._layers[C(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var c=i.options.dashArray.split(/[, ]+/),g=[],_,A;for(A=0;A<c.length;A++){if(_=Number(c[A]),isNaN(_))return;g.push(_)}i.options._dashArray=g}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||ue(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var c=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ee,this._redrawBounds.extend(i._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(i._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var c=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,c=this._redrawBounds;if(this._ctx.save(),c){var g=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)i=_.layer,(!c||i._pxBounds&&i._pxBounds.intersects(c))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,c){if(this._drawing){var g,_,A,M,G=i._parts,se=G.length,le=this._ctx;if(se){for(le.beginPath(),g=0;g<se;g++){for(_=0,A=G[g].length;_<A;_++)M=G[g][_],le[_?"lineTo":"moveTo"](M.x,M.y);c&&le.closePath()}this._fillStroke(le,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var c=i._point,g=this._ctx,_=Math.max(Math.round(i._radius),1),A=(Math.max(Math.round(i._radiusY),1)||_)/_;A!==1&&(g.save(),g.scale(1,A)),g.beginPath(),g.arc(c.x,c.y/A,_,0,Math.PI*2,!1),A!==1&&g.restore(),this._fillStroke(g,i)}},_fillStroke:function(i,c){var g=c.options;g.fill&&(i.globalAlpha=g.fillOpacity,i.fillStyle=g.fillColor||g.color,i.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(i.setLineDash&&i.setLineDash(c.options&&c.options._dashArray||[]),i.globalAlpha=g.opacity,i.lineWidth=g.weight,i.strokeStyle=g.color,i.lineCap=g.lineCap,i.lineJoin=g.lineJoin,i.stroke())},_onClick:function(i){for(var c=this._map.mouseEventToLayerPoint(i),g,_,A=this._drawFirst;A;A=A.next)g=A.layer,g.options.interactive&&g._containsPoint(c)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(g))&&(_=g);this._fireEvent(_?[_]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,c)}},_handleMouseOut:function(i){var c=this._hoveredLayer;c&&(yt(this._container,"leaflet-interactive"),this._fireEvent([c],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,c){if(!this._mouseHoverThrottled){for(var g,_,A=this._drawFirst;A;A=A.next)g=A.layer,g.options.interactive&&g._containsPoint(c)&&(_=g);_!==this._hoveredLayer&&(this._handleMouseOut(i),_&&(ze(this._container,"leaflet-interactive"),this._fireEvent([_],i,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(w(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,c,g){this._map._fireDOMEvent(c,g||c.type,i)},_bringToFront:function(i){var c=i._order;if(c){var g=c.next,_=c.prev;if(g)g.prev=_;else return;_?_.next=g:g&&(this._drawFirst=g),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(i)}},_bringToBack:function(i){var c=i._order;if(c){var g=c.next,_=c.prev;if(_)_.next=g;else return;g?g.prev=_:_&&(this._drawLast=_),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(i)}}});function mf(i){return Be.canvas?new gf(i):null}var zo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),cg={_initContainer:function(){this._container=it("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Oi.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var c=i._container=zo("shape");ze(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",i._path=zo("path"),c.appendChild(i._path),this._updateStyle(i),this._layers[C(i)]=i},_addPath:function(i){var c=i._container;this._container.appendChild(c),i.options.interactive&&i.addInteractiveTarget(c)},_removePath:function(i){var c=i._container;xt(c),i.removeInteractiveTarget(c),delete this._layers[C(i)]},_updateStyle:function(i){var c=i._stroke,g=i._fill,_=i.options,A=i._container;A.stroked=!!_.stroke,A.filled=!!_.fill,_.stroke?(c||(c=i._stroke=zo("stroke")),A.appendChild(c),c.weight=_.weight+"px",c.color=_.color,c.opacity=_.opacity,_.dashArray?c.dashStyle=P(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=_.lineCap.replace("butt","flat"),c.joinstyle=_.lineJoin):c&&(A.removeChild(c),i._stroke=null),_.fill?(g||(g=i._fill=zo("fill")),A.appendChild(g),g.color=_.fillColor||_.color,g.opacity=_.fillOpacity):g&&(A.removeChild(g),i._fill=null)},_updateCircle:function(i){var c=i._point.round(),g=Math.round(i._radius),_=Math.round(i._radiusY||g);this._setPath(i,i._empty()?"M0 0":"AL "+c.x+","+c.y+" "+g+","+_+" 0,"+65535*360)},_setPath:function(i,c){i._path.v=c},_bringToFront:function(i){Ot(i._container)},_bringToBack:function(i){On(i._container)}},Xa=Be.vml?zo:Wt,Uo=Oi.extend({_initContainer:function(){this._container=Xa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){xt(this._container),Oe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var i=this._bounds,c=i.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,g.setAttribute("width",c.x),g.setAttribute("height",c.y)),me(g,i.min),g.setAttribute("viewBox",[i.min.x,i.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(i){var c=i._path=Xa("path");i.options.className&&ze(c,i.options.className),i.options.interactive&&ze(c,"leaflet-interactive"),this._updateStyle(i),this._layers[C(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){xt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[C(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var c=i._path,g=i.options;c&&(g.stroke?(c.setAttribute("stroke",g.color),c.setAttribute("stroke-opacity",g.opacity),c.setAttribute("stroke-width",g.weight),c.setAttribute("stroke-linecap",g.lineCap),c.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?c.setAttribute("stroke-dasharray",g.dashArray):c.removeAttribute("stroke-dasharray"),g.dashOffset?c.setAttribute("stroke-dashoffset",g.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),g.fill?(c.setAttribute("fill",g.fillColor||g.color),c.setAttribute("fill-opacity",g.fillOpacity),c.setAttribute("fill-rule",g.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(i,c){this._setPath(i,Dn(i._parts,c))},_updateCircle:function(i){var c=i._point,g=Math.max(Math.round(i._radius),1),_=Math.max(Math.round(i._radiusY),1)||g,A="a"+g+","+_+" 0 1,0 ",M=i._empty()?"M0 0":"M"+(c.x-g)+","+c.y+A+g*2+",0 "+A+-g*2+",0 ";this._setPath(i,M)},_setPath:function(i,c){i._path.setAttribute("d",c)},_bringToFront:function(i){Ot(i._path)},_bringToBack:function(i){On(i._path)}});Be.vml&&Uo.include(cg);function vf(i){return Be.svg||Be.vml?new Uo(i):null}at.include({getRenderer:function(i){var c=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var c=this._paneRenderers[i];return c===void 0&&(c=this._createRenderer({pane:i}),this._paneRenderers[i]=c),c},_createRenderer:function(i){return this.options.preferCanvas&&mf(i)||vf(i)}});var wf=o.extend({initialize:function(i,c){o.prototype.initialize.call(this,this._boundsToLatLngs(i),c)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Ae(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function hg(i,c){return new wf(i,c)}Uo.create=Xa,Uo.pointsToPath=Dn,u.geometryToLayer=h,u.coordsToLatLng=m,u.coordsToLatLngs=y,u.latLngToCoords=E,u.latLngsToCoords=N,u.getFeature=k,u.asFeature=U,at.mergeOptions({boxZoom:!0});var yf=$n.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){We(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){xt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),mt(),Pe(),this._startPoint=this._map.mouseEventToContainerPoint(i),We(document,{contextmenu:Ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=it("div","leaflet-zoom-box",this._container),ze(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var c=new Ee(this._point,this._startPoint),g=c.getSize();me(this._box,c.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(xt(this._box),yt(this._container,"leaflet-crosshair")),wr(),ht(),Oe(document,{contextmenu:Ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(w(this._resetState,this),0);var c=new Ze(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});at.addInitHook("addHandler","boxZoom",yf),at.mergeOptions({doubleClickZoom:!0});var _f=$n.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var c=this._map,g=c.getZoom(),_=c.options.zoomDelta,A=i.originalEvent.shiftKey?g-_:g+_;c.options.doubleClickZoom==="center"?c.setZoom(A):c.setZoomAround(i.containerPoint,A)}});at.addInitHook("addHandler","doubleClickZoom",_f),at.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Cf=$n.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new gi(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}ze(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){yt(this._map._container,"leaflet-grab"),yt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=Ae(this._map.options.maxBounds);this._offsetLimit=Ne(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var c=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(c),this._prunePositions(c)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,c){return i-(i-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;i.x<c.min.x&&(i.x=this._viscousLimit(i.x,c.min.x)),i.y<c.min.y&&(i.y=this._viscousLimit(i.y,c.min.y)),i.x>c.max.x&&(i.x=this._viscousLimit(i.x,c.max.x)),i.y>c.max.y&&(i.y=this._viscousLimit(i.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,c=Math.round(i/2),g=this._initialWorldOffset,_=this._draggable._newPos.x,A=(_-c+g)%i+c-g,M=(_+c+g)%i-c-g,G=Math.abs(A+g)<Math.abs(M+g)?A:M;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=G},_onDragEnd:function(i){var c=this._map,g=c.options,_=!g.inertia||i.noInertia||this._times.length<2;if(c.fire("dragend",i),_)c.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),M=(this._lastTime-this._times[0])/1e3,G=g.easeLinearity,se=A.multiplyBy(G/M),le=se.distanceTo([0,0]),_e=Math.min(g.inertiaMaxSpeed,le),Le=se.multiplyBy(_e/le),Ye=_e/(g.inertiaDeceleration*G),st=Le.multiplyBy(-Ye/2).round();!st.x&&!st.y?c.fire("moveend"):(st=c._limitOffset(st,c.options.maxBounds),ue(function(){c.panBy(st,{duration:Ye,easeLinearity:G,noMoveStart:!0,animate:!0})}))}}});at.addInitHook("addHandler","dragging",Cf),at.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ef=$n.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),We(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Oe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,c=document.documentElement,g=i.scrollTop||c.scrollTop,_=i.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(_,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var c=this._panKeys={},g=this.keyCodes,_,A;for(_=0,A=g.left.length;_<A;_++)c[g.left[_]]=[-1*i,0];for(_=0,A=g.right.length;_<A;_++)c[g.right[_]]=[i,0];for(_=0,A=g.down.length;_<A;_++)c[g.down[_]]=[0,i];for(_=0,A=g.up.length;_<A;_++)c[g.up[_]]=[0,-1*i]},_setZoomDelta:function(i){var c=this._zoomKeys={},g=this.keyCodes,_,A;for(_=0,A=g.zoomIn.length;_<A;_++)c[g.zoomIn[_]]=i;for(_=0,A=g.zoomOut.length;_<A;_++)c[g.zoomOut[_]]=-i},_addHooks:function(){We(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var c=i.keyCode,g=this._map,_;if(c in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(_=this._panKeys[c],i.shiftKey&&(_=ce(_).multiplyBy(3)),g.options.maxBounds&&(_=g._limitOffset(ce(_),g.options.maxBounds)),g.options.worldCopyJump){var A=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(_)));g.panTo(A)}else g.panBy(_)}else if(c in this._zoomKeys)g.setZoom(g.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;Ar(i)}}});at.addInitHook("addHandler","keyboard",Ef),at.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Af=$n.extend({addHooks:function(){We(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Oe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var c=Wi(i),g=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var _=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(w(this._performZoom,this),_),Ar(i)},_performZoom:function(){var i=this._map,c=i.getZoom(),g=this._map.options.zoomSnap||0;i._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,M=g?Math.ceil(A/g)*g:A,G=i._limitZoom(c+(this._delta>0?M:-M))-c;this._delta=0,this._startTime=null,G&&(i.options.scrollWheelZoom==="center"?i.setZoom(c+G):i.setZoomAround(this._lastMousePos,c+G))}});at.addInitHook("addHandler","scrollWheelZoom",Af);var fg=600;at.mergeOptions({tapHold:Be.touchNative&&Be.safari&&Be.mobile,tapTolerance:15});var xf=$n.extend({addHooks:function(){We(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var c=i.touches[0];this._startPos=this._newPos=new te(c.clientX,c.clientY),this._holdTimeout=setTimeout(w(function(){this._cancel(),this._isTapValid()&&(We(document,"touchend",wn),We(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),fg),We(document,"touchend touchcancel contextmenu",this._cancel,this),We(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Oe(document,"touchend",wn),Oe(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Oe(document,"touchend touchcancel contextmenu",this._cancel,this),Oe(document,"touchmove",this._onMove,this)},_onMove:function(i){var c=i.touches[0];this._newPos=new te(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,c){var g=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});g._simulated=!0,c.target.dispatchEvent(g)}});at.addInitHook("addHandler","tapHold",xf),at.mergeOptions({touchZoom:Be.touch,bounceAtZoomLimits:!0});var Sf=$n.extend({addHooks:function(){ze(this._map._container,"leaflet-touch-zoom"),We(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){yt(this._map._container,"leaflet-touch-zoom"),Oe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var c=this._map;if(!(!i.touches||i.touches.length!==2||c._animatingZoom||this._zooming)){var g=c.mouseEventToContainerPoint(i.touches[0]),_=c.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(g.add(_)._divideBy(2))),this._startDist=g.distanceTo(_),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),We(document,"touchmove",this._onTouchMove,this),We(document,"touchend touchcancel",this._onTouchEnd,this),wn(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var c=this._map,g=c.mouseEventToContainerPoint(i.touches[0]),_=c.mouseEventToContainerPoint(i.touches[1]),A=g.distanceTo(_)/this._startDist;if(this._zoom=c.getScaleZoom(A,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&A<1||this._zoom>c.getMaxZoom()&&A>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var M=g._add(_)._divideBy(2)._subtract(this._centerPoint);if(A===1&&M.x===0&&M.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(M),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),fe(this._animRequest);var G=w(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ue(G,this,!0),wn(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,fe(this._animRequest),Oe(document,"touchmove",this._onTouchMove,this),Oe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});at.addInitHook("addHandler","touchZoom",Sf),at.BoxZoom=yf,at.DoubleClickZoom=_f,at.Drag=Cf,at.Keyboard=Ef,at.ScrollWheelZoom=Af,at.TapHold=xf,at.TouchZoom=Sf,s.Bounds=Ee,s.Browser=Be,s.CRS=vt,s.Canvas=gf,s.Circle=Xi,s.CircleMarker=wi,s.Class=ne,s.Control=xr,s.DivIcon=zn,s.DivOverlay=Ft,s.DomEvent=Bn,s.DomUtil=ft,s.Draggable=gi,s.Evented=de,s.FeatureGroup=Dr,s.GeoJSON=u,s.GridLayer=jr,s.Handler=$n,s.Icon=Gi,s.ImageOverlay=oe,s.LatLng=Me,s.LatLngBounds=Ze,s.Layer=gn,s.LayerGroup=ei,s.LineUtil=Ga,s.Map=at,s.Marker=er,s.Mixin=Va,s.Path=Fr,s.Point=te,s.PolyUtil=Po,s.Polygon=o,s.Polyline=t,s.Popup=Fn,s.PosAnimation=Mo,s.Projection=Bo,s.Rectangle=wf,s.Renderer=Oi,s.SVG=Uo,s.SVGOverlay=rt,s.TileLayer=Ki,s.Tooltip=_t,s.Transformation=kt,s.Util=J,s.VideoOverlay=Ie,s.bind=w,s.bounds=Ne,s.canvas=mf,s.circle=T,s.circleMarker=gt,s.control=_s,s.divIcon=Yi,s.extend=f,s.featureGroup=Br,s.geoJSON=q,s.geoJson=ie,s.gridLayer=Ru,s.icon=Fo,s.imageOverlay=Se,s.latLng=ge,s.latLngBounds=Ae,s.layerGroup=ur,s.map=Ua,s.marker=Ou,s.point=ce,s.polygon=a,s.polyline=r,s.popup=jn,s.rectangle=hg,s.setOptions=j,s.stamp=C,s.svg=vf,s.svgOverlay=et,s.tileLayer=df,s.tooltip=_n,s.transformation=dt,s.version=l,s.videoOverlay=Ce;var dg=window.L;s.noConflict=function(){return window.L=dg,this},window.L=s})})(rh,rh.exports);var To=rh.exports;const Eu=iu(To);function Au(e,n,s){return Object.freeze({instance:e,context:n,container:s})}function xu(e,n){return n==null?function(l,f){const d=K.useRef();return d.current||(d.current=e(l,f)),d}:function(l,f){const d=K.useRef();d.current||(d.current=e(l,f));const w=K.useRef(l),{instance:x}=d.current;return K.useEffect(function(){w.current!==l&&(n(x,l,w.current),w.current=l)},[x,l,f]),d}}function Rp(e,n){K.useEffect(function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){var d;(d=n.layerContainer)==null||d.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}function kp(e){return function(s){const l=Cu(),f=e(af(s,l),l);return rv(l.map,s.attribution),Op(f.current,s.eventHandlers),Rp(f.current,l),f}}function av(e,n){const s=K.useRef();K.useEffect(function(){if(n.pathOptions!==s.current){const f=n.pathOptions??{};e.instance.setStyle(f),s.current=f}},[e,n])}function lv(e){return function(s){const l=Cu(),f=e(af(s,l),l);return Op(f.current,s.eventHandlers),Rp(f.current,l),av(f.current,s),f}}function uv(e){function n(f,d){return Au(e(f),d)}const s=xu(n),l=ov(s);return Np(l)}function cv(e,n){const s=xu(e,n),l=kp(s);return Tp(l)}function hv(e,n){const s=xu(e,n),l=lv(s);return Tp(l)}function fv(e,n){const s=xu(e,n),l=kp(s);return Np(l)}function dv(e,n,s){const{opacity:l,zIndex:f}=n;l!=null&&l!==s.opacity&&e.setOpacity(l),f!=null&&f!==s.zIndex&&e.setZIndex(f)}function Mp(){return Cu().map}function pv(e){const n=Mp();return K.useEffect(function(){return n.on(e),function(){n.off(e)}},[n,e]),n}const gv=uv(function(n){return new To.Control.Attribution(n)});function ih(){return ih=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},ih.apply(this,arguments)}function mv({bounds:e,boundsOptions:n,center:s,children:l,className:f,id:d,placeholder:w,style:x,whenReady:C,zoom:v,...S},I){const[O]=K.useState({className:f,id:d,style:x}),[z,H]=K.useState(null);K.useImperativeHandle(I,()=>(z==null?void 0:z.map)??null,[z]);const j=K.useCallback(F=>{if(F!==null&&z===null){const D=new To.Map(F,S);s!=null&&v!=null?D.setView(s,v):e!=null&&D.fitBounds(e,n),C!=null&&D.whenReady(C),H(sv(D))}},[]);K.useEffect(()=>()=>{z==null||z.map.remove()},[z]);const ee=z?Ht.createElement(bp,{value:z},l):w??null;return Ht.createElement("div",ih({},O,{ref:j}),ee)}const vv=K.forwardRef(mv),Il=cv(function({position:n,...s},l){const f=new To.Marker(n,s);return Au(f,Sp(l,{overlayContainer:f}))},function(n,s,l){s.position!==l.position&&n.setLatLng(s.position),s.icon!=null&&s.icon!==l.icon&&n.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==l.zIndexOffset&&n.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==l.opacity&&n.setOpacity(s.opacity),n.dragging!=null&&s.draggable!==l.draggable&&(s.draggable===!0?n.dragging.enable():n.dragging.disable())}),Qo=hv(function({positions:n,...s},l){const f=new To.Polyline(n,s);return Au(f,Sp(l,{overlayContainer:f}))},function(n,s,l){s.positions!==l.positions&&n.setLatLngs(s.positions)}),wv=fv(function({url:n,...s},l){const f=new To.TileLayer(n,af(s,l));return Au(f,l)},function(n,s,l){dv(n,s,l);const{url:f}=s;f!=null&&f!==l.url&&n.setUrl(f)}),yv={},Fd=e=>{let n;const s=new Set,l=(S,I)=>{const O=typeof S=="function"?S(n):S;if(!Object.is(O,n)){const z=n;n=I??(typeof O!="object"||O===null)?O:Object.assign({},n,O),s.forEach(H=>H(n,z))}},f=()=>n,C={setState:l,getState:f,getInitialState:()=>v,subscribe:S=>(s.add(S),()=>s.delete(S)),destroy:()=>{(yv?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},v=n=e(l,f,C);return C},_v=e=>e?Fd(e):Fd;var Pp={exports:{}},Lp={},Dp={exports:{}},Bp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xo=K;function Cv(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ev=typeof Object.is=="function"?Object.is:Cv,Av=xo.useState,xv=xo.useEffect,Sv=xo.useLayoutEffect,Iv=xo.useDebugValue;function bv(e,n){var s=n(),l=Av({inst:{value:s,getSnapshot:n}}),f=l[0].inst,d=l[1];return Sv(function(){f.value=s,f.getSnapshot=n,sc(f)&&d({inst:f})},[e,s,n]),xv(function(){return sc(f)&&d({inst:f}),e(function(){sc(f)&&d({inst:f})})},[e]),Iv(s),s}function sc(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Ev(e,s)}catch{return!0}}function Tv(e,n){return n()}var Nv=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Tv:bv;Bp.useSyncExternalStore=xo.useSyncExternalStore!==void 0?xo.useSyncExternalStore:Nv;Dp.exports=Bp;var Ov=Dp.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Su=K,Rv=Ov;function kv(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Mv=typeof Object.is=="function"?Object.is:kv,Pv=Rv.useSyncExternalStore,Lv=Su.useRef,Dv=Su.useEffect,Bv=Su.useMemo,Fv=Su.useDebugValue;Lp.useSyncExternalStoreWithSelector=function(e,n,s,l,f){var d=Lv(null);if(d.current===null){var w={hasValue:!1,value:null};d.current=w}else w=d.current;d=Bv(function(){function C(z){if(!v){if(v=!0,S=z,z=l(z),f!==void 0&&w.hasValue){var H=w.value;if(f(H,z))return I=H}return I=z}if(H=I,Mv(S,z))return H;var j=l(z);return f!==void 0&&f(H,j)?(S=z,H):(S=z,I=j)}var v=!1,S,I,O=s===void 0?null:s;return[function(){return C(n())},O===null?void 0:function(){return C(O())}]},[n,s,l,f]);var x=Pv(e,d[0],d[1]);return Dv(function(){w.hasValue=!0,w.value=x},[x]),Fv(x),x};Pp.exports=Lp;var jv=Pp.exports;const zv=iu(jv),Fp={},{useDebugValue:Uv}=Ht,{useSyncExternalStoreWithSelector:Hv}=zv;let jd=!1;const Vv=e=>e;function Wv(e,n=Vv,s){(Fp?"production":void 0)!=="production"&&s&&!jd&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),jd=!0);const l=Hv(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,s);return Uv(l),l}const zd=e=>{(Fp?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof e=="function"?_v(e):e,s=(l,f)=>Wv(n,l,f);return Object.assign(s,n),s},lf=e=>e?zd(e):zd,jp=e=>{if(typeof globalThis<"u"&&typeof globalThis.atob=="function")return globalThis.atob(e);if(typeof Buffer<"u")return Buffer.from(e,"base64").toString("utf-8");throw new Error("Base64 decoding is not supported in this environment.")},Zv=e=>{const n=new Uint8Array(e.length);for(let s=0;s<e.length;s+=1)n[s]=e.charCodeAt(s);return n},Gv=e=>{const n=e.replace(/-/g,"+").replace(/_/g,"/"),s=n.length%4===0?"":"=".repeat(4-n.length%4),l=jp(`${n}${s}`);return Zv(l)},Ud=e=>Math.round(e*1e6)/1e6,Hd=e=>typeof e=="number"&&Number.isFinite(e),Xs=e=>{if(!e||typeof e!="object")return null;const n=Number(e.lat),s=Number(e.lng);return!Hd(n)||!Hd(s)||n<-90||n>90||s<-180||s>180?null:{lat:Ud(n),lng:Ud(s)}},Ra=4,Gs=1e5,$l="#38bdf8",sh={r:"#ef4444",o:"#f97316",a:"#f59e0b",y:"#eab308",l:"#84cc16",g:"#22c55e",e:"#10b981",t:"#14b8a6",c:"#06b6d4",s:"#0ea5e9",b:"#3b82f6",i:"#6366f1",v:"#8b5cf6",p:"#a855f7",f:"#d946ef",k:"#ec4899",z:"#f43f5e",x:"#64748b",d:"#6b7280",m:"#71717a",n:"#737373",w:"#78716c",0:"#000000",1:"#ffffff"},Vd=Object.entries(sh).reduce((e,[n,s])=>(e[s]=n,e),{}),fa=e=>{if(!e||typeof e!="object")return null;const n=typeof e.version=="number"?e.version:Ra;if(n<3){let d=[],w="direct";if(n===1){w=e.connectVia==="route"?"route":"direct";const x=Xs(e.start),C=Xs(e.end),v=Array.isArray(e.checkpoints)?e.checkpoints.map(Xs).filter(Boolean):[];x&&d.push(x),d.push(...v),C&&d.push(C)}else w=e.connectVia==="route"?"route":"direct",d=Array.isArray(e.checkpoints)?e.checkpoints.map(Xs).filter(Boolean):[];return{version:3,connectVia:w,checkpoints:d,routes:[{name:"Route 1",color:"#38bdf8",indices:d.map((x,C)=>C),isVisible:!0}]}}if(n>Ra)return null;const s=e.connectVia==="route"?"route":"direct",l=Array.isArray(e.checkpoints)?e.checkpoints.map(Xs).filter(Boolean):[],f=Array.isArray(e.routes)?e.routes.map(d=>({name:typeof d.name=="string"?d.name.slice(0,20):"Route",color:d.color===null?null:typeof d.color=="string"?d.color:$l,indices:Array.isArray(d.indices)?d.indices.filter(w=>typeof w=="number"&&w>=0&&w<l.length):[],isVisible:typeof d.isVisible=="boolean"?d.isVisible:!0})):[];return{version:n,connectVia:s,checkpoints:l,routes:f}},Xv=({checkpointMap:e,routes:n,connectVia:s,includeNames:l=!1,includeColors:f=!1})=>{const d=new Set;n.forEach(v=>{Array.isArray(v.items)&&v.items.forEach(S=>d.add(S))});const w=[],x={};Array.from(d).forEach(v=>{const S=e[v];S&&S.position&&(x[v]=w.length,w.push(S.position))});const C=n.map(v=>({name:l?v.name:"",color:f?v.color:null,isVisible:v.isVisible,indices:(v.items||[]).map(S=>x[S]).filter(S=>typeof S=="number")}));return{version:Ra,connectVia:s,checkpoints:w,routes:C}},Yv=e=>{try{const n=Gv(e);if(n.length<4)return null;const s=new DataView(n.buffer,n.byteOffset,n.byteLength);let l=0;const f=s.getUint8(l);if(l+=1,f<1||f>Ra)return null;if(f<3){let I="direct";const O=[];if(f===1){const z=s.getUint8(l);l+=1,I=s.getUint8(l)===1?"route":"direct",l+=1;const H=s.getUint16(l,!1);l+=2;const j=()=>{const ee=s.getInt32(l,!1)/Gs;l+=4;const F=s.getInt32(l,!1)/Gs;return l+=4,{lat:ee,lng:F}};z&1&&O.push(j());for(let ee=0;ee<H;ee+=1)O.push(j());z&2&&O.push(j())}else{I=s.getUint8(l)===1?"route":"direct",l+=1;const z=s.getUint16(l,!1);l+=2;for(let H=0;H<z;H+=1){const j=s.getInt32(l,!1)/Gs;l+=4;const ee=s.getInt32(l,!1)/Gs;l+=4,O.push({lat:j,lng:ee})}}return{version:3,connectVia:I,checkpoints:O,routes:[{name:"Route 1",color:$l,isVisible:!0,indices:O.map((z,H)=>H)}]}}const d=s.getUint8(l)===1?"route":"direct";l+=1;const w=s.getUint16(l,!1);l+=2;const x=s.getUint8(l);l+=1;const C=[];for(let I=0;I<w;I+=1){const O=s.getInt32(l,!1)/Gs;l+=4;const z=s.getInt32(l,!1)/Gs;l+=4,C.push({lat:O,lng:z})}const v=new TextDecoder,S=[];for(let I=0;I<x;I+=1)if(f===3){const O=s.getUint8(l);l+=1;const z=new Uint8Array(n.buffer,n.byteOffset+l,O),H=v.decode(z);l+=O;const j=s.getUint8(l);l+=1;const ee=new Uint8Array(n.buffer,n.byteOffset+l,j),F=v.decode(ee);l+=j;const D=s.getUint8(l)===1;l+=1;const P=s.getUint16(l,!1);l+=2;const V=[];for(let re=0;re<P;re+=1)V.push(s.getUint16(l,!1)),l+=2;S.push({name:F,color:H,isVisible:D,indices:V})}else{const O=s.getUint8(l);l+=1;const z=new Uint8Array(n.buffer,n.byteOffset+l,O);let H=v.decode(z);l+=O,H||(H=`Route ${I+1}`);const j=s.getUint16(l,!1);l+=2;const ee=[];for(let F=0;F<j;F+=1)ee.push(s.getUint16(l,!1)),l+=2;S.push({name:H,color:$l,isVisible:!0,indices:ee})}return{version:f,connectVia:d,checkpoints:C,routes:S}}catch(n){return console.error(n),null}},Kv=e=>{const n=e.checkpoints,s=e.routes;let l="";return s.map(f=>{const d=f.indices.map(v=>{const S=n[v];if(!S)return null;const I=uf(S,9);let O=0;if(l){const H=Math.min(l.length,I.length);for(;O<H&&l[O]===I[O];)O+=1}const z=I.slice(O);return l=I,z}).filter(v=>v!==null);if(d.length===0)return null;const w=d.join("_"),x=f.name&&f.name.trim().length>0,C=f.color&&f.color.trim().length>0;if(x||C){const v=x?encodeURIComponent(f.name).replace(/%20/g,"+"):"";let S="";if(C){const I=f.color.toLowerCase();Vd[I]?S=Vd[I]:I.startsWith("#")?(S=I.slice(1),S.length===6&&S[0]===S[1]&&S[2]===S[3]&&S[4]===S[5]&&(S=S[0]+S[2]+S[4])):S=encodeURIComponent(f.color)}return C?`(${v},${S})${w}`:`(${v})${w}`}return w}).filter(f=>f&&f.length>0).join(" ")},Qv=e=>{if(!/^[a-z0-9_ \(\)\%\-\.\~\!\*\'\(\)\,\+]+$/i.test(e))return null;const n=e.split(/\s+/).filter(Boolean);if(n.length===0)return null;const s=[],l=[];let f="";return n.forEach((d,w)=>{let x=`Route ${w+1}`,C=$l,v=d;const S=d.match(/^\((.*?)\)(.*)/);if(S){const z=S[1];v=S[2];const H=z.split(",");if(H.length>0&&H[0])try{x=decodeURIComponent(H[0].replace(/\+/g,"%20"))}catch{x=H[0]}if(H.length>1&&H[1]){const j=H[1];if(sh[j])C=sh[j];else if(/^[0-9a-f]{3,6}$/i.test(j))C=`#${j}`;else try{C=decodeURIComponent(j)}catch{C=j}}}const I=v.length===0?[""]:v.split("_"),O=[];I.forEach(z=>{let H=z;const ee=9-z.length;ee>0&&f.length>=ee&&(H=f.slice(0,ee)+z);const F=oh(H);F&&(f=H,O.push(s.length),s.push(F))}),O.length>0&&l.push({name:x,color:C,isVisible:!0,indices:O})}),l.length===0?null:{version:Ra,connectVia:"direct",checkpoints:s,routes:l}},qv=e=>{const n=fa(e);return n?Kv(n):""},$v=e=>{if(typeof e!="string")return null;const n=e.trim();if(!n)return null;const s=Yv(n);if(s)return fa(s);const l=Qv(n);if(l)return fa(l);try{const f=JSON.parse(jp(n));return fa(f)}catch{return null}},zp="0123456789bcdefghjkmnpqrstuvwxyz",da=[16,8,4,2,1],uf=(e,n=9)=>{if(typeof n!="number"||n<1||n>12)throw new Error("encodeLocationCode precision must be between 1 and 12.");const s=Xs(e);if(!s)return null;let l=-90,f=90,d=-180,w=180,x=!0,C=0,v=0,S="";for(;S.length<n;){if(x){const I=(d+w)/2;s.lng>=I?(v|=da[C],d=I):w=I}else{const I=(l+f)/2;s.lat>=I?(v|=da[C],l=I):f=I}x=!x,C<da.length-1?C+=1:(S+=zp[v],C=0,v=0)}return S},oh=e=>{if(typeof e!="string"||e.length===0)return null;let n=-90,s=90,l=-180,f=180,d=!0;for(let w=0;w<e.length;w+=1){const x=e[w].toLowerCase(),C=zp.indexOf(x);if(C===-1)return null;for(let v=0;v<da.length;v+=1){const S=da[v];if(d){const I=(l+f)/2;C&S?l=I:f=I}else{const I=(n+s)/2;C&S?n=I:s=I}d=!d}}return{lat:(n+s)/2,lng:(l+f)/2}},qo=e=>`${e}-${Math.random().toString(36).slice(2,9)}`,ah="#38bdf8",mo={checkpointMap:{},routes:[{id:"route-1",name:"Route 1",color:ah,items:[],isVisible:!0,nextLabelIndex:1}],activeRouteId:"route-1",selectedId:null,connectVia:"direct",placementMode:null},Wd=e=>e==null?null:typeof e=="string"?{type:e}:typeof e=="object"&&typeof e.type=="string"?e:null,Jv=lf((e,n)=>({...mo,addRoute:(s="New Route",l=ah)=>e(f=>{const d={id:qo("route"),name:s,color:l,items:[],isVisible:!0,nextLabelIndex:1};return{routes:[...f.routes,d],activeRouteId:d.id}}),removeRoute:s=>e(l=>{if(l.routes.length<=1)return l;const f=l.routes.filter(C=>C.id!==s),d=l.activeRouteId===s?f[0].id:l.activeRouteId,w=new Set(f.flatMap(C=>C.items)),x={};return Object.values(l.checkpointMap).forEach(C=>{w.has(C.id)&&(x[C.id]=C)}),{routes:f,activeRouteId:d,checkpointMap:x,selectedId:l.selectedId}}),setActiveRoute:s=>e(l=>({activeRouteId:l.routes.find(f=>f.id===s)?s:l.activeRouteId})),updateRoute:(s,l)=>e(f=>({routes:f.routes.map(d=>d.id===s?{...d,...l}:d)})),setPlacementMode:s=>e(l=>{const f=Wd(s);if(!f)return{placementMode:null};const d=Wd(l.placementMode);return(d==null?void 0:d.type)===f.type&&((d==null?void 0:d.insertIndex)??null)===((f==null?void 0:f.insertIndex)??null)?{placementMode:null}:{placementMode:f}}),toggleConnectMode:()=>e(s=>({connectVia:s.connectVia==="direct"?"route":"direct"})),addCheckpoint:(s,l)=>e(f=>{var O;const d=f.routes.find(z=>z.id===f.activeRouteId);if(!d)return f;const w=typeof d.nextLabelIndex=="number"?d.nextLabelIndex:(((O=d.items)==null?void 0:O.length)??0)+1,x={id:qo("checkpoint"),position:s,name:`Point ${w}`},C={...f.checkpointMap,[x.id]:x},v=[...d.items];typeof l=="number"&&l>=0&&l<=v.length?v.splice(l,0,x.id):v.push(x.id);const S={...d,items:v,nextLabelIndex:w+1},I=f.routes.map(z=>z.id===f.activeRouteId?S:z);return{checkpointMap:C,routes:I,placementMode:null,selectedId:x.id}}),selectCheckpoint:s=>e({selectedId:s}),updateCheckpoint:(s,l)=>e(f=>({checkpointMap:{...f.checkpointMap,[s]:{...f.checkpointMap[s],position:l}}})),moveCheckpoint:(s,l)=>e(f=>{const d=f.routes.find(C=>C.id===f.activeRouteId);if(!d)return f;const w=d.items.indexOf(s);if(w===-1||typeof l!="number")return f;const x=[...d.items];return l<0||l>=x.length||l===w?f:(x.splice(w,1),x.splice(l,0,s),{routes:f.routes.map(C=>C.id===f.activeRouteId?{...C,items:x}:C)})}),removeCheckpoint:s=>e(l=>{const f=l.routes.find(v=>v.id===l.activeRouteId);if(!f)return l;const d=f.items.includes(s);let w=l.routes;d?w=l.routes.map(v=>v.id===l.activeRouteId?{...v,items:v.items.filter(S=>S!==s)}:v):w=l.routes.map(v=>({...v,items:v.items.filter(S=>S!==s)}));const x=new Set(w.flatMap(v=>v.items)),C={};return Object.values(l.checkpointMap).forEach(v=>{x.has(v.id)&&(C[v.id]=v)}),{routes:w,checkpointMap:C,selectedId:l.selectedId===s?null:l.selectedId,placementMode:null}}),loadRouteSnapshot:s=>e(l=>{const f=fa(s);if(!f)return l;const d={},x=(f.checkpoints||[]).map((v,S)=>{const I=qo("checkpoint");return d[I]={id:I,position:v,name:`Point ${S+1}`},I}),C=f.routes.map(v=>{const S=v.indices.map(I=>x[I]).filter(Boolean);return{id:qo("route"),name:v.name,color:v.color,isVisible:v.isVisible,items:S,nextLabelIndex:S.length+1}});if(C.length===0){const v=qo("route");C.push({id:v,name:"Route 1",color:ah,items:x,isVisible:!0,nextLabelIndex:x.length+1})}return{...mo,connectVia:f.connectVia,checkpointMap:d,routes:C,activeRouteId:C[0].id,selectedId:null,placementMode:null}}),clearAll:()=>e(mo),swapCheckpoints:(s,l)=>e(f=>{const d=f.routes.find(v=>v.id===f.activeRouteId);if(!d)return f;const w=d.items.indexOf(s),x=d.items.indexOf(l);if(w===-1||x===-1)return f;const C=[...d.items];return C[w]=l,C[x]=s,{routes:f.routes.map(v=>v.id===f.activeRouteId?{...v,items:C}:v)}})})),No=()=>Jv(e=>{const n=Array.isArray(e.routes)?e.routes:mo.routes,s=e.checkpointMap||mo.checkpointMap,l=e.activeRouteId||mo.activeRouteId,f=n.find(w=>w.id===l)||n[0],d=f?f.items.map(w=>s[w]).filter(Boolean):[];return{...e,routes:n,checkpointMap:s,activeRouteId:l,checkpoints:d,activeRoute:f}}),ew=({onDropItem:e})=>{const n=Mp();return K.useEffect(()=>{if(!e)return;const s=n.getContainer(),l=w=>{w.preventDefault(),w.dataTransfer.dropEffect="copy"},f=w=>{w.preventDefault(),w.dataTransfer.dropEffect="copy"},d=w=>{w.preventDefault(),w.stopPropagation();const{clientX:x,clientY:C}=w,v=s.getBoundingClientRect(),S=x-v.left,I=C-v.top,O=n.containerPointToLatLng([S,I]),z=w.dataTransfer.getData("application/x-cadet-map-item");z&&e(z,O)};return s.addEventListener("dragenter",l),s.addEventListener("dragover",f),s.addEventListener("drop",d),()=>{s.removeEventListener("dragenter",l),s.removeEventListener("dragover",f),s.removeEventListener("drop",d)}},[n,e]),null},tw=Object.assign({"../../assets/compass.png":q2,"../../assets/layer.png":$2,"../../assets/menu.png":J2,"../../assets/route.png":ev,"../../assets/settings.png":tv,"../../assets/zoom.png":nv}),nw=e=>tw[`../../assets/${e}.png`]??null,$o=({iconName:e,label:n,onClick:s,title:l,isActive:f=!1,disabled:d=!1,themeStyles:w})=>{const x=nw(e),C=(w==null?void 0:w.button)??{},v=C.base??"flex h-12 w-12 items-center justify-center rounded-2xl border transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",S=C.active??"border-sky-500 bg-sky-200 text-slate-900 focus-visible:ring-sky-400",I=C.idle??"border-slate-300 bg-slate-100 text-slate-900 hover:border-slate-400 hover:bg-slate-200 focus-visible:ring-slate-500/50",O=d?C.disabled??"opacity-60 pointer-events-none":"",z=(w==null?void 0:w.iconStyle)??null,H=(w==null?void 0:w.iconClass)??"";return b.jsx("button",{type:"button",className:`${v} ${f?S:I} ${O}`,onClick:s,title:l??n,"aria-label":n,disabled:d,children:x?b.jsx("img",{src:x,alt:"",className:`h-5 w-5 object-contain select-none ${H}`,style:z??void 0,"aria-hidden":"true",draggable:"false"}):b.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide",children:n})})},rw=[51.505,10],oc={street:{id:"street",label:"OpenStreetMap Standard",description:"Balanced street map with global coverage sourced from the OpenStreetMap community.",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:["a","b","c"],maxZoom:19,minZoom:3,category:"Streets"},light:{id:"light",label:"Carto Light",description:"Soft grayscale basemap designed for daylight navigation with minimal visual noise.",url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://carto.com/attributions">CARTO</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:["a","b","c","d"],maxZoom:19,minZoom:3,category:"Streets"},dark:{id:"dark",label:"Carto Dark Matter",description:"Night-friendly basemap with high contrast roads and landmarks on a deep navy canvas.",url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://carto.com/attributions">CARTO</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:["a","b","c","d"],maxZoom:19,minZoom:3,category:"Streets"},voyager:{id:"voyager",label:"Carto Voyager",description:"Colorful, detail-rich cartography ideal for orientation and wayfinding at multiple zoom levels.",url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://carto.com/attributions">CARTO</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:["a","b","c","d"],maxZoom:19,minZoom:3,category:"Streets"},hot:{id:"hot",label:"OSM Humanitarian",description:"Humanitarian OpenStreetMap Team basemap with emphasis on populated areas and infrastructure.",url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="https://www.hotosm.org/">Humanitarian OpenStreetMap Team</a>',subdomains:["a","b","c"],maxZoom:19,minZoom:3,category:"Streets"},topo:{id:"topo",label:"OpenTopoMap",description:"Topographic map derived from OSM data with contour lines and terrain shading.",url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | SRTM | <a href="https://opentopomap.org">OpenTopoMap</a>',subdomains:["a","b","c"],maxZoom:17,minZoom:3,category:"Outdoor"},satellite:{id:"satellite",label:"Esri World Imagery",description:"High-resolution satellite and aerial imagery from Esri and the GIS user community.",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Imagery &copy; Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",subdomains:[],maxZoom:19,minZoom:3,category:"Imagery"}},iw=["street","light","dark","voyager","hot","topo","satellite"],Zd={light:{container:"pointer-events-auto flex flex-col gap-2 rounded-3xl border border-slate-200 bg-slate-100 p-2 text-slate-900 backdrop-blur-sm",badge:"rounded-full border border-slate-300 bg-slate-100 px-3 py-1 text-[10px] font-semibold text-slate-700",button:{base:"flex h-12 w-12 items-center justify-center rounded-2xl border transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-slate-400/40 focus-visible:ring-offset-slate-100/60",active:"border-sky-500 bg-sky-200 text-slate-900",idle:"border-slate-300 bg-slate-100 text-slate-900 hover:border-slate-400 hover:bg-slate-200",disabled:"opacity-60 pointer-events-none"},panel:"pointer-events-auto w-60 rounded-3xl border border-slate-200 bg-slate-100 p-4 text-slate-900 backdrop-blur-md",panelTitle:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",panelButton:"rounded-xl border border-slate-300 bg-white px-3 py-1.5 text-[12px] font-semibold text-slate-900 transition hover:border-sky-400 hover:bg-sky-100",panelToggle:"rounded-xl border border-slate-300 bg-slate-100 px-3 py-1.5 text-[12px] font-semibold text-slate-900 transition hover:border-sky-400 hover:bg-sky-100",layerScroll:"flex max-h-60 flex-col gap-2 overflow-y-auto pr-1",layerOption:"flex flex-col gap-1 rounded-2xl border border-slate-300 bg-white px-3 py-2 text-left transition hover:border-sky-400 hover:bg-sky-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/40",layerOptionActive:"border-sky-500 bg-sky-100 text-slate-900 shadow-inner shadow-sky-200/60",layerOptionDescription:"text-[11px] text-slate-500 leading-snug",layerOptionCategory:"text-[10px] font-semibold uppercase tracking-wide text-slate-400",iconStyle:null,iconClass:""},dark:{container:"pointer-events-auto flex flex-col gap-2 rounded-3xl border border-slate-700 bg-[#0b1224] p-2 text-slate-100 backdrop-blur-sm",badge:"rounded-full border border-slate-600 bg-[#0f1b38] px-3 py-1 text-[10px] font-semibold text-slate-200",button:{base:"flex h-12 w-12 items-center justify-center rounded-2xl border transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-slate-200/30 focus-visible:ring-offset-[#0b1224]/40",active:"border-sky-400 bg-[#1e335d] text-sky-100",idle:"border-slate-600 bg-[#0d172e] text-slate-100 hover:border-slate-400 hover:bg-[#15213f]",disabled:"opacity-50 pointer-events-none"},panel:"pointer-events-auto w-60 rounded-3xl border border-slate-700 bg-[#080f1e] p-4 text-slate-100 backdrop-blur-md",panelTitle:"text-[11px] font-semibold uppercase tracking-wide text-slate-400",panelButton:"rounded-xl border border-slate-600 bg-[#111b33] px-3 py-1.5 text-[12px] font-semibold text-slate-100 transition hover:border-sky-400 hover:bg-[#1d2b4e]",panelToggle:"rounded-xl border border-slate-500 bg-[#0f1b38] px-3 py-1.5 text-[12px] font-semibold text-slate-100 transition hover:border-sky-400 hover:bg-[#1a2a4d]",layerScroll:"flex max-h-60 flex-col gap-2 overflow-y-auto pr-1",layerOption:"flex flex-col gap-1 rounded-2xl border border-slate-600 bg-[#101d39] px-3 py-2 text-left transition hover:border-sky-400 hover:bg-[#16254a] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-200/30",layerOptionActive:"border-sky-400 bg-[#1e335d] text-sky-100 shadow-inner shadow-sky-900/40",layerOptionDescription:"text-[11px] text-slate-300 leading-snug",layerOptionCategory:"text-[10px] font-semibold uppercase tracking-wide text-slate-400/90",iconStyle:{filter:"invert(0.9)"},iconClass:""}},sw=6,ow=[{id:"getting-started",title:"Getting started",description:"Allow location access, pick an active route, then use placement or grid tools to build precise checkpoint lists.",points:['Use the Route tab to manage multiple routes. Click "Add New Route" to start fresh, rename it, and choose a colour for quick identification.','Tap "Add Checkpoint" inside a route to enter placement mode. Drop the route-coloured puck onto the map or a Grid Tool preview marker to add that position.','Share progress from the Route tools: copy codes for a single route or use "All Routes" to export the full plan.']},{id:"toolbar",title:"Toolbar buttons",description:"Each button in the floating toolbar opens a tool. The Menu button mirrors these shortcuts, so every tool is reachable even when the bar is hidden.",points:["Menu toggles quick actions for Compass, Route, Grid, and Share tools without leaving the map.","Compass opens the heading overlay. Select a target route to get bearings and switch between degrees or mils.","Route opens the checkpoint manager where you can reorder points, adjust colours, and generate share codes."]},{id:"maps",title:"Choosing maps",description:"Different base layers emphasise different features. Pick the layer that best supports the task at hand.",points:["OpenStreetMap Street is the fallback layer and works reliably online or with low mobile reception.","Carto Light or Dark provide high-contrast styling that is easier to read in bright sun or at night.","OpenTopoMap is ideal for land navigation where contours and terrain shading matter.","Esri Satellite is ideal when you need to see real details, but is heavy on mobile data."]}],aw=(e,n,s)=>{const l=e*Math.PI/180,f=2**s,d=Math.floor((n+180)/360*f),w=Math.floor((1-Math.log(Math.tan(l)+1/Math.cos(l))/Math.PI)/2*f),x=f-1;return{x:Math.min(Math.max(d,0),x),y:Math.min(Math.max(w,0),x),z:s}},lw=(e,n,{x:s,y:l,z:f})=>{const d=Array.isArray(n)&&n.length>0?n:[""],w=Math.abs((s+l)%d.length),x=d[w];return e.replace("{s}",x).replace("{x}",s).replace("{y}",l).replace("{z}",f)},Fa=(e,n)=>Eu.divIcon({className:"flex items-center justify-center rounded-full text-xs font-semibold text-white shadow-lg shadow-slate-900/50",html:`<div style="background:${e};width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:9999px;">${n}</div>`});Fa("#22c55e","S");Fa("#ef4444","F");Fa("#3b82f6","");const uw=Fa("#d946ef",""),cw=e=>Eu.divIcon({className:"user-heading-icon",html:`
      <div style="position:relative;width:44px;height:44px;">
        <div style="position:absolute;inset:0;border-radius:50%;background:rgba(14,165,233,0.12);border:2px solid rgba(56,189,248,0.9);box-shadow:0 0 8px rgba(56,189,248,0.4);"></div>
        <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) rotate(${e}deg);transform-origin:center;">
          <div style="width:0;height:0;border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:18px solid #fbbf24;"></div>
        </div>
      </div>
    `,iconSize:[44,44],iconAnchor:[22,22]}),hw=(e="#22c55e")=>Eu.divIcon({className:"peer-icon",html:`
      <div style="position:relative;width:32px;height:32px;">
        <div style="position:absolute;inset:0;border-radius:50%;background:${e}33;border:2px solid ${e}E6;box-shadow:0 0 8px ${e}66;"></div>
        <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:10px;height:10px;background:${e};border-radius:50%;"></div>
      </div>
    `,iconSize:[32,32],iconAnchor:[16,16]}),fw=()=>{const{placementMode:e,addCheckpoint:n,setPlacementMode:s}=No();return pv({click:l=>{if(!e)return;const f=typeof e=="string"?{type:e}:e;if(!(f!=null&&f.type))return;const{latlng:d}=l;if(f.type==="checkpoint"){const w=typeof f.insertIndex=="number"?f.insertIndex:void 0;n({lat:d.lat,lng:d.lng},w)}s(null)}}),null},Up=K.memo(({id:e,position:n,icon:s,onSelect:l,onUpdate:f})=>{const d=K.useRef(null),w=K.useMemo(()=>({click:()=>l(e),dragend:()=>{const C=d.current;if(C){const{lat:v,lng:S}=C.getLatLng();f(e,{lat:v,lng:S})}}}),[e,l,f]),x=K.useMemo(()=>[n.lat,n.lng],[n]);return b.jsx(Il,{draggable:!0,eventHandlers:w,position:x,icon:s,ref:d})});Up.displayName="DraggableMarker";const dw=({userLocation:e,peers:n={},userHeading:s,targets:l=[],onEnableLocation:f,locationEnabled:d,hasLocationFix:w,isRequestingLocation:x,locationRequestToken:C=0,baseLayer:v="street",onBaseLayerChange:S,onToggleMenu:I,onOpenCompass:O,onOpenRoute:z,toolbarTheme:H="light",onToolbarThemeToggle:j,isMenuOpen:ee=!1,isSettingsOpen:F=!1,onToggleSettings:D,previewLocation:P,onDropItem:V,hideToolbar:re=!1})=>{const{checkpoints:$,checkpointMap:W,routes:Z,activeRouteId:X,connectVia:he,selectedId:ue,selectCheckpoint:fe,updateCheckpoint:J,setPlacementMode:ne,toggleConnectMode:Y,loadRouteSnapshot:ye,placementMode:de,addCheckpoint:te}=No(),pe=K.useRef(null),ce=K.useRef(!1),Ee=K.useRef(0),[Ne,Ze]=K.useState(null),[Ae,Me]=K.useState(!1),[ge,vt]=K.useState(!1),[He,Pn]=K.useState(!1),[Ln,kt]=K.useState(null),[dt,Xe]=K.useState("settings"),[Zn,Wt]=K.useState(0),[Dn,De]=K.useState(null),[Ue,Ge]=K.useState(""),[tn,Te]=K.useState(null),[qt,li]=K.useState(!1),[Zt,or]=K.useState(!1),[bt,ui]=K.useState(""),[Gn,nn]=K.useState("checkpoint"),[An,Xn]=K.useState(null),mr=K.useRef(null),ct=K.useRef(0),xe=K.useRef(null),Ct=K.useRef(null),Ke=K.useRef(null),Qe=K.useRef(null),rn=K.useRef(null),xn=oc[v]??oc.street,we=Zd[H]??Zd.light,Re=H==="dark"?"map-theme-dark":"map-theme-light",Mt=e?[e.lat,e.lng]:rw,Yn=e?"user-centered":"default-centered",At=K.useCallback(()=>{pe.current&&pe.current.invalidateSize({animate:!1})},[]),fn=K.useMemo(()=>iw.map(B=>oc[B]).filter(Boolean),[]),ms=K.useMemo(()=>({top:"calc(env(safe-area-inset-top, 0px) + 1rem)",right:"calc(env(safe-area-inset-right, 0px) + 1rem)"}),[]),[Gt,ci]=K.useState("all"),vr=K.useMemo(()=>Gt==="all"?Z:Z.filter(B=>B.id===Gt),[Z,Gt]),Dt=K.useMemo(()=>Xv({checkpointMap:W,routes:vr,connectVia:he,includeNames:qt,includeColors:Zt}),[W,vr,he,qt,Zt]),xi=K.useMemo(()=>Dt?qv(Dt):"",[Dt]),kr=K.useMemo(()=>{if(!Dt)return null;const B=[];Dt.checkpoints.length>0&&B.push(`${Dt.checkpoints.length} checkpoint${Dt.checkpoints.length===1?"":"s"}`),Dt.routes&&Dt.routes.length>0&&B.push(`${Dt.routes.length} route${Dt.routes.length===1?"":"s"}`);const R=B.length?`Includes ${B.join(", ")}. `:"";return qt&&Zt?`${R}Compact text format (connection mode excluded).`:qt?`${R}Compact text format (connection mode & colors excluded).`:Zt?`${R}Compact text format (names & connection mode excluded).`:`${R}Compact text format (names, connection mode & colors excluded).`},[Dt,qt,Zt]),hi=!!xi,Tt=K.useMemo(()=>vr.map(B=>{const R=B.items.map((me,qe)=>{const mt=W[me];return mt?{key:`${B.id}-${mt.id}`,label:mt.name||`Point ${qe+1}`,code:uf(mt.position),position:mt.position}:null}).filter(Boolean);return R.length===0?null:{route:B.name,color:B.color,codes:R}}).filter(Boolean),[vr,W]),Be=K.useCallback(B=>B==="success"?"text-emerald-500":B==="error"?"text-rose-500":B==="warning"?"text-amber-500":"text-slate-500",[]),dn=K.useCallback((B,R,me=2500)=>{Ke.current&&typeof window<"u"&&(window.clearTimeout(Ke.current),Ke.current=null),De(R?{tone:B,message:R}:null),R&&me!==null&&typeof window<"u"&&(Ke.current=window.setTimeout(()=>{De(null),Ke.current=null},me))},[De,Ke]),ke=K.useCallback((B,R,me=4e3)=>{Qe.current&&typeof window<"u"&&(window.clearTimeout(Qe.current),Qe.current=null),Te(R?{tone:B,message:R}:null),R&&me!==null&&typeof window<"u"&&(Qe.current=window.setTimeout(()=>{Te(null),Xn(null),Qe.current=null},me))},[Te,Qe]),Xr=K.useCallback(async()=>{var B;if(!hi){dn("warning","Define a route to generate a share code.",3200);return}try{let R=!1;if(typeof navigator<"u"&&((B=navigator.clipboard)!=null&&B.writeText))await navigator.clipboard.writeText(xi),R=!0;else if(typeof document<"u"&&Ct.current){const me=Ct.current;me.focus(),me.select(),typeof me.setSelectionRange=="function"&&me.setSelectionRange(0,xi.length),R=!!(typeof document.execCommand=="function"&&document.execCommand("copy"))}if(!R)throw new Error("Copy not supported");dn("success","Share code copied to clipboard.",2500)}catch(R){dn("error",R!=null&&R.message&&R.message!=="Copy not supported"?R.message:"Copy failed. Try selecting and copying the code manually.",4e3)}},[hi,xi,dn]),fi=K.useCallback(()=>{const B=Ue.trim();if(!B){ke("warning","Paste a share code to import.",3500);return}const R=$v(B);if(!R){ke("error","That share code could not be read. Check the full code and try again.",4e3);return}ye(R),Ge(""),ke("success","Route imported. Close this panel to review it on the map.",4e3)},[ye,Ue,ke]),pn=K.useCallback(B=>{Qe.current&&typeof window<"u"&&(window.clearTimeout(Qe.current),Qe.current=null),Ge(B.target.value),Te(null)},[Te,Ge,Qe]),Yr=K.useCallback(B=>{(B.ctrlKey||B.metaKey)&&B.key==="Enter"&&(B.preventDefault(),fi())},[fi]);K.useEffect(()=>{dt!=="share"&&(De(null),Te(null),Ke.current&&typeof window<"u"&&(window.clearTimeout(Ke.current),Ke.current=null),Qe.current&&typeof window<"u"&&(window.clearTimeout(Qe.current),Qe.current=null))},[dt]);const Nn=K.useMemo(()=>H==="light"?"border border-slate-300 bg-white text-slate-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-400":"border border-slate-700 bg-slate-950 text-slate-100 focus:border-sky-400 focus:outline-none focus:ring-1 focus:ring-sky-500",[H]),Kr=K.useMemo(()=>{if(!de)return null;const B=typeof de=="string"?{type:de}:de;return B!=null&&B.type?B.type==="start"?"Start point":B.type==="end"?"End point":B.type==="checkpoint"?typeof B.insertIndex=="number"?`Checkpoint (position ${B.insertIndex+1})`:"Checkpoint":null:null},[de]),Kn=K.useMemo(()=>Kr?[{key:"placement",text:`Currently placing: ${Kr}`,tone:"emerald"}]:[],[Kr]),sn=K.useCallback((B,R="info",me=4e3)=>{mr.current&&typeof window<"u"&&(window.clearTimeout(mr.current),mr.current=null),Ze(B?{message:B,tone:R}:null),B&&me!==null&&typeof window<"u"&&(mr.current=window.setTimeout(()=>{Ze(null),mr.current=null},me))},[]);K.useEffect(()=>{Eu.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"})},[]),K.useEffect(()=>{kt(null),sn(null),Me(!1),ct.current=0,Wt(B=>B+1)},[v,sn]),K.useEffect(()=>{ee&&Xe("settings")},[ee,Xe]),K.useEffect(()=>{if(!ge||typeof window>"u")return;const B=()=>{window.requestAnimationFrame(At)};return window.requestAnimationFrame(At),window.addEventListener("resize",B,{passive:!0}),window.addEventListener("orientationchange",B,{passive:!0}),()=>{window.removeEventListener("resize",B),window.removeEventListener("orientationchange",B)}},[ge,At]),K.useEffect(()=>{var me;if(!ge||typeof ResizeObserver>"u")return;const B=(me=pe.current)==null?void 0:me.getContainer();if(!B)return;const R=new ResizeObserver(()=>{typeof window<"u"?window.requestAnimationFrame(At):At()});return R.observe(B),()=>R.disconnect()},[ge,At]),K.useEffect(()=>{ge&&At()},[ge,At,H,F,ee,v]),K.useEffect(()=>{!pe.current||!e||ce.current||(pe.current.setView([e.lat,e.lng],16),ce.current=!0)},[e]),K.useEffect(()=>{xe.current=e},[e]),K.useEffect(()=>{if(!pe.current)return;ce.current=!1,At();const B=xe.current;B&&(pe.current.flyTo([B.lat,B.lng],Math.max(pe.current.getZoom(),16),{animate:!1}),ce.current=!0)},[v,At]),K.useEffect(()=>{pe.current&&(C===void 0||C===Ee.current||(Ee.current=C,ce.current=!1,e&&(pe.current.flyTo([e.lat,e.lng],Math.max(pe.current.getZoom(),16),{animate:!0}),ce.current=!0)))},[C,e]);const Oo=K.useMemo(()=>cw(s??0),[s]),Qn=K.useCallback(()=>{if(!pe.current)return;const B=xe.current??e;if(!B)return;const R=pe.current;At();const me=Math.max(R.getZoom(),16);R.flyTo([B.lat,B.lng],me,{animate:!0}),ce.current=!0},[At,e]);K.useEffect(()=>()=>{pe.current&&(pe.current.getContainer().classList.remove("mapview-attribution-offset"),pe.current=null)},[]),K.useEffect(()=>()=>{mr.current&&typeof window<"u"&&window.clearTimeout(mr.current),Ke.current&&typeof window<"u"&&window.clearTimeout(Ke.current),Qe.current&&typeof window<"u"&&window.clearTimeout(Qe.current),rn.current&&typeof window<"u"&&window.clearTimeout(rn.current)},[]);const on=K.useCallback(()=>typeof f=="function"?f():!1,[f]),Nt=K.useCallback(()=>{typeof I=="function"&&I()},[I]),Si=K.useCallback(()=>{typeof O=="function"&&O()},[O]),Mr=K.useCallback(()=>{typeof z=="function"&&z()},[z]),vs=K.useCallback(B=>{B!==v&&typeof S=="function"&&S(B)},[v,S]),ve=K.useCallback((B,R,me=3500)=>{rn.current&&typeof window<"u"&&(window.clearTimeout(rn.current),rn.current=null),Xn(R?{tone:B,message:R}:null),R&&me!==null&&typeof window<"u"&&(rn.current=window.setTimeout(()=>{Xn(null),rn.current=null},me))},[Xn,rn]),Ro=K.useCallback(async()=>{if(!ge||!pe.current){sn("Map not ready yet.","warning");return}if(v!=="satellite"){sn("Switch to satellite view to cache imagery.","warning");return}if(typeof window>"u"||!("caches"in window)){sn("Tile caching not supported in this browser.","error");return}const B=pe.current,R=Math.round(B.getZoom()),me=2**R,qe=[];if(e&&qe.push(e),$.forEach(Pe=>{Pe!=null&&Pe.position&&qe.push(Pe.position)}),qe.length===0){sn("Add a checkpoint or enable location before caching.","warning");return}const wr=40075016686e-3/me,ar=new Set;if(qe.forEach(Pe=>{const ht=aw(Pe.lat,Pe.lng,R),Sn=Pe.lat*Math.PI/180,yr=Math.cos(Sn)||1e-4,_r=wr*yr,Cr=wr,lr=Math.max(1,Math.ceil(2e3/_r)),Qr=Math.max(1,Math.ceil(2e3/Cr));for(let ft=-lr;ft<=lr;ft+=1)for(let We=-Qr;We<=Qr;We+=1){const un=Math.min(Math.max(ht.x+ft,0),me-1),Oe=Math.min(Math.max(ht.y+We,0),me-1);ar.add(`${un}:${Oe}:${R}`)}}),ar.size===0){sn("No tiles identified for caching.","warning");return}const ln=Array.from(ar).map(Pe=>{const[ht,Sn,yr]=Pe.split(":").map(_r=>Number(_r));return{x:ht,y:Sn,z:yr}});try{Me(!0),sn("Caching satellite tiles nearby","info",null);const Pe=await caches.open("cadet-map-tile-cache");let ht=0;const Sn=[],yr=[...ln],_r=Math.min(sw,yr.length),Cr=async()=>{for(;yr.length>0;){const lr=yr.shift();if(!lr)continue;const Qr=lw(xn.url,xn.subdomains,lr);try{const ft=await fetch(Qr,{mode:"cors"});if(!ft.ok&&ft.type!=="opaque")throw new Error(`HTTP ${ft.status}`);await Pe.put(Qr,ft.clone()),ht+=1}catch(ft){Sn.push((ft==null?void 0:ft.message)??"Unknown error")}await new Promise(ft=>{if(typeof window>"u"){ft();return}window.requestAnimationFrame(ft)})}};if(await Promise.all(Array.from({length:_r},Cr)),Sn.length===ln.length)sn("Unable to cache tiles. Please try again later.","error");else{const lr=Sn.length?` (skipped ${Sn.length} tile${Sn.length===1?"":"s"})`:"";sn(`Cached ${ht} satellite tile${ht===1?"":"s"}${lr}.`,Sn.length?"warning":"success")}}catch(Pe){sn(Pe.message??"Tile caching failed.","error")}finally{Me(!1)}},[v,$,ge,sn,xn.subdomains,xn.url,e]),Pt=K.useCallback(()=>{typeof D=="function"&&D(),Xe("settings")},[D]),Pr=K.useCallback(()=>{Xe("help"),!F&&typeof D=="function"&&D()},[F,D]),di=K.useCallback(()=>{!F&&typeof D=="function"&&D(),Xe("share")},[F,D]),pt=K.useCallback(()=>{typeof j=="function"&&j()},[j]),ot=K.useCallback(()=>{if(e){Qn(),F&&typeof D=="function"&&D(),Xe("settings");return}on()?sn("Requesting location fix","info",2500):sn("Enable location permissions to center the map.","warning")},[on,Qn,F,D,sn,e]),$e=v!=="satellite"||Ae,it=Ae?"Caching":v!=="satellite"?"Satellite required":"Cache tiles",xt=K.useMemo(()=>({loading:()=>{ct.current=0},load:()=>{At()},tileerror:()=>{if(ct.current+=1,ct.current>=3){ct.current=0;const B="Selected map unavailable";sn(B,"warning",6e3),kt(B),v!=="street"&&typeof S=="function"?S("street"):Wt(R=>R+1)}}}),[v,S,At,Wt,sn]),pi=K.useCallback(B=>{const R=B.target.value.replace(/\s+/g,"").toLowerCase();ui(R),Xn(null),rn.current&&typeof window<"u"&&(window.clearTimeout(rn.current),rn.current=null)},[]),Ot=K.useCallback(B=>{nn(B.target.value)},[]),On=K.useCallback(()=>{const B=bt.trim().toLowerCase();if(!B){ve("warning","Enter a callout code to place it.");return}if(B.length<4||B.length>12){ve("error","Callouts should be between 4 and 12 characters.");return}const R=oh(B);if(!R){ve("error","That code could not be decoded. Double-check the letters.");return}te(R),ve("success","Checkpoint added from callout.",3e3),ui("")},[te,oh,bt,ve]),ws=K.useMemo(()=>`${we.panelToggle} ${dt==="settings"?"ring-1 ring-sky-400 text-sky-500 border-sky-400":"opacity-80 hover:opacity-100"}`,[dt,we.panelToggle]),ze=K.useMemo(()=>`${we.panelToggle} ${dt==="share"?"ring-1 ring-sky-400 text-sky-500 border-sky-400":"opacity-80 hover:opacity-100"}`,[dt,we.panelToggle]),yt=K.useMemo(()=>`${we.panelToggle} ${dt==="help"?"ring-1 ring-sky-400 text-sky-500 border-sky-400":"opacity-80 hover:opacity-100"}`,[dt,we.panelToggle]),ys=K.useMemo(()=>{const B={};return Z.filter(R=>R.isVisible).forEach(R=>{var me;(me=R.items)==null||me.forEach(qe=>{(!B[qe]||R.id===X)&&(B[qe]={checkpoint:W[qe],color:R.color,routeId:R.id})})}),Object.values(B).filter(R=>R.checkpoint)},[Z,W,X]),qn=K.useRef(new Map),nt=K.useCallback(B=>(qn.current.has(B)||qn.current.set(B,Fa(B,"")),qn.current.get(B)),[]),an=K.useMemo(()=>Z.filter(B=>B.isVisible).map(B=>{const R=(B.items||[]).map(me=>{var qe;return(qe=W[me])==null?void 0:qe.position}).filter(Boolean).map(me=>[me.lat,me.lng]);return{id:B.id,color:B.color,positions:R}}),[Z,W]);return b.jsxs("div",{className:"relative h-full w-full flex-1",children:[b.jsxs(vv,{center:Mt,zoom:13,className:`h-full w-full ${Re}`,preferCanvas:!0,ref:pe,attributionControl:!1,whenCreated:B=>{B.getContainer().classList.add("mapview-attribution-offset")},children:[b.jsx(ew,{onDropItem:V}),b.jsx(gv,{position:"bottomleft",prefix:!1}),b.jsx(wv,{url:xn.url,attribution:xn.attribution,subdomains:xn.subdomains,minZoom:xn.minZoom,maxZoom:xn.maxZoom,maxNativeZoom:He?16:void 0,eventHandlers:xt},`${xn.id}-${Zn}-${He}`),b.jsx(fw,{}),e&&b.jsx(Il,{position:[e.lat,e.lng],icon:Oo,interactive:!1}),Object.values(n).map(B=>B.location&&b.jsx(Il,{position:[B.location.lat,B.location.lng],icon:hw(B.color),interactive:!1},`peer-loc-${B.id}`)),ys.map(({checkpoint:B,color:R})=>b.jsx(Up,{id:B.id,position:B.position,icon:nt(R),onSelect:fe,onUpdate:J},B.id)),(P==null?void 0:P.position)&&b.jsxs(b.Fragment,{children:[b.jsx(Il,{position:[P.position.lat,P.position.lng],icon:uw,opacity:.8}),P.source&&b.jsx(Qo,{positions:[[P.source.lat,P.source.lng],[P.position.lat,P.position.lng]],pathOptions:{color:"#d946ef",weight:3,dashArray:"5 5",opacity:.6}})]}),he==="direct"&&an.map(B=>B.positions.length>=2&&b.jsx(Qo,{positions:B.positions,pathOptions:{color:B.color,weight:4,opacity:.7}},`direct-${B.id}`)),he==="route"&&an.map(B=>B.positions.length>=2&&b.jsx(Qo,{positions:B.positions,pathOptions:{color:B.color,weight:4,dashArray:"10 6",opacity:.8}},`route-${B.id}`)),Object.values(n).map(B=>(B.routes??[]).map(R=>{if(!Array.isArray(R.items)||R.items.length<2)return null;const me=R.items.map(qe=>{const mt=(qe==null?void 0:qe.position)??qe,wr=typeof(mt==null?void 0:mt.lat)=="number"?mt.lat:null,ar=typeof(mt==null?void 0:mt.lng)=="number"?mt.lng:null;return wr!=null&&ar!=null?[wr,ar]:null}).filter(Boolean);return me.length<2?null:b.jsx(Qo,{positions:me,pathOptions:{color:B.color||"#22c55e",weight:4,dashArray:"10 6",opacity:.6}},`peer-route-${B.id}-${R.id}`)})),e&&l.filter(B=>B.position).map(B=>b.jsx(Qo,{positions:[[e.lat,e.lng],[B.position.lat,B.position.lng]],pathOptions:{color:"#818cf8",weight:2,dashArray:"4 6",opacity:.4}},`user-target-${B.id}`))]},Yn),Ne&&b.jsx("div",{className:`pointer-events-none absolute left-1/2 top-4 z-[1000] -translate-x-1/2 rounded-full border px-4 py-1.5 text-[11px] font-semibold tracking-wide ${Ne.tone==="success"?"border-emerald-300 bg-emerald-200 text-emerald-900":Ne.tone==="warning"?"border-amber-300 bg-amber-200 text-amber-900":Ne.tone==="error"?"border-rose-300 bg-rose-200 text-rose-900":"border-sky-300 bg-sky-200 text-slate-900"}`,children:Ne.message}),b.jsxs("div",{className:`pointer-events-none absolute z-[990] flex flex-col items-end gap-3 transition-opacity duration-300 ${re?"opacity-0":"opacity-100"}`,style:ms,children:[b.jsxs("div",{className:we.container,children:[b.jsx($o,{iconName:"menu",label:"Menu",onClick:Nt,title:"Toggle navigation menu",isActive:ee,themeStyles:we}),b.jsx($o,{iconName:"compass",label:"Compass",onClick:Si,title:"Open compass overlay",themeStyles:we}),b.jsx($o,{iconName:"route",label:"Route",onClick:Mr,title:"Open route tools",themeStyles:we}),b.jsx($o,{iconName:"settings",label:"Settings",onClick:Pt,title:"Open settings",isActive:F,themeStyles:we})]}),(x||d&&!w)&&b.jsx("div",{className:`pointer-events-none ${we.badge}`,children:x?"Getting location":"GPS active, awaiting fix"})]}),b.jsx("div",{className:"pointer-events-none absolute z-[990] flex flex-col items-start gap-3",style:{bottom:"calc(env(safe-area-inset-bottom, 0px) + 1rem)",left:"calc(env(safe-area-inset-left, 0px) + 1rem)"},children:b.jsx("div",{className:"pointer-events-auto",children:b.jsx($o,{iconName:"zoom",label:"Zoom",onClick:ot,title:"Zoom to location",isActive:!1,themeStyles:we})})}),F&&b.jsxs("div",{className:"pointer-events-auto fixed inset-0 z-[1180] flex items-center justify-center p-4",children:[b.jsx("button",{type:"button",className:"absolute inset-0 rounded-none border-0 bg-slate-950 backdrop-blur-sm",style:{backgroundColor:"rgba(2, 6, 23, 0.45)"},"aria-label":"Close settings",onClick:()=>{typeof D=="function"&&D(),Xe("settings")}}),b.jsxs("div",{className:`${we.panel} w-full max-w-md max-h-[80vh] overflow-hidden shadow-2xl shadow-slate-950/50`,role:"dialog","aria-modal":"true","aria-label":dt==="help"?"Map help":dt==="share"?"Share current route":"Map settings",children:[b.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[b.jsx("span",{className:we.panelTitle,children:dt==="help"?"Help":dt==="share"?"Share route":"Settings"}),b.jsx("button",{type:"button",className:we.panelButton,onClick:()=>{typeof D=="function"&&D(),Xe("settings")},children:"Close"})]}),b.jsxs("div",{className:"mb-3 flex items-center gap-2 text-[11px]",children:[b.jsx("button",{type:"button",className:ws,onClick:()=>Xe("settings"),"aria-pressed":dt==="settings",children:"Settings"}),b.jsx("button",{type:"button",className:ze,onClick:di,"aria-pressed":dt==="share",children:"Share"}),b.jsx("button",{type:"button",className:yt,onClick:Pr,"aria-pressed":dt==="help",children:"Help"})]}),b.jsx("div",{className:"flex h-full max-h-[65vh] flex-col gap-3 overflow-y-auto pr-1 text-[12px]",children:dt==="help"?b.jsx("div",{className:"flex flex-col gap-2",children:ow.map(B=>b.jsxs("section",{className:`${we.layerOption} cursor-default`,"aria-labelledby":`${B.id}-title`,children:[b.jsx("h3",{id:`${B.id}-title`,className:"text-[12px] font-semibold leading-tight",children:B.title}),b.jsx("p",{className:we.layerOptionDescription,children:B.description}),b.jsx("ul",{className:"ml-3 list-disc space-y-1 text-[11px] leading-snug",children:B.points.map((R,me)=>b.jsx("li",{children:R},me))})]},B.id))}):dt==="share"?b.jsxs("div",{className:"flex flex-col gap-3",children:[b.jsxs("section",{className:`${we.layerOption} flex flex-col gap-2`,children:[b.jsxs("div",{className:"flex items-start justify-between gap-2",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Share code"}),b.jsx("p",{className:we.layerOptionDescription,children:"Copy and send this code to share the current route."})]}),b.jsx("button",{type:"button",className:`${we.panelButton} ${hi?"":"pointer-events-none opacity-50"}`,onClick:Xr,disabled:!hi,children:"Copy code"})]}),Z.length>1&&b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("label",{className:"text-[11px] font-semibold opacity-70",children:"Scope:"}),b.jsxs("select",{value:Gt,onChange:B=>ci(B.target.value),className:`${Nn} flex-1 rounded-lg px-2 py-1 text-[11px]`,children:[b.jsx("option",{value:"all",children:"All Routes"}),Z.map(B=>b.jsx("option",{value:B.id,children:B.name},B.id))]})]}),b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"checkbox",id:"share-include-names",checked:qt,onChange:B=>li(B.target.checked),className:"h-3.5 w-3.5 rounded border-slate-300 text-sky-500 focus:ring-sky-500"}),b.jsx("label",{htmlFor:"share-include-names",className:"text-[11px] font-medium opacity-80",children:"Include names"})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"checkbox",id:"share-include-colors",checked:Zt,onChange:B=>or(B.target.checked),className:"h-3.5 w-3.5 rounded border-slate-300 text-sky-500 focus:ring-sky-500"}),b.jsx("label",{htmlFor:"share-include-colors",className:"text-[11px] font-medium opacity-80",children:"Include colors"})]})]}),b.jsx("p",{className:we.layerOptionDescription,children:kr??"Add at least one waypoint to generate a share code."}),b.jsx("textarea",{ref:Ct,className:`${Nn} min-h-[90px] w-full rounded-xl px-3 py-2 text-[11px] leading-snug`,value:xi,readOnly:!0,spellCheck:!1,"aria-label":"Current route share code",onFocus:B=>B.target.select()}),Dn&&b.jsx("span",{role:"status","aria-live":"polite",className:`text-[11px] font-semibold ${Be(Dn.tone)}`,children:Dn.message})]}),b.jsxs("section",{className:`${we.layerOption} flex flex-col gap-2`,children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Import route"}),b.jsx("p",{className:we.layerOptionDescription,children:"Paste a code received from another teammate to replace your current route."})]}),b.jsx("textarea",{className:`${Nn} min-h-[110px] w-full rounded-xl px-3 py-2 text-[11px] leading-snug`,value:Ue,onChange:pn,onKeyDown:Yr,placeholder:"Paste a share code here",spellCheck:!1,"aria-label":"Paste a share code to import"}),b.jsxs("div",{className:"flex items-center justify-between gap-2",children:[b.jsx("button",{type:"button",className:`${we.panelButton} ${Ue.trim()?"":"pointer-events-none opacity-50"}`,onClick:fi,disabled:!Ue.trim(),children:"Load route"}),tn?b.jsx("span",{role:"status","aria-live":"polite",className:`text-[11px] font-semibold ${Be(tn.tone)}`,children:tn.message}):b.jsx("span",{className:"text-[10px] opacity-60",children:"Press Ctrl/ + Enter to load"})]})]}),b.jsxs("section",{className:`${we.layerOption} flex flex-col gap-2`,children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Plot callout"}),b.jsx("p",{className:we.layerOptionDescription,children:"Drop a shared geohash onto the map as a start, checkpoint, or finish marker."})]}),b.jsx("input",{type:"text",className:`${Nn} w-full rounded-xl px-3 py-2 text-[11px] uppercase tracking-wide`,value:bt,onChange:pi,placeholder:"e.g. u4pruydqq",spellCheck:!1,"aria-label":"Enter a location callout code"}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("label",{htmlFor:"callout-target",className:"text-[11px] font-semibold opacity-70",children:"Place as"}),b.jsx("select",{id:"callout-target",className:`${Nn} w-full rounded-xl px-3 py-2 text-[11px]`,value:Gn,onChange:Ot,disabled:!0,children:b.jsx("option",{value:"checkpoint",children:"Checkpoint"})})]}),b.jsxs("div",{className:"flex items-center justify-between gap-2",children:[b.jsx("button",{type:"button",className:`${we.panelButton} ${bt.trim()?"":"pointer-events-none opacity-50"}`,onClick:On,disabled:!bt.trim(),children:"Place callout"}),An&&b.jsx("span",{role:"status","aria-live":"polite",className:`text-[11px] font-semibold ${Be(An.tone)}`,children:An.message})]})]}),Tt.length>0&&b.jsxs("section",{className:`${we.layerOption} flex flex-col gap-2`,children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Location codes"}),b.jsx("p",{className:we.layerOptionDescription,children:"Geohash references 5m accuracy for quick callouts."})]}),b.jsx("div",{className:"flex flex-col gap-3",children:Tt.map(B=>b.jsxs("div",{className:"flex flex-col gap-1",children:[b.jsx("div",{className:"border-b border-slate-700/50 pb-1",children:b.jsx("span",{className:"text-[11px] font-semibold text-slate-300",children:B.route})}),b.jsx("ul",{className:"flex flex-col gap-1 text-[11px] font-mono",children:B.codes.map(R=>b.jsxs("li",{className:"flex items-center justify-between gap-3 pl-1",children:[b.jsx("span",{className:"font-semibold uppercase tracking-wide text-[10px] opacity-70",children:R.label}),b.jsx("span",{children:R.code})]},R.key))})]},B.route))})]})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex items-center justify-between gap-3",children:[b.jsx("span",{className:"font-medium",children:"Toolbar theme"}),b.jsx("button",{type:"button",className:we.panelToggle,onClick:pt,children:H==="light"?"Light":"Night"})]}),Ln&&b.jsxs("div",{className:"rounded-lg border border-amber-500/50 bg-amber-500/10 p-3 text-[11px] text-amber-500",children:[b.jsx("p",{className:"font-semibold",children:"Map Error"}),b.jsx("p",{children:Ln})]}),b.jsxs("div",{className:"flex items-center justify-between gap-3",children:[b.jsxs("div",{children:[b.jsx("span",{className:"font-medium",children:"Low data mode"}),b.jsx("p",{className:"text-[11px] opacity-70",children:"Reduce map detail to save data."})]}),b.jsx("button",{type:"button",role:"switch","aria-checked":He,onClick:()=>Pn(!He),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-offset-2 ${He?"bg-orange-500":"bg-slate-600"}`,children:b.jsx("span",{className:`${He?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),b.jsxs("div",{children:[b.jsx("span",{className:"font-medium",children:"Map layers"}),b.jsx("p",{className:"text-[11px] opacity-70",children:"Choose the basemap that suits your mission."}),b.jsx("div",{className:`${we.layerScroll} mt-2`,children:fn.map(B=>{const R=B.id===v;return b.jsxs("button",{type:"button",className:`${we.layerOption} ${R?we.layerOptionActive:""}`,onClick:()=>vs(B.id),children:[b.jsxs("div",{className:"flex items-start justify-between gap-2",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:B.label}),B.category&&b.jsx("p",{className:we.layerOptionCategory,children:B.category})]}),R&&b.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wide text-sky-500",children:"Current"})]}),b.jsx("p",{className:we.layerOptionDescription,children:B.description})]},B.id)})})]}),b.jsxs("div",{className:"flex items-start justify-between gap-3",children:[b.jsxs("div",{children:[b.jsx("span",{className:"font-medium",children:"Cache imagery"}),b.jsx("p",{className:"text-[11px] opacity-70",children:"Download tiles within 2km"})]}),b.jsx("button",{type:"button",className:`${we.panelButton} ${$e?"opacity-60 pointer-events-none":""}`,onClick:Ro,disabled:$e,children:it})]}),b.jsxs("section",{className:`${we.layerOption} flex flex-col gap-2`,children:[b.jsxs("div",{className:"flex items-start justify-between gap-2",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[12px] font-semibold leading-tight",children:"Share this route"}),b.jsx("p",{className:we.layerOptionDescription,children:"switch to the share view to copy or import a route."})]}),b.jsx("button",{type:"button",className:we.panelButton,onClick:di,children:"Open"})]}),b.jsx("p",{className:we.layerOptionDescription,children:kr??"Add at least one waypoint to enable route sharing."})]}),b.jsx("button",{type:"button",className:we.panelButton,onClick:ot,children:"Center map on my location"})]})})]})]}),Kn.length>0&&b.jsx("div",{className:"pointer-events-none absolute bottom-4 left-1/2 flex w-[min(90vw,18rem)] -translate-x-1/2 flex-col gap-2",children:Kn.map(B=>{const R=B.tone==="emerald"?"border-emerald-500 text-emerald-100":"border-sky-500 text-sky-200";return b.jsx("div",{className:`rounded-lg border bg-slate-950 p-3 text-center text-sm font-semibold shadow-lg shadow-slate-950 ${R}`,children:B.text},B.key)})})]})},Ts=e=>e*Math.PI/180,pw=e=>e*180/Math.PI,Hp=(e,n)=>{if(!e||!n)return null;const s=Ts(e.lat),l=Ts(n.lat),f=Ts(n.lng-e.lng),d=Math.sin(f)*Math.cos(l),w=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(f),x=Math.atan2(d,w);return(pw(x)+360)%360},Vp=(e,n)=>{if(!e||!n)return null;const s=6371e3,l=Ts(e.lat),f=Ts(n.lat),d=Ts(n.lat-e.lat),w=Ts(n.lng-e.lng),x=Math.sin(d/2)*Math.sin(d/2)+Math.cos(l)*Math.cos(f)*Math.sin(w/2)*Math.sin(w/2),C=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return s*C},Wp=(e,n)=>e==null||n==null?null:(n-e+360)%360,gw=e=>{const[n,s]=K.useState(null),[l,f]=K.useState(null),[d,w]=K.useState(null),[x,C]=K.useState(!1),[v,S]=K.useState(!0),[I,O]=K.useState(!1),[z,H]=K.useState(!1),[j,ee]=K.useState(!1),F=K.useRef(null),D=K.useRef(null),P=K.useRef(typeof navigator<"u"&&"geolocation"in navigator);K.useEffect(()=>{if(!(typeof window>"u")){if(typeof DeviceOrientationEvent>"u"){S(!1),w(X=>X??"Compass not supported on this device");return}typeof DeviceOrientationEvent.requestPermission=="function"&&C(!0)}},[]);const V=K.useCallback(X=>{if(typeof X.alpha=="number"){const he=X.webkitCompassHeading??360-X.alpha;s((he+360)%360)}},[]),re=K.useCallback(()=>{if(!P.current)return w("Geolocation not supported"),!1;F.current!==null&&(navigator.geolocation.clearWatch(F.current),F.current=null);const X=ue=>{const{latitude:fe,longitude:J}=ue.coords;f({lat:fe,lng:J}),O(!0),H(!0),ee(!1),w(null)},he=ue=>{var fe;(ue==null?void 0:ue.code)===1?(w("Location permission denied"),O(!1)):(ue==null?void 0:ue.code)===2?w("Location unavailable"):(ue==null?void 0:ue.code)===3?w("Location request timed out"):w((ue==null?void 0:ue.message)??"Unable to access location"),H(!1),O(!1),ee(!1),F.current!==null&&((fe=navigator.geolocation)!=null&&fe.clearWatch)&&(navigator.geolocation.clearWatch(F.current),F.current=null)};try{return ee(!0),navigator.geolocation.getCurrentPosition(X,he,{enableHighAccuracy:!0,maximumAge:0,timeout:15e3}),F.current=navigator.geolocation.watchPosition(X,he,{enableHighAccuracy:!0,maximumAge:0,timeout:15e3}),!0}catch(ue){return w(ue.message??"Unable to access location"),ee(!1),O(!1),!1}},[]),$=K.useCallback(async()=>{if(typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function")try{await DeviceOrientationEvent.requestPermission()==="granted"?(window.removeEventListener("deviceorientation",V),window.addEventListener("deviceorientation",V),D.current="deviceorientation",re(),C(!1)):w("Compass permission denied")}catch(X){w(X.message??"Compass permission error")}},[V,re]);K.useEffect(()=>{if(!P.current)return()=>{};if(typeof window>"u"||!window.isSecureContext)return()=>{};let X=!1;return(async()=>{var ue;if((ue=navigator.permissions)!=null&&ue.query)try{const fe=await navigator.permissions.query({name:"geolocation"});if(X)return;fe.state==="granted"?re():fe.state==="denied"&&w(J=>J??"Location permission denied"),fe.onchange=()=>{X||(fe.state==="granted"?re():fe.state==="denied"&&(w("Location permission denied"),O(!1),H(!1)))}}catch(fe){w(J=>J??fe.message??"Geolocation unavailable")}})(),()=>{var ue;F.current!==null&&((ue=navigator.geolocation)!=null&&ue.clearWatch)&&navigator.geolocation.clearWatch(F.current),F.current=null,X=!0}},[re]),K.useEffect(()=>{if(typeof window>"u")return()=>{};if(!v)return()=>{};if(typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function")return()=>{window.removeEventListener("deviceorientation",V)};const X="ondeviceorientationabsolute"in window?"deviceorientationabsolute":"deviceorientation";return window.addEventListener(X,V),D.current=X,()=>{D.current&&window.removeEventListener(D.current,V)}},[V,v]);const W=Hp(l,e),Z=Vp(l,e);return{heading:n,bearing:W,distance:Z,geolocation:l,error:d,needsPermission:x,isSupported:v,locationEnabled:I,hasLocationFix:z,isRequestingLocation:j,requestPermission:$,startGeolocation:re}},Gd=e=>e==null?"N/A":e<1e3?`${e.toFixed(0)} m`:`${(e/1e3).toFixed(2)} km`,mw=3200/Math.PI,vw=({heading:e,bearing:n,distance:s,error:l,enableCompass:f,onEnableLocation:d,needsPermission:w,isSupported:x,locationEnabled:C,hasLocationFix:v,isRequestingLocation:S,targets:I=[],selectedTarget:O=null,onSelectTarget:z,bearingUnit:H="degrees",onToggleBearingUnit:j,routes:ee=[],activeRouteId:F=null,onSelectRoute:D=null})=>{const P=K.useMemo(()=>Wp(e,n),[e,n]),V=()=>{typeof d=="function"&&d()},re=()=>{typeof f=="function"&&f()},$=v?"Location Active":S?"Locating":C?"Retry Location":"Enable Location",W=S||v,Z=typeof j!="function",X=!x&&!w,he=typeof z=="function",ue=Ae=>{if(!Ae)return null;const{lat:Me,lng:ge}=Ae;return typeof Me!="number"||typeof ge!="number"?null:`${Me.toFixed(4)}, ${ge.toFixed(4)}`},fe=Ae=>{he&&z(Ae)},J=O?"Other checkpoints":"Select a checkpoint",ne=ue(O==null?void 0:O.position),Y=Ae=>{if(Ae==null)return null;const Me=(Ae%360+360)%360;return H==="mils"?(Me*Math.PI/180*mw+6400)%6400:Me},ye=Ae=>{if(Ae==null)return"N/A";const Me=Y(Ae);return Me==null?"N/A":H==="mils"?`${Me.toFixed(1)} mil`:`${Me.toFixed(0)}`},de=()=>{Z||j()},te=n!=null&&e!=null,pe=te?P??0:null,ce=e!=null?(360-e)%360:null,Ee=w||!x,Ne=Ee?"border border-rose-500 text-rose-200":"border border-slate-800 text-slate-100",Ze=Ee?"border-rose-500 bg-slate-800":"border-sky-500 bg-slate-950";return b.jsxs("div",{className:`flex flex-col items-center gap-4 rounded-2xl bg-slate-900 p-5 text-center shadow-lg shadow-slate-950 ${Ne}`,children:[ee&&ee.length>1&&D&&b.jsxs("div",{className:"w-full max-w-xs",children:[b.jsx("label",{className:"mb-1 block text-left text-xs font-medium text-slate-400",children:"Target Route"}),b.jsx("select",{value:F,onChange:Ae=>D(Ae.target.value),className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-3 py-2 text-sm text-slate-200 focus:border-sky-500 focus:outline-none",children:ee.map(Ae=>b.jsx("option",{value:Ae.id,children:Ae.name},Ae.id))})]}),b.jsxs("div",{className:"flex w-full flex-wrap items-center justify-center gap-2",children:[b.jsx("h2",{className:"text-base font-semibold text-sky-200",children:"Compass"}),b.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[b.jsx("button",{type:"button",className:"rounded-full border border-emerald-500 px-3 py-1 text-[11px] font-semibold text-emerald-200 hover:bg-emerald-700 hover:text-emerald-100 disabled:cursor-not-allowed disabled:opacity-60",onClick:V,disabled:W,children:$}),b.jsx("button",{type:"button",className:"rounded-full border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-700 hover:text-sky-100 disabled:cursor-not-allowed disabled:opacity-60",onClick:re,disabled:X,children:"Enable Compass"}),b.jsx("button",{type:"button",className:"rounded-full border border-slate-700 px-3 py-1 text-[11px] font-semibold text-slate-200 hover:border-sky-500 hover:text-sky-200 disabled:cursor-not-allowed disabled:opacity-60",onClick:de,disabled:Z,children:H==="degrees"?"Show mils":"Show degrees"})]})]}),b.jsxs("div",{className:`relative flex h-44 w-44 items-center justify-center rounded-full shadow-inner shadow-slate-950/40 ${Ze}`,children:[b.jsx("div",{className:"absolute inset-3 rounded-full border border-slate-800","aria-hidden":"true"}),b.jsx("div",{className:"absolute inset-0","aria-hidden":"true",children:b.jsx("div",{className:"absolute left-1/2 top-0 h-1/2 w-[3px] -translate-x-1/2 rounded-full bg-slate-200 opacity-40"})}),ce!=null&&b.jsxs("div",{className:"absolute inset-0",style:{transform:`rotate(${ce}deg)`},"aria-hidden":"true",children:[[0,30,60,90,120,150,180,210,240,270,300,330].map(Ae=>{const Me=Ae%90===0;return b.jsx("div",{className:"absolute inset-0",style:{transform:`rotate(${Ae}deg)`},children:b.jsx("div",{className:`absolute left-1/2 top-3 -translate-x-1/2 rounded-full bg-slate-600 ${Me?"h-3 w-[2px]":"h-1.5 w-[1px]"}`})},Ae)}),b.jsx("span",{className:"absolute left-1/2 top-2 -translate-x-1/2 rounded-full border border-slate-600 bg-slate-950 px-2 py-[2px] text-[10px] font-semibold uppercase tracking-[0.25em] text-sky-200 shadow-sm shadow-slate-950/40",children:"N"})]}),te&&pe!=null&&b.jsx("div",{className:"absolute inset-0",style:{transform:`rotate(${pe}deg)`},"aria-hidden":"true",children:b.jsx("div",{className:"absolute left-1/2 top-1 flex h-10 w-10 -translate-x-1/2 items-start justify-center drop-shadow-[0_0_8px_rgba(249,115,22,0.6)]",children:b.jsxs("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-orange-500",children:[b.jsx("path",{d:"M12 2L15 10H9L12 2Z",fill:"currentColor",stroke:"#c2410c",strokeWidth:"1.5",strokeLinejoin:"round"}),b.jsx("path",{d:"M12 22L9 14H15L12 22Z",fill:"currentColor",opacity:"0.5"})]})})}),Ee&&b.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center rounded-full bg-slate-950 text-center",style:{backgroundColor:"rgba(2, 6, 23, 0.85)"},children:[b.jsx("p",{className:"text-lg font-bold uppercase tracking-wide text-rose-200",children:"Compass not enabled"}),w&&b.jsx("p",{className:"mt-1 text-xs text-rose-200/80",children:"Tap Enable Compass to allow motion access."}),!w&&!x&&b.jsx("p",{className:"mt-1 text-xs text-rose-200/80",children:"This device does not expose compass sensors."})]}),b.jsx("span",{className:"absolute bottom-4 text-xs text-slate-300",children:e!=null?ye(e):""})]}),b.jsxs("div",{className:"space-y-1 text-xs text-slate-300",children:[b.jsxs("p",{children:["Target bearing: ",ye(n)]}),b.jsxs("p",{children:["Distance: ",Gd(s)]}),(S||C&&!v)&&b.jsx("p",{className:"text-[11px] text-slate-400",children:"Awaiting GPS fix keep the device in the open."}),w&&x&&b.jsx("p",{className:"text-[11px] text-slate-400",children:"Tap Enable Compass to grant motion and orientation access."}),!x&&b.jsx("p",{className:"text-amber-400",children:"Compass not supported on this device."}),l&&b.jsxs("p",{className:"text-rose-400",children:["Error: ",l]})]}),b.jsxs("div",{className:"w-full rounded-xl border border-slate-800 bg-slate-950 p-3 text-left",children:[b.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-sky-300",children:"Active checkpoint"}),O?b.jsxs("div",{className:"mt-2",children:[b.jsx("p",{className:"text-sm font-semibold text-slate-100",children:O.label}),ne&&b.jsx("p",{className:"text-[11px] text-slate-400",children:ne})]}):b.jsx("p",{className:"mt-2 text-[11px] text-slate-400",children:I.length>0?"Pick a checkpoint below to set the compass target.":"Add checkpoints from the Route tools to set the compass target."})]}),I.length>0&&b.jsxs("div",{className:"w-full rounded-xl border border-slate-800 bg-slate-950 p-3 text-left",children:[b.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-sky-300",children:J}),b.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:I.map(Ae=>b.jsxs("div",{role:he?"button":void 0,tabIndex:he?0:void 0,className:`flex items-center justify-between gap-3 rounded-md border px-3 py-2 text-xs text-slate-200 transition ${he?"cursor-pointer border-slate-700 bg-slate-900 hover:border-sky-500 hover:bg-sky-900 focus:outline-none focus:ring-2 focus:ring-sky-500/60":"border-slate-800 bg-slate-900"}`,onClick:he?()=>fe(Ae.id):void 0,onKeyDown:he?Me=>{(Me.key==="Enter"||Me.key===" ")&&(Me.preventDefault(),fe(Ae.id))}:void 0,children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full border border-slate-700 bg-slate-950",children:b.jsx("svg",{viewBox:"0 0 24 24",className:"h-4 w-4 text-sky-300",style:{transform:`rotate(${Ae.relativeBearing??0}deg)`,transformOrigin:"50% 50%"},children:b.jsx("path",{d:"M12 3l4.5 9H13l3 9-4-7-4 7 3-9H7.5z",fill:"currentColor"})})}),b.jsxs("div",{children:[b.jsx("p",{className:"font-semibold text-slate-100",children:Ae.label}),b.jsx("p",{className:"text-[11px] text-slate-400",children:Ae.bearing!=null?ye(Ae.bearing):""})]})]}),b.jsx("span",{className:"text-[11px] text-slate-400",children:Gd(Ae.distance)})]},Ae.id))})]})]})},Xd="rounded border border-slate-700 px-2 py-1 text-[11px] font-medium text-slate-200 transition hover:border-sky-500 hover:bg-slate-800",Yd="border-sky-500 bg-sky-900 text-sky-100",ww=({route:e,isActive:n,onActivate:s,checkpointMap:l,onUpdateRoute:f,onRemoveRoute:d,canRemove:w,selectedId:x,onSelectCheckpoint:C,onMoveCheckpoint:v,onRemoveCheckpoint:S,onAddCheckpoint:I,placementMode:O,onSetPlacementMode:z})=>{const[H,j]=K.useState(!1),ee=K.useMemo(()=>e.items.map((Z,X)=>{const he=l[Z];return he?{type:"checkpoint",id:he.id,label:he.name||`Point ${X+1}`,position:he.position,index:X,callout:uf(he.position)}:null}).filter(Boolean),[e.items,l]),F=Z=>X=>{X.dataTransfer.setData("application/x-cadet-map-checkpoint-id",Z.id),X.dataTransfer.effectAllowed="move";const he=X.target.closest("li");he&&X.dataTransfer.setDragImage(he,10,10)},D=Z=>{Z.preventDefault(),Z.dataTransfer.dropEffect="move"},P=Z=>{Z.preventDefault(),Z.dataTransfer.dropEffect="move"},V=Z=>X=>{X.preventDefault();const he=X.dataTransfer.getData("application/x-cadet-map-checkpoint-id");!he||he===Z.id||v(he,Z.index)},re=(O==null?void 0:O.type)??null,$=typeof(O==null?void 0:O.insertIndex)=="number"?O.insertIndex:null,W=Z=>{Z.index,Z.index,ee.length-1;const X=n&&re==="checkpoint"&&$===Z.index,he=n&&re==="checkpoint"&&$===Z.index+1;return b.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[b.jsx("button",{type:"button",className:`${Xd} ${X?Yd:""}`,onClick:ue=>{ue.stopPropagation(),z({type:"checkpoint",insertIndex:Z.index})},children:"Insert Before"}),b.jsx("button",{type:"button",className:`${Xd} ${he?Yd:""}`,onClick:ue=>{ue.stopPropagation(),z({type:"checkpoint",insertIndex:Z.index+1})},children:"Insert After"}),b.jsx("button",{type:"button",className:"rounded border border-rose-500 px-2 py-1 text-[11px] font-medium text-rose-300 transition hover:bg-rose-900 hover:text-rose-100",onClick:ue=>{ue.stopPropagation(),S(Z.id)},children:"Remove"})]})};return b.jsxs("div",{className:`border-b border-slate-700/50 ${n?"bg-slate-800/30":""}`,children:[b.jsxs("div",{className:"flex cursor-pointer items-center gap-3 p-4 hover:bg-slate-800/50",onClick:s,children:[b.jsx("div",{className:`transition-transform duration-200 ${n?"rotate-90":""}`,children:b.jsx("svg",{className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),b.jsx("input",{type:"color",value:e.color,onClick:Z=>Z.stopPropagation(),onChange:Z=>f(e.id,{color:Z.target.value}),className:"h-5 w-5 cursor-pointer rounded border-0 bg-transparent p-0",title:"Route color"}),b.jsx("div",{className:"flex-1",children:b.jsx("input",{type:"text",value:e.name,onClick:Z=>Z.stopPropagation(),onChange:Z=>f(e.id,{name:Z.target.value}),className:"w-full bg-transparent text-sm font-medium text-slate-200 placeholder-slate-500 focus:outline-none",placeholder:"Route Name"})}),w&&b.jsx("button",{onClick:Z=>{Z.stopPropagation(),d(e.id)},className:"rounded p-1 text-slate-400 hover:bg-red-500/10 hover:text-red-400",title:"Delete route",children:b.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),n&&b.jsxs("div",{className:"px-4 pb-4",children:[b.jsxs("ul",{className:"space-y-2 text-sm text-slate-200",children:[ee.length===0&&b.jsx("li",{className:"text-xs text-slate-500",children:"No markers yet. Add one below."}),ee.map(Z=>b.jsxs("li",{onDragEnter:D,onDragOver:P,onDrop:V(Z),className:`flex items-start gap-2 rounded-md border px-3 py-2 transition ${x===Z.id?"border-sky-500 bg-sky-900 text-sky-100":"cursor-pointer border-slate-800 hover:border-slate-600 hover:bg-slate-800"}`,onClick:()=>C(Z.id),children:[b.jsx("div",{draggable:"true",onDragStart:F(Z),className:"drag-handle mt-1 flex h-8 w-8 shrink-0 cursor-grab items-center justify-center rounded border border-slate-700 bg-slate-800 text-slate-400 touch-none hover:bg-slate-700 hover:text-slate-200 active:cursor-grabbing",onClick:X=>X.stopPropagation(),children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-5 w-5",children:b.jsx("path",{fillRule:"evenodd",d:"M10 3a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM10 8.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM11.5 15.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",clipRule:"evenodd"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("div",{className:"font-semibold",children:Z.label}),b.jsxs("div",{className:"text-xs text-slate-400",children:[Z.position.lat.toFixed(4),", ",Z.position.lng.toFixed(4)]}),Z.callout&&b.jsxs("div",{className:"text-[11px] font-mono uppercase text-amber-300",children:["Callout: ",Z.callout]}),W(Z)]})]},Z.id))]}),b.jsx("button",{onClick:I,style:re==="checkpoint"&&!$?{borderColor:e.color,color:e.color,backgroundColor:`${e.color}20`}:{},className:`mt-3 w-full rounded border border-dashed border-slate-600 py-2 text-xs font-medium text-slate-400 transition hover:bg-slate-800 ${re==="checkpoint"&&!$?"":"hover:border-sky-500 hover:text-sky-400"}`,children:"+ Add Checkpoint"})]})]})},yw=({onEnterPlacingMode:e})=>{const{checkpointMap:n,routes:s,activeRouteId:l,setActiveRoute:f,addRoute:d,removeRoute:w,updateRoute:x,selectedId:C,selectCheckpoint:v,connectVia:S,toggleConnectMode:I,clearAll:O,setPlacementMode:z,moveCheckpoint:H,removeCheckpoint:j,placementMode:ee}=No(),[F,D]=K.useState(l),P=V=>{F===V?D(null):(D(V),f(V))};return b.jsxs("div",{className:"flex h-full flex-col bg-slate-900/95 backdrop-blur-md",children:[b.jsxs("div",{className:"flex-1 overflow-y-auto",children:[s.map(V=>b.jsx(ww,{route:V,isActive:V.id===F,onActivate:()=>P(V.id),checkpointMap:n,onUpdateRoute:x,onRemoveRoute:w,canRemove:s.length>1,selectedId:C,onSelectCheckpoint:v,onMoveCheckpoint:H,onRemoveCheckpoint:j,onAddCheckpoint:()=>{f(V.id),z({type:"checkpoint"}),e&&e()},placementMode:ee,onSetPlacementMode:z},V.id)),b.jsx("div",{className:"p-4",children:b.jsxs("button",{onClick:()=>d(),className:"flex w-full items-center justify-center gap-2 rounded-lg border border-slate-600 bg-slate-800 py-2 text-sm text-slate-200 hover:border-sky-500 hover:bg-slate-700",children:[b.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Route"]})})]}),b.jsxs("div",{className:"border-t border-slate-700/50 p-4",children:[b.jsx("div",{className:"flex gap-2",children:b.jsx("button",{onClick:I,className:`flex-1 rounded border border-slate-600 py-2 text-xs font-medium transition ${S==="route"?"border-sky-500 bg-sky-900/20 text-sky-400":"text-slate-400 hover:border-sky-500 hover:bg-slate-800 hover:text-sky-400"}`,children:S==="route"?"Routing: Road":"Routing: Direct"})}),b.jsx("button",{onClick:O,className:"mt-2 w-full rounded border border-red-900/30 py-2 text-xs font-medium text-red-400 transition hover:bg-red-900/20 hover:text-red-300",children:"Clear All"})]})]})},Kd=e=>e===4?4:3,Qd={origin:null,originReference:null,precision:3},_w=lf(e=>({...Qd,setPrecision:n=>e(s=>{const l=Kd(n);return{precision:l,originReference:s.originReference?{...s.originReference,precision:l}:null}}),setOrigin:n=>e({origin:n}),setOriginReference:n=>e(s=>({originReference:n?{...n,precision:Kd(n.precision??s.precision)}:null})),resetGrid:()=>e(Qd)})),Cw=()=>_w(e=>({origin:e.origin,originReference:e.originReference,precision:e.precision,setOrigin:e.setOrigin,setOriginReference:e.setOriginReference,setPrecision:e.setPrecision,resetGrid:e.resetGrid})),ka=6371e3,bl=e=>e*Math.PI/180,qd=e=>e*180/Math.PI,Ew=e=>(e+540)%360-180,cf=e=>{if(e===3||e===4)return e;throw new Error("Unsupported grid precision. Use 3 or 4 figure references.")},hf=e=>cf(e)===3?100:10,fl=(e,n)=>{if(e==null)return null;const s=String(e).trim();if(!s)return null;if(!/^\d+$/.test(s))throw new Error("Grid references must contain digits only.");if(s.length!==n)throw new Error(`Expected ${n} digits for this precision setting.`);return parseInt(s,10)},Aw=({lat:e,lng:n},s,l)=>{const f=bl(e),d=e+l/ka*(180/Math.PI),w=n+s/(ka*Math.cos(f))*180/Math.PI;return{lat:d,lng:w}},xw=({origin:e,bearingDegrees:n,distanceMeters:s})=>{if(!e)throw new Error("Provide a valid origin location first.");if(n==null||Number.isNaN(n))throw new Error("Bearing must be a number.");if(s==null||Number.isNaN(s)||s<0)throw new Error("Distance must be a non-negative number.");const l=s/ka,f=bl(n),d=bl(e.lat),w=bl(e.lng),x=Math.sin(d),C=Math.cos(d),v=Math.sin(l),S=Math.cos(l),I=Math.asin(x*S+C*v*Math.cos(f)),O=w+Math.atan2(Math.sin(f)*v*C,S-x*Math.sin(I));return{lat:qd(I),lng:Ew(qd(O))}},Sw=({origin:e,originReference:n,targetReference:s,precision:l})=>{if(!e)throw new Error("Set a grid origin location first.");if(!n)throw new Error("Set a grid origin reference first.");const f=cf(l??n.precision??(s==null?void 0:s.precision)??3),d=fl(n.easting,f),w=fl(n.northing,f),x=fl(s.easting,f),C=fl(s.northing,f),v=hf(f),S=(x-d)*v,I=(C-w)*v;return Aw(e,S,I)},Iw=({origin:e,originReference:n,point:s,precision:l})=>{if(!e||!n)throw new Error("Grid origin must be configured.");const f=cf(l??n.precision??3),d=hf(f),w=e.lat*Math.PI/180,x=(s.lat-e.lat)*Math.PI*ka/180,C=(s.lng-e.lng)*Math.PI*ka*Math.cos(w)/180,v=Math.round(n.easting+C/d),S=Math.round(n.northing+x/d),I=O=>O.toString().padStart(f,"0");return{easting:I(v),northing:I(S),precision:f}},dl=e=>e!=null?e.toFixed(6):"",bw=e=>e==null||Number.isNaN(e)?"":e>=1e3?`${(e/1e3).toFixed(2)} km`:e>=10?`${e.toFixed(0)} m`:`${e.toFixed(1)} m`,ac=({show:e,onToggle:n})=>b.jsx("button",{type:"button",onClick:n,className:`flex h-5 w-5 items-center justify-center rounded-full border text-[10px] font-bold transition ${e?"border-sky-500 bg-sky-500 text-slate-900":"border-slate-600 text-slate-400 hover:border-sky-500 hover:text-sky-200"}`,"aria-label":"Toggle help",children:"?"}),Tw=({userLocation:e,selectedPosition:n,onPreviewLocationChange:s})=>{const{origin:l,originReference:f,precision:d,setOrigin:w,setOriginReference:x,setPrecision:C,resetGrid:v}=Cw(),{addCheckpoint:S}=No(),[I,O]=K.useState(""),[z,H]=K.useState(""),[j,ee]=K.useState(""),[F,D]=K.useState(""),[P,V]=K.useState(null),[re,$]=K.useState(null),[W,Z]=K.useState(null),[X,he]=K.useState("user"),[ue,fe]=K.useState(""),[J,ne]=K.useState("degrees"),[Y,ye]=K.useState(""),[de,te]=K.useState(null),[pe,ce]=K.useState(null),[Ee,Ne]=K.useState("origin"),[Ze,Ae]=K.useState(!1);K.useEffect(()=>{var De,Ue;f&&(O(((De=f.easting)==null?void 0:De.toString().padStart(d,"0"))??""),H(((Ue=f.northing)==null?void 0:Ue.toString().padStart(d,"0"))??""))},[f,d]);const Me=K.useMemo(()=>{if(!l||!f)return null;try{const De=Iw({origin:l,originReference:f,point:l,precision:d});return`${De.easting} / ${De.northing}`}catch(De){return console.warn(De),null}},[l,f,d]),ge=K.useMemo(()=>{if(!ue)return null;const De=Number(ue);return Number.isNaN(De)?null:J==="mils"?De*360/6400:De},[ue,J]),vt=K.useMemo(()=>ge==null?null:ge*6400/360,[ge]),He=(pe==null?void 0:pe.bearingDegrees)??null,Pn=He!=null?He*6400/360:null,Ln=()=>{let De=e;if(!De)if(n)De=n;else{Z("Waiting for GPS location (or select a point on the map).");return}const Ue=I.trim(),Ge=z.trim();if(!Ue||!Ge){Z("Enter grid reference digits.");return}if(Ue.length!==Ge.length){Z("Easting and Northing must have same number of digits.");return}let tn=3;if(Ue.length===3)tn=3;else if(Ue.length===4)tn=4;else{Z("Grid ref must be 3 or 4 digits (e.g. 123 456).");return}try{const Te=Number(Ue),qt=Number(Ge);if(Number.isNaN(Te)||Number.isNaN(qt))throw new Error("Grid reference must be numbers.");w(De),x({easting:Te,northing:qt,precision:tn}),C(tn),Z(null),V(`Grid calibrated to ${tn}-figure reference.`)}catch(Te){Z(Te.message)}},kt=()=>{if(X==="user"){if(!e)throw new Error("No user location fix yet.");return e}if(X==="selected"){if(!n)throw new Error("Select a marker on the map to use as the origin.");return n}throw new Error("Select a valid start point.")},dt=()=>{try{if(!ue)throw new Error("Enter a bearing value.");if(!Y)throw new Error("Enter a distance in meters.");const De=kt(),Ue=Number(ue),Ge=Number(Y);if(Number.isNaN(Ue))throw new Error("Bearing must be a number.");if(Number.isNaN(Ge)||Ge<0)throw new Error("Distance must be zero or greater.");const Te=((J==="mils"?Ue*360/6400:Ue)%360+360)%360,qt=xw({origin:De,bearingDegrees:Te,distanceMeters:Ge});te(qt),ce({bearingDegrees:Te,bearingInput:Ue,bearingUnit:J,distanceMeters:Ge,origin:De}),V("Projected point from bearing and distance."),Z(null)}catch(De){te(null),ce(null),Z(De.message??"Unable to project bearing.")}},Xe=()=>{if(!j||!F){Z("Enter both easting and northing for the grid reference.");return}try{const De=Sw({origin:l,originReference:f,targetReference:{easting:j,northing:F,precision:d},precision:d});$(De),V("Grid reference resolved."),Z(null)}catch(De){$(null),Z(De.message)}},Zn=(De=re,Ue="grid reference")=>{if(!De){Z(`Resolve a ${Ue} first.`);return}S(De),V(`Checkpoint added from ${Ue}.`),Z(null)},Wt=()=>{v(),O(""),H(""),ee(""),D(""),$(null),he("user"),fe(""),ne("degrees"),ye(""),te(null),ce(null),V("Grid settings cleared."),Z(null)},Dn=hf(d);return K.useEffect(()=>{s&&s(Ee==="convert"&&re?{position:re,source:l}:Ee==="project"&&de?{position:de,source:(pe==null?void 0:pe.origin)??null}:null)},[Ee,re,de,pe,l,s]),b.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl bg-slate-900 p-4 text-xs text-slate-200 shadow-lg shadow-slate-950",children:[b.jsxs("div",{className:"flex items-center justify-between gap-2",children:[b.jsx("h2",{className:"text-base font-semibold text-sky-200",children:"Grid Tools"}),b.jsx("div",{className:"flex gap-1",children:b.jsxs("span",{className:"rounded-full border border-slate-700 px-2 py-1 text-[10px] font-semibold text-slate-400",children:[d,"-fig mode"]})})]}),b.jsxs("div",{className:"flex gap-1 rounded-lg border border-slate-800 bg-slate-950 p-1",children:[b.jsx("button",{type:"button",onClick:()=>Ne("origin"),className:`flex-1 rounded-md py-1.5 text-[11px] font-semibold transition ${Ee==="origin"?"bg-slate-800 text-sky-200 shadow-sm":"text-slate-400 hover:bg-slate-900 hover:text-slate-200"}`,children:"Origin"}),b.jsx("button",{type:"button",onClick:()=>Ne("convert"),className:`flex-1 rounded-md py-1.5 text-[11px] font-semibold transition ${Ee==="convert"?"bg-slate-800 text-sky-200 shadow-sm":"text-slate-400 hover:bg-slate-900 hover:text-slate-200"}`,children:"Convert"}),b.jsx("button",{type:"button",onClick:()=>Ne("project"),className:`flex-1 rounded-md py-1.5 text-[11px] font-semibold transition ${Ee==="project"?"bg-slate-800 text-sky-200 shadow-sm":"text-slate-400 hover:bg-slate-900 hover:text-slate-200"}`,children:"Project"})]}),Ee==="origin"&&b.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950 p-3",children:[b.jsxs("div",{className:"mb-3 flex items-start justify-between gap-2",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide text-sky-300",children:"Calibrate Grid Origin"}),b.jsx("p",{className:"mt-1 text-[11px] text-slate-400",children:"Sync your current location to a grid reference."})]}),b.jsx(ac,{show:Ze,onToggle:()=>Ae(!Ze)})]}),Ze&&b.jsxs("div",{className:"mb-4 rounded-lg bg-slate-900 p-2 text-[11px] text-slate-300",children:[b.jsx("p",{className:"mb-1 font-semibold text-sky-200",children:"How to calibrate:"}),b.jsx("p",{className:"text-slate-400",children:"Enter the Grid Reference for your current location (e.g. from a paper map) and tap 'Set Origin'. The app will link your GPS position to that grid reference."}),b.jsx("p",{className:"mt-2 text-slate-500 italic",children:"Note: If GPS is unavailable, select a point on the map first."})]}),b.jsxs("div",{className:"flex flex-col gap-3",children:[b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[b.jsxs("label",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Easting"}),b.jsx("input",{value:I,onChange:De=>O(De.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. 123"})]}),b.jsxs("label",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Northing"}),b.jsx("input",{value:z,onChange:De=>H(De.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. 456"})]})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{type:"button",className:"flex-1 rounded-md border border-sky-500 bg-sky-500/10 px-3 py-2 font-semibold text-sky-200 hover:bg-sky-500/20",onClick:Ln,children:"Set Origin"}),b.jsx("button",{type:"button",className:"rounded-md border border-slate-700 px-3 py-2 font-semibold text-slate-300 hover:border-rose-500 hover:text-rose-200",onClick:Wt,children:"Clear"})]}),b.jsx("div",{className:"mt-1 text-center text-[11px]",children:Me?b.jsxs("span",{className:"text-emerald-400",children:["Active: ",Me," (",d,"-fig)"]}):b.jsx("span",{className:"text-slate-500",children:"Origin not set"})})]})]}),Ee==="convert"&&b.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950 p-3",children:[b.jsxs("div",{className:"mb-3 flex items-start justify-between gap-2",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide text-sky-300",children:"Convert Grid Ref"}),b.jsx("p",{className:"mt-1 text-[11px] text-slate-400",children:"Enter a grid reference to find its location on the map relative to your origin."})]}),b.jsx(ac,{show:Ze,onToggle:()=>Ae(!Ze)})]}),Ze&&b.jsxs("div",{className:"mb-4 rounded-lg bg-slate-900 p-2 text-[11px] text-slate-300",children:[b.jsx("p",{className:"mb-1 font-semibold text-sky-200",children:"How to convert:"}),b.jsx("p",{className:"text-slate-400",children:'Once you have calibrated the origin, you can enter any other grid reference here. The app will calculate the offset from the origin, show you where that point lands, and the "Add checkpoint" button will drop it into your active route.'})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[b.jsxs("label",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Easting"}),b.jsx("input",{value:j,onChange:De=>ee(De.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. ".concat("2".repeat(d))})]}),b.jsxs("label",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Northing"}),b.jsx("input",{value:F,onChange:De=>D(De.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. ".concat("3".repeat(d))})]})]}),b.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[b.jsx("button",{type:"button",className:"rounded-md border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-900",onClick:Xe,children:"Preview location"}),b.jsxs("span",{className:"text-[11px] text-slate-400",children:["1 digit = ",Dn," m offset"]})]}),re&&b.jsxs("div",{className:"mt-3 rounded-md border border-slate-800 bg-slate-900 p-3 text-[11px] text-slate-200",children:[b.jsx("p",{className:"font-semibold text-sky-200",children:"Resolved coordinates"}),b.jsxs("p",{className:"mt-1 text-slate-300",children:["Lat ",dl(re.lat)," | Lng ",dl(re.lng)]}),b.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:b.jsx("button",{type:"button",className:"rounded-md border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-900",onClick:()=>Zn(re,"grid reference"),children:"Add checkpoint"})})]})]}),Ee==="project"&&b.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950 p-3",children:[b.jsxs("div",{className:"mb-3 flex items-start justify-between gap-2",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide text-sky-300",children:"Project by bearing"}),b.jsx("p",{className:"mt-1 text-[11px] text-slate-400",children:"Calculate a new point by moving a specific distance and bearing from a starting point."})]}),b.jsx(ac,{show:Ze,onToggle:()=>Ae(!Ze)})]}),Ze&&b.jsxs("div",{className:"mb-4 rounded-lg bg-slate-900 p-2 text-[11px] text-slate-300",children:[b.jsx("p",{className:"mb-1 font-semibold text-sky-200",children:"How to project:"}),b.jsxs("ol",{className:"list-decimal space-y-1 pl-4 text-slate-400",children:[b.jsx("li",{children:"Choose a start point (your current GPS fix or a checkpoint you selected on the map)."}),b.jsx("li",{children:"Enter the bearing (direction) and distance to travel."}),b.jsx("li",{children:"Click 'Project location' to see the destination on the map, then use 'Add checkpoint' to store it in the active route."})]})]}),b.jsxs("div",{className:"mb-3",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Start Point"}),b.jsxs("div",{className:"mt-1 flex gap-2",children:[b.jsx("button",{type:"button",onClick:()=>he("user"),className:`flex-1 rounded-md border py-2 text-[11px] font-semibold transition ${X==="user"?"border-sky-500 bg-sky-500/10 text-sky-200":"border-slate-700 text-slate-400 hover:border-slate-500 hover:text-slate-200"}`,children:"My Location"}),b.jsx("button",{type:"button",onClick:()=>he("selected"),className:`flex-1 rounded-md border py-2 text-[11px] font-semibold transition ${X==="selected"?"border-sky-500 bg-sky-500/10 text-sky-200":"border-slate-700 text-slate-400 hover:border-slate-500 hover:text-slate-200"}`,children:"Selected Marker"})]}),!e&&X==="user"&&b.jsx("p",{className:"mt-1 text-[10px] text-rose-400",children:"Waiting for GPS fix..."}),!n&&X==="selected"&&b.jsx("p",{className:"mt-1 text-[10px] text-rose-400",children:"No marker selected on map."})]}),b.jsxs("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:[b.jsxs("label",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Bearing"}),b.jsx("input",{value:ue,onChange:De=>fe(De.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:J==="degrees"?"0  360":"0  6400 mil"})]}),b.jsxs("div",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Units"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{type:"button",className:`flex-1 rounded-md px-2 py-1 text-[11px] font-semibold ${J==="degrees"?"border border-sky-500 text-sky-200":"border border-slate-700 text-slate-200 hover:border-sky-500 hover:text-sky-200"}`,onClick:()=>ne("degrees"),children:"Degrees"}),b.jsx("button",{type:"button",className:`flex-1 rounded-md px-2 py-1 text-[11px] font-semibold ${J==="mils"?"border border-sky-500 text-sky-200":"border border-slate-700 text-slate-200 hover:border-sky-500 hover:text-sky-200"}`,onClick:()=>ne("mils"),children:"Mils"})]})]})]}),b.jsxs("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:[b.jsxs("label",{className:"flex flex-col gap-1",children:[b.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:"Distance (m)"}),b.jsx("input",{value:Y,onChange:De=>ye(De.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-100 focus:border-sky-500 focus:outline-none",placeholder:"e.g. 250"})]}),b.jsx("div",{className:"flex flex-col justify-end text-[11px] text-slate-400",children:b.jsx("span",{children:ge!=null?` ${ge.toFixed(1)} / ${(vt==null?void 0:vt.toFixed(0))??""} mil`:"Enter a bearing to preview conversions."})})]}),b.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[b.jsx("button",{type:"button",className:"rounded-md border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-900",onClick:dt,children:"Project location"}),b.jsx("span",{className:"text-[11px] text-slate-400",children:"Distance measured in straight line"})]}),de&&b.jsxs("div",{className:"mt-3 rounded-md border border-slate-800 bg-slate-900 p-3 text-[11px] text-slate-200",children:[b.jsx("p",{className:"font-semibold text-sky-200",children:"Projected coordinates"}),b.jsxs("p",{className:"mt-1 text-slate-300",children:["Lat ",dl(de.lat)," | Lng ",dl(de.lng)]}),b.jsxs("p",{className:"text-slate-400",children:["Bearing used:"," ",He!=null?`${He.toFixed(1)}${Pn!=null?` (${Pn.toFixed(0)} mil)`:""}`:""]}),(pe==null?void 0:pe.distanceMeters)!=null&&b.jsxs("p",{className:"text-slate-400",children:["Distance: ",bw(pe.distanceMeters)]}),b.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:b.jsx("button",{type:"button",className:"rounded-md border border-sky-500 px-3 py-1 text-[11px] font-semibold text-sky-200 hover:bg-sky-900",onClick:()=>Zn(de,"bearing projection"),children:"Add checkpoint"})})]})]}),(W||P)&&b.jsxs("div",{className:"rounded-md border border-slate-800 bg-slate-950 p-3 text-[11px]",children:[W&&b.jsx("p",{className:"text-rose-400",children:W}),P&&b.jsx("p",{className:"text-emerald-300",children:P})]}),b.jsx("button",{type:"button",className:"rounded-md border border-slate-700 px-3 py-1 text-[11px] font-semibold text-slate-300 hover:border-rose-500 hover:text-rose-200",onClick:Wt,children:"Clear grid settings"})]})},Nw=({type:e,color:n})=>{const s=K.useRef(null),l=w=>{w.dataTransfer.setData("application/x-cadet-map-item",e),w.dataTransfer.effectAllowed="copy",s.current&&w.dataTransfer.setDragImage(s.current,10,20)},f={borderColor:n,backgroundColor:`${n}33`},d={backgroundColor:n};return b.jsxs(b.Fragment,{children:[b.jsx("div",{draggable:!0,onDragStart:l,className:"flex h-16 w-16 cursor-grab items-center justify-center rounded-full border-2 shadow-lg backdrop-blur-sm transition hover:scale-110 active:cursor-grabbing active:scale-95 touch-none",style:f,children:b.jsx("div",{className:"h-4 w-4 rounded-full",style:d})}),b.jsx("div",{ref:s,className:"absolute -top-[1000px] left-0 h-5 w-5 rounded-full border-2",style:f})]})},Ow=()=>{const{routes:e,activeRouteId:n}=No(),s=e.find(f=>f.id===n)||e[0],l=(s==null?void 0:s.color)||"#38bdf8";return b.jsx("div",{className:"pointer-events-auto flex gap-6 p-4",children:b.jsx(Nw,{type:"checkpoint",color:l})})};var Rw=Object.defineProperty,Jl=Object.getOwnPropertySymbols,Zp=Object.prototype.hasOwnProperty,Gp=Object.prototype.propertyIsEnumerable,$d=(e,n,s)=>n in e?Rw(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,lh=(e,n)=>{for(var s in n||(n={}))Zp.call(n,s)&&$d(e,s,n[s]);if(Jl)for(var s of Jl(n))Gp.call(n,s)&&$d(e,s,n[s]);return e},uh=(e,n)=>{var s={};for(var l in e)Zp.call(e,l)&&n.indexOf(l)<0&&(s[l]=e[l]);if(e!=null&&Jl)for(var l of Jl(e))n.indexOf(l)<0&&Gp.call(e,l)&&(s[l]=e[l]);return s};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ds;(e=>{const n=class lt{constructor(C,v,S,I){if(this.version=C,this.errorCorrectionLevel=v,this.modules=[],this.isFunction=[],C<lt.MIN_VERSION||C>lt.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=C*4+17;let O=[];for(let H=0;H<this.size;H++)O.push(!1);for(let H=0;H<this.size;H++)this.modules.push(O.slice()),this.isFunction.push(O.slice());this.drawFunctionPatterns();const z=this.addEccAndInterleave(S);if(this.drawCodewords(z),I==-1){let H=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const ee=this.getPenaltyScore();ee<H&&(I=j,H=ee),this.applyMask(j)}}f(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(C,v){const S=e.QrSegment.makeSegments(C);return lt.encodeSegments(S,v)}static encodeBinary(C,v){const S=e.QrSegment.makeBytes(C);return lt.encodeSegments([S],v)}static encodeSegments(C,v,S=1,I=40,O=-1,z=!0){if(!(lt.MIN_VERSION<=S&&S<=I&&I<=lt.MAX_VERSION)||O<-1||O>7)throw new RangeError("Invalid value");let H,j;for(H=S;;H++){const P=lt.getNumDataCodewords(H,v)*8,V=w.getTotalBits(C,H);if(V<=P){j=V;break}if(H>=I)throw new RangeError("Data too long")}for(const P of[lt.Ecc.MEDIUM,lt.Ecc.QUARTILE,lt.Ecc.HIGH])z&&j<=lt.getNumDataCodewords(H,P)*8&&(v=P);let ee=[];for(const P of C){s(P.mode.modeBits,4,ee),s(P.numChars,P.mode.numCharCountBits(H),ee);for(const V of P.getData())ee.push(V)}f(ee.length==j);const F=lt.getNumDataCodewords(H,v)*8;f(ee.length<=F),s(0,Math.min(4,F-ee.length),ee),s(0,(8-ee.length%8)%8,ee),f(ee.length%8==0);for(let P=236;ee.length<F;P^=253)s(P,8,ee);let D=[];for(;D.length*8<ee.length;)D.push(0);return ee.forEach((P,V)=>D[V>>>3]|=P<<7-(V&7)),new lt(H,v,D,O)}getModule(C,v){return 0<=C&&C<this.size&&0<=v&&v<this.size&&this.modules[v][C]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const C=this.getAlignmentPatternPositions(),v=C.length;for(let S=0;S<v;S++)for(let I=0;I<v;I++)S==0&&I==0||S==0&&I==v-1||S==v-1&&I==0||this.drawAlignmentPattern(C[S],C[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(C){const v=this.errorCorrectionLevel.formatBits<<3|C;let S=v;for(let O=0;O<10;O++)S=S<<1^(S>>>9)*1335;const I=(v<<10|S)^21522;f(I>>>15==0);for(let O=0;O<=5;O++)this.setFunctionModule(8,O,l(I,O));this.setFunctionModule(8,7,l(I,6)),this.setFunctionModule(8,8,l(I,7)),this.setFunctionModule(7,8,l(I,8));for(let O=9;O<15;O++)this.setFunctionModule(14-O,8,l(I,O));for(let O=0;O<8;O++)this.setFunctionModule(this.size-1-O,8,l(I,O));for(let O=8;O<15;O++)this.setFunctionModule(8,this.size-15+O,l(I,O));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let C=this.version;for(let S=0;S<12;S++)C=C<<1^(C>>>11)*7973;const v=this.version<<12|C;f(v>>>18==0);for(let S=0;S<18;S++){const I=l(v,S),O=this.size-11+S%3,z=Math.floor(S/3);this.setFunctionModule(O,z,I),this.setFunctionModule(z,O,I)}}drawFinderPattern(C,v){for(let S=-4;S<=4;S++)for(let I=-4;I<=4;I++){const O=Math.max(Math.abs(I),Math.abs(S)),z=C+I,H=v+S;0<=z&&z<this.size&&0<=H&&H<this.size&&this.setFunctionModule(z,H,O!=2&&O!=4)}}drawAlignmentPattern(C,v){for(let S=-2;S<=2;S++)for(let I=-2;I<=2;I++)this.setFunctionModule(C+I,v+S,Math.max(Math.abs(I),Math.abs(S))!=1)}setFunctionModule(C,v,S){this.modules[v][C]=S,this.isFunction[v][C]=!0}addEccAndInterleave(C){const v=this.version,S=this.errorCorrectionLevel;if(C.length!=lt.getNumDataCodewords(v,S))throw new RangeError("Invalid argument");const I=lt.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][v],O=lt.ECC_CODEWORDS_PER_BLOCK[S.ordinal][v],z=Math.floor(lt.getNumRawDataModules(v)/8),H=I-z%I,j=Math.floor(z/I);let ee=[];const F=lt.reedSolomonComputeDivisor(O);for(let P=0,V=0;P<I;P++){let re=C.slice(V,V+j-O+(P<H?0:1));V+=re.length;const $=lt.reedSolomonComputeRemainder(re,F);P<H&&re.push(0),ee.push(re.concat($))}let D=[];for(let P=0;P<ee[0].length;P++)ee.forEach((V,re)=>{(P!=j-O||re>=H)&&D.push(V[P])});return f(D.length==z),D}drawCodewords(C){if(C.length!=Math.floor(lt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let v=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let I=0;I<this.size;I++)for(let O=0;O<2;O++){const z=S-O,j=(S+1&2)==0?this.size-1-I:I;!this.isFunction[j][z]&&v<C.length*8&&(this.modules[j][z]=l(C[v>>>3],7-(v&7)),v++)}}f(v==C.length*8)}applyMask(C){if(C<0||C>7)throw new RangeError("Mask value out of range");for(let v=0;v<this.size;v++)for(let S=0;S<this.size;S++){let I;switch(C){case 0:I=(S+v)%2==0;break;case 1:I=v%2==0;break;case 2:I=S%3==0;break;case 3:I=(S+v)%3==0;break;case 4:I=(Math.floor(S/3)+Math.floor(v/2))%2==0;break;case 5:I=S*v%2+S*v%3==0;break;case 6:I=(S*v%2+S*v%3)%2==0;break;case 7:I=((S+v)%2+S*v%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[v][S]&&I&&(this.modules[v][S]=!this.modules[v][S])}}getPenaltyScore(){let C=0;for(let O=0;O<this.size;O++){let z=!1,H=0,j=[0,0,0,0,0,0,0];for(let ee=0;ee<this.size;ee++)this.modules[O][ee]==z?(H++,H==5?C+=lt.PENALTY_N1:H>5&&C++):(this.finderPenaltyAddHistory(H,j),z||(C+=this.finderPenaltyCountPatterns(j)*lt.PENALTY_N3),z=this.modules[O][ee],H=1);C+=this.finderPenaltyTerminateAndCount(z,H,j)*lt.PENALTY_N3}for(let O=0;O<this.size;O++){let z=!1,H=0,j=[0,0,0,0,0,0,0];for(let ee=0;ee<this.size;ee++)this.modules[ee][O]==z?(H++,H==5?C+=lt.PENALTY_N1:H>5&&C++):(this.finderPenaltyAddHistory(H,j),z||(C+=this.finderPenaltyCountPatterns(j)*lt.PENALTY_N3),z=this.modules[ee][O],H=1);C+=this.finderPenaltyTerminateAndCount(z,H,j)*lt.PENALTY_N3}for(let O=0;O<this.size-1;O++)for(let z=0;z<this.size-1;z++){const H=this.modules[O][z];H==this.modules[O][z+1]&&H==this.modules[O+1][z]&&H==this.modules[O+1][z+1]&&(C+=lt.PENALTY_N2)}let v=0;for(const O of this.modules)v=O.reduce((z,H)=>z+(H?1:0),v);const S=this.size*this.size,I=Math.ceil(Math.abs(v*20-S*10)/S)-1;return f(0<=I&&I<=9),C+=I*lt.PENALTY_N4,f(0<=C&&C<=2568888),C}getAlignmentPatternPositions(){if(this.version==1)return[];{const C=Math.floor(this.version/7)+2,v=this.version==32?26:Math.ceil((this.version*4+4)/(C*2-2))*2;let S=[6];for(let I=this.size-7;S.length<C;I-=v)S.splice(1,0,I);return S}}static getNumRawDataModules(C){if(C<lt.MIN_VERSION||C>lt.MAX_VERSION)throw new RangeError("Version number out of range");let v=(16*C+128)*C+64;if(C>=2){const S=Math.floor(C/7)+2;v-=(25*S-10)*S-55,C>=7&&(v-=36)}return f(208<=v&&v<=29648),v}static getNumDataCodewords(C,v){return Math.floor(lt.getNumRawDataModules(C)/8)-lt.ECC_CODEWORDS_PER_BLOCK[v.ordinal][C]*lt.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][C]}static reedSolomonComputeDivisor(C){if(C<1||C>255)throw new RangeError("Degree out of range");let v=[];for(let I=0;I<C-1;I++)v.push(0);v.push(1);let S=1;for(let I=0;I<C;I++){for(let O=0;O<v.length;O++)v[O]=lt.reedSolomonMultiply(v[O],S),O+1<v.length&&(v[O]^=v[O+1]);S=lt.reedSolomonMultiply(S,2)}return v}static reedSolomonComputeRemainder(C,v){let S=v.map(I=>0);for(const I of C){const O=I^S.shift();S.push(0),v.forEach((z,H)=>S[H]^=lt.reedSolomonMultiply(z,O))}return S}static reedSolomonMultiply(C,v){if(C>>>8||v>>>8)throw new RangeError("Byte out of range");let S=0;for(let I=7;I>=0;I--)S=S<<1^(S>>>7)*285,S^=(v>>>I&1)*C;return f(S>>>8==0),S}finderPenaltyCountPatterns(C){const v=C[1];f(v<=this.size*3);const S=v>0&&C[2]==v&&C[3]==v*3&&C[4]==v&&C[5]==v;return(S&&C[0]>=v*4&&C[6]>=v?1:0)+(S&&C[6]>=v*4&&C[0]>=v?1:0)}finderPenaltyTerminateAndCount(C,v,S){return C&&(this.finderPenaltyAddHistory(v,S),v=0),v+=this.size,this.finderPenaltyAddHistory(v,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(C,v){v[0]==0&&(C+=this.size),v.pop(),v.unshift(C)}};n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=n;function s(x,C,v){if(C<0||C>31||x>>>C)throw new RangeError("Value out of range");for(let S=C-1;S>=0;S--)v.push(x>>>S&1)}function l(x,C){return(x>>>C&1)!=0}function f(x){if(!x)throw new Error("Assertion error")}const d=class $t{constructor(C,v,S){if(this.mode=C,this.numChars=v,this.bitData=S,v<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(C){let v=[];for(const S of C)s(S,8,v);return new $t($t.Mode.BYTE,C.length,v)}static makeNumeric(C){if(!$t.isNumeric(C))throw new RangeError("String contains non-numeric characters");let v=[];for(let S=0;S<C.length;){const I=Math.min(C.length-S,3);s(parseInt(C.substring(S,S+I),10),I*3+1,v),S+=I}return new $t($t.Mode.NUMERIC,C.length,v)}static makeAlphanumeric(C){if(!$t.isAlphanumeric(C))throw new RangeError("String contains unencodable characters in alphanumeric mode");let v=[],S;for(S=0;S+2<=C.length;S+=2){let I=$t.ALPHANUMERIC_CHARSET.indexOf(C.charAt(S))*45;I+=$t.ALPHANUMERIC_CHARSET.indexOf(C.charAt(S+1)),s(I,11,v)}return S<C.length&&s($t.ALPHANUMERIC_CHARSET.indexOf(C.charAt(S)),6,v),new $t($t.Mode.ALPHANUMERIC,C.length,v)}static makeSegments(C){return C==""?[]:$t.isNumeric(C)?[$t.makeNumeric(C)]:$t.isAlphanumeric(C)?[$t.makeAlphanumeric(C)]:[$t.makeBytes($t.toUtf8ByteArray(C))]}static makeEci(C){let v=[];if(C<0)throw new RangeError("ECI assignment value out of range");if(C<128)s(C,8,v);else if(C<16384)s(2,2,v),s(C,14,v);else if(C<1e6)s(6,3,v),s(C,21,v);else throw new RangeError("ECI assignment value out of range");return new $t($t.Mode.ECI,0,v)}static isNumeric(C){return $t.NUMERIC_REGEX.test(C)}static isAlphanumeric(C){return $t.ALPHANUMERIC_REGEX.test(C)}getData(){return this.bitData.slice()}static getTotalBits(C,v){let S=0;for(const I of C){const O=I.mode.numCharCountBits(v);if(I.numChars>=1<<O)return 1/0;S+=4+O+I.bitData.length}return S}static toUtf8ByteArray(C){C=encodeURI(C);let v=[];for(let S=0;S<C.length;S++)C.charAt(S)!="%"?v.push(C.charCodeAt(S)):(v.push(parseInt(C.substring(S+1,S+3),16)),S+=2);return v}};d.NUMERIC_REGEX=/^[0-9]*$/,d.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,d.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let w=d;e.QrSegment=d})(Ds||(Ds={}));(e=>{(n=>{const s=class{constructor(f,d){this.ordinal=f,this.formatBits=d}};s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2),n.Ecc=s})(e.QrCode||(e.QrCode={}))})(Ds||(Ds={}));(e=>{(n=>{const s=class{constructor(f,d){this.modeBits=f,this.numBitsCharCount=d}numCharCountBits(f){return this.numBitsCharCount[Math.floor((f+7)/17)]}};s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),n.Mode=s})(e.QrSegment||(e.QrSegment={}))})(Ds||(Ds={}));var oo=Ds;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var kw={L:oo.QrCode.Ecc.LOW,M:oo.QrCode.Ecc.MEDIUM,Q:oo.QrCode.Ecc.QUARTILE,H:oo.QrCode.Ecc.HIGH},Xp=128,Yp="L",Kp="#FFFFFF",Qp="#000000",qp=!1,$p=1,Mw=4,Pw=0,Lw=.1;function Jp(e,n=0){const s=[];return e.forEach(function(l,f){let d=null;l.forEach(function(w,x){if(!w&&d!==null){s.push(`M${d+n} ${f+n}h${x-d}v1H${d+n}z`),d=null;return}if(x===l.length-1){if(!w)return;d===null?s.push(`M${x+n},${f+n} h1v1H${x+n}z`):s.push(`M${d+n},${f+n} h${x+1-d}v1H${d+n}z`);return}w&&d===null&&(d=x)})}),s.join("")}function eg(e,n){return e.slice().map((s,l)=>l<n.y||l>=n.y+n.h?s:s.map((f,d)=>d<n.x||d>=n.x+n.w?f:!1))}function Dw(e,n,s,l){if(l==null)return null;const f=e.length+s*2,d=Math.floor(n*Lw),w=f/n,x=(l.width||d)*w,C=(l.height||d)*w,v=l.x==null?e.length/2-x/2:l.x*w,S=l.y==null?e.length/2-C/2:l.y*w,I=l.opacity==null?1:l.opacity;let O=null;if(l.excavate){let H=Math.floor(v),j=Math.floor(S),ee=Math.ceil(x+v-H),F=Math.ceil(C+S-j);O={x:H,y:j,w:ee,h:F}}const z=l.crossOrigin;return{x:v,y:S,h:C,w:x,excavation:O,opacity:I,crossOrigin:z}}function Bw(e,n){return n!=null?Math.max(Math.floor(n),0):e?Mw:Pw}function tg({value:e,level:n,minVersion:s,includeMargin:l,marginSize:f,imageSettings:d,size:w,boostLevel:x}){let C=Ht.useMemo(()=>{const H=(Array.isArray(e)?e:[e]).reduce((j,ee)=>(j.push(...oo.QrSegment.makeSegments(ee)),j),[]);return oo.QrCode.encodeSegments(H,kw[n],s,void 0,void 0,x)},[e,n,s,x]);const{cells:v,margin:S,numCells:I,calculatedImageSettings:O}=Ht.useMemo(()=>{let z=C.getModules();const H=Bw(l,f),j=z.length+H*2,ee=Dw(z,w,H,d);return{cells:z,margin:H,numCells:j,calculatedImageSettings:ee}},[C,w,d,l,f]);return{qrcode:C,margin:S,cells:v,numCells:I,calculatedImageSettings:O}}var Fw=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),jw=Ht.forwardRef(function(n,s){const l=n,{value:f,size:d=Xp,level:w=Yp,bgColor:x=Kp,fgColor:C=Qp,includeMargin:v=qp,minVersion:S=$p,boostLevel:I,marginSize:O,imageSettings:z}=l,j=uh(l,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:ee}=j,F=uh(j,["style"]),D=z==null?void 0:z.src,P=Ht.useRef(null),V=Ht.useRef(null),re=Ht.useCallback(ne=>{P.current=ne,typeof s=="function"?s(ne):s&&(s.current=ne)},[s]),[$,W]=Ht.useState(!1),{margin:Z,cells:X,numCells:he,calculatedImageSettings:ue}=tg({value:f,level:w,minVersion:S,boostLevel:I,includeMargin:v,marginSize:O,imageSettings:z,size:d});Ht.useEffect(()=>{if(P.current!=null){const ne=P.current,Y=ne.getContext("2d");if(!Y)return;let ye=X;const de=V.current,te=ue!=null&&de!==null&&de.complete&&de.naturalHeight!==0&&de.naturalWidth!==0;te&&ue.excavation!=null&&(ye=eg(X,ue.excavation));const pe=window.devicePixelRatio||1;ne.height=ne.width=d*pe;const ce=d/he*pe;Y.scale(ce,ce),Y.fillStyle=x,Y.fillRect(0,0,he,he),Y.fillStyle=C,Fw?Y.fill(new Path2D(Jp(ye,Z))):X.forEach(function(Ee,Ne){Ee.forEach(function(Ze,Ae){Ze&&Y.fillRect(Ae+Z,Ne+Z,1,1)})}),ue&&(Y.globalAlpha=ue.opacity),te&&Y.drawImage(de,ue.x+Z,ue.y+Z,ue.w,ue.h)}}),Ht.useEffect(()=>{W(!1)},[D]);const fe=lh({height:d,width:d},ee);let J=null;return D!=null&&(J=Ht.createElement("img",{src:D,key:D,style:{display:"none"},onLoad:()=>{W(!0)},ref:V,crossOrigin:ue==null?void 0:ue.crossOrigin})),Ht.createElement(Ht.Fragment,null,Ht.createElement("canvas",lh({style:fe,height:d,width:d,ref:re,role:"img"},F)),J)});jw.displayName="QRCodeCanvas";var ng=Ht.forwardRef(function(n,s){const l=n,{value:f,size:d=Xp,level:w=Yp,bgColor:x=Kp,fgColor:C=Qp,includeMargin:v=qp,minVersion:S=$p,boostLevel:I,title:O,marginSize:z,imageSettings:H}=l,j=uh(l,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:ee,cells:F,numCells:D,calculatedImageSettings:P}=tg({value:f,level:w,minVersion:S,boostLevel:I,includeMargin:v,marginSize:z,imageSettings:H,size:d});let V=F,re=null;H!=null&&P!=null&&(P.excavation!=null&&(V=eg(F,P.excavation)),re=Ht.createElement("image",{href:H.src,height:P.h,width:P.w,x:P.x+ee,y:P.y+ee,preserveAspectRatio:"none",opacity:P.opacity,crossOrigin:P.crossOrigin}));const $=Jp(V,ee);return Ht.createElement("svg",lh({height:d,width:d,viewBox:`0 0 ${D} ${D}`,ref:s,role:"img"},j),!!O&&Ht.createElement("title",null,O),Ht.createElement("path",{fill:x,d:`M0,0 h${D}v${D}H0z`,shapeRendering:"crispEdges"}),Ht.createElement("path",{fill:C,d:$,shapeRendering:"crispEdges"}),re)});ng.displayName="QRCodeSVG";var Fe;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Fe||(Fe={}));var Jd=new Map([[Fe.QR_CODE,"QR_CODE"],[Fe.AZTEC,"AZTEC"],[Fe.CODABAR,"CODABAR"],[Fe.CODE_39,"CODE_39"],[Fe.CODE_93,"CODE_93"],[Fe.CODE_128,"CODE_128"],[Fe.DATA_MATRIX,"DATA_MATRIX"],[Fe.MAXICODE,"MAXICODE"],[Fe.ITF,"ITF"],[Fe.EAN_13,"EAN_13"],[Fe.EAN_8,"EAN_8"],[Fe.PDF_417,"PDF_417"],[Fe.RSS_14,"RSS_14"],[Fe.RSS_EXPANDED,"RSS_EXPANDED"],[Fe.UPC_A,"UPC_A"],[Fe.UPC_E,"UPC_E"],[Fe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),e1;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(e1||(e1={}));function zw(e){return Object.values(Fe).includes(e)}var eu;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(eu||(eu={}));var Uw=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[eu.SCAN_TYPE_CAMERA,eu.SCAN_TYPE_FILE],e}(),rg=function(){function e(n,s){this.format=n,this.formatName=s}return e.prototype.toString=function(){return this.formatName},e.create=function(n){if(!Jd.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new e(n,Jd.get(n))},e}(),t1=function(){function e(){}return e.createFromText=function(n){var s={text:n};return{decodedText:n,result:s}},e.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},e}(),ch;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(ch||(ch={}));var Hw=function(){function e(){}return e.createFrom=function(n){return{errorMessage:n,type:ch.UNKWOWN_ERROR}},e}(),Vw=function(){function e(n){this.verbose=n}return e.prototype.log=function(n){this.verbose&&console.log(n)},e.prototype.warn=function(n){this.verbose&&console.warn(n)},e.prototype.logError=function(n,s){(this.verbose||s===!0)&&console.error(n)},e.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},e}();function Ri(e){return typeof e>"u"||e===null}var ao=function(){function e(){}return e.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},e.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),ig=function(){function e(){}return e.isMediaStreamConstraintsValid=function(n,s){if(typeof n!="object"){var l=typeof n;return s.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(l,"."),!0),!1}for(var f=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(f),w=Object.keys(n),x=0,C=w;x<C.length;x++){var v=C[x];if(d.has(v))return s.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},e}(),hh={exports:{}};(function(e,n){(function(s,l){l(n)})(ru,function(s){function l(T){return T==null}var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,t){T.__proto__=t}||function(T,t){for(var r in t)t.hasOwnProperty(r)&&(T[r]=t[r])};function d(T,t){f(T,t);function r(){this.constructor=T}T.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function w(T,t){var r=Object.setPrototypeOf;r?r(T,t):T.__proto__=t}function x(T,t){t===void 0&&(t=T.constructor);var r=Error.captureStackTrace;r&&r(T,t)}var C=function(T){d(t,T);function t(r){var o=this.constructor,a=T.call(this,r)||this;return Object.defineProperty(a,"name",{value:o.name,enumerable:!1}),w(a,o.prototype),x(a),a}return t}(Error);class v extends C{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}v.kind="Exception";class S extends v{}S.kind="ArgumentException";class I extends v{}I.kind="IllegalArgumentException";class O{constructor(t){if(this.binarizer=t,t===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,r){return this.binarizer.getBlackRow(t,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,r,o,a){const u=this.binarizer.getLuminanceSource().crop(t,r,o,a);return new O(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new O(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new O(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class z extends v{static getChecksumInstance(){return new z}}z.kind="ChecksumException";class H{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(t,r,o,a,u){for(;u--;)o[a++]=t[r++]}static currentTimeMillis(){return Date.now()}}class ee extends v{}ee.kind="IndexOutOfBoundsException";class F extends ee{constructor(t=void 0,r=void 0){super(r),this.index=t,this.message=r}}F.kind="ArrayIndexOutOfBoundsException";class D{static fill(t,r){for(let o=0,a=t.length;o<a;o++)t[o]=r}static fillWithin(t,r,o,a){D.rangeCheck(t.length,r,o);for(let u=r;u<o;u++)t[u]=a}static rangeCheck(t,r,o){if(r>o)throw new I("fromIndex("+r+") > toIndex("+o+")");if(r<0)throw new F(r);if(o>t)throw new F(o)}static asList(...t){return t}static create(t,r,o){return Array.from({length:t}).map(u=>Array.from({length:r}).fill(o))}static createInt32Array(t,r,o){return Array.from({length:t}).map(u=>Int32Array.from({length:r}).fill(o))}static equals(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(let o=0,a=t.length;o<a;o++)if(t[o]!==r[o])return!1;return!0}static hashCode(t){if(t===null)return 0;let r=1;for(const o of t)r=31*r+o;return r}static fillUint8Array(t,r){for(let o=0;o!==t.length;o++)t[o]=r}static copyOf(t,r){return t.slice(0,r)}static copyOfUint8Array(t,r){if(t.length<=r){const o=new Uint8Array(r);return o.set(t),o}return t.slice(0,r)}static copyOfRange(t,r,o){const a=o-r,u=new Int32Array(a);return j.arraycopy(t,r,u,0,a),u}static binarySearch(t,r,o){o===void 0&&(o=D.numberComparator);let a=0,u=t.length-1;for(;a<=u;){const h=u+a>>1,p=o(r,t[h]);if(p>0)a=h+1;else if(p<0)u=h-1;else return h}return-a-1}static numberComparator(t,r){return t-r}}class P{static numberOfTrailingZeros(t){let r;if(t===0)return 32;let o=31;return r=t<<16,r!==0&&(o-=16,t=r),r=t<<8,r!==0&&(o-=8,t=r),r=t<<4,r!==0&&(o-=4,t=r),r=t<<2,r!==0&&(o-=2,t=r),o-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,r){return Math.trunc(t/r)}static parseInt(t,r=void 0){return parseInt(t,r)}}P.MIN_VALUE_32_BITS=-2147483648,P.MAX_VALUE=Number.MAX_SAFE_INTEGER;class V{constructor(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=V.makeArray(t):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const r=V.makeArray(t);j.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const r=this.size;if(t>=r)return r;const o=this.bits;let a=Math.floor(t/32),u=o[a];u&=~((1<<(t&31))-1);const h=o.length;for(;u===0;){if(++a===h)return r;u=o[a]}const p=a*32+P.numberOfTrailingZeros(u);return p>r?r:p}getNextUnset(t){const r=this.size;if(t>=r)return r;const o=this.bits;let a=Math.floor(t/32),u=~o[a];u&=~((1<<(t&31))-1);const h=o.length;for(;u===0;){if(++a===h)return r;u=~o[a]}const p=a*32+P.numberOfTrailingZeros(u);return p>r?r:p}setBulk(t,r){this.bits[Math.floor(t/32)]=r}setRange(t,r){if(r<t||t<0||r>this.size)throw new I;if(r===t)return;r--;const o=Math.floor(t/32),a=Math.floor(r/32),u=this.bits;for(let h=o;h<=a;h++){const p=h>o?0:t&31,y=(2<<(h<a?31:r&31))-(1<<p);u[h]|=y}}clear(){const t=this.bits.length,r=this.bits;for(let o=0;o<t;o++)r[o]=0}isRange(t,r,o){if(r<t||t<0||r>this.size)throw new I;if(r===t)return!0;r--;const a=Math.floor(t/32),u=Math.floor(r/32),h=this.bits;for(let p=a;p<=u;p++){const m=p>a?0:t&31,E=(2<<(p<u?31:r&31))-(1<<m)&4294967295;if((h[p]&E)!==(o?E:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,r){if(r<0||r>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let o=r;o>0;o--)this.appendBit((t>>o-1&1)===1)}appendBitArray(t){const r=t.size;this.ensureCapacity(this.size+r);for(let o=0;o<r;o++)this.appendBit(t.get(o))}xor(t){if(this.size!==t.size)throw new I("Sizes don't match");const r=this.bits;for(let o=0,a=r.length;o<a;o++)r[o]^=t.bits[o]}toBytes(t,r,o,a){for(let u=0;u<a;u++){let h=0;for(let p=0;p<8;p++)this.get(t)&&(h|=1<<7-p),t++;r[o+u]=h}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),o=r+1,a=this.bits;for(let u=0;u<o;u++){let h=a[u];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,t[r-u]=h}if(this.size!==o*32){const u=o*32-this.size;let h=t[0]>>>u;for(let p=1;p<o;p++){const m=t[p];h|=m<<32-u,t[p-1]=h,h=m>>>u}t[o-1]=h}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof V))return!1;const r=t;return this.size===r.size&&D.equals(this.bits,r.bits)}hashCode(){return 31*this.size+D.hashCode(this.bits)}toString(){let t="";for(let r=0,o=this.size;r<o;r++)r&7||(t+=" "),t+=this.get(r)?"X":".";return t}clone(){return new V(this.size,this.bits.slice())}}var re;(function(T){T[T.OTHER=0]="OTHER",T[T.PURE_BARCODE=1]="PURE_BARCODE",T[T.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",T[T.TRY_HARDER=3]="TRY_HARDER",T[T.CHARACTER_SET=4]="CHARACTER_SET",T[T.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",T[T.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",T[T.ASSUME_GS1=7]="ASSUME_GS1",T[T.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",T[T.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",T[T.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(re||(re={}));var $=re;class W extends v{static getFormatInstance(){return new W}}W.kind="FormatException";var Z;(function(T){T[T.Cp437=0]="Cp437",T[T.ISO8859_1=1]="ISO8859_1",T[T.ISO8859_2=2]="ISO8859_2",T[T.ISO8859_3=3]="ISO8859_3",T[T.ISO8859_4=4]="ISO8859_4",T[T.ISO8859_5=5]="ISO8859_5",T[T.ISO8859_6=6]="ISO8859_6",T[T.ISO8859_7=7]="ISO8859_7",T[T.ISO8859_8=8]="ISO8859_8",T[T.ISO8859_9=9]="ISO8859_9",T[T.ISO8859_10=10]="ISO8859_10",T[T.ISO8859_11=11]="ISO8859_11",T[T.ISO8859_13=12]="ISO8859_13",T[T.ISO8859_14=13]="ISO8859_14",T[T.ISO8859_15=14]="ISO8859_15",T[T.ISO8859_16=15]="ISO8859_16",T[T.SJIS=16]="SJIS",T[T.Cp1250=17]="Cp1250",T[T.Cp1251=18]="Cp1251",T[T.Cp1252=19]="Cp1252",T[T.Cp1256=20]="Cp1256",T[T.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",T[T.UTF8=22]="UTF8",T[T.ASCII=23]="ASCII",T[T.Big5=24]="Big5",T[T.GB18030=25]="GB18030",T[T.EUC_KR=26]="EUC_KR"})(Z||(Z={}));class X{constructor(t,r,o,...a){this.valueIdentifier=t,this.name=o,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=a,X.VALUE_IDENTIFIER_TO_ECI.set(t,this),X.NAME_TO_ECI.set(o,this);const u=this.values;for(let h=0,p=u.length;h!==p;h++){const m=u[h];X.VALUES_TO_ECI.set(m,this)}for(const h of a)X.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new W("incorect value");const r=X.VALUES_TO_ECI.get(t);if(r===void 0)throw new W("incorect value");return r}static getCharacterSetECIByName(t){const r=X.NAME_TO_ECI.get(t);if(r===void 0)throw new W("incorect value");return r}equals(t){if(!(t instanceof X))return!1;const r=t;return this.getName()===r.getName()}}X.VALUE_IDENTIFIER_TO_ECI=new Map,X.VALUES_TO_ECI=new Map,X.NAME_TO_ECI=new Map,X.Cp437=new X(Z.Cp437,Int32Array.from([0,2]),"Cp437"),X.ISO8859_1=new X(Z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),X.ISO8859_2=new X(Z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),X.ISO8859_3=new X(Z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),X.ISO8859_4=new X(Z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),X.ISO8859_5=new X(Z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),X.ISO8859_6=new X(Z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),X.ISO8859_7=new X(Z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),X.ISO8859_8=new X(Z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),X.ISO8859_9=new X(Z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),X.ISO8859_10=new X(Z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),X.ISO8859_11=new X(Z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),X.ISO8859_13=new X(Z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),X.ISO8859_14=new X(Z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),X.ISO8859_15=new X(Z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),X.ISO8859_16=new X(Z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),X.SJIS=new X(Z.SJIS,20,"SJIS","Shift_JIS"),X.Cp1250=new X(Z.Cp1250,21,"Cp1250","windows-1250"),X.Cp1251=new X(Z.Cp1251,22,"Cp1251","windows-1251"),X.Cp1252=new X(Z.Cp1252,23,"Cp1252","windows-1252"),X.Cp1256=new X(Z.Cp1256,24,"Cp1256","windows-1256"),X.UnicodeBigUnmarked=new X(Z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),X.UTF8=new X(Z.UTF8,26,"UTF8","UTF-8"),X.ASCII=new X(Z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),X.Big5=new X(Z.Big5,28,"Big5"),X.GB18030=new X(Z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),X.EUC_KR=new X(Z.EUC_KR,30,"EUC_KR","EUC-KR");class he extends v{}he.kind="UnsupportedOperationException";class ue{static decode(t,r){const o=this.encodingName(r);return this.customDecoder?this.customDecoder(t,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(t,o):new TextDecoder(o).decode(t)}static shouldDecodeOnFallback(t){return!ue.isBrowser()&&t==="ISO-8859-1"}static encode(t,r){const o=this.encodingName(r);return this.customEncoder?this.customEncoder(t,o):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof X?t:X.getCharacterSetECIByName(t)}static decodeFallback(t,r){const o=this.encodingCharacterSet(r);if(ue.isDecodeFallbackSupported(o)){let a="";for(let u=0,h=t.length;u<h;u++){let p=t[u].toString(16);p.length<2&&(p="0"+p),a+="%"+p}return decodeURIComponent(a)}if(o.equals(X.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new he(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(X.UTF8)||t.equals(X.ISO8859_1)||t.equals(X.ASCII)}static encodeFallback(t){const o=btoa(unescape(encodeURIComponent(t))).split(""),a=[];for(let u=0;u<o.length;u++)a.push(o[u].charCodeAt(0));return new Uint8Array(a)}}class fe{static castAsNonUtf8Char(t,r=null){const o=r?r.getName():this.ISO88591;return ue.decode(new Uint8Array([t]),o)}static guessEncoding(t,r){if(r!=null&&r.get($.CHARACTER_SET)!==void 0)return r.get($.CHARACTER_SET).toString();const o=t.length;let a=!0,u=!0,h=!0,p=0,m=0,y=0,E=0,N=0,k=0,U=0,Q=0,q=0,ie=0,oe=0;const Se=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let Ie=0;Ie<o&&(a||u||h);Ie++){const Ce=t[Ie]&255;h&&(p>0?Ce&128?p--:h=!1:Ce&128&&(Ce&64?(p++,Ce&32?(p++,Ce&16?(p++,Ce&8?h=!1:E++):y++):m++):h=!1)),a&&(Ce>127&&Ce<160?a=!1:Ce>159&&(Ce<192||Ce===215||Ce===247)&&oe++),u&&(N>0?Ce<64||Ce===127||Ce>252?u=!1:N--:Ce===128||Ce===160||Ce>239?u=!1:Ce>160&&Ce<224?(k++,Q=0,U++,U>q&&(q=U)):Ce>127?(N++,U=0,Q++,Q>ie&&(ie=Q)):(U=0,Q=0))}return h&&p>0&&(h=!1),u&&N>0&&(u=!1),h&&(Se||m+y+E>0)?fe.UTF8:u&&(fe.ASSUME_SHIFT_JIS||q>=3||ie>=3)?fe.SHIFT_JIS:a&&u?q===2&&k===2||oe*10>=o?fe.SHIFT_JIS:fe.ISO88591:a?fe.ISO88591:u?fe.SHIFT_JIS:h?fe.UTF8:fe.PLATFORM_DEFAULT_ENCODING}static format(t,...r){let o=-1;function a(h,p,m,y,E,N){if(h==="%%")return"%";if(r[++o]===void 0)return;h=y?parseInt(y.substr(1)):void 0;let k=E?parseInt(E.substr(1)):void 0,U;switch(N){case"s":U=r[o];break;case"c":U=r[o][0];break;case"f":U=parseFloat(r[o]).toFixed(h);break;case"p":U=parseFloat(r[o]).toPrecision(h);break;case"e":U=parseFloat(r[o]).toExponential(h);break;case"x":U=parseInt(r[o]).toString(k||16);break;case"d":U=parseFloat(parseInt(r[o],k||10).toPrecision(h)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(k);let Q=parseInt(m),q=m&&m[0]+""=="0"?"0":" ";for(;U.length<Q;)U=p!==void 0?U+q:q+U;return U}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,a)}static getBytes(t,r){return ue.encode(t,r)}static getCharCode(t,r=0){return t.charCodeAt(r)}static getCharAt(t){return String.fromCharCode(t)}}fe.SHIFT_JIS=X.SJIS.getName(),fe.GB2312="GB2312",fe.ISO88591=X.ISO8859_1.getName(),fe.EUC_JP="EUC_JP",fe.UTF8=X.UTF8.getName(),fe.PLATFORM_DEFAULT_ENCODING=fe.UTF8,fe.ASSUME_SHIFT_JIS=!1;class J{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=fe.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,r,o){for(let a=r;r<r+o;a++)this.append(t[a]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)}substring(t,r){return this.value.substring(t,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+r.length)}}class ne{constructor(t,r,o,a){if(this.width=t,this.height=r,this.rowSize=o,this.bits=a,r==null&&(r=t),this.height=r,t<1||r<1)throw new I("Both dimensions must be greater than 0");o==null&&(o=Math.floor((t+31)/32)),this.rowSize=o,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const r=t.length,o=t[0].length,a=new ne(o,r);for(let u=0;u<r;u++){const h=t[u];for(let p=0;p<o;p++)h[p]&&a.set(p,u)}return a}static parseFromString(t,r,o){if(t===null)throw new I("stringRepresentation cannot be null");const a=new Array(t.length);let u=0,h=0,p=-1,m=0,y=0;for(;y<t.length;)if(t.charAt(y)===`
`||t.charAt(y)==="\r"){if(u>h){if(p===-1)p=u-h;else if(u-h!==p)throw new I("row lengths do not match");h=u,m++}y++}else if(t.substring(y,y+r.length)===r)y+=r.length,a[u]=!0,u++;else if(t.substring(y,y+o.length)===o)y+=o.length,a[u]=!1,u++;else throw new I("illegal character encountered: "+t.substring(y));if(u>h){if(p===-1)p=u-h;else if(u-h!==p)throw new I("row lengths do not match");m++}const E=new ne(p,m);for(let N=0;N<u;N++)a[N]&&E.set(Math.floor(N%p),Math.floor(N/p));return E}get(t,r){const o=r*this.rowSize+Math.floor(t/32);return(this.bits[o]>>>(t&31)&1)!==0}set(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]|=1<<(t&31)&4294967295}unset(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]&=~(1<<(t&31)&4294967295)}flip(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new I("input matrix dimensions do not match");const r=new V(Math.floor(this.width/32)+1),o=this.rowSize,a=this.bits;for(let u=0,h=this.height;u<h;u++){const p=u*o,m=t.getRow(u,r).getBitArray();for(let y=0;y<o;y++)a[p+y]^=m[y]}}clear(){const t=this.bits,r=t.length;for(let o=0;o<r;o++)t[o]=0}setRegion(t,r,o,a){if(r<0||t<0)throw new I("Left and top must be nonnegative");if(a<1||o<1)throw new I("Height and width must be at least 1");const u=t+o,h=r+a;if(h>this.height||u>this.width)throw new I("The region must fit inside the matrix");const p=this.rowSize,m=this.bits;for(let y=r;y<h;y++){const E=y*p;for(let N=t;N<u;N++)m[E+Math.floor(N/32)]|=1<<(N&31)&4294967295}}getRow(t,r){r==null||r.getSize()<this.width?r=new V(this.width):r.clear();const o=this.rowSize,a=this.bits,u=t*o;for(let h=0;h<o;h++)r.setBulk(h*32,a[u+h]);return r}setRow(t,r){j.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),r=this.getHeight();let o=new V(t),a=new V(t);for(let u=0,h=Math.floor((r+1)/2);u<h;u++)o=this.getRow(u,o),a=this.getRow(r-1-u,a),o.reverse(),a.reverse(),this.setRow(u,a),this.setRow(r-1-u,o)}getEnclosingRectangle(){const t=this.width,r=this.height,o=this.rowSize,a=this.bits;let u=t,h=r,p=-1,m=-1;for(let y=0;y<r;y++)for(let E=0;E<o;E++){const N=a[y*o+E];if(N!==0){if(y<h&&(h=y),y>m&&(m=y),E*32<u){let k=0;for(;!(N<<31-k&4294967295);)k++;E*32+k<u&&(u=E*32+k)}if(E*32+31>p){let k=31;for(;!(N>>>k);)k--;E*32+k>p&&(p=E*32+k)}}}return p<u||m<h?null:Int32Array.from([u,h,p-u+1,m-h+1])}getTopLeftOnBit(){const t=this.rowSize,r=this.bits;let o=0;for(;o<r.length&&r[o]===0;)o++;if(o===r.length)return null;const a=o/t;let u=o%t*32;const h=r[o];let p=0;for(;!(h<<31-p&4294967295);)p++;return u+=p,Int32Array.from([u,a])}getBottomRightOnBit(){const t=this.rowSize,r=this.bits;let o=r.length-1;for(;o>=0&&r[o]===0;)o--;if(o<0)return null;const a=Math.floor(o/t);let u=Math.floor(o%t)*32;const h=r[o];let p=31;for(;!(h>>>p);)p--;return u+=p,Int32Array.from([u,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof ne))return!1;const r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&D.equals(this.bits,r.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+D.hashCode(this.bits),t}toString(t="X ",r="  ",o=`
`){return this.buildToString(t,r,o)}buildToString(t,r,o){let a=new J;for(let u=0,h=this.height;u<h;u++){for(let p=0,m=this.width;p<m;p++)a.append(this.get(p,u)?t:r);a.append(o)}return a.toString()}clone(){return new ne(this.width,this.height,this.rowSize,this.bits.slice())}}class Y extends v{static getNotFoundInstance(){return new Y}}Y.kind="NotFoundException";class ye extends H{constructor(t){super(t),this.luminances=ye.EMPTY,this.buckets=new Int32Array(ye.LUMINANCE_BUCKETS)}getBlackRow(t,r){const o=this.getLuminanceSource(),a=o.getWidth();r==null||r.getSize()<a?r=new V(a):r.clear(),this.initArrays(a);const u=o.getRow(t,this.luminances),h=this.buckets;for(let m=0;m<a;m++)h[(u[m]&255)>>ye.LUMINANCE_SHIFT]++;const p=ye.estimateBlackPoint(h);if(a<3)for(let m=0;m<a;m++)(u[m]&255)<p&&r.set(m);else{let m=u[0]&255,y=u[1]&255;for(let E=1;E<a-1;E++){const N=u[E+1]&255;(y*4-m-N)/2<p&&r.set(E),m=y,y=N}}return r}getBlackMatrix(){const t=this.getLuminanceSource(),r=t.getWidth(),o=t.getHeight(),a=new ne(r,o);this.initArrays(r);const u=this.buckets;for(let m=1;m<5;m++){const y=Math.floor(o*m/5),E=t.getRow(y,this.luminances),N=Math.floor(r*4/5);for(let k=Math.floor(r/5);k<N;k++){const U=E[k]&255;u[U>>ye.LUMINANCE_SHIFT]++}}const h=ye.estimateBlackPoint(u),p=t.getMatrix();for(let m=0;m<o;m++){const y=m*r;for(let E=0;E<r;E++)(p[y+E]&255)<h&&a.set(E,m)}return a}createBinarizer(t){return new ye(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const r=this.buckets;for(let o=0;o<ye.LUMINANCE_BUCKETS;o++)r[o]=0}static estimateBlackPoint(t){const r=t.length;let o=0,a=0,u=0;for(let E=0;E<r;E++)t[E]>u&&(a=E,u=t[E]),t[E]>o&&(o=t[E]);let h=0,p=0;for(let E=0;E<r;E++){const N=E-a,k=t[E]*N*N;k>p&&(h=E,p=k)}if(a>h){const E=a;a=h,h=E}if(h-a<=r/16)throw new Y;let m=h-1,y=-1;for(let E=h-1;E>a;E--){const N=E-a,k=N*N*(h-E)*(o-t[E]);k>y&&(m=E,y=k)}return m<<ye.LUMINANCE_SHIFT}}ye.LUMINANCE_BITS=5,ye.LUMINANCE_SHIFT=8-ye.LUMINANCE_BITS,ye.LUMINANCE_BUCKETS=1<<ye.LUMINANCE_BITS,ye.EMPTY=Uint8ClampedArray.from([0]);class de extends ye{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),r=t.getWidth(),o=t.getHeight();if(r>=de.MINIMUM_DIMENSION&&o>=de.MINIMUM_DIMENSION){const a=t.getMatrix();let u=r>>de.BLOCK_SIZE_POWER;r&de.BLOCK_SIZE_MASK&&u++;let h=o>>de.BLOCK_SIZE_POWER;o&de.BLOCK_SIZE_MASK&&h++;const p=de.calculateBlackPoints(a,u,h,r,o),m=new ne(r,o);de.calculateThresholdForBlock(a,u,h,r,o,p,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new de(t)}static calculateThresholdForBlock(t,r,o,a,u,h,p){const m=u-de.BLOCK_SIZE,y=a-de.BLOCK_SIZE;for(let E=0;E<o;E++){let N=E<<de.BLOCK_SIZE_POWER;N>m&&(N=m);const k=de.cap(E,2,o-3);for(let U=0;U<r;U++){let Q=U<<de.BLOCK_SIZE_POWER;Q>y&&(Q=y);const q=de.cap(U,2,r-3);let ie=0;for(let Se=-2;Se<=2;Se++){const Ie=h[k+Se];ie+=Ie[q-2]+Ie[q-1]+Ie[q]+Ie[q+1]+Ie[q+2]}const oe=ie/25;de.thresholdBlock(t,Q,N,oe,a,p)}}}static cap(t,r,o){return t<r?r:t>o?o:t}static thresholdBlock(t,r,o,a,u,h){for(let p=0,m=o*u+r;p<de.BLOCK_SIZE;p++,m+=u)for(let y=0;y<de.BLOCK_SIZE;y++)(t[m+y]&255)<=a&&h.set(r+y,o+p)}static calculateBlackPoints(t,r,o,a,u){const h=u-de.BLOCK_SIZE,p=a-de.BLOCK_SIZE,m=new Array(o);for(let y=0;y<o;y++){m[y]=new Int32Array(r);let E=y<<de.BLOCK_SIZE_POWER;E>h&&(E=h);for(let N=0;N<r;N++){let k=N<<de.BLOCK_SIZE_POWER;k>p&&(k=p);let U=0,Q=255,q=0;for(let oe=0,Se=E*a+k;oe<de.BLOCK_SIZE;oe++,Se+=a){for(let Ie=0;Ie<de.BLOCK_SIZE;Ie++){const Ce=t[Se+Ie]&255;U+=Ce,Ce<Q&&(Q=Ce),Ce>q&&(q=Ce)}if(q-Q>de.MIN_DYNAMIC_RANGE)for(oe++,Se+=a;oe<de.BLOCK_SIZE;oe++,Se+=a)for(let Ie=0;Ie<de.BLOCK_SIZE;Ie++)U+=t[Se+Ie]&255}let ie=U>>de.BLOCK_SIZE_POWER*2;if(q-Q<=de.MIN_DYNAMIC_RANGE&&(ie=Q/2,y>0&&N>0)){const oe=(m[y-1][N]+2*m[y][N-1]+m[y-1][N-1])/4;Q<oe&&(ie=oe)}m[y][N]=ie}}return m}}de.BLOCK_SIZE_POWER=3,de.BLOCK_SIZE=1<<de.BLOCK_SIZE_POWER,de.BLOCK_SIZE_MASK=de.BLOCK_SIZE-1,de.MINIMUM_DIMENSION=de.BLOCK_SIZE*5,de.MIN_DYNAMIC_RANGE=24;class te{constructor(t,r){this.width=t,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,r,o,a){throw new he("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new he("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new he("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let r=new J;for(let o=0;o<this.height;o++){const a=this.getRow(o,t);for(let u=0;u<this.width;u++){const h=a[u]&255;let p;h<64?p="#":h<128?p="+":h<192?p=".":p=" ",r.append(p)}r.append(`
`)}return r.toString()}}class pe extends te{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,r){const o=this.delegate.getRow(t,r),a=this.getWidth();for(let u=0;u<a;u++)o[u]=255-(o[u]&255);return o}getMatrix(){const t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(r);for(let a=0;a<r;a++)o[a]=255-(t[a]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(t,r,o,a){return new pe(this.delegate.crop(t,r,o,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new pe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new pe(this.delegate.rotateCounterClockwise45())}}class ce extends te{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=ce.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return ce.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,r,o){const a=new Uint8ClampedArray(r*o);for(let u=0,h=0,p=t.length;u<p;u+=4,h++){let m;if(t[u+3]===0)m=255;else{const E=t[u],N=t[u+1],k=t[u+2];m=306*E+601*N+117*k+512>>10}a[h]=m}return a}getRow(t,r){if(t<0||t>=this.getHeight())throw new I("Requested row is outside the image: "+t);const o=this.getWidth(),a=t*o;return r===null?r=this.buffer.slice(a,a+o):(r.length<o&&(r=new Uint8ClampedArray(o)),r.set(this.buffer.slice(a,a+o))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,r,o,a){return super.crop(t,r,o,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const r=this.getTempCanvasElement(),o=r.getContext("2d"),a=t*ce.DEGREE_TO_RADIANS,u=this.canvas.width,h=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(a))*u+Math.abs(Math.sin(a))*h),m=Math.ceil(Math.abs(Math.sin(a))*u+Math.abs(Math.cos(a))*h);return r.width=p,r.height=m,o.translate(p/2,m/2),o.rotate(a),o.drawImage(this.canvas,u/-2,h/-2),this.buffer=ce.makeBufferFromCanvasImageData(r),this}invert(){return new pe(this)}}ce.DEGREE_TO_RADIANS=Math.PI/180;class Ee{constructor(t,r,o){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ne=(globalThis||window||self||window||void 0)&&(globalThis||window||self||window||void 0).__awaiter||function(T,t,r,o){function a(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function p(E){try{y(o.next(E))}catch(N){h(N)}}function m(E){try{y(o.throw(E))}catch(N){h(N)}}function y(E){E.done?u(E.value):a(E.value).then(p,m)}y((o=o.apply(T,t||[])).next())})};class Ze{constructor(t,r=500,o){this.reader=t,this.timeBetweenScansMillis=r,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return Ne(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const o of t){const a=o.kind==="video"?"videoinput":o.kind;if(a!=="videoinput")continue;const u=o.deviceId||o.id,h=o.label||`Video device ${r.length+1}`,p=o.groupId,m={deviceId:u,label:h,kind:a,groupId:p};r.push(m)}return r})}getVideoInputDevices(){return Ne(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new Ee(r.deviceId,r.label))})}findDeviceById(t){return Ne(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(o=>o.deviceId===t):null})}decodeFromInputVideoDevice(t,r){return Ne(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,r)})}decodeOnceFromVideoDevice(t,r){return Ne(this,void 0,void 0,function*(){this.reset();let o;t?o={deviceId:{exact:t}}:o={facingMode:"environment"};const a={video:o};return yield this.decodeOnceFromConstraints(a,r)})}decodeOnceFromConstraints(t,r){return Ne(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(o,r)})}decodeOnceFromStream(t,r){return Ne(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(t,r);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(t,r,o){return Ne(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,r,o)})}decodeFromVideoDevice(t,r,o){return Ne(this,void 0,void 0,function*(){let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const u={video:a};return yield this.decodeFromConstraints(u,r,o)})}decodeFromConstraints(t,r,o){return Ne(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(a,r,o)})}decodeFromStream(t,r,o){return Ne(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,r);return yield this.decodeContinuously(a,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,r){return Ne(this,void 0,void 0,function*(){const o=this.prepareVideoElement(r);return this.addVideoSource(o,t),this.videoElement=o,this.stream=t,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(t){return new Promise((r,o)=>this.playVideoOnLoad(t,()=>r()))}playVideoOnLoad(t,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return Ne(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,r){const o=document.getElementById(t);if(!o)throw new S(`element with id '${t}' not found`);if(o.nodeName.toLowerCase()!==r.toLowerCase())throw new S(`element with id '${t}' must be an ${r} element`);return o}decodeFromImage(t,r){if(!t&&!r)throw new S("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)}decodeFromVideo(t,r){if(!t&&!r)throw new S("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,r,o){if(t===void 0&&r===void 0)throw new S("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,o):this.decodeFromVideoElementContinuously(t,o)}decodeFromImageElement(t){if(!t)throw new S("An image element must be provided.");this.reset();const r=this.prepareImageElement(t);this.imageElement=r;let o;return this.isImageLoaded(r)?o=this.decodeOnce(r,!1,!0):o=this._decodeOnLoadImage(r),o}decodeFromVideoElement(t){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(t,r){const o=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(o,r)}_decodeFromVideoElementSetup(t){if(!t)throw new S("A video element must be provided.");this.reset();const r=this.prepareVideoElement(t);return this.videoElement=r,r}decodeFromImageUrl(t){if(!t)throw new S("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const o=this._decodeOnLoadImage(r);return r.src=t,o}decodeFromVideoUrl(t){if(!t)throw new S("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),o=this.decodeFromVideoElement(r);return r.src=t,o}decodeFromVideoUrlContinuously(t,r){if(!t)throw new S("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(o,r);return o.src=t,a}_decodeOnLoadImage(t){return new Promise((r,o)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(r,o),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return Ne(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,r){return Ne(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,r)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r}prepareVideoElement(t){let r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(t,r=!0,o=!0){this._stopAsyncDecode=!1;const a=(u,h)=>{if(this._stopAsyncDecode){h(new Y("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(t);u(p)}catch(p){const m=r&&p instanceof Y,E=(p instanceof z||p instanceof W)&&o;if(m||E)return setTimeout(a,this._timeBetweenDecodingAttempts,u,h);h(p)}};return new Promise((u,h)=>a(u,h))}decodeContinuously(t,r){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(t);r(a,null),setTimeout(o,this.timeBetweenScansMillis)}catch(a){r(null,a);const u=a instanceof z||a instanceof W,h=a instanceof Y;(u||h)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(t){const r=this.createBinaryBitmap(t);return this.decodeBitmap(r)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,r,o){r||(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(t,r,o=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const r=this.getCaptureCanvas(t),o=new ce(r),a=new de(o);return new O(a)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let o,a;return typeof t<"u"&&(t instanceof HTMLVideoElement?(o=t.videoWidth,a=t.videoHeight):t instanceof HTMLImageElement&&(o=t.naturalWidth||t.width,a=t.naturalHeight||t.height)),r.style.width=o+"px",r.style.height=a+"px",r.width=o,r.height=a,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Ae{constructor(t,r,o=r==null?0:8*r.length,a,u,h=j.currentTimeMillis()){this.text=t,this.rawBytes=r,this.numBits=o,this.resultPoints=a,this.format=u,this.timestamp=h,this.text=t,this.rawBytes=r,o==null?this.numBits=r==null?0:8*r.length:this.numBits=o,this.resultPoints=a,this.format=u,this.resultMetadata=null,h==null?this.timestamp=j.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){const o=new Array(r.length+t.length);j.arraycopy(r,0,o,0,r.length),j.arraycopy(t,0,o,r.length,t.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Me;(function(T){T[T.AZTEC=0]="AZTEC",T[T.CODABAR=1]="CODABAR",T[T.CODE_39=2]="CODE_39",T[T.CODE_93=3]="CODE_93",T[T.CODE_128=4]="CODE_128",T[T.DATA_MATRIX=5]="DATA_MATRIX",T[T.EAN_8=6]="EAN_8",T[T.EAN_13=7]="EAN_13",T[T.ITF=8]="ITF",T[T.MAXICODE=9]="MAXICODE",T[T.PDF_417=10]="PDF_417",T[T.QR_CODE=11]="QR_CODE",T[T.RSS_14=12]="RSS_14",T[T.RSS_EXPANDED=13]="RSS_EXPANDED",T[T.UPC_A=14]="UPC_A",T[T.UPC_E=15]="UPC_E",T[T.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Me||(Me={}));var ge=Me,vt;(function(T){T[T.OTHER=0]="OTHER",T[T.ORIENTATION=1]="ORIENTATION",T[T.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",T[T.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",T[T.ISSUE_NUMBER=4]="ISSUE_NUMBER",T[T.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",T[T.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",T[T.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",T[T.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",T[T.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",T[T.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(vt||(vt={}));var He=vt;class Pn{constructor(t,r,o,a,u=-1,h=-1){this.rawBytes=t,this.text=r,this.byteSegments=o,this.ecLevel=a,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=h,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ln{exp(t){return this.expTable[t]}log(t){if(t===0)throw new I;return this.logTable[t]}static addOrSubtract(t,r){return t^r}}class kt{constructor(t,r){if(r.length===0)throw new I;this.field=t;const o=r.length;if(o>1&&r[0]===0){let a=1;for(;a<o&&r[a]===0;)a++;a===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-a),j.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const r=this.coefficients;let o;if(t===1){o=0;for(let h=0,p=r.length;h!==p;h++){const m=r[h];o=Ln.addOrSubtract(o,m)}return o}o=r[0];const a=r.length,u=this.field;for(let h=1;h<a;h++)o=Ln.addOrSubtract(u.multiply(t,o),r[h]);return o}addOrSubtract(t){if(!this.field.equals(t.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,o=t.coefficients;if(r.length>o.length){const h=r;r=o,o=h}let a=new Int32Array(o.length);const u=o.length-r.length;j.arraycopy(o,0,a,0,u);for(let h=u;h<o.length;h++)a[h]=Ln.addOrSubtract(r[h-u],o[h]);return new kt(this.field,a)}multiply(t){if(!this.field.equals(t.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const r=this.coefficients,o=r.length,a=t.coefficients,u=a.length,h=new Int32Array(o+u-1),p=this.field;for(let m=0;m<o;m++){const y=r[m];for(let E=0;E<u;E++)h[m+E]=Ln.addOrSubtract(h[m+E],p.multiply(y,a[E]))}return new kt(p,h)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const r=this.coefficients.length,o=this.field,a=new Int32Array(r),u=this.coefficients;for(let h=0;h<r;h++)a[h]=o.multiply(u[h],t);return new kt(o,a)}multiplyByMonomial(t,r){if(t<0)throw new I;if(r===0)return this.field.getZero();const o=this.coefficients,a=o.length,u=new Int32Array(a+t),h=this.field;for(let p=0;p<a;p++)u[p]=h.multiply(o[p],r);return new kt(h,u)}divide(t){if(!this.field.equals(t.field))throw new I("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new I("Divide by 0");const r=this.field;let o=r.getZero(),a=this;const u=t.getCoefficient(t.getDegree()),h=r.inverse(u);for(;a.getDegree()>=t.getDegree()&&!a.isZero();){const p=a.getDegree()-t.getDegree(),m=r.multiply(a.getCoefficient(a.getDegree()),h),y=t.multiplyByMonomial(p,m),E=r.buildMonomial(p,m);o=o.addOrSubtract(E),a=a.addOrSubtract(y)}return[o,a]}toString(){let t="";for(let r=this.getDegree();r>=0;r--){let o=this.getCoefficient(r);if(o!==0){if(o<0?(t+=" - ",o=-o):t.length>0&&(t+=" + "),r===0||o!==1){const a=this.field.log(o);a===0?t+="1":a===1?t+="a":(t+="a^",t+=a)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t}}class dt extends v{}dt.kind="ArithmeticException";class Xe extends Ln{constructor(t,r,o){super(),this.primitive=t,this.size=r,this.generatorBase=o;const a=new Int32Array(r);let u=1;for(let p=0;p<r;p++)a[p]=u,u*=2,u>=r&&(u^=t,u&=r-1);this.expTable=a;const h=new Int32Array(r);for(let p=0;p<r-1;p++)h[a[p]]=p;this.logTable=h,this.zero=new kt(this,Int32Array.from([0])),this.one=new kt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new I;if(r===0)return this.zero;const o=new Int32Array(t+1);return o[0]=r,new kt(this,o)}inverse(t){if(t===0)throw new dt;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+P.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}Xe.AZTEC_DATA_12=new Xe(4201,4096,1),Xe.AZTEC_DATA_10=new Xe(1033,1024,1),Xe.AZTEC_DATA_6=new Xe(67,64,1),Xe.AZTEC_PARAM=new Xe(19,16,1),Xe.QR_CODE_FIELD_256=new Xe(285,256,0),Xe.DATA_MATRIX_FIELD_256=new Xe(301,256,1),Xe.AZTEC_DATA_8=Xe.DATA_MATRIX_FIELD_256,Xe.MAXICODE_FIELD_64=Xe.AZTEC_DATA_6;class Zn extends v{}Zn.kind="ReedSolomonException";class Wt extends v{}Wt.kind="IllegalStateException";class Dn{constructor(t){this.field=t}decode(t,r){const o=this.field,a=new kt(o,t),u=new Int32Array(r);let h=!0;for(let U=0;U<r;U++){const Q=a.evaluateAt(o.exp(U+o.getGeneratorBase()));u[u.length-1-U]=Q,Q!==0&&(h=!1)}if(h)return;const p=new kt(o,u),m=this.runEuclideanAlgorithm(o.buildMonomial(r,1),p,r),y=m[0],E=m[1],N=this.findErrorLocations(y),k=this.findErrorMagnitudes(E,N);for(let U=0;U<N.length;U++){const Q=t.length-1-o.log(N[U]);if(Q<0)throw new Zn("Bad error location");t[Q]=Xe.addOrSubtract(t[Q],k[U])}}runEuclideanAlgorithm(t,r,o){if(t.getDegree()<r.getDegree()){const U=t;t=r,r=U}const a=this.field;let u=t,h=r,p=a.getZero(),m=a.getOne();for(;h.getDegree()>=(o/2|0);){let U=u,Q=p;if(u=h,p=m,u.isZero())throw new Zn("r_{i-1} was zero");h=U;let q=a.getZero();const ie=u.getCoefficient(u.getDegree()),oe=a.inverse(ie);for(;h.getDegree()>=u.getDegree()&&!h.isZero();){const Se=h.getDegree()-u.getDegree(),Ie=a.multiply(h.getCoefficient(h.getDegree()),oe);q=q.addOrSubtract(a.buildMonomial(Se,Ie)),h=h.addOrSubtract(u.multiplyByMonomial(Se,Ie))}if(m=q.multiply(p).addOrSubtract(Q),h.getDegree()>=u.getDegree())throw new Wt("Division algorithm failed to reduce polynomial?")}const y=m.getCoefficient(0);if(y===0)throw new Zn("sigmaTilde(0) was zero");const E=a.inverse(y),N=m.multiplyScalar(E),k=h.multiplyScalar(E);return[N,k]}findErrorLocations(t){const r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);const o=new Int32Array(r);let a=0;const u=this.field;for(let h=1;h<u.getSize()&&a<r;h++)t.evaluateAt(h)===0&&(o[a]=u.inverse(h),a++);if(a!==r)throw new Zn("Error locator degree does not match number of roots");return o}findErrorMagnitudes(t,r){const o=r.length,a=new Int32Array(o),u=this.field;for(let h=0;h<o;h++){const p=u.inverse(r[h]);let m=1;for(let y=0;y<o;y++)if(h!==y){const E=u.multiply(r[y],p),N=E&1?E&-2:E|1;m=u.multiply(m,N)}a[h]=u.multiply(t.evaluateAt(p),u.inverse(m)),u.getGeneratorBase()!==0&&(a[h]=u.multiply(a[h],p))}return a}}var De;(function(T){T[T.UPPER=0]="UPPER",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.DIGIT=3]="DIGIT",T[T.PUNCT=4]="PUNCT",T[T.BINARY=5]="BINARY"})(De||(De={}));class Ue{decode(t){this.ddata=t;let r=t.getBits(),o=this.extractBits(r),a=this.correctBits(o),u=Ue.convertBoolArrayToByteArray(a),h=Ue.getEncodedData(a),p=new Pn(u,h,null,null);return p.setNumBits(a.length),p}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let r=t.length,o=De.UPPER,a=De.UPPER,u="",h=0;for(;h<r;)if(a===De.BINARY){if(r-h<5)break;let p=Ue.readCode(t,h,5);if(h+=5,p===0){if(r-h<11)break;p=Ue.readCode(t,h,11)+31,h+=11}for(let m=0;m<p;m++){if(r-h<8){h=r;break}const y=Ue.readCode(t,h,8);u+=fe.castAsNonUtf8Char(y),h+=8}a=o}else{let p=a===De.DIGIT?4:5;if(r-h<p)break;let m=Ue.readCode(t,h,p);h+=p;let y=Ue.getCharacter(a,m);y.startsWith("CTRL_")?(o=a,a=Ue.getTable(y.charAt(5)),y.charAt(6)==="L"&&(o=a)):(u+=y,a=o)}return u}static getTable(t){switch(t){case"L":return De.LOWER;case"P":return De.PUNCT;case"M":return De.MIXED;case"D":return De.DIGIT;case"B":return De.BINARY;case"U":default:return De.UPPER}}static getCharacter(t,r){switch(t){case De.UPPER:return Ue.UPPER_TABLE[r];case De.LOWER:return Ue.LOWER_TABLE[r];case De.MIXED:return Ue.MIXED_TABLE[r];case De.PUNCT:return Ue.PUNCT_TABLE[r];case De.DIGIT:return Ue.DIGIT_TABLE[r];default:throw new Wt("Bad table")}}correctBits(t){let r,o;this.ddata.getNbLayers()<=2?(o=6,r=Xe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,r=Xe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,r=Xe.AZTEC_DATA_10):(o=12,r=Xe.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),u=t.length/o;if(u<a)throw new W;let h=t.length%o,p=new Int32Array(u);for(let k=0;k<u;k++,h+=o)p[k]=Ue.readCode(t,h,o);try{new Dn(r).decode(p,u-a)}catch(k){throw new W(k)}let m=(1<<o)-1,y=0;for(let k=0;k<a;k++){let U=p[k];if(U===0||U===m)throw new W;(U===1||U===m-1)&&y++}let E=new Array(a*o-y),N=0;for(let k=0;k<a;k++){let U=p[k];if(U===1||U===m-1)E.fill(U>1,N,N+o-1),N+=o-1;else for(let Q=o-1;Q>=0;--Q)E[N++]=(U&1<<Q)!==0}return E}extractBits(t){let r=this.ddata.isCompact(),o=this.ddata.getNbLayers(),a=(r?11:14)+o*4,u=new Int32Array(a),h=new Array(this.totalBitsInLayer(o,r));if(r)for(let p=0;p<u.length;p++)u[p]=p;else{let p=a+1+2*P.truncDivision(P.truncDivision(a,2)-1,15),m=a/2,y=P.truncDivision(p,2);for(let E=0;E<m;E++){let N=E+P.truncDivision(E,15);u[m-E-1]=y-N-1,u[m+E]=y+N+1}}for(let p=0,m=0;p<o;p++){let y=(o-p)*4+(r?9:12),E=p*2,N=a-1-E;for(let k=0;k<y;k++){let U=k*2;for(let Q=0;Q<2;Q++)h[m+U+Q]=t.get(u[E+Q],u[E+k]),h[m+2*y+U+Q]=t.get(u[E+k],u[N-Q]),h[m+4*y+U+Q]=t.get(u[N-Q],u[N-k]),h[m+6*y+U+Q]=t.get(u[N-k],u[E+Q])}m+=y*8}return h}static readCode(t,r,o){let a=0;for(let u=r;u<r+o;u++)a<<=1,t[u]&&(a|=1);return a}static readByte(t,r){let o=t.length-r;return o>=8?Ue.readCode(t,r,8):Ue.readCode(t,r,o)<<8-o}static convertBoolArrayToByteArray(t){let r=new Uint8Array((t.length+7)/8);for(let o=0;o<r.length;o++)r[o]=Ue.readByte(t,8*o);return r}totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}Ue.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ue.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ue.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ue.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ue.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ge{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,r,o,a){const u=t-o,h=r-a;return Math.sqrt(u*u+h*h)}static sum(t){let r=0;for(let o=0,a=t.length;o!==a;o++){const u=t[o];r+=u}return r}}class tn{static floatToIntBits(t){return t}}tn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Te{constructor(t,r){this.x=t,this.y=r}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Te){const r=t;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*tn.floatToIntBits(this.x)+tn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const r=this.distance(t[0],t[1]),o=this.distance(t[1],t[2]),a=this.distance(t[0],t[2]);let u,h,p;if(o>=r&&o>=a?(h=t[0],u=t[1],p=t[2]):a>=o&&a>=r?(h=t[1],u=t[0],p=t[2]):(h=t[2],u=t[0],p=t[1]),this.crossProductZ(u,h,p)<0){const m=u;u=p,p=m}t[0]=u,t[1]=h,t[2]=p}static distance(t,r){return Ge.distance(t.x,t.y,r.x,r.y)}static crossProductZ(t,r,o){const a=r.x,u=r.y;return(o.x-a)*(t.y-u)-(o.y-u)*(t.x-a)}}class qt{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class li extends qt{constructor(t,r,o,a,u){super(t,r),this.compact=o,this.nbDatablocks=a,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Zt{constructor(t,r,o,a){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=Zt.INIT_SIZE),o==null&&(o=t.getWidth()/2|0),a==null&&(a=t.getHeight()/2|0);const u=r/2|0;if(this.leftInit=o-u,this.rightInit=o+u,this.upInit=a-u,this.downInit=a+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Y}detect(){let t=this.leftInit,r=this.rightInit,o=this.upInit,a=this.downInit,u=!1,h=!0,p=!1,m=!1,y=!1,E=!1,N=!1;const k=this.width,U=this.height;for(;h;){h=!1;let Q=!0;for(;(Q||!m)&&r<k;)Q=this.containsBlackPoint(o,a,r,!1),Q?(r++,h=!0,m=!0):m||r++;if(r>=k){u=!0;break}let q=!0;for(;(q||!y)&&a<U;)q=this.containsBlackPoint(t,r,a,!0),q?(a++,h=!0,y=!0):y||a++;if(a>=U){u=!0;break}let ie=!0;for(;(ie||!E)&&t>=0;)ie=this.containsBlackPoint(o,a,t,!1),ie?(t--,h=!0,E=!0):E||t--;if(t<0){u=!0;break}let oe=!0;for(;(oe||!N)&&o>=0;)oe=this.containsBlackPoint(t,r,o,!0),oe?(o--,h=!0,N=!0):N||o--;if(o<0){u=!0;break}h&&(p=!0)}if(!u&&p){const Q=r-t;let q=null;for(let Ie=1;q===null&&Ie<Q;Ie++)q=this.getBlackPointOnSegment(t,a-Ie,t+Ie,a);if(q==null)throw new Y;let ie=null;for(let Ie=1;ie===null&&Ie<Q;Ie++)ie=this.getBlackPointOnSegment(t,o+Ie,t+Ie,o);if(ie==null)throw new Y;let oe=null;for(let Ie=1;oe===null&&Ie<Q;Ie++)oe=this.getBlackPointOnSegment(r,o+Ie,r-Ie,o);if(oe==null)throw new Y;let Se=null;for(let Ie=1;Se===null&&Ie<Q;Ie++)Se=this.getBlackPointOnSegment(r,a-Ie,r-Ie,a);if(Se==null)throw new Y;return this.centerEdges(Se,q,oe,ie)}else throw new Y}getBlackPointOnSegment(t,r,o,a){const u=Ge.round(Ge.distance(t,r,o,a)),h=(o-t)/u,p=(a-r)/u,m=this.image;for(let y=0;y<u;y++){const E=Ge.round(t+y*h),N=Ge.round(r+y*p);if(m.get(E,N))return new Te(E,N)}return null}centerEdges(t,r,o,a){const u=t.getX(),h=t.getY(),p=r.getX(),m=r.getY(),y=o.getX(),E=o.getY(),N=a.getX(),k=a.getY(),U=Zt.CORR;return u<this.width/2?[new Te(N-U,k+U),new Te(p+U,m+U),new Te(y-U,E-U),new Te(u+U,h-U)]:[new Te(N+U,k+U),new Te(p+U,m-U),new Te(y-U,E+U),new Te(u-U,h-U)]}containsBlackPoint(t,r,o,a){const u=this.image;if(a){for(let h=t;h<=r;h++)if(u.get(h,o))return!0}else for(let h=t;h<=r;h++)if(u.get(o,h))return!0;return!1}}Zt.INIT_SIZE=10,Zt.CORR=1;class or{static checkAndNudgePoints(t,r){const o=t.getWidth(),a=t.getHeight();let u=!0;for(let h=0;h<r.length&&u;h+=2){const p=Math.floor(r[h]),m=Math.floor(r[h+1]);if(p<-1||p>o||m<-1||m>a)throw new Y;u=!1,p===-1?(r[h]=0,u=!0):p===o&&(r[h]=o-1,u=!0),m===-1?(r[h+1]=0,u=!0):m===a&&(r[h+1]=a-1,u=!0)}u=!0;for(let h=r.length-2;h>=0&&u;h-=2){const p=Math.floor(r[h]),m=Math.floor(r[h+1]);if(p<-1||p>o||m<-1||m>a)throw new Y;u=!1,p===-1?(r[h]=0,u=!0):p===o&&(r[h]=o-1,u=!0),m===-1?(r[h+1]=0,u=!0):m===a&&(r[h+1]=a-1,u=!0)}}}class bt{constructor(t,r,o,a,u,h,p,m,y){this.a11=t,this.a21=r,this.a31=o,this.a12=a,this.a22=u,this.a32=h,this.a13=p,this.a23=m,this.a33=y}static quadrilateralToQuadrilateral(t,r,o,a,u,h,p,m,y,E,N,k,U,Q,q,ie){const oe=bt.quadrilateralToSquare(t,r,o,a,u,h,p,m);return bt.squareToQuadrilateral(y,E,N,k,U,Q,q,ie).times(oe)}transformPoints(t){const r=t.length,o=this.a11,a=this.a12,u=this.a13,h=this.a21,p=this.a22,m=this.a23,y=this.a31,E=this.a32,N=this.a33;for(let k=0;k<r;k+=2){const U=t[k],Q=t[k+1],q=u*U+m*Q+N;t[k]=(o*U+h*Q+y)/q,t[k+1]=(a*U+p*Q+E)/q}}transformPointsWithValues(t,r){const o=this.a11,a=this.a12,u=this.a13,h=this.a21,p=this.a22,m=this.a23,y=this.a31,E=this.a32,N=this.a33,k=t.length;for(let U=0;U<k;U++){const Q=t[U],q=r[U],ie=u*Q+m*q+N;t[U]=(o*Q+h*q+y)/ie,r[U]=(a*Q+p*q+E)/ie}}static squareToQuadrilateral(t,r,o,a,u,h,p,m){const y=t-o+u-p,E=r-a+h-m;if(y===0&&E===0)return new bt(o-t,u-o,t,a-r,h-a,r,0,0,1);{const N=o-u,k=p-u,U=a-h,Q=m-h,q=N*Q-k*U,ie=(y*Q-k*E)/q,oe=(N*E-y*U)/q;return new bt(o-t+ie*o,p-t+oe*p,t,a-r+ie*a,m-r+oe*m,r,ie,oe,1)}}static quadrilateralToSquare(t,r,o,a,u,h,p,m){return bt.squareToQuadrilateral(t,r,o,a,u,h,p,m).buildAdjoint()}buildAdjoint(){return new bt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new bt(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class ui extends or{sampleGrid(t,r,o,a,u,h,p,m,y,E,N,k,U,Q,q,ie,oe,Se,Ie){const Ce=bt.quadrilateralToQuadrilateral(a,u,h,p,m,y,E,N,k,U,Q,q,ie,oe,Se,Ie);return this.sampleGridWithTransform(t,r,o,Ce)}sampleGridWithTransform(t,r,o,a){if(r<=0||o<=0)throw new Y;const u=new ne(r,o),h=new Float32Array(2*r);for(let p=0;p<o;p++){const m=h.length,y=p+.5;for(let E=0;E<m;E+=2)h[E]=E/2+.5,h[E+1]=y;a.transformPoints(h),or.checkAndNudgePoints(t,h);try{for(let E=0;E<m;E+=2)t.get(Math.floor(h[E]),Math.floor(h[E+1]))&&u.set(E/2,p)}catch{throw new Y}}return u}}class Gn{static setGridSampler(t){Gn.gridSampler=t}static getInstance(){return Gn.gridSampler}}Gn.gridSampler=new ui;class nn{constructor(t,r){this.x=t,this.y=r}toResultPoint(){return new Te(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class An{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let r=this.getMatrixCenter(),o=this.getBullsEyeCorners(r);if(t){let h=o[0];o[0]=o[2],o[2]=h}this.extractParameters(o);let a=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),u=this.getMatrixCornerPoints(o);return new li(a,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new Y;let r=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(o,r);let a=0;for(let h=0;h<4;h++){let p=o[(this.shift+h)%4];this.compact?(a<<=7,a+=p>>1&127):(a<<=10,a+=(p>>2&992)+(p>>1&31))}let u=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(t,r){let o=0;t.forEach((a,u,h)=>{let p=(a>>r-2<<1)+(a&1);o=(o<<3)+p}),o=((o&1)<<11)+(o>>1);for(let a=0;a<4;a++)if(P.bitCount(o^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new Y}getCorrectedParameterData(t,r){let o,a;r?(o=7,a=2):(o=10,a=4);let u=o-a,h=new Int32Array(o);for(let m=o-1;m>=0;--m)h[m]=t&15,t>>=4;try{new Dn(Xe.AZTEC_PARAM).decode(h,u)}catch{throw new Y}let p=0;for(let m=0;m<a;m++)p=(p<<4)+h[m];return p}getBullsEyeCorners(t){let r=t,o=t,a=t,u=t,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let N=this.getFirstDifferent(r,h,1,-1),k=this.getFirstDifferent(o,h,1,1),U=this.getFirstDifferent(a,h,-1,1),Q=this.getFirstDifferent(u,h,-1,-1);if(this.nbCenterLayers>2){let q=this.distancePoint(Q,N)*this.nbCenterLayers/(this.distancePoint(u,r)*(this.nbCenterLayers+2));if(q<.75||q>1.25||!this.isWhiteOrBlackRectangle(N,k,U,Q))break}r=N,o=k,a=U,u=Q,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Y;this.compact=this.nbCenterLayers===5;let p=new Te(r.getX()+.5,r.getY()-.5),m=new Te(o.getX()+.5,o.getY()+.5),y=new Te(a.getX()-.5,a.getY()+.5),E=new Te(u.getX()-.5,u.getY()-.5);return this.expandSquare([p,m,y,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,r,o,a;try{let p=new Zt(this.image).detect();t=p[0],r=p[1],o=p[2],a=p[3]}catch{let m=this.image.getWidth()/2,y=this.image.getHeight()/2;t=this.getFirstDifferent(new nn(m+7,y-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new nn(m+7,y+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new nn(m-7,y+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new nn(m-7,y-7),!1,-1,-1).toResultPoint()}let u=Ge.round((t.getX()+a.getX()+r.getX()+o.getX())/4),h=Ge.round((t.getY()+a.getY()+r.getY()+o.getY())/4);try{let p=new Zt(this.image,15,u,h).detect();t=p[0],r=p[1],o=p[2],a=p[3]}catch{t=this.getFirstDifferent(new nn(u+7,h-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new nn(u+7,h+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new nn(u-7,h+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new nn(u-7,h-7),!1,-1,-1).toResultPoint()}return u=Ge.round((t.getX()+a.getX()+r.getX()+o.getX())/4),h=Ge.round((t.getY()+a.getY()+r.getY()+o.getY())/4),new nn(u,h)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,r,o,a,u){let h=Gn.getInstance(),p=this.getDimension(),m=p/2-this.nbCenterLayers,y=p/2+this.nbCenterLayers;return h.sampleGrid(t,p,p,m,m,y,m,y,y,m,y,r.getX(),r.getY(),o.getX(),o.getY(),a.getX(),a.getY(),u.getX(),u.getY())}sampleLine(t,r,o){let a=0,u=this.distanceResultPoint(t,r),h=u/o,p=t.getX(),m=t.getY(),y=h*(r.getX()-t.getX())/u,E=h*(r.getY()-t.getY())/u;for(let N=0;N<o;N++)this.image.get(Ge.round(p+N*y),Ge.round(m+N*E))&&(a|=1<<o-N-1);return a}isWhiteOrBlackRectangle(t,r,o,a){let u=3;t=new nn(t.getX()-u,t.getY()+u),r=new nn(r.getX()-u,r.getY()-u),o=new nn(o.getX()+u,o.getY()-u),a=new nn(a.getX()+u,a.getY()+u);let h=this.getColor(a,t);if(h===0)return!1;let p=this.getColor(t,r);return p!==h||(p=this.getColor(r,o),p!==h)?!1:(p=this.getColor(o,a),p===h)}getColor(t,r){let o=this.distancePoint(t,r),a=(r.getX()-t.getX())/o,u=(r.getY()-t.getY())/o,h=0,p=t.getX(),m=t.getY(),y=this.image.get(t.getX(),t.getY()),E=Math.ceil(o);for(let k=0;k<E;k++)p+=a,m+=u,this.image.get(Ge.round(p),Ge.round(m))!==y&&h++;let N=h/o;return N>.1&&N<.9?0:N<=.1===y?1:-1}getFirstDifferent(t,r,o,a){let u=t.getX()+o,h=t.getY()+a;for(;this.isValid(u,h)&&this.image.get(u,h)===r;)u+=o,h+=a;for(u-=o,h-=a;this.isValid(u,h)&&this.image.get(u,h)===r;)u+=o;for(u-=o;this.isValid(u,h)&&this.image.get(u,h)===r;)h+=a;return h-=a,new nn(u,h)}expandSquare(t,r,o){let a=o/(2*r),u=t[0].getX()-t[2].getX(),h=t[0].getY()-t[2].getY(),p=(t[0].getX()+t[2].getX())/2,m=(t[0].getY()+t[2].getY())/2,y=new Te(p+a*u,m+a*h),E=new Te(p-a*u,m-a*h);u=t[1].getX()-t[3].getX(),h=t[1].getY()-t[3].getY(),p=(t[1].getX()+t[3].getX())/2,m=(t[1].getY()+t[3].getY())/2;let N=new Te(p+a*u,m+a*h),k=new Te(p-a*u,m-a*h);return[y,N,E,k]}isValid(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(t){let r=Ge.round(t.getX()),o=Ge.round(t.getY());return this.isValid(r,o)}distancePoint(t,r){return Ge.distance(t.getX(),t.getY(),r.getX(),r.getY())}distanceResultPoint(t,r){return Ge.distance(t.getX(),t.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(P.truncDivision(this.nbLayers-4,8)+1)+15}}class Xn{decode(t,r=null){let o=null,a=new An(t.getBlackMatrix()),u=null,h=null;try{let E=a.detectMirror(!1);u=E.getPoints(),this.reportFoundResultPoints(r,u),h=new Ue().decode(E)}catch(E){o=E}if(h==null)try{let E=a.detectMirror(!0);u=E.getPoints(),this.reportFoundResultPoints(r,u),h=new Ue().decode(E)}catch(E){throw o??E}let p=new Ae(h.getText(),h.getRawBytes(),h.getNumBits(),u,ge.AZTEC,j.currentTimeMillis()),m=h.getByteSegments();m!=null&&p.putMetadata(He.BYTE_SEGMENTS,m);let y=h.getECLevel();return y!=null&&p.putMetadata(He.ERROR_CORRECTION_LEVEL,y),p}reportFoundResultPoints(t,r){if(t!=null){let o=t.get($.NEED_RESULT_POINT_CALLBACK);o!=null&&r.forEach((a,u,h)=>{o.foundPossibleResultPoint(a)})}}reset(){}}class mr extends Ze{constructor(t=500){super(new Xn,t)}}class ct{decode(t,r){try{return this.doDecode(t,r)}catch{if(r&&r.get($.TRY_HARDER)===!0&&t.isRotateSupported()){const u=t.rotateCounterClockwise(),h=this.doDecode(u,r),p=h.getResultMetadata();let m=270;p!==null&&p.get(He.ORIENTATION)===!0&&(m=m+p.get(He.ORIENTATION)%360),h.putMetadata(He.ORIENTATION,m);const y=h.getResultPoints();if(y!==null){const E=u.getHeight();for(let N=0;N<y.length;N++)y[N]=new Te(E-y[N].getY()-1,y[N].getX())}return h}else throw new Y}}reset(){}doDecode(t,r){const o=t.getWidth(),a=t.getHeight();let u=new V(o);const h=r&&r.get($.TRY_HARDER)===!0,p=Math.max(1,a>>(h?8:5));let m;h?m=a:m=15;const y=Math.trunc(a/2);for(let E=0;E<m;E++){const N=Math.trunc((E+1)/2),k=(E&1)===0,U=y+p*(k?N:-N);if(U<0||U>=a)break;try{u=t.getBlackRow(U,u)}catch{continue}for(let Q=0;Q<2;Q++){if(Q===1&&(u.reverse(),r&&r.get($.NEED_RESULT_POINT_CALLBACK)===!0)){const q=new Map;r.forEach((ie,oe)=>q.set(oe,ie)),q.delete($.NEED_RESULT_POINT_CALLBACK),r=q}try{const q=this.decodeRow(U,u,r);if(Q===1){q.putMetadata(He.ORIENTATION,180);const ie=q.getResultPoints();ie!==null&&(ie[0]=new Te(o-ie[0].getX()-1,ie[0].getY()),ie[1]=new Te(o-ie[1].getX()-1,ie[1].getY()))}return q}catch{}}}throw new Y}static recordPattern(t,r,o){const a=o.length;for(let y=0;y<a;y++)o[y]=0;const u=t.getSize();if(r>=u)throw new Y;let h=!t.get(r),p=0,m=r;for(;m<u;){if(t.get(m)!==h)o[p]++;else{if(++p===a)break;o[p]=1,h=!h}m++}if(!(p===a||p===a-1&&m===u))throw new Y}static recordPatternInReverse(t,r,o){let a=o.length,u=t.get(r);for(;r>0&&a>=0;)t.get(--r)!==u&&(a--,u=!u);if(a>=0)throw new Y;ct.recordPattern(t,r+1,o)}static patternMatchVariance(t,r,o){const a=t.length;let u=0,h=0;for(let y=0;y<a;y++)u+=t[y],h+=r[y];if(u<h)return Number.POSITIVE_INFINITY;const p=u/h;o*=p;let m=0;for(let y=0;y<a;y++){const E=t[y],N=r[y]*p,k=E>N?E-N:N-E;if(k>o)return Number.POSITIVE_INFINITY;m+=k}return m/u}}class xe extends ct{static findStartPattern(t){const r=t.getSize(),o=t.getNextSet(0);let a=0,u=Int32Array.from([0,0,0,0,0,0]),h=o,p=!1;const m=6;for(let y=o;y<r;y++)if(t.get(y)!==p)u[a]++;else{if(a===m-1){let E=xe.MAX_AVG_VARIANCE,N=-1;for(let k=xe.CODE_START_A;k<=xe.CODE_START_C;k++){const U=ct.patternMatchVariance(u,xe.CODE_PATTERNS[k],xe.MAX_INDIVIDUAL_VARIANCE);U<E&&(E=U,N=k)}if(N>=0&&t.isRange(Math.max(0,h-(y-h)/2),h,!1))return Int32Array.from([h,y,N]);h+=u[0]+u[1],u=u.slice(2,u.length-1),u[a-1]=0,u[a]=0,a--}else a++;u[a]=1,p=!p}throw new Y}static decodeCode(t,r,o){ct.recordPattern(t,o,r);let a=xe.MAX_AVG_VARIANCE,u=-1;for(let h=0;h<xe.CODE_PATTERNS.length;h++){const p=xe.CODE_PATTERNS[h],m=this.patternMatchVariance(r,p,xe.MAX_INDIVIDUAL_VARIANCE);m<a&&(a=m,u=h)}if(u>=0)return u;throw new Y}decodeRow(t,r,o){const a=o&&o.get($.ASSUME_GS1)===!0,u=xe.findStartPattern(r),h=u[2];let p=0;const m=new Uint8Array(20);m[p++]=h;let y;switch(h){case xe.CODE_START_A:y=xe.CODE_CODE_A;break;case xe.CODE_START_B:y=xe.CODE_CODE_B;break;case xe.CODE_START_C:y=xe.CODE_CODE_C;break;default:throw new W}let E=!1,N=!1,k="",U=u[0],Q=u[1];const q=Int32Array.from([0,0,0,0,0,0]);let ie=0,oe=0,Se=h,Ie=0,Ce=!0,rt=!1,et=!1;for(;!E;){const jr=N;switch(N=!1,ie=oe,oe=xe.decodeCode(r,q,Q),m[p++]=oe,oe!==xe.CODE_STOP&&(Ce=!0),oe!==xe.CODE_STOP&&(Ie++,Se+=Ie*oe),U=Q,Q+=q.reduce((Ru,Ki)=>Ru+Ki,0),oe){case xe.CODE_START_A:case xe.CODE_START_B:case xe.CODE_START_C:throw new W}switch(y){case xe.CODE_CODE_A:if(oe<64)et===rt?k+=String.fromCharCode(32+oe):k+=String.fromCharCode(32+oe+128),et=!1;else if(oe<96)et===rt?k+=String.fromCharCode(oe-64):k+=String.fromCharCode(oe+64),et=!1;else switch(oe!==xe.CODE_STOP&&(Ce=!1),oe){case xe.CODE_FNC_1:a&&(k.length===0?k+="]C1":k+="");break;case xe.CODE_FNC_2:case xe.CODE_FNC_3:break;case xe.CODE_FNC_4_A:!rt&&et?(rt=!0,et=!1):rt&&et?(rt=!1,et=!1):et=!0;break;case xe.CODE_SHIFT:N=!0,y=xe.CODE_CODE_B;break;case xe.CODE_CODE_B:y=xe.CODE_CODE_B;break;case xe.CODE_CODE_C:y=xe.CODE_CODE_C;break;case xe.CODE_STOP:E=!0;break}break;case xe.CODE_CODE_B:if(oe<96)et===rt?k+=String.fromCharCode(32+oe):k+=String.fromCharCode(32+oe+128),et=!1;else switch(oe!==xe.CODE_STOP&&(Ce=!1),oe){case xe.CODE_FNC_1:a&&(k.length===0?k+="]C1":k+="");break;case xe.CODE_FNC_2:case xe.CODE_FNC_3:break;case xe.CODE_FNC_4_B:!rt&&et?(rt=!0,et=!1):rt&&et?(rt=!1,et=!1):et=!0;break;case xe.CODE_SHIFT:N=!0,y=xe.CODE_CODE_A;break;case xe.CODE_CODE_A:y=xe.CODE_CODE_A;break;case xe.CODE_CODE_C:y=xe.CODE_CODE_C;break;case xe.CODE_STOP:E=!0;break}break;case xe.CODE_CODE_C:if(oe<100)oe<10&&(k+="0"),k+=oe;else switch(oe!==xe.CODE_STOP&&(Ce=!1),oe){case xe.CODE_FNC_1:a&&(k.length===0?k+="]C1":k+="");break;case xe.CODE_CODE_A:y=xe.CODE_CODE_A;break;case xe.CODE_CODE_B:y=xe.CODE_CODE_B;break;case xe.CODE_STOP:E=!0;break}break}jr&&(y=y===xe.CODE_CODE_A?xe.CODE_CODE_B:xe.CODE_CODE_A)}const Ft=Q-U;if(Q=r.getNextUnset(Q),!r.isRange(Q,Math.min(r.getSize(),Q+(Q-U)/2),!1))throw new Y;if(Se-=Ie*ie,Se%103!==ie)throw new z;const Fn=k.length;if(Fn===0)throw new Y;Fn>0&&Ce&&(y===xe.CODE_CODE_C?k=k.substring(0,Fn-2):k=k.substring(0,Fn-1));const jn=(u[1]+u[0])/2,_t=U+Ft/2,_n=m.length,zn=new Uint8Array(_n);for(let jr=0;jr<_n;jr++)zn[jr]=m[jr];const Yi=[new Te(jn,t),new Te(_t,t)];return new Ae(k,zn,0,Yi,ge.CODE_128,new Date().getTime())}}xe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],xe.MAX_AVG_VARIANCE=.25,xe.MAX_INDIVIDUAL_VARIANCE=.7,xe.CODE_SHIFT=98,xe.CODE_CODE_C=99,xe.CODE_CODE_B=100,xe.CODE_CODE_A=101,xe.CODE_FNC_1=102,xe.CODE_FNC_2=97,xe.CODE_FNC_3=96,xe.CODE_FNC_4_A=101,xe.CODE_FNC_4_B=100,xe.CODE_START_A=103,xe.CODE_START_B=104,xe.CODE_START_C=105,xe.CODE_STOP=106;class Ct extends ct{constructor(t=!1,r=!1){super(),this.usingCheckDigit=t,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,r,o){let a=this.counters;a.fill(0),this.decodeRowResult="";let u=Ct.findAsteriskPattern(r,a),h=r.getNextSet(u[1]),p=r.getSize(),m,y;do{Ct.recordPattern(r,h,a);let q=Ct.toNarrowWidePattern(a);if(q<0)throw new Y;m=Ct.patternToChar(q),this.decodeRowResult+=m,y=h;for(let ie of a)h+=ie;h=r.getNextSet(h)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let q of a)E+=q;let N=h-y-E;if(h!==p&&N*2<E)throw new Y;if(this.usingCheckDigit){let q=this.decodeRowResult.length-1,ie=0;for(let oe=0;oe<q;oe++)ie+=Ct.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(oe));if(this.decodeRowResult.charAt(q)!==Ct.ALPHABET_STRING.charAt(ie%43))throw new z;this.decodeRowResult=this.decodeRowResult.substring(0,q)}if(this.decodeRowResult.length===0)throw new Y;let k;this.extendedMode?k=Ct.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let U=(u[1]+u[0])/2,Q=y+E/2;return new Ae(k,null,0,[new Te(U,t),new Te(Q,t)],ge.CODE_39,new Date().getTime())}static findAsteriskPattern(t,r){let o=t.getSize(),a=t.getNextSet(0),u=0,h=a,p=!1,m=r.length;for(let y=a;y<o;y++)if(t.get(y)!==p)r[u]++;else{if(u===m-1){if(this.toNarrowWidePattern(r)===Ct.ASTERISK_ENCODING&&t.isRange(Math.max(0,h-Math.floor((y-h)/2)),h,!1))return[h,y];h+=r[0]+r[1],r.copyWithin(0,2,2+u-1),r[u-1]=0,r[u]=0,u--}else u++;r[u]=1,p=!p}throw new Y}static toNarrowWidePattern(t){let r=t.length,o=0,a;do{let u=2147483647;for(let m of t)m<u&&m>o&&(u=m);o=u,a=0;let h=0,p=0;for(let m=0;m<r;m++){let y=t[m];y>o&&(p|=1<<r-1-m,a++,h+=y)}if(a===3){for(let m=0;m<r&&a>0;m++){let y=t[m];if(y>o&&(a--,y*2>=h))return-1}return p}}while(a>3);return-1}static patternToChar(t){for(let r=0;r<Ct.CHARACTER_ENCODINGS.length;r++)if(Ct.CHARACTER_ENCODINGS[r]===t)return Ct.ALPHABET_STRING.charAt(r);if(t===Ct.ASTERISK_ENCODING)return"*";throw new Y}static decodeExtended(t){let r=t.length,o="";for(let a=0;a<r;a++){let u=t.charAt(a);if(u==="+"||u==="$"||u==="%"||u==="/"){let h=t.charAt(a+1),p="\0";switch(u){case"+":if(h>="A"&&h<="Z")p=String.fromCharCode(h.charCodeAt(0)+32);else throw new W;break;case"$":if(h>="A"&&h<="Z")p=String.fromCharCode(h.charCodeAt(0)-64);else throw new W;break;case"%":if(h>="A"&&h<="E")p=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")p=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")p=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")p=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")p="\0";else if(h==="V")p="@";else if(h==="W")p="`";else if(h==="X"||h==="Y"||h==="Z")p="";else throw new W;break;case"/":if(h>="A"&&h<="O")p=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")p=":";else throw new W;break}o+=p,a++}else o+=u}return o}}Ct.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ct.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ct.ASTERISK_ENCODING=148;class Ke extends ct{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,r,o){let a=this.decodeStart(r),u=this.decodeEnd(r),h=new J;Ke.decodeMiddle(r,a[1],u[0],h);let p=h.toString(),m=null;o!=null&&(m=o.get($.ALLOWED_LENGTHS)),m==null&&(m=Ke.DEFAULT_ALLOWED_LENGTHS);let y=p.length,E=!1,N=0;for(let Q of m){if(y===Q){E=!0;break}Q>N&&(N=Q)}if(!E&&y>N&&(E=!0),!E)throw new W;const k=[new Te(a[1],t),new Te(u[0],t)];return new Ae(p,null,0,k,ge.ITF,new Date().getTime())}static decodeMiddle(t,r,o,a){let u=new Int32Array(10),h=new Int32Array(5),p=new Int32Array(5);for(u.fill(0),h.fill(0),p.fill(0);r<o;){ct.recordPattern(t,r,u);for(let y=0;y<5;y++){let E=2*y;h[y]=u[E],p[y]=u[E+1]}let m=Ke.decodeDigit(h);a.append(m.toString()),m=this.decodeDigit(p),a.append(m.toString()),u.forEach(function(y){r+=y})}}decodeStart(t){let r=Ke.skipWhiteSpace(t),o=Ke.findGuardPattern(t,r,Ke.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(t,o[0]),o}validateQuietZone(t,r){let o=this.narrowLineWidth*10;o=o<r?o:r;for(let a=r-1;o>0&&a>=0&&!t.get(a);a--)o--;if(o!==0)throw new Y}static skipWhiteSpace(t){const r=t.getSize(),o=t.getNextSet(0);if(o===r)throw new Y;return o}decodeEnd(t){t.reverse();try{let r=Ke.skipWhiteSpace(t),o;try{o=Ke.findGuardPattern(t,r,Ke.END_PATTERN_REVERSED[0])}catch(u){u instanceof Y&&(o=Ke.findGuardPattern(t,r,Ke.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,o[0]);let a=o[0];return o[0]=t.getSize()-o[1],o[1]=t.getSize()-a,o}finally{t.reverse()}}static findGuardPattern(t,r,o){let a=o.length,u=new Int32Array(a),h=t.getSize(),p=!1,m=0,y=r;u.fill(0);for(let E=r;E<h;E++)if(t.get(E)!==p)u[m]++;else{if(m===a-1){if(ct.patternMatchVariance(u,o,Ke.MAX_INDIVIDUAL_VARIANCE)<Ke.MAX_AVG_VARIANCE)return[y,E];y+=u[0]+u[1],j.arraycopy(u,2,u,0,m-1),u[m-1]=0,u[m]=0,m--}else m++;u[m]=1,p=!p}throw new Y}static decodeDigit(t){let r=Ke.MAX_AVG_VARIANCE,o=-1,a=Ke.PATTERNS.length;for(let u=0;u<a;u++){let h=Ke.PATTERNS[u],p=ct.patternMatchVariance(t,h,Ke.MAX_INDIVIDUAL_VARIANCE);p<r?(r=p,o=u):p===r&&(o=-1)}if(o>=0)return o%10;throw new Y}}Ke.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ke.MAX_AVG_VARIANCE=.38,Ke.MAX_INDIVIDUAL_VARIANCE=.5,Ke.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ke.START_PATTERN=Int32Array.from([1,1,1,1]),Ke.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Qe extends ct{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r=!1,o,a=0,u=Int32Array.from([0,0,0]);for(;!r;){u=Int32Array.from([0,0,0]),o=Qe.findGuardPattern(t,a,!1,this.START_END_PATTERN,u);let h=o[0];a=o[1];let p=h-(a-h);p>=0&&(r=t.isRange(p,h,!1))}return o}static checkChecksum(t){return Qe.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let o=parseInt(t.charAt(r-1),10);return Qe.getStandardUPCEANChecksum(t.substring(0,r-1))===o}static getStandardUPCEANChecksum(t){let r=t.length,o=0;for(let a=r-1;a>=0;a-=2){let u=t.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new W;o+=u}o*=3;for(let a=r-2;a>=0;a-=2){let u=t.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new W;o+=u}return(1e3-o)%10}static decodeEnd(t,r){return Qe.findGuardPattern(t,r,!1,Qe.START_END_PATTERN,new Int32Array(Qe.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,o,a){return this.findGuardPattern(t,r,o,a,new Int32Array(a.length))}static findGuardPattern(t,r,o,a,u){let h=t.getSize();r=o?t.getNextUnset(r):t.getNextSet(r);let p=0,m=r,y=a.length,E=o;for(let N=r;N<h;N++)if(t.get(N)!==E)u[p]++;else{if(p===y-1){if(ct.patternMatchVariance(u,a,Qe.MAX_INDIVIDUAL_VARIANCE)<Qe.MAX_AVG_VARIANCE)return Int32Array.from([m,N]);m+=u[0]+u[1];let k=u.slice(2,u.length-1);for(let U=0;U<p-1;U++)u[U]=k[U];u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,E=!E}throw new Y}static decodeDigit(t,r,o,a){this.recordPattern(t,o,r);let u=this.MAX_AVG_VARIANCE,h=-1,p=a.length;for(let m=0;m<p;m++){let y=a[m],E=ct.patternMatchVariance(r,y,Qe.MAX_INDIVIDUAL_VARIANCE);E<u&&(u=E,h=m)}if(h>=0)return h;throw new Y}}Qe.MAX_AVG_VARIANCE=.48,Qe.MAX_INDIVIDUAL_VARIANCE=.7,Qe.START_END_PATTERN=Int32Array.from([1,1,1]),Qe.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Qe.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qe.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class rn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,o){let a=this.decodeRowStringBuffer,u=this.decodeMiddle(r,o,a),h=a.toString(),p=rn.parseExtensionString(h),m=[new Te((o[0]+o[1])/2,t),new Te(u,t)],y=new Ae(h,null,0,m,ge.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&y.putAllMetadata(p),y}decodeMiddle(t,r,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=t.getSize(),h=r[1],p=0;for(let y=0;y<5&&h<u;y++){let E=Qe.decodeDigit(t,a,h,Qe.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let N of a)h+=N;E>=10&&(p|=1<<4-y),y!==4&&(h=t.getNextSet(h),h=t.getNextUnset(h))}if(o.length!==5)throw new Y;let m=this.determineCheckDigit(p);if(rn.extensionChecksum(o.toString())!==m)throw new Y;return h}static extensionChecksum(t){let r=t.length,o=0;for(let a=r-2;a>=0;a-=2)o+=t.charAt(a).charCodeAt(0)-48;o*=3;for(let a=r-1;a>=0;a-=2)o+=t.charAt(a).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(t){for(let r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new Y}static parseExtensionString(t){if(t.length!==5)return null;let r=rn.parseExtension5String(t);return r==null?null:new Map([[He.SUGGESTED_PRICE,r]])}static parseExtension5String(t){let r;switch(t.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let o=parseInt(t.substring(1)),a=(o/100).toString(),u=o%100,h=u<10?"0"+u:u.toString();return r+a+"."+h}}class xn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,o){let a=this.decodeRowStringBuffer,u=this.decodeMiddle(r,o,a),h=a.toString(),p=xn.parseExtensionString(h),m=[new Te((o[0]+o[1])/2,t),new Te(u,t)],y=new Ae(h,null,0,m,ge.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&y.putAllMetadata(p),y}decodeMiddle(t,r,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=t.getSize(),h=r[1],p=0;for(let m=0;m<2&&h<u;m++){let y=Qe.decodeDigit(t,a,h,Qe.L_AND_G_PATTERNS);o+=String.fromCharCode(48+y%10);for(let E of a)h+=E;y>=10&&(p|=1<<1-m),m!==1&&(h=t.getNextSet(h),h=t.getNextUnset(h))}if(o.length!==2)throw new Y;if(parseInt(o.toString())%4!==p)throw new Y;return h}static parseExtensionString(t){return t.length!==2?null:new Map([[He.ISSUE_NUMBER,parseInt(t)]])}}class we{static decodeRow(t,r,o){let a=Qe.findGuardPattern(r,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new rn().decodeRow(t,r,a)}catch{return new xn().decodeRow(t,r,a)}}}we.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Re extends Qe{constructor(){super(),this.decodeRowStringBuffer="",Re.L_AND_G_PATTERNS=Re.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let r=Re.L_PATTERNS[t-10],o=new Int32Array(r.length);for(let a=0;a<r.length;a++)o[a]=r[r.length-a-1];Re.L_AND_G_PATTERNS[t]=o}}decodeRow(t,r,o){let a=Re.findStartGuardPattern(r),u=o==null?null:o.get($.NEED_RESULT_POINT_CALLBACK);if(u!=null){const Ce=new Te((a[0]+a[1])/2,t);u.foundPossibleResultPoint(Ce)}let h=this.decodeMiddle(r,a,this.decodeRowStringBuffer),p=h.rowOffset,m=h.resultString;if(u!=null){const Ce=new Te(p,t);u.foundPossibleResultPoint(Ce)}let y=this.decodeEnd(r,p);if(u!=null){const Ce=new Te((y[0]+y[1])/2,t);u.foundPossibleResultPoint(Ce)}let E=y[1],N=E+(E-y[0]);if(N>=r.getSize()||!r.isRange(E,N,!1))throw new Y;let k=m.toString();if(k.length<8)throw new W;if(!Re.checkChecksum(k))throw new z;let U=(a[1]+a[0])/2,Q=(y[1]+y[0])/2,q=this.getBarcodeFormat(),ie=[new Te(U,t),new Te(Q,t)],oe=new Ae(k,null,0,ie,q,new Date().getTime()),Se=0;try{let Ce=we.decodeRow(t,r,y[1]);oe.putMetadata(He.UPC_EAN_EXTENSION,Ce.getText()),oe.putAllMetadata(Ce.getResultMetadata()),oe.addResultPoints(Ce.getResultPoints()),Se=Ce.getText().length}catch{}let Ie=o==null?null:o.get($.ALLOWED_EAN_EXTENSIONS);if(Ie!=null){let Ce=!1;for(let rt in Ie)if(Se.toString()===rt){Ce=!0;break}if(!Ce)throw new Y}return oe}decodeEnd(t,r){return Re.findGuardPattern(t,r,!1,Re.START_END_PATTERN,new Int32Array(Re.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return Re.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let o=parseInt(t.charAt(r-1),10);return Re.getStandardUPCEANChecksum(t.substring(0,r-1))===o}static getStandardUPCEANChecksum(t){let r=t.length,o=0;for(let a=r-1;a>=0;a-=2){let u=t.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new W;o+=u}o*=3;for(let a=r-2;a>=0;a-=2){let u=t.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new W;o+=u}return(1e3-o)%10}}class Mt extends Re{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=t.getSize(),h=r[1],p=0;for(let y=0;y<6&&h<u;y++){let E=Re.decodeDigit(t,a,h,Re.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let N of a)h+=N;E>=10&&(p|=1<<5-y)}o=Mt.determineFirstDigit(o,p),h=Re.findGuardPattern(t,h,!0,Re.MIDDLE_PATTERN,new Int32Array(Re.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<6&&h<u;y++){let E=Re.decodeDigit(t,a,h,Re.L_PATTERNS);o+=String.fromCharCode(48+E);for(let N of a)h+=N}return{rowOffset:h,resultString:o}}getBarcodeFormat(){return ge.EAN_13}static determineFirstDigit(t,r){for(let o=0;o<10;o++)if(r===this.FIRST_DIGIT_ENCODINGS[o])return t=String.fromCharCode(48+o)+t,t;throw new Y}}Mt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Yn extends Re{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,o){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=t.getSize(),h=r[1];for(let m=0;m<4&&h<u;m++){let y=Re.decodeDigit(t,a,h,Re.L_PATTERNS);o+=String.fromCharCode(48+y);for(let E of a)h+=E}h=Re.findGuardPattern(t,h,!0,Re.MIDDLE_PATTERN,new Int32Array(Re.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&h<u;m++){let y=Re.decodeDigit(t,a,h,Re.L_PATTERNS);o+=String.fromCharCode(48+y);for(let E of a)h+=E}return{rowOffset:h,resultString:o}}getBarcodeFormat(){return ge.EAN_8}}class At extends Re{constructor(){super(...arguments),this.ean13Reader=new Mt}getBarcodeFormat(){return ge.UPC_A}decode(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,r,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,o))}decodeMiddle(t,r,o){return this.ean13Reader.decodeMiddle(t,r,o)}maybeReturnResult(t){let r=t.getText();if(r.charAt(0)==="0"){let o=new Ae(r.substring(1),null,null,t.getResultPoints(),ge.UPC_A);return t.getResultMetadata()!=null&&o.putAllMetadata(t.getResultMetadata()),o}else throw new Y}reset(){this.ean13Reader.reset()}}class fn extends Re{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,r,o){const a=this.decodeMiddleCounters.map(y=>y);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const u=t.getSize();let h=r[1],p=0;for(let y=0;y<6&&h<u;y++){const E=fn.decodeDigit(t,a,h,fn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let N of a)h+=N;E>=10&&(p|=1<<5-y)}let m=fn.determineNumSysAndCheckDigit(o,p);return{rowOffset:h,resultString:m}}decodeEnd(t,r){return fn.findGuardPatternWithoutCounters(t,r,!0,fn.MIDDLE_END_PATTERN)}checkChecksum(t){return Re.checkChecksum(fn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,r){for(let o=0;o<=1;o++)for(let a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][a]){let u=String.fromCharCode(48+o),h=String.fromCharCode(48+a);return u+t+h}throw Y.getNotFoundInstance()}getBarcodeFormat(){return ge.UPC_E}static convertUPCEtoUPCA(t){const r=t.slice(1,7).split("").map(u=>u.charCodeAt(0)),o=new J;o.append(t.charAt(0));let a=r[5];switch(a){case 0:case 1:case 2:o.appendChars(r,0,2),o.append(a),o.append("0000"),o.appendChars(r,2,3);break;case 3:o.appendChars(r,0,3),o.append("00000"),o.appendChars(r,3,2);break;case 4:o.appendChars(r,0,4),o.append("00000"),o.append(r[4]);break;default:o.appendChars(r,0,5),o.append("0000"),o.append(a);break}return t.length>=8&&o.append(t.charAt(7)),o.toString()}}fn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),fn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ms extends ct{constructor(t){super();let r=t==null?null:t.get($.POSSIBLE_FORMATS),o=[];l(r)?(o.push(new Mt),o.push(new At),o.push(new Yn),o.push(new fn)):(r.indexOf(ge.EAN_13)>-1&&o.push(new Mt),r.indexOf(ge.UPC_A)>-1&&o.push(new At),r.indexOf(ge.EAN_8)>-1&&o.push(new Yn),r.indexOf(ge.UPC_E)>-1&&o.push(new fn)),this.readers=o}decodeRow(t,r,o){for(let a of this.readers)try{const u=a.decodeRow(t,r,o),h=u.getBarcodeFormat()===ge.EAN_13&&u.getText().charAt(0)==="0",p=o==null?null:o.get($.POSSIBLE_FORMATS),m=p==null||p.includes(ge.UPC_A);if(h&&m){const y=u.getRawBytes(),E=new Ae(u.getText().substring(1),y,y?y.length:null,u.getResultPoints(),ge.UPC_A);return E.putAllMetadata(u.getResultMetadata()),E}return u}catch{}throw new Y}reset(){for(let t of this.readers)t.reset()}}class Gt extends ct{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,r){for(let o=0;o<r.length;o++)if(ct.patternMatchVariance(t,r[o],Gt.MAX_INDIVIDUAL_VARIANCE)<Gt.MAX_AVG_VARIANCE)return o;throw new Y}static count(t){return Ge.sum(new Int32Array(t))}static increment(t,r){let o=0,a=r[0];for(let u=1;u<t.length;u++)r[u]>a&&(a=r[u],o=u);t[o]++}static decrement(t,r){let o=0,a=r[0];for(let u=1;u<t.length;u++)r[u]<a&&(a=r[u],o=u);t[o]--}static isFinderPattern(t){let r=t[0]+t[1],o=r+t[2]+t[3],a=r/o;if(a>=Gt.MIN_FINDER_PATTERN_RATIO&&a<=Gt.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let p of t)p>h&&(h=p),p<u&&(u=p);return h<10*u}return!1}}Gt.MAX_AVG_VARIANCE=.2,Gt.MAX_INDIVIDUAL_VARIANCE=.45,Gt.MIN_FINDER_PATTERN_RATIO=9.5/12,Gt.MAX_FINDER_PATTERN_RATIO=12.5/14;class ci{constructor(t,r){this.value=t,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof ci))return!1;const r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class vr{constructor(t,r,o,a,u){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Te(o,u)),this.resultPoints.push(new Te(a,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof vr))return!1;const r=t;return this.value===r.value}hashCode(){return this.value}}class Dt{constructor(){}static getRSSvalue(t,r,o){let a=0;for(let m of t)a+=m;let u=0,h=0,p=t.length;for(let m=0;m<p-1;m++){let y;for(y=1,h|=1<<m;y<t[m];y++,h&=~(1<<m)){let E=Dt.combins(a-y-1,p-m-2);if(o&&h===0&&a-y-(p-m-1)>=p-m-1&&(E-=Dt.combins(a-y-(p-m),p-m-2)),p-m-1>1){let N=0;for(let k=a-y-(p-m-2);k>r;k--)N+=Dt.combins(a-y-k-1,p-m-3);E-=N*(p-1-m)}else a-y>r&&E--;u+=E}a-=y}return u}static combins(t,r){let o,a;t-r>r?(a=r,o=t-r):(a=t-r,o=r);let u=1,h=1;for(let p=t;p>o;p--)u*=p,h<=a&&(u/=h,h++);for(;h<=a;)u/=h,h++;return u}}class xi{static buildBitArray(t){let r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);let o=12*r,a=new V(o),u=0,p=t[0].getRightChar().getValue();for(let m=11;m>=0;--m)p&1<<m&&a.set(u),u++;for(let m=1;m<t.length;++m){let y=t[m],E=y.getLeftChar().getValue();for(let N=11;N>=0;--N)E&1<<N&&a.set(u),u++;if(y.getRightChar()!=null){let N=y.getRightChar().getValue();for(let k=11;k>=0;--k)N&1<<k&&a.set(u),u++}}return a}}class kr{constructor(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class hi{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Tt extends hi{constructor(t,r){super(t),this.value=r}getValue(){return this.value}isFNC1(){return this.value===Tt.FNC1}}Tt.FNC1="$";class Be extends hi{constructor(t,r,o){super(t),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class dn extends hi{constructor(t,r,o){if(super(t),r<0||r>10||o<0||o>10)throw new W;this.firstDigit=r,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===dn.FNC1}isSecondDigitFNC1(){return this.secondDigit===dn.FNC1}isAnyFNC1(){return this.firstDigit===dn.FNC1||this.secondDigit===dn.FNC1}}dn.FNC1=10;class ke{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new Y;let r=t.substring(0,2);for(let u of ke.TWO_DIGIT_DATA_LENGTH)if(u[0]===r)return u[1]===ke.VARIABLE_LENGTH?ke.processVariableAI(2,u[2],t):ke.processFixedAI(2,u[1],t);if(t.length<3)throw new Y;let o=t.substring(0,3);for(let u of ke.THREE_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===ke.VARIABLE_LENGTH?ke.processVariableAI(3,u[2],t):ke.processFixedAI(3,u[1],t);for(let u of ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===ke.VARIABLE_LENGTH?ke.processVariableAI(4,u[2],t):ke.processFixedAI(4,u[1],t);if(t.length<4)throw new Y;let a=t.substring(0,4);for(let u of ke.FOUR_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===ke.VARIABLE_LENGTH?ke.processVariableAI(4,u[2],t):ke.processFixedAI(4,u[1],t);throw new Y}static processFixedAI(t,r,o){if(o.length<t)throw new Y;let a=o.substring(0,t);if(o.length<t+r)throw new Y;let u=o.substring(t,t+r),h=o.substring(t+r),p="("+a+")"+u,m=ke.parseFieldsInGeneralPurpose(h);return m==null?p:p+m}static processVariableAI(t,r,o){let a=o.substring(0,t),u;o.length<t+r?u=o.length:u=t+r;let h=o.substring(t,u),p=o.substring(u),m="("+a+")"+h,y=ke.parseFieldsInGeneralPurpose(p);return y==null?m:m+y}}ke.VARIABLE_LENGTH=[],ke.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ke.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ke.VARIABLE_LENGTH,20],["22",ke.VARIABLE_LENGTH,29],["30",ke.VARIABLE_LENGTH,8],["37",ke.VARIABLE_LENGTH,8],["90",ke.VARIABLE_LENGTH,30],["91",ke.VARIABLE_LENGTH,30],["92",ke.VARIABLE_LENGTH,30],["93",ke.VARIABLE_LENGTH,30],["94",ke.VARIABLE_LENGTH,30],["95",ke.VARIABLE_LENGTH,30],["96",ke.VARIABLE_LENGTH,30],["97",ke.VARIABLE_LENGTH,3],["98",ke.VARIABLE_LENGTH,30],["99",ke.VARIABLE_LENGTH,30]],ke.THREE_DIGIT_DATA_LENGTH=[["240",ke.VARIABLE_LENGTH,30],["241",ke.VARIABLE_LENGTH,30],["242",ke.VARIABLE_LENGTH,6],["250",ke.VARIABLE_LENGTH,30],["251",ke.VARIABLE_LENGTH,30],["253",ke.VARIABLE_LENGTH,17],["254",ke.VARIABLE_LENGTH,20],["400",ke.VARIABLE_LENGTH,30],["401",ke.VARIABLE_LENGTH,30],["402",17],["403",ke.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ke.VARIABLE_LENGTH,20],["421",ke.VARIABLE_LENGTH,15],["422",3],["423",ke.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ke.VARIABLE_LENGTH,15],["391",ke.VARIABLE_LENGTH,18],["392",ke.VARIABLE_LENGTH,15],["393",ke.VARIABLE_LENGTH,18],["703",ke.VARIABLE_LENGTH,30]],ke.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ke.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ke.VARIABLE_LENGTH,20],["8003",ke.VARIABLE_LENGTH,30],["8004",ke.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ke.VARIABLE_LENGTH,30],["8008",ke.VARIABLE_LENGTH,12],["8018",18],["8020",ke.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ke.VARIABLE_LENGTH,70],["8200",ke.VARIABLE_LENGTH,70]];class Xr{constructor(t){this.buffer=new J,this.information=t}decodeAllCodes(t,r){let o=r,a=null;do{let u=this.decodeGeneralPurposeField(o,a),h=ke.parseFieldsInGeneralPurpose(u.getNewString());if(h!=null&&t.append(h),u.isRemaining()?a=""+u.getRemainingValue():a=null,o===u.getNewPosition())break;o=u.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(t,4);return u===0?new dn(this.information.getSize(),dn.FNC1,dn.FNC1):new dn(this.information.getSize(),u-1,dn.FNC1)}let r=this.extractNumericValueFromBitArray(t,7),o=(r-8)/11,a=(r-8)%11;return new dn(t+7,o,a)}extractNumericValueFromBitArray(t,r){return Xr.extractNumericValueFromBitArray(this.information,t,r)}static extractNumericValueFromBitArray(t,r,o){let a=0;for(let u=0;u<o;++u)t.get(r+u)&&(a|=1<<o-u-1);return a}decodeGeneralPurposeField(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Be(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Be(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,r;do{let o=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished()),!(o!==this.current.getPosition())&&!t)break}while(!t);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let r;return t.isSecondDigitFNC1()?r=new Be(this.current.getPosition(),this.buffer.toString()):r=new Be(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new kr(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let r=new Be(this.current.getPosition(),this.buffer.toString());return new kr(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new kr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Be(this.current.getPosition(),this.buffer.toString());return new kr(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new kr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Be(this.current.getPosition(),this.buffer.toString());return new kr(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new kr(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<116)return!0;if(t+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,8);return a>=232&&a<253}decodeIsoIec646(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Tt(t+5,Tt.FNC1);if(r>=5&&r<15)return new Tt(t+5,"0"+(r-5));let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<90)return new Tt(t+7,""+(o+1));if(o>=90&&o<116)return new Tt(t+7,""+(o+7));let a=this.extractNumericValueFromBitArray(t,8),u;switch(a){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new W}return new Tt(t+8,u)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,6);return o>=16&&o<63}decodeAlphanumeric(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Tt(t+5,Tt.FNC1);if(r>=5&&r<15)return new Tt(t+5,"0"+(r-5));let o=this.extractNumericValueFromBitArray(t,6);if(o>=32&&o<58)return new Tt(t+6,""+(o+33));let a;switch(o){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Wt("Decoding invalid alphanumeric value: "+o)}return new Tt(t+6,a)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0}}class fi{constructor(t){this.information=t,this.generalDecoder=new Xr(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class pn extends fi{constructor(t){super(t)}encodeCompressedGtin(t,r){t.append("(01)");let o=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,o)}encodeCompressedGtinWithoutAI(t,r,o){for(let a=0;a<4;++a){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);u/100===0&&t.append("0"),u/10===0&&t.append("0"),t.append(u)}pn.appendCheckDigit(t,o)}static appendCheckDigit(t,r){let o=0;for(let a=0;a<13;a++){let u=t.charAt(a+r).charCodeAt(0)-48;o+=a&1?u:3*u}o=10-o%10,o===10&&(o=0),t.append(o)}}pn.GTIN_SIZE=40;class Yr extends pn{constructor(t){super(t)}parseInformation(){let t=new J;t.append("(01)");let r=t.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(Yr.HEADER_SIZE,4);return t.append(o),this.encodeCompressedGtinWithoutAI(t,Yr.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,Yr.HEADER_SIZE+44)}}Yr.HEADER_SIZE=4;class Nn extends fi{constructor(t){super(t)}parseInformation(){let t=new J;return this.getGeneralDecoder().decodeAllCodes(t,Nn.HEADER_SIZE)}}Nn.HEADER_SIZE=5;class Kr extends pn{constructor(t){super(t)}encodeCompressedWeight(t,r,o){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,o);this.addWeightCode(t,a);let u=this.checkWeight(a),h=1e5;for(let p=0;p<5;++p)u/h===0&&t.append("0"),h/=10;t.append(u)}}class Kn extends Kr{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Kn.HEADER_SIZE+Kr.GTIN_SIZE+Kn.WEIGHT_SIZE)throw new Y;let t=new J;return this.encodeCompressedGtin(t,Kn.HEADER_SIZE),this.encodeCompressedWeight(t,Kn.HEADER_SIZE+Kr.GTIN_SIZE,Kn.WEIGHT_SIZE),t.toString()}}Kn.HEADER_SIZE=5,Kn.WEIGHT_SIZE=15;class sn extends Kn{constructor(t){super(t)}addWeightCode(t,r){t.append("(3103)")}checkWeight(t){return t}}class Oo extends Kn{constructor(t){super(t)}addWeightCode(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Qn extends pn{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Qn.HEADER_SIZE+pn.GTIN_SIZE)throw new Y;let t=new J;this.encodeCompressedGtin(t,Qn.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE+pn.GTIN_SIZE,Qn.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(Qn.HEADER_SIZE+pn.GTIN_SIZE+Qn.LAST_DIGIT_SIZE,null);return t.append(o.getNewString()),t.toString()}}Qn.HEADER_SIZE=8,Qn.LAST_DIGIT_SIZE=2;class on extends pn{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<on.HEADER_SIZE+pn.GTIN_SIZE)throw new Y;let t=new J;this.encodeCompressedGtin(t,on.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(on.HEADER_SIZE+pn.GTIN_SIZE,on.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(on.HEADER_SIZE+pn.GTIN_SIZE+on.LAST_DIGIT_SIZE,on.FIRST_THREE_DIGITS_SIZE);o/100==0&&t.append("0"),o/10==0&&t.append("0"),t.append(o);let a=this.getGeneralDecoder().decodeGeneralPurposeField(on.HEADER_SIZE+pn.GTIN_SIZE+on.LAST_DIGIT_SIZE+on.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()}}on.HEADER_SIZE=8,on.LAST_DIGIT_SIZE=2,on.FIRST_THREE_DIGITS_SIZE=10;class Nt extends Kr{constructor(t,r,o){super(t),this.dateCode=o,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=Nt.HEADER_SIZE+Nt.GTIN_SIZE+Nt.WEIGHT_SIZE+Nt.DATE_SIZE)throw new Y;let t=new J;return this.encodeCompressedGtin(t,Nt.HEADER_SIZE),this.encodeCompressedWeight(t,Nt.HEADER_SIZE+Nt.GTIN_SIZE,Nt.WEIGHT_SIZE),this.encodeCompressedDate(t,Nt.HEADER_SIZE+Nt.GTIN_SIZE+Nt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,r){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,Nt.DATE_SIZE);if(o==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let a=o%32;o/=32;let u=o%12+1;o/=12;let h=o;h/10==0&&t.append("0"),t.append(h),u/10==0&&t.append("0"),t.append(u),a/10==0&&t.append("0"),t.append(a)}addWeightCode(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")}checkWeight(t){return t%1e5}}Nt.HEADER_SIZE=8,Nt.WEIGHT_SIZE=20,Nt.DATE_SIZE=16;function Si(T){try{if(T.get(1))return new Yr(T);if(!T.get(2))return new Nn(T);switch(Xr.extractNumericValueFromBitArray(T,1,4)){case 4:return new sn(T);case 5:return new Oo(T)}switch(Xr.extractNumericValueFromBitArray(T,1,5)){case 12:return new Qn(T);case 13:return new on(T)}switch(Xr.extractNumericValueFromBitArray(T,1,7)){case 56:return new Nt(T,"310","11");case 57:return new Nt(T,"320","11");case 58:return new Nt(T,"310","13");case 59:return new Nt(T,"320","13");case 60:return new Nt(T,"310","15");case 61:return new Nt(T,"320","15");case 62:return new Nt(T,"310","17");case 63:return new Nt(T,"320","17")}}catch(t){throw console.log(t),new Wt("unknown decoder: "+T)}}class Mr{constructor(t,r,o,a){this.leftchar=t,this.rightchar=r,this.finderpattern=o,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,r){return t instanceof Mr?Mr.equalsOrNull(t.leftchar,r.leftchar)&&Mr.equalsOrNull(t.rightchar,r.rightchar)&&Mr.equalsOrNull(t.finderpattern,r.finderpattern):!1}static equalsOrNull(t,r){return t===null?r===null:Mr.equals(t,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class vs{constructor(t,r,o){this.pairs=t,this.rowNumber=r,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,r){return t instanceof vs?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1}checkEqualitity(t,r){if(!t||!r)return;let o;return t.forEach((a,u)=>{r.forEach(h=>{a.getLeftChar().getValue()===h.getLeftChar().getValue()&&a.getRightChar().getValue()===h.getRightChar().getValue()&&a.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(o=!0)})}),o}}class ve extends Gt{constructor(t){super(...arguments),this.pairs=new Array(ve.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,r,o){this.pairs.length=0,this.startFromEven=!1;try{return ve.constructResult(this.decodeRow2pairs(t,r))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,ve.constructResult(this.decodeRow2pairs(t,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,r){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(u){if(u instanceof Y){if(!this.pairs.length)throw new Y;o=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new Y}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return t&&(this.rows=this.rows.reverse()),r}checkRows(t,r){for(let o=r;o<this.rows.length;o++){let a=this.rows[o];this.pairs.length=0;for(let h of t)this.pairs.push(h.getPairs());if(this.pairs.push(a.getPairs()),!ve.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(t);u.push(a);try{return this.checkRows(u,o+1)}catch(h){this.verbose&&console.log(h)}}throw new Y}static isValidSequence(t){for(let r of ve.FINDER_PATTERN_SEQUENCES){if(t.length>r.length)continue;let o=!0;for(let a=0;a<t.length;a++)if(t[a].getFinderPattern().getValue()!=r[a]){o=!1;break}if(o)return!0}return!1}storeRow(t,r){let o=0,a=!1,u=!1;for(;o<this.rows.length;){let h=this.rows[o];if(h.getRowNumber()>t){u=h.isEquivalent(this.pairs);break}a=h.isEquivalent(this.pairs),o++}u||a||ve.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new vs(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,r){for(let o of r)if(o.getPairs().length!==t.length){for(let a of o.getPairs())for(let u of t)if(Mr.equals(a,u))break}}static isPartialRow(t,r){for(let o of r){let a=!0;for(let u of t){let h=!1;for(let p of o.getPairs())if(u.equals(p)){h=!0;break}if(!h){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(t){let r=xi.buildBitArray(t),a=Si(r).parseInformation(),u=t[0].getFinderPattern().getResultPoints(),h=t[t.length-1].getFinderPattern().getResultPoints(),p=[u[0],u[1],h[0],h[1]];return new Ae(a,null,null,p,ge.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),r=t.getLeftChar(),o=t.getRightChar();if(o==null)return!1;let a=o.getChecksumPortion(),u=2;for(let p=1;p<this.pairs.size();++p){let m=this.pairs.get(p);a+=m.getLeftChar().getChecksumPortion(),u++;let y=m.getRightChar();y!=null&&(a+=y.getChecksumPortion(),u++)}return a%=211,211*(u-4)+a==r.getValue()}static getNextSecondBar(t,r){let o;return t.get(r)?(o=t.getNextUnset(r),o=t.getNextSet(o)):(o=t.getNextSet(r),o=t.getNextUnset(o)),o}retrieveNextPair(t,r,o){let a=r.length%2==0;this.startFromEven&&(a=!a);let u,h=!0,p=-1;do this.findNextPair(t,r,p),u=this.parseFoundFinderPattern(t,o,a),u==null?p=ve.getNextSecondBar(t,this.startEnd[0]):h=!1;while(h);let m=this.decodeDataCharacter(t,u,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new Y;let y;try{y=this.decodeDataCharacter(t,u,a,!1)}catch(E){y=null,this.verbose&&console.log(E)}return new Mr(m,y,u,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,r,o){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=t.getSize(),h;o>=0?h=o:this.isEmptyPair(r)?h=0:h=r[r.length-1].getFinderPattern().getStartEnd()[1];let p=r.length%2!=0;this.startFromEven&&(p=!p);let m=!1;for(;h<u&&(m=!t.get(h),!!m);)h++;let y=0,E=h;for(let N=h;N<u;N++)if(t.get(N)!=m)a[y]++;else{if(y==3){if(p&&ve.reverseCounters(a),ve.isFinderPattern(a)){this.startEnd[0]=E,this.startEnd[1]=N;return}p&&ve.reverseCounters(a),E+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,y--}else y++;a[y]=1,m=!m}throw new Y}static reverseCounters(t){let r=t.length;for(let o=0;o<r/2;++o){let a=t[o];t[o]=t[r-o-1],t[r-o-1]=a}}parseFoundFinderPattern(t,r,o){let a,u,h;if(o){let y=this.startEnd[0]-1;for(;y>=0&&!t.get(y);)y--;y++,a=this.startEnd[0]-y,u=y,h=this.startEnd[1]}else u=this.startEnd[0],h=t.getNextUnset(this.startEnd[1]+1),a=h-this.startEnd[1];let p=this.getDecodeFinderCounters();j.arraycopy(p,0,p,1,p.length-1),p[0]=a;let m;try{m=this.parseFinderValue(p,ve.FINDER_PATTERNS)}catch{return null}return new vr(m,[u,h],u,h,r)}decodeDataCharacter(t,r,o,a){let u=this.getDataCharacterCounters();for(let _t=0;_t<u.length;_t++)u[_t]=0;if(a)ve.recordPatternInReverse(t,r.getStartEnd()[0],u);else{ve.recordPattern(t,r.getStartEnd()[1],u);for(let _t=0,_n=u.length-1;_t<_n;_t++,_n--){let zn=u[_t];u[_t]=u[_n],u[_n]=zn}}let h=17,p=Ge.sum(new Int32Array(u))/h,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(p-m)/m>.3)throw new Y;let y=this.getOddCounts(),E=this.getEvenCounts(),N=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let _t=0;_t<u.length;_t++){let _n=1*u[_t]/p,zn=_n+.5;if(zn<1){if(_n<.3)throw new Y;zn=1}else if(zn>8){if(_n>8.7)throw new Y;zn=8}let Yi=_t/2;_t&1?(E[Yi]=zn,k[Yi]=_n-zn):(y[Yi]=zn,N[Yi]=_n-zn)}this.adjustOddEvenCounts(h);let U=4*r.getValue()+(o?0:2)+(a?0:1)-1,Q=0,q=0;for(let _t=y.length-1;_t>=0;_t--){if(ve.isNotA1left(r,o,a)){let _n=ve.WEIGHTS[U][2*_t];q+=y[_t]*_n}Q+=y[_t]}let ie=0;for(let _t=E.length-1;_t>=0;_t--)if(ve.isNotA1left(r,o,a)){let _n=ve.WEIGHTS[U][2*_t+1];ie+=E[_t]*_n}let oe=q+ie;if(Q&1||Q>13||Q<4)throw new Y;let Se=(13-Q)/2,Ie=ve.SYMBOL_WIDEST[Se],Ce=9-Ie,rt=Dt.getRSSvalue(y,Ie,!0),et=Dt.getRSSvalue(E,Ce,!1),Ft=ve.EVEN_TOTAL_SUBSET[Se],Fn=ve.GSUM[Se],jn=rt*Ft+et+Fn;return new ci(jn,oe)}static isNotA1left(t,r,o){return!(t.getValue()==0&&r&&o)}adjustOddEvenCounts(t){let r=Ge.sum(new Int32Array(this.getOddCounts())),o=Ge.sum(new Int32Array(this.getEvenCounts())),a=!1,u=!1;r>13?u=!0:r<4&&(a=!0);let h=!1,p=!1;o>13?p=!0:o<4&&(h=!0);let m=r+o-t,y=(r&1)==1,E=(o&1)==0;if(m==1)if(y){if(E)throw new Y;u=!0}else{if(!E)throw new Y;p=!0}else if(m==-1)if(y){if(E)throw new Y;a=!0}else{if(!E)throw new Y;h=!0}else if(m==0){if(y){if(!E)throw new Y;r<o?(a=!0,p=!0):(u=!0,h=!0)}else if(E)throw new Y}else throw new Y;if(a){if(u)throw new Y;ve.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&ve.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(p)throw new Y;ve.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&ve.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ve.SYMBOL_WIDEST=[7,5,4,3,1],ve.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ve.GSUM=[0,348,1388,2948,3988],ve.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ve.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ve.FINDER_PAT_A=0,ve.FINDER_PAT_B=1,ve.FINDER_PAT_C=2,ve.FINDER_PAT_D=3,ve.FINDER_PAT_E=4,ve.FINDER_PAT_F=5,ve.FINDER_PATTERN_SEQUENCES=[[ve.FINDER_PAT_A,ve.FINDER_PAT_A],[ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B],[ve.FINDER_PAT_A,ve.FINDER_PAT_C,ve.FINDER_PAT_B,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_C],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F]],ve.MAX_PAIRS=11;class Ro extends ci{constructor(t,r,o){super(t,r),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Pt extends Gt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,r,o){const a=this.decodePair(r,!1,t,o);Pt.addOrTally(this.possibleLeftPairs,a),r.reverse();let u=this.decodePair(r,!0,t,o);Pt.addOrTally(this.possibleRightPairs,u),r.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Pt.checkChecksum(h,p))return Pt.constructResult(h,p)}throw new Y}static addOrTally(t,r){if(r==null)return;let o=!1;for(let a of t)if(a.getValue()===r.getValue()){a.incrementCount(),o=!0;break}o||t.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,r){let o=4537077*t.getValue()+r.getValue(),a=new String(o).toString(),u=new J;for(let y=13-a.length;y>0;y--)u.append("0");u.append(a);let h=0;for(let y=0;y<13;y++){let E=u.charAt(y).charCodeAt(0)-48;h+=y&1?E:3*E}h=10-h%10,h===10&&(h=0),u.append(h.toString());let p=t.getFinderPattern().getResultPoints(),m=r.getFinderPattern().getResultPoints();return new Ae(u.toString(),null,0,[p[0],p[1],m[0],m[1]],ge.RSS_14,new Date().getTime())}static checkChecksum(t,r){let o=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,o===a}decodePair(t,r,o,a){try{let u=this.findFinderPattern(t,r),h=this.parseFoundFinderPattern(t,o,r,u),p=a==null?null:a.get($.NEED_RESULT_POINT_CALLBACK);if(p!=null){let E=(u[0]+u[1])/2;r&&(E=t.getSize()-1-E),p.foundPossibleResultPoint(new Te(E,o))}let m=this.decodeDataCharacter(t,h,!0),y=this.decodeDataCharacter(t,h,!1);return new Ro(1597*m.getValue()+y.getValue(),m.getChecksumPortion()+4*y.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(t,r,o){let a=this.getDataCharacterCounters();for(let ie=0;ie<a.length;ie++)a[ie]=0;if(o)ct.recordPatternInReverse(t,r.getStartEnd()[0],a);else{ct.recordPattern(t,r.getStartEnd()[1]+1,a);for(let ie=0,oe=a.length-1;ie<oe;ie++,oe--){let Se=a[ie];a[ie]=a[oe],a[oe]=Se}}let u=o?16:15,h=Ge.sum(new Int32Array(a))/u,p=this.getOddCounts(),m=this.getEvenCounts(),y=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let ie=0;ie<a.length;ie++){let oe=a[ie]/h,Se=Math.floor(oe+.5);Se<1?Se=1:Se>8&&(Se=8);let Ie=Math.floor(ie/2);ie&1?(m[Ie]=Se,E[Ie]=oe-Se):(p[Ie]=Se,y[Ie]=oe-Se)}this.adjustOddEvenCounts(o,u);let N=0,k=0;for(let ie=p.length-1;ie>=0;ie--)k*=9,k+=p[ie],N+=p[ie];let U=0,Q=0;for(let ie=m.length-1;ie>=0;ie--)U*=9,U+=m[ie],Q+=m[ie];let q=k+3*U;if(o){if(N&1||N>12||N<4)throw new Y;let ie=(12-N)/2,oe=Pt.OUTSIDE_ODD_WIDEST[ie],Se=9-oe,Ie=Dt.getRSSvalue(p,oe,!1),Ce=Dt.getRSSvalue(m,Se,!0),rt=Pt.OUTSIDE_EVEN_TOTAL_SUBSET[ie],et=Pt.OUTSIDE_GSUM[ie];return new ci(Ie*rt+Ce+et,q)}else{if(Q&1||Q>10||Q<4)throw new Y;let ie=(10-Q)/2,oe=Pt.INSIDE_ODD_WIDEST[ie],Se=9-oe,Ie=Dt.getRSSvalue(p,oe,!0),Ce=Dt.getRSSvalue(m,Se,!1),rt=Pt.INSIDE_ODD_TOTAL_SUBSET[ie],et=Pt.INSIDE_GSUM[ie];return new ci(Ce*rt+Ie+et,q)}}findFinderPattern(t,r){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),u=!1,h=0;for(;h<a&&(u=!t.get(h),r!==u);)h++;let p=0,m=h;for(let y=h;y<a;y++)if(t.get(y)!==u)o[p]++;else{if(p===3){if(Gt.isFinderPattern(o))return[m,y];m+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,p--}else p++;o[p]=1,u=!u}throw new Y}parseFoundFinderPattern(t,r,o,a){let u=t.get(a[0]),h=a[0]-1;for(;h>=0&&u!==t.get(h);)h--;h++;const p=a[0]-h,m=this.getDecodeFinderCounters(),y=new Int32Array(m.length);j.arraycopy(m,0,y,1,m.length-1),y[0]=p;const E=this.parseFinderValue(y,Pt.FINDER_PATTERNS);let N=h,k=a[1];return o&&(N=t.getSize()-1-N,k=t.getSize()-1-k),new vr(E,[h,a[1]],N,k,r)}adjustOddEvenCounts(t,r){let o=Ge.sum(new Int32Array(this.getOddCounts())),a=Ge.sum(new Int32Array(this.getEvenCounts())),u=!1,h=!1,p=!1,m=!1;t?(o>12?h=!0:o<4&&(u=!0),a>12?m=!0:a<4&&(p=!0)):(o>11?h=!0:o<5&&(u=!0),a>10?m=!0:a<4&&(p=!0));let y=o+a-r,E=(o&1)===(t?1:0),N=(a&1)===1;if(y===1)if(E){if(N)throw new Y;h=!0}else{if(!N)throw new Y;m=!0}else if(y===-1)if(E){if(N)throw new Y;u=!0}else{if(!N)throw new Y;p=!0}else if(y===0){if(E){if(!N)throw new Y;o<a?(u=!0,m=!0):(h=!0,p=!0)}else if(N)throw new Y}else throw new Y;if(u){if(h)throw new Y;Gt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&Gt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(m)throw new Y;Gt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&Gt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Pt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Pt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Pt.OUTSIDE_GSUM=[0,161,961,2015,2715],Pt.INSIDE_GSUM=[0,336,1036,1516],Pt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Pt.INSIDE_ODD_WIDEST=[2,4,6,8],Pt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Pr extends ct{constructor(t,r){super(),this.readers=[],this.verbose=r===!0;const o=t?t.get($.POSSIBLE_FORMATS):null,a=t&&t.get($.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(ge.EAN_13)||o.includes(ge.UPC_A)||o.includes(ge.EAN_8)||o.includes(ge.UPC_E))&&this.readers.push(new ms(t)),o.includes(ge.CODE_39)&&this.readers.push(new Ct(a)),o.includes(ge.CODE_128)&&this.readers.push(new xe),o.includes(ge.ITF)&&this.readers.push(new Ke),o.includes(ge.RSS_14)&&this.readers.push(new Pt),o.includes(ge.RSS_EXPANDED)&&this.readers.push(new ve(this.verbose))):(this.readers.push(new ms(t)),this.readers.push(new Ct),this.readers.push(new ms(t)),this.readers.push(new xe),this.readers.push(new Ke),this.readers.push(new Pt),this.readers.push(new ve(this.verbose)))}decodeRow(t,r,o){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,o)}catch{}throw new Y}reset(){this.readers.forEach(t=>t.reset())}}class di extends Ze{constructor(t=500,r){super(new Pr(r),t,r)}}class pt{constructor(t,r,o){this.ecCodewords=t,this.ecBlocks=[r],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ot{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class $e{constructor(t,r,o,a,u,h){this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=o,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=u,this.ecBlocks=h;let p=0;const m=h.getECCodewords(),y=h.getECBlocks();for(let E of y)p+=E.getCount()*(E.getDataCodewords()+m);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,r){if(t&1||r&1)throw new W;for(let o of $e.VERSIONS)if(o.symbolSizeRows===t&&o.symbolSizeColumns===r)return o;throw new W}toString(){return""+this.versionNumber}static buildVersions(){return[new $e(1,10,10,8,8,new pt(5,new ot(1,3))),new $e(2,12,12,10,10,new pt(7,new ot(1,5))),new $e(3,14,14,12,12,new pt(10,new ot(1,8))),new $e(4,16,16,14,14,new pt(12,new ot(1,12))),new $e(5,18,18,16,16,new pt(14,new ot(1,18))),new $e(6,20,20,18,18,new pt(18,new ot(1,22))),new $e(7,22,22,20,20,new pt(20,new ot(1,30))),new $e(8,24,24,22,22,new pt(24,new ot(1,36))),new $e(9,26,26,24,24,new pt(28,new ot(1,44))),new $e(10,32,32,14,14,new pt(36,new ot(1,62))),new $e(11,36,36,16,16,new pt(42,new ot(1,86))),new $e(12,40,40,18,18,new pt(48,new ot(1,114))),new $e(13,44,44,20,20,new pt(56,new ot(1,144))),new $e(14,48,48,22,22,new pt(68,new ot(1,174))),new $e(15,52,52,24,24,new pt(42,new ot(2,102))),new $e(16,64,64,14,14,new pt(56,new ot(2,140))),new $e(17,72,72,16,16,new pt(36,new ot(4,92))),new $e(18,80,80,18,18,new pt(48,new ot(4,114))),new $e(19,88,88,20,20,new pt(56,new ot(4,144))),new $e(20,96,96,22,22,new pt(68,new ot(4,174))),new $e(21,104,104,24,24,new pt(56,new ot(6,136))),new $e(22,120,120,18,18,new pt(68,new ot(6,175))),new $e(23,132,132,20,20,new pt(62,new ot(8,163))),new $e(24,144,144,22,22,new pt(62,new ot(8,156),new ot(2,155))),new $e(25,8,18,6,16,new pt(7,new ot(1,5))),new $e(26,8,32,6,14,new pt(11,new ot(1,10))),new $e(27,12,26,10,24,new pt(14,new ot(1,16))),new $e(28,12,36,10,16,new pt(18,new ot(1,22))),new $e(29,16,36,14,16,new pt(24,new ot(1,32))),new $e(30,16,48,14,22,new pt(28,new ot(1,49)))]}}$e.VERSIONS=$e.buildVersions();class it{constructor(t){const r=t.getHeight();if(r<8||r>144||r&1)throw new W;this.version=it.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new ne(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const r=t.getHeight(),o=t.getWidth();return $e.getVersionForDimensions(r,o)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let r=0,o=4,a=0;const u=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let p=!1,m=!1,y=!1,E=!1;do if(o===u&&a===0&&!p)t[r++]=this.readCorner1(u,h)&255,o-=2,a+=2,p=!0;else if(o===u-2&&a===0&&h&3&&!m)t[r++]=this.readCorner2(u,h)&255,o-=2,a+=2,m=!0;else if(o===u+4&&a===2&&!(h&7)&&!y)t[r++]=this.readCorner3(u,h)&255,o-=2,a+=2,y=!0;else if(o===u-2&&a===0&&(h&7)===4&&!E)t[r++]=this.readCorner4(u,h)&255,o-=2,a+=2,E=!0;else{do o<u&&a>=0&&!this.readMappingMatrix.get(a,o)&&(t[r++]=this.readUtah(o,a,u,h)&255),o-=2,a+=2;while(o>=0&&a<h);o+=1,a+=3;do o>=0&&a<h&&!this.readMappingMatrix.get(a,o)&&(t[r++]=this.readUtah(o,a,u,h)&255),o+=2,a-=2;while(o<u&&a>=0);o+=3,a+=1}while(o<u||a<h);if(r!==this.version.getTotalCodewords())throw new W;return t}readModule(t,r,o,a){return t<0&&(t+=o,r+=4-(o+4&7)),r<0&&(r+=a,t+=4-(a+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)}readUtah(t,r,o,a){let u=0;return this.readModule(t-2,r-2,o,a)&&(u|=1),u<<=1,this.readModule(t-2,r-1,o,a)&&(u|=1),u<<=1,this.readModule(t-1,r-2,o,a)&&(u|=1),u<<=1,this.readModule(t-1,r-1,o,a)&&(u|=1),u<<=1,this.readModule(t-1,r,o,a)&&(u|=1),u<<=1,this.readModule(t,r-2,o,a)&&(u|=1),u<<=1,this.readModule(t,r-1,o,a)&&(u|=1),u<<=1,this.readModule(t,r,o,a)&&(u|=1),u}readCorner1(t,r){let o=0;return this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,1,t,r)&&(o|=1),o<<=1,this.readModule(t-1,2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(2,r-1,t,r)&&(o|=1),o<<=1,this.readModule(3,r-1,t,r)&&(o|=1),o}readCorner2(t,r){let o=0;return this.readModule(t-3,0,t,r)&&(o|=1),o<<=1,this.readModule(t-2,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(0,r-4,t,r)&&(o|=1),o<<=1,this.readModule(0,r-3,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o}readCorner3(t,r){let o=0;return this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(0,r-3,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-3,t,r)&&(o|=1),o<<=1,this.readModule(1,r-2,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o}readCorner4(t,r){let o=0;return this.readModule(t-3,0,t,r)&&(o|=1),o<<=1,this.readModule(t-2,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(2,r-1,t,r)&&(o|=1),o<<=1,this.readModule(3,r-1,t,r)&&(o|=1),o}extractDataRegion(t){const r=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new I("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),h=r/a|0,p=o/u|0,m=h*a,y=p*u,E=new ne(y,m);for(let N=0;N<h;++N){const k=N*a;for(let U=0;U<p;++U){const Q=U*u;for(let q=0;q<a;++q){const ie=N*(a+2)+1+q,oe=k+q;for(let Se=0;Se<u;++Se){const Ie=U*(u+2)+1+Se;if(t.get(Ie,ie)){const Ce=Q+Se;E.set(Ce,oe)}}}}}return E}}class xt{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r){const o=r.getECBlocks();let a=0;const u=o.getECBlocks();for(let q of u)a+=q.getCount();const h=new Array(a);let p=0;for(let q of u)for(let ie=0;ie<q.getCount();ie++){const oe=q.getDataCodewords(),Se=o.getECCodewords()+oe;h[p++]=new xt(oe,new Uint8Array(Se))}const y=h[0].codewords.length-o.getECCodewords(),E=y-1;let N=0;for(let q=0;q<E;q++)for(let ie=0;ie<p;ie++)h[ie].codewords[q]=t[N++];const k=r.getVersionNumber()===24,U=k?8:p;for(let q=0;q<U;q++)h[q].codewords[y-1]=t[N++];const Q=h[0].codewords.length;for(let q=y;q<Q;q++)for(let ie=0;ie<p;ie++){const oe=k?(ie+8)%p:ie,Se=k&&oe>7?q-1:q;h[oe].codewords[Se]=t[N++]}if(N!==t.length)throw new I;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class pi{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new I(""+t);let r=0,o=this.bitOffset,a=this.byteOffset;const u=this.bytes;if(o>0){const h=8-o,p=t<h?t:h,m=h-p,y=255>>8-p<<m;r=(u[a]&y)>>m,t-=p,o+=p,o===8&&(o=0,a++)}if(t>0){for(;t>=8;)r=r<<8|u[a]&255,a++,t-=8;if(t>0){const h=8-t,p=255>>h<<h;r=r<<t|(u[a]&p)>>h,o+=t}}return this.bitOffset=o,this.byteOffset=a,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ot;(function(T){T[T.PAD_ENCODE=0]="PAD_ENCODE",T[T.ASCII_ENCODE=1]="ASCII_ENCODE",T[T.C40_ENCODE=2]="C40_ENCODE",T[T.TEXT_ENCODE=3]="TEXT_ENCODE",T[T.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",T[T.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",T[T.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ot||(Ot={}));class On{static decode(t){const r=new pi(t),o=new J,a=new J,u=new Array;let h=Ot.ASCII_ENCODE;do if(h===Ot.ASCII_ENCODE)h=this.decodeAsciiSegment(r,o,a);else{switch(h){case Ot.C40_ENCODE:this.decodeC40Segment(r,o);break;case Ot.TEXT_ENCODE:this.decodeTextSegment(r,o);break;case Ot.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,o);break;case Ot.EDIFACT_ENCODE:this.decodeEdifactSegment(r,o);break;case Ot.BASE256_ENCODE:this.decodeBase256Segment(r,o,u);break;default:throw new W}h=Ot.ASCII_ENCODE}while(h!==Ot.PAD_ENCODE&&r.available()>0);return a.length()>0&&o.append(a.toString()),new Pn(t,o.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(t,r,o){let a=!1;do{let u=t.readBits(8);if(u===0)throw new W;if(u<=128)return a&&(u+=128),r.append(String.fromCharCode(u-1)),Ot.ASCII_ENCODE;if(u===129)return Ot.PAD_ENCODE;if(u<=229){const h=u-130;h<10&&r.append("0"),r.append(""+h)}else switch(u){case 230:return Ot.C40_ENCODE;case 231:return Ot.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),o.insert(0,"");break;case 237:r.append("[)>06"),o.insert(0,"");break;case 238:return Ot.ANSIX12_ENCODE;case 239:return Ot.TEXT_ENCODE;case 240:return Ot.EDIFACT_ENCODE;case 241:break;default:if(u!==254||t.available()!==0)throw new W;break}}while(t.available()>0);return Ot.ASCII_ENCODE}static decodeC40Segment(t,r){let o=!1;const a=[];let u=0;do{if(t.available()===8)return;const h=t.readBits(8);if(h===254)return;this.parseTwoBytes(h,t.readBits(8),a);for(let p=0;p<3;p++){const m=a[p];switch(u){case 0:if(m<3)u=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const y=this.C40_BASIC_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else throw new W;break;case 1:o?(r.append(String.fromCharCode(m+128)),o=!1):r.append(String.fromCharCode(m)),u=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const y=this.C40_SHIFT2_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else switch(m){case 27:r.append("");break;case 30:o=!0;break;default:throw new W}u=0;break;case 3:o?(r.append(String.fromCharCode(m+224)),o=!1):r.append(String.fromCharCode(m+96)),u=0;break;default:throw new W}}}while(t.available()>0)}static decodeTextSegment(t,r){let o=!1,a=[],u=0;do{if(t.available()===8)return;const h=t.readBits(8);if(h===254)return;this.parseTwoBytes(h,t.readBits(8),a);for(let p=0;p<3;p++){const m=a[p];switch(u){case 0:if(m<3)u=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const y=this.TEXT_BASIC_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else throw new W;break;case 1:o?(r.append(String.fromCharCode(m+128)),o=!1):r.append(String.fromCharCode(m)),u=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const y=this.TEXT_SHIFT2_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else switch(m){case 27:r.append("");break;case 30:o=!0;break;default:throw new W}u=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const y=this.TEXT_SHIFT3_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y),u=0}else throw new W;break;default:throw new W}}}while(t.available()>0)}static decodeAnsiX12Segment(t,r){const o=[];do{if(t.available()===8)return;const a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),o);for(let u=0;u<3;u++){const h=o[u];switch(h){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(h<14)r.append(String.fromCharCode(h+44));else if(h<40)r.append(String.fromCharCode(h+51));else throw new W;break}}}while(t.available()>0)}static parseTwoBytes(t,r,o){let a=(t<<8)+r-1,u=Math.floor(a/1600);o[0]=u,a-=u*1600,u=Math.floor(a/40),o[1]=u,o[2]=a-u*40}static decodeEdifactSegment(t,r){do{if(t.available()<=16)return;for(let o=0;o<4;o++){let a=t.readBits(6);if(a===31){const u=8-t.getBitOffset();u!==8&&t.readBits(u);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(t.available()>0)}static decodeBase256Segment(t,r,o){let a=1+t.getByteOffset();const u=this.unrandomize255State(t.readBits(8),a++);let h;if(u===0?h=t.available()/8|0:u<250?h=u:h=250*(u-249)+this.unrandomize255State(t.readBits(8),a++),h<0)throw new W;const p=new Uint8Array(h);for(let m=0;m<h;m++){if(t.available()<8)throw new W;p[m]=this.unrandomize255State(t.readBits(8),a++)}o.push(p);try{r.append(ue.decode(p,fe.ISO88591))}catch(m){throw new Wt("Platform does not support required encoding: "+m.message)}}static unrandomize255State(t,r){const o=149*r%255+1,a=t-o;return a>=0?a:a+256}}On.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],On.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],On.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],On.TEXT_SHIFT2_SET_CHARS=On.C40_SHIFT2_SET_CHARS,On.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ws{constructor(){this.rsDecoder=new Dn(Xe.DATA_MATRIX_FIELD_256)}decode(t){const r=new it(t),o=r.getVersion(),a=r.readCodewords(),u=xt.getDataBlocks(a,o);let h=0;for(let y of u)h+=y.getNumDataCodewords();const p=new Uint8Array(h),m=u.length;for(let y=0;y<m;y++){const E=u[y],N=E.getCodewords(),k=E.getNumDataCodewords();this.correctErrors(N,k);for(let U=0;U<k;U++)p[U*m+y]=N[U]}return On.decode(p)}correctErrors(t,r){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-r)}catch{throw new z}for(let a=0;a<r;a++)t[a]=o[a]}}class ze{constructor(t){this.image=t,this.rectangleDetector=new Zt(this.image)}detect(){const t=this.rectangleDetector.detect();let r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new Y;r=this.shiftToModuleCenter(r);const o=r[0],a=r[1],u=r[2],h=r[3];let p=this.transitionsBetween(o,h)+1,m=this.transitionsBetween(u,h)+1;(p&1)===1&&(p+=1),(m&1)===1&&(m+=1),4*p<7*m&&4*m<7*p&&(p=m=Math.max(p,m));let y=ze.sampleGrid(this.image,o,a,u,h,p,m);return new qt(y,[o,a,u,h])}static shiftPoint(t,r,o){let a=(r.getX()-t.getX())/(o+1),u=(r.getY()-t.getY())/(o+1);return new Te(t.getX()+a,t.getY()+u)}static moveAway(t,r,o){let a=t.getX(),u=t.getY();return a<r?a-=1:a+=1,u<o?u-=1:u+=1,new Te(a,u)}detectSolid1(t){let r=t[0],o=t[1],a=t[3],u=t[2],h=this.transitionsBetween(r,o),p=this.transitionsBetween(o,a),m=this.transitionsBetween(a,u),y=this.transitionsBetween(u,r),E=h,N=[u,r,o,a];return E>p&&(E=p,N[0]=r,N[1]=o,N[2]=a,N[3]=u),E>m&&(E=m,N[0]=o,N[1]=a,N[2]=u,N[3]=r),E>y&&(N[0]=a,N[1]=u,N[2]=r,N[3]=o),N}detectSolid2(t){let r=t[0],o=t[1],a=t[2],u=t[3],h=this.transitionsBetween(r,u),p=ze.shiftPoint(o,a,(h+1)*4),m=ze.shiftPoint(a,o,(h+1)*4),y=this.transitionsBetween(p,r),E=this.transitionsBetween(m,u);return y<E?(t[0]=r,t[1]=o,t[2]=a,t[3]=u):(t[0]=o,t[1]=a,t[2]=u,t[3]=r),t}correctTopRight(t){let r=t[0],o=t[1],a=t[2],u=t[3],h=this.transitionsBetween(r,u),p=this.transitionsBetween(o,u),m=ze.shiftPoint(r,o,(p+1)*4),y=ze.shiftPoint(a,o,(h+1)*4);h=this.transitionsBetween(m,u),p=this.transitionsBetween(y,u);let E=new Te(u.getX()+(a.getX()-o.getX())/(h+1),u.getY()+(a.getY()-o.getY())/(h+1)),N=new Te(u.getX()+(r.getX()-o.getX())/(p+1),u.getY()+(r.getY()-o.getY())/(p+1));if(!this.isValid(E))return this.isValid(N)?N:null;if(!this.isValid(N))return E;let k=this.transitionsBetween(m,E)+this.transitionsBetween(y,E),U=this.transitionsBetween(m,N)+this.transitionsBetween(y,N);return k>U?E:N}shiftToModuleCenter(t){let r=t[0],o=t[1],a=t[2],u=t[3],h=this.transitionsBetween(r,u)+1,p=this.transitionsBetween(a,u)+1,m=ze.shiftPoint(r,o,p*4),y=ze.shiftPoint(a,o,h*4);h=this.transitionsBetween(m,u)+1,p=this.transitionsBetween(y,u)+1,(h&1)===1&&(h+=1),(p&1)===1&&(p+=1);let E=(r.getX()+o.getX()+a.getX()+u.getX())/4,N=(r.getY()+o.getY()+a.getY()+u.getY())/4;r=ze.moveAway(r,E,N),o=ze.moveAway(o,E,N),a=ze.moveAway(a,E,N),u=ze.moveAway(u,E,N);let k,U;return m=ze.shiftPoint(r,o,p*4),m=ze.shiftPoint(m,u,h*4),k=ze.shiftPoint(o,r,p*4),k=ze.shiftPoint(k,a,h*4),y=ze.shiftPoint(a,u,p*4),y=ze.shiftPoint(y,o,h*4),U=ze.shiftPoint(u,a,p*4),U=ze.shiftPoint(U,r,h*4),[m,k,y,U]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,r,o,a,u,h,p){return Gn.getInstance().sampleGrid(t,h,p,.5,.5,h-.5,.5,h-.5,p-.5,.5,p-.5,r.getX(),r.getY(),u.getX(),u.getY(),a.getX(),a.getY(),o.getX(),o.getY())}transitionsBetween(t,r){let o=Math.trunc(t.getX()),a=Math.trunc(t.getY()),u=Math.trunc(r.getX()),h=Math.trunc(r.getY()),p=Math.abs(h-a)>Math.abs(u-o);if(p){let q=o;o=a,a=q,q=u,u=h,h=q}let m=Math.abs(u-o),y=Math.abs(h-a),E=-m/2,N=a<h?1:-1,k=o<u?1:-1,U=0,Q=this.image.get(p?a:o,p?o:a);for(let q=o,ie=a;q!==u;q+=k){let oe=this.image.get(p?ie:q,p?q:ie);if(oe!==Q&&(U++,Q=oe),E+=y,E>0){if(ie===h)break;ie+=N,E-=m}}return U}}class yt{constructor(){this.decoder=new ws}decode(t,r=null){let o,a;if(r!=null&&r.has($.PURE_BARCODE)){const y=yt.extractPureBits(t.getBlackMatrix());o=this.decoder.decode(y),a=yt.NO_POINTS}else{const y=new ze(t.getBlackMatrix()).detect();o=this.decoder.decode(y.getBits()),a=y.getPoints()}const u=o.getRawBytes(),h=new Ae(o.getText(),u,8*u.length,a,ge.DATA_MATRIX,j.currentTimeMillis()),p=o.getByteSegments();p!=null&&h.putMetadata(He.BYTE_SEGMENTS,p);const m=o.getECLevel();return m!=null&&h.putMetadata(He.ERROR_CORRECTION_LEVEL,m),h}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(r==null||o==null)throw new Y;const a=this.moduleSize(r,t);let u=r[1];const h=o[1];let p=r[0];const y=(o[0]-p+1)/a,E=(h-u+1)/a;if(y<=0||E<=0)throw new Y;const N=a/2;u+=N,p+=N;const k=new ne(y,E);for(let U=0;U<E;U++){const Q=u+U*a;for(let q=0;q<y;q++)t.get(p+q*a,Q)&&k.set(q,U)}return k}static moduleSize(t,r){const o=r.getWidth();let a=t[0];const u=t[1];for(;a<o&&r.get(a,u);)a++;if(a===o)throw new Y;const h=a-t[0];if(h===0)throw new Y;return h}}yt.NO_POINTS=[];class ys extends Ze{constructor(t=500){super(new yt,t)}}var qn;(function(T){T[T.L=0]="L",T[T.M=1]="M",T[T.Q=2]="Q",T[T.H=3]="H"})(qn||(qn={}));class nt{constructor(t,r,o){this.value=t,this.stringValue=r,this.bits=o,nt.FOR_BITS.set(o,this),nt.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return nt.L;case"M":return nt.M;case"Q":return nt.Q;case"H":return nt.H;default:throw new S(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof nt))return!1;const r=t;return this.value===r.value}static forBits(t){if(t<0||t>=nt.FOR_BITS.size)throw new I;return nt.FOR_BITS.get(t)}}nt.FOR_BITS=new Map,nt.FOR_VALUE=new Map,nt.L=new nt(qn.L,"L",1),nt.M=new nt(qn.M,"M",0),nt.Q=new nt(qn.Q,"Q",3),nt.H=new nt(qn.H,"H",2);class an{constructor(t){this.errorCorrectionLevel=nt.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,r){return P.bitCount(t^r)}static decodeFormatInformation(t,r){const o=an.doDecodeFormatInformation(t,r);return o!==null?o:an.doDecodeFormatInformation(t^an.FORMAT_INFO_MASK_QR,r^an.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,r){let o=Number.MAX_SAFE_INTEGER,a=0;for(const u of an.FORMAT_INFO_DECODE_LOOKUP){const h=u[0];if(h===t||h===r)return new an(u[1]);let p=an.numBitsDiffering(t,h);p<o&&(a=u[1],o=p),t!==r&&(p=an.numBitsDiffering(r,h),p<o&&(a=u[1],o=p))}return o<=3?new an(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof an))return!1;const r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}an.FORMAT_INFO_MASK_QR=21522,an.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class B{constructor(t,...r){this.ecCodewordsPerBlock=t,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const r=this.ecBlocks;for(const o of r)t+=o.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class R{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class me{constructor(t,r,...o){this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=o;let a=0;const u=o[0].getECCodewordsPerBlock(),h=o[0].getECBlocks();for(const p of h)a+=p.getCount()*(p.getDataCodewords()+u);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new W;try{return this.getVersionForNumber((t-17)/4)}catch{throw new W}}static getVersionForNumber(t){if(t<1||t>40)throw new I;return me.VERSIONS[t-1]}static decodeVersionInformation(t){let r=Number.MAX_SAFE_INTEGER,o=0;for(let a=0;a<me.VERSION_DECODE_INFO.length;a++){const u=me.VERSION_DECODE_INFO[a];if(u===t)return me.getVersionForNumber(a+7);const h=an.numBitsDiffering(t,u);h<r&&(o=a+7,r=h)}return r<=3?me.getVersionForNumber(o):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),r=new ne(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);const o=this.alignmentPatternCenters.length;for(let a=0;a<o;a++){const u=this.alignmentPatternCenters[a]-2;for(let h=0;h<o;h++)a===0&&(h===0||h===o-1)||a===o-1&&h===0||r.setRegion(this.alignmentPatternCenters[h]-2,u,5,5)}return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r}toString(){return""+this.versionNumber}}me.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),me.VERSIONS=[new me(1,new Int32Array(0),new B(7,new R(1,19)),new B(10,new R(1,16)),new B(13,new R(1,13)),new B(17,new R(1,9))),new me(2,Int32Array.from([6,18]),new B(10,new R(1,34)),new B(16,new R(1,28)),new B(22,new R(1,22)),new B(28,new R(1,16))),new me(3,Int32Array.from([6,22]),new B(15,new R(1,55)),new B(26,new R(1,44)),new B(18,new R(2,17)),new B(22,new R(2,13))),new me(4,Int32Array.from([6,26]),new B(20,new R(1,80)),new B(18,new R(2,32)),new B(26,new R(2,24)),new B(16,new R(4,9))),new me(5,Int32Array.from([6,30]),new B(26,new R(1,108)),new B(24,new R(2,43)),new B(18,new R(2,15),new R(2,16)),new B(22,new R(2,11),new R(2,12))),new me(6,Int32Array.from([6,34]),new B(18,new R(2,68)),new B(16,new R(4,27)),new B(24,new R(4,19)),new B(28,new R(4,15))),new me(7,Int32Array.from([6,22,38]),new B(20,new R(2,78)),new B(18,new R(4,31)),new B(18,new R(2,14),new R(4,15)),new B(26,new R(4,13),new R(1,14))),new me(8,Int32Array.from([6,24,42]),new B(24,new R(2,97)),new B(22,new R(2,38),new R(2,39)),new B(22,new R(4,18),new R(2,19)),new B(26,new R(4,14),new R(2,15))),new me(9,Int32Array.from([6,26,46]),new B(30,new R(2,116)),new B(22,new R(3,36),new R(2,37)),new B(20,new R(4,16),new R(4,17)),new B(24,new R(4,12),new R(4,13))),new me(10,Int32Array.from([6,28,50]),new B(18,new R(2,68),new R(2,69)),new B(26,new R(4,43),new R(1,44)),new B(24,new R(6,19),new R(2,20)),new B(28,new R(6,15),new R(2,16))),new me(11,Int32Array.from([6,30,54]),new B(20,new R(4,81)),new B(30,new R(1,50),new R(4,51)),new B(28,new R(4,22),new R(4,23)),new B(24,new R(3,12),new R(8,13))),new me(12,Int32Array.from([6,32,58]),new B(24,new R(2,92),new R(2,93)),new B(22,new R(6,36),new R(2,37)),new B(26,new R(4,20),new R(6,21)),new B(28,new R(7,14),new R(4,15))),new me(13,Int32Array.from([6,34,62]),new B(26,new R(4,107)),new B(22,new R(8,37),new R(1,38)),new B(24,new R(8,20),new R(4,21)),new B(22,new R(12,11),new R(4,12))),new me(14,Int32Array.from([6,26,46,66]),new B(30,new R(3,115),new R(1,116)),new B(24,new R(4,40),new R(5,41)),new B(20,new R(11,16),new R(5,17)),new B(24,new R(11,12),new R(5,13))),new me(15,Int32Array.from([6,26,48,70]),new B(22,new R(5,87),new R(1,88)),new B(24,new R(5,41),new R(5,42)),new B(30,new R(5,24),new R(7,25)),new B(24,new R(11,12),new R(7,13))),new me(16,Int32Array.from([6,26,50,74]),new B(24,new R(5,98),new R(1,99)),new B(28,new R(7,45),new R(3,46)),new B(24,new R(15,19),new R(2,20)),new B(30,new R(3,15),new R(13,16))),new me(17,Int32Array.from([6,30,54,78]),new B(28,new R(1,107),new R(5,108)),new B(28,new R(10,46),new R(1,47)),new B(28,new R(1,22),new R(15,23)),new B(28,new R(2,14),new R(17,15))),new me(18,Int32Array.from([6,30,56,82]),new B(30,new R(5,120),new R(1,121)),new B(26,new R(9,43),new R(4,44)),new B(28,new R(17,22),new R(1,23)),new B(28,new R(2,14),new R(19,15))),new me(19,Int32Array.from([6,30,58,86]),new B(28,new R(3,113),new R(4,114)),new B(26,new R(3,44),new R(11,45)),new B(26,new R(17,21),new R(4,22)),new B(26,new R(9,13),new R(16,14))),new me(20,Int32Array.from([6,34,62,90]),new B(28,new R(3,107),new R(5,108)),new B(26,new R(3,41),new R(13,42)),new B(30,new R(15,24),new R(5,25)),new B(28,new R(15,15),new R(10,16))),new me(21,Int32Array.from([6,28,50,72,94]),new B(28,new R(4,116),new R(4,117)),new B(26,new R(17,42)),new B(28,new R(17,22),new R(6,23)),new B(30,new R(19,16),new R(6,17))),new me(22,Int32Array.from([6,26,50,74,98]),new B(28,new R(2,111),new R(7,112)),new B(28,new R(17,46)),new B(30,new R(7,24),new R(16,25)),new B(24,new R(34,13))),new me(23,Int32Array.from([6,30,54,78,102]),new B(30,new R(4,121),new R(5,122)),new B(28,new R(4,47),new R(14,48)),new B(30,new R(11,24),new R(14,25)),new B(30,new R(16,15),new R(14,16))),new me(24,Int32Array.from([6,28,54,80,106]),new B(30,new R(6,117),new R(4,118)),new B(28,new R(6,45),new R(14,46)),new B(30,new R(11,24),new R(16,25)),new B(30,new R(30,16),new R(2,17))),new me(25,Int32Array.from([6,32,58,84,110]),new B(26,new R(8,106),new R(4,107)),new B(28,new R(8,47),new R(13,48)),new B(30,new R(7,24),new R(22,25)),new B(30,new R(22,15),new R(13,16))),new me(26,Int32Array.from([6,30,58,86,114]),new B(28,new R(10,114),new R(2,115)),new B(28,new R(19,46),new R(4,47)),new B(28,new R(28,22),new R(6,23)),new B(30,new R(33,16),new R(4,17))),new me(27,Int32Array.from([6,34,62,90,118]),new B(30,new R(8,122),new R(4,123)),new B(28,new R(22,45),new R(3,46)),new B(30,new R(8,23),new R(26,24)),new B(30,new R(12,15),new R(28,16))),new me(28,Int32Array.from([6,26,50,74,98,122]),new B(30,new R(3,117),new R(10,118)),new B(28,new R(3,45),new R(23,46)),new B(30,new R(4,24),new R(31,25)),new B(30,new R(11,15),new R(31,16))),new me(29,Int32Array.from([6,30,54,78,102,126]),new B(30,new R(7,116),new R(7,117)),new B(28,new R(21,45),new R(7,46)),new B(30,new R(1,23),new R(37,24)),new B(30,new R(19,15),new R(26,16))),new me(30,Int32Array.from([6,26,52,78,104,130]),new B(30,new R(5,115),new R(10,116)),new B(28,new R(19,47),new R(10,48)),new B(30,new R(15,24),new R(25,25)),new B(30,new R(23,15),new R(25,16))),new me(31,Int32Array.from([6,30,56,82,108,134]),new B(30,new R(13,115),new R(3,116)),new B(28,new R(2,46),new R(29,47)),new B(30,new R(42,24),new R(1,25)),new B(30,new R(23,15),new R(28,16))),new me(32,Int32Array.from([6,34,60,86,112,138]),new B(30,new R(17,115)),new B(28,new R(10,46),new R(23,47)),new B(30,new R(10,24),new R(35,25)),new B(30,new R(19,15),new R(35,16))),new me(33,Int32Array.from([6,30,58,86,114,142]),new B(30,new R(17,115),new R(1,116)),new B(28,new R(14,46),new R(21,47)),new B(30,new R(29,24),new R(19,25)),new B(30,new R(11,15),new R(46,16))),new me(34,Int32Array.from([6,34,62,90,118,146]),new B(30,new R(13,115),new R(6,116)),new B(28,new R(14,46),new R(23,47)),new B(30,new R(44,24),new R(7,25)),new B(30,new R(59,16),new R(1,17))),new me(35,Int32Array.from([6,30,54,78,102,126,150]),new B(30,new R(12,121),new R(7,122)),new B(28,new R(12,47),new R(26,48)),new B(30,new R(39,24),new R(14,25)),new B(30,new R(22,15),new R(41,16))),new me(36,Int32Array.from([6,24,50,76,102,128,154]),new B(30,new R(6,121),new R(14,122)),new B(28,new R(6,47),new R(34,48)),new B(30,new R(46,24),new R(10,25)),new B(30,new R(2,15),new R(64,16))),new me(37,Int32Array.from([6,28,54,80,106,132,158]),new B(30,new R(17,122),new R(4,123)),new B(28,new R(29,46),new R(14,47)),new B(30,new R(49,24),new R(10,25)),new B(30,new R(24,15),new R(46,16))),new me(38,Int32Array.from([6,32,58,84,110,136,162]),new B(30,new R(4,122),new R(18,123)),new B(28,new R(13,46),new R(32,47)),new B(30,new R(48,24),new R(14,25)),new B(30,new R(42,15),new R(32,16))),new me(39,Int32Array.from([6,26,54,82,110,138,166]),new B(30,new R(20,117),new R(4,118)),new B(28,new R(40,47),new R(7,48)),new B(30,new R(43,24),new R(22,25)),new B(30,new R(10,15),new R(67,16))),new me(40,Int32Array.from([6,30,58,86,114,142,170]),new B(30,new R(19,118),new R(6,119)),new B(28,new R(18,47),new R(31,48)),new B(30,new R(34,24),new R(34,25)),new B(30,new R(20,15),new R(61,16)))];var qe;(function(T){T[T.DATA_MASK_000=0]="DATA_MASK_000",T[T.DATA_MASK_001=1]="DATA_MASK_001",T[T.DATA_MASK_010=2]="DATA_MASK_010",T[T.DATA_MASK_011=3]="DATA_MASK_011",T[T.DATA_MASK_100=4]="DATA_MASK_100",T[T.DATA_MASK_101=5]="DATA_MASK_101",T[T.DATA_MASK_110=6]="DATA_MASK_110",T[T.DATA_MASK_111=7]="DATA_MASK_111"})(qe||(qe={}));class mt{constructor(t,r){this.value=t,this.isMasked=r}unmaskBitMatrix(t,r){for(let o=0;o<r;o++)for(let a=0;a<r;a++)this.isMasked(o,a)&&t.flip(a,o)}}mt.values=new Map([[qe.DATA_MASK_000,new mt(qe.DATA_MASK_000,(T,t)=>(T+t&1)===0)],[qe.DATA_MASK_001,new mt(qe.DATA_MASK_001,(T,t)=>(T&1)===0)],[qe.DATA_MASK_010,new mt(qe.DATA_MASK_010,(T,t)=>t%3===0)],[qe.DATA_MASK_011,new mt(qe.DATA_MASK_011,(T,t)=>(T+t)%3===0)],[qe.DATA_MASK_100,new mt(qe.DATA_MASK_100,(T,t)=>(Math.floor(T/2)+Math.floor(t/3)&1)===0)],[qe.DATA_MASK_101,new mt(qe.DATA_MASK_101,(T,t)=>T*t%6===0)],[qe.DATA_MASK_110,new mt(qe.DATA_MASK_110,(T,t)=>T*t%6<3)],[qe.DATA_MASK_111,new mt(qe.DATA_MASK_111,(T,t)=>(T+t+T*t%3&1)===0)]]);class wr{constructor(t){const r=t.getHeight();if(r<21||(r&3)!==1)throw new W;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let u=0;u<6;u++)t=this.copyBit(u,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let u=5;u>=0;u--)t=this.copyBit(8,u,t);const r=this.bitMatrix.getHeight();let o=0;const a=r-7;for(let u=r-1;u>=a;u--)o=this.copyBit(8,u,o);for(let u=r-8;u<r;u++)o=this.copyBit(u,8,o);if(this.parsedFormatInfo=an.decodeFormatInformation(t,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new W}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return me.getVersionForNumber(r);let o=0;const a=t-11;for(let h=5;h>=0;h--)for(let p=t-9;p>=a;p--)o=this.copyBit(p,h,o);let u=me.decodeVersionInformation(o);if(u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;o=0;for(let h=5;h>=0;h--)for(let p=t-9;p>=a;p--)o=this.copyBit(h,p,o);if(u=me.decodeVersionInformation(o),u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;throw new W}copyBit(t,r,o){return(this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r))?o<<1|1:o<<1}readCodewords(){const t=this.readFormatInformation(),r=this.readVersion(),o=mt.values.get(t.getDataMask()),a=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,a);const u=r.buildFunctionPattern();let h=!0;const p=new Uint8Array(r.getTotalCodewords());let m=0,y=0,E=0;for(let N=a-1;N>0;N-=2){N===6&&N--;for(let k=0;k<a;k++){const U=h?a-1-k:k;for(let Q=0;Q<2;Q++)u.get(N-Q,U)||(E++,y<<=1,this.bitMatrix.get(N-Q,U)&&(y|=1),E===8&&(p[m++]=y,E=0,y=0))}h=!h}if(m!==r.getTotalCodewords())throw new W;return p}remask(){if(this.parsedFormatInfo===null)return;const t=mt.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let r=0,o=t.getWidth();r<o;r++)for(let a=r+1,u=t.getHeight();a<u;a++)t.get(r,a)!==t.get(a,r)&&(t.flip(a,r),t.flip(r,a))}}class ar{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r,o){if(t.length!==r.getTotalCodewords())throw new I;const a=r.getECBlocksForLevel(o);let u=0;const h=a.getECBlocks();for(const Q of h)u+=Q.getCount();const p=new Array(u);let m=0;for(const Q of h)for(let q=0;q<Q.getCount();q++){const ie=Q.getDataCodewords(),oe=a.getECCodewordsPerBlock()+ie;p[m++]=new ar(ie,new Uint8Array(oe))}const y=p[0].codewords.length;let E=p.length-1;for(;E>=0&&p[E].codewords.length!==y;)E--;E++;const N=y-a.getECCodewordsPerBlock();let k=0;for(let Q=0;Q<N;Q++)for(let q=0;q<m;q++)p[q].codewords[Q]=t[k++];for(let Q=E;Q<m;Q++)p[Q].codewords[N]=t[k++];const U=p[0].codewords.length;for(let Q=N;Q<U;Q++)for(let q=0;q<m;q++){const ie=q<E?Q:Q+1;p[q].codewords[ie]=t[k++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ln;(function(T){T[T.TERMINATOR=0]="TERMINATOR",T[T.NUMERIC=1]="NUMERIC",T[T.ALPHANUMERIC=2]="ALPHANUMERIC",T[T.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",T[T.BYTE=4]="BYTE",T[T.ECI=5]="ECI",T[T.KANJI=6]="KANJI",T[T.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",T[T.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",T[T.HANZI=9]="HANZI"})(ln||(ln={}));class Pe{constructor(t,r,o,a){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=o,this.bits=a,Pe.FOR_BITS.set(a,this),Pe.FOR_VALUE.set(t,this)}static forBits(t){const r=Pe.FOR_BITS.get(t);if(r===void 0)throw new I;return r}getCharacterCountBits(t){const r=t.getVersionNumber();let o;return r<=9?o=0:r<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Pe))return!1;const r=t;return this.value===r.value}toString(){return this.stringValue}}Pe.FOR_BITS=new Map,Pe.FOR_VALUE=new Map,Pe.TERMINATOR=new Pe(ln.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Pe.NUMERIC=new Pe(ln.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Pe.ALPHANUMERIC=new Pe(ln.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Pe.STRUCTURED_APPEND=new Pe(ln.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Pe.BYTE=new Pe(ln.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Pe.ECI=new Pe(ln.ECI,"ECI",Int32Array.from([0,0,0]),7),Pe.KANJI=new Pe(ln.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Pe.FNC1_FIRST_POSITION=new Pe(ln.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Pe.FNC1_SECOND_POSITION=new Pe(ln.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Pe.HANZI=new Pe(ln.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class ht{static decode(t,r,o,a){const u=new pi(t);let h=new J;const p=new Array;let m=-1,y=-1;try{let E=null,N=!1,k;do{if(u.available()<4)k=Pe.TERMINATOR;else{const U=u.readBits(4);k=Pe.forBits(U)}switch(k){case Pe.TERMINATOR:break;case Pe.FNC1_FIRST_POSITION:case Pe.FNC1_SECOND_POSITION:N=!0;break;case Pe.STRUCTURED_APPEND:if(u.available()<16)throw new W;m=u.readBits(8),y=u.readBits(8);break;case Pe.ECI:const U=ht.parseECIValue(u);if(E=X.getCharacterSetECIByValue(U),E===null)throw new W;break;case Pe.HANZI:const Q=u.readBits(4),q=u.readBits(k.getCharacterCountBits(r));Q===ht.GB2312_SUBSET&&ht.decodeHanziSegment(u,h,q);break;default:const ie=u.readBits(k.getCharacterCountBits(r));switch(k){case Pe.NUMERIC:ht.decodeNumericSegment(u,h,ie);break;case Pe.ALPHANUMERIC:ht.decodeAlphanumericSegment(u,h,ie,N);break;case Pe.BYTE:ht.decodeByteSegment(u,h,ie,E,p,a);break;case Pe.KANJI:ht.decodeKanjiSegment(u,h,ie);break;default:throw new W}break}}while(k!==Pe.TERMINATOR)}catch{throw new W}return new Pn(t,h.toString(),p.length===0?null:p,o===null?null:o.toString(),m,y)}static decodeHanziSegment(t,r,o){if(o*13>t.available())throw new W;const a=new Uint8Array(2*o);let u=0;for(;o>0;){const h=t.readBits(13);let p=h/96<<8&4294967295|h%96;p<959?p+=41377:p+=42657,a[u]=p>>8&255,a[u+1]=p&255,u+=2,o--}try{r.append(ue.decode(a,fe.GB2312))}catch(h){throw new W(h)}}static decodeKanjiSegment(t,r,o){if(o*13>t.available())throw new W;const a=new Uint8Array(2*o);let u=0;for(;o>0;){const h=t.readBits(13);let p=h/192<<8&4294967295|h%192;p<7936?p+=33088:p+=49472,a[u]=p>>8,a[u+1]=p,u+=2,o--}try{r.append(ue.decode(a,fe.SHIFT_JIS))}catch(h){throw new W(h)}}static decodeByteSegment(t,r,o,a,u,h){if(8*o>t.available())throw new W;const p=new Uint8Array(o);for(let y=0;y<o;y++)p[y]=t.readBits(8);let m;a===null?m=fe.guessEncoding(p,h):m=a.getName();try{r.append(ue.decode(p,m))}catch(y){throw new W(y)}u.push(p)}static toAlphaNumericChar(t){if(t>=ht.ALPHANUMERIC_CHARS.length)throw new W;return ht.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,r,o,a){const u=r.length();for(;o>1;){if(t.available()<11)throw new W;const h=t.readBits(11);r.append(ht.toAlphaNumericChar(Math.floor(h/45))),r.append(ht.toAlphaNumericChar(h%45)),o-=2}if(o===1){if(t.available()<6)throw new W;r.append(ht.toAlphaNumericChar(t.readBits(6)))}if(a)for(let h=u;h<r.length();h++)r.charAt(h)==="%"&&(h<r.length()-1&&r.charAt(h+1)==="%"?r.deleteCharAt(h+1):r.setCharAt(h,""))}static decodeNumericSegment(t,r,o){for(;o>=3;){if(t.available()<10)throw new W;const a=t.readBits(10);if(a>=1e3)throw new W;r.append(ht.toAlphaNumericChar(Math.floor(a/100))),r.append(ht.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(ht.toAlphaNumericChar(a%10)),o-=3}if(o===2){if(t.available()<7)throw new W;const a=t.readBits(7);if(a>=100)throw new W;r.append(ht.toAlphaNumericChar(Math.floor(a/10))),r.append(ht.toAlphaNumericChar(a%10))}else if(o===1){if(t.available()<4)throw new W;const a=t.readBits(4);if(a>=10)throw new W;r.append(ht.toAlphaNumericChar(a))}}static parseECIValue(t){const r=t.readBits(8);if(!(r&128))return r&127;if((r&192)===128){const o=t.readBits(8);return(r&63)<<8&4294967295|o}if((r&224)===192){const o=t.readBits(16);return(r&31)<<16&4294967295|o}throw new W}}ht.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",ht.GB2312_SUBSET=1;class Sn{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const r=t[0];t[0]=t[2],t[2]=r}}class yr{constructor(){this.rsDecoder=new Dn(Xe.QR_CODE_FIELD_256)}decodeBooleanArray(t,r){return this.decodeBitMatrix(ne.parseFromBooleanArray(t),r)}decodeBitMatrix(t,r){const o=new wr(t);let a=null;try{return this.decodeBitMatrixParser(o,r)}catch(u){a=u}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const u=this.decodeBitMatrixParser(o,r);return u.setOther(new Sn(!0)),u}catch(u){throw a!==null?a:u}}decodeBitMatrixParser(t,r){const o=t.readVersion(),a=t.readFormatInformation().getErrorCorrectionLevel(),u=t.readCodewords(),h=ar.getDataBlocks(u,o,a);let p=0;for(const E of h)p+=E.getNumDataCodewords();const m=new Uint8Array(p);let y=0;for(const E of h){const N=E.getCodewords(),k=E.getNumDataCodewords();this.correctErrors(N,k);for(let U=0;U<k;U++)m[y++]=N[U]}return ht.decode(m,o,a,r)}correctErrors(t,r){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-r)}catch{throw new z}for(let a=0;a<r;a++)t[a]=o[a]}}class _r extends Te{constructor(t,r,o){super(t,r),this.estimatedModuleSize=o}aboutEquals(t,r,o){if(Math.abs(r-this.getY())<=t&&Math.abs(o-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,r,o){const a=(this.getX()+r)/2,u=(this.getY()+t)/2,h=(this.estimatedModuleSize+o)/2;return new _r(a,u,h)}}class Cr{constructor(t,r,o,a,u,h,p){this.image=t,this.startX=r,this.startY=o,this.width=a,this.height=u,this.moduleSize=h,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,r=this.height,o=this.width,a=t+o,u=this.startY+r/2,h=new Int32Array(3),p=this.image;for(let m=0;m<r;m++){const y=u+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));h[0]=0,h[1]=0,h[2]=0;let E=t;for(;E<a&&!p.get(E,y);)E++;let N=0;for(;E<a;){if(p.get(E,y))if(N===1)h[1]++;else if(N===2){if(this.foundPatternCross(h)){const k=this.handlePossibleCenter(h,y,E);if(k!==null)return k}h[0]=h[2],h[1]=1,h[2]=0,N=1}else h[++N]++;else N===1&&N++,h[N]++;E++}if(this.foundPatternCross(h)){const k=this.handlePossibleCenter(h,y,a);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Y}static centerFromEnd(t,r){return r-t[2]-t[1]/2}foundPatternCross(t){const r=this.moduleSize,o=r/2;for(let a=0;a<3;a++)if(Math.abs(r-t[a])>=o)return!1;return!0}crossCheckVertical(t,r,o,a){const u=this.image,h=u.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let m=t;for(;m>=0&&u.get(r,m)&&p[1]<=o;)p[1]++,m--;if(m<0||p[1]>o)return NaN;for(;m>=0&&!u.get(r,m)&&p[0]<=o;)p[0]++,m--;if(p[0]>o)return NaN;for(m=t+1;m<h&&u.get(r,m)&&p[1]<=o;)p[1]++,m++;if(m===h||p[1]>o)return NaN;for(;m<h&&!u.get(r,m)&&p[2]<=o;)p[2]++,m++;if(p[2]>o)return NaN;const y=p[0]+p[1]+p[2];return 5*Math.abs(y-a)>=2*a?NaN:this.foundPatternCross(p)?Cr.centerFromEnd(p,m):NaN}handlePossibleCenter(t,r,o){const a=t[0]+t[1]+t[2],u=Cr.centerFromEnd(t,o),h=this.crossCheckVertical(r,u,2*t[1],a);if(!isNaN(h)){const p=(t[0]+t[1]+t[2])/3;for(const y of this.possibleCenters)if(y.aboutEquals(p,h,u))return y.combineEstimate(h,u,p);const m=new _r(u,h,p);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class lr extends Te{constructor(t,r,o,a){super(t,r),this.estimatedModuleSize=o,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,r,o){if(Math.abs(r-this.getY())<=t&&Math.abs(o-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,r,o){const a=this.count+1,u=(this.count*this.getX()+r)/a,h=(this.count*this.getY()+t)/a,p=(this.count*this.estimatedModuleSize+o)/a;return new lr(u,h,p,a)}}class Qr{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class ft{constructor(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const r=t!=null&&t.get($.TRY_HARDER)!==void 0,o=t!=null&&t.get($.PURE_BARCODE)!==void 0,a=this.image,u=a.getHeight(),h=a.getWidth();let p=Math.floor(3*u/(4*ft.MAX_MODULES));(p<ft.MIN_SKIP||r)&&(p=ft.MIN_SKIP);let m=!1;const y=new Int32Array(5);for(let N=p-1;N<u&&!m;N+=p){y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0;let k=0;for(let U=0;U<h;U++)if(a.get(U,N))(k&1)===1&&k++,y[k]++;else if(k&1)y[k]++;else if(k===4)if(ft.foundPatternCross(y)){if(this.handlePossibleCenter(y,N,U,o)===!0)if(p=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const q=this.findRowSkip();q>y[2]&&(N+=q-y[2]-p,U=h-1)}else{y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,k=3;continue}k=0,y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0}else y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,k=3;else y[++k]++;ft.foundPatternCross(y)&&this.handlePossibleCenter(y,N,h,o)===!0&&(p=y[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return Te.orderBestPatterns(E),new Qr(E)}static centerFromEnd(t,r){return r-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let r=0;for(let u=0;u<5;u++){const h=t[u];if(h===0)return!1;r+=h}if(r<7)return!1;const o=r/7,a=o/2;return Math.abs(o-t[0])<a&&Math.abs(o-t[1])<a&&Math.abs(3*o-t[2])<3*a&&Math.abs(o-t[3])<a&&Math.abs(o-t[4])<a}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,r,o,a){const u=this.getCrossCheckStateCount();let h=0;const p=this.image;for(;t>=h&&r>=h&&p.get(r-h,t-h);)u[2]++,h++;if(t<h||r<h)return!1;for(;t>=h&&r>=h&&!p.get(r-h,t-h)&&u[1]<=o;)u[1]++,h++;if(t<h||r<h||u[1]>o)return!1;for(;t>=h&&r>=h&&p.get(r-h,t-h)&&u[0]<=o;)u[0]++,h++;if(u[0]>o)return!1;const m=p.getHeight(),y=p.getWidth();for(h=1;t+h<m&&r+h<y&&p.get(r+h,t+h);)u[2]++,h++;if(t+h>=m||r+h>=y)return!1;for(;t+h<m&&r+h<y&&!p.get(r+h,t+h)&&u[3]<o;)u[3]++,h++;if(t+h>=m||r+h>=y||u[3]>=o)return!1;for(;t+h<m&&r+h<y&&p.get(r+h,t+h)&&u[4]<o;)u[4]++,h++;if(u[4]>=o)return!1;const E=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(E-a)<2*a&&ft.foundPatternCross(u)}crossCheckVertical(t,r,o,a){const u=this.image,h=u.getHeight(),p=this.getCrossCheckStateCount();let m=t;for(;m>=0&&u.get(r,m);)p[2]++,m--;if(m<0)return NaN;for(;m>=0&&!u.get(r,m)&&p[1]<=o;)p[1]++,m--;if(m<0||p[1]>o)return NaN;for(;m>=0&&u.get(r,m)&&p[0]<=o;)p[0]++,m--;if(p[0]>o)return NaN;for(m=t+1;m<h&&u.get(r,m);)p[2]++,m++;if(m===h)return NaN;for(;m<h&&!u.get(r,m)&&p[3]<o;)p[3]++,m++;if(m===h||p[3]>=o)return NaN;for(;m<h&&u.get(r,m)&&p[4]<o;)p[4]++,m++;if(p[4]>=o)return NaN;const y=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(y-a)>=2*a?NaN:ft.foundPatternCross(p)?ft.centerFromEnd(p,m):NaN}crossCheckHorizontal(t,r,o,a){const u=this.image,h=u.getWidth(),p=this.getCrossCheckStateCount();let m=t;for(;m>=0&&u.get(m,r);)p[2]++,m--;if(m<0)return NaN;for(;m>=0&&!u.get(m,r)&&p[1]<=o;)p[1]++,m--;if(m<0||p[1]>o)return NaN;for(;m>=0&&u.get(m,r)&&p[0]<=o;)p[0]++,m--;if(p[0]>o)return NaN;for(m=t+1;m<h&&u.get(m,r);)p[2]++,m++;if(m===h)return NaN;for(;m<h&&!u.get(m,r)&&p[3]<o;)p[3]++,m++;if(m===h||p[3]>=o)return NaN;for(;m<h&&u.get(m,r)&&p[4]<o;)p[4]++,m++;if(p[4]>=o)return NaN;const y=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(y-a)>=a?NaN:ft.foundPatternCross(p)?ft.centerFromEnd(p,m):NaN}handlePossibleCenter(t,r,o,a){const u=t[0]+t[1]+t[2]+t[3]+t[4];let h=ft.centerFromEnd(t,o),p=this.crossCheckVertical(r,Math.floor(h),t[2],u);if(!isNaN(p)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(p),t[2],u),!isNaN(h)&&(!a||this.crossCheckDiagonal(Math.floor(p),Math.floor(h),t[2],u)))){const m=u/7;let y=!1;const E=this.possibleCenters;for(let N=0,k=E.length;N<k;N++){const U=E[N];if(U.aboutEquals(m,p,h)){E[N]=U.combineEstimate(p,h,m),y=!0;break}}if(!y){const N=new lr(h,p,m);E.push(N),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(N)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const o of this.possibleCenters)if(o.getCount()>=ft.CENTER_QUORUM)if(r==null)r=o;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-o.getX())-Math.abs(r.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,r=0;const o=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=ft.CENTER_QUORUM&&(t++,r+=h.getEstimatedModuleSize());if(t<3)return!1;const a=r/o;let u=0;for(const h of this.possibleCenters)u+=Math.abs(h.getEstimatedModuleSize()-a);return u<=.05*r}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new Y;const r=this.possibleCenters;let o;if(t>3){let a=0,u=0;for(const m of this.possibleCenters){const y=m.getEstimatedModuleSize();a+=y,u+=y*y}o=a/t;let h=Math.sqrt(u/t-o*o);r.sort((m,y)=>{const E=Math.abs(y.getEstimatedModuleSize()-o),N=Math.abs(m.getEstimatedModuleSize()-o);return E<N?-1:E>N?1:0});const p=Math.max(.2*o,h);for(let m=0;m<r.length&&r.length>3;m++){const y=r[m];Math.abs(y.getEstimatedModuleSize()-o)>p&&(r.splice(m,1),m--)}}if(r.length>3){let a=0;for(const u of r)a+=u.getEstimatedModuleSize();o=a/r.length,r.sort((u,h)=>{if(h.getCount()===u.getCount()){const p=Math.abs(h.getEstimatedModuleSize()-o),m=Math.abs(u.getEstimatedModuleSize()-o);return p<m?1:p>m?-1:0}else return h.getCount()-u.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}ft.CENTER_QUORUM=2,ft.MIN_SKIP=3,ft.MAX_MODULES=57;class We{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get($.NEED_RESULT_POINT_CALLBACK);const o=new ft(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(o)}processFinderPatternInfo(t){const r=t.getTopLeft(),o=t.getTopRight(),a=t.getBottomLeft(),u=this.calculateModuleSize(r,o,a);if(u<1)throw new Y("No pattern found in proccess finder.");const h=We.computeDimension(r,o,a,u),p=me.getProvisionalVersionForDimension(h),m=p.getDimensionForVersion()-7;let y=null;if(p.getAlignmentPatternCenters().length>0){const U=o.getX()-r.getX()+a.getX(),Q=o.getY()-r.getY()+a.getY(),q=1-3/m,ie=Math.floor(r.getX()+q*(U-r.getX())),oe=Math.floor(r.getY()+q*(Q-r.getY()));for(let Se=4;Se<=16;Se<<=1)try{y=this.findAlignmentInRegion(u,ie,oe,Se);break}catch(Ie){if(!(Ie instanceof Y))throw Ie}}const E=We.createTransform(r,o,a,y,h),N=We.sampleGrid(this.image,E,h);let k;return y===null?k=[a,r,o]:k=[a,r,o,y],new qt(N,k)}static createTransform(t,r,o,a,u){const h=u-3.5;let p,m,y,E;return a!==null?(p=a.getX(),m=a.getY(),y=h-3,E=y):(p=r.getX()-t.getX()+o.getX(),m=r.getY()-t.getY()+o.getY(),y=h,E=h),bt.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,y,E,3.5,h,t.getX(),t.getY(),r.getX(),r.getY(),p,m,o.getX(),o.getY())}static sampleGrid(t,r,o){return Gn.getInstance().sampleGridWithTransform(t,o,o,r)}static computeDimension(t,r,o,a){const u=Ge.round(Te.distance(t,r)/a),h=Ge.round(Te.distance(t,o)/a);let p=Math.floor((u+h)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new Y("Dimensions could be not found.")}return p}calculateModuleSize(t,r,o){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,o))/2}calculateModuleSizeOneWay(t,r){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(o)?a/7:isNaN(a)?o/7:(o+a)/14}sizeOfBlackWhiteBlackRunBothWays(t,r,o,a){let u=this.sizeOfBlackWhiteBlackRun(t,r,o,a),h=1,p=t-(o-t);p<0?(h=t/(t-p),p=0):p>=this.image.getWidth()&&(h=(this.image.getWidth()-1-t)/(p-t),p=this.image.getWidth()-1);let m=Math.floor(r-(a-r)*h);return h=1,m<0?(h=r/(r-m),m=0):m>=this.image.getHeight()&&(h=(this.image.getHeight()-1-r)/(m-r),m=this.image.getHeight()-1),p=Math.floor(t+(p-t)*h),u+=this.sizeOfBlackWhiteBlackRun(t,r,p,m),u-1}sizeOfBlackWhiteBlackRun(t,r,o,a){const u=Math.abs(a-r)>Math.abs(o-t);if(u){let U=t;t=r,r=U,U=o,o=a,a=U}const h=Math.abs(o-t),p=Math.abs(a-r);let m=-h/2;const y=t<o?1:-1,E=r<a?1:-1;let N=0;const k=o+y;for(let U=t,Q=r;U!==k;U+=y){const q=u?Q:U,ie=u?U:Q;if(N===1===this.image.get(q,ie)){if(N===2)return Ge.distance(U,Q,t,r);N++}if(m+=p,m>0){if(Q===a)break;Q+=E,m-=h}}return N===2?Ge.distance(o+y,a,t,r):NaN}findAlignmentInRegion(t,r,o,a){const u=Math.floor(a*t),h=Math.max(0,r-u),p=Math.min(this.image.getWidth()-1,r+u);if(p-h<t*3)throw new Y("Alignment top exceeds estimated module size.");const m=Math.max(0,o-u),y=Math.min(this.image.getHeight()-1,o+u);if(y-m<t*3)throw new Y("Alignment bottom exceeds estimated module size.");return new Cr(this.image,h,m,p-h,y-m,t,this.resultPointCallback).find()}}class un{constructor(){this.decoder=new yr}getDecoder(){return this.decoder}decode(t,r){let o,a;if(r!=null&&r.get($.PURE_BARCODE)!==void 0){const m=un.extractPureBits(t.getBlackMatrix());o=this.decoder.decodeBitMatrix(m,r),a=un.NO_POINTS}else{const m=new We(t.getBlackMatrix()).detect(r);o=this.decoder.decodeBitMatrix(m.getBits(),r),a=m.getPoints()}o.getOther()instanceof Sn&&o.getOther().applyMirroredCorrection(a);const u=new Ae(o.getText(),o.getRawBytes(),void 0,a,ge.QR_CODE,void 0),h=o.getByteSegments();h!==null&&u.putMetadata(He.BYTE_SEGMENTS,h);const p=o.getECLevel();return p!==null&&u.putMetadata(He.ERROR_CORRECTION_LEVEL,p),o.hasStructuredAppend()&&(u.putMetadata(He.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),u.putMetadata(He.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),u}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(r===null||o===null)throw new Y;const a=this.moduleSize(r,t);let u=r[1],h=o[1],p=r[0],m=o[0];if(p>=m||u>=h)throw new Y;if(h-u!==m-p&&(m=p+(h-u),m>=t.getWidth()))throw new Y;const y=Math.round((m-p+1)/a),E=Math.round((h-u+1)/a);if(y<=0||E<=0)throw new Y;if(E!==y)throw new Y;const N=Math.floor(a/2);u+=N,p+=N;const k=p+Math.floor((y-1)*a)-m;if(k>0){if(k>N)throw new Y;p-=k}const U=u+Math.floor((E-1)*a)-h;if(U>0){if(U>N)throw new Y;u-=U}const Q=new ne(y,E);for(let q=0;q<E;q++){const ie=u+Math.floor(q*a);for(let oe=0;oe<y;oe++)t.get(p+Math.floor(oe*a),ie)&&Q.set(oe,q)}return Q}static moduleSize(t,r){const o=r.getHeight(),a=r.getWidth();let u=t[0],h=t[1],p=!0,m=0;for(;u<a&&h<o;){if(p!==r.get(u,h)){if(++m===5)break;p=!p}u++,h++}if(u===a||h===o)throw new Y;return(u-t[0])/7}}un.NO_POINTS=new Array;class Oe{PDF417Common(){}static getBitCountSum(t){return Ge.sum(t)}static toIntArray(t){if(t==null||!t.length)return Oe.EMPTY_INT_ARRAY;const r=new Int32Array(t.length);let o=0;for(const a of t)r[o++]=a;return r}static getCodeword(t){const r=D.binarySearch(Oe.SYMBOL_TABLE,t&262143);return r<0?-1:(Oe.CODEWORD_TABLE[r]-1)%Oe.NUMBER_OF_CODEWORDS}}Oe.NUMBER_OF_CODEWORDS=929,Oe.MAX_CODEWORDS_IN_BARCODE=Oe.NUMBER_OF_CODEWORDS-1,Oe.MIN_ROWS_IN_BARCODE=3,Oe.MAX_ROWS_IN_BARCODE=90,Oe.MODULES_IN_CODEWORD=17,Oe.MODULES_IN_STOP_PATTERN=18,Oe.BARS_IN_MODULE=8,Oe.EMPTY_INT_ARRAY=new Int32Array([]),Oe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Oe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ja{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Je{static detectMultiple(t,r,o){let a=t.getBlackMatrix(),u=Je.detect(o,a);return u.length||(a=a.clone(),a.rotate180(),u=Je.detect(o,a)),new ja(a,u)}static detect(t,r){const o=new Array;let a=0,u=0,h=!1;for(;a<r.getHeight();){const p=Je.findVertices(r,a,u);if(p[0]==null&&p[3]==null){if(!h)break;h=!1,u=0;for(const m of o)m[1]!=null&&(a=Math.trunc(Math.max(a,m[1].getY()))),m[3]!=null&&(a=Math.max(a,Math.trunc(m[3].getY())));a+=Je.ROW_STEP;continue}if(h=!0,o.push(p),!t)break;p[2]!=null?(u=Math.trunc(p[2].getX()),a=Math.trunc(p[2].getY())):(u=Math.trunc(p[4].getX()),a=Math.trunc(p[4].getY()))}return o}static findVertices(t,r,o){const a=t.getHeight(),u=t.getWidth(),h=new Array(8);return Je.copyToResult(h,Je.findRowsWithPattern(t,a,u,r,o,Je.START_PATTERN),Je.INDEXES_START_PATTERN),h[4]!=null&&(o=Math.trunc(h[4].getX()),r=Math.trunc(h[4].getY())),Je.copyToResult(h,Je.findRowsWithPattern(t,a,u,r,o,Je.STOP_PATTERN),Je.INDEXES_STOP_PATTERN),h}static copyToResult(t,r,o){for(let a=0;a<o.length;a++)t[o[a]]=r[a]}static findRowsWithPattern(t,r,o,a,u,h){const p=new Array(4);let m=!1;const y=new Int32Array(h.length);for(;a<r;a+=Je.ROW_STEP){let N=Je.findGuardPattern(t,u,a,o,!1,h,y);if(N!=null){for(;a>0;){const k=Je.findGuardPattern(t,u,--a,o,!1,h,y);if(k!=null)N=k;else{a++;break}}p[0]=new Te(N[0],a),p[1]=new Te(N[1],a),m=!0;break}}let E=a+1;if(m){let N=0,k=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;E<r;E++){const U=Je.findGuardPattern(t,k[0],E,o,!1,h,y);if(U!=null&&Math.abs(k[0]-U[0])<Je.MAX_PATTERN_DRIFT&&Math.abs(k[1]-U[1])<Je.MAX_PATTERN_DRIFT)k=U,N=0;else{if(N>Je.SKIPPED_ROW_COUNT_MAX)break;N++}}E-=N+1,p[2]=new Te(k[0],E),p[3]=new Te(k[1],E)}return E-a<Je.BARCODE_MIN_HEIGHT&&D.fill(p,null),p}static findGuardPattern(t,r,o,a,u,h,p){D.fillWithin(p,0,p.length,0);let m=r,y=0;for(;t.get(m,o)&&m>0&&y++<Je.MAX_PIXEL_DRIFT;)m--;let E=m,N=0,k=h.length;for(let U=u;E<a;E++)if(t.get(E,o)!==U)p[N]++;else{if(N===k-1){if(Je.patternMatchVariance(p,h,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE)return new Int32Array([m,E]);m+=p[0]+p[1],j.arraycopy(p,2,p,0,N-1),p[N-1]=0,p[N]=0,N--}else N++;p[N]=1,U=!U}return N===k-1&&Je.patternMatchVariance(p,h,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE?new Int32Array([m,E-1]):null}static patternMatchVariance(t,r,o){let a=t.length,u=0,h=0;for(let y=0;y<a;y++)u+=t[y],h+=r[y];if(u<h)return 1/0;let p=u/h;o*=p;let m=0;for(let y=0;y<a;y++){let E=t[y],N=r[y]*p,k=E>N?E-N:N-E;if(k>o)return 1/0;m+=k}return m/u}}Je.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Je.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Je.MAX_AVG_VARIANCE=.42,Je.MAX_INDIVIDUAL_VARIANCE=.8,Je.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Je.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Je.MAX_PIXEL_DRIFT=3,Je.MAX_PATTERN_DRIFT=5,Je.SKIPPED_ROW_COUNT_MAX=25,Je.ROW_STEP=5,Je.BARCODE_MIN_HEIGHT=10;class cn{constructor(t,r){if(r.length===0)throw new I;this.field=t;let o=r.length;if(o>1&&r[0]===0){let a=1;for(;a<o&&r[a]===0;)a++;a===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-a),j.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let a=0;for(let u of this.coefficients)a=this.field.add(a,u);return a}let r=this.coefficients[0],o=this.coefficients.length;for(let a=1;a<o;a++)r=this.field.add(this.field.multiply(t,r),this.coefficients[a]);return r}add(t){if(!this.field.equals(t.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,o=t.coefficients;if(r.length>o.length){let h=r;r=o,o=h}let a=new Int32Array(o.length),u=o.length-r.length;j.arraycopy(o,0,a,0,u);for(let h=u;h<o.length;h++)a[h]=this.field.add(r[h-u],o[h]);return new cn(this.field,a)}subtract(t){if(!this.field.equals(t.field))throw new I("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof cn?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new cn(this.field,new Int32Array([0]));let r=this.coefficients,o=r.length,a=t.coefficients,u=a.length,h=new Int32Array(o+u-1);for(let p=0;p<o;p++){let m=r[p];for(let y=0;y<u;y++)h[p+y]=this.field.add(h[p+y],this.field.multiply(m,a[y]))}return new cn(this.field,h)}negative(){let t=this.coefficients.length,r=new Int32Array(t);for(let o=0;o<t;o++)r[o]=this.field.subtract(0,this.coefficients[o]);return new cn(this.field,r)}multiplyScalar(t){if(t===0)return new cn(this.field,new Int32Array([0]));if(t===1)return this;let r=this.coefficients.length,o=new Int32Array(r);for(let a=0;a<r;a++)o[a]=this.field.multiply(this.coefficients[a],t);return new cn(this.field,o)}multiplyByMonomial(t,r){if(t<0)throw new I;if(r===0)return new cn(this.field,new Int32Array([0]));let o=this.coefficients.length,a=new Int32Array(o+t);for(let u=0;u<o;u++)a[u]=this.field.multiply(this.coefficients[u],r);return new cn(this.field,a)}toString(){let t=new J;for(let r=this.getDegree();r>=0;r--){let o=this.getCoefficient(r);o!==0&&(o<0?(t.append(" - "),o=-o):t.length()>0&&t.append(" + "),(r===0||o!==1)&&t.append(o),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()}}class ko{add(t,r){return(t+r)%this.modulus}subtract(t,r){return(this.modulus+t-r)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new I;return this.logTable[t]}inverse(t){if(t===0)throw new dt;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class qr extends ko{constructor(t,r){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let o=1;for(let a=0;a<t;a++)this.expTable[a]=o,o=o*r%t;for(let a=0;a<t-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new cn(this,new Int32Array([0])),this.one=new cn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new I;if(r===0)return this.zero;let o=new Int32Array(t+1);return o[0]=r,new cn(this,o)}}qr.PDF417_GF=new qr(Oe.NUMBER_OF_CODEWORDS,3);class js{constructor(){this.field=qr.PDF417_GF}decode(t,r,o){let a=new cn(this.field,t),u=new Int32Array(r),h=!1;for(let Q=r;Q>0;Q--){let q=a.evaluateAt(this.field.exp(Q));u[r-Q]=q,q!==0&&(h=!0)}if(!h)return 0;let p=this.field.getOne();if(o!=null)for(const Q of o){let q=this.field.exp(t.length-1-Q),ie=new cn(this.field,new Int32Array([this.field.subtract(0,q),1]));p=p.multiply(ie)}let m=new cn(this.field,u),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),m,r),E=y[0],N=y[1],k=this.findErrorLocations(E),U=this.findErrorMagnitudes(N,E,k);for(let Q=0;Q<k.length;Q++){let q=t.length-1-this.field.log(k[Q]);if(q<0)throw z.getChecksumInstance();t[q]=this.field.subtract(t[q],U[Q])}return k.length}runEuclideanAlgorithm(t,r,o){if(t.getDegree()<r.getDegree()){let k=t;t=r,r=k}let a=t,u=r,h=this.field.getZero(),p=this.field.getOne();for(;u.getDegree()>=Math.round(o/2);){let k=a,U=h;if(a=u,h=p,a.isZero())throw z.getChecksumInstance();u=k;let Q=this.field.getZero(),q=a.getCoefficient(a.getDegree()),ie=this.field.inverse(q);for(;u.getDegree()>=a.getDegree()&&!u.isZero();){let oe=u.getDegree()-a.getDegree(),Se=this.field.multiply(u.getCoefficient(u.getDegree()),ie);Q=Q.add(this.field.buildMonomial(oe,Se)),u=u.subtract(a.multiplyByMonomial(oe,Se))}p=Q.multiply(h).subtract(U).negative()}let m=p.getCoefficient(0);if(m===0)throw z.getChecksumInstance();let y=this.field.inverse(m),E=p.multiply(y),N=u.multiply(y);return[E,N]}findErrorLocations(t){let r=t.getDegree(),o=new Int32Array(r),a=0;for(let u=1;u<this.field.getSize()&&a<r;u++)t.evaluateAt(u)===0&&(o[a]=this.field.inverse(u),a++);if(a!==r)throw z.getChecksumInstance();return o}findErrorMagnitudes(t,r,o){let a=r.getDegree(),u=new Int32Array(a);for(let y=1;y<=a;y++)u[a-y]=this.field.multiply(y,r.getCoefficient(y));let h=new cn(this.field,u),p=o.length,m=new Int32Array(p);for(let y=0;y<p;y++){let E=this.field.inverse(o[y]),N=this.field.subtract(0,t.evaluateAt(E)),k=this.field.inverse(h.evaluateAt(E));m[y]=this.field.multiply(N,k)}return m}}class Er{constructor(t,r,o,a,u){t instanceof Er?this.constructor_2(t):this.constructor_1(t,r,o,a,u)}constructor_1(t,r,o,a,u){const h=r==null||o==null,p=a==null||u==null;if(h&&p)throw new Y;h?(r=new Te(0,a.getY()),o=new Te(0,u.getY())):p&&(a=new Te(t.getWidth()-1,r.getY()),u=new Te(t.getWidth()-1,o.getY())),this.image=t,this.topLeft=r,this.bottomLeft=o,this.topRight=a,this.bottomRight=u,this.minX=Math.trunc(Math.min(r.getX(),o.getX())),this.maxX=Math.trunc(Math.max(a.getX(),u.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(o.getY(),u.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,r){return t==null?r:r==null?t:new Er(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(t,r,o){let a=this.topLeft,u=this.bottomLeft,h=this.topRight,p=this.bottomRight;if(t>0){let m=o?this.topLeft:this.topRight,y=Math.trunc(m.getY()-t);y<0&&(y=0);let E=new Te(m.getX(),y);o?a=E:h=E}if(r>0){let m=o?this.bottomLeft:this.bottomRight,y=Math.trunc(m.getY()+r);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);let E=new Te(m.getX(),y);o?u=E:p=E}return new Er(this.image,a,u,h,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class wn{constructor(t,r,o,a){this.columnCount=t,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=o,this.rowCount=r+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ar{constructor(){this.buffer=""}static form(t,r){let o=-1;function a(h,p,m,y,E,N){if(h==="%%")return"%";if(r[++o]===void 0)return;h=y?parseInt(y.substr(1)):void 0;let k=E?parseInt(E.substr(1)):void 0,U;switch(N){case"s":U=r[o];break;case"c":U=r[o][0];break;case"f":U=parseFloat(r[o]).toFixed(h);break;case"p":U=parseFloat(r[o]).toPrecision(h);break;case"e":U=parseFloat(r[o]).toExponential(h);break;case"x":U=parseInt(r[o]).toString(k||16);break;case"d":U=parseFloat(parseInt(r[o],k||10).toPrecision(h)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(k);let Q=parseInt(m),q=m&&m[0]+""=="0"?"0":" ";for(;U.length<Q;)U=p!==void 0?U+q:q+U;return U}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,a)}format(t,...r){this.buffer+=Ar.form(t,r)}toString(){return this.buffer}}class Hi{constructor(t){this.boundingBox=new Er(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let r=this.getCodeword(t);if(r!=null)return r;for(let o=1;o<Hi.MAX_NEARBY_DISTANCE;o++){let a=this.imageRowToCodewordIndex(t)-o;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(t)+o,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Ar;let r=0;for(const o of this.codewords){if(o==null){t.format("%3d:    |   %n",r++);continue}t.format("%3d: %3d|%3d%n",r++,o.getRowNumber(),o.getValue())}return t.toString()}}Hi.MAX_NEARBY_DISTANCE=5;class Vi{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)}getValue(){let t=-1,r=new Array;for(const[o,a]of this.values.entries()){const u={getKey:()=>o,getValue:()=>a};u.getValue()>t?(t=u.getValue(),r=[],r.push(u.getKey())):u.getValue()===t&&r.push(u.getKey())}return Oe.toIntArray(r)}getConfidence(t){return this.values.get(t)}}class za extends Hi{constructor(t,r){super(t),this._isLeft=r}setRowNumbers(){for(let t of this.getCodewords())t!=null&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);let o=this.getBoundingBox(),a=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),m=-1,y=1,E=0;for(let N=h;N<p;N++){if(r[N]==null)continue;let k=r[N],U=k.getRowNumber()-m;if(U===0)E++;else if(U===1)y=Math.max(y,E),E=1,m=k.getRowNumber();else if(U<0||k.getRowNumber()>=t.getRowCount()||U>N)r[N]=null;else{let Q;y>2?Q=(y-2)*U:Q=U;let q=Q>=N;for(let ie=1;ie<=Q&&!q;ie++)q=r[N-ie]!=null;q?r[N]=null:(m=k.getRowNumber(),E=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let r=new Int32Array(t.getRowCount());for(let o of this.getCodewords())if(o!=null){let a=o.getRowNumber();if(a>=r.length)continue;r[a]++}return r}adjustIncompleteIndicatorColumnRowNumbers(t){let r=this.getBoundingBox(),o=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),p=this.getCodewords(),m=-1;for(let y=u;y<h;y++){if(p[y]==null)continue;let E=p[y];E.setRowNumberAsRowIndicatorColumn();let N=E.getRowNumber()-m;N===0||(N===1?m=E.getRowNumber():E.getRowNumber()>=t.getRowCount()?p[y]=null:m=E.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),r=new Vi,o=new Vi,a=new Vi,u=new Vi;for(let p of t){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let m=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:o.setValue(m*3+1);break;case 1:u.setValue(m/3),a.setValue(m%3);break;case 2:r.setValue(m+1);break}}if(r.getValue().length===0||o.getValue().length===0||a.getValue().length===0||u.getValue().length===0||r.getValue()[0]<1||o.getValue()[0]+a.getValue()[0]<Oe.MIN_ROWS_IN_BARCODE||o.getValue()[0]+a.getValue()[0]>Oe.MAX_ROWS_IN_BARCODE)return null;let h=new wn(r.getValue()[0],o.getValue()[0],a.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(t,h),h}removeIncorrectCodewords(t,r){for(let o=0;o<t.length;o++){let a=t[o];if(t[o]==null)continue;let u=a.getValue()%30,h=a.getRowNumber();if(h>r.getRowCount()){t[o]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:u*3+1!==r.getRowCountUpperPart()&&(t[o]=null);break;case 1:(Math.trunc(u/3)!==r.getErrorCorrectionLevel()||u%3!==r.getRowCountLowerPart())&&(t[o]=null);break;case 2:u+1!==r.getColumnCount()&&(t[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Wi{constructor(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=Oe.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let o=this.detectionResultColumns[r].getCodewords();for(let a=0;a<o.length;a++)o[a]!=null&&(o[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,o))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<t.length;o++)if(t[o]!=null&&r[o]!=null&&t[o].getRowNumber()===r[o].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let u=this.detectionResultColumns[a].getCodewords()[o];u!=null&&(u.setRowNumber(t[o].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++){if(r[o]==null)continue;let a=r[o].getRowNumber(),u=0;for(let h=this.barcodeColumnCount+1;h>0&&u<this.ADJUST_ROW_NUMBER_SKIP;h--){let p=this.detectionResultColumns[h].getCodewords()[o];p!=null&&(u=Wi.adjustRowNumberIfValid(a,u,p),p.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,r=this.detectionResultColumns[0].getCodewords();for(let o=0;o<r.length;o++){if(r[o]==null)continue;let a=r[o].getRowNumber(),u=0;for(let h=1;h<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;h++){let p=this.detectionResultColumns[h].getCodewords()[o];p!=null&&(u=Wi.adjustRowNumberIfValid(a,u,p),p.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,r,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(t)?(o.setRowNumber(t),r=0):++r),r}adjustRowNumbers(t,r,o){if(!this.detectionResultColumns[t-1])return;let a=o[r],u=this.detectionResultColumns[t-1].getCodewords(),h=u;this.detectionResultColumns[t+1]!=null&&(h=this.detectionResultColumns[t+1].getCodewords());let p=new Array(14);p[2]=u[r],p[3]=h[r],r>0&&(p[0]=o[r-1],p[4]=u[r-1],p[5]=h[r-1]),r>1&&(p[8]=o[r-2],p[10]=u[r-2],p[11]=h[r-2]),r<o.length-1&&(p[1]=o[r+1],p[6]=u[r+1],p[7]=h[r+1]),r<o.length-2&&(p[9]=o[r+2],p[12]=u[r+2],p[13]=h[r+2]);for(let m of p)if(Wi.adjustRowNumber(a,m))return}static adjustRowNumber(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,r){this.detectionResultColumns[t]=r}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new Ar;for(let o=0;o<t.getCodewords().length;o++){r.format("CW %3d:",o);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}let u=this.detectionResultColumns[a].getCodewords()[o];if(u==null){r.format("    |   ");continue}r.format(" %3d|%3d",u.getRowNumber(),u.getValue())}r.format("%n")}return r.toString()}}class Ii{constructor(t,r,o,a){this.rowNumber=Ii.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(o),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==Ii.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}Ii.BARCODE_ROW_UNKNOWN=-1;class Bn{static initialize(){for(let t=0;t<Oe.SYMBOL_TABLE.length;t++){let r=Oe.SYMBOL_TABLE[t],o=r&1;for(let a=0;a<Oe.BARS_IN_MODULE;a++){let u=0;for(;(r&1)===o;)u+=1,r>>=1;o=r&1,Bn.RATIOS_TABLE[t]||(Bn.RATIOS_TABLE[t]=new Array(Oe.BARS_IN_MODULE)),Bn.RATIOS_TABLE[t][Oe.BARS_IN_MODULE-a-1]=Math.fround(u/Oe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let r=Bn.getDecodedCodewordValue(Bn.sampleBitCounts(t));return r!==-1?r:Bn.getClosestDecodedValue(t)}static sampleBitCounts(t){let r=Ge.sum(t),o=new Int32Array(Oe.BARS_IN_MODULE),a=0,u=0;for(let h=0;h<Oe.MODULES_IN_CODEWORD;h++){let p=r/(2*Oe.MODULES_IN_CODEWORD)+h*r/Oe.MODULES_IN_CODEWORD;u+t[a]<=p&&(u+=t[a],a++),o[a]++}return o}static getDecodedCodewordValue(t){let r=Bn.getBitValue(t);return Oe.getCodeword(r)===-1?-1:r}static getBitValue(t){let r=0;for(let o=0;o<t.length;o++)for(let a=0;a<t[o];a++)r=r<<1|(o%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(t){let r=Ge.sum(t),o=new Array(Oe.BARS_IN_MODULE);if(r>1)for(let h=0;h<o.length;h++)o[h]=Math.fround(t[h]/r);let a=tn.MAX_VALUE,u=-1;this.bSymbolTableReady||Bn.initialize();for(let h=0;h<Bn.RATIOS_TABLE.length;h++){let p=0,m=Bn.RATIOS_TABLE[h];for(let y=0;y<Oe.BARS_IN_MODULE;y++){let E=Math.fround(m[y]-o[y]);if(p+=Math.fround(E*E),p>=a)break}p<a&&(a=p,u=Oe.SYMBOL_TABLE[h])}return u}}Bn.bSymbolTableReady=!1,Bn.RATIOS_TABLE=new Array(Oe.SYMBOL_TABLE.length).map(T=>new Array(Oe.BARS_IN_MODULE));class Mo{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class at{static parseLong(t,r=void 0){return parseInt(t,r)}}class Ua extends v{}Ua.kind="NullPointerException";class xr{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,r,o){if(t==null)throw new Ua;if(r<0||r>t.length||o<0||r+o>t.length||r+o<0)throw new ee;if(o===0)return;for(let a=0;a<o;a++)this.write(t[r+a])}flush(){}close(){}}class _s extends v{}class Ha extends xr{constructor(t=32){if(super(),this.count=0,t<0)throw new I("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let o=this.buf.length<<1;if(o-t<0&&(o=t),o<0){if(t<0)throw new _s;o=P.MAX_VALUE}this.buf=D.copyOfUint8Array(this.buf,o)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,r,o){if(r<0||r>t.length||o<0||r+o-t.length>0)throw new ee;this.ensureCapacity(this.count+o),j.arraycopy(t,r,this.buf,this.count,o),this.count+=o}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return D.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var Et;(function(T){T[T.ALPHA=0]="ALPHA",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.PUNCT=3]="PUNCT",T[T.ALPHA_SHIFT=4]="ALPHA_SHIFT",T[T.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Et||(Et={}));function zs(){if(typeof window<"u"||typeof window<"u")return window.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Us;function $r(T){if(typeof Us>"u"&&(Us=zs()),Us===null)throw new Error("BigInt is not supported!");return Us(T)}function Iu(){let T=[];T[0]=$r(1);let t=$r(900);T[1]=t;for(let r=2;r<16;r++)T[r]=T[r-1]*t;return T}class ae{static decode(t,r){let o=new J(""),a=X.ISO8859_1;o.enableDecoding(a);let u=1,h=t[u++],p=new Mo;for(;u<t[0];){switch(h){case ae.TEXT_COMPACTION_MODE_LATCH:u=ae.textCompaction(t,u,o);break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:u=ae.byteCompaction(h,t,a,u,o);break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(t[u++]);break;case ae.NUMERIC_COMPACTION_MODE_LATCH:u=ae.numericCompaction(t,u,o);break;case ae.ECI_CHARSET:X.getCharacterSetECIByValue(t[u++]);break;case ae.ECI_GENERAL_PURPOSE:u+=2;break;case ae.ECI_USER_DEFINED:u++;break;case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=ae.decodeMacroBlock(t,u,p);break;case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:throw new W;default:u--,u=ae.textCompaction(t,u,o);break}if(u<t.length)h=t[u++];else throw W.getFormatInstance()}if(o.length()===0)throw W.getFormatInstance();let m=new Pn(null,o.toString(),null,r);return m.setOther(p),m}static decodeMacroBlock(t,r,o){if(r+ae.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw W.getFormatInstance();let a=new Int32Array(ae.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<ae.NUMBER_OF_SEQUENCE_CODEWORDS;p++,r++)a[p]=t[r];o.setSegmentIndex(P.parseInt(ae.decodeBase900toBase10(a,ae.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new J;r=ae.textCompaction(t,r,u),o.setFileId(u.toString());let h=-1;for(t[r]===ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=r+1);r<t[0];)switch(t[r]){case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new J;r=ae.textCompaction(t,r+1,p),o.setFileName(p.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new J;r=ae.textCompaction(t,r+1,m),o.setSender(m.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let y=new J;r=ae.textCompaction(t,r+1,y),o.setAddressee(y.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new J;r=ae.numericCompaction(t,r+1,E),o.setSegmentCount(P.parseInt(E.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let N=new J;r=ae.numericCompaction(t,r+1,N),o.setTimestamp(at.parseLong(N.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new J;r=ae.numericCompaction(t,r+1,k),o.setChecksum(P.parseInt(k.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let U=new J;r=ae.numericCompaction(t,r+1,U),o.setFileSize(at.parseLong(U.toString()));break;default:throw W.getFormatInstance()}break;case ae.MACRO_PDF417_TERMINATOR:r++,o.setLastSegment(!0);break;default:throw W.getFormatInstance()}if(h!==-1){let p=r-h;o.isLastSegment()&&p--,o.setOptionalData(D.copyOfRange(t,h,h+p))}return r}static textCompaction(t,r,o){let a=new Int32Array((t[0]-r)*2),u=new Int32Array((t[0]-r)*2),h=0,p=!1;for(;r<t[0]&&!p;){let m=t[r++];if(m<ae.TEXT_COMPACTION_MODE_LATCH)a[h]=m/30,a[h+1]=m%30,h+=2;else switch(m){case ae.TEXT_COMPACTION_MODE_LATCH:a[h++]=ae.TEXT_COMPACTION_MODE_LATCH;break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:r--,p=!0;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[h]=ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=t[r++],u[h]=m,h++;break}}return ae.decodeTextCompaction(a,u,h,o),r}static decodeTextCompaction(t,r,o,a){let u=Et.ALPHA,h=Et.ALPHA,p=0;for(;p<o;){let m=t[p],y="";switch(u){case Et.ALPHA:if(m<26)y=String.fromCharCode(65+m);else switch(m){case 26:y=" ";break;case ae.LL:u=Et.LOWER;break;case ae.ML:u=Et.MIXED;break;case ae.PS:h=u,u=Et.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Et.ALPHA;break}break;case Et.LOWER:if(m<26)y=String.fromCharCode(97+m);else switch(m){case 26:y=" ";break;case ae.AS:h=u,u=Et.ALPHA_SHIFT;break;case ae.ML:u=Et.MIXED;break;case ae.PS:h=u,u=Et.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Et.ALPHA;break}break;case Et.MIXED:if(m<ae.PL)y=ae.MIXED_CHARS[m];else switch(m){case ae.PL:u=Et.PUNCT;break;case 26:y=" ";break;case ae.LL:u=Et.LOWER;break;case ae.AL:u=Et.ALPHA;break;case ae.PS:h=u,u=Et.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Et.ALPHA;break}break;case Et.PUNCT:if(m<ae.PAL)y=ae.PUNCT_CHARS[m];else switch(m){case ae.PAL:u=Et.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Et.ALPHA;break}break;case Et.ALPHA_SHIFT:if(u=h,m<26)y=String.fromCharCode(65+m);else switch(m){case 26:y=" ";break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Et.ALPHA;break}break;case Et.PUNCT_SHIFT:if(u=h,m<ae.PAL)y=ae.PUNCT_CHARS[m];else switch(m){case ae.PAL:u=Et.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Et.ALPHA;break}break}y!==""&&a.append(y),p++}}static byteCompaction(t,r,o,a,u){let h=new Ha,p=0,m=0,y=!1;switch(t){case ae.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),N=r[a++];for(;a<r[0]&&!y;)switch(E[p++]=N,m=900*m+N,N=r[a++],N){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:a--,y=!0;break;default:if(p%5===0&&p>0){for(let k=0;k<6;++k)h.write(Number($r(m)>>$r(8*(5-k))));m=0,p=0}break}a===r[0]&&N<ae.TEXT_COMPACTION_MODE_LATCH&&(E[p++]=N);for(let k=0;k<p;k++)h.write(E[k]);break;case ae.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!y;){let k=r[a++];if(k<ae.TEXT_COMPACTION_MODE_LATCH)p++,m=900*m+k;else switch(k){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:a--,y=!0;break}if(p%5===0&&p>0){for(let U=0;U<6;++U)h.write(Number($r(m)>>$r(8*(5-U))));m=0,p=0}}break}return u.append(ue.decode(h.toByteArray(),o)),a}static numericCompaction(t,r,o){let a=0,u=!1,h=new Int32Array(ae.MAX_NUMERIC_CODEWORDS);for(;r<t[0]&&!u;){let p=t[r++];if(r===t[0]&&(u=!0),p<ae.TEXT_COMPACTION_MODE_LATCH)h[a]=p,a++;else switch(p){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:r--,u=!0;break}(a%ae.MAX_NUMERIC_CODEWORDS===0||p===ae.NUMERIC_COMPACTION_MODE_LATCH||u)&&a>0&&(o.append(ae.decodeBase900toBase10(h,a)),a=0)}return r}static decodeBase900toBase10(t,r){let o=$r(0);for(let u=0;u<r;u++)o+=ae.EXP900[r-u-1]*$r(t[u]);let a=o.toString();if(a.charAt(0)!=="1")throw new W;return a.substring(1)}}ae.TEXT_COMPACTION_MODE_LATCH=900,ae.BYTE_COMPACTION_MODE_LATCH=901,ae.NUMERIC_COMPACTION_MODE_LATCH=902,ae.BYTE_COMPACTION_MODE_LATCH_6=924,ae.ECI_USER_DEFINED=925,ae.ECI_GENERAL_PURPOSE=926,ae.ECI_CHARSET=927,ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ae.MACRO_PDF417_TERMINATOR=922,ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ae.MAX_NUMERIC_CODEWORDS=15,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ae.PL=25,ae.LL=27,ae.AS=27,ae.ML=28,ae.AL=28,ae.PS=29,ae.PAL=29,ae.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ae.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ae.EXP900=zs()?Iu():[],ae.NUMBER_OF_SEQUENCE_CODEWORDS=2;class tt{constructor(){}static decode(t,r,o,a,u,h,p){let m=new Er(t,r,o,a,u),y=null,E=null,N;for(let Q=!0;;Q=!1){if(r!=null&&(y=tt.getRowIndicatorColumn(t,m,r,!0,h,p)),a!=null&&(E=tt.getRowIndicatorColumn(t,m,a,!1,h,p)),N=tt.merge(y,E),N==null)throw Y.getNotFoundInstance();let q=N.getBoundingBox();if(Q&&q!=null&&(q.getMinY()<m.getMinY()||q.getMaxY()>m.getMaxY()))m=q;else break}N.setBoundingBox(m);let k=N.getBarcodeColumnCount()+1;N.setDetectionResultColumn(0,y),N.setDetectionResultColumn(k,E);let U=y!=null;for(let Q=1;Q<=k;Q++){let q=U?Q:k-Q;if(N.getDetectionResultColumn(q)!==void 0)continue;let ie;q===0||q===k?ie=new za(m,q===0):ie=new Hi(m),N.setDetectionResultColumn(q,ie);let oe=-1,Se=oe;for(let Ie=m.getMinY();Ie<=m.getMaxY();Ie++){if(oe=tt.getStartColumn(N,q,Ie,U),oe<0||oe>m.getMaxX()){if(Se===-1)continue;oe=Se}let Ce=tt.detectCodeword(t,m.getMinX(),m.getMaxX(),U,oe,Ie,h,p);Ce!=null&&(ie.setCodeword(Ie,Ce),Se=oe,h=Math.min(h,Ce.getWidth()),p=Math.max(p,Ce.getWidth()))}}return tt.createDecoderResult(N)}static merge(t,r){if(t==null&&r==null)return null;let o=tt.getBarcodeMetadata(t,r);if(o==null)return null;let a=Er.merge(tt.adjustBoundingBox(t),tt.adjustBoundingBox(r));return new Wi(o,a)}static adjustBoundingBox(t){if(t==null)return null;let r=t.getRowHeights();if(r==null)return null;let o=tt.getMax(r),a=0;for(let p of r)if(a+=o-p,p>0)break;let u=t.getCodewords();for(let p=0;a>0&&u[p]==null;p++)a--;let h=0;for(let p=r.length-1;p>=0&&(h+=o-r[p],!(r[p]>0));p--);for(let p=u.length-1;h>0&&u[p]==null;p--)h--;return t.getBoundingBox().addMissingRows(a,h,t.isLeft())}static getMax(t){let r=-1;for(let o of t)r=Math.max(r,o);return r}static getBarcodeMetadata(t,r){let o;if(t==null||(o=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let a;return r==null||(a=r.getBarcodeMetadata())==null?o:o.getColumnCount()!==a.getColumnCount()&&o.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&o.getRowCount()!==a.getRowCount()?null:o}static getRowIndicatorColumn(t,r,o,a,u,h){let p=new za(r,a);for(let m=0;m<2;m++){let y=m===0?1:-1,E=Math.trunc(Math.trunc(o.getX()));for(let N=Math.trunc(Math.trunc(o.getY()));N<=r.getMaxY()&&N>=r.getMinY();N+=y){let k=tt.detectCodeword(t,0,t.getWidth(),a,E,N,u,h);k!=null&&(p.setCodeword(N,k),a?E=k.getStartX():E=k.getEndX())}}return p}static adjustCodewordCount(t,r){let o=r[0][1],a=o.getValue(),u=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-tt.getNumberOfECCodeWords(t.getBarcodeECLevel());if(a.length===0){if(u<1||u>Oe.MAX_CODEWORDS_IN_BARCODE)throw Y.getNotFoundInstance();o.setValue(u)}else a[0]!==u&&o.setValue(u)}static createDecoderResult(t){let r=tt.createBarcodeMatrix(t);tt.adjustCodewordCount(t,r);let o=new Array,a=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),u=[],h=new Array;for(let m=0;m<t.getBarcodeRowCount();m++)for(let y=0;y<t.getBarcodeColumnCount();y++){let E=r[m][y+1].getValue(),N=m*t.getBarcodeColumnCount()+y;E.length===0?o.push(N):E.length===1?a[N]=E[0]:(h.push(N),u.push(E))}let p=new Array(u.length);for(let m=0;m<p.length;m++)p[m]=u[m];return tt.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),a,Oe.toIntArray(o),Oe.toIntArray(h),p)}static createDecoderResultFromAmbiguousValues(t,r,o,a,u){let h=new Int32Array(a.length),p=100;for(;p-- >0;){for(let m=0;m<h.length;m++)r[a[m]]=u[m][h[m]];try{return tt.decodeCodewords(r,t,o)}catch(m){if(!(m instanceof z))throw m}if(h.length===0)throw z.getChecksumInstance();for(let m=0;m<h.length;m++)if(h[m]<u[m].length-1){h[m]++;break}else if(h[m]=0,m===h.length-1)throw z.getChecksumInstance()}throw z.getChecksumInstance()}static createBarcodeMatrix(t){let r=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let a=0;a<r.length;a++)for(let u=0;u<r[a].length;u++)r[a][u]=new Vi;let o=0;for(let a of t.getDetectionResultColumns()){if(a!=null){for(let u of a.getCodewords())if(u!=null){let h=u.getRowNumber();if(h>=0){if(h>=r.length)continue;r[h][o].setValue(u.getValue())}}}o++}return r}static isValidBarcodeColumn(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1}static getStartColumn(t,r,o,a){let u=a?1:-1,h=null;if(tt.isValidBarcodeColumn(t,r-u)&&(h=t.getDetectionResultColumn(r-u).getCodeword(o)),h!=null)return a?h.getEndX():h.getStartX();if(h=t.getDetectionResultColumn(r).getCodewordNearby(o),h!=null)return a?h.getStartX():h.getEndX();if(tt.isValidBarcodeColumn(t,r-u)&&(h=t.getDetectionResultColumn(r-u).getCodewordNearby(o)),h!=null)return a?h.getEndX():h.getStartX();let p=0;for(;tt.isValidBarcodeColumn(t,r-u);){r-=u;for(let m of t.getDetectionResultColumn(r).getCodewords())if(m!=null)return(a?m.getEndX():m.getStartX())+u*p*(m.getEndX()-m.getStartX());p++}return a?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,r,o,a,u,h,p,m){u=tt.adjustCodewordStartColumn(t,r,o,a,u,h);let y=tt.getModuleBitCount(t,r,o,a,u,h);if(y==null)return null;let E,N=Ge.sum(y);if(a)E=u+N;else{for(let Q=0;Q<y.length/2;Q++){let q=y[Q];y[Q]=y[y.length-1-Q],y[y.length-1-Q]=q}E=u,u=E-N}if(!tt.checkCodewordSkew(N,p,m))return null;let k=Bn.getDecodedValue(y),U=Oe.getCodeword(k);return U===-1?null:new Ii(u,E,tt.getCodewordBucketNumber(k),U)}static getModuleBitCount(t,r,o,a,u,h){let p=u,m=new Int32Array(8),y=0,E=a?1:-1,N=a;for(;(a?p<o:p>=r)&&y<m.length;)t.get(p,h)===N?(m[y]++,p+=E):(y++,N=!N);return y===m.length||p===(a?o:r)&&y===m.length-1?m:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,r,o,a,u,h){let p=u,m=a?-1:1;for(let y=0;y<2;y++){for(;(a?p>=r:p<o)&&a===t.get(p,h);){if(Math.abs(u-p)>tt.CODEWORD_SKEW_SIZE)return u;p+=m}m=-m,a=!a}return p}static checkCodewordSkew(t,r,o){return r-tt.CODEWORD_SKEW_SIZE<=t&&t<=o+tt.CODEWORD_SKEW_SIZE}static decodeCodewords(t,r,o){if(t.length===0)throw W.getFormatInstance();let a=1<<r+1,u=tt.correctErrors(t,o,a);tt.verifyCodewordCount(t,a);let h=ae.decode(t,""+r);return h.setErrorsCorrected(u),h.setErasures(o.length),h}static correctErrors(t,r,o){if(r!=null&&r.length>o/2+tt.MAX_ERRORS||o<0||o>tt.MAX_EC_CODEWORDS)throw z.getChecksumInstance();return tt.errorCorrection.decode(t,o,r)}static verifyCodewordCount(t,r){if(t.length<4)throw W.getFormatInstance();let o=t[0];if(o>t.length)throw W.getFormatInstance();if(o===0)if(r<t.length)t[0]=t.length-r;else throw W.getFormatInstance()}static getBitCountForCodeword(t){let r=new Int32Array(8),o=0,a=r.length-1;for(;!((t&1)!==o&&(o=t&1,a--,a<0));)r[a]++,t>>=1;return r}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return tt.getCodewordBucketNumber(tt.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let r=new Ar;for(let o=0;o<t.length;o++){r.format("Row %2d: ",o);for(let a=0;a<t[o].length;a++){let u=t[o][a];u.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}r.format("%n")}return r.toString()}}tt.CODEWORD_SKEW_SIZE=2,tt.MAX_ERRORS=3,tt.MAX_EC_CODEWORDS=512,tt.errorCorrection=new js;class yn{decode(t,r=null){let o=yn.decode(t,r,!1);if(o==null||o.length===0||o[0]==null)throw Y.getNotFoundInstance();return o[0]}decodeMultiple(t,r=null){try{return yn.decode(t,r,!0)}catch(o){throw o instanceof W||o instanceof z?Y.getNotFoundInstance():o}}static decode(t,r,o){const a=new Array,u=Je.detectMultiple(t,r,o);for(const h of u.getPoints()){const p=tt.decode(u.getBits(),h[4],h[5],h[6],h[7],yn.getMinCodewordWidth(h),yn.getMaxCodewordWidth(h)),m=new Ae(p.getText(),p.getRawBytes(),void 0,h,ge.PDF_417);m.putMetadata(He.ERROR_CORRECTION_LEVEL,p.getECLevel());const y=p.getOther();y!=null&&m.putMetadata(He.PDF417_EXTRA_METADATA,y),a.push(m)}return a.map(h=>h)}static getMaxWidth(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMinWidth(t,r){return t==null||r==null?P.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(yn.getMaxWidth(t[0],t[4]),yn.getMaxWidth(t[6],t[2])*Oe.MODULES_IN_CODEWORD/Oe.MODULES_IN_STOP_PATTERN),Math.max(yn.getMaxWidth(t[1],t[5]),yn.getMaxWidth(t[7],t[3])*Oe.MODULES_IN_CODEWORD/Oe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(yn.getMinWidth(t[0],t[4]),yn.getMinWidth(t[6],t[2])*Oe.MODULES_IN_CODEWORD/Oe.MODULES_IN_STOP_PATTERN),Math.min(yn.getMinWidth(t[1],t[5]),yn.getMinWidth(t[7],t[3])*Oe.MODULES_IN_CODEWORD/Oe.MODULES_IN_STOP_PATTERN)))}reset(){}}class $n extends v{}$n.kind="ReaderException";class Va{constructor(t,r){this.verbose=t===!0,r&&this.setHints(r)}decode(t,r){return r&&this.setHints(r),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!l(t)&&t.get($.TRY_HARDER)===!0,o=l(t)?null:t.get($.POSSIBLE_FORMATS),a=new Array;if(!l(o)){const u=o.some(h=>h===ge.UPC_A||h===ge.UPC_E||h===ge.EAN_13||h===ge.EAN_8||h===ge.CODABAR||h===ge.CODE_39||h===ge.CODE_93||h===ge.CODE_128||h===ge.ITF||h===ge.RSS_14||h===ge.RSS_EXPANDED);u&&!r&&a.push(new Pr(t,this.verbose)),o.includes(ge.QR_CODE)&&a.push(new un),o.includes(ge.DATA_MATRIX)&&a.push(new yt),o.includes(ge.AZTEC)&&a.push(new Xn),o.includes(ge.PDF_417)&&a.push(new yn),u&&r&&a.push(new Pr(t,this.verbose))}a.length===0&&(r||a.push(new Pr(t,this.verbose)),a.push(new un),a.push(new yt),a.push(new Xn),a.push(new yn),r&&a.push(new Pr(t,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new $n("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(o){if(o instanceof $n)continue}throw new Y("No MultiFormat Readers were able to detect the code.")}}class Wa extends Ze{constructor(t=null,r=500){const o=new Va;o.setHints(t),super(o,r)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class gi extends Ze{constructor(t=500){super(new yn,t)}}class Za extends Ze{constructor(t=500){super(new un,t)}}var Hs;(function(T){T[T.ERROR_CORRECTION=0]="ERROR_CORRECTION",T[T.CHARACTER_SET=1]="CHARACTER_SET",T[T.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",T[T.MIN_SIZE=3]="MIN_SIZE",T[T.MAX_SIZE=4]="MAX_SIZE",T[T.MARGIN=5]="MARGIN",T[T.PDF417_COMPACT=6]="PDF417_COMPACT",T[T.PDF417_COMPACTION=7]="PDF417_COMPACTION",T[T.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",T[T.AZTEC_LAYERS=9]="AZTEC_LAYERS",T[T.QR_VERSION=10]="QR_VERSION"})(Hs||(Hs={}));var Xt=Hs;class Po{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new kt(t,Int32Array.from([1])))}buildGenerator(t){const r=this.cachedGenerators;if(t>=r.length){let o=r[r.length-1];const a=this.field;for(let u=r.length;u<=t;u++){const h=o.multiply(new kt(a,Int32Array.from([1,a.exp(u-1+a.getGeneratorBase())])));r.push(h),o=h}}return r[t]}encode(t,r){if(r===0)throw new I("No error correction bytes");const o=t.length-r;if(o<=0)throw new I("No data bytes provided");const a=this.buildGenerator(r),u=new Int32Array(o);j.arraycopy(t,0,u,0,o);let h=new kt(this.field,u);h=h.multiplyByMonomial(r,1);const m=h.divide(a)[1].getCoefficients(),y=r-m.length;for(let E=0;E<y;E++)t[o+E]=0;j.arraycopy(m,0,t,o+y,m.length)}}class Bt{constructor(){}static applyMaskPenaltyRule1(t){return Bt.applyMaskPenaltyRule1Internal(t,!0)+Bt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let r=0;const o=t.getArray(),a=t.getWidth(),u=t.getHeight();for(let h=0;h<u-1;h++){const p=o[h];for(let m=0;m<a-1;m++){const y=p[m];y===p[m+1]&&y===o[h+1][m]&&y===o[h+1][m+1]&&r++}}return Bt.N2*r}static applyMaskPenaltyRule3(t){let r=0;const o=t.getArray(),a=t.getWidth(),u=t.getHeight();for(let h=0;h<u;h++)for(let p=0;p<a;p++){const m=o[h];p+6<a&&m[p]===1&&m[p+1]===0&&m[p+2]===1&&m[p+3]===1&&m[p+4]===1&&m[p+5]===0&&m[p+6]===1&&(Bt.isWhiteHorizontal(m,p-4,p)||Bt.isWhiteHorizontal(m,p+7,p+11))&&r++,h+6<u&&o[h][p]===1&&o[h+1][p]===0&&o[h+2][p]===1&&o[h+3][p]===1&&o[h+4][p]===1&&o[h+5][p]===0&&o[h+6][p]===1&&(Bt.isWhiteVertical(o,p,h-4,h)||Bt.isWhiteVertical(o,p,h+7,h+11))&&r++}return r*Bt.N3}static isWhiteHorizontal(t,r,o){r=Math.max(r,0),o=Math.min(o,t.length);for(let a=r;a<o;a++)if(t[a]===1)return!1;return!0}static isWhiteVertical(t,r,o,a){o=Math.max(o,0),a=Math.min(a,t.length);for(let u=o;u<a;u++)if(t[u][r]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let r=0;const o=t.getArray(),a=t.getWidth(),u=t.getHeight();for(let m=0;m<u;m++){const y=o[m];for(let E=0;E<a;E++)y[E]===1&&r++}const h=t.getHeight()*t.getWidth();return Math.floor(Math.abs(r*2-h)*10/h)*Bt.N4}static getDataMaskBit(t,r,o){let a,u;switch(t){case 0:a=o+r&1;break;case 1:a=o&1;break;case 2:a=r%3;break;case 3:a=(o+r)%3;break;case 4:a=Math.floor(o/2)+Math.floor(r/3)&1;break;case 5:u=o*r,a=(u&1)+u%3;break;case 6:u=o*r,a=(u&1)+u%3&1;break;case 7:u=o*r,a=u%3+(o+r&1)&1;break;default:throw new I("Invalid mask pattern: "+t)}return a===0}static applyMaskPenaltyRule1Internal(t,r){let o=0;const a=r?t.getHeight():t.getWidth(),u=r?t.getWidth():t.getHeight(),h=t.getArray();for(let p=0;p<a;p++){let m=0,y=-1;for(let E=0;E<u;E++){const N=r?h[p][E]:h[E][p];N===y?m++:(m>=5&&(o+=Bt.N1+(m-5)),m=1,y=N)}m>=5&&(o+=Bt.N1+(m-5))}return o}}Bt.N1=3,Bt.N2=3,Bt.N3=40,Bt.N4=10;class Cs{constructor(t,r){this.width=t,this.height=r;const o=new Array(r);for(let a=0;a!==r;a++)o[a]=new Uint8Array(t);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(t,r){return this.bytes[r][t]}getArray(){return this.bytes}setNumber(t,r,o){this.bytes[r][t]=o}setBoolean(t,r,o){this.bytes[r][t]=o?1:0}clear(t){for(const r of this.bytes)D.fill(r,t)}equals(t){if(!(t instanceof Cs))return!1;const r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(let o=0,a=this.height;o<a;++o){const u=this.bytes[o],h=r.bytes[o];for(let p=0,m=this.width;p<m;++p)if(u[p]!==h[p])return!1}return!0}toString(){const t=new J;for(let r=0,o=this.height;r<o;++r){const a=this.bytes[r];for(let u=0,h=this.width;u<h;++u)switch(a[u]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class bi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new J;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<bi.NUM_MASK_PATTERNS}}bi.NUM_MASK_PATTERNS=8;class St extends v{}St.kind="WriterException";class Ve{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,r,o,a,u){Ve.clearMatrix(u),Ve.embedBasicPatterns(o,u),Ve.embedTypeInfo(r,a,u),Ve.maybeEmbedVersionInfo(o,u),Ve.embedDataBits(t,a,u)}static embedBasicPatterns(t,r){Ve.embedPositionDetectionPatternsAndSeparators(r),Ve.embedDarkDotAtLeftBottomCorner(r),Ve.maybeEmbedPositionAdjustmentPatterns(t,r),Ve.embedTimingPatterns(r)}static embedTypeInfo(t,r,o){const a=new V;Ve.makeTypeInfoBits(t,r,a);for(let u=0,h=a.getSize();u<h;++u){const p=a.get(a.getSize()-1-u),m=Ve.TYPE_INFO_COORDINATES[u],y=m[0],E=m[1];if(o.setBoolean(y,E,p),u<8){const N=o.getWidth()-u-1;o.setBoolean(N,8,p)}else{const k=o.getHeight()-7+(u-8);o.setBoolean(8,k,p)}}}static maybeEmbedVersionInfo(t,r){if(t.getVersionNumber()<7)return;const o=new V;Ve.makeVersionInfoBits(t,o);let a=6*3-1;for(let u=0;u<6;++u)for(let h=0;h<3;++h){const p=o.get(a);a--,r.setBoolean(u,r.getHeight()-11+h,p),r.setBoolean(r.getHeight()-11+h,u,p)}}static embedDataBits(t,r,o){let a=0,u=-1,h=o.getWidth()-1,p=o.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);p>=0&&p<o.getHeight();){for(let m=0;m<2;++m){const y=h-m;if(!Ve.isEmpty(o.get(y,p)))continue;let E;a<t.getSize()?(E=t.get(a),++a):E=!1,r!==255&&Bt.getDataMaskBit(r,y,p)&&(E=!E),o.setBoolean(y,p,E)}p+=u}u=-u,p+=u,h-=2}if(a!==t.getSize())throw new St("Not all bits consumed: "+a+"/"+t.getSize())}static findMSBSet(t){return 32-P.numberOfLeadingZeros(t)}static calculateBCHCode(t,r){if(r===0)throw new I("0 polynomial");const o=Ve.findMSBSet(r);for(t<<=o-1;Ve.findMSBSet(t)>=o;)t^=r<<Ve.findMSBSet(t)-o;return t}static makeTypeInfoBits(t,r,o){if(!bi.isValidMaskPattern(r))throw new St("Invalid mask pattern");const a=t.getBits()<<3|r;o.appendBits(a,5);const u=Ve.calculateBCHCode(a,Ve.TYPE_INFO_POLY);o.appendBits(u,10);const h=new V;if(h.appendBits(Ve.TYPE_INFO_MASK_PATTERN,15),o.xor(h),o.getSize()!==15)throw new St("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(t,r){r.appendBits(t.getVersionNumber(),6);const o=Ve.calculateBCHCode(t.getVersionNumber(),Ve.VERSION_INFO_POLY);if(r.appendBits(o,12),r.getSize()!==18)throw new St("should not happen but we got: "+r.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let r=8;r<t.getWidth()-8;++r){const o=(r+1)%2;Ve.isEmpty(t.get(r,6))&&t.setNumber(r,6,o),Ve.isEmpty(t.get(6,r))&&t.setNumber(6,r,o)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new St;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,r,o){for(let a=0;a<8;++a){if(!Ve.isEmpty(o.get(t+a,r)))throw new St;o.setNumber(t+a,r,0)}}static embedVerticalSeparationPattern(t,r,o){for(let a=0;a<7;++a){if(!Ve.isEmpty(o.get(t,r+a)))throw new St;o.setNumber(t,r+a,0)}}static embedPositionAdjustmentPattern(t,r,o){for(let a=0;a<5;++a){const u=Ve.POSITION_ADJUSTMENT_PATTERN[a];for(let h=0;h<5;++h)o.setNumber(t+h,r+a,u[h])}}static embedPositionDetectionPattern(t,r,o){for(let a=0;a<7;++a){const u=Ve.POSITION_DETECTION_PATTERN[a];for(let h=0;h<7;++h)o.setNumber(t+h,r+a,u[h])}}static embedPositionDetectionPatternsAndSeparators(t){const r=Ve.POSITION_DETECTION_PATTERN[0].length;Ve.embedPositionDetectionPattern(0,0,t),Ve.embedPositionDetectionPattern(t.getWidth()-r,0,t),Ve.embedPositionDetectionPattern(0,t.getWidth()-r,t);const o=8;Ve.embedHorizontalSeparationPattern(0,o-1,t),Ve.embedHorizontalSeparationPattern(t.getWidth()-o,o-1,t),Ve.embedHorizontalSeparationPattern(0,t.getWidth()-o,t);const a=7;Ve.embedVerticalSeparationPattern(a,0,t),Ve.embedVerticalSeparationPattern(t.getHeight()-a-1,0,t),Ve.embedVerticalSeparationPattern(a,t.getHeight()-a,t)}static maybeEmbedPositionAdjustmentPatterns(t,r){if(t.getVersionNumber()<2)return;const o=t.getVersionNumber()-1,a=Ve.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let u=0,h=a.length;u!==h;u++){const p=a[u];if(p>=0)for(let m=0;m!==h;m++){const y=a[m];y>=0&&Ve.isEmpty(r.get(y,p))&&Ve.embedPositionAdjustmentPattern(y-2,p-2,r)}}}}Ve.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ve.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ve.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ve.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ve.VERSION_INFO_POLY=7973,Ve.TYPE_INFO_POLY=1335,Ve.TYPE_INFO_MASK_PATTERN=21522;class bu{constructor(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Rt{constructor(){}static calculateMaskPenalty(t){return Bt.applyMaskPenaltyRule1(t)+Bt.applyMaskPenaltyRule2(t)+Bt.applyMaskPenaltyRule3(t)+Bt.applyMaskPenaltyRule4(t)}static encode(t,r,o=null){let a=Rt.DEFAULT_BYTE_MODE_ENCODING;const u=o!==null&&o.get(Xt.CHARACTER_SET)!==void 0;u&&(a=o.get(Xt.CHARACTER_SET).toString());const h=this.chooseMode(t,a),p=new V;if(h===Pe.BYTE&&(u||Rt.DEFAULT_BYTE_MODE_ENCODING!==a)){const Ie=X.getCharacterSetECIByName(a);Ie!==void 0&&this.appendECI(Ie,p)}this.appendModeInfo(h,p);const m=new V;this.appendBytes(t,h,m,a);let y;if(o!==null&&o.get(Xt.QR_VERSION)!==void 0){const Ie=Number.parseInt(o.get(Xt.QR_VERSION).toString(),10);y=me.getVersionForNumber(Ie);const Ce=this.calculateBitsNeeded(h,p,m,y);if(!this.willFit(Ce,y,r))throw new St("Data too big for requested version")}else y=this.recommendVersion(r,h,p,m);const E=new V;E.appendBitArray(p);const N=h===Pe.BYTE?m.getSizeInBytes():t.length;this.appendLengthInfo(N,y,h,E),E.appendBitArray(m);const k=y.getECBlocksForLevel(r),U=y.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(U,E);const Q=this.interleaveWithECBytes(E,y.getTotalCodewords(),U,k.getNumBlocks()),q=new bi;q.setECLevel(r),q.setMode(h),q.setVersion(y);const ie=y.getDimensionForVersion(),oe=new Cs(ie,ie),Se=this.chooseMaskPattern(Q,r,y,oe);return q.setMaskPattern(Se),Ve.buildMatrix(Q,r,y,Se,oe),q.setMatrix(oe),q}static recommendVersion(t,r,o,a){const u=this.calculateBitsNeeded(r,o,a,me.getVersionForNumber(1)),h=this.chooseVersion(u,t),p=this.calculateBitsNeeded(r,o,a,h);return this.chooseVersion(p,t)}static calculateBitsNeeded(t,r,o,a){return r.getSize()+t.getCharacterCountBits(a)+o.getSize()}static getAlphanumericCode(t){return t<Rt.ALPHANUMERIC_TABLE.length?Rt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,r=null){if(X.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return Pe.KANJI;let o=!1,a=!1;for(let u=0,h=t.length;u<h;++u){const p=t.charAt(u);if(Rt.isDigit(p))o=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)a=!0;else return Pe.BYTE}return a?Pe.ALPHANUMERIC:o?Pe.NUMERIC:Pe.BYTE}static isOnlyDoubleByteKanji(t){let r;try{r=ue.encode(t,X.SJIS)}catch{return!1}const o=r.length;if(o%2!==0)return!1;for(let a=0;a<o;a+=2){const u=r[a]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(t,r,o,a){let u=Number.MAX_SAFE_INTEGER,h=-1;for(let p=0;p<bi.NUM_MASK_PATTERNS;p++){Ve.buildMatrix(t,r,o,p,a);let m=this.calculateMaskPenalty(a);m<u&&(u=m,h=p)}return h}static chooseVersion(t,r){for(let o=1;o<=40;o++){const a=me.getVersionForNumber(o);if(Rt.willFit(t,a,r))return a}throw new St("Data too big")}static willFit(t,r,o){const a=r.getTotalCodewords(),h=r.getECBlocksForLevel(o).getTotalECCodewords(),p=a-h,m=(t+7)/8;return p>=m}static terminateBits(t,r){const o=t*8;if(r.getSize()>o)throw new St("data bits cannot fit in the QR Code"+r.getSize()+" > "+o);for(let h=0;h<4&&r.getSize()<o;++h)r.appendBit(!1);const a=r.getSize()&7;if(a>0)for(let h=a;h<8;h++)r.appendBit(!1);const u=t-r.getSizeInBytes();for(let h=0;h<u;++h)r.appendBits(h&1?17:236,8);if(r.getSize()!==o)throw new St("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,r,o,a,u,h){if(a>=o)throw new St("Block ID too large");const p=t%o,m=o-p,y=Math.floor(t/o),E=y+1,N=Math.floor(r/o),k=N+1,U=y-N,Q=E-k;if(U!==Q)throw new St("EC bytes mismatch");if(o!==m+p)throw new St("RS blocks mismatch");if(t!==(N+U)*m+(k+Q)*p)throw new St("Total bytes mismatch");a<m?(u[0]=N,h[0]=U):(u[0]=k,h[0]=Q)}static interleaveWithECBytes(t,r,o,a){if(t.getSizeInBytes()!==o)throw new St("Number of bits and data bytes does not match");let u=0,h=0,p=0;const m=new Array;for(let E=0;E<a;++E){const N=new Int32Array(1),k=new Int32Array(1);Rt.getNumDataBytesAndNumECBytesForBlockID(r,o,a,E,N,k);const U=N[0],Q=new Uint8Array(U);t.toBytes(8*u,Q,0,U);const q=Rt.generateECBytes(Q,k[0]);m.push(new bu(Q,q)),h=Math.max(h,U),p=Math.max(p,q.length),u+=N[0]}if(o!==u)throw new St("Data bytes does not match offset");const y=new V;for(let E=0;E<h;++E)for(const N of m){const k=N.getDataBytes();E<k.length&&y.appendBits(k[E],8)}for(let E=0;E<p;++E)for(const N of m){const k=N.getErrorCorrectionBytes();E<k.length&&y.appendBits(k[E],8)}if(r!==y.getSizeInBytes())throw new St("Interleaving error: "+r+" and "+y.getSizeInBytes()+" differ.");return y}static generateECBytes(t,r){const o=t.length,a=new Int32Array(o+r);for(let h=0;h<o;h++)a[h]=t[h]&255;new Po(Xe.QR_CODE_FIELD_256).encode(a,r);const u=new Uint8Array(r);for(let h=0;h<r;h++)u[h]=a[o+h];return u}static appendModeInfo(t,r){r.appendBits(t.getBits(),4)}static appendLengthInfo(t,r,o,a){const u=o.getCharacterCountBits(r);if(t>=1<<u)throw new St(t+" is bigger than "+((1<<u)-1));a.appendBits(t,u)}static appendBytes(t,r,o,a){switch(r){case Pe.NUMERIC:Rt.appendNumericBytes(t,o);break;case Pe.ALPHANUMERIC:Rt.appendAlphanumericBytes(t,o);break;case Pe.BYTE:Rt.append8BitBytes(t,o,a);break;case Pe.KANJI:Rt.appendKanjiBytes(t,o);break;default:throw new St("Invalid mode: "+r)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const r=Rt.getDigit(t);return r>=0&&r<=9}static appendNumericBytes(t,r){const o=t.length;let a=0;for(;a<o;){const u=Rt.getDigit(t.charAt(a));if(a+2<o){const h=Rt.getDigit(t.charAt(a+1)),p=Rt.getDigit(t.charAt(a+2));r.appendBits(u*100+h*10+p,10),a+=3}else if(a+1<o){const h=Rt.getDigit(t.charAt(a+1));r.appendBits(u*10+h,7),a+=2}else r.appendBits(u,4),a++}}static appendAlphanumericBytes(t,r){const o=t.length;let a=0;for(;a<o;){const u=Rt.getAlphanumericCode(t.charCodeAt(a));if(u===-1)throw new St;if(a+1<o){const h=Rt.getAlphanumericCode(t.charCodeAt(a+1));if(h===-1)throw new St;r.appendBits(u*45+h,11),a+=2}else r.appendBits(u,6),a++}}static append8BitBytes(t,r,o){let a;try{a=ue.encode(t,o)}catch(u){throw new St(u)}for(let u=0,h=a.length;u!==h;u++){const p=a[u];r.appendBits(p,8)}}static appendKanjiBytes(t,r){let o;try{o=ue.encode(t,X.SJIS)}catch(u){throw new St(u)}const a=o.length;for(let u=0;u<a;u+=2){const h=o[u]&255,p=o[u+1]&255,m=h<<8&4294967295|p;let y=-1;if(m>=33088&&m<=40956?y=m-33088:m>=57408&&m<=60351&&(y=m-49472),y===-1)throw new St("Invalid byte sequence");const E=(y>>8)*192+(y&255);r.appendBits(E,13)}}static appendECI(t,r){r.appendBits(Pe.ECI.getBits(),4),r.appendBits(t.getValue(),8)}}Rt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Rt.DEFAULT_BYTE_MODE_ENCODING=X.UTF8.getName();class mi{write(t,r,o,a=null){if(t.length===0)throw new I("Found empty contents");if(r<0||o<0)throw new I("Requested dimensions are too small: "+r+"x"+o);let u=nt.L,h=mi.QUIET_ZONE_SIZE;a!==null&&(a.get(Xt.ERROR_CORRECTION)!==void 0&&(u=nt.fromString(a.get(Xt.ERROR_CORRECTION).toString())),a.get(Xt.MARGIN)!==void 0&&(h=Number.parseInt(a.get(Xt.MARGIN).toString(),10)));const p=Rt.encode(t,u,a);return this.renderResult(p,r,o,h)}writeToDom(t,r,o,a,u=null){typeof t=="string"&&(t=document.querySelector(t));const h=this.write(r,o,a,u);t&&t.appendChild(h)}renderResult(t,r,o,a){const u=t.getMatrix();if(u===null)throw new Wt;const h=u.getWidth(),p=u.getHeight(),m=h+a*2,y=p+a*2,E=Math.max(r,m),N=Math.max(o,y),k=Math.min(Math.floor(E/m),Math.floor(N/y)),U=Math.floor((E-h*k)/2),Q=Math.floor((N-p*k)/2),q=this.createSVGElement(E,N);for(let ie=0,oe=Q;ie<p;ie++,oe+=k)for(let Se=0,Ie=U;Se<h;Se++,Ie+=k)if(u.get(Se,ie)===1){const Ce=this.createSvgRectElement(Ie,oe,k,k);q.appendChild(Ce)}return q}createSVGElement(t,r){const o=document.createElementNS(mi.SVG_NS,"svg");return o.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width",r.toString()),o}createSvgRectElement(t,r,o,a){const u=document.createElementNS(mi.SVG_NS,"rect");return u.setAttributeNS(null,"x",t.toString()),u.setAttributeNS(null,"y",r.toString()),u.setAttributeNS(null,"height",o.toString()),u.setAttributeNS(null,"width",a.toString()),u.setAttributeNS(null,"fill","#000000"),u}}mi.QUIET_ZONE_SIZE=4,mi.SVG_NS="http://www.w3.org/2000/svg";class Jr{encode(t,r,o,a,u){if(t.length===0)throw new I("Found empty contents");if(r!==ge.QR_CODE)throw new I("Can only encode QR_CODE, but got "+r);if(o<0||a<0)throw new I(`Requested dimensions are too small: ${o}x${a}`);let h=nt.L,p=Jr.QUIET_ZONE_SIZE;u!==null&&(u.get(Xt.ERROR_CORRECTION)!==void 0&&(h=nt.fromString(u.get(Xt.ERROR_CORRECTION).toString())),u.get(Xt.MARGIN)!==void 0&&(p=Number.parseInt(u.get(Xt.MARGIN).toString(),10)));const m=Rt.encode(t,h,u);return Jr.renderResult(m,o,a,p)}static renderResult(t,r,o,a){const u=t.getMatrix();if(u===null)throw new Wt;const h=u.getWidth(),p=u.getHeight(),m=h+a*2,y=p+a*2,E=Math.max(r,m),N=Math.max(o,y),k=Math.min(Math.floor(E/m),Math.floor(N/y)),U=Math.floor((E-h*k)/2),Q=Math.floor((N-p*k)/2),q=new ne(E,N);for(let ie=0,oe=Q;ie<p;ie++,oe+=k)for(let Se=0,Ie=U;Se<h;Se++,Ie+=k)u.get(Se,ie)===1&&q.setRegion(Ie,oe,k,k);return q}}Jr.QUIET_ZONE_SIZE=4;class Ti{encode(t,r,o,a,u){let h;switch(r){case ge.QR_CODE:h=new Jr;break;default:throw new I("No encoder available for format "+r)}return h.encode(t,r,o,a,u)}}class Lr extends te{constructor(t,r,o,a,u,h,p,m){if(super(h,p),this.yuvData=t,this.dataWidth=r,this.dataHeight=o,this.left=a,this.top=u,a+h>r||u+p>o)throw new I("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(h,p)}getRow(t,r){if(t<0||t>=this.getHeight())throw new I("Requested row is outside the image: "+t);const o=this.getWidth();(r==null||r.length<o)&&(r=new Uint8ClampedArray(o));const a=(t+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,a,r,0,o),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;const o=t*r,a=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return j.arraycopy(this.yuvData,u,a,0,o),a;for(let h=0;h<r;h++){const p=h*t;j.arraycopy(this.yuvData,u,a,p,t),u+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,r,o,a){return new Lr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,o,a,!1)}renderThumbnail(){const t=this.getWidth()/Lr.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Lr.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(t*r),a=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let h=0;h<r;h++){const p=h*t;for(let m=0;m<t;m++){const y=a[u+m*Lr.THUMBNAIL_SCALE_FACTOR]&255;o[p+m]=4278190080|y*65793}u+=this.dataWidth*Lr.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/Lr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Lr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,r){const o=this.yuvData;for(let a=0,u=this.top*this.dataWidth+this.left;a<r;a++,u+=this.dataWidth){const h=u+t/2;for(let p=u,m=u+t-1;p<h;p++,m--){const y=o[p];o[p]=o[m],o[m]=y}}}invert(){return new pe(this)}}Lr.THUMBNAIL_SCALE_FACTOR=2;class Ni extends te{constructor(t,r,o,a,u,h,p){if(super(r,o),this.dataWidth=a,this.dataHeight=u,this.left=h,this.top=p,t.BYTES_PER_ELEMENT===4){const m=r*o,y=new Uint8ClampedArray(m);for(let E=0;E<m;E++){const N=t[E],k=N>>16&255,U=N>>7&510,Q=N&255;y[E]=(k+U+Q)/4&255}this.luminances=y}else this.luminances=t;if(a===void 0&&(this.dataWidth=r),u===void 0&&(this.dataHeight=o),h===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+o>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(t,r){if(t<0||t>=this.getHeight())throw new I("Requested row is outside the image: "+t);const o=this.getWidth();(r==null||r.length<o)&&(r=new Uint8ClampedArray(o));const a=(t+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,a,r,0,o),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;const o=t*r,a=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return j.arraycopy(this.luminances,u,a,0,o),a;for(let h=0;h<r;h++){const p=h*t;j.arraycopy(this.luminances,u,a,p,t),u+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,r,o,a){return new Ni(this.luminances,o,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)}invert(){return new pe(this)}}class Jn extends X{static forName(t){return this.getCharacterSetECIByName(t)}}class Vs{}Vs.ISO_8859_1=X.ISO8859_1;class Lo{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Ga{static singletonList(t){return[t]}static min(t,r){return t.sort(r)[0]}}class Do{constructor(t){this.previous=t}getPrevious(){return this.previous}}class vi extends Do{constructor(t,r,o){super(t),this.value=r,this.bitCount=o}appendTo(t,r){t.appendBits(this.value,this.bitCount)}add(t,r){return new vi(this,t,r)}addBinaryShift(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new vi(this,t,r)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+P.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class Bo extends vi{constructor(t,r,o){super(t,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=o}appendTo(t,r){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):o===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+o],8)}addBinaryShift(t,r){return new Bo(this,t,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Tu(T,t,r){return new Bo(T,t,r)}function Zi(T,t,r){return new vi(T,t,r)}const Nu=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],gn=0,ei=1,ur=2,Dr=3,Br=4,Gi=new vi(null,0,0),Fo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Es(T){for(let t of T)D.fill(t,-1);return T[gn][Br]=0,T[ei][Br]=0,T[ei][gn]=28,T[Dr][Br]=0,T[ur][Br]=0,T[ur][gn]=15,T}const jo=Es(D.createInt32Array(6,6));class er{constructor(t,r,o,a){this.token=t,this.mode=r,this.binaryShiftByteCount=o,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,r){let o=this.bitCount,a=this.token;if(t!==this.mode){let h=Fo[this.mode][t];a=Zi(a,h&65535,h>>16),o+=h>>16}let u=t===ur?4:5;return a=Zi(a,r,u),new er(a,t,0,o+u)}shiftAndAppend(t,r){let o=this.token,a=this.mode===ur?4:5;return o=Zi(o,jo[this.mode][t],a),o=Zi(o,r,5),new er(o,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(t){let r=this.token,o=this.mode,a=this.bitCount;if(this.mode===Br||this.mode===ur){let p=Fo[o][gn];r=Zi(r,p&65535,p>>16),a+=p>>16,o=gn}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new er(r,o,this.binaryShiftByteCount+1,a+u);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(t+1)),h}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=Tu(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new er(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let r=this.bitCount+(Fo[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=er.calculateBinaryShiftCost(t)-er.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount}toBitArray(t){let r=[];for(let a=this.endBinaryShift(t.length).token;a!==null;a=a.getPrevious())r.unshift(a);let o=new V;for(const a of r)a.appendTo(o,t);return o}toString(){return fe.format("%s bits=%d bytes=%d",Nu[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}er.INITIAL_STATE=new er(Gi,gn,0,0);function Ou(T){const t=fe.getCharCode(" "),r=fe.getCharCode("."),o=fe.getCharCode(",");T[gn][t]=1;const a=fe.getCharCode("Z"),u=fe.getCharCode("A");for(let k=u;k<=a;k++)T[gn][k]=k-u+2;T[ei][t]=1;const h=fe.getCharCode("z"),p=fe.getCharCode("a");for(let k=p;k<=h;k++)T[ei][k]=k-p+2;T[ur][t]=1;const m=fe.getCharCode("9"),y=fe.getCharCode("0");for(let k=y;k<=m;k++)T[ur][k]=k-y+2;T[ur][o]=12,T[ur][r]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<E.length;k++)T[Dr][fe.getCharCode(E[k])]=k;const N=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<N.length;k++)fe.getCharCode(N[k])>0&&(T[Br][fe.getCharCode(N[k])]=k);return T}const Fr=Ou(D.createInt32Array(5,256));class wi{constructor(t){this.text=t}encode(){const t=fe.getCharCode(" "),r=fe.getCharCode(`
`);let o=Ga.singletonList(er.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let h,p=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case fe.getCharCode("\r"):h=p===r?2:0;break;case fe.getCharCode("."):h=p===t?3:0;break;case fe.getCharCode(","):h=p===t?4:0;break;case fe.getCharCode(":"):h=p===t?5:0;break;default:h=0}h>0?(o=wi.updateStateListForPair(o,u,h),u++):o=this.updateStateListForChar(o,u)}return Ga.min(o,(u,h)=>u.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,r){const o=[];for(let a of t)this.updateStateForChar(a,r,o);return wi.simplifyStates(o)}updateStateForChar(t,r,o){let a=this.text[r]&255,u=Fr[t.getMode()][a]>0,h=null;for(let p=0;p<=Br;p++){let m=Fr[p][a];if(m>0){if(h==null&&(h=t.endBinaryShift(r)),!u||p===t.getMode()||p===ur){const y=h.latchAndAppend(p,m);o.push(y)}if(!u&&jo[t.getMode()][p]>=0){const y=h.shiftAndAppend(p,m);o.push(y)}}}if(t.getBinaryShiftByteCount()>0||Fr[t.getMode()][a]===0){let p=t.addBinaryShiftChar(r);o.push(p)}}static updateStateListForPair(t,r,o){const a=[];for(let u of t)this.updateStateForPair(u,r,o,a);return this.simplifyStates(a)}static updateStateForPair(t,r,o,a){let u=t.endBinaryShift(r);if(a.push(u.latchAndAppend(Br,o)),t.getMode()!==Br&&a.push(u.shiftAndAppend(Br,o)),o===3||o===4){let h=u.latchAndAppend(ur,16-o).latchAndAppend(ur,1);a.push(h)}if(t.getBinaryShiftByteCount()>0){let h=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(h)}}static simplifyStates(t){let r=[];for(const o of t){let a=!0;for(const u of r){if(u.isBetterThanOrEqualTo(o)){a=!1;break}o.isBetterThanOrEqualTo(u)&&(r=r.filter(h=>h!==u))}a&&r.push(o)}return r}}class gt{constructor(){}static encodeBytes(t){return gt.encode(t,gt.DEFAULT_EC_PERCENT,gt.DEFAULT_AZTEC_LAYERS)}static encode(t,r,o){let a=new wi(t).encode(),u=P.truncDivision(a.getSize()*r,100)+11,h=a.getSize()+u,p,m,y,E,N;if(o!==gt.DEFAULT_AZTEC_LAYERS){if(p=o<0,m=Math.abs(o),m>(p?gt.MAX_NB_BITS_COMPACT:gt.MAX_NB_BITS))throw new I(fe.format("Illegal value %s for layers",o));y=gt.totalBitsInLayer(m,p),E=gt.WORD_SIZE[m];let Ce=y-y%E;if(N=gt.stuffBits(a,E),N.getSize()+u>Ce)throw new I("Data to large for user specified layer");if(p&&N.getSize()>E*64)throw new I("Data to large for user specified layer")}else{E=0,N=null;for(let Ce=0;;Ce++){if(Ce>gt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(p=Ce<=3,m=p?Ce+1:Ce,y=gt.totalBitsInLayer(m,p),h>y)continue;(N==null||E!==gt.WORD_SIZE[m])&&(E=gt.WORD_SIZE[m],N=gt.stuffBits(a,E));let rt=y-y%E;if(!(p&&N.getSize()>E*64)&&N.getSize()+u<=rt)break}}let k=gt.generateCheckWords(N,y,E),U=N.getSize()/E,Q=gt.generateModeMessage(p,m,U),q=(p?11:14)+m*4,ie=new Int32Array(q),oe;if(p){oe=q;for(let Ce=0;Ce<ie.length;Ce++)ie[Ce]=Ce}else{oe=q+1+2*P.truncDivision(P.truncDivision(q,2)-1,15);let Ce=P.truncDivision(q,2),rt=P.truncDivision(oe,2);for(let et=0;et<Ce;et++){let Ft=et+P.truncDivision(et,15);ie[Ce-et-1]=rt-Ft-1,ie[Ce+et]=rt+Ft+1}}let Se=new ne(oe);for(let Ce=0,rt=0;Ce<m;Ce++){let et=(m-Ce)*4+(p?9:12);for(let Ft=0;Ft<et;Ft++){let Fn=Ft*2;for(let jn=0;jn<2;jn++)k.get(rt+Fn+jn)&&Se.set(ie[Ce*2+jn],ie[Ce*2+Ft]),k.get(rt+et*2+Fn+jn)&&Se.set(ie[Ce*2+Ft],ie[q-1-Ce*2-jn]),k.get(rt+et*4+Fn+jn)&&Se.set(ie[q-1-Ce*2-jn],ie[q-1-Ce*2-Ft]),k.get(rt+et*6+Fn+jn)&&Se.set(ie[q-1-Ce*2-Ft],ie[Ce*2+jn])}rt+=et*8}if(gt.drawModeMessage(Se,p,oe,Q),p)gt.drawBullsEye(Se,P.truncDivision(oe,2),5);else{gt.drawBullsEye(Se,P.truncDivision(oe,2),7);for(let Ce=0,rt=0;Ce<P.truncDivision(q,2)-1;Ce+=15,rt+=16)for(let et=P.truncDivision(oe,2)&1;et<oe;et+=2)Se.set(P.truncDivision(oe,2)-rt,et),Se.set(P.truncDivision(oe,2)+rt,et),Se.set(et,P.truncDivision(oe,2)-rt),Se.set(et,P.truncDivision(oe,2)+rt)}let Ie=new Lo;return Ie.setCompact(p),Ie.setSize(oe),Ie.setLayers(m),Ie.setCodeWords(U),Ie.setMatrix(Se),Ie}static drawBullsEye(t,r,o){for(let a=0;a<o;a+=2)for(let u=r-a;u<=r+a;u++)t.set(u,r-a),t.set(u,r+a),t.set(r-a,u),t.set(r+a,u);t.set(r-o,r-o),t.set(r-o+1,r-o),t.set(r-o,r-o+1),t.set(r+o,r-o),t.set(r+o,r-o+1),t.set(r+o,r+o-1)}static generateModeMessage(t,r,o){let a=new V;return t?(a.appendBits(r-1,2),a.appendBits(o-1,6),a=gt.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(o-1,11),a=gt.generateCheckWords(a,40,4)),a}static drawModeMessage(t,r,o,a){let u=P.truncDivision(o,2);if(r)for(let h=0;h<7;h++){let p=u-3+h;a.get(h)&&t.set(p,u-5),a.get(h+7)&&t.set(u+5,p),a.get(20-h)&&t.set(p,u+5),a.get(27-h)&&t.set(u-5,p)}else for(let h=0;h<10;h++){let p=u-5+h+P.truncDivision(h,5);a.get(h)&&t.set(p,u-7),a.get(h+10)&&t.set(u+7,p),a.get(29-h)&&t.set(p,u+7),a.get(39-h)&&t.set(u-7,p)}}static generateCheckWords(t,r,o){let a=t.getSize()/o,u=new Po(gt.getGF(o)),h=P.truncDivision(r,o),p=gt.bitsToWords(t,o,h);u.encode(p,h-a);let m=r%o,y=new V;y.appendBits(0,m);for(const E of Array.from(p))y.appendBits(E,o);return y}static bitsToWords(t,r,o){let a=new Int32Array(o),u,h;for(u=0,h=t.getSize()/r;u<h;u++){let p=0;for(let m=0;m<r;m++)p|=t.get(u*r+m)?1<<r-m-1:0;a[u]=p}return a}static getGF(t){switch(t){case 4:return Xe.AZTEC_PARAM;case 6:return Xe.AZTEC_DATA_6;case 8:return Xe.AZTEC_DATA_8;case 10:return Xe.AZTEC_DATA_10;case 12:return Xe.AZTEC_DATA_12;default:throw new I("Unsupported word size "+t)}}static stuffBits(t,r){let o=new V,a=t.getSize(),u=(1<<r)-2;for(let h=0;h<a;h+=r){let p=0;for(let m=0;m<r;m++)(h+m>=a||t.get(h+m))&&(p|=1<<r-1-m);(p&u)===u?(o.appendBits(p&u,r),h--):p&u?o.appendBits(p,r):(o.appendBits(p|1,r),h--)}return o}static totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}gt.DEFAULT_EC_PERCENT=33,gt.DEFAULT_AZTEC_LAYERS=0,gt.MAX_NB_BITS=32,gt.MAX_NB_BITS_COMPACT=4,gt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Xi{encode(t,r,o,a){return this.encodeWithHints(t,r,o,a,null)}encodeWithHints(t,r,o,a,u){let h=Vs.ISO_8859_1,p=gt.DEFAULT_EC_PERCENT,m=gt.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Xt.CHARACTER_SET)&&(h=Jn.forName(u.get(Xt.CHARACTER_SET).toString())),u.has(Xt.ERROR_CORRECTION)&&(p=P.parseInt(u.get(Xt.ERROR_CORRECTION).toString())),u.has(Xt.AZTEC_LAYERS)&&(m=P.parseInt(u.get(Xt.AZTEC_LAYERS).toString()))),Xi.encodeLayers(t,r,o,a,h,p,m)}static encodeLayers(t,r,o,a,u,h,p){if(r!==ge.AZTEC)throw new I("Can only encode AZTEC, but got "+r);let m=gt.encode(fe.getBytes(t,u),h,p);return Xi.renderResult(m,o,a)}static renderResult(t,r,o){let a=t.getMatrix();if(a==null)throw new Wt;let u=a.getWidth(),h=a.getHeight(),p=Math.max(r,u),m=Math.max(o,h),y=Math.min(p/u,m/h),E=(p-u*y)/2,N=(m-h*y)/2,k=new ne(p,m);for(let U=0,Q=N;U<h;U++,Q+=y)for(let q=0,ie=E;q<u;q++,ie+=y)a.get(q,U)&&k.setRegion(ie,Q,y,y);return k}}s.AbstractExpandedDecoder=fi,s.ArgumentException=S,s.ArithmeticException=dt,s.AztecCode=Lo,s.AztecCodeReader=Xn,s.AztecCodeWriter=Xi,s.AztecDecoder=Ue,s.AztecDetector=An,s.AztecDetectorResult=li,s.AztecEncoder=gt,s.AztecHighLevelEncoder=wi,s.AztecPoint=nn,s.BarcodeFormat=ge,s.Binarizer=H,s.BinaryBitmap=O,s.BitArray=V,s.BitMatrix=ne,s.BitSource=pi,s.BrowserAztecCodeReader=mr,s.BrowserBarcodeReader=di,s.BrowserCodeReader=Ze,s.BrowserDatamatrixCodeReader=ys,s.BrowserMultiFormatReader=Wa,s.BrowserPDF417Reader=gi,s.BrowserQRCodeReader=Za,s.BrowserQRCodeSvgWriter=mi,s.CharacterSetECI=X,s.ChecksumException=z,s.Code128Reader=xe,s.Code39Reader=Ct,s.DataMatrixDecodedBitStreamParser=On,s.DataMatrixReader=yt,s.DecodeHintType=$,s.DecoderResult=Pn,s.DefaultGridSampler=ui,s.DetectorResult=qt,s.EAN13Reader=Mt,s.EncodeHintType=Xt,s.Exception=v,s.FormatException=W,s.GenericGF=Xe,s.GenericGFPoly=kt,s.GlobalHistogramBinarizer=ye,s.GridSampler=or,s.GridSamplerInstance=Gn,s.HTMLCanvasElementLuminanceSource=ce,s.HybridBinarizer=de,s.ITFReader=Ke,s.IllegalArgumentException=I,s.IllegalStateException=Wt,s.InvertedLuminanceSource=pe,s.LuminanceSource=te,s.MathUtils=Ge,s.MultiFormatOneDReader=Pr,s.MultiFormatReader=Va,s.MultiFormatWriter=Ti,s.NotFoundException=Y,s.OneDReader=ct,s.PDF417DecodedBitStreamParser=ae,s.PDF417DecoderErrorCorrection=js,s.PDF417Reader=yn,s.PDF417ResultMetadata=Mo,s.PerspectiveTransform=bt,s.PlanarYUVLuminanceSource=Lr,s.QRCodeByteMatrix=Cs,s.QRCodeDataMask=mt,s.QRCodeDecodedBitStreamParser=ht,s.QRCodeDecoderErrorCorrectionLevel=nt,s.QRCodeDecoderFormatInformation=an,s.QRCodeEncoder=Rt,s.QRCodeEncoderQRCode=bi,s.QRCodeMaskUtil=Bt,s.QRCodeMatrixUtil=Ve,s.QRCodeMode=Pe,s.QRCodeReader=un,s.QRCodeVersion=me,s.QRCodeWriter=Jr,s.RGBLuminanceSource=Ni,s.RSS14Reader=Pt,s.RSSExpandedReader=ve,s.ReaderException=$n,s.ReedSolomonDecoder=Dn,s.ReedSolomonEncoder=Po,s.ReedSolomonException=Zn,s.Result=Ae,s.ResultMetadataType=He,s.ResultPoint=Te,s.StringUtils=fe,s.UnsupportedOperationException=he,s.VideoInputDevice=Ee,s.WhiteRectangleDetector=Zt,s.WriterException=St,s.ZXingArrays=D,s.ZXingCharset=Jn,s.ZXingInteger=P,s.ZXingStandardCharsets=Vs,s.ZXingStringBuilder=J,s.ZXingStringEncoding=ue,s.ZXingSystem=j,s.createAbstractExpandedDecoder=Si,Object.defineProperty(s,"__esModule",{value:!0})})})(hh,hh.exports);var zt=hh.exports;const Ww=iu(zt),Zw=Eg({__proto__:null,default:Ww},[zt]);var n1=function(){function e(n,s,l){if(this.formatMap=new Map([[Fe.QR_CODE,zt.BarcodeFormat.QR_CODE],[Fe.AZTEC,zt.BarcodeFormat.AZTEC],[Fe.CODABAR,zt.BarcodeFormat.CODABAR],[Fe.CODE_39,zt.BarcodeFormat.CODE_39],[Fe.CODE_93,zt.BarcodeFormat.CODE_93],[Fe.CODE_128,zt.BarcodeFormat.CODE_128],[Fe.DATA_MATRIX,zt.BarcodeFormat.DATA_MATRIX],[Fe.MAXICODE,zt.BarcodeFormat.MAXICODE],[Fe.ITF,zt.BarcodeFormat.ITF],[Fe.EAN_13,zt.BarcodeFormat.EAN_13],[Fe.EAN_8,zt.BarcodeFormat.EAN_8],[Fe.PDF_417,zt.BarcodeFormat.PDF_417],[Fe.RSS_14,zt.BarcodeFormat.RSS_14],[Fe.RSS_EXPANDED,zt.BarcodeFormat.RSS_EXPANDED],[Fe.UPC_A,zt.BarcodeFormat.UPC_A],[Fe.UPC_E,zt.BarcodeFormat.UPC_E],[Fe.UPC_EAN_EXTENSION,zt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Zw)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=s,this.logger=l;var f=this.createZXingFormats(n),d=new Map;d.set(zt.DecodeHintType.POSSIBLE_FORMATS,f),d.set(zt.DecodeHintType.TRY_HARDER,!1),this.hints=d}return e.prototype.decodeAsync=function(n){var s=this;return new Promise(function(l,f){try{l(s.decode(n))}catch(d){f(d)}})},e.prototype.decode=function(n){var s=new zt.MultiFormatReader(this.verbose,this.hints),l=new zt.HTMLCanvasElementLuminanceSource(n),f=new zt.BinaryBitmap(new zt.HybridBinarizer(l)),d=s.decode(f);return{text:d.text,format:rg.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,l,f){n.set(s,l)}),n},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createZXingFormats=function(n){for(var s=[],l=0,f=n;l<f.length;l++){var d=f[l];this.formatMap.has(d)?s.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return s},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),Gw=function(e,n,s,l){function f(d){return d instanceof s?d:new s(function(w){w(d)})}return new(s||(s=Promise))(function(d,w){function x(S){try{v(l.next(S))}catch(I){w(I)}}function C(S){try{v(l.throw(S))}catch(I){w(I)}}function v(S){S.done?d(S.value):f(S.value).then(x,C)}v((l=l.apply(e,n||[])).next())})},Xw=function(e,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,f,d,w;return w={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function x(v){return function(S){return C([v,S])}}function C(v){if(l)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(l=1,f&&(d=v[0]&2?f.return:v[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,v[1])).done)return d;switch(f=0,d&&(v=[v[0]&2,d.value]),v[0]){case 0:case 1:d=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,f=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!d||v[1]>d[0]&&v[1]<d[3])){s.label=v[1];break}if(v[0]===6&&s.label<d[1]){s.label=d[1],d=v;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(v);break}d[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(S){v=[6,S],f=0}finally{l=d=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},r1=function(){function e(n,s,l){if(this.formatMap=new Map([[Fe.QR_CODE,"qr_code"],[Fe.AZTEC,"aztec"],[Fe.CODABAR,"codabar"],[Fe.CODE_39,"code_39"],[Fe.CODE_93,"code_93"],[Fe.CODE_128,"code_128"],[Fe.DATA_MATRIX,"data_matrix"],[Fe.ITF,"itf"],[Fe.EAN_13,"ean_13"],[Fe.EAN_8,"ean_8"],[Fe.PDF_417,"pdf417"],[Fe.UPC_A,"upc_a"],[Fe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=s,this.logger=l;var f=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(f),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},e.prototype.decodeAsync=function(n){return Gw(this,void 0,void 0,function(){var s,l;return Xw(this,function(f){switch(f.label){case 0:return[4,this.detector.detect(n)];case 1:if(s=f.sent(),!s||s.length===0)throw"No barcode or QR code detected.";return l=this.selectLargestBarcode(s),[2,{text:l.rawValue,format:rg.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(n){for(var s=null,l=0,f=0,d=n;f<d.length;f++){var w=d[f],x=w.boundingBox.width*w.boundingBox.height;x>l&&(l=x,s=w)}if(!s)throw"No largest barcode found";return s},e.prototype.createBarcodeDetectorFormats=function(n){for(var s=[],l=0,f=n;l<f.length;l++){var d=f[l];this.formatMap.has(d)?s.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:s}},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,l,f){n.set(s,l)}),n},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),i1=function(e,n,s,l){function f(d){return d instanceof s?d:new s(function(w){w(d)})}return new(s||(s=Promise))(function(d,w){function x(S){try{v(l.next(S))}catch(I){w(I)}}function C(S){try{v(l.throw(S))}catch(I){w(I)}}function v(S){S.done?d(S.value):f(S.value).then(x,C)}v((l=l.apply(e,n||[])).next())})},s1=function(e,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,f,d,w;return w={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function x(v){return function(S){return C([v,S])}}function C(v){if(l)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(l=1,f&&(d=v[0]&2?f.return:v[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,v[1])).done)return d;switch(f=0,d&&(v=[v[0]&2,d.value]),v[0]){case 0:case 1:d=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,f=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!d||v[1]>d[0]&&v[1]<d[3])){s.label=v[1];break}if(v[0]===6&&s.label<d[1]){s.label=d[1],d=v;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(v);break}d[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(S){v=[6,S],f=0}finally{l=d=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Yw=function(){function e(n,s,l,f){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=l,s&&r1.isSupported()?(this.primaryDecoder=new r1(n,l,f),this.secondaryDecoder=new n1(n,l,f)):this.primaryDecoder=new n1(n,l,f)}return e.prototype.decodeAsync=function(n){return i1(this,void 0,void 0,function(){var s;return s1(this,function(l){switch(l.label){case 0:s=performance.now(),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,l.sent()];case 3:return this.possiblyLogPerformance(s),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(n){return i1(this,void 0,void 0,function(){var s,l;return s1(this,function(f){switch(f.label){case 0:s=performance.now(),f.label=1;case 1:return f.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,f.sent()];case 3:if(l=f.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw l;case 4:return this.possiblyLogPerformance(s),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(n){if(this.verbose){var s=performance.now()-n;this.executionResults.push(s),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,s=0,l=this.executionResults;s<l.length;s++){var f=l[s];n+=f}var d=n/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),ff=function(){var e=function(n,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(l[d]=f[d])},e(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(n,s);function l(){this.constructor=n}n.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),tu=function(e,n,s,l){function f(d){return d instanceof s?d:new s(function(w){w(d)})}return new(s||(s=Promise))(function(d,w){function x(S){try{v(l.next(S))}catch(I){w(I)}}function C(S){try{v(l.throw(S))}catch(I){w(I)}}function v(S){S.done?d(S.value):f(S.value).then(x,C)}v((l=l.apply(e,n||[])).next())})},nu=function(e,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,f,d,w;return w={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function x(v){return function(S){return C([v,S])}}function C(v){if(l)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(l=1,f&&(d=v[0]&2?f.return:v[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,v[1])).done)return d;switch(f=0,d&&(v=[v[0]&2,d.value]),v[0]){case 0:case 1:d=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,f=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!d||v[1]>d[0]&&v[1]<d[3])){s.label=v[1];break}if(v[0]===6&&s.label<d[1]){s.label=d[1],d=v;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(v);break}d[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(S){v=[6,S],f=0}finally{l=d=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},sg=function(){function e(n,s){this.name=n,this.track=s}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(n){var s={};s[this.name]=n;var l={advanced:[s]};return this.track.applyConstraints(l)},e.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var s=n[this.name];return s}return null},e}(),Kw=function(e){ff(n,e);function n(s,l){return e.call(this,s,l)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(s){var l={};l[this.name]=s;var f={advanced:[l]};return this.track.applyConstraints(f)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var s=this.track.getCapabilities(),l=s[this.name];return{min:l.min,max:l.max,step:l.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n}(sg),Qw=function(e){ff(n,e);function n(s){return e.call(this,"zoom",s)||this}return n}(Kw),qw=function(e){ff(n,e);function n(s){return e.call(this,"torch",s)||this}return n}(sg),$w=function(){function e(n){this.track=n}return e.prototype.zoomFeature=function(){return new Qw(this.track)},e.prototype.torchFeature=function(){return new qw(this.track)},e}(),Jw=function(){function e(n,s,l){this.isClosed=!1,this.parentElement=n,this.mediaStream=s,this.callbacks=l,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return e.prototype.createVideoElement=function(n){var s=document.createElement("video");return s.style.width="".concat(n,"px"),s.style.display="block",s.muted=!0,s.setAttribute("muted","true"),s.playsInline=!0,s},e.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var s=function(){var l=n.surface.clientWidth,f=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(l,f),n.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(n,s,l,f){return tu(this,void 0,void 0,function(){var d,w;return nu(this,function(x){switch(x.label){case 0:return d=new e(n,s,f),l.aspectRatio?(w={aspectRatio:l.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(w)]):[3,2];case 1:x.sent(),x.label=2;case 2:return d.setupSurface(),[2,d]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(n){this.failIfClosed();var s=this,l=function(){setTimeout(n,200),s.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(n){return tu(this,void 0,void 0,function(){return nu(this,function(s){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(s,l){var f=n.mediaStream.getVideoTracks(),d=f.length,w=0;n.mediaStream.getVideoTracks().forEach(function(x){n.mediaStream.removeTrack(x),x.stop(),++w,w>=d&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),s())})})},e.prototype.getCapabilities=function(){return new $w(this.getFirstTrackOrFail())},e}(),ey=function(){function e(n){this.mediaStream=n}return e.prototype.render=function(n,s,l){return tu(this,void 0,void 0,function(){return nu(this,function(f){return[2,Jw.create(n,this.mediaStream,s,l)]})})},e.create=function(n){return tu(this,void 0,void 0,function(){var s,l;return nu(this,function(f){switch(f.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return s={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(s)];case 1:return l=f.sent(),[2,new e(l)]}})})},e}(),o1=function(e,n,s,l){function f(d){return d instanceof s?d:new s(function(w){w(d)})}return new(s||(s=Promise))(function(d,w){function x(S){try{v(l.next(S))}catch(I){w(I)}}function C(S){try{v(l.throw(S))}catch(I){w(I)}}function v(S){S.done?d(S.value):f(S.value).then(x,C)}v((l=l.apply(e,n||[])).next())})},a1=function(e,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,f,d,w;return w={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function x(v){return function(S){return C([v,S])}}function C(v){if(l)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(l=1,f&&(d=v[0]&2?f.return:v[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,v[1])).done)return d;switch(f=0,d&&(v=[v[0]&2,d.value]),v[0]){case 0:case 1:d=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,f=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!d||v[1]>d[0]&&v[1]<d[3])){s.label=v[1];break}if(v[0]===6&&s.label<d[1]){s.label=d[1],d=v;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(v);break}d[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(S){v=[6,S],f=0}finally{l=d=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},ty=function(){function e(){}return e.failIfNotSupported=function(){return o1(this,void 0,void 0,function(){return a1(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(n){return o1(this,void 0,void 0,function(){return a1(this,function(s){return[2,ey.create(n)]})})},e}(),ny=function(e,n,s,l){function f(d){return d instanceof s?d:new s(function(w){w(d)})}return new(s||(s=Promise))(function(d,w){function x(S){try{v(l.next(S))}catch(I){w(I)}}function C(S){try{v(l.throw(S))}catch(I){w(I)}}function v(S){S.done?d(S.value):f(S.value).then(x,C)}v((l=l.apply(e,n||[])).next())})},ry=function(e,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,f,d,w;return w={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function x(v){return function(S){return C([v,S])}}function C(v){if(l)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(l=1,f&&(d=v[0]&2?f.return:v[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,v[1])).done)return d;switch(f=0,d&&(v=[v[0]&2,d.value]),v[0]){case 0:case 1:d=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,f=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!d||v[1]>d[0]&&v[1]<d[3])){s.label=v[1];break}if(v[0]===6&&s.label<d[1]){s.label=d[1],d=v;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(v);break}d[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(S){v=[6,S],f=0}finally{l=d=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},iy=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var n=ao.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(n=ao.insecureContextCameraQueryError()),Promise.reject(n)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},e.getCamerasFromMediaDevices=function(){return ny(this,void 0,void 0,function(){var n,s,l,f,d,w,x;return ry(this,function(C){switch(C.label){case 0:return n=function(v){for(var S=v.getVideoTracks(),I=0,O=S;I<O.length;I++){var z=O[I];z.enabled=!1,z.stop(),v.removeTrack(z)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return s=C.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(l=C.sent(),f=[],d=0,w=l;d<w.length;d++)x=w[d],x.kind==="videoinput"&&f.push({id:x.deviceId,label:x.label});return n(s),[2,f]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,s){var l=function(d){for(var w=[],x=0,C=d;x<C.length;x++){var v=C[x];v.kind==="video"&&w.push({id:v.id,label:v.label})}n(w)},f=MediaStreamTrack;f.getSources(l)})},e}(),Jt;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Jt||(Jt={}));var sy=function(){function e(){this.state=Jt.NOT_STARTED,this.onGoingTransactionNewState=Jt.UNKNOWN}return e.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},e.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Jt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Jt.UNKNOWN,this.directTransition(n)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Jt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Jt.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Jt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(n){switch(this.state){case Jt.UNKNOWN:throw"Transition from unknown is not allowed";case Jt.NOT_STARTED:this.failIfNewStateIs(n,[Jt.PAUSED]);break;case Jt.SCANNING:break;case Jt.PAUSED:break}},e.prototype.failIfNewStateIs=function(n,s){for(var l=0,f=s;l<f.length;l++){var d=f[l];if(n===d)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},e}(),oy=function(){function e(n){this.stateManager=n}return e.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},e.prototype.directTransition=function(n){this.stateManager.directTransition(n)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Jt.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Jt.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Jt.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Jt.PAUSED},e}(),ay=function(){function e(){}return e.create=function(){return new oy(new sy)},e}(),ly=function(){var e=function(n,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(l[d]=f[d])},e(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(n,s);function l(){this.constructor=n}n.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),Sr=function(e){ly(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n}(Uw),uy=function(){function e(n,s){this.logger=s,this.fps=Sr.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=Sr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?ig.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Ri(this.qrbox)},e.create=function(n,s){return new e(n,s)},e}(),l1=function(){function e(n,s){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var l;typeof s=="boolean"?this.verbose=s===!0:s&&(l=s,this.verbose=l.verbose===!0,l.experimentalFeatures),this.logger=new Vw(this.verbose),this.qrcode=new Yw(this.getSupportedFormats(s),this.getUseBarCodeDetectorIfSupported(l),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=ay.create()}return e.prototype.start=function(n,s,l,f){var d=this;if(!n)throw"cameraIdOrConfig is required";if(!l||typeof l!="function")throw"qrCodeSuccessCallback is required and should be a function.";var w;f?w=f:w=this.verbose?this.logger.log:function(){};var x=uy.create(s,this.logger);this.clearElement();var C=!1;x.videoConstraints&&(x.isMediaStreamConstraintsValid()?C=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=C,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:Sr.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var I=this,O=this.stateManagerProxy.startTransition(Jt.SCANNING);return new Promise(function(z,H){var j=v?x.videoConstraints:I.createVideoConstraints(n);if(!j){O.cancel(),H("videoConstraints should be defined");return}var ee={};(!v||x.aspectRatio)&&(ee.aspectRatio=x.aspectRatio);var F={onRenderSurfaceReady:function(D,P){I.setupUi(D,P,x),I.isScanning=!0,I.foreverScan(x,l,w)}};ty.failIfNotSupported().then(function(D){D.create(j).then(function(P){return P.render(d.element,ee,F).then(function(V){I.renderedCamera=V,O.execute(),z(null)}).catch(function(V){O.cancel(),H(V)})}).catch(function(P){O.cancel(),H(ao.errorGettingUserMedia(P))})}).catch(function(D){O.cancel(),H(ao.cameraStreamingNotSupported())})})},e.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Jt.PAUSED),this.showPausedState(),(Ri(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,s=function(){n.stateManagerProxy.directTransition(Jt.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){s();return}this.renderedCamera.resume(function(){s()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var s=this.stateManagerProxy.startTransition(Jt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var l=function(){if(n.element){var d=document.getElementById(Sr.SHADED_REGION_ELEMENT_ID);d&&n.element.removeChild(d)}},f=this;return this.renderedCamera.close().then(function(){return f.renderedCamera=null,f.element&&(f.element.removeChild(f.canvasElement),f.canvasElement=null),l(),f.qrRegion&&(f.qrRegion=null),f.context&&(f.context=null),s.execute(),f.hidePausedState(),f.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(n,s){return this.scanFileV2(n,s).then(function(l){return l.decodedText})},e.prototype.scanFileV2=function(n,s){var l=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ri(s)&&(s=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(f,d){l.possiblyCloseLastScanImageFile(),l.clearElement(),l.lastScanImageFile=URL.createObjectURL(n);var w=new Image;w.onload=function(){var x=w.width,C=w.height,v=document.getElementById(l.elementId),S=v.clientWidth?v.clientWidth:Sr.DEFAULT_WIDTH,I=Math.max(v.clientHeight?v.clientHeight:C,Sr.FILE_SCAN_MIN_HEIGHT),O=l.computeCanvasDrawConfig(x,C,S,I);if(s){var z=l.createCanvasElement(S,I,"qr-canvas-visible");z.style.display="inline-block",v.appendChild(z);var H=z.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=S,H.canvas.height=I,H.drawImage(w,0,0,x,C,O.x,O.y,O.width,O.height)}var j=Sr.FILE_SCAN_HIDDEN_CANVAS_PADDING,ee=Math.max(w.width,O.width),F=Math.max(w.height,O.height),D=ee+2*j,P=F+2*j,V=l.createCanvasElement(D,P);v.appendChild(V);var re=V.getContext("2d");if(!re)throw"Unable to get 2d context from canvas";re.canvas.width=D,re.canvas.height=P,re.drawImage(w,0,0,x,C,j,j,ee,F);try{l.qrcode.decodeRobustlyAsync(V).then(function($){f(t1.createFromQrcodeResult($))}).catch(d)}catch($){d("QR code parse error, error = ".concat($))}},w.onerror=d,w.onabort=d,w.onstalled=d,w.onsuspend=d,w.src=URL.createObjectURL(n)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return iy.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(n){if(n){if(!ig.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(n){var s=[Fe.QR_CODE,Fe.AZTEC,Fe.CODABAR,Fe.CODE_39,Fe.CODE_93,Fe.CODE_128,Fe.DATA_MATRIX,Fe.MAXICODE,Fe.ITF,Fe.EAN_13,Fe.EAN_8,Fe.PDF_417,Fe.RSS_14,Fe.RSS_EXPANDED,Fe.UPC_A,Fe.UPC_E,Fe.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return s;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var l=[],f=0,d=n.formatsToSupport;f<d.length;f++){var w=d[f];zw(w)?l.push(w):this.logger.warn("Invalid format: ".concat(w," passed in config, ignoring."))}if(l.length===0)throw"None of formatsToSupport match supported values.";return l},e.prototype.getUseBarCodeDetectorIfSupported=function(n){if(Ri(n))return!0;if(!Ri(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(Ri(n.experimentalFeatures))return!0;var s=n.experimentalFeatures;return Ri(s.useBarCodeDetectorIfSupported)?!0:s.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(n,s,l){var f=this,d=l.qrbox;this.validateQrboxConfig(d);var w=this.toQrdimensions(n,s,d),x=function(v){if(v<Sr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Sr.MIN_QR_BOX_SIZE,"px.")},C=function(v){return v>n&&(f.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=n),v};x(w.width),x(w.height),w.width=C(w.width)},e.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(n,s,l){if(typeof l=="number")return{width:l,height:l};if(typeof l=="function")try{return l(n,s)}catch(f){throw new Error("qrbox config was passed as a function but it failed with unknown error"+f)}return l},e.prototype.setupUi=function(n,s,l){l.isShadedBoxEnabled()&&this.validateQrboxSize(n,s,l);var f=Ri(l.qrbox)?{width:n,height:s}:l.qrbox;this.validateQrboxConfig(f);var d=this.toQrdimensions(n,s,f);d.height>s&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var w=l.isShadedBoxEnabled()&&d.height<=s,x={x:0,y:0,width:n,height:s},C=w?this.getShadedRegionBounds(n,s,d):x,v=this.createCanvasElement(C.width,C.height),S={willReadFrequently:!0},I=v.getContext("2d",S);I.canvas.width=C.width,I.canvas.height=C.height,this.element.append(v),w&&this.possiblyInsertShadingElement(this.element,n,s,d),this.createScannerPausedUiElement(this.element),this.qrRegion=C,this.context=I,this.canvasElement=v},e.prototype.createScannerPausedUiElement=function(n){var s=document.createElement("div");s.innerText=ao.scannerPaused(),s.style.display="none",s.style.position="absolute",s.style.top="0px",s.style.zIndex="1",s.style.background="rgba(9, 9, 9, 0.46)",s.style.color="#FFECEC",s.style.textAlign="center",s.style.width="100%",n.appendChild(s),this.scannerPausedUiElement=s},e.prototype.scanContext=function(n,s){var l=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(f){return n(f.text,t1.createFromQrcodeResult(f)),l.possiblyUpdateShaders(!0),!0}).catch(function(f){l.possiblyUpdateShaders(!1);var d=ao.codeParseError(f);return s(d,Hw.createFrom(d)),!1})},e.prototype.foreverScan=function(n,s,l){var f=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),w=d.videoWidth/d.clientWidth,x=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var C=this.qrRegion.width*w,v=this.qrRegion.height*x,S=this.qrRegion.x*w,I=this.qrRegion.y*x;this.context.drawImage(d,S,I,C,v,0,0,this.qrRegion.width,this.qrRegion.height);var O=function(){f.foreverScanTimeout=setTimeout(function(){f.foreverScan(n,s,l)},f.getTimeoutFps(n.fps))};this.scanContext(s,l).then(function(z){!z&&n.disableFlip!==!0?(f.context.translate(f.context.canvas.width,0),f.context.scale(-1,1),f.scanContext(s,l).finally(function(){O()})):O()}).catch(function(z){f.logger.logError("Error happend while scanning context",z),O()})}},e.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var s="facingMode",l="deviceId",f={user:!0,environment:!0},d="exact",w=function(H){if(H in f)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(H,"'")},x=Object.keys(n);if(x.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(x.length," keys");var C=Object.keys(n)[0];if(C!==s&&C!==l)throw"Only '".concat(s,"' and '").concat(l,"' ")+" are supported for 'cameraIdOrConfig'";if(C===s){var v=n.facingMode;if(typeof v=="string"){if(w(v))return{facingMode:v}}else if(typeof v=="object")if(d in v){if(w(v["".concat(d)]))return{facingMode:{exact:v["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var S=typeof v;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var I=n.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(d in I)return{deviceId:{exact:I["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var O=typeof I;throw"Invalid type of 'deviceId' = ".concat(O)}}}var z=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(z)},e.prototype.computeCanvasDrawConfig=function(n,s,l,f){if(n<=l&&s<=f){var d=(l-n)/2,w=(f-s)/2;return{x:d,y:w,width:n,height:s}}else{var x=n,C=s;return n>l&&(s=l/n*s,n=l),s>f&&(n=f/s*n,s=f),this.logger.log("Image downsampled from "+"".concat(x,"X").concat(C)+" to ".concat(n,"X").concat(s,".")),this.computeCanvasDrawConfig(n,s,l,f)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},e.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(s){s.style.backgroundColor=n?Sr.BORDER_SHADER_MATCH_COLOR:Sr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(n,s,l){var f=n,d=s,w=document.createElement("canvas");return w.style.width="".concat(f,"px"),w.style.height="".concat(d,"px"),w.style.display="none",w.id=Ri(l)?"qr-canvas":l,w},e.prototype.getShadedRegionBounds=function(n,s,l){if(l.width>n||l.height>s)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-l.width)/2,y:(s-l.height)/2,width:l.width,height:l.height}},e.prototype.possiblyInsertShadingElement=function(n,s,l,f){if(!(s-f.width<1||l-f.height<1)){var d=document.createElement("div");d.style.position="absolute";var w=(s-f.width)/2,x=(l-f.height)/2;if(d.style.borderLeft="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(Sr.SHADED_REGION_ELEMENT_ID),s-f.width<11||l-f.height<11)this.hasBorderShaders=!1;else{var C=5,v=40;this.insertShaderBorders(d,v,C,-C,null,0,!0),this.insertShaderBorders(d,v,C,-C,null,0,!1),this.insertShaderBorders(d,v,C,null,-C,0,!0),this.insertShaderBorders(d,v,C,null,-C,0,!1),this.insertShaderBorders(d,C,v+C,-C,null,-C,!0),this.insertShaderBorders(d,C,v+C,null,-C,-C,!0),this.insertShaderBorders(d,C,v+C,-C,null,-C,!1),this.insertShaderBorders(d,C,v+C,null,-C,-C,!1),this.hasBorderShaders=!0}n.append(d)}},e.prototype.insertShaderBorders=function(n,s,l,f,d,w,x){var C=document.createElement("div");C.style.position="absolute",C.style.backgroundColor=Sr.BORDER_SHADER_DEFAULT_COLOR,C.style.width="".concat(s,"px"),C.style.height="".concat(l,"px"),f!==null&&(C.style.top="".concat(f,"px")),d!==null&&(C.style.bottom="".concat(d,"px")),x?C.style.left="".concat(w,"px"):C.style.right="".concat(w,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(C),n.appendChild(C)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(n){return 1e3/n},e}(),u1;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(u1||(u1={}));var og={exports:{}};(function(e){var n=function(){var s=String.fromCharCode,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",d={};function w(C,v){if(!d[C]){d[C]={};for(var S=0;S<C.length;S++)d[C][C.charAt(S)]=S}return d[C][v]}var x={compressToBase64:function(C){if(C==null)return"";var v=x._compress(C,6,function(S){return l.charAt(S)});switch(v.length%4){default:case 0:return v;case 1:return v+"===";case 2:return v+"==";case 3:return v+"="}},decompressFromBase64:function(C){return C==null?"":C==""?null:x._decompress(C.length,32,function(v){return w(l,C.charAt(v))})},compressToUTF16:function(C){return C==null?"":x._compress(C,15,function(v){return s(v+32)})+" "},decompressFromUTF16:function(C){return C==null?"":C==""?null:x._decompress(C.length,16384,function(v){return C.charCodeAt(v)-32})},compressToUint8Array:function(C){for(var v=x.compress(C),S=new Uint8Array(v.length*2),I=0,O=v.length;I<O;I++){var z=v.charCodeAt(I);S[I*2]=z>>>8,S[I*2+1]=z%256}return S},decompressFromUint8Array:function(C){if(C==null)return x.decompress(C);for(var v=new Array(C.length/2),S=0,I=v.length;S<I;S++)v[S]=C[S*2]*256+C[S*2+1];var O=[];return v.forEach(function(z){O.push(s(z))}),x.decompress(O.join(""))},compressToEncodedURIComponent:function(C){return C==null?"":x._compress(C,6,function(v){return f.charAt(v)})},decompressFromEncodedURIComponent:function(C){return C==null?"":C==""?null:(C=C.replace(/ /g,"+"),x._decompress(C.length,32,function(v){return w(f,C.charAt(v))}))},compress:function(C){return x._compress(C,16,function(v){return s(v)})},_compress:function(C,v,S){if(C==null)return"";var I,O,z={},H={},j="",ee="",F="",D=2,P=3,V=2,re=[],$=0,W=0,Z;for(Z=0;Z<C.length;Z+=1)if(j=C.charAt(Z),Object.prototype.hasOwnProperty.call(z,j)||(z[j]=P++,H[j]=!0),ee=F+j,Object.prototype.hasOwnProperty.call(z,ee))F=ee;else{if(Object.prototype.hasOwnProperty.call(H,F)){if(F.charCodeAt(0)<256){for(I=0;I<V;I++)$=$<<1,W==v-1?(W=0,re.push(S($)),$=0):W++;for(O=F.charCodeAt(0),I=0;I<8;I++)$=$<<1|O&1,W==v-1?(W=0,re.push(S($)),$=0):W++,O=O>>1}else{for(O=1,I=0;I<V;I++)$=$<<1|O,W==v-1?(W=0,re.push(S($)),$=0):W++,O=0;for(O=F.charCodeAt(0),I=0;I<16;I++)$=$<<1|O&1,W==v-1?(W=0,re.push(S($)),$=0):W++,O=O>>1}D--,D==0&&(D=Math.pow(2,V),V++),delete H[F]}else for(O=z[F],I=0;I<V;I++)$=$<<1|O&1,W==v-1?(W=0,re.push(S($)),$=0):W++,O=O>>1;D--,D==0&&(D=Math.pow(2,V),V++),z[ee]=P++,F=String(j)}if(F!==""){if(Object.prototype.hasOwnProperty.call(H,F)){if(F.charCodeAt(0)<256){for(I=0;I<V;I++)$=$<<1,W==v-1?(W=0,re.push(S($)),$=0):W++;for(O=F.charCodeAt(0),I=0;I<8;I++)$=$<<1|O&1,W==v-1?(W=0,re.push(S($)),$=0):W++,O=O>>1}else{for(O=1,I=0;I<V;I++)$=$<<1|O,W==v-1?(W=0,re.push(S($)),$=0):W++,O=0;for(O=F.charCodeAt(0),I=0;I<16;I++)$=$<<1|O&1,W==v-1?(W=0,re.push(S($)),$=0):W++,O=O>>1}D--,D==0&&(D=Math.pow(2,V),V++),delete H[F]}else for(O=z[F],I=0;I<V;I++)$=$<<1|O&1,W==v-1?(W=0,re.push(S($)),$=0):W++,O=O>>1;D--,D==0&&(D=Math.pow(2,V),V++)}for(O=2,I=0;I<V;I++)$=$<<1|O&1,W==v-1?(W=0,re.push(S($)),$=0):W++,O=O>>1;for(;;)if($=$<<1,W==v-1){re.push(S($));break}else W++;return re.join("")},decompress:function(C){return C==null?"":C==""?null:x._decompress(C.length,32768,function(v){return C.charCodeAt(v)})},_decompress:function(C,v,S){var I=[],O=4,z=4,H=3,j="",ee=[],F,D,P,V,re,$,W,Z={val:S(0),position:v,index:1};for(F=0;F<3;F+=1)I[F]=F;for(P=0,re=Math.pow(2,2),$=1;$!=re;)V=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=v,Z.val=S(Z.index++)),P|=(V>0?1:0)*$,$<<=1;switch(P){case 0:for(P=0,re=Math.pow(2,8),$=1;$!=re;)V=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=v,Z.val=S(Z.index++)),P|=(V>0?1:0)*$,$<<=1;W=s(P);break;case 1:for(P=0,re=Math.pow(2,16),$=1;$!=re;)V=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=v,Z.val=S(Z.index++)),P|=(V>0?1:0)*$,$<<=1;W=s(P);break;case 2:return""}for(I[3]=W,D=W,ee.push(W);;){if(Z.index>C)return"";for(P=0,re=Math.pow(2,H),$=1;$!=re;)V=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=v,Z.val=S(Z.index++)),P|=(V>0?1:0)*$,$<<=1;switch(W=P){case 0:for(P=0,re=Math.pow(2,8),$=1;$!=re;)V=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=v,Z.val=S(Z.index++)),P|=(V>0?1:0)*$,$<<=1;I[z++]=s(P),W=z-1,O--;break;case 1:for(P=0,re=Math.pow(2,16),$=1;$!=re;)V=Z.val&Z.position,Z.position>>=1,Z.position==0&&(Z.position=v,Z.val=S(Z.index++)),P|=(V>0?1:0)*$,$<<=1;I[z++]=s(P),W=z-1,O--;break;case 2:return ee.join("")}if(O==0&&(O=Math.pow(2,H),H++),I[W])j=I[W];else if(W===z)j=D+D.charAt(0);else return null;ee.push(j),I[z++]=D+j.charAt(0),O--,D=j,O==0&&(O=Math.pow(2,H),H++)}}};return x}();e!=null?e.exports=n:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return n})})(og);var c1=og.exports;const cy="ws://localhost:4000",hy=3500,fy=5,dy=9e3,py=5,gy=120,ag=1e4,lo=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981","#06b6d4","#3b82f6","#8b5cf6","#d946ef","#f43f5e"],h1={connectionStatus:"disconnected",sessionId:"",participantId:"",role:null,peers:{},logs:[],socket:null,hostPeerId:null,shouldReconnect:!1,reconnectAttempts:0,pendingCode:"",lastStateVersion:0,locationIntervalMs:ag,lastClientRouteHash:"",lastClientRoutePushAt:0},f1=(e=[])=>{const n={};return e.forEach(s=>{s!=null&&s.id&&(n[s.id]={id:s.id,color:s.color??lo[Math.floor(Math.random()*lo.length)],label:s.label??s.id,role:s.role??"client",location:s.location??null,routes:s.routes??null})}),n},my=()=>new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date),vy=(e,n)=>{if(!e||typeof e!="object")return null;const s=e.position??e,l=Number(s==null?void 0:s.lat),f=Number(s==null?void 0:s.lng);return!Number.isFinite(l)||!Number.isFinite(f)?null:{id:typeof e.id=="string"?e.id:`PT-${n}`,name:typeof e.name=="string"?e.name:void 0,position:{lat:l,lng:f}}},wy=(e=[])=>Array.isArray(e)?e.map((n,s)=>{if(!n||typeof n!="object")return null;const l=Array.isArray(n.items)?n.items.map((f,d)=>vy(f,d)).filter(Boolean):[];return l.length<2?null:{id:typeof n.id=="string"?n.id:`R-${s}`,name:typeof n.name=="string"?n.name:void 0,color:typeof n.color=="string"?n.color:null,items:l}}).filter(Boolean):[],lg=lf((e,n)=>{let s=null;const l=(j,ee="info")=>{e(F=>({logs:[...F.logs,{time:my(),message:j,type:ee}]}))},f=()=>{s&&(clearTimeout(s),s=null)},d=()=>{const j=n().socket;if(j){j.onopen=null,j.onmessage=null,j.onclose=null,j.onerror=null;try{j.close()}catch{}}e({socket:null})},w=()=>{f(),e({...h1})},x=(j=[])=>{const ee=n().peers,F=f1(j);e({peers:{...ee,...F}})},C=j=>{e(ee=>{if(!ee.peers[j])return ee;const F={...ee.peers};return delete F[j],{peers:F}})},v=j=>{var re,$;if(!(j!=null&&j.data)||n().role==="host")return;let ee;try{if(ee=c1.decompressFromEncodedURIComponent(j.data),!ee)throw new Error("decode-failed")}catch{l("Failed to decode host snapshot","error");return}let F;try{F=JSON.parse(ee)}catch{l("Malformed snapshot payload","error");return}const D=n().hostPeerId??F.hostPeerId??"HOST-LINK",P=((re=n().peers[D])==null?void 0:re.color)??"#38bdf8",V=(($=n().peers[D])==null?void 0:$.label)??"HQ";e(W=>{var Z;return{peers:{...W.peers,[D]:{id:D,color:P,label:V,role:"host",location:((Z=W.peers[D])==null?void 0:Z.location)??null,routes:F.routes??null,snapshot:F,updatedAt:Date.now()}},hostPeerId:D,lastStateVersion:j.version??W.lastStateVersion}})},S=(j,ee)=>j==="host"?{type:"host:init"}:{type:"client:join",payload:{sessionId:ee}},I=()=>{f();const{shouldReconnect:j,reconnectAttempts:ee,pendingCode:F}=n();if(!j||!F){w();return}if(ee>=fy){l("Gave up trying to reconnect.","error"),e({connectionStatus:"disconnected",shouldReconnect:!1});return}s=setTimeout(()=>{z({role:"client",sessionCode:F,isReconnect:!0})},hy),e({connectionStatus:"reconnecting",reconnectAttempts:ee+1}),l("Attempting to relink","info")},O=j=>{var D;const{type:ee,payload:F}=j;switch(ee){case"session:ready":{const P=(F==null?void 0:F.peers)??[],V=f1(P),re=P.find(W=>W.role==="host"),$=Number(F==null?void 0:F.intervalMs);f(),e({connectionStatus:"connected",sessionId:F.sessionId,participantId:F.participantId,role:F.role,peers:V,hostPeerId:(re==null?void 0:re.id)??n().hostPeerId,reconnectAttempts:0,shouldReconnect:F.role==="client",logs:[],lastStateVersion:((D=F.state)==null?void 0:D.version)??0,locationIntervalMs:Number.isFinite($)?$:ag}),l(F.role==="host"?`Session ${F.sessionId} online`:`Linked to ${F.sessionId}`,"success"),F.state&&v(F.state);break}case"session:peer-joined":{const P=F==null?void 0:F.participant;P!=null&&P.id&&(x([P]),l(`${P.label??P.id} linked`,"info"));break}case"session:peer-left":{F!=null&&F.participantId&&(C(F.participantId),l(`${F.participantId} dropped`,"warn"));break}case"session:location":{const{participantId:P,location:V}=F??{};if(!P||!V)return;e(re=>({peers:{...re.peers,[P]:{...re.peers[P]??{id:P,color:lo[Math.floor(Math.random()*lo.length)],label:P},location:V}}}));break}case"session:peer-routes":{const{participantId:P,routes:V}=F??{};if(!P)break;const re=wy(V);e($=>({peers:{...$.peers,[P]:{...$.peers[P]??{id:P,color:lo[Math.floor(Math.random()*lo.length)],label:P},routes:re}}})),n().role==="host"&&l(`${P} shared ${re.length} route(s)`,"info");break}case"session:interval":{const P=Number(F==null?void 0:F.intervalMs);Number.isFinite(P)&&(e({locationIntervalMs:P}),n().role==="client"&&l(`Host set updates to ${Math.round(P/1e3)}s`,"info"));break}case"session:message":{const{participantId:P,text:V}=F??{};V&&l(`${P??"peer"}: ${V}`,"message-received");break}case"session:state":v(F);break;case"session:ended":w(),l("Host ended the session.","error");break;case"session:error":l((F==null?void 0:F.message)??"Unknown server error","error");break}},z=({role:j,sessionCode:ee,isReconnect:F=!1})=>{if(d(),f(),j==="client"&&!ee){l("Session code required.","error");return}const D=new WebSocket(cy);e({socket:D,connectionStatus:F?"reconnecting":"connecting",role:j,pendingCode:j==="client"?ee:"",shouldReconnect:j==="client"}),D.onopen=()=>{const P=S(j,ee);D.send(JSON.stringify(P))},D.onmessage=P=>{try{const V=JSON.parse(P.data);O(V)}catch{l("Malformed message from server","error")}},D.onerror=()=>{l("Socket error","error")},D.onclose=()=>{j==="client"&&n().shouldReconnect?I():w()}},H=j=>{const ee=n().socket;return!ee||ee.readyState!==WebSocket.OPEN?!1:(ee.send(JSON.stringify(j)),!0)};return{...h1,logs:[],startHostSession:()=>z({role:"host"}),joinSession:j=>{const ee=(j||"").trim().toUpperCase();if(!ee){l("Enter a code to connect.","warn");return}z({role:"client",sessionCode:ee})},disconnect:()=>{e({shouldReconnect:!1}),d(),w(),l("Link closed locally.","info")},sendMessage:j=>{const ee=(j||"").trim();if(!ee)return;H({type:"participant:message",payload:{text:ee}})&&l(`me: ${ee}`,"message-sent")},sendLocation:j=>{!j||n().role!=="client"||H({type:"participant:location",payload:{location:j}})},shareRoutes:j=>{if(!(n().role!=="host"||!j))try{const ee={routes:j,generatedAt:Date.now(),hostPeerId:n().participantId||"HOST-LINK"},F=c1.compressToEncodedURIComponent(JSON.stringify(ee));H({type:"host:state",payload:{data:F}})}catch{l("Failed to upload route snapshot","error")}},sendClientRoutes:j=>{if(n().role!=="client"||!j)return;const ee=JSON.stringify(j),F=Date.now(),{lastClientRouteHash:D,lastClientRoutePushAt:P}=n();if(ee===D||F-P<dy)return;H({type:"client:routes",payload:{routes:j}})&&(e({lastClientRouteHash:ee,lastClientRoutePushAt:F}),l("Shared route snapshot with HQ","info"))},clearLogs:()=>e({logs:[]}),updateLocationInterval:j=>{if(n().role!=="host")return;const ee=Number(j);if(!Number.isFinite(ee))return;const D=Math.min(gy,Math.max(py,Math.round(ee)))*1e3;e({locationIntervalMs:D}),H({type:"host:interval",payload:{intervalMs:D}})}}}),yy=({onScan:e,onClose:n})=>{const s=K.useRef(null),[l,f]=K.useState(""),d=K.useCallback(async()=>{if(s.current)try{await s.current.stop()}catch{}finally{try{await s.current.clear()}catch{}s.current=null}},[]);return K.useEffect(()=>{let w=!0;return(async()=>{try{const C=await l1.getCameras();if(!w)return;const v=C.find(z=>/back|rear|environment/i.test(z.label||""))??C[0],S=v?{deviceId:{exact:v.id}}:{facingMode:"environment"},I=Math.min(window.innerWidth,320),O=new l1("qr-reader",{verbose:!1});s.current=O,await O.start(S,{fps:10,qrbox:{width:I,height:I}},async z=>{await d(),e(z)},()=>{})}catch(C){if(!w)return;f((C==null?void 0:C.message)??"Camera unavailable")}})(),()=>{w=!1,d()}},[e,d]),b.jsxs("div",{className:"fixed inset-0 z-[2000] bg-black/90 flex flex-col items-center justify-center p-4",children:[b.jsxs("div",{className:"w-full max-w-sm rounded-2xl border border-slate-700 bg-slate-900/70 p-3 text-center text-sm text-slate-300",children:[b.jsx("div",{id:"qr-reader",className:"aspect-square w-full overflow-hidden rounded-xl bg-slate-950"}),l&&b.jsx("p",{className:"mt-3 text-xs text-rose-300",children:l})]}),b.jsx("button",{onClick:async()=>{await d(),n()},className:"mt-4 w-full max-w-sm rounded-full bg-slate-700 py-2 text-white hover:bg-slate-600",children:"Close Camera"})]})},_y=()=>{const{connectionStatus:e,sessionId:n,startHostSession:s,joinSession:l,logs:f,sendMessage:d,disconnect:w,peers:x,clearLogs:C,role:v,locationIntervalMs:S,updateLocationInterval:I}=lg(),[O,z]=K.useState(""),[H,j]=K.useState(""),[ee,F]=K.useState("receiver"),[D,P]=K.useState(!1),[V,re]=K.useState(()=>Math.round((S??1e4)/1e3)),$=K.useRef(null);K.useEffect(()=>{var ne;(ne=$.current)==null||ne.scrollIntoView({behavior:"smooth"})},[f]),K.useEffect(()=>{v==="client"?F("sender"):v==="host"&&F("receiver")},[v]),K.useEffect(()=>{re(Math.round((S??1e4)/1e3))},[S]);const W=()=>{n&&(navigator.clipboard.writeText(n),alert("ID copied to clipboard!"))},Z=()=>{s()},X=()=>{O&&l(O)},he=ne=>{z(ne),P(!1),l(ne)},ue=ne=>{ne.preventDefault(),H&&(d(H),j(""))},fe=Object.keys(x).length,J=e==="connected"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/50":e==="connecting"?"bg-amber-500/20 text-amber-400 border border-amber-500/50":e==="reconnecting"?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-slate-800 text-slate-400 border border-slate-700";return b.jsxs("div",{className:"p-4 bg-slate-900 text-slate-100 rounded-lg shadow-md max-w-md mx-auto mt-4 border border-slate-800",children:[b.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-100",children:"Server Connection Manager"}),b.jsxs("div",{className:"mb-4 flex flex-col gap-2",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("span",{className:`px-2 py-1 rounded text-sm font-semibold ${J}`,children:["Status: ",e]}),e==="connected"&&b.jsxs("span",{className:"text-xs text-slate-400",children:["(",fe," peer",fe!==1?"s":"",")"]})]}),b.jsx("div",{className:"flex items-center gap-2",children:e!=="disconnected"&&b.jsx("button",{onClick:w,className:"text-sm text-rose-400 hover:text-rose-300 underline",children:"Disconnect"})})]}),fe>0&&b.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:Object.values(x).map(ne=>b.jsxs("div",{className:"flex items-center gap-1 bg-slate-800 px-2 py-1 rounded border border-slate-700 text-xs",children:[b.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:ne.color||"#ccc"}}),b.jsx("span",{className:"text-slate-300",title:ne.id,children:ne.label??ne.id.substring(0,6)})]},ne.id))})]}),b.jsxs("div",{className:"flex space-x-4 mb-6 border-b border-slate-700 pb-2",children:[b.jsx("button",{className:`pb-2 transition-colors ${ee==="receiver"?"border-b-2 border-sky-500 font-bold text-sky-400":"text-slate-400 hover:text-slate-200"}`,onClick:()=>F("receiver"),children:"Receiver (Host)"}),b.jsx("button",{className:`pb-2 transition-colors ${ee==="sender"?"border-b-2 border-sky-500 font-bold text-sky-400":"text-slate-400 hover:text-slate-200"}`,onClick:()=>F("sender"),children:"Sender (Field)"})]}),ee==="receiver"&&b.jsxs("div",{children:[b.jsx("button",{onClick:Z,className:"w-full bg-sky-600 text-white py-2 rounded hover:bg-sky-500 transition font-semibold mb-4",disabled:e!=="disconnected",children:e==="disconnected"?"Create Room":"Room Active"}),e==="connecting"&&!n&&b.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-500"}),b.jsx("p",{className:"text-slate-400 text-sm",children:"Initializing Session..."})]}),n&&b.jsxs("div",{className:"mt-4 space-y-4 animate-in fade-in slide-in-from-top-4 duration-300",children:[b.jsxs("div",{className:"bg-amber-500/10 p-3 rounded border border-amber-500/30 text-sm text-amber-200",children:["Share this ",b.jsx("strong",{children:"Room Code"})," with field devices"]}),b.jsx("div",{className:"flex justify-center bg-white p-4 rounded-lg",children:b.jsx(ng,{value:n,size:192})}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("input",{readOnly:!0,value:n,className:"flex-1 p-2 text-center text-lg font-bold tracking-widest border border-slate-700 rounded bg-slate-950 text-sky-400 font-mono focus:outline-none"}),b.jsx("button",{onClick:W,className:"px-4 border border-slate-600 rounded hover:bg-slate-800 text-slate-300 transition",children:"Copy"})]}),b.jsxs("div",{className:"mt-4 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[b.jsxs("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-wide text-slate-400",children:[b.jsx("span",{children:"Field update cadence"}),b.jsxs("span",{className:"font-semibold text-slate-200",children:[V,"s"]})]}),b.jsx("input",{type:"range",min:"5",max:"120",step:"5",value:V,onChange:ne=>{const Y=Number(ne.target.value);re(Y),I(Y)},className:"mt-3 w-full accent-sky-500",disabled:v!=="host"}),b.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Senders only transmit location/routes upstream. HQ receives every ",V," seconds (5120s)."]})]})]})]}),ee==="sender"&&b.jsxs("div",{children:[e==="disconnected"&&b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"bg-amber-500/10 p-3 rounded border border-amber-500/30 text-sm text-amber-200",children:["Enter the ",b.jsx("strong",{children:"Room Code"})," from HQ"]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("input",{placeholder:"Enter Code",value:O,onChange:ne=>z(ne.target.value.toUpperCase()),className:"flex-1 p-2 text-lg font-mono border border-slate-700 rounded bg-slate-950 text-slate-100 focus:border-sky-500 focus:outline-none"}),b.jsx("button",{onClick:()=>P(!0),className:"px-3 bg-slate-700 text-white rounded hover:bg-slate-600 transition",title:"Scan QR Code",children:""})]}),b.jsx("button",{onClick:X,className:"w-full bg-emerald-600 text-white py-2 rounded hover:bg-emerald-500 transition font-semibold disabled:opacity-50 disabled:cursor-not-allowed",disabled:!O,children:"Join Room"})]}),e==="connecting"&&b.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-500"}),b.jsx("p",{className:"text-slate-400 text-sm",children:"Connecting to host..."})]}),e==="reconnecting"&&b.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[b.jsx("div",{className:"animate-pulse rounded-full h-8 w-8 border-b-2 border-orange-400"}),b.jsx("p",{className:"text-slate-400 text-sm",children:"Trying to relink..."})]})]}),D&&b.jsx(yy,{onScan:he,onClose:()=>P(!1)}),e==="connected"&&b.jsx("div",{className:"mt-4",children:b.jsxs("form",{onSubmit:ue,className:"flex gap-2",children:[b.jsx("input",{type:"text",value:H,onChange:ne=>j(ne.target.value),placeholder:"Type a message...",className:"flex-1 border border-slate-700 bg-slate-950 text-slate-100 rounded px-2 py-1 focus:border-sky-500 focus:outline-none"}),b.jsx("button",{type:"submit",className:"bg-sky-600 text-white px-4 py-1 rounded hover:bg-sky-500 transition",children:"Send"})]})}),b.jsxs("div",{className:"mt-6 border-t border-slate-700 pt-2",children:[b.jsxs("div",{className:"flex items-center justify-between mb-1",children:[b.jsx("h3",{className:"text-xs font-bold text-slate-500",children:"Connection Logs"}),b.jsx("button",{onClick:C,className:"text-[10px] text-slate-500 hover:text-slate-300 underline",children:"Clear"})]}),b.jsxs("div",{className:"h-32 overflow-y-auto bg-slate-950 p-2 text-xs font-mono rounded border border-slate-800",children:[f.length===0&&b.jsx("span",{className:"text-slate-600",children:"No logs yet..."}),f.map((ne,Y)=>{const ye=ne.type==="message-received"||ne.type==="message-sent",de=ne.type==="message-received"?"text-sky-400":ne.type==="message-sent"?"text-emerald-400":ne.type==="error"?"text-rose-400":"text-slate-400";return b.jsxs("div",{className:`${de} ${ye?"font-bold":""}`,children:[b.jsxs("span",{className:"opacity-50 mr-2",children:["[",ne.time,"]"]}),ne.message]},Y)}),b.jsx("div",{ref:$})]})]})]})},Cy=()=>{const{checkpoints:e,checkpointMap:n,routes:s,activeRouteId:l,selectedId:f,selectCheckpoint:d,addCheckpoint:w}=No(),[x,C]=K.useState(null);K.useEffect(()=>{!x&&l&&C(l)},[l,x]);const v=K.useMemo(()=>{const we=x||l,Re=s.find(Mt=>Mt.id===we);return Re?Re.items.map((Mt,Yn)=>{const At=n[Mt];return At?{id:At.id,label:At.name||`Point ${Yn+1}`,position:At.position}:null}).filter(Boolean):[]},[x,l,s,n]),S=K.useMemo(()=>v.find(we=>we.id===f)??null,[v,f]),I=(S==null?void 0:S.position)??null,{heading:O,bearing:z,distance:H,geolocation:j,error:ee,needsPermission:F,isSupported:D,locationEnabled:P,hasLocationFix:V,isRequestingLocation:re,requestPermission:$,startGeolocation:W}=gw(I),{sendLocation:Z,shareRoutes:X,sendClientRoutes:he,connectionStatus:ue,peers:fe,role:J,locationIntervalMs:ne}=lg(),Y=K.useRef(0);K.useEffect(()=>{if(ue==="connected"&&J==="client"&&j){const we=Date.now(),Re=Math.max(ne??1e4,5e3);we-Y.current>Re-50&&(Z(j),Y.current=we)}},[j,ue,J,Z,ne]);const ye=K.useMemo(()=>s.map(we=>({...we,items:we.items.map(Re=>n[Re]).filter(Boolean)})),[s,n]);K.useEffect(()=>{ue==="connected"&&J==="host"&&X(ye)},[ue,J,X,ye]),K.useEffect(()=>{ue==="connected"&&J==="client"&&he(ye)},[ue,J,ye,he]);const de=K.useMemo(()=>v.filter(we=>we.id!==f).map(we=>{if(!j)return{...we,bearing:null,distance:null,relativeBearing:null};const Re=Hp(j,we.position),Mt=Wp(O,Re);return{...we,bearing:Re,distance:Vp(j,we.position),relativeBearing:Mt??Re}}),[j,v,f,O]),[te,pe]=K.useState(null),[ce,Ee]=K.useState(!1),[Ne,Ze]=K.useState(!1),[Ae,Me]=K.useState(0),[ge,vt]=K.useState("degrees"),[He,Pn]=K.useState("topo"),[Ln,kt]=K.useState("light"),[dt,Xe]=K.useState(.58),[Zn,Wt]=K.useState(null),[Dn,De]=K.useState(!1),Ue=K.useRef(null),Ge=K.useRef(!1),tn=K.useRef(null),[Te,qt]=K.useState(!1),li=.32,Zt=.85,or=K.useCallback(we=>Math.min(Math.max(we,li),Zt),[Zt,li]),bt=K.useCallback(()=>{const we=W();return we&&Me(Re=>Re+1),we},[W]),ui=K.useCallback(()=>{vt(we=>we==="degrees"?"mils":"degrees")},[]),Gn=K.useCallback(()=>{Ee(we=>{const Re=!we;return Re&&(pe(null),Ze(!1)),Re})},[]),nn=K.useCallback(()=>{Ze(we=>{const Re=!we;return Re&&(pe(null),Ee(!1)),Re})},[]),An=K.useCallback(we=>{pe(Re=>Re===we?null:we),Ee(!1),Ze(!1),Xe(Re=>or(Re))},[or]),Xn=K.useCallback(()=>{An("compass")},[An]),mr=K.useCallback(()=>{An("checkpoints")},[An]),ct=K.useCallback(we=>{const Re=Ue.current;if(!Re)return;const{startY:Mt,startHeight:Yn}=Re;if(window.innerHeight===0)return;const At=(Mt-we.clientY)/window.innerHeight,fn=Math.abs(Mt-we.clientY);!Re.moved&&fn>6&&(Re.moved=!0),Xe(or(Yn+At))},[or]),xe=K.useCallback(()=>{var Re,Mt;const we=Ue.current;we!=null&&we.target&&we.pointerId!=null&&((Mt=(Re=we.target).releasePointerCapture)==null||Mt.call(Re,we.pointerId)),Ue.current=null,window.removeEventListener("pointermove",ct),window.removeEventListener("pointerup",xe),we&&!we.moved&&we.overlayId&&pe(Yn=>Yn===we.overlayId?null:Yn)},[ct,pe]),Ct=K.useCallback(we=>{var At,fn;if(window.innerHeight===0)return;we.preventDefault();const Re=we.pointerId,Mt=we.clientY,Yn=we.currentTarget.dataset.overlayId??null;Ue.current={startY:Mt,startHeight:dt,pointerId:Re,target:we.currentTarget,overlayId:Yn,moved:!1},(fn=(At=we.currentTarget).setPointerCapture)==null||fn.call(At,Re),window.addEventListener("pointermove",ct,{passive:!0}),window.addEventListener("pointerup",xe,{passive:!0})},[dt,ct,xe]);K.useEffect(()=>()=>{window.removeEventListener("pointermove",ct),window.removeEventListener("pointerup",xe)},[ct,xe]);const Ke=K.useMemo(()=>({"--overlay-height":`${(or(dt)*100).toFixed(2)}vh`,"--overlay-max-height":`${(Zt*100).toFixed(2)}vh`}),[Zt,or,dt]);K.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;window.matchMedia("(prefers-color-scheme: dark)").matches&&(Pn(Re=>Re==="street"?"dark":Re),kt("dark"))},[]),K.useEffect(()=>{bt()},[bt]),K.useEffect(()=>{tn.current=j},[j]),K.useEffect(()=>{if(!Ge.current){Ge.current=!0;return}P?bt():tn.current&&Me(we=>we+1)},[He,P,bt]);const Qe=K.useCallback(()=>{kt(we=>we==="light"?"dark":"light")},[]),rn=K.useCallback((we,Re)=>{w(Re)},[w]),xn=K.useMemo(()=>e.map(we=>(we==null?void 0:we.id)??"").join("|"),[e]);return K.useEffect(()=>{Wt(null)},[xn]),b.jsxs("div",{className:"relative viewport-safe bg-slate-950 text-slate-100",children:[b.jsx(dw,{userLocation:j,peers:fe,userHeading:O,targets:de,onEnableLocation:bt,locationEnabled:P,hasLocationFix:V,isRequestingLocation:re,locationRequestToken:Ae,baseLayer:He,onBaseLayerChange:Pn,onToggleMenu:Gn,onOpenCompass:Xn,onOpenRoute:mr,toolbarTheme:Ln,onToolbarThemeToggle:Qe,isMenuOpen:ce,isSettingsOpen:Ne,onToggleSettings:nn,previewLocation:Zn,onDropItem:rn,hideToolbar:Te}),!Te&&te==="compass"&&b.jsxs("div",{className:"pointer-events-auto overlay-sheet fixed inset-x-0 bottom-0 z-[1300] mx-auto w-full max-w-md overflow-y-auto overscroll-contain rounded-t-3xl border border-slate-800 bg-slate-900 p-3 shadow-2xl shadow-slate-950/80 md:bottom-6 md:left-auto md:right-6 md:max-w-sm md:rounded-2xl",style:Ke,children:[b.jsx("div",{className:"mb-3 flex justify-center",children:b.jsx("button",{type:"button","data-overlay-id":"compass",className:"group flex h-12 w-full max-w-[220px] cursor-row-resize items-center justify-center rounded-full bg-slate-900 shadow-inner shadow-slate-950/40 ring-1 ring-slate-700/60 transition hover:ring-slate-500/80 active:bg-slate-800 touch-none","aria-label":"Drag to resize or tap to close panel",onPointerDown:Ct,children:b.jsx("span",{className:"block h-2 w-16 rounded-full bg-slate-500 transition group-active:bg-slate-300"})})}),b.jsxs("div",{className:"mb-2 text-left text-[11px]",children:[b.jsx("p",{className:"font-semibold uppercase tracking-wide text-slate-500",children:"Compass"}),b.jsx("p",{className:"text-xs text-slate-400",children:"Heading & bearings"})]}),b.jsx(vw,{heading:O,bearing:z,distance:H,error:ee,enableCompass:$,onEnableLocation:bt,needsPermission:F,isSupported:D,locationEnabled:P,hasLocationFix:V,isRequestingLocation:re,targets:de,selectedTarget:S,onSelectTarget:d,bearingUnit:ge,onToggleBearingUnit:ui,routes:s,activeRouteId:x,onSelectRoute:C})]}),!Te&&te==="checkpoints"&&b.jsxs("div",{className:"pointer-events-auto overlay-sheet fixed inset-x-0 bottom-0 z-[1300] mx-auto w-full max-w-md overflow-y-auto overscroll-contain rounded-t-3xl border border-slate-800 bg-slate-900 p-3 shadow-2xl shadow-slate-950/80 md:left-6 md:right-auto md:top-6 md:max-w-xs md:rounded-2xl md:rounded-bl-none md:rounded-br-xl",style:Ke,children:[b.jsx("div",{className:"mb-3 flex justify-center",children:b.jsx("button",{type:"button","data-overlay-id":"checkpoints",className:"group flex h-12 w-full max-w-[220px] cursor-row-resize items-center justify-center rounded-full bg-slate-900 shadow-inner shadow-slate-950/40 ring-1 ring-slate-700/60 transition hover:ring-slate-500/80 active:bg-slate-800 touch-none","aria-label":"Drag to resize or tap to close panel",onPointerDown:Ct,children:b.jsx("span",{className:"block h-2 w-16 rounded-full bg-slate-500 transition group-active:bg-slate-300"})})}),b.jsxs("div",{className:"mb-2 text-left text-[11px]",children:[b.jsx("p",{className:"font-semibold uppercase tracking-wide text-slate-500",children:"Route tools"}),b.jsx("p",{className:"text-xs text-slate-400",children:"Manage checkpoints"})]}),b.jsx(yw,{onEnterPlacingMode:()=>qt(!0)})]}),!Te&&te==="grid"&&b.jsxs("div",{className:"pointer-events-auto overlay-sheet fixed inset-x-0 bottom-0 z-[1300] mx-auto w-full max-w-md overflow-y-auto overscroll-contain rounded-t-3xl border border-slate-800 bg-slate-900 p-3 shadow-2xl shadow-slate-950/80 md:left-auto md:right-6 md:top-6 md:max-w-md md:rounded-2xl",style:Ke,children:[b.jsx("div",{className:"mb-3 flex justify-center",children:b.jsx("button",{type:"button","data-overlay-id":"grid",className:"group flex h-12 w-full max-w-[220px] cursor-row-resize items-center justify-center rounded-full bg-slate-900 shadow-inner shadow-slate-950/40 ring-1 ring-slate-700/60 transition hover:ring-slate-500/80 active:bg-slate-800 touch-none","aria-label":"Drag to resize or tap to close panel",onPointerDown:Ct,children:b.jsx("span",{className:"block h-2 w-16 rounded-full bg-slate-500 transition group-active:bg-slate-300"})})}),b.jsxs("div",{className:"mb-2 text-left text-[11px]",children:[b.jsx("p",{className:"font-semibold uppercase tracking-wide text-slate-500",children:"Grid tools"}),b.jsx("p",{className:"text-xs text-slate-400",children:"References & bearings"})]}),b.jsx(Tw,{userLocation:j,selectedPosition:I,onPreviewLocationChange:Wt})]}),!Te&&te==="server"&&b.jsxs("div",{className:"pointer-events-auto overlay-sheet fixed inset-x-0 bottom-0 z-[1300] mx-auto w-full max-w-md overflow-y-auto overscroll-contain rounded-t-3xl border border-slate-800 bg-slate-900 p-3 shadow-2xl shadow-slate-950/80 md:left-auto md:right-6 md:top-6 md:max-w-md md:rounded-2xl",style:Ke,children:[b.jsx("div",{className:"mb-3 flex justify-center",children:b.jsx("button",{type:"button","data-overlay-id":"server",className:"group flex h-12 w-full max-w-[220px] cursor-row-resize items-center justify-center rounded-full bg-slate-900 shadow-inner shadow-slate-950/40 ring-1 ring-slate-700/60 transition hover:ring-slate-500/80 active:bg-slate-800 touch-none","aria-label":"Drag to resize or tap to close panel",onPointerDown:Ct,children:b.jsx("span",{className:"block h-2 w-16 rounded-full bg-slate-500 transition group-active:bg-slate-300"})})}),b.jsxs("div",{className:"mb-2 text-left text-[11px]",children:[b.jsx("p",{className:"font-semibold uppercase tracking-wide text-slate-500",children:"Server Session"}),b.jsx("p",{className:"text-xs text-slate-400",children:"Host rooms & share coordinates"})]}),b.jsx(_y,{})]}),!Te&&ce&&b.jsx("div",{className:"pointer-events-auto absolute inset-x-0 bottom-28 z-[1300] flex justify-center px-4 md:bottom-32",children:b.jsxs("div",{className:"w-full max-w-xs rounded-2xl border border-slate-800 bg-slate-950 p-3 text-[12px] text-slate-100 shadow-xl shadow-slate-950/80",children:[b.jsx("p",{className:"mb-2 text-[11px] font-semibold uppercase tracking-wide text-slate-400",children:"Navigate"}),b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsxs("button",{type:"button",className:`flex items-center justify-between rounded-lg border px-3 py-2 font-semibold transition ${te==="compass"?"border-sky-500 bg-sky-500 text-slate-950":"border-slate-700 bg-slate-900 hover:border-sky-500 hover:text-sky-100"}`,onClick:()=>An("compass"),children:["Compass",b.jsx("span",{className:`text-[10px] ${te==="compass"?"text-slate-800":"text-slate-400"}`,children:"Heading"})]}),b.jsxs("button",{type:"button",className:`flex items-center justify-between rounded-lg border px-3 py-2 font-semibold transition ${te==="checkpoints"?"border-sky-500 bg-sky-500 text-slate-950":"border-slate-700 bg-slate-900 hover:border-sky-500 hover:text-sky-100"}`,onClick:()=>An("checkpoints"),children:["Route",b.jsx("span",{className:`text-[10px] ${te==="checkpoints"?"text-slate-800":"text-slate-400"}`,children:"Checkpoints"})]}),b.jsxs("button",{type:"button",className:`flex items-center justify-between rounded-lg border px-3 py-2 font-semibold transition ${te==="grid"?"border-sky-500 bg-sky-500 text-slate-950":"border-slate-700 bg-slate-900 hover:border-sky-500 hover:text-sky-100"}`,onClick:()=>An("grid"),children:["Grid",b.jsx("span",{className:`text-[10px] ${te==="grid"?"text-slate-800":"text-slate-400"}`,children:"Conversions"})]}),b.jsxs("button",{type:"button",className:`flex items-center justify-between rounded-lg border px-3 py-2 font-semibold transition ${te==="server"?"border-sky-500 bg-sky-500 text-slate-950":"border-slate-700 bg-slate-900 hover:border-sky-500 hover:text-sky-100"}`,onClick:()=>An("server"),children:["Server Session",b.jsx("span",{className:`text-[10px] ${te==="server"?"text-slate-800":"text-slate-400"}`,children:"Connect"})]})]}),b.jsx("p",{className:"mt-3 text-[11px] text-slate-400",children:"Choose a tool to open its overlay. Tap Menu again to close this panel."})]})}),Te&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"absolute inset-x-0 bottom-8 z-[1400] flex justify-center pointer-events-none",children:b.jsx(Ow,{})}),b.jsxs("div",{className:"absolute top-4 right-4 z-[1400] flex gap-3",children:[b.jsx("button",{type:"button",className:"flex h-10 w-10 items-center justify-center rounded-full border border-slate-600 bg-slate-900 text-slate-200 shadow-lg transition hover:bg-slate-800",title:"Help",onClick:()=>De(!0),children:"?"}),b.jsx("button",{onClick:()=>qt(!1),className:"flex h-10 w-10 items-center justify-center rounded-full border border-red-500/50 bg-red-900/40 text-red-200 shadow-lg backdrop-blur-sm transition hover:bg-red-900/60",title:"Exit Placing Mode",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"h-6 w-6",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),Dn&&b.jsx("div",{className:"fixed inset-0 z-[1500] flex items-center justify-center bg-slate-950/60 p-4 backdrop-blur-sm",children:b.jsxs("div",{className:"w-full max-w-sm rounded-2xl border border-slate-700 bg-slate-900 p-6 shadow-2xl",children:[b.jsx("h3",{className:"mb-2 text-lg font-bold text-slate-100",children:"How placement works"}),b.jsxs("ul",{className:"mb-6 list-disc space-y-2 pl-5 text-sm text-slate-300",children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Drag & drop:"})," The single puck in the bottom toolbar matches your active route colour. Drag it onto the map to add a checkpoint to that route at the drop point."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Control the order:"})," In the Route panel, tap ",b.jsx("em",{children:"Insert Before"})," or ",b.jsx("em",{children:"Insert After"}),". The next checkpoint you drop will slot into that position; otherwise its appended to the end."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Grid & projections:"})," Use the Grid Tools to resolve or project a coordinate. Drop the puck onto the magenta preview marker to capture that exact location."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Edit or move:"})," Drag any existing checkpoint marker to fine-tune its location, or use the accordion controls to rename, recolour, or delete it."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Exit placement:"})," Tap the red X button in the top-right corner when youre done."]})]}),b.jsx("button",{onClick:()=>De(!1),className:"w-full rounded-lg bg-sky-600 py-2.5 text-sm font-semibold text-white transition hover:bg-sky-500",children:"Got it"})]})})]})},Ey=()=>b.jsx(Cy,{});K2.polyfill({dragImageTranslateOverride:Q2.scrollBehaviourDragImageTranslateOverride});window.addEventListener("touchmove",()=>{},{passive:!1});lc.createRoot(document.getElementById("root")).render(b.jsx(Ht.StrictMode,{children:b.jsx(Ey,{})}));
